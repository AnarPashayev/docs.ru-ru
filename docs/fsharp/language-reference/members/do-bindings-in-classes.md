---
title: Привязки do в классах
description: Узнайте, как использовать F# привязку do в определении класса, которая выполняет действия при создании объекта или при первом использовании типа.
ms.date: 05/16/2016
ms.openlocfilehash: ced4f1bb17d9e23bf51cc79b5a275cc334cca013
ms.sourcegitcommit: f20dd18dbcf2275513281f5d9ad7ece6a62644b4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/30/2019
ms.locfileid: "68627590"
---
# <a name="do-bindings-in-classes"></a>Привязки do в классах

Привязка в определении класса выполняет действия при создании объекта или для статической `do` привязки при первом использовании типа. `do`

## <a name="syntax"></a>Синтаксис

```fsharp
[static] do expression
```

## <a name="remarks"></a>Примечания

Привязка отображается вместе с привязками или `let` после них, но до определений элементов в определении класса. `do` Хотя ключевое слово является необязательным для `do` привязок на уровне модуля, оно не является обязательным `do` для привязок в определении класса. `do`

Для создания каждого объекта любого заданного типа нестатические `do` привязки и нестатические `let` привязки выполняются в том порядке, в котором они указаны в определении класса. В `do` одном типе может быть несколько привязок. Нестатические `let` привязки и нестатические `do` привязки становятся телом основного конструктора. Код в разделе нестатические `do` привязки может ссылаться на параметры первичного конструктора и любые значения или функции, определенные `let` в разделе привязки.

Нестатические `do` привязки могут обращаться к членам класса, если у класса есть собственный идентификатор, определяемый `as` ключевым словом в заголовке класса, и при условии, что все варианты использования этих членов дополнены идентификатором Self для класса.

Поскольку `let` привязки инициализируют закрытые поля класса, что часто требуется, чтобы гарантировать, что элементы будут вести себя ожидаемым `do` образом, привязки обычно помещаются `let` после привязок, чтобы код в `do` привязке мог выполните с полностью инициализированным объектом. Если код пытается использовать член до завершения инициализации, создается исключение InvalidOperationException.

Статические `do` привязки могут ссылаться на статические члены или поля включающего класса, но не на элементы или поля экземпляра. Статические `do` привязки становятся частью статического инициализатора класса, который гарантированно выполняется перед первым использованием класса.

Атрибуты для `do` привязок в типах игнорируются. Если для кода, выполняемого в `do` привязке, требуется атрибут, он должен быть применен к основному конструктору.

В следующем коде класс имеет статическую `do` привязку и нестатичную `do` привязку. Объект содержит конструктор с двумя параметрами: `a` `b`, и два закрытых `let` поля определены в привязках для класса. Также определяются два свойства. Все они находятся в области в разделе нестатические `do` привязки, как показано в строке, в которой печатаются все эти значения.

[!code-fsharp[Main](~/samples/snippets/fsharp/lang-ref-1/snippet3101.fs)]

Выходные данные выглядят следующим образом.

```console
Initializing MyType.
Initializing object 1 2 2 4 8 16
```

## <a name="see-also"></a>См. также

- [Члены](index.md)
- [Классы](../classes.md)
- [Конструкторы](constructors.md)
- [Привязки `let` в классах](let-bindings-in-classes.md)
- [`do`Привязки](../functions/do-Bindings.md)
