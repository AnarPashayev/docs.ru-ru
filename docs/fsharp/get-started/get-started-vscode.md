---
title: Начало работы с F# в Visual Studio Code
description: 'Узнайте, как использовать F # с Visual Studio Code и набором подключаемых модулей Ionide.'
ms.date: 12/23/2018
ms.openlocfilehash: 11fb0d443fb7c2b3f270d45bfeaa91102ba28efd
ms.sourcegitcommit: ecd9e9bb2225eb76f819722ea8b24988fe46f34c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/05/2020
ms.locfileid: "96739806"
---
# <a name="get-started-with-f-in-visual-studio-code"></a>Начало работы с F# в Visual Studio Code

Вы можете написать F # в [Visual Studio Code](https://code.visualstudio.com) с [подключаемым модулем Ionide](https://marketplace.visualstudio.com/items?itemName=Ionide.Ionide-fsharp) , чтобы получить отличное от платформы упрощенное интегрированное окружение разработки (IDE) с технологией IntelliSense и оптимизацией кода. Посетите [Ionide.IO](https://ionide.io) , чтобы узнать больше о подключаемом модуле.

Для начала убедитесь, что у вас есть [F # и подключаемый модуль Ionide правильно установлен](install-fsharp.md#install-f-with-visual-studio-code).

## <a name="create-your-first-project-with-ionide"></a>Создание первого проекта с помощью Ionide

Чтобы создать новый проект F #, откройте командную строку и создайте новый проект с .NET Core CLI:

```dotnetcli
dotnet new console -lang "F#" -o FirstIonideProject
```

После завершения измените каталог на проект и откройте Visual Studio Code:

```console
cd FirstIonideProject
code .
```

После загрузки проекта на Visual Studio Code Вы увидите панель обозреватель решений F # в левой части окна Открыть. Это означает, что Ionide успешно загрузил только что созданный проект. Вы можете написать код в редакторе до этой точки во времени, но после того, как это произойдет, все готово к загрузке.

## <a name="configure-f-interactive"></a>Настройка F # Interactive

Во-первых, убедитесь, что скрипты .NET Core — это среда сценариев по умолчанию:

1. Откройте Параметры Visual Studio Code (параметры настройки **кода**  >  **Preferences**  >  **Settings**).
1. Найдите термин **скрипт F #**.
1. Установите флажок **FSharp: использовать скрипты пакета SDK**.

В настоящее время это необходимо из-за некоторых устаревших поведений в сценариях на основе .NET Framework, которые не работают с сценариями .NET Core, и Ionide в настоящее время выполняет эту обратную совместимость. В будущем скрипты .NET Core станут значением по умолчанию.

### <a name="write-your-first-script"></a>Написание первого скрипта

После настройки Visual Studio Code для использования сценариев .NET Core перейдите в представление обозревателя в Visual Studio Code и создайте новый файл. Назовите его *мифирстскрипт. fsx*.

Теперь добавьте в него следующий код:

[!code-fsharp[ToPigLatin](~/samples/snippets/fsharp/getting-started/to-pig-latin.fsx)]

Эта функция преобразует слово в форму [Pig Latin](https://en.wikipedia.org/wiki/Pig_Latin). Следующим шагом является его оценка с помощью F# Interactive (FSI).

Выделите всю функцию (она должна составлять 11 строк). После выделения удерживайте клавишу **ALT** и нажмите клавишу **Ввод**. В нижней части экрана появится всплывающее окно терминала, которое должно выглядеть примерно так:

![Пример вывода F# Interactive с помощью Ionide](./media/getting-started-vscode/vscode-fsi.png)

Это сделало три вещи:

1. Он запустил процесс FSI.
2. Он отправил код, выделенный вам для процесса FSI.
3. Процесс FSI проверил код, который вы отправили.

Так как вы передавали [функцию](../language-reference/functions/index.md), теперь вы можете вызвать эту функцию с помощью FSI! В интерактивном окне введите следующее:

```fsharp
toPigLatin "banana";;
```

Вы должны увидеть следующий результат:

```fsharp
val it : string = "ananabay"
```

Теперь давайте попробуем использовать гласную в качестве первой буквы. Заполните следующие поля:

```fsharp
toPigLatin "apple";;
```

Вы должны увидеть следующий результат:

```fsharp
val it : string = "appleyay"
```

Вероятно, функция работает должным образом. Поздравляем, вы только что написали первую функцию F # в Visual Studio Code и оценили ее с помощью FSI!

> [!NOTE]
> Как вы могли заметить, строки в FSI завершаются с помощью `;;` . Это обусловлено тем, что FSI позволяет вводить несколько строк. По `;;` окончании в конце кода программа FSI будет узнавать, когда код завершен.

## <a name="explaining-the-code"></a>Объяснение кода

Если вы не знаете, что делает код, выполните следующие действия.

Как видите, `toPigLatin` это функция, которая принимает слово в качестве входных данных и преобразует его в Pig-Latin представление этого слова. Ниже приведены правила для этого.

Если первый символ в слове начинается с гласной, добавьте «ура» в конец слова. Если он не начинается с гласной, переместите первый символ в конец слова и добавьте в него «гг».

Вы могли заметить следующее в FSI:

```fsharp
val toPigLatin : word:string -> string
```

Это указывает, что `toPigLatin` функция принимает в `string` качестве входных данных (с именем `word` ) и возвращает другой объект `string` . Это называется [сигнатурой типа функции](https://fsharpforfunandprofit.com/posts/function-signatures/), основной частью f #, которая является ключом к пониманию кода F #. Это также можно заметить при наведении указателя мыши на функцию в Visual Studio Code.

В теле функции можно заметить две различные части:

1. Внутренняя функция, вызываемая, `isVowel` определяет, является ли данный символ ( `c` ) гласным, проверяя, соответствует ли он одному из указанных шаблонов с помощью [сопоставления шаблонов](../language-reference/pattern-matching.md):

   [!code-fsharp[ToPigLatin](~/samples/snippets/fsharp/getting-started/to-pig-latin.fsx#L2-L6)]

2. [`if..then..else`](../language-reference/conditional-expressions-if-then-else.md)Выражение, которое проверяет, является ли первый символ гласным, и формирует возвращаемое значение из входных символов на основе того, является ли первый символ гласным или нет:

   [!code-fsharp[ToPigLatin](~/samples/snippets/fsharp/getting-started/to-pig-latin.fsx#L8-L11)]

`toPigLatin`Таким образом, поток:

Проверьте, является ли первый символ входного слова гласным. Если это так, прикрепите "ура" к концу слова. В противном случае переместите первый символ в конец слова и добавьте в него «гг».

Есть одно конечное замечание: в F # нет явной инструкции для возврата из функции. Это происходит потому, что F # основан на выражениях, а Последнее выражение, вычисленное в теле функции, определяет возвращаемое значение этой функции. Поскольку `if..then..else` сам по себе является выражением, вычисление текста `then` блока или текста `else` блока определяет значение, возвращаемое `toPigLatin` функцией.

## <a name="turn-the-console-app-into-a-pig-latin-generator"></a>Преобразование консольного приложения в генератор Pig Latin

В предыдущих разделах этой статьи был показан общий первый шаг в написании кода на F #: написание начальной функции и его интерактивное исполнение с помощью FSI. Это называется разработкой на основе REPL, где [REPL](https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop) означает "чтение-вычисление-цикл печати". Это отличный способ поэкспериментировать с функциями, пока не будет выполнена какая-то работа.

Следующим шагом в разработке на основе REPL является перемещение рабочего кода в файл реализации F #. Затем он может быть скомпилирован компилятором F # в сборку, которую можно выполнить.

Чтобы начать, откройте файл *Program. FS* , созданный ранее с помощью .NET Core CLI. Вы заметите, что в нем уже есть код.

Затем создайте новый [`module`](../language-reference/modules.md) вызов `PigLatin` и скопируйте в `toPigLatin` него созданную ранее функцию:

[!code-fsharp[ToPigLatin](~/samples/snippets/fsharp/getting-started/pig-latin.fs#L3-L14)]

Этот модуль должен быть выше `main` функции и ниже `open System` объявления. Порядок объявлений имеет значение в F #, поэтому необходимо определить функцию до ее вызова в файле.

Теперь в `main` функции вызовите функцию генератора Pig Latin для аргументов:

```fsharp
[<EntryPoint>]
let main argv =
    for name in argv do
        let newName = PigLatin.toPigLatin name
        printfn %"{name} in Pig Latin is: {newName}"

    0
```

Теперь вы можете запустить консольное приложение из командной строки:

```dotnetcli
dotnet run apple banana
```

Вы увидите, что он выводит тот же результат, что и файл скрипта, но на этот раз в качестве выполняемой программы!

## <a name="troubleshooting-ionide"></a>Устранение неполадок Ionide

Вот несколько способов устранения некоторых проблем, с которыми вы можете столкнуться.

1. Чтобы получить возможности редактирования кода Ionide, необходимо сохранить файлы F # на диске и в папке, открытой в Visual Studio Code рабочей области.
1. Если вы внесли изменения в систему или установили необходимые компоненты Ionide с Visual Studio Code открыть, перезапустите Visual Studio Code.
1. Если в каталогах проекта есть недопустимые символы, Ionide может не работать.  Переименуйте каталоги проектов, если это так.
1. Если ни одна из команд Ionide не работает, проверьте [Visual Studio Codeные привязки ключей](https://code.visualstudio.com/docs/getstarted/keybindings#_advanced-customization) , чтобы увидеть, не переопределяете их случайно.
1. Если Ionide не работает на компьютере и ни один из указанных выше проблем не устранил проблему, попробуйте удалить `ionide-fsharp` каталог на компьютере и переустановить набор подключаемых модулей.
1. Если не удалось загрузить проект (обозреватель решений F # покажет это), щелкните правой кнопкой мыши этот проект и выберите команду **Просмотреть подробности** , чтобы получить дополнительные диагностические сведения.

Ionide — это проект с открытым исходным кодом, созданный и обслуживаемый членами сообщества F #. Сообщите о проблемах и вы можете участвовать в [репозитории GitHub ionide-vscode-FSharp](https://github.com/ionide/ionide-vscode-fsharp).

Кроме того, вы можете обратиться за помощью к разработчикам Ionide и сообществу F # в [канале Ionide gitter](https://gitter.im/ionide/ionide-project).

## <a name="next-steps"></a>Дальнейшие действия

Чтобы узнать больше о F # и функциях языка, ознакомьтесь [с обзором f #](../tour.md).
