---
title: Начало работы с F# в Visual Studio Code
description: Узнайте, как использовать F# с Visual Studio Code и набором подключаемых модулей Ionide.
ms.date: 12/23/2018
ms.openlocfilehash: 2aa62bb1afc220348f884865e55c4d7de4359b7f
ms.sourcegitcommit: 19014f9c081ca2ff19652ca12503828db8239d48
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/04/2020
ms.locfileid: "76980357"
---
# <a name="get-started-with-f-in-visual-studio-code"></a>Начало работы с F# в Visual Studio Code

Вы можете писать F# в [Visual Studio Code](https://code.visualstudio.com) с [подключаемым модулем Ionide](https://marketplace.visualstudio.com/items?itemName=Ionide.Ionide-fsharp) , чтобы получить отличное от платформы упрощенное интегрированное окружение разработки (IDE) с технологией IntelliSense и оптимизацией кода. Посетите [Ionide.IO](http://ionide.io) , чтобы узнать больше о подключаемом модуле.

Для начала убедитесь, что у вас есть [ F# и правильно установлен подключаемый модуль Ionide](install-fsharp.md#install-f-with-visual-studio-code).

## <a name="create-your-first-project-with-ionide"></a>Создание первого проекта с помощью Ionide

Чтобы создать новый F# проект, откройте командную строку и создайте новый проект с .NET Core CLI:

```dotnetcli
dotnet new console -lang "F#" -o FirstIonideProject
```

После завершения измените каталог на проект и откройте Visual Studio Code:

```console
cd FirstIonideProject
code .
```

После загрузки проекта на Visual Studio Code Вы увидите панель F# Обозреватель решений в левой части окна Открыть. Это означает, что Ionide успешно загрузил только что созданный проект. Вы можете написать код в редакторе до этой точки во времени, но после того, как это произойдет, все готово к загрузке.

## <a name="configure-f-interactive"></a>Настройка F# интерактивного

Во-первых, убедитесь, что скрипты .NET Core — это среда сценариев по умолчанию:

1. Откройте **параметры Visual Studio Code (настройки > ** **кода** > **Параметры**).
1. Найдите термин  **F# сценарий**.
1. Установите флажок **FSharp: использовать скрипты пакета SDK**.

В настоящее время это необходимо из-за некоторых устаревших поведений в сценариях на основе .NET Framework, которые не работают с сценариями .NET Core, и Ionide в настоящее время выполняет эту обратную совместимость. В будущем скрипты .NET Core станут значением по умолчанию.

### <a name="write-your-first-script"></a>Напишите первый скрипт

После настройки Visual Studio Code для использования сценариев .NET Core перейдите в представление обозревателя в Visual Studio Code и создайте новый файл. Назовите его *мифирстскрипт. fsx*.

Теперь добавьте в него следующий код:

[!code-fsharp[ToPigLatin](~/samples/snippets/fsharp/getting-started/to-pig-latin.fsx)]

Эта функция преобразует слово в форму [Pig Latin](https://en.wikipedia.org/wiki/Pig_Latin). Следующим шагом является его оценка с помощью F# интерактивной (FSI).

Выделите всю функцию (она должна составлять 11 строк). После выделения удерживайте клавишу **ALT** и нажмите клавишу **Ввод**. В нижней части экрана появится всплывающее окно терминала, которое должно выглядеть примерно так:

![Пример F# интерактивного вывода с помощью Ionide](./media/getting-started-vscode/vscode-fsi.png)

Это сделало три вещи:

1. Он запустил процесс FSI.
2. Он отправил код, выделенный вам для процесса FSI.
3. Процесс FSI проверил код, который вы отправили.

Так как вы передавали [функцию](../language-reference/functions/index.md), теперь вы можете вызвать эту функцию с помощью FSI! В интерактивном окне введите следующее:

```fsharp
toPigLatin "banana";;
```

Вы должны увидеть следующий результат:

```fsharp
val it : string = "ananabay"
```

Теперь давайте попробуем использовать гласную в качестве первой буквы. Введите следующий текст:

```fsharp
toPigLatin "apple";;
```

Вы должны увидеть следующий результат:

```fsharp
val it : string = "appleyay"
```

Вероятно, функция работает должным образом. Поздравляем, вы только что написали первую F# функцию в Visual Studio Code и оценили ее с помощью FSI!

> [!NOTE]
> Как вы могли заметить, строки в FSI прерываются с `;;`. Это обусловлено тем, что FSI позволяет вводить несколько строк. `;;` в конце позволяет сообщить ФСС о завершении кода.

## <a name="explaining-the-code"></a>Объяснение кода

Если вы не знаете, что делает код, выполните следующие действия.

Как видите, `toPigLatin` — это функция, которая принимает слово в качестве входных данных и преобразует его в представление Pig-Latin этого слова. Ниже приведены правила для этого.

Если первый символ в слове начинается с гласной, добавьте «ура» в конец слова. Если он не начинается с гласной, переместите первый символ в конец слова и добавьте в него «гг».

Вы могли заметить следующее в FSI:

```fsharp
val toPigLatin : word:string -> string
```

Это означает, что `toPigLatin` — это функция, которая принимает `string` в качестве входных данных (с именем `word`) и возвращает другой `string`. Это называется [сигнатурой типа функции](https://fsharpforfunandprofit.com/posts/function-signatures/)— основной частью F# этого ключа для понимания F# кода. Это также можно заметить при наведении указателя мыши на функцию в Visual Studio Code.

В теле функции можно заметить две различные части:

1. Внутренняя функция, именуемая `isVowel`, определяющая, является ли данный символ (`c`) гласным, проверяя, соответствует ли он одному из указанных шаблонов через [сопоставление шаблонов](../language-reference/pattern-matching.md):

   [!code-fsharp[ToPigLatin](~/samples/snippets/fsharp/getting-started/to-pig-latin.fsx#L2-L6)]

2. Выражение [`if..then..else`](../language-reference/conditional-expressions-if-then-else.md) , которое проверяет, является ли первый символ гласным, и формирует возвращаемое значение из входных символов на основе того, был ли первый символ гласным или нет:

   [!code-fsharp[ToPigLatin](~/samples/snippets/fsharp/getting-started/to-pig-latin.fsx#L8-L11)]

Таким образом, поток `toPigLatin`:

Проверьте, является ли первый символ входного слова гласным. Если это так, прикрепите "ура" к концу слова. В противном случае переместите первый символ в конец слова и добавьте в него «гг».

Есть одна последняя вещь: в F#существует явная Инструкция для возврата из функции. Это происходит потому F# , что основан на выражении, а Последнее выражение, вычисленное в теле функции, определяет возвращаемое значение этой функции. Поскольку `if..then..else` является выражением, вычисление текста блока `then` или тела блока `else` определяет значение, возвращаемое функцией `toPigLatin`.

## <a name="turn-the-console-app-into-a-pig-latin-generator"></a>Преобразование консольного приложения в генератор Pig Latin

В предыдущих разделах этой статьи был показан общий первый шаг в написании F# кода: написание начальной функции и ее интерактивное исполнение с помощью FSI. Это называется разработкой на основе REPL, где [REPL](https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop) означает "чтение-вычисление-цикл печати". Это отличный способ поэкспериментировать с функциями, пока не будет выполнена какая-то работа.

Следующим шагом в разработке на основе REPL является перемещение рабочего кода в файл F# реализации. Затем он может быть скомпилирован F# компилятором в сборку, которую можно выполнить.

Чтобы начать, откройте файл *Program. FS* , созданный ранее с помощью .NET Core CLI. Вы заметите, что в нем уже есть код.

Затем создайте новый [`module`](../language-reference/modules.md) с именем `PigLatin` и скопируйте в него созданную ранее функцию `toPigLatin`:

[!code-fsharp[ToPigLatin](~/samples/snippets/fsharp/getting-started/pig-latin.fs#L3-L14)]

Этот модуль должен быть выше `main` функции и под объявлением `open System`. Порядок объявлений имеет значение F#, поэтому необходимо определить функцию перед вызовом ее в файле.

Теперь в функции `main` вызовите функцию генератора латиницы pig для аргументов:

```fsharp
[<EntryPoint>]
let main argv =
    for name in argv do
        let newName = PigLatin.toPigLatin name
        printfn "%s in Pig Latin is: %s" name newName

    0
```

Теперь вы можете запустить консольное приложение из командной строки:

```dotnetcli
dotnet run apple banana
```

Вы увидите, что он выводит тот же результат, что и файл скрипта, но на этот раз в качестве выполняемой программы!

## <a name="troubleshooting-ionide"></a>Устранение неполадок Ionide

Вот несколько способов устранения некоторых проблем, с которыми вы можете столкнуться.

1. Чтобы получить возможности редактирования кода Ionide, необходимо сохранить F# файлы на диске и в папке, открытой в Visual Studio Code рабочей области.
1. Если вы внесли изменения в систему или установили необходимые компоненты Ionide с Visual Studio Code открыть, перезапустите Visual Studio Code.
1. Если в каталогах проекта есть недопустимые символы, Ionide может не работать.  Переименуйте каталоги проектов, если это так.
1. Если ни одна из команд Ionide не работает, проверьте [Visual Studio Codeные привязки ключей](https://code.visualstudio.com/docs/getstarted/keybindings#_advanced-customization) , чтобы увидеть, не переопределяете их случайно.
1. Если Ionide не работает на компьютере и ни один из указанных выше проблем не устранил проблему, попробуйте удалить `ionide-fsharp`ный каталог на компьютере и переустановить набор подключаемых модулей.
1. Если не удалось загрузить проект ( F# Обозреватель решений покажет это), щелкните правой кнопкой мыши этот проект и выберите команду **Просмотреть подробности** , чтобы получить дополнительные диагностические сведения.

Ionide — это проект с открытым исходным кодом, созданный и обслуживаемый членами F# сообщества. Сообщите о проблемах и вы можете участвовать в [репозитории GitHub ionide-vscode-FSharp](https://github.com/ionide/ionide-vscode-fsharp).

Кроме того, вы можете запросить дополнительную помощь от разработчиков Ionide и F# сообщества в [канале Ionide gitter](https://gitter.im/ionide/ionide-project).

## <a name="next-steps"></a>Следующие шаги

Дополнительные сведения о F# и функциях языка см. в статье [Обзор F# ](../tour.md).
