---
title: Начало работы с F# в Visual Studio Code
description: Узнайте, как использовать F# с Visual Studio Code и набором подключаемых модулей Ionide.
ms.date: 12/23/2018
ms.openlocfilehash: 2fa0518488d37b2130aaba96028ac92dac77eb97
ms.sourcegitcommit: a2d0e1f66367367065bc8dc0dde488ab536da73f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/18/2019
ms.locfileid: "71082989"
---
# <a name="get-started-with-f-in-visual-studio-code"></a>Начало работы с F# в Visual Studio Code

Вы можете писать F# в [Visual Studio Code](https://code.visualstudio.com) с помощью [подключаемого модуля Ionide](https://marketplace.visualstudio.com/items?itemName=Ionide.Ionide-fsharp) , чтобы получить отличное от платформы упрощенное интегрированное окружение разработки (IDE) с технологией IntelliSense и базовым рефакторингом кода. Посетите [Ionide.IO](http://ionide.io) , чтобы узнать больше о подключаемом модуле.

Для начала убедитесь, что у вас есть [ F# и правильно установлен подключаемый модуль Ionide](install-fsharp.md#install-f-with-visual-studio-code).

> [!NOTE]
> Ionide будет создавать .NET Framework F# проекты, а не как DotNet Core, которые могут иметь проблемы совместимости между платформами. Если вы используете **Linux** или **OSX**, проще всего начать работу с помощью [программ командной строки](get-started-command-line.md).

## <a name="creating-your-first-project-with-ionide"></a>Создание первого проекта с помощью Ionide

Чтобы создать новый F# проект, откройте Visual Studio Code в новой папке (вы можете присвоить ему любое имя).

Затем откройте палитру команд (**представление > палитра команд**) и введите следующую команду:

```console
> F# new project
```

Это работает на платформе проекта [подделки](https://github.com/fsharp-editing/Forge) .

> [!NOTE]
> Если параметры шаблона не отображаются, попробуйте обновить шаблоны, выполнив следующую команду в палитре команд: `>F#: Refresh Project Templates`.

Выберите "F#: Новый проект ", нажав клавишу **Ввод**. Откроется следующий шаг, предназначенный для выбора шаблона проекта.

Выберите шаблон и нажмите клавишу **ВВОД.** `classlib`

Затем выберите каталог для создания проекта в. Если оставить его пустым, то будет использовать текущий каталог.

Наконец, назовите проект на последнем шаге. F#использует [сценарий Pascal](http://c2.com/cgi/wiki?PascalCase) для имен проектов. В этой статье `ClassLibraryDemo` в качестве имени используется. Введя нужное имя для проекта, нажмите клавишу **Ввод**.

Если вы прийдете к предыдущему шагу, вы должны получить в левой части рабочую область Visual Studio Code, которая будет выглядеть следующим образом:

1. Сам F# проект под `ClassLibraryDemo` папкой.
2. Правильная структура каталогов для добавления пакетов через [`Paket`](https://fsprojects.github.io/Paket/).
3. Скрипт кросс-платформенной сборки с [`FAKE`](https://fsharp.github.io/FAKE/).
4. `paket.exe` Исполняемый файл, который может получать пакеты и разрешать зависимости.
5. Файл `.gitignore` , если требуется добавить этот проект в систему управления версиями на основе Git.

## <a name="writing-some-code"></a>Написание кода

Откройте папку *класслибраридемо* .  Вы должны увидеть следующие файлы:

1. `ClassLibraryDemo.fs`— файл F# реализации с определенным классом.
2. `ClassLibraryDemo.fsproj`— файл F# проекта, используемый для построения этого проекта.
3. `Script.fsx`— файл F# скрипта, который загружает исходный файл.
4. `paket.references`— файл пакет, указывающий зависимости проекта.

Откройте `Script.fsx`и добавьте в его конец следующий код:

[!code-fsharp[ToPigLatin](~/samples/snippets/fsharp/getting-started/to-pig-latin.fsx)]

Эта функция преобразует слово в форму [Pig Latin](https://en.wikipedia.org/wiki/Pig_Latin). Следующим шагом является его оценка с помощью F# интерактивной (FSI).

Выделите всю функцию (она должна составлять 11 строк). После выделения удерживайте клавишу **ALT** и нажмите клавишу **Ввод**. Обратите внимание на всплывающее окно окна, которое должно выглядеть примерно так:

![Пример F# интерактивного вывода с помощью Ionide](./media/getting-started-vscode/vscode-fsi.png)

Это сделало три вещи:

1. Он запустил процесс FSI.
2. Он отправил код, выделенный вам для процесса FSI.
3. Процесс FSI проверил код, который вы отправили.

Так как вы передавали [функцию](../language-reference/functions/index.md), теперь вы можете вызвать эту функцию с помощью FSI! В интерактивном окне введите следующее:

```fsharp
toPigLatin "banana";;
```

Вы должны увидеть следующий результат:

```fsharp
val it : string = "ananabay"
```

Теперь давайте попробуем использовать гласную в качестве первой буквы. Введите следующий текст:

```fsharp
toPigLatin "apple";;
```

Вы должны увидеть следующий результат:

```fsharp
val it : string = "appleyay"
```

Вероятно, функция работает должным образом. Поздравляем, вы только что написали первую F# функцию в Visual Studio Code и оценили ее с помощью FSI!

> [!NOTE]
> Как вы могли заметить, строки в FSI завершаются с помощью `;;`. Это обусловлено тем, что FSI позволяет вводить несколько строк. `;;` По окончании в конце кода программа FSI будет узнавать, когда код завершен.

## <a name="explaining-the-code"></a>Объяснение кода

Если вы не знаете, что делает код, выполните следующие действия.

Как видите, `toPigLatin` функция представляет собой функцию, которая принимает слово в качестве входных данных и преобразует его в Pig-Latin представление этого слова. Ниже приведены правила для этого.

Если первый символ в слове начинается с гласной, добавьте «ура» в конец слова. Если он не начинается с гласной, переместите первый символ в конец слова и добавьте в него «гг».

Вы могли заметить следующее в FSI:

```fsharp
val toPigLatin : word:string -> string
```

Это указывает, `toPigLatin` что функция принимает в качестве входных `string` данных (с именем `word`) и возвращает другой `string`объект. Это называется [сигнатурой типа функции](https://fsharpforfunandprofit.com/posts/function-signatures/)— основной частью F# этого ключа для понимания F# кода. Это также можно заметить при наведении указателя мыши на функцию в Visual Studio Code.

В теле функции можно заметить две различные части:

1. Внутренняя функция, вызываемая `isVowel`, определяет, является ли данный символ (`c`) гласным, проверяя, соответствует ли он одному из указанных шаблонов с помощью [сопоставления шаблонов](../language-reference/pattern-matching.md):

   [!code-fsharp[ToPigLatin](~/samples/snippets/fsharp/getting-started/to-pig-latin.fsx#L2-L6)]

2. [`if..then..else`](../language-reference/conditional-expressions-if-then-else.md) Выражение, которое проверяет, является ли первый символ гласным, и формирует возвращаемое значение из входных символов на основе того, является ли первый символ гласным или нет:

   [!code-fsharp[ToPigLatin](~/samples/snippets/fsharp/getting-started/to-pig-latin.fsx#L8-L11)]

Таким образом, `toPigLatin` поток:

Проверьте, является ли первый символ входного слова гласным. Если это так, прикрепите "ура" к концу слова. В противном случае переместите первый символ в конец слова и добавьте в него «гг».

Есть одно конечное замечание: нет явных инструкций для возврата из функции, в отличие от многих других языков. Это происходит потому F# , что основан на выражениях, а Последнее выражение в теле функции является возвращаемым значением. Поскольку `if..then..else` сам по себе является выражением, в зависимости `then` от входного значения будет возвращаться `else` тело блока или текст блока.

## <a name="moving-your-script-code-into-the-implementation-file"></a>Перемещение кода скрипта в файл реализации

В предыдущих разделах этой статьи был показан общий первый шаг в написании F# кода: написание начальной функции и ее интерактивное исполнение с помощью FSI. Это называется разработкой на основе REPL, где [REPL](https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop) означает "чтение-вычисление-цикл печати". Это отличный способ поэкспериментировать с функциями, пока не будет выполнена какая-то работа.

Следующим шагом в разработке на основе REPL является перемещение рабочего кода в файл F# реализации. Затем он может быть скомпилирован F# компилятором в сборку, которую можно выполнить.

Чтобы начать, откройте `ClassLibraryDemo.fs`.  Вы заметите, что в нем уже есть код. Удалите определение класса, но обязательно оставьте [`namespace`](../language-reference/namespaces.md) объявление в верхней части.

Затем создайте новый [`module`](../language-reference/modules.md) вызов `PigLatin` и скопируйте `toPigLatin` в него функцию:

[!code-fsharp[ToPigLatin](~/samples/snippets/fsharp/getting-started/pig-latin.fs#L1-L14)]

Затем снова откройте `Script.fsx` файл и удалите функцию целиком `toPigLatin` , но убедитесь в том, что в файле хранятся следующие две строки:

```fsharp
#load "ClassLibraryDemo.fs"
open ClassLibraryDemo
```

Выберите обе строки текста и нажмите клавиши ALT + ВВОД, чтобы выполнить эти строки в FSI. Это позволит загрузить содержимое библиотеки Pig Latin в процесс FSI и `open` `ClassLibraryDemo` пространство имен, чтобы получить доступ к функциональным возможностям.

Затем в окне FSI вызовите функцию с `PigLatin` модулем, который вы определили ранее:

```console
> PigLatin.toPigLatin "banana";;
val it : string = "ananabay"
> PigLatin.toPigLatin "apple";;
val it : string = "appleyay"
```

Готово! Вы получаете те же результаты, что и раньше, но теперь загрузили их из файла F# реализации. Основное отличие заключается в том, F# что исходные файлы компилируются в сборки, которые могут выполняться где угодно, а не только в FSI.

## <a name="summary"></a>Сводка

В этой статье вы узнали:

1. Как настроить Visual Studio Code с помощью Ionide.
2. Как создать первый F# проект с помощью Ionide.
3. Как использовать F# скрипты для написания первой F# функции в Ionide, а затем выполнять ее в FSI.
4. Как перенести код скрипта в F# источник и затем вызвать этот код из FSI.

Теперь вы можете писать гораздо больше F# кода, используя Visual Studio Code и Ionide.

## <a name="troubleshooting"></a>Устранение неполадок

Вот несколько способов устранения некоторых проблем, с которыми вы можете столкнуться.

1. Чтобы получить возможности редактирования кода Ionide, необходимо сохранить F# файлы на диске и в папке, открытой в Visual Studio Code рабочей области.
2. Если вы внесли изменения в систему или установили необходимые компоненты Ionide с Visual Studio Code открыть, перезапустите Visual Studio Code.
3. Убедитесь, что вы можете использовать F# компилятор и F# интерактивное взаимодействие из командной строки без полного пути. Это можно сделать `fsc` , введя в командной строке F# компилятора `fsi` , или `fsharpi` для визуальных F# инструментов в Windows и Mono в Mac/Linux соответственно.
4. Если в каталогах проекта есть недопустимые символы, Ionide может не работать.  Переименуйте каталоги проектов, если это так.
5. Если ни одна из команд Ionide не работает, проверьте [Visual Studio Code сочетания клавиш](https://code.visualstudio.com/docs/customization/keybindings#_customizing-shortcuts) , чтобы узнать, не переопределяете их случайно.
6. Если Ionide не работает на компьютере и ни один из указанных выше проблем не устранил проблему, попробуйте удалить `ionide-fsharp` каталог на компьютере и переустановить набор подключаемых модулей.

Ionide — это проект с открытым исходным кодом, созданный и обслуживаемый членами F# сообщества. Сообщите о проблемах и вы можете участвовать [в Ionide-VSCode: Репозиторий](https://github.com/ionide/ionide-vscode-fsharp)GitHub для FSharp.

Если у вас возникли проблемы с отчетом, следуйте [инструкциям по получению журналов для использования при сообщении о возникшей ошибке](https://github.com/ionide/ionide-vscode-fsharp#how-to-get-logs-for-debugging--issue-reporting).

Кроме того, вы можете запросить дополнительную помощь от разработчиков Ionide и F# сообщества в [канале Ionide gitter](https://gitter.im/ionide/ionide-project).

## <a name="next-steps"></a>Следующие шаги

Дополнительные сведения о F# и функциях языка см. в статье [Обзор F# ](../tour.md).
