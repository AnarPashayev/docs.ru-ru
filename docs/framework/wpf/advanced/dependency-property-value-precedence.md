---
title: Приоритет значения свойств зависимостей
ms.date: 03/30/2017
helpviewer_keywords:
- dependency properties [WPF], classes as owners
- dependency properties [WPF], metadata
- classes [WPF], owners of dependency properties
- metadata [WPF], dependency properties
ms.assetid: 1fbada8e-4867-4ed1-8d97-62c07dad7ebc
ms.openlocfilehash: 9adcd19ea48d62f4fdcab3380252ae8ec8398296
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2019
ms.locfileid: "59315690"
---
# <a name="dependency-property-value-precedence"></a><span data-ttu-id="a307f-102">Приоритет значения свойств зависимостей</span><span class="sxs-lookup"><span data-stu-id="a307f-102">Dependency Property Value Precedence</span></span>
<a name="introduction"></a> <span data-ttu-id="a307f-103">В этом разделе рассказывается, как работа системы свойств [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] может повлиять на значение свойства зависимости, и описывается приоритет применения аспектов системы свойств к действительному значению свойства.</span><span class="sxs-lookup"><span data-stu-id="a307f-103">This topic explains how the workings of the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] property system can affect the value of a dependency property, and describes the precedence by which aspects of the property system apply to the effective value of a property.</span></span>  

<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="a307f-104">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="a307f-104">Prerequisites</span></span>  
 <span data-ttu-id="a307f-105">Предполагается, что вы имеете представление о свойствах зависимости с точки зрения потребителя существующих свойств зависимостей в классах [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] и ознакомились с разделом [Общие сведения о свойствах зависимости](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a307f-105">This topic assumes that you understand dependency properties from the perspective of a consumer of existing dependency properties on [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] classes, and have read [Dependency Properties Overview](dependency-properties-overview.md).</span></span> <span data-ttu-id="a307f-106">Чтобы выполнить примеры в этом разделе, следует также иметь представление о [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] и написании приложений [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a307f-106">To follow the examples in this topic, you should also understand [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] and know how to write [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] applications.</span></span>  
  
<a name="intro"></a>   
## <a name="the-wpf-property-system"></a><span data-ttu-id="a307f-107">Система свойств WPF</span><span class="sxs-lookup"><span data-stu-id="a307f-107">The WPF Property System</span></span>  
 <span data-ttu-id="a307f-108">Система свойств [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] предлагает эффективный способ определения значений свойств зависимостей с помощью множества факторов, включая такие возможности, как проверка свойства в режиме реального времени, позднее связывание и уведомление связанных свойств об изменениях значений других свойств.</span><span class="sxs-lookup"><span data-stu-id="a307f-108">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system offers a powerful way to have the value of dependency properties be determined by a variety of factors, enabling features such as real-time property validation, late binding, and notifying related properties of changes to values for other properties.</span></span> <span data-ttu-id="a307f-109">Точный порядок и логика, используемые для определения значений свойства зависимости, достаточно сложны.</span><span class="sxs-lookup"><span data-stu-id="a307f-109">The exact order and logic that is used to determine dependency property values is reasonably complex.</span></span> <span data-ttu-id="a307f-110">Знание этого порядка поможет избежать ненужной настройки свойств и путаницы в вопросах, почему определенные попытки повлиять на значение свойства зависимости или спрогнозировать его не дали ожидаемого результата.</span><span class="sxs-lookup"><span data-stu-id="a307f-110">Knowing this order will help you avoid unnecessary property setting, and might also clear up confusion over exactly why some attempt to influence or anticipate a dependency property value did not end up resulting in the value you expected.</span></span>  
  
<a name="multiple_sets"></a>   
## <a name="dependency-properties-might-be-set-in-multiple-places"></a><span data-ttu-id="a307f-111">Свойства зависимостей могут быть "установлены" в нескольких расположениях</span><span class="sxs-lookup"><span data-stu-id="a307f-111">Dependency Properties Might Be "Set" in Multiple Places</span></span>  
 <span data-ttu-id="a307f-112">Ниже приведен пример [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] где то же свойство (<xref:System.Windows.Controls.Control.Background%2A>) имеет три разных «set» операции, которые могут повлиять на значение.</span><span class="sxs-lookup"><span data-stu-id="a307f-112">The following is example [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] where the same property (<xref:System.Windows.Controls.Control.Background%2A>) has three different "set" operations that might influence the value.</span></span>  
  
 [!code-xaml[PropertiesOvwSupport#DPPrecedence](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page4.xaml#dpprecedence)]  
  
 <span data-ttu-id="a307f-113">Как вы считаете, какой цвет будет здесь использован: красный, зеленый или синий?</span><span class="sxs-lookup"><span data-stu-id="a307f-113">Here, which color do you expect will apply—red, green, or blue?</span></span>  
  
 <span data-ttu-id="a307f-114">За исключением динамических значений и приведения наборы локальных свойств устанавливаются с наивысшим приоритетом.</span><span class="sxs-lookup"><span data-stu-id="a307f-114">With the exception of animated values and coercion, local property sets are set at the highest precedence.</span></span> <span data-ttu-id="a307f-115">Если значение задается локально, можно ожидать, что значение будет соблюдаться, даже если выше все стили и шаблоны элемента управления.</span><span class="sxs-lookup"><span data-stu-id="a307f-115">If you set a value locally you can expect that the value will be honored, even above any styles or control templates.</span></span> <span data-ttu-id="a307f-116">В этом примере <xref:System.Windows.Controls.Control.Background%2A> задается значение Red, локально.</span><span class="sxs-lookup"><span data-stu-id="a307f-116">Here in the example, <xref:System.Windows.Controls.Control.Background%2A> is set to Red locally.</span></span> <span data-ttu-id="a307f-117">Таким образом, стиль, определенный в этой области, даже если это неявный стиль, который в противном случае будет применяться ко всем элементам этого типа в этой области, не наивысший приоритет для <xref:System.Windows.Controls.Control.Background%2A> свойства его значение.</span><span class="sxs-lookup"><span data-stu-id="a307f-117">Therefore, the style defined in this scope, even though it is an implicit style that would otherwise apply to all elements of that type in that scope, is not the highest precedence for giving the <xref:System.Windows.Controls.Control.Background%2A> property its value.</span></span>  <span data-ttu-id="a307f-118">Если удалить локальное значение Red из этого экземпляра Button, то стиль получит приоритет и кнопка получит значение Background из стиля.</span><span class="sxs-lookup"><span data-stu-id="a307f-118">If you removed the local value of Red from that Button instance, then the style would have precedence and the button would obtain the Background value from the style.</span></span>  <span data-ttu-id="a307f-119">Внутри стиля приоритет получают триггеры, поэтому кнопка будет синей, если указатель мыши находится над ней, и зеленым в других случаях.</span><span class="sxs-lookup"><span data-stu-id="a307f-119">Within the style, triggers take precedence, so the button will be blue if the mouse is over it, and green otherwise.</span></span>  
  
<a name="listing"></a>   
## <a name="dependency-property-setting-precedence-list"></a><span data-ttu-id="a307f-120">Список приоритета настройки свойств зависимости</span><span class="sxs-lookup"><span data-stu-id="a307f-120">Dependency Property Setting Precedence List</span></span>  
 <span data-ttu-id="a307f-121">Ниже приведен точный порядок, который использует система свойств при присвоении значений времени выполнения свойствам зависимостей.</span><span class="sxs-lookup"><span data-stu-id="a307f-121">The following is the definitive order that the property system uses when assigning the run-time values of dependency properties.</span></span> <span data-ttu-id="a307f-122">Сначала указаны элементы с наивысшим приоритетом.</span><span class="sxs-lookup"><span data-stu-id="a307f-122">Highest precedence is listed first.</span></span> <span data-ttu-id="a307f-123">Этот список включает некоторые обобщения, сделанные в разделе [Общие сведения о свойствах зависимостей](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a307f-123">This list expands on some of the generalizations made in the [Dependency Properties Overview](dependency-properties-overview.md).</span></span>  
  
1. <span data-ttu-id="a307f-124">**Приведение системы свойств.**</span><span class="sxs-lookup"><span data-stu-id="a307f-124">**Property system coercion.**</span></span> <span data-ttu-id="a307f-125">Дополнительные сведения о приведении см. в теме [Приведение, анимация и базовое значение](#animations) далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="a307f-125">For details on coercion, see [Coercion, Animation, and Base Value](#animations) later in this topic.</span></span>  
  
2. <span data-ttu-id="a307f-126">**Активные анимации или анимации с поведением Hold.**</span><span class="sxs-lookup"><span data-stu-id="a307f-126">**Active animations, or animations with a Hold behavior.**</span></span> <span data-ttu-id="a307f-127">Анимация свойства имеет практический эффект только в том случае, если она может иметь приоритет над базовым (неанимированным) значением, даже если это значение было задано локально.</span><span class="sxs-lookup"><span data-stu-id="a307f-127">In order to have any practical effect, an animation of a property must be able to have precedence over the base (unanimated) value, even if that value was set locally.</span></span> <span data-ttu-id="a307f-128">Дополнительные сведения см. в теме [Приведение, анимация и базовое значение](#animations) далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="a307f-128">For details, see [Coercion, Animation, and Base Value](#animations) later in this topic.</span></span>  
  
3. <span data-ttu-id="a307f-129">**Локальное значение.**</span><span class="sxs-lookup"><span data-stu-id="a307f-129">**Local value.**</span></span> <span data-ttu-id="a307f-130">Локальное значение может устанавливаться с помощью «оболочки» свойства, которое приравнивается к настройке атрибут или свойство в качестве элемента [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], или с помощью вызова <xref:System.Windows.DependencyObject.SetValue%2A> [!INCLUDE[TLA#tla_api](../../../../includes/tlasharptla-api-md.md)] с помощью свойства конкретного экземпляра.</span><span class="sxs-lookup"><span data-stu-id="a307f-130">A local value might be set through the convenience of the "wrapper" property, which also equates to setting as an attribute or property element in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], or by a call to the <xref:System.Windows.DependencyObject.SetValue%2A> [!INCLUDE[TLA#tla_api](../../../../includes/tlasharptla-api-md.md)] using a property of a specific instance.</span></span> <span data-ttu-id="a307f-131">Если задано локальное значение с помощью привязки или ресурса, каждый из них функционирует в таком приоритете, как если бы было задано прямое значение.</span><span class="sxs-lookup"><span data-stu-id="a307f-131">If you set a local value by using a binding or a resource, these each act in the precedence as if a direct value was set.</span></span>  
  
4. <span data-ttu-id="a307f-132">**Свойства шаблона TemplatedParent.**</span><span class="sxs-lookup"><span data-stu-id="a307f-132">**TemplatedParent template properties.**</span></span> <span data-ttu-id="a307f-133">Элемент имеет <xref:System.Windows.FrameworkElement.TemplatedParent%2A> если она была создана как часть шаблона ( <xref:System.Windows.Controls.ControlTemplate> или <xref:System.Windows.DataTemplate>).</span><span class="sxs-lookup"><span data-stu-id="a307f-133">An element has a <xref:System.Windows.FrameworkElement.TemplatedParent%2A> if it was created as part of a template (a <xref:System.Windows.Controls.ControlTemplate> or <xref:System.Windows.DataTemplate>).</span></span> <span data-ttu-id="a307f-134">Дополнительные сведения о случаях его применения см. в теме [TemplatedParent](#templatedparent) далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="a307f-134">For details on when this applies, see [TemplatedParent](#templatedparent) later in this topic.</span></span> <span data-ttu-id="a307f-135">В шаблоне действует следующий приоритет:</span><span class="sxs-lookup"><span data-stu-id="a307f-135">Within the template, the following precedence applies:</span></span>  
  
    1.  <span data-ttu-id="a307f-136">Триггеры — с <xref:System.Windows.FrameworkElement.TemplatedParent%2A> шаблона.</span><span class="sxs-lookup"><span data-stu-id="a307f-136">Triggers from the <xref:System.Windows.FrameworkElement.TemplatedParent%2A> template.</span></span>  
  
    2.  <span data-ttu-id="a307f-137">Наборы свойств (обычно через [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] атрибуты) в <xref:System.Windows.FrameworkElement.TemplatedParent%2A> шаблона.</span><span class="sxs-lookup"><span data-stu-id="a307f-137">Property sets (typically through [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] attributes) in the <xref:System.Windows.FrameworkElement.TemplatedParent%2A> template.</span></span>  
  
5. <span data-ttu-id="a307f-138">**Неявный стиль.**</span><span class="sxs-lookup"><span data-stu-id="a307f-138">**Implicit style.**</span></span> <span data-ttu-id="a307f-139">Применяется только к свойству `Style`.</span><span class="sxs-lookup"><span data-stu-id="a307f-139">Applies only to the `Style` property.</span></span> <span data-ttu-id="a307f-140">Свойство `Style` заполняется любым ресурсом стиля с ключом, соответствующим типу этого элемента.</span><span class="sxs-lookup"><span data-stu-id="a307f-140">The `Style` property is filled by any style resource with a key that matches the type of that element.</span></span> <span data-ttu-id="a307f-141">Ресурс стиля должен существовать либо на странице, либо в приложении; поиск ресурса неявного стиля в темах не выполняется.</span><span class="sxs-lookup"><span data-stu-id="a307f-141">That style resource must exist either in the page or the application; lookup for an implicit style resource does not proceed into the themes.</span></span>  
  
6. <span data-ttu-id="a307f-142">**Триггеры стилей.**</span><span class="sxs-lookup"><span data-stu-id="a307f-142">**Style triggers.**</span></span> <span data-ttu-id="a307f-143">Триггеры в стилях со страницы или из приложения (эти стили могут быть явными или неявными, но не стилями по умолчанию, поскольку последние имеют более низкий приоритет).</span><span class="sxs-lookup"><span data-stu-id="a307f-143">The triggers within styles from page or application (these styles might be either explicit or implicit styles, but not from the default styles, which have lower precedence).</span></span>  
  
7. <span data-ttu-id="a307f-144">**Триггеры шаблонов.**</span><span class="sxs-lookup"><span data-stu-id="a307f-144">**Template triggers.**</span></span> <span data-ttu-id="a307f-145">Любой триггер из шаблона внутри стиля или непосредственно применяемый шаблон.</span><span class="sxs-lookup"><span data-stu-id="a307f-145">Any trigger from a template within a style, or a directly applied template.</span></span>  
  
8. <span data-ttu-id="a307f-146">**Методы задания стилей.**</span><span class="sxs-lookup"><span data-stu-id="a307f-146">**Style setters.**</span></span> <span data-ttu-id="a307f-147">Значения из <xref:System.Windows.Setter> в стилях со страницы или приложения.</span><span class="sxs-lookup"><span data-stu-id="a307f-147">Values from a <xref:System.Windows.Setter> within styles from page or application.</span></span>  
  
9. <span data-ttu-id="a307f-148">**Стиль (тема) по умолчанию.**</span><span class="sxs-lookup"><span data-stu-id="a307f-148">**Default (theme) style.**</span></span> <span data-ttu-id="a307f-149">Подробные сведения о применении этих стилей и связи стилей тем с шаблонами в стилях тем см. в теме [Стили (темы) по умолчанию](#themestyles) далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="a307f-149">For details on when this applies, and how theme styles relate to the templates within theme styles, see [Default (Theme) Styles](#themestyles) later in this topic.</span></span> <span data-ttu-id="a307f-150">В стиле по умолчанию применяется следующий порядок приоритета:</span><span class="sxs-lookup"><span data-stu-id="a307f-150">Within a default style, the following order of precedence applies:</span></span>  
  
    1.  <span data-ttu-id="a307f-151">Активные триггеры в тематическом стиле.</span><span class="sxs-lookup"><span data-stu-id="a307f-151">Active triggers in the theme style.</span></span>  
  
    2.  <span data-ttu-id="a307f-152">Методы задания в тематическом стиле.</span><span class="sxs-lookup"><span data-stu-id="a307f-152">Setters in the theme style.</span></span>  
  
10. <span data-ttu-id="a307f-153">**Наследование.**</span><span class="sxs-lookup"><span data-stu-id="a307f-153">**Inheritance.**</span></span> <span data-ttu-id="a307f-154">Некоторые свойства зависимостей наследуют свои значения от родительского элемента к дочерним элементам, так что их не требуется задавать по отдельности на каждом элементе в приложении.</span><span class="sxs-lookup"><span data-stu-id="a307f-154">A few dependency properties inherit their values from parent element to child elements, such that they need not be set specifically on each element throughout an application.</span></span> <span data-ttu-id="a307f-155">Подробные сведения см. в разделе [Наследование значений свойств](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="a307f-155">For details see [Property Value Inheritance](property-value-inheritance.md).</span></span>  
  
11. <span data-ttu-id="a307f-156">**Значение по умолчанию из метаданных свойства зависимости.**</span><span class="sxs-lookup"><span data-stu-id="a307f-156">**Default value from dependency property metadata.**</span></span> <span data-ttu-id="a307f-157">Любое заданное свойство зависимостей может иметь значение по умолчанию, заданное при регистрации системы свойств конкретного свойства.</span><span class="sxs-lookup"><span data-stu-id="a307f-157">Any given dependency property may have a default value as established by the property system registration of that particular property.</span></span> <span data-ttu-id="a307f-158">Кроме того, производные классы, которые наследуют свойства зависимостей, имеют возможность переопределить эти метаданные (включая значение по умолчанию) на уровне отдельных типов.</span><span class="sxs-lookup"><span data-stu-id="a307f-158">Also, derived classes that inherit a dependency property have the option to override that metadata (including the default value) on a per-type basis.</span></span> <span data-ttu-id="a307f-159">Дополнительные сведения см. в разделе [Метаданные свойств зависимостей](dependency-property-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="a307f-159">See [Dependency Property Metadata](dependency-property-metadata.md) for more information.</span></span> <span data-ttu-id="a307f-160">Поскольку наследование для наследуемого свойства проверяется до значения по умолчанию, значение по умолчанию родительского элемента имеет приоритет над дочерним элементом.</span><span class="sxs-lookup"><span data-stu-id="a307f-160">Because inheritance is checked before default value, for an inherited property, a parent element default value takes precedence over a child element.</span></span>  <span data-ttu-id="a307f-161">Следовательно, если наследуемое свойство нигде не задано, используется значение по умолчанию, как указано в корневом элементе, либо родительское значение используется вместо значения по умолчанию дочернего элемента.</span><span class="sxs-lookup"><span data-stu-id="a307f-161">Consequently, if an inheritable property is not set anywhere, the default value as specified on the root or parent is used instead of the child element default value.</span></span>  
  
<a name="templatedparent"></a>   
## <a name="templatedparent"></a><span data-ttu-id="a307f-162">TemplatedParent</span><span class="sxs-lookup"><span data-stu-id="a307f-162">TemplatedParent</span></span>  
 <span data-ttu-id="a307f-163">TemplatedParent как приоритетный элемент не применяется ни к какому свойству элемента, объявляемому непосредственно в стандартной разметке приложения.</span><span class="sxs-lookup"><span data-stu-id="a307f-163">TemplatedParent as a precedence item does not apply to any property of an element that you declare directly in standard application markup.</span></span> <span data-ttu-id="a307f-164">Понятие TemplatedParent существует только для дочерних элементов в пределах визуального дерева, которые создаются в результате применения шаблона.</span><span class="sxs-lookup"><span data-stu-id="a307f-164">The TemplatedParent concept exists only for child items within a visual tree that come into existence through the application of the template.</span></span> <span data-ttu-id="a307f-165">Когда система свойств ищет <xref:System.Windows.FrameworkElement.TemplatedParent%2A> шаблона для значения, она ищет шаблон, который создал этот элемент.</span><span class="sxs-lookup"><span data-stu-id="a307f-165">When the property system searches the <xref:System.Windows.FrameworkElement.TemplatedParent%2A> template for a value, it is searching the template that created that element.</span></span> <span data-ttu-id="a307f-166">Значения свойств из <xref:System.Windows.FrameworkElement.TemplatedParent%2A> шаблон обычно функционируют, как если бы они были установлены в качестве локальное значение для дочернего элемента, но это имеет меньший приоритет относительно локального значения существует, так как шаблоны являются совместно.</span><span class="sxs-lookup"><span data-stu-id="a307f-166">The property values from the <xref:System.Windows.FrameworkElement.TemplatedParent%2A> template generally act as if they were set as a local value on the child element, but this lesser precedence versus the local value exists because the templates are potentially shared.</span></span> <span data-ttu-id="a307f-167">Дополнительные сведения см. в разделе <xref:System.Windows.FrameworkElement.TemplatedParent%2A>.</span><span class="sxs-lookup"><span data-stu-id="a307f-167">For details, see <xref:System.Windows.FrameworkElement.TemplatedParent%2A>.</span></span>  
  
<a name="style_property"></a>   
## <a name="the-style-property"></a><span data-ttu-id="a307f-168">Свойство стиля</span><span class="sxs-lookup"><span data-stu-id="a307f-168">The Style Property</span></span>  
 <span data-ttu-id="a307f-169">Порядок поиска, описанный выше ко всем возможным свойствам зависимостей, кроме одного: <xref:System.Windows.FrameworkElement.Style%2A> свойство.</span><span class="sxs-lookup"><span data-stu-id="a307f-169">The order of lookup described earlier applies to all possible dependency properties except one: the <xref:System.Windows.FrameworkElement.Style%2A> property.</span></span> <span data-ttu-id="a307f-170"><xref:System.Windows.FrameworkElement.Style%2A> Свойство является уникальным в том, что он стиль невозможно, поэтому элементы приоритета с 5 по 8 не применяются.</span><span class="sxs-lookup"><span data-stu-id="a307f-170">The <xref:System.Windows.FrameworkElement.Style%2A> property is unique in that it cannot itself be styled, so the precedence items 5 through 8 do not apply.</span></span> <span data-ttu-id="a307f-171">Кроме того, анимация или приведение <xref:System.Windows.FrameworkElement.Style%2A> не рекомендуется (и анимации <xref:System.Windows.FrameworkElement.Style%2A> потребует использования пользовательского класса анимации).</span><span class="sxs-lookup"><span data-stu-id="a307f-171">Also, either animating or coercing <xref:System.Windows.FrameworkElement.Style%2A> is not recommended (and animating <xref:System.Windows.FrameworkElement.Style%2A> would require a custom animation class).</span></span> <span data-ttu-id="a307f-172">При этом остается три способа <xref:System.Windows.FrameworkElement.Style%2A> свойство может иметь значение:</span><span class="sxs-lookup"><span data-stu-id="a307f-172">This leaves three ways that the <xref:System.Windows.FrameworkElement.Style%2A> property might be set:</span></span>  
  
-   <span data-ttu-id="a307f-173">**Явный стиль.**</span><span class="sxs-lookup"><span data-stu-id="a307f-173">**Explicit style.**</span></span> <span data-ttu-id="a307f-174"><xref:System.Windows.FrameworkElement.Style%2A> Свойство задается напрямую.</span><span class="sxs-lookup"><span data-stu-id="a307f-174">The <xref:System.Windows.FrameworkElement.Style%2A> property is set directly.</span></span> <span data-ttu-id="a307f-175">В большинстве случаев стиль не определяется внутри объекта, а используется ссылка на стиль как ресурс с применением явного ключа.</span><span class="sxs-lookup"><span data-stu-id="a307f-175">In most scenarios, the style is not defined inline, but instead is referenced as a resource, by explicit key.</span></span> <span data-ttu-id="a307f-176">В этом случае само свойство Style действует как локальное значение с приоритетом 3.</span><span class="sxs-lookup"><span data-stu-id="a307f-176">In this case the Style property itself acts as if it were a local value, precedence item 3.</span></span>  
  
-   <span data-ttu-id="a307f-177">**Неявный стиль.**</span><span class="sxs-lookup"><span data-stu-id="a307f-177">**Implicit style.**</span></span> <span data-ttu-id="a307f-178"><xref:System.Windows.FrameworkElement.Style%2A> Свойство не задано напрямую.</span><span class="sxs-lookup"><span data-stu-id="a307f-178">The <xref:System.Windows.FrameworkElement.Style%2A> property is not set directly.</span></span> <span data-ttu-id="a307f-179">Тем не менее <xref:System.Windows.FrameworkElement.Style%2A> существует на определенном уровне последовательности поиска ресурсов (страницы, приложения) и шифруется с помощью ключа ресурса, который соответствует является стиль, применяемый к типу.</span><span class="sxs-lookup"><span data-stu-id="a307f-179">However, the <xref:System.Windows.FrameworkElement.Style%2A> exists at some level in the resource lookup sequence (page, application) and is keyed using a resource key that matches the type the style is to be applied to.</span></span> <span data-ttu-id="a307f-180">В этом случае <xref:System.Windows.FrameworkElement.Style%2A> само свойство действует с приоритетом, определенным в последовательности как элемент 5.</span><span class="sxs-lookup"><span data-stu-id="a307f-180">In this case, the <xref:System.Windows.FrameworkElement.Style%2A> property itself acts by a precedence identified in the sequence as item 5.</span></span> <span data-ttu-id="a307f-181">Это условие можно обнаружить с помощью <xref:System.Windows.DependencyPropertyHelper> от <xref:System.Windows.FrameworkElement.Style%2A> свойство и ищете <xref:System.Windows.BaseValueSource.ImplicitStyleReference> в результатах.</span><span class="sxs-lookup"><span data-stu-id="a307f-181">This condition can be detected by using <xref:System.Windows.DependencyPropertyHelper> against the <xref:System.Windows.FrameworkElement.Style%2A> property and looking for <xref:System.Windows.BaseValueSource.ImplicitStyleReference> in the results.</span></span>  
  
-   <span data-ttu-id="a307f-182">**Стиль по умолчанию**, также известный как **стиль темы.**</span><span class="sxs-lookup"><span data-stu-id="a307f-182">**Default style**, also known as **theme style.**</span></span> <span data-ttu-id="a307f-183"><xref:System.Windows.FrameworkElement.Style%2A> Свойство не задается напрямую, а на самом деле оно считывается как `null` времени выполнения.</span><span class="sxs-lookup"><span data-stu-id="a307f-183">The <xref:System.Windows.FrameworkElement.Style%2A> property is not set directly, and in fact will read as `null` up until run time.</span></span> <span data-ttu-id="a307f-184">В этом случае стиль поступает из оценки темы времени выполнения, которая является частью механизма презентации [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a307f-184">In this case, the style comes from the run-time theme evaluation that is part of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] presentation engine.</span></span>  
  
 <span data-ttu-id="a307f-185">Для неявных стилей не в темах необходимо точное соответствие - `MyButton` `Button`-производный класс не будет неявно использовать стиль для `Button`.</span><span class="sxs-lookup"><span data-stu-id="a307f-185">For implicit styles not in themes, the type must match exactly - a `MyButton` `Button`-derived class will not implicitly use a style for `Button`.</span></span>  
  
<a name="themestyles"></a>   
## <a name="default-theme-styles"></a><span data-ttu-id="a307f-186">Стили (темы) по умолчанию</span><span class="sxs-lookup"><span data-stu-id="a307f-186">Default (Theme) Styles</span></span>  
 <span data-ttu-id="a307f-187">Каждый элемент управления, который поставляется с [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], имеет стиль по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="a307f-187">Every control that ships with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] has a default style.</span></span> <span data-ttu-id="a307f-188">Стили по умолчанию могут варьироваться по темам, поэтому иногда их называют тематическими стилями.</span><span class="sxs-lookup"><span data-stu-id="a307f-188">That default style potentially varies by theme, which is why this default style is sometimes referred to as a theme style.</span></span>  
  
 <span data-ttu-id="a307f-189">Наиболее важные сведения, находящийся в стиле по умолчанию для элемента управления — его шаблон элемента управления, который существует в тематическом стиле в качестве метода задания для его <xref:System.Windows.Controls.Control.Template%2A> свойство.</span><span class="sxs-lookup"><span data-stu-id="a307f-189">The most important information that is found within a default style for a control is its control template, which exists in the theme style as a setter for its <xref:System.Windows.Controls.Control.Template%2A> property.</span></span> <span data-ttu-id="a307f-190">При отсутствии шаблона из стилей по умолчанию элемент управления без пользовательского шаблона в составе пользовательского стиля вообще бы не имел визуального представления.</span><span class="sxs-lookup"><span data-stu-id="a307f-190">If there were no template from default styles, a control without a custom template as part of a custom style would have no visual appearance at all.</span></span> <span data-ttu-id="a307f-191">Шаблон из стиля по умолчанию придает визуальному представлению каждого элемента управления базовую структуру, а также определяет подключения между свойствами, определенными в визуальном дереве шаблона и соответствующем классе элементов управления.</span><span class="sxs-lookup"><span data-stu-id="a307f-191">The template from the default style gives the visual appearance of each control a basic structure, and also defines the connections between properties defined in the visual tree of the template and the corresponding control class.</span></span> <span data-ttu-id="a307f-192">Каждый элемент управления предоставляет набор свойств, которые могут повлиять на внешний вид элемента управления без полной замены шаблона.</span><span class="sxs-lookup"><span data-stu-id="a307f-192">Each control exposes a set of properties that can influence the visual appearance of the control without completely replacing the template.</span></span> <span data-ttu-id="a307f-193">Например, рассмотрим по умолчанию внешний вид <xref:System.Windows.Controls.Primitives.Thumb> элемент управления, который является компонентом из <xref:System.Windows.Controls.Primitives.ScrollBar>.</span><span class="sxs-lookup"><span data-stu-id="a307f-193">For example, consider the default visual appearance of a <xref:System.Windows.Controls.Primitives.Thumb> control, which is a component of a <xref:System.Windows.Controls.Primitives.ScrollBar>.</span></span>  
  
 <span data-ttu-id="a307f-194">Объект <xref:System.Windows.Controls.Primitives.Thumb> имеет ряд настраиваемых свойств.</span><span class="sxs-lookup"><span data-stu-id="a307f-194">A <xref:System.Windows.Controls.Primitives.Thumb> has certain customizable properties.</span></span> <span data-ttu-id="a307f-195">Шаблон по умолчанию <xref:System.Windows.Controls.Primitives.Thumb> создает базовую структуру / визуальное дерево с несколькими вложенными <xref:System.Windows.Controls.Border> компоненты для создания наклона.</span><span class="sxs-lookup"><span data-stu-id="a307f-195">The default template of a <xref:System.Windows.Controls.Primitives.Thumb> creates a basic structure / visual tree with several nested <xref:System.Windows.Controls.Border> components to create a bevel look.</span></span> <span data-ttu-id="a307f-196">Если свойство, которое является частью шаблона должно быть предоставлено для настройки с <xref:System.Windows.Controls.Primitives.Thumb> класса, то это свойство должно быть предоставлено [TemplateBinding](templatebinding-markup-extension.md), в шаблоне.</span><span class="sxs-lookup"><span data-stu-id="a307f-196">If a property that is part of the template is intended to be exposed for customization by the <xref:System.Windows.Controls.Primitives.Thumb> class, then that property must be exposed by a [TemplateBinding](templatebinding-markup-extension.md), within the template.</span></span> <span data-ttu-id="a307f-197">В случае использования <xref:System.Windows.Controls.Primitives.Thumb>, различные свойства этих границ имеют общую привязку шаблона свойствам, такие как <xref:System.Windows.Controls.Border.Background%2A> или <xref:System.Windows.Controls.Border.BorderThickness%2A>.</span><span class="sxs-lookup"><span data-stu-id="a307f-197">In the case of <xref:System.Windows.Controls.Primitives.Thumb>, various properties of these borders share a template binding to properties such as <xref:System.Windows.Controls.Border.Background%2A> or <xref:System.Windows.Controls.Border.BorderThickness%2A>.</span></span> <span data-ttu-id="a307f-198">Однако некоторые другие свойства или визуальные представления заданы в коде шаблона элемента управления или привязаны к значениям, которые поступают непосредственно из темы; чтобы изменить их, необходимо заменить весь шаблон.</span><span class="sxs-lookup"><span data-stu-id="a307f-198">But certain other properties or visual arrangements are hard-coded into the control template or are bound to values that come directly from the theme, and cannot be changed short of replacing the entire template.</span></span> <span data-ttu-id="a307f-199">Как правило, если свойство поступает из шаблонного родительского элемента и не предоставляется привязкой шаблона, его невозможно скорректировать с помощью стилей, поскольку нет простого способа указать его в качестве целевого объекта.</span><span class="sxs-lookup"><span data-stu-id="a307f-199">Generally, if a property comes from a templated parent and is not exposed by a template binding, it cannot be adjusted by styles because there is no easy way to target it.</span></span> <span data-ttu-id="a307f-200">Однако это свойство может зависеть от наследования значения свойства в примененном шаблоне или значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="a307f-200">But that property could still be influenced by property value inheritance in the applied template, or by default value.</span></span>  
  
 <span data-ttu-id="a307f-201">Тематические стили используют тип в качестве ключа в своих определениях.</span><span class="sxs-lookup"><span data-stu-id="a307f-201">The theme styles use a type as the key in their definitions.</span></span> <span data-ttu-id="a307f-202">Тем не менее, при применении тем к экземпляру данного элемента, поиск тем для этого типа выполняется путем проверки <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> свойство элемента управления.</span><span class="sxs-lookup"><span data-stu-id="a307f-202">However, when themes are applied to a given element instance, themes lookup for this type is performed by checking the <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> property on a control.</span></span> <span data-ttu-id="a307f-203">Это отличается от сценария неявных стилей, где используется литеральный тип.</span><span class="sxs-lookup"><span data-stu-id="a307f-203">This is in contrast to using the literal Type, as implicit styles do.</span></span> <span data-ttu-id="a307f-204">Значение <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> бы наследуется производными классами, даже если разработчик не изменяет его (рекомендуется изменять свойство не переопределить его на уровне свойств, но чтобы изменить его значение по умолчанию в метаданных свойства).</span><span class="sxs-lookup"><span data-stu-id="a307f-204">The value of <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> would inherit to derived classes even if the implementer did not change it (the intended way of changing the property is not to override it at the property level, but to instead change its default value in property metadata).</span></span> <span data-ttu-id="a307f-205">Такая опосредованность позволяет базовым классам определять тематические стили для производных элементов, которые в противном случае не имеют стиля (или, что более важно, не имеют шаблона внутри стиля и поэтому вообще не имеют визуального представления по умолчанию).</span><span class="sxs-lookup"><span data-stu-id="a307f-205">This indirection enables base classes to define the theme styles for derived elements that do not otherwise have a style (or more importantly, do not have a template within that style and would thus have no default visual appearance at all).</span></span> <span data-ttu-id="a307f-206">Таким образом, можно создавать производные `MyButton` из <xref:System.Windows.Controls.Button> по-прежнему получите <xref:System.Windows.Controls.Button> шаблон по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="a307f-206">Thus, you can derive `MyButton` from <xref:System.Windows.Controls.Button> and will still get the <xref:System.Windows.Controls.Button> default template.</span></span> <span data-ttu-id="a307f-207">Если вы были создателем элемента управления `MyButton` и требуется другое поведение, можно переопределить метаданные свойства зависимостей для <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> на `MyButton` чтобы возвращать другой ключ, а затем определить соответствующие тематические стили, включая шаблон для `MyButton` , необходимо упаковать с вашей `MyButton` элемента управления.</span><span class="sxs-lookup"><span data-stu-id="a307f-207">If you were the control author of `MyButton` and you wanted a different behavior, you could override the dependency property metadata for <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> on `MyButton` to return a different key, and then define the relevant theme styles including template for `MyButton` that you must package with your `MyButton` control.</span></span> <span data-ttu-id="a307f-208">Дополнительные сведения о темах, стилях и создании элементов управления см. в разделе [Общие сведения о создании элементов управления](../controls/control-authoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a307f-208">For more details on themes, styles, and control authoring, see [Control Authoring Overview](../controls/control-authoring-overview.md).</span></span>  
  
<a name="resources"></a>   
## <a name="dynamic-resource-references-and-binding"></a><span data-ttu-id="a307f-209">Ссылки на динамические ресурсы и привязки</span><span class="sxs-lookup"><span data-stu-id="a307f-209">Dynamic Resource References and Binding</span></span>  
 <span data-ttu-id="a307f-210">В операциях со ссылками на динамические ресурсы и привязками учитывается приоритет расположения при настройке.</span><span class="sxs-lookup"><span data-stu-id="a307f-210">Dynamic resource references and binding operations respect the precedence of the location at which they are set.</span></span> <span data-ttu-id="a307f-211">Например, динамический ресурс, применяемый к локальному значению, действует с приоритетом 3, привязка для метода задания свойства в тематическом стиле действует с приоритетом 9 и так далее.</span><span class="sxs-lookup"><span data-stu-id="a307f-211">For example, a dynamic resource applied to a local value acts per precedence item 3, a binding for a property setter within a theme style applies at precedence item 9, and so on.</span></span> <span data-ttu-id="a307f-212">Поскольку ссылки на динамические ресурсы и привязки должны иметь возможность получения значений из состояния времени выполнения приложения, это предполагает, что фактический процесс определения приоритета значения свойства для какого-либо свойства распространяется и на время выполнения.</span><span class="sxs-lookup"><span data-stu-id="a307f-212">Because dynamic resource references and binding must both be able to obtain values from the run time state of the application, this entails that the actual process of determining the property value precedence for any given property extends into the run time as well.</span></span>  
  
 <span data-ttu-id="a307f-213">Ссылки на динамические ресурсы, строго говоря, не являются частью системы свойств, но они имеют свой порядок поиска, который перекликается с вышеуказанной последовательностью.</span><span class="sxs-lookup"><span data-stu-id="a307f-213">Dynamic resource references are not strictly speaking part of the property system, but they do have a lookup order of their own which interacts with the sequence listed above.</span></span> <span data-ttu-id="a307f-214">Этот приоритет более подробно описан в разделе [Ресурсы XAML](xaml-resources.md).</span><span class="sxs-lookup"><span data-stu-id="a307f-214">That precedence is documented more thoroughly in the [XAML Resources](xaml-resources.md).</span></span> <span data-ttu-id="a307f-215">В общем случае действует следующий приоритет: элемент корневой страницы, приложение, тема, система.</span><span class="sxs-lookup"><span data-stu-id="a307f-215">The basic summation of that precedence is: element to page root, application, theme, system.</span></span>  
  
 <span data-ttu-id="a307f-216">Динамические ресурсы и привязки получают приоритет расположения, в котором они были заданы, но значение откладывается.</span><span class="sxs-lookup"><span data-stu-id="a307f-216">Dynamic resources and bindings have the precedence of where they were set, but the value is deferred.</span></span> <span data-ttu-id="a307f-217">Следствием этого является тот факт, что если задать для динамического ресурса или привязки локальное значение, то при любом изменении локального значения динамический ресурс или привязка будут меняться полностью.</span><span class="sxs-lookup"><span data-stu-id="a307f-217">One consequence of this is that if you set a dynamic resource or binding to a local value, any change to the local value replaces the dynamic resource or binding entirely.</span></span> <span data-ttu-id="a307f-218">Даже если вы вызываете <xref:System.Windows.DependencyObject.ClearValue%2A> метод, чтобы удалить локально заданное значение, динамический ресурс или привязка не будет восстановлено.</span><span class="sxs-lookup"><span data-stu-id="a307f-218">Even if you call the <xref:System.Windows.DependencyObject.ClearValue%2A> method to clear the locally set value, the dynamic resource or binding will not be restored.</span></span> <span data-ttu-id="a307f-219">На самом деле, если вы вызываете <xref:System.Windows.DependencyObject.ClearValue%2A> на свойство, которое имеет динамический ресурс или привязка имея (без литерального локального значения), они также будут удалены с <xref:System.Windows.DependencyObject.ClearValue%2A> вызвать слишком.</span><span class="sxs-lookup"><span data-stu-id="a307f-219">In fact, if you call <xref:System.Windows.DependencyObject.ClearValue%2A> on a property that has a dynamic resource or binding in place (with no literal local value), they are cleared by the <xref:System.Windows.DependencyObject.ClearValue%2A> call too.</span></span>  
  
<a name="setcurrentvalue"></a>   
## <a name="setcurrentvalue"></a><span data-ttu-id="a307f-220">SetCurrentValue</span><span class="sxs-lookup"><span data-stu-id="a307f-220">SetCurrentValue</span></span>  
 <span data-ttu-id="a307f-221"><xref:System.Windows.DependencyObject.SetCurrentValue%2A> Метод — еще один способ задать свойство, но не в порядке приоритета.</span><span class="sxs-lookup"><span data-stu-id="a307f-221">The <xref:System.Windows.DependencyObject.SetCurrentValue%2A> method is another way to set a property, but it is not in the order of precedence.</span></span> <span data-ttu-id="a307f-222">Вместо этого <xref:System.Windows.DependencyObject.SetCurrentValue%2A> позволяет изменить значение свойства, не перезаписывая источник предыдущего значения.</span><span class="sxs-lookup"><span data-stu-id="a307f-222">Instead, <xref:System.Windows.DependencyObject.SetCurrentValue%2A> enables you to change the value of a property without overwriting the source of a previous value.</span></span> <span data-ttu-id="a307f-223">Можно использовать <xref:System.Windows.DependencyObject.SetCurrentValue%2A> каждый раз, когда требуется задать значение, не предоставляя этому значению приоритет локального значения.</span><span class="sxs-lookup"><span data-stu-id="a307f-223">You can use <xref:System.Windows.DependencyObject.SetCurrentValue%2A> any time that you want to set a value without giving that value the precedence of a local value.</span></span> <span data-ttu-id="a307f-224">Например, если свойство задается триггером, а затем ему присваивается другое значение с помощью <xref:System.Windows.DependencyObject.SetCurrentValue%2A>, система свойств по-прежнему учитывает этот триггер, и свойство меняется, если происходит действие триггера.</span><span class="sxs-lookup"><span data-stu-id="a307f-224">For example, if a property is set by a trigger and then assigned another value via <xref:System.Windows.DependencyObject.SetCurrentValue%2A>, the property system still respects the trigger and the property will change if the trigger’s action occurs.</span></span> <span data-ttu-id="a307f-225"><xref:System.Windows.DependencyObject.SetCurrentValue%2A> позволяет изменить значение свойства, не предоставляя ему источник с более высоким приоритетом.</span><span class="sxs-lookup"><span data-stu-id="a307f-225"><xref:System.Windows.DependencyObject.SetCurrentValue%2A> enables you to change the property’s value without giving it a source with a higher precedence.</span></span> <span data-ttu-id="a307f-226">Аналогичным образом, можно использовать <xref:System.Windows.DependencyObject.SetCurrentValue%2A> для изменения значения свойства, не перезаписывая привязку.</span><span class="sxs-lookup"><span data-stu-id="a307f-226">Likewise, you can use <xref:System.Windows.DependencyObject.SetCurrentValue%2A> to change the value of a property without overwriting a binding.</span></span>  
  
<a name="animations"></a>   
## <a name="coercion-animations-and-base-value"></a><span data-ttu-id="a307f-227">Приведение, анимации и базовое значение</span><span class="sxs-lookup"><span data-stu-id="a307f-227">Coercion, Animations, and Base Value</span></span>  
 <span data-ttu-id="a307f-228">Приведение и анимация используют значение, которое в [!INCLUDE[TLA2#tla_sdk](../../../../includes/tla2sharptla-sdk-md.md)] определяется как "базовое значение".</span><span class="sxs-lookup"><span data-stu-id="a307f-228">Coercion and animation both act on a value that is termed as the "base value" throughout this [!INCLUDE[TLA2#tla_sdk](../../../../includes/tla2sharptla-sdk-md.md)].</span></span> <span data-ttu-id="a307f-229">Базовое значение — это любое значение, определяемое посредством восходящей оценки элементов до тех пор, пока не будет достигнут элемент 2.</span><span class="sxs-lookup"><span data-stu-id="a307f-229">The base value is thus whatever value is determined through evaluating upwards in the items until item 2 is reached.</span></span>  
  
 <span data-ttu-id="a307f-230">Для анимации базовое значение может повлиять на анимированное значение, если анимация не указывает значения From и To для определенных моделей поведения, либо если анимация умышленно возвращается к базовому значению по завершении выполнения.</span><span class="sxs-lookup"><span data-stu-id="a307f-230">For an animation, the base value can have an effect on the animated value, if that animation does not specify both "From" and "To" for certain behaviors, or if the animation deliberately reverts to the base value when completed.</span></span> <span data-ttu-id="a307f-231">Чтобы увидеть это на практике, запустите [Пример целевых значений анимации From, To, By](https://go.microsoft.com/fwlink/?LinkID=159988).</span><span class="sxs-lookup"><span data-stu-id="a307f-231">To see this in practice, run the [From, To, and By Animation Target Values Sample](https://go.microsoft.com/fwlink/?LinkID=159988).</span></span> <span data-ttu-id="a307f-232">Попробуйте установить локальные значения высоты прямоугольника в примере, чтобы начальное локальное значение отличалось от любого значения From в анимации.</span><span class="sxs-lookup"><span data-stu-id="a307f-232">Try setting the local values of the rectangle height in the example, such that the initial local value differs from any "From" in the animation.</span></span> <span data-ttu-id="a307f-233">Обратите внимание, что анимация сразу же начинает использовать значения From и заменяет базовое значение после запуска.</span><span class="sxs-lookup"><span data-stu-id="a307f-233">You will note that the animations start right away using the "From" values and replace the base value once started.</span></span> <span data-ttu-id="a307f-234">Анимацию можно указать, чтобы вернуться к значению, обнаруженному перед анимацией после ее завершения, указав Stop <xref:System.Windows.Media.Animation.FillBehavior>.</span><span class="sxs-lookup"><span data-stu-id="a307f-234">The animation might specify to return to the value found before animation once it is completed by specifying the Stop <xref:System.Windows.Media.Animation.FillBehavior>.</span></span> <span data-ttu-id="a307f-235">После этого для определения базового значения используется обычный приоритет.</span><span class="sxs-lookup"><span data-stu-id="a307f-235">Afterwards, normal precedence is used for the base value determination.</span></span>  
  
 <span data-ttu-id="a307f-236">К одному свойству можно применить несколько анимаций, причем каждая из этих анимаций может быть определена в разных точках списка приоритетов значений.</span><span class="sxs-lookup"><span data-stu-id="a307f-236">Multiple animations might be applied to a single property, with each of these animations possibly having been defined from different points in the value precedence.</span></span> <span data-ttu-id="a307f-237">Однако вместо того чтобы применять анимацию с более высоким приоритетом, вероятно, анимации объединят свои значения.</span><span class="sxs-lookup"><span data-stu-id="a307f-237">However, these animations will potentially composite their values, rather than just applying the animation from the higher precedence.</span></span> <span data-ttu-id="a307f-238">Это зависит от того, как именно определяются анимации, и от типа анимируемого значения.</span><span class="sxs-lookup"><span data-stu-id="a307f-238">This depends on exactly how the animations are defined, and the type of the value that is being animated.</span></span> <span data-ttu-id="a307f-239">Дополнительные сведения об анимации свойств см. в разделе [Общие сведения об эффектах анимации](../graphics-multimedia/animation-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a307f-239">For more information about animating properties, see [Animation Overview](../graphics-multimedia/animation-overview.md).</span></span>  
  
 <span data-ttu-id="a307f-240">Приведение применяется на самом высоком уровне.</span><span class="sxs-lookup"><span data-stu-id="a307f-240">Coercion applies at the highest level of all.</span></span> <span data-ttu-id="a307f-241">Приведение значения может быть выполнено даже для уже выполняющейся анимации.</span><span class="sxs-lookup"><span data-stu-id="a307f-241">Even an already running animation is subject to value coercion.</span></span> <span data-ttu-id="a307f-242">Некоторые существующие свойства зависимостей в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] имеют встроенные приведения.</span><span class="sxs-lookup"><span data-stu-id="a307f-242">Certain existing dependency properties in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] have built-in coercion.</span></span> <span data-ttu-id="a307f-243">Для настраиваемого свойства зависимости, для настраиваемого свойства зависимости поведение приведения определяется путем написания <xref:System.Windows.CoerceValueCallback> и передачи обратного вызова в составе метаданных при создании свойства.</span><span class="sxs-lookup"><span data-stu-id="a307f-243">For a custom dependency property, you define the coercion behavior for a custom dependency property by writing a <xref:System.Windows.CoerceValueCallback> and passing the callback as part of metadata when you create the property.</span></span> <span data-ttu-id="a307f-244">Также можно переопределить поведение приведения существующих свойств путем переопределения метаданных для этого свойства в производном классе.</span><span class="sxs-lookup"><span data-stu-id="a307f-244">You can also override coercion behavior of existing properties by overriding the metadata on that property in a derived class.</span></span> <span data-ttu-id="a307f-245">Приведение взаимодействует с базовым значением таким образом, что ограничения на приведение применяются в том виде, в котором они существуют на тот момент, однако базовое значение сохраняется.</span><span class="sxs-lookup"><span data-stu-id="a307f-245">Coercion interacts with the base value in such a way that the constraints on coercion are applied as those constraints exist at the time, but the base value is still retained.</span></span> <span data-ttu-id="a307f-246">Таким образом, если ограничения в приведении впоследствии будут сняты, приведение вернет ближайшее к базовому возможное значение и, возможно, влияние приведения на свойство прекратится, как только ограничение будет снято.</span><span class="sxs-lookup"><span data-stu-id="a307f-246">Therefore, if constraints in coercion are later lifted, the coercion will return the closest value possible to that base value, and potentially the coercion influence on a property will cease as soon as all constraints are lifted.</span></span> <span data-ttu-id="a307f-247">Дополнительные сведения о поведении приведения см. в разделе [Проверка и обратные вызовы свойства зависимостей](dependency-property-callbacks-and-validation.md).</span><span class="sxs-lookup"><span data-stu-id="a307f-247">For more information about coercion behavior, see [Dependency Property Callbacks and Validation](dependency-property-callbacks-and-validation.md).</span></span>  
  
<a name="triggers"></a>   
## <a name="trigger-behaviors"></a><span data-ttu-id="a307f-248">Поведения триггера</span><span class="sxs-lookup"><span data-stu-id="a307f-248">Trigger Behaviors</span></span>  
 <span data-ttu-id="a307f-249">Элементы управления часто определяют поведение триггера в составе своего стиля по умолчанию, в темах.</span><span class="sxs-lookup"><span data-stu-id="a307f-249">Controls often define trigger behaviors as part of their default style in themes.</span></span> <span data-ttu-id="a307f-250">Установка локальных свойств для элементов управления может препятствовать реагированию триггеров на инициированные пользователями события (визуально или своими действиями).</span><span class="sxs-lookup"><span data-stu-id="a307f-250">Setting local properties on controls might prevent the triggers from being able to respond to user-driven events either visually or behaviorally.</span></span> <span data-ttu-id="a307f-251">Наиболее распространенное использование триггера свойств предназначен для свойства элемента управления или состояния, например <xref:System.Windows.Controls.Primitives.Selector.IsSelected%2A>.</span><span class="sxs-lookup"><span data-stu-id="a307f-251">The most common use of a property trigger is for control or state properties such as <xref:System.Windows.Controls.Primitives.Selector.IsSelected%2A>.</span></span> <span data-ttu-id="a307f-252">Например, по умолчанию при <xref:System.Windows.Controls.Button> отключена (триггер для <xref:System.Windows.UIElement.IsEnabled%2A> — `false`) то <xref:System.Windows.Controls.Control.Foreground%2A> значение в тематическом стиле является то, что элемент управления затемнены «».</span><span class="sxs-lookup"><span data-stu-id="a307f-252">For example, by default when a <xref:System.Windows.Controls.Button> is disabled (trigger for <xref:System.Windows.UIElement.IsEnabled%2A> is `false`) then the <xref:System.Windows.Controls.Control.Foreground%2A> value in the theme style is what causes the control to appear "grayed out".</span></span> <span data-ttu-id="a307f-253">Но если вы задали локальный <xref:System.Windows.Controls.Control.Foreground%2A> значение, что обычный серый цвет будет отменен в приоритете, набора локальных свойств даже в этом сценарии триггера свойства.</span><span class="sxs-lookup"><span data-stu-id="a307f-253">But if you have set a local <xref:System.Windows.Controls.Control.Foreground%2A> value, that normal gray-out color will be overruled in precedence by your local property set, even in this property-triggered scenario.</span></span> <span data-ttu-id="a307f-254">Будьте осторожны при установке значений для свойств, которые имеют поведения триггеров на уровне темы; кроме того, необходимо убедиться, что не создается ненужных помех работе пользователя с этим элементом управления.</span><span class="sxs-lookup"><span data-stu-id="a307f-254">Be cautious of setting values for properties that have theme-level trigger behaviors and make sure you are not unduly interfering with the intended user experience for that control.</span></span>  
  
<a name="clearvalue"></a>   
## <a name="clearvalue-and-value-precedence"></a><span data-ttu-id="a307f-255">ClearValue и приоритет значения</span><span class="sxs-lookup"><span data-stu-id="a307f-255">ClearValue and Value Precedence</span></span>  
 <span data-ttu-id="a307f-256"><xref:System.Windows.DependencyObject.ClearValue%2A> Метод предоставляет соответствующие средства для очистки любого применяемого локально значения из свойства зависимости, которое задается в элементе.</span><span class="sxs-lookup"><span data-stu-id="a307f-256">The <xref:System.Windows.DependencyObject.ClearValue%2A> method provides an expedient means to clear any locally applied value from a dependency property that is set on an element.</span></span> <span data-ttu-id="a307f-257">Однако, при вызове <xref:System.Windows.DependencyObject.ClearValue%2A> не гарантирует, что новое действительное значение по умолчанию, заданное в метаданных во время регистрации свойства.</span><span class="sxs-lookup"><span data-stu-id="a307f-257">However, calling <xref:System.Windows.DependencyObject.ClearValue%2A> is not a guarantee that the default as established in metadata during property registration is the new effective value.</span></span> <span data-ttu-id="a307f-258">Все остальные участники в приоритете значений будут по-прежнему активны.</span><span class="sxs-lookup"><span data-stu-id="a307f-258">All of the other participants in value precedence are still active.</span></span> <span data-ttu-id="a307f-259">Только локально заданное значение удаляется из последовательности приоритетов.</span><span class="sxs-lookup"><span data-stu-id="a307f-259">Only the locally set value has been removed from the precedence sequence.</span></span> <span data-ttu-id="a307f-260">Например, если вы вызываете <xref:System.Windows.DependencyObject.ClearValue%2A> по свойству, где этот также задано тематическим стилем, а затем тематическое значение будет применено как новое значение, а не по умолчанию на основе метаданных.</span><span class="sxs-lookup"><span data-stu-id="a307f-260">For example, if you call <xref:System.Windows.DependencyObject.ClearValue%2A> on a property where that property is also set by a theme style, then the theme value is applied as the new value rather than the metadata-based default.</span></span> <span data-ttu-id="a307f-261">Если вы хотите извлечь все элементы значения свойства из процесса и значение по умолчанию зарегистрированные метаданные, можно получить значение по умолчанию точно, путем запроса метаданных свойства зависимостей, а затем можно использовать локально значение по умолчанию свойство с вызовом <xref:System.Windows.DependencyObject.SetValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="a307f-261">If you want to take all property value participants out of the process and set the value to the registered metadata default, you can obtain that default value definitively by querying the dependency property metadata, and then you can use the default value to locally set the property with a call to <xref:System.Windows.DependencyObject.SetValue%2A>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a307f-262">См. также</span><span class="sxs-lookup"><span data-stu-id="a307f-262">See also</span></span>

- <xref:System.Windows.DependencyObject>
- <xref:System.Windows.DependencyProperty>
- [<span data-ttu-id="a307f-263">Общие сведения о свойствах зависимости</span><span class="sxs-lookup"><span data-stu-id="a307f-263">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="a307f-264">Пользовательские свойства зависимостей</span><span class="sxs-lookup"><span data-stu-id="a307f-264">Custom Dependency Properties</span></span>](custom-dependency-properties.md)
- [<span data-ttu-id="a307f-265">Проверка и обратные вызовы свойства зависимостей</span><span class="sxs-lookup"><span data-stu-id="a307f-265">Dependency Property Callbacks and Validation</span></span>](dependency-property-callbacks-and-validation.md)
