---
title: Стилизация фокуса в элементах управления и FocusVisualStyle
ms.date: 03/30/2017
helpviewer_keywords:
- keyboard focus [WPF]
- focus [WPF], visual styling
- styles [WPF], focus visual style
ms.assetid: 786ac576-011b-4d72-913b-558deccb9b35
ms.openlocfilehash: fda7ed12d232af5a7cfb8eb43cbb09eb793da171
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2020
ms.locfileid: "79141203"
---
# <a name="styling-for-focus-in-controls-and-focusvisualstyle"></a>Стилизация фокуса в элементах управления и FocusVisualStyle
[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] предоставляет два параллельных механизма для изменения внешнего вида элемента управления при получении фокуса клавиатуры. Первый механизм заключается в использовании <xref:System.Windows.UIElement.IsKeyboardFocused%2A> сеттеров свойств для свойств, таких как стиль или шаблон, который применяется к элементу управления. Второй механизм заключается в предоставлении отдельного <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> стиля в качестве стоимости имущества; "Фокус визуальный стиль" создает отдельное визуальное дерево для украшения, которое опирается на верхней части элемента управления, а не изменение визуального дерева управления или другого элемента uI, заменив его. В данном разделе рассматриваются сценарии, для которых подходит любой из этих механизмов.  

<a name="Purpose"></a>
## <a name="the-purpose-of-focus-visual-style"></a>Назначение визуального стиля фокуса  
 Функция визуального стиля фокуса предоставляет общую "объектную модель" для введения визуальной обратной связи с пользователем на основе навигации с помощью клавиатуры к любому элементу пользовательского интерфейса. Это можно сделать без применения нового шаблона к элементу управления или знания композиции определенного шаблона.  
  
 Но именно потому, что функция визуального стиля фокуса работает без знания шаблонов элементов управления, визуальная обратная связь, которая может отображаться для элемента управления с использованием визуального стиля фокуса, ограничена в обязательном порядке. Эта функция фактически накладывает другое визуальное дерево (декоративный элемент) поверх визуального дерева, созданного при отрисовке элемента управления с помощью его шаблона. Вы определяете это отдельное визуальное <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> дерево, используя стиль, который заполняет свойство.  
  
<a name="Default"></a>
## <a name="default-focus-visual-style-behavior"></a>Поведение визуального стиля фокуса по умолчанию  
 Визуальные стили фокуса действуют только тогда, когда действие фокусировки было инициировано клавиатурой. Любое действие мыши или программное изменение фокуса отключает режим визуальных стилей фокуса. Дополнительные сведения о различиях между режимами фокуса см. в разделе [Общие сведения о фокусе](focus-overview.md).  
  
 Темы для элементов управления включают поведение визуального стиля фокуса по умолчанию, который становится визуальным стилем фокуса для всех элементов управления в теме. Этот стиль темы определяется значением <xref:System.Windows.SystemParameters.FocusVisualStyleKey%2A>статического ключа. При объявлении собственного визуального стиля фокуса на уровне приложения можно заменить это поведение стиля по умолчанию из темы. Кроме того, при определении целой темы необходимо использовать этот же ключ для определения стиля поведения по умолчанию для всей темы.  
  
 В темах визуальный стиль фокуса по умолчанию обычно очень прост. Ниже приводится приблизительная оценка.  
  
```xaml  
<Style x:Key="{x:Static SystemParameters.FocusVisualStyleKey}">  
  <Setter Property="Control.Template">  
    <Setter.Value>  
      <ControlTemplate>  
        <Rectangle StrokeThickness="1"  
          Stroke="Black"  
          StrokeDashArray="1 2"  
          SnapsToDevicePixels="true"/>  
      </ControlTemplate>  
    </Setter.Value>  
  </Setter>  
</Style>  
```  
  
<a name="When"></a>
## <a name="when-to-use-focus-visual-styles"></a>Когда следует использовать визуальные стили фокуса  
 Концептуально внешний вид визуальных стилей фокуса, применяемых к элементам управления, должен быть согласованным в различных элементах. Одним из способов обеспечить такую согласованность является изменение визуального стиля фокуса только при составлении целой темы, в которой каждый элемент управления, определенный в теме, получает либо один и тот же визуальный стиль фокуса, либо некоторую вариацию стиля, визуально связанную с другими элементами управления. Кроме того, можно использовать один и тот же стиль (или аналогичные стили) для каждого элемента, фокусируемого с клавиатуры, на странице или в пользовательском интерфейсе.  
  
 Установка <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> на отдельные стили управления, которые не являются частью темы не является предполагаемым использованием фокус визуальных стилей. Это связано с тем, что несогласованность визуального поведения элементов управления может привести к путанице при использовании фокуса клавиатуры. Если вы намереваетесь управления конкретных поведения для клавиатуры фокус, которые намеренно не согласованы по теме, гораздо лучший <xref:System.Windows.UIElement.IsFocused%2A> подход <xref:System.Windows.UIElement.IsKeyboardFocused%2A>заключается в использовании триггеров в стилях для отдельных свойств состояния ввода, таких как или .  
  
 Визуальные стили фокуса действуют исключительно для фокуса клавиатуры. Таким образом, визуальные стили фокуса являются функцией специальных возможностей. Если требуется изменять пользовательский интерфейс для какого-либо типа фокуса с помощью мыши, клавиатуры или программными средствами, то не следует использовать визуальные стили фокуса. Вместо этого используйте методы задания и триггеры в стилях или шаблонах, которые работают на основе значения общих свойств фокуса, таких как <xref:System.Windows.UIElement.IsFocused%2A> или <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>.  
  
<a name="How"></a>
## <a name="how-to-create-a-focus-visual-style"></a>Создание визуального стиля фокуса  
 Стиль, который вы создаете для фокуса визуальный стиль всегда должны иметь <xref:System.Windows.Style.TargetType%2A> <xref:System.Windows.Controls.Control>. Стиль должен состоять в <xref:System.Windows.Controls.ControlTemplate>основном из . Вы не указываете целевой тип, чтобы быть типом, <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>в котором визуальный стиль фокуса присваивается .  
  
 Поскольку целевой <xref:System.Windows.Controls.Control>тип всегда, вы должны стилизовать, используя свойства, <xref:System.Windows.Controls.Control> которые являются общими для всех элементов управления (используя свойства класса и его базовых классов). Необходимо создать шаблон, который будет правильно функционировать как наложение для элемента пользовательского интерфейса и не будет скрывать функциональные области элемента управления. Как правило, это означает, что визуальная обратная связь должна появляться за пределами полей управления или в качестве временных или ненавязчивых эффектов, которые не будут блокировать проверку нажатий в элементе управления, к которому применен визуальный стиль фокуса. Свойства, которые можно использовать в привязке шаблонов, которые полезны для <xref:System.Windows.FrameworkElement.ActualHeight%2A> <xref:System.Windows.FrameworkElement.ActualWidth%2A>определения <xref:System.Windows.FrameworkElement.Margin%2A>размеров и позиционирования шаблона наложения, включают в себя <xref:System.Windows.Controls.Control.Padding%2A>и.  
  
<a name="Alternatives"></a>
## <a name="alternatives-to-using-a-focus-visual-style"></a>Альтернативные варианты использования визуального стиля фокуса  
 В ситуациях, когда использование визуального стиля фокуса нецелесообразно (при стилизации только отдельных элементов управления или если необходим больший контроль над шаблоном элемента управления), существует множество других доступных свойств и методов, которые могут создавать визуальное поведение в ответ на изменения фокуса.  
  
 Триггеры, методы задания и методы задания событий рассматриваются подробно в разделе [Использование стилей и шаблонов](../../../desktop-wpf/fundamentals/styles-templates-overview.md). Обработка перенаправляемых событий рассматривается в разделе [Общие сведения о перенаправляемых событиях](routed-events-overview.md).  
  
### <a name="iskeyboardfocused"></a>IsKeyboardFocused  
 Если вы заинтересованы в фокусе клавиатуры, свойство <xref:System.Windows.UIElement.IsKeyboardFocused%2A> <xref:System.Windows.Trigger>зависимости может быть использовано для свойства. Триггер свойства в стиле или шаблоне является более подходящим методом определения поведения фокуса клавиатуры, который применяется только для отдельного элемента управления и может визуально не соответствовать поведению фокуса клавиатуры других элементов управления.  
  
 Другим аналогичным свойством <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>зависимости является свойство, которое может быть уместно использовать, если вы хотите визуально вызвать, что фокус клавиатуры находится где-то в композите или в функциональной области управления. Например, можно поставить <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A> триггер так, что панель, которая группирует несколько элементов управления, отображается по-разному, даже если фокус клавиатуры может быть более точно на отдельном элементе в этой панели.  
  
 Вы также можете <xref:System.Windows.UIElement.GotKeyboardFocus> использовать <xref:System.Windows.UIElement.LostKeyboardFocus> события и (а также их эквиваленты предварительного просмотра). Вы можете использовать эти события <xref:System.Windows.EventSetter>в качестве основы для, или вы можете написать обработчики для событий в код-за.  
  
### <a name="other-focus-properties"></a>Другие свойства фокуса  
 Если вы хотите, чтобы все возможные причины изменения фокуса для создания <xref:System.Windows.UIElement.IsFocused%2A> визуального поведения, вы <xref:System.Windows.UIElement.GotFocus> должны <xref:System.Windows.UIElement.LostFocus> основывать сеттер или триггер на свойство зависимости, или же на или события, используемые для <xref:System.Windows.EventSetter>.  
  
## <a name="see-also"></a>См. также раздел

- <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>
- [Стилизация и использование шаблонов](../../../desktop-wpf/fundamentals/styles-templates-overview.md)
- [Общие сведения о фокусе](focus-overview.md)
- [Общие сведения о входных данных](input-overview.md)
