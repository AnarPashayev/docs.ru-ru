---
title: Сериализация ограничений XamlWriter.Save
ms.date: 03/30/2017
helpviewer_keywords:
- XamlWriter.Save [WPF], serialization limitations of
- limitations of XamlWriter.Save
- serialization limitations of XamlWriter.Save
ms.assetid: f86acc91-2b67-4039-8555-505734491d36
ms.openlocfilehash: 96e917898320fb5d49f4e7dfc27daa7750af9d41
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2020
ms.locfileid: "79174372"
---
# <a name="serialization-limitations-of-xamlwritersave"></a><span data-ttu-id="59370-102">Сериализация ограничений XamlWriter.Save</span><span class="sxs-lookup"><span data-stu-id="59370-102">Serialization Limitations of XamlWriter.Save</span></span>
<span data-ttu-id="59370-103">API <xref:System.Windows.Markup.XamlWriter.Save%2A> может быть использован для сериализации [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] содержимого [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] приложения в виде файла.</span><span class="sxs-lookup"><span data-stu-id="59370-103">The API <xref:System.Windows.Markup.XamlWriter.Save%2A> can be used to serialize the contents of a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] application as a [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] file.</span></span> <span data-ttu-id="59370-104">Однако существуют некоторые заметные ограничения в том, что именно подлежит сериализации.</span><span class="sxs-lookup"><span data-stu-id="59370-104">However, there are some notable limitations in exactly what is serialized.</span></span> <span data-ttu-id="59370-105">В данном разделе описаны эти ограничения и некоторые общие рекомендации.</span><span class="sxs-lookup"><span data-stu-id="59370-105">These limitations and some general considerations are documented in this topic.</span></span>  

<a name="Run_Time__Not_Design_Time_Representation"></a>
## <a name="run-time-not-design-time-representation"></a><span data-ttu-id="59370-106">Представление во время выполнения, а не во время разработки</span><span class="sxs-lookup"><span data-stu-id="59370-106">Run-Time, Not Design-Time Representation</span></span>  
 <span data-ttu-id="59370-107">Основная философия того, что сериализуется путем вызова, заключается <xref:System.Windows.Markup.XamlWriter.Save%2A> в том, что результатом будет представление объекта, который сериализируется, во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="59370-107">The basic philosophy of what is serialized by a call to <xref:System.Windows.Markup.XamlWriter.Save%2A> is that the result will be a representation of the object being serialized, at run-time.</span></span> <span data-ttu-id="59370-108">Многие свойства времени проектирования [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] исходного файла могут быть уже [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] оптимизированы или потеряны к моменту загрузки объекта в памяти и не сохраняются при вызове <xref:System.Windows.Markup.XamlWriter.Save%2A> для сериализации.</span><span class="sxs-lookup"><span data-stu-id="59370-108">Many design-time properties of the original [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file may already be optimized or lost by the time that the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] is loaded as in-memory objects, and are not preserved when you call <xref:System.Windows.Markup.XamlWriter.Save%2A> to serialize.</span></span> <span data-ttu-id="59370-109">Результат сериализации — эффективное представление построенного логического дерева приложения, но не обязательно исходного [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], который его создал.</span><span class="sxs-lookup"><span data-stu-id="59370-109">The serialized result is an effective representation of the constructed logical tree of the application, but not necessarily of the original [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] that produced it.</span></span> <span data-ttu-id="59370-110">Эти проблемы делают его <xref:System.Windows.Markup.XamlWriter.Save%2A> чрезвычайно трудно использовать сериализации как часть обширной [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] поверхности дизайна.</span><span class="sxs-lookup"><span data-stu-id="59370-110">These issues make it extremely difficult to use the <xref:System.Windows.Markup.XamlWriter.Save%2A> serialization as part of an extensive [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] design surface.</span></span>  
  
<a name="Serialization_is_Self_Contained"></a>
## <a name="serialization-is-self-contained"></a><span data-ttu-id="59370-111">Сериализация самодостаточна</span><span class="sxs-lookup"><span data-stu-id="59370-111">Serialization is Self-Contained</span></span>  
 <span data-ttu-id="59370-112">Сериализованный выход <xref:System.Windows.Markup.XamlWriter.Save%2A> является автономным; все, что сериализуется, содержится внутри [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] одной страницы, с одним корневым элементом и никакими внешними ссылками, кроме URIs.</span><span class="sxs-lookup"><span data-stu-id="59370-112">The serialized output of <xref:System.Windows.Markup.XamlWriter.Save%2A> is self-contained; everything that is serialized is contained inside a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] single page, with a single root element, and no external references other than URIs.</span></span> <span data-ttu-id="59370-113">Например, если страницы ссылаются на ресурсы из ресурсов приложения, они будут отображаться, как если бы они были компонентом сериализуемой страницы.</span><span class="sxs-lookup"><span data-stu-id="59370-113">For instance, if your page referenced resources from application resources, these will appear as if they were a component of the page being serialized.</span></span>  
  
<a name="Extension_References_are_Dereferenced"></a>
## <a name="extension-references-are-dereferenced"></a><span data-ttu-id="59370-114">Ссылки на расширения разыменовываются</span><span class="sxs-lookup"><span data-stu-id="59370-114">Extension References are Dereferenced</span></span>  
 <span data-ttu-id="59370-115">Общие ссылки на объекты, сделанные различными форматами расширения разметки, такие как `StaticResource` или `Binding`, будут разыменованы в процессе сериализации.</span><span class="sxs-lookup"><span data-stu-id="59370-115">Common references to objects made by various markup extension formats, such as `StaticResource` or `Binding`, will be dereferenced by the serialization process.</span></span> <span data-ttu-id="59370-116">Они уже были денезначны в то время, когда объекты памяти были созданы временем выполнения приложения, и <xref:System.Windows.Markup.XamlWriter.Save%2A> логика не пересматривает оригинал [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] для восстановления таких ссылок на серийный вывод.</span><span class="sxs-lookup"><span data-stu-id="59370-116">These were already dereferenced at the time that in-memory objects were created by the application runtime, and the <xref:System.Windows.Markup.XamlWriter.Save%2A> logic does not revisit the original [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] to restore such references to the serialized output.</span></span> <span data-ttu-id="59370-117">Это потенциально замораживает любое значение, полученное из привязки данных или ресурсов, которое в последний раз использовалось представлением во время выполнения, и остается только ограниченная или косвенная возможность отличать такое значение от любого другого значения, установленного локально.</span><span class="sxs-lookup"><span data-stu-id="59370-117">This potentially freezes any databound or resource obtained value to be the value last used by the run-time representation, with only limited or indirect ability to distinguish such a value from any other value set locally.</span></span> <span data-ttu-id="59370-118">Изображения также сериализируются как объектные ссылки на изображения, как они существуют в проекте, а не как исходные ссылки источника, потеряв все файловое имя или URI был первоначально ссылки.</span><span class="sxs-lookup"><span data-stu-id="59370-118">Images are also serialized as object references to images as they exist in the project, rather than as original source references, losing whatever filename or URI was originally referenced.</span></span> <span data-ttu-id="59370-119">Ресурсы, объявленные на одной странице, воспринимаются как сериализованные в том месте, где они были указаны ссылками, а не сохраняются как ключ коллекции ресурсов.</span><span class="sxs-lookup"><span data-stu-id="59370-119">Even resources declared within the same page are seen serialized into the point where they were referenced, rather than being preserved as a key of a resource collection.</span></span>  
  
<a name="Event_Handling_is_Not_Preserved"></a>
## <a name="event-handling-is-not-preserved"></a><span data-ttu-id="59370-120">Обработка событий не сохраняется</span><span class="sxs-lookup"><span data-stu-id="59370-120">Event Handling is Not Preserved</span></span>  
 <span data-ttu-id="59370-121">Если обработчики событий, которые добавляются с помощью [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], будут сериализованы, то они не сохранятся.</span><span class="sxs-lookup"><span data-stu-id="59370-121">When event handlers that are added through [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] are serialized, they are not preserved.</span></span> [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] <span data-ttu-id="59370-122">без кода программной части (и без связанного механизма x:Code) не имеет возможности сериализовать процедурную логику времени выполнения.</span><span class="sxs-lookup"><span data-stu-id="59370-122">without code-behind (and also without the related x:Code mechanism) has no way of serializing runtime procedural logic.</span></span> <span data-ttu-id="59370-123">Поскольку сериализация является самодостаточной и ограничивается логическим деревом, не существует средств для хранения обработчиков событий.</span><span class="sxs-lookup"><span data-stu-id="59370-123">Because serialization is self-contained and limited to the logical tree, there is no facility for storing the event handlers.</span></span> <span data-ttu-id="59370-124">В результате атрибуты обработчика событий (и атрибут, и строковое значение имени обработчика) удаляются из выходных данных [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="59370-124">As a result, event handler attributes, both the attribute itself and the string value that names the handler, are removed from the output [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span>  
  
<a name="Realistic_Scenarios_for_Use_of_XAMLWriter_Save"></a>
## <a name="realistic-scenarios-for-use-of-xamlwritersave"></a><span data-ttu-id="59370-125">Реалистичные сценарии использования XAMLWriter.Save</span><span class="sxs-lookup"><span data-stu-id="59370-125">Realistic Scenarios for Use of XAMLWriter.Save</span></span>  
 <span data-ttu-id="59370-126">Хотя перечисленные здесь ограничения довольно значительны, есть еще <xref:System.Windows.Markup.XamlWriter.Save%2A> несколько подходящих сценариев для использования для сериализации.</span><span class="sxs-lookup"><span data-stu-id="59370-126">While the limitations listed here are fairly substantial, there are still several appropriate scenarios for using <xref:System.Windows.Markup.XamlWriter.Save%2A> for serialization.</span></span>  
  
- <span data-ttu-id="59370-127">Вывод векторных или графических данных. Вывод преобразованной для просмотра области можно использовать для воспроизведения того же вектора или графики при перезагрузке.</span><span class="sxs-lookup"><span data-stu-id="59370-127">Vector or graphical output: The output of the rendered area can be used to reproduce the same vector or graphics when reloaded.</span></span>  
  
- <span data-ttu-id="59370-128">Форматированный текст и потоковые документы. Текст и все форматирование элементов и элементы внутри него сохраняются в выходных данных.</span><span class="sxs-lookup"><span data-stu-id="59370-128">Rich text and flow documents: Text and all element formatting and element containment within it is preserved in the output.</span></span> <span data-ttu-id="59370-129">Это может быть полезно для механизмов, которые аппроксимируют функциональность буфера обмена.</span><span class="sxs-lookup"><span data-stu-id="59370-129">This can be useful for mechanisms that approximate a clipboard functionality.</span></span>  
  
- <span data-ttu-id="59370-130">Сохранение данных бизнес-объектов: Если вы хранили данные в пользовательских элементах, [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] таких как данные XML, до тех пор, пока бизнес-объекты следуют основным правилам, таким как предоставление пользовательских конструкторов и преобразование для значений свойств по ссылке, эти бизнес-объекты могут быть увековечены путем сериализации.</span><span class="sxs-lookup"><span data-stu-id="59370-130">Preserving business object data: If you have stored data in custom elements, such as XML data, so long as your business objects follow basic [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] rules such as providing custom constructors and conversion for by-reference property values, these business objects can be perpetuated through serialization.</span></span>
