---
title: Сериализация ограничений XamlWriter.Save
ms.date: 03/30/2017
helpviewer_keywords:
- XamlWriter.Save [WPF], serialization limitations of
- limitations of XamlWriter.Save
- serialization limitations of XamlWriter.Save
ms.assetid: f86acc91-2b67-4039-8555-505734491d36
ms.openlocfilehash: 96e917898320fb5d49f4e7dfc27daa7750af9d41
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2020
ms.locfileid: "79174372"
---
# <a name="serialization-limitations-of-xamlwritersave"></a>Сериализация ограничений XamlWriter.Save
API <xref:System.Windows.Markup.XamlWriter.Save%2A> может быть использован для сериализации [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] содержимого [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] приложения в виде файла. Однако существуют некоторые заметные ограничения в том, что именно подлежит сериализации. В данном разделе описаны эти ограничения и некоторые общие рекомендации.  

<a name="Run_Time__Not_Design_Time_Representation"></a>
## <a name="run-time-not-design-time-representation"></a>Представление во время выполнения, а не во время разработки  
 Основная философия того, что сериализуется путем вызова, заключается <xref:System.Windows.Markup.XamlWriter.Save%2A> в том, что результатом будет представление объекта, который сериализируется, во время выполнения. Многие свойства времени проектирования [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] исходного файла могут быть уже [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] оптимизированы или потеряны к моменту загрузки объекта в памяти и не сохраняются при вызове <xref:System.Windows.Markup.XamlWriter.Save%2A> для сериализации. Результат сериализации — эффективное представление построенного логического дерева приложения, но не обязательно исходного [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], который его создал. Эти проблемы делают его <xref:System.Windows.Markup.XamlWriter.Save%2A> чрезвычайно трудно использовать сериализации как часть обширной [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] поверхности дизайна.  
  
<a name="Serialization_is_Self_Contained"></a>
## <a name="serialization-is-self-contained"></a>Сериализация самодостаточна  
 Сериализованный выход <xref:System.Windows.Markup.XamlWriter.Save%2A> является автономным; все, что сериализуется, содержится внутри [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] одной страницы, с одним корневым элементом и никакими внешними ссылками, кроме URIs. Например, если страницы ссылаются на ресурсы из ресурсов приложения, они будут отображаться, как если бы они были компонентом сериализуемой страницы.  
  
<a name="Extension_References_are_Dereferenced"></a>
## <a name="extension-references-are-dereferenced"></a>Ссылки на расширения разыменовываются  
 Общие ссылки на объекты, сделанные различными форматами расширения разметки, такие как `StaticResource` или `Binding`, будут разыменованы в процессе сериализации. Они уже были денезначны в то время, когда объекты памяти были созданы временем выполнения приложения, и <xref:System.Windows.Markup.XamlWriter.Save%2A> логика не пересматривает оригинал [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] для восстановления таких ссылок на серийный вывод. Это потенциально замораживает любое значение, полученное из привязки данных или ресурсов, которое в последний раз использовалось представлением во время выполнения, и остается только ограниченная или косвенная возможность отличать такое значение от любого другого значения, установленного локально. Изображения также сериализируются как объектные ссылки на изображения, как они существуют в проекте, а не как исходные ссылки источника, потеряв все файловое имя или URI был первоначально ссылки. Ресурсы, объявленные на одной странице, воспринимаются как сериализованные в том месте, где они были указаны ссылками, а не сохраняются как ключ коллекции ресурсов.  
  
<a name="Event_Handling_is_Not_Preserved"></a>
## <a name="event-handling-is-not-preserved"></a>Обработка событий не сохраняется  
 Если обработчики событий, которые добавляются с помощью [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], будут сериализованы, то они не сохранятся. [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] без кода программной части (и без связанного механизма x:Code) не имеет возможности сериализовать процедурную логику времени выполнения. Поскольку сериализация является самодостаточной и ограничивается логическим деревом, не существует средств для хранения обработчиков событий. В результате атрибуты обработчика событий (и атрибут, и строковое значение имени обработчика) удаляются из выходных данных [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].  
  
<a name="Realistic_Scenarios_for_Use_of_XAMLWriter_Save"></a>
## <a name="realistic-scenarios-for-use-of-xamlwritersave"></a>Реалистичные сценарии использования XAMLWriter.Save  
 Хотя перечисленные здесь ограничения довольно значительны, есть еще <xref:System.Windows.Markup.XamlWriter.Save%2A> несколько подходящих сценариев для использования для сериализации.  
  
- Вывод векторных или графических данных. Вывод преобразованной для просмотра области можно использовать для воспроизведения того же вектора или графики при перезагрузке.  
  
- Форматированный текст и потоковые документы. Текст и все форматирование элементов и элементы внутри него сохраняются в выходных данных. Это может быть полезно для механизмов, которые аппроксимируют функциональность буфера обмена.  
  
- Сохранение данных бизнес-объектов: Если вы хранили данные в пользовательских элементах, [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] таких как данные XML, до тех пор, пока бизнес-объекты следуют основным правилам, таким как предоставление пользовательских конструкторов и преобразование для значений свойств по ссылке, эти бизнес-объекты могут быть увековечены путем сериализации.
