---
title: Уровни графической отрисовки
ms.date: 03/30/2017
helpviewer_keywords:
- graphics [WPF], performance
- rendering graphics [WPF]
- rendering tiers [WPF]
- graphics rendering tiers [WPF]
- graphics [WPF], rendering tiers
ms.assetid: 08dd1606-02a2-4122-9351-c0afd2ec3a70
ms.openlocfilehash: 5e99a8cbf1a3fcac2b6785128c284911949f7997
ms.sourcegitcommit: 267d092663aba36b6b2ea853034470aea493bfae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/21/2020
ms.locfileid: "80111846"
---
# <a name="graphics-rendering-tiers"></a>Уровни графической отрисовки
Уровень отрисовки определяет уровень возможностей графического оборудования и производительность для устройства, на котором выполняется приложение [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].  

<a name="graphics_hardware"></a>
## <a name="graphics-hardware"></a>Графическое оборудование  
 Ниже перечислены возможности графического оборудования, которые сильнее всего влияют на уровни отрисовки.  
  
- **Видеопамять**. Объем видеопамяти графического оборудования определяет размер и число буферов, которые можно использовать для компоновки графики.  
  
- **Построитель текстуры**. Построитель текстуры — это функция обработки графики, вычисляющая эффекты на уровне пикселей. В зависимости от разрешения отображаемой графики может быть несколько миллионов пикселей, которые необходимо обработать для каждого отображаемого кадра.  
  
- **Вершинный построитель текстуры**. Вершинный построитель текстуры — это функция обработки графики для выполнения математических операций над данными вершин объекта.  
  
- **Поддержка мультитекстурирования**. Поддержка мультитекстурирования относится к возможности применить две и более разных текстур во время операции смешения на объекте трехмерной графики. Степень многотекстурной поддержки определяется числом мультитекстурных модулей на графическом оборудовании.  
  
<a name="rendering_tier_definitions"></a>
## <a name="rendering-tier-definitions"></a>Определения уровней отрисовки  
 Возможности графического оборудования определяют возможности отрисовки приложения [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]. Система [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] определяет три уровня отрисовки.  
  
- **Уровень отрисовки 0**. Аппаратное ускорение графики отсутствует. Все графические возможности реализуются с использованием программного ускорения. Уровень версии DirectX меньше версии 9.0.  
  
- **Уровень отрисовки 1**. Некоторые графические функции используют аппаратное ускорение графики. Уровень версии DirectX больше или равен версии 9.0.  
  
- **Уровень отрисовки 2**. Большинство графических функций используют аппаратное ускорение графики. Уровень версии DirectX больше или равен версии 9.0.  
  
 Свойство <xref:System.Windows.Media.RenderCapability.Tier%2A?displayProperty=nameWithType> позволяет получить уровень рендеринга во время выполнения приложения. Уровень отрисовки используется, чтобы определить, поддерживает ли устройство те или иные функции графики аппаратного ускорения. Затем приложение может принимать разные пути кода во время выполнения в зависимости от поддерживаемого устройством уровня отрисовки.  
  
### <a name="rendering-tier-0"></a>Уровень отрисовки 0  
 Значение 0 для уровня отрисовки означает, что аппаратное ускорение графики недоступно для приложения на устройстве. На этом уровне нужно исходить из того, что вся графика будет отрисовываться программным обеспечением без аппаратного ускорения. Функциональность этого уровня соответствует версии DirectX, которая составляет менее 9,0.  
  
### <a name="rendering-tier-1-and-rendering-tier-2"></a>Уровень отрисовки 1 и уровень отрисовки 2  
  
> [!NOTE]
> Начиная с .NET Framework 4, рендеринг 1 был пересмотрен, чтобы включить только графическое оборудование, которое поддерживает DirectX 9.0 или больше. Графическое оборудование, которое поддерживает DirectX 7 или 8, теперь определяется как рендеринг 0 уровня.  
  
 Отрисовка уровня 1 или 2 означает, что большая часть графических возможностей [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] будет использовать аппаратное ускорение, если необходимые системные ресурсы доступны и не исчерпаны. Это соответствует версии DirectX, которая больше или равна 9.0.  
  
 В таблице ниже приводятся различия в требованиях к графическому оборудованию для уровней отрисовки 1 и 2:  
  
|Компонент|Уровень 1|Уровень 2|  
|-------------|------------|------------|  
|Версия DirectX|Должно быть больше или равно 9.0.|Должно быть больше или равно 9.0.|  
|Видеопамять|Должно быть больше или равно 60 МБ.|Должно быть больше или равно 120 МБ.|  
|Построитель текстуры|Уровень версии должен быть больше или равен версии 2.0.|Уровень версии должен быть больше или равен версии 2.0.|  
|Вершинный построитель текстуры|Без требований.|Уровень версии должен быть больше или равен версии 2.0.|  
|Модули мультитекстурирования|Без требований.|Число модулей должно быть больше или равно 4.|  
  
 Следующие функции и возможности обеспечиваются аппаратным ускорением для уровней отрисовки 1 и 2.  
  
|Компонент|Примечания|  
|-------------|-----------|  
|Двухмерная отрисовка|Поддерживается большинство двухмерных отрисовок.|  
|Растеризация 3D|Поддерживается большинство трехмерных растеризаций.|  
|Трехмерная анизотропная фильтрация|[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] пытается использовать анизотропную фильтрацию при отрисовке трехмерного содержимого. Анизотропная фильтрация используется для повышения качества изображения текстур на удаленных поверхностях, которые находятся под большим углом по отношению к камере.|  
|Трехмерное MIP-сопоставление|[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] пытается использовать MIP-сопоставление при отрисовке трехмерного содержимого. MIP отображение улучшает качество визуализации текстуры, когда текстура <xref:System.Windows.Controls.Viewport3D>занимает меньшее поле зрения в .|  
|Радиальные градиенты|Поддерживая поддержку, <xref:System.Windows.Media.RadialGradientBrush> избегайте использования на крупных объектах.|  
|Вычисления трехмерного освещения|[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] выполняет освещение на уровне вершин, т. е. интенсивность света вычисляется на каждой вершине для каждого материала, применяемого к сетке.|  
|Отрисовка текста|В отрисовке шрифта на субпиксельном уровне используются доступные построители текстур на графическом оборудовании.|  
  
 Следующие функции и возможности обеспечиваются аппаратным ускорением для уровня отрисовки 2.  
  
|Компонент|Примечания|  
|-------------|-----------|  
|Трехмерное сглаживание|3D анти-алиазирование поддерживается только на операционных системах, поддерживающих модель драйвера Windows Display (WDDM), таких как Windows Vista и Windows 7.|  
  
 Следующие функции и возможности **не** обеспечиваются аппаратным ускорением.  
  
|Компонент|Примечания|  
|-------------|-----------|  
|Содержимое вывода|Все содержимое вывода отображается с помощью программного конвейера [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].|  
|Rasterized содержание, которое использует<xref:System.Windows.Media.Imaging.RenderTargetBitmap>|Любое содержимое, <xref:System.Windows.Media.Imaging.RenderTargetBitmap.Render%2A> оказываемое с помощью метода <xref:System.Windows.Media.Imaging.RenderTargetBitmap>.|  
|Tiled содержание, которое использует<xref:System.Windows.Media.TileBrush>|Любое кафельное <xref:System.Windows.Media.TileBrush.TileMode%2A> содержимое, <xref:System.Windows.Media.TileBrush> в <xref:System.Windows.Media.TileMode.Tile>котором свойство установлено.|  
|Поверхности, которые превышают максимальный размер текстуры графического оборудования|Для большинства графических устройств большие поверхности имеют размер 2048 x 2048 или 4096 x 4096 пикселей.|  
|Любая операция, требования к видеопамяти которой превышают объем памяти графического оборудования|Можно отслеживать использование видеопамяти приложения, используя средство Perforator, включенное в [WPF Performance Suite](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/aa969767(v=vs.100)) в комплекте SDK Windows.|  
|Многослойные окна|Многослойные окна позволяют приложениям [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] отображать содержимое на экране в непрямоугольных окнах. На операционных системах, поддерживающих модель драйвера Windows Display (WDDM), таких как Windows Vista и Windows 7, многослойные окна являются аппаратными ускоренными. На других системах, таких как Windows XP, многослойные окна отображаются программным обеспечением без аппаратного ускорения.<br /><br /> Вы можете включить многослойные окна, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] установив следующие <xref:System.Windows.Window> свойства:<br /><br /> -   <xref:System.Windows.Window.WindowStyle%2A> = <xref:System.Windows.WindowStyle.None><br />-   <xref:System.Windows.Window.AllowsTransparency%2A> = `true`<br />-   <xref:System.Windows.Controls.Control.Background%2A> = <xref:System.Windows.Media.Brushes.Transparent%2A>|  
  
<a name="other_resources"></a>
## <a name="other-resources"></a>Другие ресурсы  
 Следующие ресурсы могут помочь проанализировать характеристики производительности вашего приложения [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].  
  
### <a name="graphics-rendering-registry-settings"></a>Настройки реестра графической отрисовки  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] включает четыре параметра реестра для управления функциями отрисовки [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].  
  
|Параметр|Описание|  
|-------------|-----------------|  
|**Отключить аппаратное ускорение**|Указывает, следует ли включить аппаратное ускорение.|  
|**Максимальное значение мультисэмплинга**|Определяет степень многоразового отбора для антиалиазирования 3D-контента.|  
|**Требуемая дата видеодрайвера**|Указывает, отключает ли система аппаратное ускорение для драйверов, выпущенных до ноября 2004 г.|  
|**Использовать средство программной прорисовки**|Указывает, следует ли [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] использовать средство программной прорисовки.|  
  
 Эти параметры доступны любой внешней служебной программе настройки, которая знает, как ссылаться на параметры реестра [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]. Эти параметры также могут быть созданы или изменены путем доступа к значениям непосредственно с помощью редактора реестра Windows. Более подробную информацию см. в разделе [Настройки реестра графической отрисовки](../graphics-multimedia/graphics-rendering-registry-settings.md).  
  
### <a name="wpf-performance-profiling-tools"></a>Средства профилирования производительности WPF  
 В состав [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] входит пакет инструментов для профилирования производительности, с помощью которых можно проанализировать поведение приложения во время выполнения и определить, каким образом можно повысить производительность. В следующей таблице перечислены инструменты профилирования производительности, включенные в инструмент Windows SDK, WPF Performance Suite:  
  
|Инструмент|Описание|  
|----------|-----------------|  
|Perforator|Используется для анализа поведения отрисовки.|  
|Visual Profiler|Служит для профилирования использования служб [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], например обработки макета и событий, по элементам в визуальном дереве.|  
  
 WPF Performance Suite обеспечивает многофункциональное графическое представление данных производительности. Дополнительные сведения о средствах производительности WPF см. в разделе [WPF Performance Suite](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/aa969767(v=vs.100)).  
  
### <a name="directx-diagnostic-tool"></a>средство диагностики DirectX  
 Диагностический инструмент DirectX, Dxdiag.exe, предназначен для устранения неполадок, связанных с DirectX. Папка установки по умолчанию для диагностического инструмента DirectX:  
  
 `~\Windows\System32`  
  
 При запуске диагностического инструмента DirectX основное окно содержит набор вкладок, которые позволяют отображать и диагностировать информацию, связанную с DirectX. Например, вкладка **System** предоставляет системную информацию о вашем компьютере и определяет версию DirectX, которая установлена на вашем компьютере.  
  
 ![Снимок экрана: инструмент диагностики DirectX](./media/directxdiagnostictool-01.png "DirectXDiagnosticTool_01")  
Главное окно инструмента диагностики DirectX  
  
## <a name="see-also"></a>См. также раздел

- <xref:System.Windows.Media.RenderCapability>
- <xref:System.Windows.Media.RenderOptions>
- [Улучшение производительности приложений WPF](optimizing-wpf-application-performance.md)
- [WPF Performance Suite](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/aa969767(v=vs.100))
- [Настройки реестра графической отрисовки](../graphics-multimedia/graphics-rendering-registry-settings.md)
- [Советы и рекомендации по анимации](../graphics-multimedia/animation-tips-and-tricks.md)
