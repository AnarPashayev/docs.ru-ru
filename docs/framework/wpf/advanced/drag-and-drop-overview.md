---
title: Общие сведения о перетаскивании
description: Сведения о поддержке перетаскивания в приложениях Windows Presentation Foundation, которые позволяют пользователям перетаскивать объекты в область пользовательского интерфейса.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- drag-and-drop [WPF], implementing
- drag sources [WPF], drag-and-drop
- data transfer [WPF], drag-and-drop
- drag-and-drop [WPF], about
- drag-and-drop [WPF], events
- drop targets [WPF], drag-and-drop
ms.assetid: 1a5b27b0-0ac5-4cdf-86c0-86ac0271fa64
ms.openlocfilehash: 63384e79d8a198e4cc9507ca3266c484c0506e2c
ms.sourcegitcommit: 87cfeb69226fef01acb17c56c86f978f4f4a13db
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/24/2020
ms.locfileid: "87168074"
---
# <a name="drag-and-drop-overview"></a><span data-ttu-id="f3aeb-103">Общие сведения о перетаскивании</span><span class="sxs-lookup"><span data-stu-id="f3aeb-103">Drag and Drop Overview</span></span>
<span data-ttu-id="f3aeb-104">В этой статье приведены общие сведения о поддержке перетаскивания в приложениях [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f3aeb-104">This topic provides an overview of drag-and-drop support in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] applications.</span></span> <span data-ttu-id="f3aeb-105">Перетаскиванием обычно называют метод передачи данных, который реализуется с помощью мыши (или другого указывающего устройства) для выбора одного или нескольких объектов и перетаскивания их в цель перетаскивания в [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f3aeb-105">Drag-and-drop commonly refers to a method of data transfer that involves using a mouse (or some other pointing device) to select one or more objects, dragging these objects over some desired drop target in the [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)], and dropping them.</span></span>  

<a name="Drag_and_Drop_Support"></a>
## <a name="drag-and-drop-support-in-wpf"></a><span data-ttu-id="f3aeb-106">Поддержка перетаскивания в WPF</span><span class="sxs-lookup"><span data-stu-id="f3aeb-106">Drag-and-Drop Support in WPF</span></span>  
 <span data-ttu-id="f3aeb-107">В операциях перетаскивания обычно участвуют две стороны: источник перетаскивания, из которого происходит перетаскиваемый объект, и цель перетаскивания, которая получает перетаскиваемый объект.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-107">Drag-and-drop operations typically involve two parties: a drag source from which the dragged object originates and a drop target which receives the dropped object.</span></span>  <span data-ttu-id="f3aeb-108">Источник перетаскивания и цель перетаскивания могут быть элементами пользовательского интерфейса в одном приложении или в разных приложениях.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-108">The drag source and drop target may be UI elements in the same application or a different application.</span></span>  
  
 <span data-ttu-id="f3aeb-109">Можно перетаскивать совершенно произвольные типы и количества объектов.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-109">The type and number of objects that can be manipulated with drag-and-drop is completely arbitrary.</span></span> <span data-ttu-id="f3aeb-110">Например, в качестве наиболее распространенных объектов перетаскивания можно назвать файлы, папки, выбранное содержимое.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-110">For example, files, folders, and selections of content are some of the more common objects manipulated through drag-and-drop operations.</span></span>  
  
 <span data-ttu-id="f3aeb-111">Конкретные действия, выполняемые во время операции перетаскивания, зависят от приложения и часто определяются контекстом.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-111">The particular actions performed during a drag-and-drop operation are application specific, and often determined by context.</span></span>  <span data-ttu-id="f3aeb-112">Например, перетаскивание выбранных файлов из одной папки в другую на одном устройстве хранения перемещает файлы по умолчанию, тогда как при перетаскивании файлов из общего ресурса UNC в локальную папку файлы копируются по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-112">For example, dragging a selection of files from one folder to another on the same storage device moves the files by default, whereas dragging files from a Universal Naming Convention (UNC) share to a local folder copies the files by default.</span></span>  
  
 <span data-ttu-id="f3aeb-113">В средствах перетаскивания, предоставляемых [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], предусмотрена высокая гибкость и возможность настройки с целью поддержки различных сценариев перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-113">The drag-and-drop facilities provided by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] are designed to be highly flexible and customizable to support a wide variety of drag-and-drop scenarios.</span></span>  <span data-ttu-id="f3aeb-114">Перетаскивание поддерживает управление объектами в рамках одного приложения или в разных приложениях.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-114">Drag-and-drop supports manipulating objects within a single application, or between different applications.</span></span> <span data-ttu-id="f3aeb-115">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]Также полностью поддерживаются перетаскивание между приложениями и другими приложениями Windows.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-115">Dragging-and-dropping between [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] applications and other Windows applications is also fully supported.</span></span>  
  
 <span data-ttu-id="f3aeb-116">В [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] любые элементы <xref:System.Windows.UIElement> или <xref:System.Windows.ContentElement> могут участвовать в операциях перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-116">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], any <xref:System.Windows.UIElement> or <xref:System.Windows.ContentElement> can participate in drag-and-drop.</span></span> <span data-ttu-id="f3aeb-117">События и методы, необходимые для операций перетаскивания, определяются в классе <xref:System.Windows.DragDrop>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-117">The events and methods required for drag-and-drop operations are defined in the <xref:System.Windows.DragDrop> class.</span></span> <span data-ttu-id="f3aeb-118">Классы <xref:System.Windows.UIElement> и <xref:System.Windows.ContentElement> содержат псевдонимы для вложенных событий <xref:System.Windows.DragDrop>, чтобы эти события отображались в списке членов класса, когда <xref:System.Windows.UIElement> или <xref:System.Windows.ContentElement> наследуется как базовый элемент.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-118">The <xref:System.Windows.UIElement> and <xref:System.Windows.ContentElement> classes contain aliases for the <xref:System.Windows.DragDrop> attached events so that the events appear in the class members list when a <xref:System.Windows.UIElement> or <xref:System.Windows.ContentElement> is inherited as a base element.</span></span> <span data-ttu-id="f3aeb-119">Обработчики событий, связанные с этими событиями, присоединяются к основному вложенному событию <xref:System.Windows.DragDrop> и получают один и тот же экземпляр данных события.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-119">Event handlers that are attached to these events are attached to the underlying <xref:System.Windows.DragDrop> attached event and receive the same event data instance.</span></span> <span data-ttu-id="f3aeb-120">Дополнительные сведения см. в описании события <xref:System.Windows.UIElement.Drop?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-120">For more information, see the <xref:System.Windows.UIElement.Drop?displayProperty=nameWithType> event.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="f3aeb-121">Перетаскивание OLE не работает в зоне Интернета.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-121">OLE drag-and-drop does not work while in the Internet zone.</span></span>  
  
<a name="Data_Transfer"></a>
## <a name="data-transfer"></a><span data-ttu-id="f3aeb-122">Передача данных</span><span class="sxs-lookup"><span data-stu-id="f3aeb-122">Data Transfer</span></span>  
 <span data-ttu-id="f3aeb-123">Перетаскивание является частью более общей сферы передачи данных.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-123">Drag-and-drop is part of the more general area of data transfer.</span></span> <span data-ttu-id="f3aeb-124">Передача данных включает операции перетаскивания и операции копирования и вставки.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-124">Data transfer includes drag-and-drop and copy-and-paste operations.</span></span> <span data-ttu-id="f3aeb-125">Операция перетаскивания аналогична операции копирования и вставки или вырезания и вставки, которая используется для передачи данных из одного объекта или приложения в другое с использованием буфера обмена.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-125">A drag-and-drop operation is analogous to a copy-and-paste or cut-and-paste operation that is used to transfer data from one object or application to another by using the system clipboard.</span></span> <span data-ttu-id="f3aeb-126">В обоих типах операций требуется:</span><span class="sxs-lookup"><span data-stu-id="f3aeb-126">Both types of operations require:</span></span>  
  
- <span data-ttu-id="f3aeb-127">исходный объект, предоставляющий данные;</span><span class="sxs-lookup"><span data-stu-id="f3aeb-127">A source object that provides the data.</span></span>  
  
- <span data-ttu-id="f3aeb-128">способ временного хранения передаваемых данных;</span><span class="sxs-lookup"><span data-stu-id="f3aeb-128">A way to temporarily store the transferred data.</span></span>  
  
- <span data-ttu-id="f3aeb-129">целевой объект, который получает данные.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-129">A target object that receives the data.</span></span>  
  
 <span data-ttu-id="f3aeb-130">В операции копирования и вставки для временного хранения передаваемых данных используется системный буфер обмена; в операции перетаскивания для хранения данных используется <xref:System.Windows.DataObject>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-130">In a copy-and-paste operation, the system clipboard is used to temporarily store the transferred data; in a drag-and-drop operation, a <xref:System.Windows.DataObject> is used to store the data.</span></span> <span data-ttu-id="f3aeb-131">Концептуально объект данных состоит из одной или нескольких пар <xref:System.Object>, содержащих фактические данные и соответствующий идентификатор формата данных.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-131">Conceptually, a data object consists of one or more pairs of an <xref:System.Object> that contains the actual data, and a corresponding data format identifier.</span></span>  
  
 <span data-ttu-id="f3aeb-132">Источник перетаскивания инициирует операцию перетаскивания путем вызова статического метода <xref:System.Windows.DragDrop.DoDragDrop%2A?displayProperty=nameWithType> и передачи в него передаваемых данных.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-132">The drag source initiates a drag-and-drop operation by calling the static <xref:System.Windows.DragDrop.DoDragDrop%2A?displayProperty=nameWithType> method and passing the transferred data to it.</span></span> <span data-ttu-id="f3aeb-133">Метод <xref:System.Windows.DragDrop.DoDragDrop%2A> будет автоматически включать данные в <xref:System.Windows.DataObject> при необходимости.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-133">The <xref:System.Windows.DragDrop.DoDragDrop%2A> method will automatically wrap the data in a <xref:System.Windows.DataObject> if necessary.</span></span> <span data-ttu-id="f3aeb-134">Для большего контроля над форматом данных можно включать данные в <xref:System.Windows.DataObject> перед их передачей в метод <xref:System.Windows.DragDrop.DoDragDrop%2A>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-134">For greater control over the data format, you can wrap the data in a <xref:System.Windows.DataObject> before passing it to the <xref:System.Windows.DragDrop.DoDragDrop%2A> method.</span></span> <span data-ttu-id="f3aeb-135">Цель перетаскивания отвечает за извлечение данных из <xref:System.Windows.DataObject>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-135">The drop target is responsible for extracting the data from the <xref:System.Windows.DataObject>.</span></span> <span data-ttu-id="f3aeb-136">Дополнительные сведения о работе с объектами данных см. в разделе [Данные и объекты данных](data-and-data-objects.md).</span><span class="sxs-lookup"><span data-stu-id="f3aeb-136">For more information about working with data objects, see [Data and Data Objects](data-and-data-objects.md).</span></span>  
  
 <span data-ttu-id="f3aeb-137">Исходный и целевой объекты операции перетаскивания являются элементами пользовательского интерфейса; однако данные, которые в действительности передаются, обычно не имеют визуального представления.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-137">The source and target of a drag-and-drop operation are UI elements; however, the data that is actually being transferred typically does not have a visual representation.</span></span> <span data-ttu-id="f3aeb-138">Вы можете написать код для визуального представления перетаскиваемых данных, например такого, которое происходит при перетаскивании файлов в проводнике.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-138">You can write code to provide a visual representation of the data that is dragged, such as occurs when dragging files in Windows Explorer.</span></span> <span data-ttu-id="f3aeb-139">По умолчанию взаимодействие предоставляется пользователю путем изменения курсора для представления воздействия, которое операция перетаскивания оказывает на данные: например, перемещаются данные или копируются.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-139">By default, feedback is provided to the user by changing the cursor to represent the effect that the drag-and-drop operation will have on the data, such as whether the data will be moved or copied.</span></span>  
  
### <a name="drag-and-drop-effects"></a><span data-ttu-id="f3aeb-140">Эффекты перетаскивания</span><span class="sxs-lookup"><span data-stu-id="f3aeb-140">Drag-and-Drop Effects</span></span>  
 <span data-ttu-id="f3aeb-141">Операции перетаскивания могут по-разному воздействовать на передаваемые данные.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-141">Drag-and-drop operations can have different effects on the transferred data.</span></span> <span data-ttu-id="f3aeb-142">Например, данные могут копироваться или перемещаться.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-142">For example, you can copy the data or you can move the data.</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="f3aeb-143">задает перечисление <xref:System.Windows.DragDropEffects>, которое можно использовать для указания эффекта операции перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-143">defines a <xref:System.Windows.DragDropEffects> enumeration that you can use to specify the effect of a drag-and-drop operation.</span></span> <span data-ttu-id="f3aeb-144">В источнике перетаскивания можно указать эффекты, которые он разрешает, в методе <xref:System.Windows.DragDrop.DoDragDrop%2A>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-144">In the drag source, you can specify the effects that the source will allow in the <xref:System.Windows.DragDrop.DoDragDrop%2A> method.</span></span> <span data-ttu-id="f3aeb-145">В цели перетаскивания можно определить ожидаемый эффект в свойстве <xref:System.Windows.DragEventArgs.Effects%2A> класса <xref:System.Windows.DragEventArgs>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-145">In the drop target, you can specify the effect that the target intends in the <xref:System.Windows.DragEventArgs.Effects%2A> property of the <xref:System.Windows.DragEventArgs> class.</span></span> <span data-ttu-id="f3aeb-146">Если в цели перетаскивания ожидаемый эффект задан в событии <xref:System.Windows.DragDrop.DragOver>, то информация передается обратно в источник перетаскивания в событии <xref:System.Windows.DragDrop.GiveFeedback>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-146">When the drop target specifies its intended effect in the <xref:System.Windows.DragDrop.DragOver> event, that information is passed back to the drag source in the <xref:System.Windows.DragDrop.GiveFeedback> event.</span></span> <span data-ttu-id="f3aeb-147">Источник перетаскивания использует эти сведения для информирования пользователей, какое воздействие на данные ожидает цель перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-147">The drag source uses this information to inform the user what effect the drop target intends to have on the data.</span></span> <span data-ttu-id="f3aeb-148">Когда данные вставляются, цель перетаскивания указывает фактический эффект в событии <xref:System.Windows.DragDrop.Drop>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-148">When the data is dropped, the drop target specifies its actual effect in the <xref:System.Windows.DragDrop.Drop> event.</span></span> <span data-ttu-id="f3aeb-149">Эти сведения передаются обратно в источник перетаскивания в качестве возвращаемого значения метода <xref:System.Windows.DragDrop.DoDragDrop%2A>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-149">That information is passed back to the drag source as the return value of the <xref:System.Windows.DragDrop.DoDragDrop%2A> method.</span></span> <span data-ttu-id="f3aeb-150">Если цель перетаскивания возвращает эффект, которого нет в списке `allowedEffects` источников перетаскивания, операция перетаскивания отменяется без фактической передачи данных.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-150">If the drop target returns an effect that is not in the drag sources list of `allowedEffects`, the drag-and-drop operation is cancelled without any data transfer occurring.</span></span>  
  
 <span data-ttu-id="f3aeb-151">Важно помнить, что в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] значения <xref:System.Windows.DragDropEffects> используются только для обеспечения взаимодействия между источником перетаскивания и целью перетаскивания относительно эффектов операции перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-151">It is important to remember that in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], the <xref:System.Windows.DragDropEffects> values are only used to provide communication between the drag source and the drop target regarding the effects of the drag-and-drop operation.</span></span> <span data-ttu-id="f3aeb-152">Фактический эффект операции перетаскивания зависит от соответствующего кода, написанного вами в приложении.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-152">The actual effect of the drag-and-drop operation depends on you to write the appropriate code in your application.</span></span>  
  
 <span data-ttu-id="f3aeb-153">Например, цель перетаскивания может указывать, что в результате перетаскивания в него данных должно происходить перемещение данных.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-153">For example, the drop target might specify that the effect of dropping data on it is to move the data.</span></span> <span data-ttu-id="f3aeb-154">Однако для перемещения данных они должны добавляться в целевой элемент и удаляться из исходного элемента.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-154">However, to move the data, it must be both added to the target element and removed from the source element.</span></span> <span data-ttu-id="f3aeb-155">Исходный элемент может указывать, что он разрешает перемещение данных, но если вы не предоставите код для удаления данных из исходного элемента, данные в итоге будут копироваться, а не перемещаться.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-155">The source element might indicate that it allows moving the data, but if you do not provide the code to remove the data from the source element, the end result will be that the data is copied, and not moved.</span></span>  
  
<a name="Drag_and_Drop_Events"></a>
## <a name="drag-and-drop-events"></a><span data-ttu-id="f3aeb-156">События перетаскивания</span><span class="sxs-lookup"><span data-stu-id="f3aeb-156">Drag-and-Drop Events</span></span>  
 <span data-ttu-id="f3aeb-157">Операции перетаскивания поддерживают модель управления событиями.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-157">Drag-and-drop operations support an event driven model.</span></span>  <span data-ttu-id="f3aeb-158">Источник и цель перетаскивания используют стандартный набор событий для обработки операций перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-158">Both the drag source and the drop target use a standard set of events to handle drag-and-drop operations.</span></span>  <span data-ttu-id="f3aeb-159">В следующих таблицах приведены стандартные события перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-159">The following tables summarize the standard drag-and-drop events.</span></span> <span data-ttu-id="f3aeb-160">Это вложенные события в классе <xref:System.Windows.DragDrop>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-160">These are attached events on the <xref:System.Windows.DragDrop> class.</span></span> <span data-ttu-id="f3aeb-161">Дополнительные сведения о вложенных событиях см. в разделе [Общие сведения о вложенных событиях](attached-events-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f3aeb-161">For more information about attached events, see [Attached Events Overview](attached-events-overview.md).</span></span>  
  
### <a name="drag-source-events"></a><span data-ttu-id="f3aeb-162">События источника перетаскивания</span><span class="sxs-lookup"><span data-stu-id="f3aeb-162">Drag Source Events</span></span>  
  
|<span data-ttu-id="f3aeb-163">Событие</span><span class="sxs-lookup"><span data-stu-id="f3aeb-163">Event</span></span>|<span data-ttu-id="f3aeb-164">Сводка</span><span class="sxs-lookup"><span data-stu-id="f3aeb-164">Summary</span></span>|  
|-----------|-------------|  
|<xref:System.Windows.DragDrop.GiveFeedback>|<span data-ttu-id="f3aeb-165">Это событие возникает постоянно во время операции перетаскивания и позволяет источнику перетаскивания предоставлять пользователю сведения о взаимодействии.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-165">This event occurs continuously during a drag-and-drop operation, and enables the drop source to give feedback information to the user.</span></span> <span data-ttu-id="f3aeb-166">Взаимодействие обычно демонстрируется путем изменения вида курсора мыши, чтобы указать разрешенные целью перетаскивания эффекты операции перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-166">This feedback is commonly given by changing the appearance of the mouse pointer to indicate the effects allowed by the drop target.</span></span>  <span data-ttu-id="f3aeb-167">Это событие восходящей маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-167">This is a bubbling event.</span></span>|  
|<xref:System.Windows.DragDrop.QueryContinueDrag>|<span data-ttu-id="f3aeb-168">Это событие возникает при изменении состояния клавиши клавиатуры или кнопки мыши во время операции перетаскивания и позволяет источнику перетаскивания отменить операцию перетаскивания в зависимости от состояния клавиши или кнопки.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-168">This event occurs when there is a change in the keyboard or mouse button states during a drag-and-drop operation, and enables the drop source to cancel the drag-and-drop operation depending on the key/button states.</span></span> <span data-ttu-id="f3aeb-169">Это событие восходящей маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-169">This is a bubbling event.</span></span>|  
|<xref:System.Windows.DragDrop.PreviewGiveFeedback>|<span data-ttu-id="f3aeb-170">Это версия нисходящей маршрутизации события <xref:System.Windows.DragDrop.GiveFeedback>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-170">Tunneling version of <xref:System.Windows.DragDrop.GiveFeedback>.</span></span>|  
|<xref:System.Windows.DragDrop.PreviewQueryContinueDrag>|<span data-ttu-id="f3aeb-171">Это версия нисходящей маршрутизации события <xref:System.Windows.DragDrop.QueryContinueDrag>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-171">Tunneling version of <xref:System.Windows.DragDrop.QueryContinueDrag>.</span></span>|  
  
### <a name="drop-target-events"></a><span data-ttu-id="f3aeb-172">События цели перетаскивания</span><span class="sxs-lookup"><span data-stu-id="f3aeb-172">Drop Target Events</span></span>  
  
|<span data-ttu-id="f3aeb-173">Событие</span><span class="sxs-lookup"><span data-stu-id="f3aeb-173">Event</span></span>|<span data-ttu-id="f3aeb-174">Сводка</span><span class="sxs-lookup"><span data-stu-id="f3aeb-174">Summary</span></span>|  
|-----------|-------------|  
|<xref:System.Windows.DragDrop.DragEnter>|<span data-ttu-id="f3aeb-175">Это событие происходит, когда объект перетаскивается в границы цели перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-175">This event occurs when an object is dragged into the drop target's boundary.</span></span> <span data-ttu-id="f3aeb-176">Это событие восходящей маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-176">This is a bubbling event.</span></span>|  
|<xref:System.Windows.DragDrop.DragLeave>|<span data-ttu-id="f3aeb-177">Это событие происходит, когда объект перетаскивается за пределы цели перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-177">This event occurs when an object is dragged out of the drop target's boundary.</span></span>  <span data-ttu-id="f3aeb-178">Это событие восходящей маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-178">This is a bubbling event.</span></span>|  
|<xref:System.Windows.DragDrop.DragOver>|<span data-ttu-id="f3aeb-179">Это событие происходит постоянно, когда объект перетаскивается (перемещается) в границы цели перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-179">This event occurs continuously while an object is dragged (moved) within the drop target's boundary.</span></span> <span data-ttu-id="f3aeb-180">Это событие восходящей маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-180">This is a bubbling event.</span></span>|  
|<xref:System.Windows.DragDrop.Drop>|<span data-ttu-id="f3aeb-181">Это событие происходит, когда объект вставляется в цель перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-181">This event occurs when an object is dropped on the drop target.</span></span>  <span data-ttu-id="f3aeb-182">Это событие восходящей маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-182">This is a bubbling event.</span></span>|  
|<xref:System.Windows.DragDrop.PreviewDragEnter>|<span data-ttu-id="f3aeb-183">Это версия нисходящей маршрутизации события <xref:System.Windows.DragDrop.DragEnter>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-183">Tunneling version of <xref:System.Windows.DragDrop.DragEnter>.</span></span>|  
|<xref:System.Windows.DragDrop.PreviewDragLeave>|<span data-ttu-id="f3aeb-184">Это версия нисходящей маршрутизации события <xref:System.Windows.DragDrop.DragLeave>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-184">Tunneling version of <xref:System.Windows.DragDrop.DragLeave>.</span></span>|  
|<xref:System.Windows.DragDrop.PreviewDragOver>|<span data-ttu-id="f3aeb-185">Это версия нисходящей маршрутизации события <xref:System.Windows.DragDrop.DragOver>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-185">Tunneling version of <xref:System.Windows.DragDrop.DragOver>.</span></span>|  
|<xref:System.Windows.DragDrop.PreviewDrop>|<span data-ttu-id="f3aeb-186">Это версия нисходящей маршрутизации события <xref:System.Windows.DragDrop.Drop>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-186">Tunneling version of <xref:System.Windows.DragDrop.Drop>.</span></span>|  
  
 <span data-ttu-id="f3aeb-187">Для обработки событий перетаскивания для экземпляров объекта добавьте обработчики событий, перечисленных в таблицах выше.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-187">To handle drag-and-drop events for instances of an object, add handlers for the events listed in the preceding tables.</span></span> <span data-ttu-id="f3aeb-188">Для обработки событий перетаскивания на уровне класса переопределите соответствующие виртуальные методы On\*Event и On\*PreviewEvent.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-188">To handle drag-and-drop events at the class level, override the corresponding virtual On\*Event and On\*PreviewEvent methods.</span></span> <span data-ttu-id="f3aeb-189">Дополнительные сведения см. в разделе [Маркировка перенаправленных событий как обработанных и обработка классов](marking-routed-events-as-handled-and-class-handling.md#Class_Handling_of_Routed_Events).</span><span class="sxs-lookup"><span data-stu-id="f3aeb-189">For more information, see [Class Handling of Routed Events by Control Base Classes](marking-routed-events-as-handled-and-class-handling.md#Class_Handling_of_Routed_Events).</span></span>  
  
<a name="Implementing_Drag_And_Drop"></a>
## <a name="implementing-drag-and-drop"></a><span data-ttu-id="f3aeb-190">Реализация перетаскивания</span><span class="sxs-lookup"><span data-stu-id="f3aeb-190">Implementing Drag-and-Drop</span></span>  
 <span data-ttu-id="f3aeb-191">Элемент пользовательского интерфейса может быть источником перетаскивания, целью перетаскивания или и тем, и другим.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-191">A UI element can be a drag source, a drop target, or both.</span></span> <span data-ttu-id="f3aeb-192">Чтобы реализовать базовое перетаскивание, необходимо написать код для инициирования операции перетаскивания и обработки перетаскиваемых данных.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-192">To implement basic drag-and-drop, you write code to initiate the drag-and-drop operation and to process the dropped data.</span></span> <span data-ttu-id="f3aeb-193">Вы можете улучшить взаимодействие перетаскивания путем обработки дополнительных событий перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-193">You can enhance the drag-and-drop experience by handling optional drag-and-drop events.</span></span>  
  
 <span data-ttu-id="f3aeb-194">Для реализации базового перетаскивания вы будете выполнять следующие задачи.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-194">To implement basic drag-and-drop, you will complete the following tasks:</span></span>  
  
- <span data-ttu-id="f3aeb-195">Определение элемента, который будет источником перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-195">Identify the element that will be a drag source.</span></span> <span data-ttu-id="f3aeb-196">Источник перетаскивания может быть <xref:System.Windows.UIElement> или <xref:System.Windows.ContentElement>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-196">A drag source can be a <xref:System.Windows.UIElement> or a <xref:System.Windows.ContentElement>.</span></span>  
  
- <span data-ttu-id="f3aeb-197">Создание обработчика событий в источнике перетаскивания, который будет инициировать операцию перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-197">Create an event handler on the drag source that will initiate the drag-and-drop operation.</span></span> <span data-ttu-id="f3aeb-198">Это событие обычно является событием <xref:System.Windows.UIElement.MouseMove>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-198">The event is typically the <xref:System.Windows.UIElement.MouseMove> event.</span></span>  
  
- <span data-ttu-id="f3aeb-199">Вызов метода <xref:System.Windows.DragDrop.DoDragDrop%2A> в обработчике событий источника перетаскивания для инициации операции перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-199">In the drag source event handler, call the <xref:System.Windows.DragDrop.DoDragDrop%2A> method to initiate the drag-and-drop operation.</span></span> <span data-ttu-id="f3aeb-200">Указание источника перетаскивания, передаваемых данных и разрешенные эффекты в вызове метода <xref:System.Windows.DragDrop.DoDragDrop%2A>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-200">In the <xref:System.Windows.DragDrop.DoDragDrop%2A> call, specify the drag source, the data to be transferred, and the allowed effects.</span></span>  
  
- <span data-ttu-id="f3aeb-201">Определение элемента, который будет целью перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-201">Identify the element that will be a drop target.</span></span> <span data-ttu-id="f3aeb-202">Целью перетаскивания может быть <xref:System.Windows.UIElement> или <xref:System.Windows.ContentElement>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-202">A drop target can be <xref:System.Windows.UIElement> or a <xref:System.Windows.ContentElement>.</span></span>  
  
- <span data-ttu-id="f3aeb-203">В цели перетаскивания установите свойство <xref:System.Windows.UIElement.AllowDrop%2A> в значение `true`.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-203">On the drop target, set the <xref:System.Windows.UIElement.AllowDrop%2A> property to `true`.</span></span>  
  
- <span data-ttu-id="f3aeb-204">В цели перетаскивания создайте обработчик событий <xref:System.Windows.DragDrop.Drop> для обработки перетаскиваемых данных.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-204">In the drop target, create a <xref:System.Windows.DragDrop.Drop> event handler to process the dropped data.</span></span>  
  
- <span data-ttu-id="f3aeb-205">В обработчике событий <xref:System.Windows.DragDrop.Drop> извлеките данные из <xref:System.Windows.DragEventArgs> с помощью методов <xref:System.Windows.DataObject.GetDataPresent%2A> и <xref:System.Windows.DataObject.GetData%2A>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-205">In the <xref:System.Windows.DragDrop.Drop> event handler, extract the data from the <xref:System.Windows.DragEventArgs> by using the <xref:System.Windows.DataObject.GetDataPresent%2A> and <xref:System.Windows.DataObject.GetData%2A> methods.</span></span>  
  
- <span data-ttu-id="f3aeb-206">В обработчике событий <xref:System.Windows.DragDrop.Drop> используйте эти данные для выполнения требуемой операции перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-206">In the <xref:System.Windows.DragDrop.Drop> event handler, use the data to perform the desired drag-and-drop operation.</span></span>  
  
 <span data-ttu-id="f3aeb-207">Вы можете улучшить реализацию перетаскивания путем создания пользовательского объекта <xref:System.Windows.DataObject> и обработки дополнительных событий источника и цели перетаскивания, как показано в следующих задачах.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-207">You can enhance your drag-and-drop implementation by creating a custom <xref:System.Windows.DataObject> and by handling optional drag source and drop target events, as shown in the following tasks:</span></span>  
  
- <span data-ttu-id="f3aeb-208">Чтобы передать пользовательские данные или несколько элементов данных, создайте объект <xref:System.Windows.DataObject> для передачи в метод <xref:System.Windows.DragDrop.DoDragDrop%2A>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-208">To transfer custom data or multiple data items, create a <xref:System.Windows.DataObject> to pass to the <xref:System.Windows.DragDrop.DoDragDrop%2A> method.</span></span>  
  
- <span data-ttu-id="f3aeb-209">Для выполнения дополнительных действий в процессе перетаскивания обработайте события <xref:System.Windows.DragDrop.DragEnter>, <xref:System.Windows.DragDrop.DragOver> и <xref:System.Windows.DragDrop.DragLeave> в цели перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-209">To perform additional actions during a drag, handle the <xref:System.Windows.DragDrop.DragEnter>, <xref:System.Windows.DragDrop.DragOver>, and <xref:System.Windows.DragDrop.DragLeave> events on the drop target.</span></span>  
  
- <span data-ttu-id="f3aeb-210">Чтобы изменить вид курсора мыши, обработайте событие <xref:System.Windows.DragDrop.GiveFeedback> в источнике перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-210">To change the appearance of the mouse pointer, handle the <xref:System.Windows.DragDrop.GiveFeedback> event on the drag source.</span></span>  
  
- <span data-ttu-id="f3aeb-211">Для изменения способа отмены операции перетаскивания обработайте событие <xref:System.Windows.DragDrop.QueryContinueDrag> в источнике перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-211">To change how the drag-and-drop operation is canceled, handle the <xref:System.Windows.DragDrop.QueryContinueDrag> event on the drag source.</span></span>  
  
<a name="Drag_And_Drop_Example"></a>
## <a name="drag-and-drop-example"></a><span data-ttu-id="f3aeb-212">Пример перетаскивания</span><span class="sxs-lookup"><span data-stu-id="f3aeb-212">Drag-and-Drop Example</span></span>  
 <span data-ttu-id="f3aeb-213">В этом разделе описывается реализация перетаскивания для элемента <xref:System.Windows.Shapes.Ellipse>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-213">This section describes how to implement drag-and-drop for an <xref:System.Windows.Shapes.Ellipse> element.</span></span> <span data-ttu-id="f3aeb-214">Элемент <xref:System.Windows.Shapes.Ellipse> является как источником, так и целью перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-214">The <xref:System.Windows.Shapes.Ellipse> is both a drag source and a drop target.</span></span> <span data-ttu-id="f3aeb-215">Передаваемые данные — это строковое представление свойства <xref:System.Windows.Shapes.Shape.Fill%2A> эллипса.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-215">The transferred data is the string representation of the ellipse’s <xref:System.Windows.Shapes.Shape.Fill%2A> property.</span></span> <span data-ttu-id="f3aeb-216">В следующем XAML показан элемент <xref:System.Windows.Shapes.Ellipse> и связанные с перетаскиванием события, которые он обрабатывает.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-216">The following XAML shows the <xref:System.Windows.Shapes.Ellipse> element and the drag-and-drop related events that it handles.</span></span> <span data-ttu-id="f3aeb-217">Полное описание действий по реализации перетаскивания см. в разделе [Пошаговое руководство. Включение перетаскивания для пользовательского элемента управления](walkthrough-enabling-drag-and-drop-on-a-user-control.md).</span><span class="sxs-lookup"><span data-stu-id="f3aeb-217">For complete steps on how to implement drag-and-drop, see [Walkthrough: Enabling Drag and Drop on a User Control](walkthrough-enabling-drag-and-drop-on-a-user-control.md).</span></span>  
  
 [!code-xaml[DragDropSnippets#EllipseXaml](~/samples/snippets/csharp/VS_Snippets_Wpf/dragdropsnippets/cs/mainwindow.xaml#ellipsexaml)]  
  
### <a name="enabling-an-element-to-be-a-drag-source"></a><span data-ttu-id="f3aeb-218">Включение элемента в качестве источника перетаскивания</span><span class="sxs-lookup"><span data-stu-id="f3aeb-218">Enabling an Element to be a Drag Source</span></span>  
 <span data-ttu-id="f3aeb-219">Объект, являющийся источником перетаскивания, отвечает за:</span><span class="sxs-lookup"><span data-stu-id="f3aeb-219">An object that is a drag source is responsible for:</span></span>  
  
- <span data-ttu-id="f3aeb-220">определение момента начала перетаскивания;</span><span class="sxs-lookup"><span data-stu-id="f3aeb-220">Identifying when a drag occurs.</span></span>  
  
- <span data-ttu-id="f3aeb-221">инициализацию операции перетаскивания;</span><span class="sxs-lookup"><span data-stu-id="f3aeb-221">Initiating the drag-and-drop operation.</span></span>  
  
- <span data-ttu-id="f3aeb-222">определение передаваемых данных;</span><span class="sxs-lookup"><span data-stu-id="f3aeb-222">Identifying the data to be transferred.</span></span>  
  
- <span data-ttu-id="f3aeb-223">указание разрешенного воздействия операции перетаскивания на передаваемые данные.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-223">Specifying the effects that the drag-and-drop operation is allowed to have on the transferred data.</span></span>  
  
 <span data-ttu-id="f3aeb-224">Источник перетаскивания может также предоставить пользователю сведения о разрешенных действиях (перемещение, копирование или отсутствие действий) и может отменять операцию перетаскивания на основании дополнительного пользовательского ввода, например нажатия клавиши ESC во время перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-224">The drag source may also give feedback to the user regarding the allowed actions (move, copy, none), and can cancel the drag-and-drop operation based on additional user input, such as pressing the ESC key during the drag.</span></span>  
  
 <span data-ttu-id="f3aeb-225">Ваше приложение должно определить, когда происходит перетаскивание, а затем инициировать операцию перетаскивания путем вызова метода <xref:System.Windows.DragDrop.DoDragDrop%2A>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-225">It is the responsibility of your application to determine when a drag occurs, and then initiate the drag-and-drop operation by calling the <xref:System.Windows.DragDrop.DoDragDrop%2A> method.</span></span> <span data-ttu-id="f3aeb-226">Обычно это происходит, когда возникает событие <xref:System.Windows.UIElement.MouseMove> в перетаскиваемом элементе при нажатой клавише мыши.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-226">Typically, this is when a <xref:System.Windows.UIElement.MouseMove> event occurs over the element to be dragged while a mouse button is pressed.</span></span> <span data-ttu-id="f3aeb-227">В следующем примере показано, как инициировать операцию перетаскивания в обработчике событий <xref:System.Windows.UIElement.MouseMove> элемента <xref:System.Windows.Shapes.Ellipse>, чтобы сделать его источником перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-227">The following example shows how to initiate a drag-and-drop operation from the <xref:System.Windows.UIElement.MouseMove> event handler of an <xref:System.Windows.Shapes.Ellipse> element to make it a drag source.</span></span> <span data-ttu-id="f3aeb-228">Передаваемые данные — это строковое представление свойства <xref:System.Windows.Shapes.Shape.Fill%2A> эллипса.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-228">The transferred data is the string representation of the ellipse’s <xref:System.Windows.Shapes.Shape.Fill%2A> property.</span></span>  
  
 [!code-csharp[DragDropSnippets#DoDragDrop](~/samples/snippets/csharp/VS_Snippets_Wpf/dragdropsnippets/cs/mainwindow.xaml.cs#dodragdrop)]
 [!code-vb[DragDropSnippets#DoDragDrop](~/samples/snippets/visualbasic/VS_Snippets_Wpf/dragdropsnippets/vb/mainwindow.xaml.vb#dodragdrop)]  
  
 <span data-ttu-id="f3aeb-229">В обработчике событий <xref:System.Windows.UIElement.MouseMove> вызовите метод <xref:System.Windows.DragDrop.DoDragDrop%2A> для инициации операции перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-229">Inside of the <xref:System.Windows.UIElement.MouseMove> event handler, call the <xref:System.Windows.DragDrop.DoDragDrop%2A> method to initiate the drag-and-drop operation.</span></span> <span data-ttu-id="f3aeb-230">Метод <xref:System.Windows.DragDrop.DoDragDrop%2A> принимает три следующих параметра.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-230">The <xref:System.Windows.DragDrop.DoDragDrop%2A> method takes three parameters:</span></span>  
  
- <span data-ttu-id="f3aeb-231">`dragSource` — ссылка на объект зависимости, который является источником передаваемых данных; обычно это источник события <xref:System.Windows.UIElement.MouseMove>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-231">`dragSource` – A reference to the dependency object that is the source of the transferred data; this is typically the source of the <xref:System.Windows.UIElement.MouseMove> event.</span></span>  
  
- <span data-ttu-id="f3aeb-232">`data` — объект, содержащий передаваемые данные, заключенные в объект <xref:System.Windows.DataObject>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-232">`data` - An object that contains the transferred data, wrapped in a <xref:System.Windows.DataObject>.</span></span>  
  
- <span data-ttu-id="f3aeb-233">`allowedEffects` — одно из значений перечисления <xref:System.Windows.DragDropEffects>, которое определяет разрешенные эффекты операции перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-233">`allowedEffects` - One of the <xref:System.Windows.DragDropEffects> enumeration values that specifies the permitted effects of the drag-and-drop operation.</span></span>  
  
 <span data-ttu-id="f3aeb-234">В параметр `data` может быть передан любой сериализуемый объект.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-234">Any serializable object can be passed in the `data` parameter.</span></span> <span data-ttu-id="f3aeb-235">Если данные еще не заключены в объект <xref:System.Windows.DataObject>, они автоматически заключаются в новый объект <xref:System.Windows.DataObject>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-235">If the data is not already wrapped in a <xref:System.Windows.DataObject>, it will automatically be wrapped in a new <xref:System.Windows.DataObject>.</span></span> <span data-ttu-id="f3aeb-236">Для передачи нескольких элементов данных вы должны создать объект <xref:System.Windows.DataObject> самостоятельно и передать его в метод <xref:System.Windows.DragDrop.DoDragDrop%2A>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-236">To pass multiple data items, you must create the <xref:System.Windows.DataObject> yourself, and pass it to the <xref:System.Windows.DragDrop.DoDragDrop%2A> method.</span></span> <span data-ttu-id="f3aeb-237">Дополнительные сведения см. в разделе [Данные и объекты данных](data-and-data-objects.md).</span><span class="sxs-lookup"><span data-stu-id="f3aeb-237">For more information, see [Data and Data Objects](data-and-data-objects.md).</span></span>  
  
 <span data-ttu-id="f3aeb-238">Параметр `allowedEffects` используется для указания, какие действия с передаваемыми данными источник перетаскивания будет разрешать цели перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-238">The `allowedEffects` parameter is used to specify what the drag source will allow the drop target to do with the transferred data.</span></span> <span data-ttu-id="f3aeb-239">Обычные значения для источника перетаскивания — <xref:System.Windows.DragDropEffects.Copy>, <xref:System.Windows.DragDropEffects.Move> и <xref:System.Windows.DragDropEffects.All>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-239">The common values for a drag source are <xref:System.Windows.DragDropEffects.Copy>, <xref:System.Windows.DragDropEffects.Move>, and <xref:System.Windows.DragDropEffects.All>.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="f3aeb-240">Цель перетаскивания также может указывать ожидаемые эффекты перетаскивания данных.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-240">The drop target is also able to specify what effects it intends in response to the dropped data.</span></span> <span data-ttu-id="f3aeb-241">Например, если цель перетаскивания не распознает тип вставляемых данных, то она может отклонить эти данные, задав <xref:System.Windows.DragDropEffects.None> в качестве разрешенных эффектов.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-241">For example, if the drop target does not recognize the data type to be dropped, it can refuse the data by setting its allowed effects to <xref:System.Windows.DragDropEffects.None>.</span></span> <span data-ttu-id="f3aeb-242">Обычно она делает это в своем обработчике событий <xref:System.Windows.DragDrop.DragOver>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-242">It typically does this in its <xref:System.Windows.DragDrop.DragOver> event handler.</span></span>  
  
 <span data-ttu-id="f3aeb-243">Источник перетаскивания может также обрабатывать события <xref:System.Windows.DragDrop.GiveFeedback> и <xref:System.Windows.DragDrop.QueryContinueDrag>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-243">A drag source can optionally handle the <xref:System.Windows.DragDrop.GiveFeedback> and <xref:System.Windows.DragDrop.QueryContinueDrag> events.</span></span> <span data-ttu-id="f3aeb-244">Эти события имеют обработчики по умолчанию, которые используются, если события не помечены как обработанные.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-244">These events have default handlers that are used unless you mark the events as handled.</span></span> <span data-ttu-id="f3aeb-245">Обычно эти события игнорируются, если нет особой необходимости изменения их поведения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-245">You will typically ignore these events unless you have a specific need to change their default behavior.</span></span>  
  
 <span data-ttu-id="f3aeb-246">Событие <xref:System.Windows.DragDrop.GiveFeedback> возникает постоянно, пока выполняется перетаскивание источника перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-246">The <xref:System.Windows.DragDrop.GiveFeedback> event is raised continuously while the drag source is being dragged.</span></span> <span data-ttu-id="f3aeb-247">Обработчик по умолчанию для этого события проверяет, находится ли источник перетаскивания над допустимым конечным расположением сброса.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-247">The default handler for this event checks whether the drag source is over a valid drop target.</span></span> <span data-ttu-id="f3aeb-248">Если это так, то он проверяет разрешенные эффекты цели перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-248">If it is, it checks the allowed effects of the drop target.</span></span> <span data-ttu-id="f3aeb-249">Затем он предоставляет конечному пользователю отзыв относительно разрешенных эффектов перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-249">It then gives feedback to the end user regarding the allowed drop effects.</span></span> <span data-ttu-id="f3aeb-250">Обычно это выполняется путем изменения курсора мыши, чтобы указать запрет перетаскивания, копирование или перемещение.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-250">This is typically done by changing the mouse cursor to a no-drop, copy, or move cursor.</span></span> <span data-ttu-id="f3aeb-251">Это событие следует обрабатывать, только если необходимо использовать пользовательские курсоры для предоставления отзыва пользователю.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-251">You should only handle this event if you need to use custom cursors to provide feedback to the user.</span></span> <span data-ttu-id="f3aeb-252">Если вы обрабатываете это событие, не забудьте помечать его как обработанное, чтобы обработчик по умолчанию не переопределил ваш обработчик.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-252">If you handle this event, be sure to mark it as handled so that the default handler does not override your handler.</span></span>  
  
 <span data-ttu-id="f3aeb-253">Событие <xref:System.Windows.DragDrop.QueryContinueDrag> возникает постоянно, пока выполняется перетаскивание источника перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-253">The <xref:System.Windows.DragDrop.QueryContinueDrag> event is raised continuously while the drag source is being dragged.</span></span> <span data-ttu-id="f3aeb-254">Можно обработать это событие, чтобы определить, какое действие завершает операцию перетаскивания, на основе состояния клавиш ESC, SHIFT, CTRL и ALT, а также состояния кнопок мыши.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-254">You can handle this event to determine what action ends the drag-and-drop operation based on the state of the ESC, SHIFT, CTRL, and ALT keys, as well as the state of the mouse buttons.</span></span> <span data-ttu-id="f3aeb-255">Обработчик по умолчанию для этого события отменяет операцию перетаскивания при нажатии клавиши ESC и сбрасывает данные при отпускании кнопки мыши.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-255">The default handler for this event cancels the drag-and-drop operation if the ESC key is pressed, and drops the data if the mouse button is released.</span></span>  
  
> [!CAUTION]
> <span data-ttu-id="f3aeb-256">Эти события возникают постоянно во время операции перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-256">These events are raised continuously during the drag-and-drop operation.</span></span> <span data-ttu-id="f3aeb-257">Поэтому следует избегать ресурсоемких задач в обработчиках событий.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-257">Therefore, you should avoid resource-intensive tasks in the event handlers.</span></span>  <span data-ttu-id="f3aeb-258">Например, используйте кэшированный курсор вместо создания нового курсора при каждом возникновении события <xref:System.Windows.DragDrop.GiveFeedback>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-258">For example, use a cached cursor instead of creating a new cursor each time the <xref:System.Windows.DragDrop.GiveFeedback> event is raised.</span></span>  
  
### <a name="enabling-an-element-to-be-a-drop-target"></a><span data-ttu-id="f3aeb-259">Включение элемента в качестве цели перетаскивания</span><span class="sxs-lookup"><span data-stu-id="f3aeb-259">Enabling an Element to be a Drop Target</span></span>  
 <span data-ttu-id="f3aeb-260">Объект, являющийся целью перетаскивания, отвечает за:</span><span class="sxs-lookup"><span data-stu-id="f3aeb-260">An object that is a drop target is responsible for:</span></span>  
  
- <span data-ttu-id="f3aeb-261">указание, что он является допустимой целью перетаскивания;</span><span class="sxs-lookup"><span data-stu-id="f3aeb-261">Specifying that it is a valid drop target.</span></span>  
  
- <span data-ttu-id="f3aeb-262">реакцию на источник перетаскивания, когда он перетаскивается над целевым объектом;</span><span class="sxs-lookup"><span data-stu-id="f3aeb-262">Responding to the drag source when it drags over the target.</span></span>  
  
- <span data-ttu-id="f3aeb-263">проверку, что передаваемые данные находятся в формате, который он может получить;</span><span class="sxs-lookup"><span data-stu-id="f3aeb-263">Checking that the transferred data is in a format that it can receive.</span></span>  
  
- <span data-ttu-id="f3aeb-264">обработку вставляемых данных.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-264">Processing the dropped data.</span></span>  
  
 <span data-ttu-id="f3aeb-265">Чтобы указать, что элемент является целью перетаскивания, его свойство <xref:System.Windows.UIElement.AllowDrop%2A> устанавливается в значение `true`.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-265">To specify that an element is a drop target, you set its <xref:System.Windows.UIElement.AllowDrop%2A> property to `true`.</span></span> <span data-ttu-id="f3aeb-266">Затем в этом элементе будут возникать события цели перетаскивания, чтобы их можно было обработать.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-266">The drop target events will then be raised on the element so that you can handle them.</span></span> <span data-ttu-id="f3aeb-267">Во время операции перетаскивания в цели перетаскивания возникает следующая последовательность событий:</span><span class="sxs-lookup"><span data-stu-id="f3aeb-267">During a drag-and-drop operation, the following sequence of events occurs on the drop target:</span></span>  
  
1. <xref:System.Windows.DragDrop.DragEnter>  
  
2. <xref:System.Windows.DragDrop.DragOver>  
  
3. <span data-ttu-id="f3aeb-268"><xref:System.Windows.DragDrop.DragLeave> или <xref:System.Windows.DragDrop.Drop></span><span class="sxs-lookup"><span data-stu-id="f3aeb-268"><xref:System.Windows.DragDrop.DragLeave> or <xref:System.Windows.DragDrop.Drop></span></span>  
  
 <span data-ttu-id="f3aeb-269">Событие <xref:System.Windows.DragDrop.DragEnter> возникает, когда данные перетаскиваются в границы цели перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-269">The <xref:System.Windows.DragDrop.DragEnter> event occurs when the data is dragged into the drop target's boundary.</span></span> <span data-ttu-id="f3aeb-270">Обычно вы обрабатываете это событие, чтобы обеспечить предварительный просмотр эффектов операции перетаскивания, если это требуется для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-270">You typically handle this event to provide a preview of the effects of the drag-and-drop operation, if appropriate for your application.</span></span> <span data-ttu-id="f3aeb-271">Не устанавливайте свойство <xref:System.Windows.DragEventArgs.Effects%2A?displayProperty=nameWithType> в событии <xref:System.Windows.DragDrop.DragEnter>, так как оно будет переопределено в событии <xref:System.Windows.DragDrop.DragOver>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-271">Do not set the <xref:System.Windows.DragEventArgs.Effects%2A?displayProperty=nameWithType> property in the <xref:System.Windows.DragDrop.DragEnter> event, as it will be overwritten in the <xref:System.Windows.DragDrop.DragOver> event.</span></span>  
  
 <span data-ttu-id="f3aeb-272">В следующем примере показан обработчик событий <xref:System.Windows.DragDrop.DragEnter> для элемента <xref:System.Windows.Shapes.Ellipse>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-272">The following example shows the <xref:System.Windows.DragDrop.DragEnter> event handler for an <xref:System.Windows.Shapes.Ellipse> element.</span></span> <span data-ttu-id="f3aeb-273">Этот код выполняет предварительный просмотр эффектов операции перетаскивания путем сохранения текущей кисти <xref:System.Windows.Shapes.Shape.Fill%2A>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-273">This code previews the effects of the drag-and-drop operation by saving the current <xref:System.Windows.Shapes.Shape.Fill%2A> brush.</span></span> <span data-ttu-id="f3aeb-274">Затем он использует метод <xref:System.Windows.DataObject.GetDataPresent%2A> для проверки, содержит ли объект <xref:System.Windows.DataObject>, перетаскиваемый над эллипсом, строковые данные, которые можно преобразовать в <xref:System.Windows.Media.Brush>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-274">It then uses the <xref:System.Windows.DataObject.GetDataPresent%2A> method to check whether the <xref:System.Windows.DataObject> being dragged over the ellipse contains string data that can be converted to a <xref:System.Windows.Media.Brush>.</span></span> <span data-ttu-id="f3aeb-275">Если да, то данные извлекаются с помощью метода <xref:System.Windows.DataObject.GetData%2A></span><span class="sxs-lookup"><span data-stu-id="f3aeb-275">If so, the data is extracted using the <xref:System.Windows.DataObject.GetData%2A> method.</span></span> <span data-ttu-id="f3aeb-276">Затем они преобразуются в <xref:System.Windows.Media.Brush> и применяются к эллипсу.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-276">It is then converted to a <xref:System.Windows.Media.Brush> and applied to the ellipse.</span></span> <span data-ttu-id="f3aeb-277">Это изменение отменяется в обработчике событий <xref:System.Windows.DragDrop.DragLeave>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-277">The change is reverted in the <xref:System.Windows.DragDrop.DragLeave> event handler.</span></span> <span data-ttu-id="f3aeb-278">Если данные невозможно преобразовать в <xref:System.Windows.Media.Brush>, никакие действия не выполняются.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-278">If the data cannot be converted to a <xref:System.Windows.Media.Brush>, no action is performed.</span></span>  
  
 [!code-csharp[DragDropSnippets#DragEnter](~/samples/snippets/csharp/VS_Snippets_Wpf/dragdropsnippets/cs/mainwindow.xaml.cs#dragenter)]
 [!code-vb[DragDropSnippets#DragEnter](~/samples/snippets/visualbasic/VS_Snippets_Wpf/dragdropsnippets/vb/mainwindow.xaml.vb#dragenter)]  
  
 <span data-ttu-id="f3aeb-279">Событие <xref:System.Windows.DragDrop.DragOver> постоянно возникает при перетаскивании данных на цель перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-279">The <xref:System.Windows.DragDrop.DragOver> event occurs continuously while the data is dragged over the drop target.</span></span> <span data-ttu-id="f3aeb-280">Это событие является спаренным с событием <xref:System.Windows.DragDrop.GiveFeedback> в источнике перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-280">This event is paired with the <xref:System.Windows.DragDrop.GiveFeedback> event on the drag source.</span></span> <span data-ttu-id="f3aeb-281">В обработчике событий <xref:System.Windows.DragDrop.DragOver>, как правило, используются методы <xref:System.Windows.DataObject.GetDataPresent%2A> и <xref:System.Windows.DataObject.GetData%2A> для проверки, имеют ли передаваемые данные формат, который может обработать цель перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-281">In the <xref:System.Windows.DragDrop.DragOver> event handler, you typically use the <xref:System.Windows.DataObject.GetDataPresent%2A> and <xref:System.Windows.DataObject.GetData%2A> methods to check whether the transferred data is in a format that the drop target can process.</span></span> <span data-ttu-id="f3aeb-282">Можно также проверить, нажаты ли клавиши-модификаторы, которые обычно указывают, какую операцию предполагает выполнять пользователь — перемещения или копирования.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-282">You can also check whether any modifier keys are pressed, which will typically indicate whether the user intends a move or copy action.</span></span> <span data-ttu-id="f3aeb-283">После выполнения этих проверок вы устанавливаете свойство <xref:System.Windows.DragEventArgs.Effects%2A?displayProperty=nameWithType>, чтобы уведомить источник перетаскивания о том, какой эффект окажет сброс данных.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-283">After these checks are performed, you set the <xref:System.Windows.DragEventArgs.Effects%2A?displayProperty=nameWithType> property to notify the drag source what effect dropping the data will have.</span></span> <span data-ttu-id="f3aeb-284">Источник перетаскивания получает эти сведения в аргументах события <xref:System.Windows.DragDrop.GiveFeedback> и может задать соответствующий курсор, чтобы обеспечить отзыв для пользователя.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-284">The drag source receives this information in the <xref:System.Windows.DragDrop.GiveFeedback> event args, and can set an appropriate cursor to give feedback to the user.</span></span>  
  
 <span data-ttu-id="f3aeb-285">В следующем примере показан обработчик событий <xref:System.Windows.DragDrop.DragOver> для элемента <xref:System.Windows.Shapes.Ellipse>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-285">The following example shows the <xref:System.Windows.DragDrop.DragOver> event handler for an <xref:System.Windows.Shapes.Ellipse> element.</span></span> <span data-ttu-id="f3aeb-286">В этом коде проверяется, содержит ли объект <xref:System.Windows.DataObject>, перетаскиваемый над эллипсом, строковые данные, которые можно преобразовать в <xref:System.Windows.Media.Brush>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-286">This code checks to see if the <xref:System.Windows.DataObject> being dragged over the ellipse contains string data that can be converted to a <xref:System.Windows.Media.Brush>.</span></span> <span data-ttu-id="f3aeb-287">Если содержит, то код устанавливает для свойства <xref:System.Windows.DragEventArgs.Effects%2A?displayProperty=nameWithType> значение <xref:System.Windows.DragDropEffects.Copy>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-287">If so, it sets the <xref:System.Windows.DragEventArgs.Effects%2A?displayProperty=nameWithType> property to <xref:System.Windows.DragDropEffects.Copy>.</span></span> <span data-ttu-id="f3aeb-288">Это указывает источнику перетаскивания, что данные можно скопировать в эллипс.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-288">This indicates to the drag source that the data can be copied to the ellipse.</span></span> <span data-ttu-id="f3aeb-289">Если данные невозможно преобразовать в <xref:System.Windows.Media.Brush>, для свойства <xref:System.Windows.DragEventArgs.Effects%2A?displayProperty=nameWithType> устанавливается значение <xref:System.Windows.DragDropEffects.None>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-289">If the data cannot be converted to a <xref:System.Windows.Media.Brush>, the <xref:System.Windows.DragEventArgs.Effects%2A?displayProperty=nameWithType> property is set to <xref:System.Windows.DragDropEffects.None>.</span></span> <span data-ttu-id="f3aeb-290">Это указывает источнику перетаскивания, что эллипс не является допустимым конечным расположением сброса для данных.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-290">This indicates to the drag source that the ellipse is not a valid drop target for the data.</span></span>  
  
 [!code-csharp[DragDropSnippets#DragOver](~/samples/snippets/csharp/VS_Snippets_Wpf/dragdropsnippets/cs/mainwindow.xaml.cs#dragover)]
 [!code-vb[DragDropSnippets#DragOver](~/samples/snippets/visualbasic/VS_Snippets_Wpf/dragdropsnippets/vb/mainwindow.xaml.vb#dragover)]  
  
 <span data-ttu-id="f3aeb-291">Событие <xref:System.Windows.DragDrop.DragLeave> возникает, когда данные перетаскиваются за границу целевого объекта без сбрасывания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-291">The <xref:System.Windows.DragDrop.DragLeave> event occurs when the data is dragged out of the target's boundary without being dropped.</span></span> <span data-ttu-id="f3aeb-292">Обработка этого события позволяет отменить любые действия, которые были выполнены в обработчике событий <xref:System.Windows.DragDrop.DragEnter>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-292">You handle this event to undo anything that you did in the <xref:System.Windows.DragDrop.DragEnter> event handler.</span></span>  
  
 <span data-ttu-id="f3aeb-293">В следующем примере показан обработчик событий <xref:System.Windows.DragDrop.DragLeave> для элемента <xref:System.Windows.Shapes.Ellipse>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-293">The following example shows the <xref:System.Windows.DragDrop.DragLeave> event handler for an <xref:System.Windows.Shapes.Ellipse> element.</span></span> <span data-ttu-id="f3aeb-294">Этот код отменяет предварительный просмотр, выполненный в обработчике событий <xref:System.Windows.DragDrop.DragEnter>, путем применения сохраненного объекта <xref:System.Windows.Media.Brush> к эллипсу.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-294">This code undoes the preview performed in the <xref:System.Windows.DragDrop.DragEnter> event handler by applying the saved <xref:System.Windows.Media.Brush> to the ellipse.</span></span>  
  
 [!code-csharp[DragDropSnippets#DragLeave](~/samples/snippets/csharp/VS_Snippets_Wpf/dragdropsnippets/cs/mainwindow.xaml.cs#dragleave)]
 [!code-vb[DragDropSnippets#DragLeave](~/samples/snippets/visualbasic/VS_Snippets_Wpf/dragdropsnippets/vb/mainwindow.xaml.vb#dragleave)]  
  
 <span data-ttu-id="f3aeb-295">Событие <xref:System.Windows.DragDrop.Drop> возникает при сбросе данных в цель перетаскивания; по умолчанию это происходит при отпускании кнопки мыши.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-295">The <xref:System.Windows.DragDrop.Drop> event occurs when the data is dropped over the drop target; by default, this happens when the mouse button is released.</span></span> <span data-ttu-id="f3aeb-296">В обработчике событий <xref:System.Windows.DragDrop.Drop> вы используете метод <xref:System.Windows.DataObject.GetData%2A> для извлечения передаваемых данных из объекта <xref:System.Windows.DataObject> и выполнения обработки данных, необходимой для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-296">In the <xref:System.Windows.DragDrop.Drop> event handler, you use the <xref:System.Windows.DataObject.GetData%2A> method to extract the transferred data from the <xref:System.Windows.DataObject> and perform any data processing that your application requires.</span></span> <span data-ttu-id="f3aeb-297">Событие <xref:System.Windows.DragDrop.Drop> завершает операцию перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-297">The <xref:System.Windows.DragDrop.Drop> event ends the drag-and-drop operation.</span></span>  
  
 <span data-ttu-id="f3aeb-298">В следующем примере показан обработчик событий <xref:System.Windows.DragDrop.Drop> для элемента <xref:System.Windows.Shapes.Ellipse>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-298">The following example shows the <xref:System.Windows.DragDrop.Drop> event handler for an <xref:System.Windows.Shapes.Ellipse> element.</span></span> <span data-ttu-id="f3aeb-299">Этот код применяет эффекты операции перетаскивания. Он аналогичен коду в обработчике событий <xref:System.Windows.DragDrop.DragEnter>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-299">This code applies the effects of the drag-and-drop operation, and is similar to the code in the <xref:System.Windows.DragDrop.DragEnter> event handler.</span></span> <span data-ttu-id="f3aeb-300">Он проверяет, содержит ли объект <xref:System.Windows.DataObject>, перетаскиваемый над эллипсом, строковые данные, которые можно преобразовать в <xref:System.Windows.Media.Brush>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-300">It checks to see if the <xref:System.Windows.DataObject> being dragged over the ellipse contains string data that can be converted to a <xref:System.Windows.Media.Brush>.</span></span> <span data-ttu-id="f3aeb-301">Если это так, то к эллипсу применяется объект <xref:System.Windows.Media.Brush>.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-301">If so, the <xref:System.Windows.Media.Brush> is applied to the ellipse.</span></span> <span data-ttu-id="f3aeb-302">Если данные невозможно преобразовать в <xref:System.Windows.Media.Brush>, никакие действия не выполняются.</span><span class="sxs-lookup"><span data-stu-id="f3aeb-302">If the data cannot be converted to a <xref:System.Windows.Media.Brush>, no action is performed.</span></span>  
  
 [!code-csharp[DragDropSnippets#Drop](~/samples/snippets/csharp/VS_Snippets_Wpf/dragdropsnippets/cs/mainwindow.xaml.cs#drop)]
 [!code-vb[DragDropSnippets#Drop](~/samples/snippets/visualbasic/VS_Snippets_Wpf/dragdropsnippets/vb/mainwindow.xaml.vb#drop)]  
  
## <a name="see-also"></a><span data-ttu-id="f3aeb-303">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="f3aeb-303">See also</span></span>

- <xref:System.Windows.Clipboard>
- [<span data-ttu-id="f3aeb-304">Пошаговое руководство. Включение перетаскивания для пользовательского элемента управления</span><span class="sxs-lookup"><span data-stu-id="f3aeb-304">Walkthrough: Enabling Drag and Drop on a User Control</span></span>](walkthrough-enabling-drag-and-drop-on-a-user-control.md)
- [<span data-ttu-id="f3aeb-305">Практические руководства</span><span class="sxs-lookup"><span data-stu-id="f3aeb-305">How-to Topics</span></span>](drag-and-drop-how-to-topics.md)
- [<span data-ttu-id="f3aeb-306">Перетаскивание</span><span class="sxs-lookup"><span data-stu-id="f3aeb-306">Drag and Drop</span></span>](drag-and-drop.md)
