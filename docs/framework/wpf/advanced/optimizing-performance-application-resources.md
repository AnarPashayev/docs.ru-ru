---
title: 'Оптимизация производительности: ресурсы приложения'
ms.date: 03/30/2017
helpviewer_keywords:
- application resources [WPF], performance
- resources [WPF], performance
- static resources [WPF]
- sharing resources [WPF]
- brushes [WPF], performance
- sharing brushes without copying [WPF]
ms.assetid: 62b88488-c08e-4804-b7de-a1c34fbe929c
ms.openlocfilehash: 59b124c28ade0a6c5119b651ff935d460bf4516d
ms.sourcegitcommit: 944ddc52b7f2632f30c668815f92b378efd38eea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/03/2019
ms.locfileid: "73458558"
---
# <a name="optimizing-performance-application-resources"></a>Оптимизация производительности: ресурсы приложения
[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] позволяет предоставлять общий доступ к ресурсам приложения, позволяя поддерживать согласованный внешний вид или поведение по аналогичным элементам. В этом разделе представлено несколько рекомендаций в этой области, которые могут помочь повысить производительность приложений.  
  
 Дополнительные сведения о ресурсах см. в разделе [Ресурсы XAML](../../../desktop-wpf/fundamentals/xaml-resources-define.md).  
  
## <a name="sharing-resources"></a>Совместное использование ресурсов  
 Если приложение использует пользовательские элементы управления и определяет ресурсы в <xref:System.Windows.ResourceDictionary> (или узле ресурсов XAML), рекомендуется определить ресурсы на уровне объекта <xref:System.Windows.Application> или <xref:System.Windows.Window> или определить их в теме по умолчанию для пользовательских элементов управления. Определение ресурсов в <xref:System.Windows.ResourceDictionary>е пользовательского элемента управления накладывает влияние на производительность каждого экземпляра этого элемента управления. Например, при наличии операций кисти, интенсивно использующих производительность, определенных как часть определения ресурса пользовательского элемента управления и многих экземпляров пользовательского элемента управления, Рабочий набор приложения будет значительно увеличиваться.  
  
 Чтобы проиллюстрировать этот момент, рассмотрим следующее. Предположим, что вы разрабатываете карточную игру с помощью [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]. Для большинства карточных игр требуется 52 карт с 52 разными лицами. Вы решили реализовать пользовательский элемент управления карты и задаете в ресурсах настраиваемого элемента управления карты 52 кисть (каждый из которых представляет грань карты). В основном приложении первоначально создаются 52 экземпляров этого пользовательского элемента управления карточками. Каждый экземпляр пользовательского элемента управления карточками создает 52 экземпляров <xref:System.Windows.Media.Brush> объектов, что позволяет получить в приложении всего 52 * 52 <xref:System.Windows.Media.Brush> объектов. Перемещая кисти из ресурсов пользовательских элементов управления на уровень <xref:System.Windows.Application> или <xref:System.Windows.Window> объектов или определяя их в теме по умолчанию для пользовательского элемента управления, вы сокращаете рабочий набор приложения, так как теперь вы совместно используете кисти 52 между 52. экземпляры элемента управления карточками.  
  
## <a name="sharing-a-brush-without-copying"></a>Совместное использование кисти без копирования  
 При наличии нескольких элементов, использующих один и тот же объект <xref:System.Windows.Media.Brush>, определите кисть как ресурс и сослаться на него, вместо того чтобы определять встроенную кисть в XAML. Этот метод создает один экземпляр и повторно использует его, тогда как при определении встроенных кистей в XAML создается новый экземпляр для каждого элемента.  
  
 Этот момент показан в следующем примере разметки:  
  
 [!code-xaml[Performance#PerformanceSnippet7](~/samples/snippets/csharp/VS_Snippets_Wpf/Performance/CSharp/BrushResource.xaml#performancesnippet7)]  
  
## <a name="use-static-resources-when-possible"></a>По возможности используйте статические ресурсы  
 Статический ресурс предоставляет значение для любого атрибута свойства XAML путем поиска ссылки на уже определенный ресурс. Поведение поиска для этого ресурса аналогично поиску во время компиляции.  
  
 Динамический ресурс, с другой стороны, создаст временное выражение во время начальной компиляции и откладывает Поиск ресурсов до тех пор, пока запрошенное значение ресурса не будет действительно необходимо для создания объекта. Поведение поиска для этого ресурса аналогично поиску во время выполнения, что накладывает влияние на производительность. Используйте статические ресурсы, когда это возможно в приложении, используя динамические ресурсы только при необходимости.  
  
 В следующем примере разметки показано использование обоих типов ресурсов:  
  
 [!code-xaml[Performance#PerformanceSnippet8](~/samples/snippets/csharp/VS_Snippets_Wpf/Performance/CSharp/DynamicResource.xaml#performancesnippet8)]  
  
## <a name="see-also"></a>См. также

- [Улучшение производительности приложений WPF](optimizing-wpf-application-performance.md)
- [Планирование производительности приложения](planning-for-application-performance.md)
- [Использование преимуществ оборудования](optimizing-performance-taking-advantage-of-hardware.md)
- [Разметка и разработка](optimizing-performance-layout-and-design.md)
- [Двумерная графика и изображения](optimizing-performance-2d-graphics-and-imaging.md)
- [Поведение объекта](optimizing-performance-object-behavior.md)
- [Текст](optimizing-performance-text.md)
- [Привязка данных](optimizing-performance-data-binding.md)
- [Дополнительные рекомендации по повышению производительности](optimizing-performance-other-recommendations.md)
