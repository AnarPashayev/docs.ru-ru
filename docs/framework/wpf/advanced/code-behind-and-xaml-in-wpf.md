---
title: Код-позади и XAML
ms.date: 03/30/2017
helpviewer_keywords:
- XAML [WPF], code-behind
- code-behind files [WPF], XAML
ms.assetid: 9df6d3c9-aed3-471c-af36-6859b19d999f
ms.openlocfilehash: 32283d5b81bf92999a97711ded13a8b533ae3028
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2020
ms.locfileid: "79145349"
---
# <a name="code-behind-and-xaml-in-wpf"></a><span data-ttu-id="22ae1-102">Код программной части и XAML в WPF</span><span class="sxs-lookup"><span data-stu-id="22ae1-102">Code-Behind and XAML in WPF</span></span>
<a name="introduction"></a><span data-ttu-id="22ae1-103">Code-behind — это термин, используемый для описания кода, который [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] соединен с объектами, определяемыми разметкой, когда страница компилируется разметкой.</span><span class="sxs-lookup"><span data-stu-id="22ae1-103">Code-behind is a term used to describe the code that is joined with markup-defined objects, when a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] page is markup-compiled.</span></span> <span data-ttu-id="22ae1-104">Эта тема описывает требования к код-за, а также альтернативный механизм внестроки кода для кода в [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="22ae1-104">This topic describes requirements for code-behind as well as an alternative inline code mechanism for code in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span>  
  
 <span data-ttu-id="22ae1-105">Этот раздел состоит из следующих подразделов.</span><span class="sxs-lookup"><span data-stu-id="22ae1-105">This topic contains the following sections:</span></span>  
  
- [<span data-ttu-id="22ae1-106">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="22ae1-106">Prerequisites</span></span>](#Prerequisites)  
  
- [<span data-ttu-id="22ae1-107">Код-позади и язык XAML</span><span class="sxs-lookup"><span data-stu-id="22ae1-107">Code-Behind and the XAML Language</span></span>](#codebehind_and_the_xaml_language)  
  
- [<span data-ttu-id="22ae1-108">Требования к код-закутанию, обработчику событий и частичному классу в WPF</span><span class="sxs-lookup"><span data-stu-id="22ae1-108">Code-behind, Event Handler, and Partial Class Requirements in WPF</span></span>](#Code_behind__Event_Handler__and_Partial_Class)  
  
- [<span data-ttu-id="22ae1-109">x:Код</span><span class="sxs-lookup"><span data-stu-id="22ae1-109">x:Code</span></span>](#x_Code)  
  
- [<span data-ttu-id="22ae1-110">Ограничения в коде inline</span><span class="sxs-lookup"><span data-stu-id="22ae1-110">Inline Code Limitations</span></span>](#Inline_Code_Limitations)  
  
<a name="Prerequisites"></a>
## <a name="prerequisites"></a><span data-ttu-id="22ae1-111">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="22ae1-111">Prerequisites</span></span>  
 <span data-ttu-id="22ae1-112">Эта тема предполагает, что вы прочитали [обзор XAML (WPF)](../../../desktop-wpf/fundamentals/xaml.md) и имеете некоторые базовые знания clR и объектно-ориентированного программирования.</span><span class="sxs-lookup"><span data-stu-id="22ae1-112">This topic assumes that you have read the [XAML Overview (WPF)](../../../desktop-wpf/fundamentals/xaml.md) and have some basic knowledge of the CLR and object-oriented programming.</span></span>  
  
<a name="codebehind_and_the_xaml_language"></a>
## <a name="code-behind-and-the-xaml-language"></a><span data-ttu-id="22ae1-113">Код-позади и язык XAML</span><span class="sxs-lookup"><span data-stu-id="22ae1-113">Code-Behind and the XAML Language</span></span>  
 <span data-ttu-id="22ae1-114">Язык XAML включает функции языкового уровня, которые позволяют связать файлы кода с файлами разметки со стороны файла разметки.</span><span class="sxs-lookup"><span data-stu-id="22ae1-114">The XAML language includes language-level features that make it possible to associate code files with markup files, from the markup file side.</span></span> <span data-ttu-id="22ae1-115">В частности, язык XAML определяет языковые функции [x:Class Directive,](../../../desktop-wpf/xaml-services/xclass-directive.md) [x:Subclass Directive](../../../desktop-wpf/xaml-services/xsubclass-directive.md)и [x:ClassModifier Directive.](../../../desktop-wpf/xaml-services/xclassmodifier-directive.md)</span><span class="sxs-lookup"><span data-stu-id="22ae1-115">Specifically, the XAML language defines the language features [x:Class Directive](../../../desktop-wpf/xaml-services/xclass-directive.md), [x:Subclass Directive](../../../desktop-wpf/xaml-services/xsubclass-directive.md), and [x:ClassModifier Directive](../../../desktop-wpf/xaml-services/xclassmodifier-directive.md).</span></span> <span data-ttu-id="22ae1-116">То, как именно должен быть подготовлен код и как интегрировать разметку и код, не является частью того, что указывает язык XAML.</span><span class="sxs-lookup"><span data-stu-id="22ae1-116">Exactly how the code should be produced, and how to integrate markup and code, is not part of what the XAML language specifies.</span></span> <span data-ttu-id="22ae1-117">Это остается до таких рамок, как WPF, чтобы определить, как интегрировать код, как использовать XAML в приложениях и программировании моделей, а также действия сборки или другую поддержку, что все это требует.</span><span class="sxs-lookup"><span data-stu-id="22ae1-117">It is left up to frameworks such as WPF to determine how to integrate the code, how to use XAML in the application and programming models, and the build actions or other support that all this requires.</span></span>  
  
<a name="Code_behind__Event_Handler__and_Partial_Class"></a>
## <a name="code-behind-event-handler-and-partial-class-requirements-in-wpf"></a><span data-ttu-id="22ae1-118">Требования к код-закутанию, обработчику событий и частичному классу в WPF</span><span class="sxs-lookup"><span data-stu-id="22ae1-118">Code-behind, Event Handler, and Partial Class Requirements in WPF</span></span>  
  
- <span data-ttu-id="22ae1-119">Частичный класс должен происходить от типа, который поддерживает корневой элемент.</span><span class="sxs-lookup"><span data-stu-id="22ae1-119">The partial class must derive from the type that backs the root element.</span></span>  
  
- <span data-ttu-id="22ae1-120">Обратите внимание, что при поведении по умолчанию составных действий сборки разметки можно оставить производнете пустым в частичном определении класса на стороне кода.</span><span class="sxs-lookup"><span data-stu-id="22ae1-120">Note that under the default behavior of the markup compile build actions, you can leave the derivation blank in the partial class definition on the code-behind side.</span></span> <span data-ttu-id="22ae1-121">Компилированный результат будет считать, что тип поддержки корней страницы будет основой для частичного класса, даже если он не указан.</span><span class="sxs-lookup"><span data-stu-id="22ae1-121">The compiled result will assume the page root's backing type to be the basis for the partial class, even if it not specified.</span></span> <span data-ttu-id="22ae1-122">Однако, опираясь на такое поведение не является лучшей практикой.</span><span class="sxs-lookup"><span data-stu-id="22ae1-122">However, relying on this behavior is not a best practice.</span></span>  
  
- <span data-ttu-id="22ae1-123">Обработчики событий, которые вы записываете в коде, должны быть методами экземпляра и не могут быть статичными методами.</span><span class="sxs-lookup"><span data-stu-id="22ae1-123">The event handlers you write in the code-behind must be instance methods and cannot be static methods.</span></span> <span data-ttu-id="22ae1-124">Эти методы должны быть определены частичным классом `x:Class`в пространстве имен CLR, идентифицированным .</span><span class="sxs-lookup"><span data-stu-id="22ae1-124">These methods must be defined by the partial class within the CLR namespace identified by `x:Class`.</span></span> <span data-ttu-id="22ae1-125">Вы не можете квалифицировать имя обработчика событий, чтобы поручить [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] обработчику для поиска обработчика событий для проводки событий в другой области класса.</span><span class="sxs-lookup"><span data-stu-id="22ae1-125">You cannot qualify the name of an event handler to instruct a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor to look for an event handler for event wiring in a different class scope.</span></span>  
  
- <span data-ttu-id="22ae1-126">Обработчик должен соответствовать делегату для соответствующего события в системе резервного типа.</span><span class="sxs-lookup"><span data-stu-id="22ae1-126">The handler must match the delegate for the appropriate event in the backing type system.</span></span>  
  
- <span data-ttu-id="22ae1-127">Специально для базового языка Microsoft Visual Можно `Handles` использовать ключевое слово для обработчиков с случаями и событиями в [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]декларации обработчика, вместо того, чтобы прикреплять обработчики с атрибутами в .</span><span class="sxs-lookup"><span data-stu-id="22ae1-127">For the Microsoft Visual Basic language specifically, you can use the language-specific `Handles` keyword to associate handlers with instances and events in the handler declaration, instead of attaching handlers with attributes in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span> <span data-ttu-id="22ae1-128">Однако этот метод имеет некоторые `Handles` ограничения, поскольку ключевое слово [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] не может поддерживать все специфические функции системы событий, такие как определенные маршрутизированные сценарии событий или прилагаемые события.</span><span class="sxs-lookup"><span data-stu-id="22ae1-128">However, this technique does have some limitations because the `Handles` keyword cannot support all of the specific features of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] event system, such as certain routed event scenarios or attached events.</span></span> <span data-ttu-id="22ae1-129">Для получения подробной информации [см.](visual-basic-and-wpf-event-handling.md)</span><span class="sxs-lookup"><span data-stu-id="22ae1-129">For details, see [Visual Basic and WPF Event Handling](visual-basic-and-wpf-event-handling.md).</span></span>  
  
<a name="x_Code"></a>
## <a name="xcode"></a><span data-ttu-id="22ae1-130">x:Код</span><span class="sxs-lookup"><span data-stu-id="22ae1-130">x:Code</span></span>  
 <span data-ttu-id="22ae1-131">[x:Код](../../../desktop-wpf/xaml-services/xcode-intrinsic-xaml-type.md) является директивным [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]элементом, определенным в .</span><span class="sxs-lookup"><span data-stu-id="22ae1-131">[x:Code](../../../desktop-wpf/xaml-services/xcode-intrinsic-xaml-type.md) is a directive element defined in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span> <span data-ttu-id="22ae1-132">Элемент `x:Code` директивы может содержать код внее программирования.</span><span class="sxs-lookup"><span data-stu-id="22ae1-132">An `x:Code` directive element can contain inline programming code.</span></span> <span data-ttu-id="22ae1-133">Код, который определен в строке, может взаимодействовать с [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] на одной и той же странице.</span><span class="sxs-lookup"><span data-stu-id="22ae1-133">The code that is defined inline can interact with the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] on the same page.</span></span> <span data-ttu-id="22ae1-134">Ниже приводится пример, иллюстрирующий вонючий код C-кода.</span><span class="sxs-lookup"><span data-stu-id="22ae1-134">The following example illustrates inline C# code.</span></span> <span data-ttu-id="22ae1-135">Обратите внимание, что `x:Code` код находится внутри элемента и `<CDATA[`что код должен быть окружен ... `]]>` чтобы избежать содержимого для XML, так что [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] процессор (интерпретация [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] либо схемы или схемы) не будет пытаться интерпретировать содержимое буквально как XML.</span><span class="sxs-lookup"><span data-stu-id="22ae1-135">Notice that the code is inside the `x:Code` element and that the code must be surrounded by `<CDATA[`...`]]>` to escape the contents for XML, so that a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor (interpreting either the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] schema or the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] schema) will not try to interpret the contents literally as XML.</span></span>  
  
 [!code-xaml[XAMLOvwSupport#ButtonWithInlineCode](~/samples/snippets/csharp/VS_Snippets_Wpf/XAMLOvwSupport/CSharp/page4.xaml#buttonwithinlinecode)]  
  
<a name="Inline_Code_Limitations"></a>
## <a name="inline-code-limitations"></a><span data-ttu-id="22ae1-136">Ограничения в коде inline</span><span class="sxs-lookup"><span data-stu-id="22ae1-136">Inline Code Limitations</span></span>  
 <span data-ttu-id="22ae1-137">Следует обдумать возможность избежать или ограничить использование вненужного кода.</span><span class="sxs-lookup"><span data-stu-id="22ae1-137">You should consider avoiding or limiting the use of inline code.</span></span> <span data-ttu-id="22ae1-138">С точки зрения архитектуры и философии кодирования, поддержание разделения между разметкой и код-за держит дизайнера и разработчика ролей гораздо более четко.</span><span class="sxs-lookup"><span data-stu-id="22ae1-138">In terms of architecture and coding philosophy, maintaining a separation between markup and code-behind keeps the designer and developer roles much more distinct.</span></span> <span data-ttu-id="22ae1-139">На более техническом уровне код, который вы пишете для вонюнного кода, [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] может быть неудобно писать, потому что вы всегда пишете в сгенерированный частичный класс и можете использовать только отображение пространства имен по умолчанию XML.</span><span class="sxs-lookup"><span data-stu-id="22ae1-139">On a more technical level, the code that you write for inline code can be awkward to write, because you are always writing into the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] generated partial class, and can only use the default XML namespace mappings.</span></span> <span data-ttu-id="22ae1-140">Поскольку вы `using` не можете добавлять операторы, необходимо полностью квалифицировать многие вызовы API, которые вы делаете.</span><span class="sxs-lookup"><span data-stu-id="22ae1-140">Because you cannot add `using` statements, you must fully qualify many of the API calls that you make.</span></span> <span data-ttu-id="22ae1-141">Отображение по умолчанию [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] включает большинство, но не [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] все пространства имен CLR, которые присутствуют в сборках; вам придется полностью квалифицировать вызовы к типам и членам, содержащимся в других областях имен CLR.</span><span class="sxs-lookup"><span data-stu-id="22ae1-141">The default [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] mappings include most but not all CLR namespaces that are present in the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] assemblies; you will have to fully qualify calls to types and members contained within the other CLR namespaces.</span></span> <span data-ttu-id="22ae1-142">Вы также не можете определить что-либо, кроме частичного класса в вонном коде, и все сущности кода пользователя, на которые вы ссылаетесь, должны существовать как член или переменная в сгенерированном частичном классе.</span><span class="sxs-lookup"><span data-stu-id="22ae1-142">You also cannot define anything beyond the partial class in the inline code, and all user code entities you reference must exist as a member or variable within the generated partial class.</span></span> <span data-ttu-id="22ae1-143">Другие специфические языковые `#ifdef` функции программирования, такие как макросы или против глобальных переменных или переменные сборки, также недоступны.</span><span class="sxs-lookup"><span data-stu-id="22ae1-143">Other language specific programming features, such as macros or `#ifdef` against global variables or build variables, are also not available.</span></span> <span data-ttu-id="22ae1-144">Для получения дополнительной [информации см.](../../../desktop-wpf/xaml-services/xcode-intrinsic-xaml-type.md)</span><span class="sxs-lookup"><span data-stu-id="22ae1-144">For more information, see [x:Code Intrinsic XAML Type](../../../desktop-wpf/xaml-services/xcode-intrinsic-xaml-type.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="22ae1-145">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="22ae1-145">See also</span></span>

- [<span data-ttu-id="22ae1-146">Обзор XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="22ae1-146">XAML Overview (WPF)</span></span>](../../../desktop-wpf/fundamentals/xaml.md)
- [<span data-ttu-id="22ae1-147">Встроенный тип XAML x:Code</span><span class="sxs-lookup"><span data-stu-id="22ae1-147">x:Code Intrinsic XAML Type</span></span>](../../../desktop-wpf/xaml-services/xcode-intrinsic-xaml-type.md)
- [<span data-ttu-id="22ae1-148">Построение приложения WPF</span><span class="sxs-lookup"><span data-stu-id="22ae1-148">Building a WPF Application</span></span>](../app-development/building-a-wpf-application-wpf.md)
- [<span data-ttu-id="22ae1-149">Подробное описание синтаксиса XAML</span><span class="sxs-lookup"><span data-stu-id="22ae1-149">XAML Syntax In Detail</span></span>](xaml-syntax-in-detail.md)
