---
title: Код программной части и XAML в WPF
ms.date: 03/30/2017
helpviewer_keywords:
- XAML [WPF], code-behind
- code-behind files [WPF], XAML
ms.assetid: 9df6d3c9-aed3-471c-af36-6859b19d999f
ms.openlocfilehash: 2e975745c2124ab2834eb82ed9b94563b44642b1
ms.sourcegitcommit: 944ddc52b7f2632f30c668815f92b378efd38eea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/03/2019
ms.locfileid: "73453683"
---
# <a name="code-behind-and-xaml-in-wpf"></a>Код программной части и XAML в WPF
<a name="introduction"></a>Код программной части — это термин, используемый для описания кода, который объединяется с объектами, определенными разметкой, при компиляции разметки [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]ной страницы. В этом разделе описываются требования к коду программной части, а также альтернативный механизм встроенного кода для кода в [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].  
  
 В этом разделе содержатся следующие подразделы.  
  
- [Необходимые компоненты](#Prerequisites)  
  
- [Код программной части и язык XAML](#codebehind_and_the_xaml_language)  
  
- [Код программной части, обработчик событий и требования к разделяемому классу в WPF](#Code_behind__Event_Handler__and_Partial_Class)  
  
- [x:Code](#x_Code)  
  
- [Ограничения встроенного кода](#Inline_Code_Limitations)  
  
<a name="Prerequisites"></a>   
## <a name="prerequisites"></a>Необходимые компоненты  
 В этом разделе предполагается, что вы прочитали [Общие сведения о XAML (WPF)](../../../desktop-wpf/fundamentals/xaml.md) и имеете некоторые базовые знания о среде CLR и объектно-ориентированном программировании.  
  
<a name="codebehind_and_the_xaml_language"></a>   
## <a name="code-behind-and-the-xaml-language"></a>Код программной части и язык XAML  
 Язык XAML включает функции уровня языка, позволяющие связывать файлы кода с файлами разметки с стороны файла разметки. В частности, язык XAML определяет [директиву](../../xaml-services/x-class-directive.md)Language Features X:Class, [директиву x:Subclass](../../xaml-services/x-subclass-directive.md)и [директиву КС:классмодифиер](../../xaml-services/x-classmodifier-directive.md). Точно то, как должен быть создан код и как интегрировать разметку и код, не является частью того, что указывает язык XAML. Она остается в таких платформах, как WPF, для определения способа интеграции кода, использования XAML в моделях приложения и программирования, а также действий сборки или другой поддержки, которые требуются для всех этих платформ.  
  
<a name="Code_behind__Event_Handler__and_Partial_Class"></a>   
## <a name="code-behind-event-handler-and-partial-class-requirements-in-wpf"></a>Код программной части, обработчик событий и требования к разделяемому классу в WPF  
  
- Разделяемый класс должен быть производным от типа, который является резервным для корневого элемента.  
  
- Обратите внимание на то, что при поведении действия сборки компиляции разметки по умолчанию можно оставить пустое производные в определении разделяемого класса на стороне кода программной части. Скомпилированный результат предполагает, что резервный тип корня страницы будет базисом для разделяемого класса, даже если он не указан. Однако использовать такое поведение не рекомендуется.  
  
- Обработчики событий, которые вы пишете в коде программной части, должны быть методами экземпляра и не могут быть статическими методами. Эти методы должны определяться разделяемым классом в пространстве имен CLR, идентифицируемом `x:Class`. Нельзя уточнить имя обработчика событий, чтобы указать обработчику [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]а, что следует определить, должен поискить дескриптор события для привязки событий в другой области класса.  
  
- Обработчик должен соответствовать делегату для соответствующего события в системе резервных типов.  
  
- В частности, для языка Microsoft Visual Basic можно использовать ключевое слово `Handles` для конкретного языка, чтобы связать обработчики с экземплярами и событиями в объявлении обработчика вместо того, чтобы присоединять обработчики с атрибутами в [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]. Однако этот метод имеет некоторые ограничения, поскольку ключевое слово `Handles` не поддерживает все функции [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] системы событий, например определенные сценарии перенаправленных событий или вложенные события. Дополнительные сведения см. в разделе [Visual Basic и обработка событий WPF](visual-basic-and-wpf-event-handling.md).  
  
<a name="x_Code"></a>   
## <a name="xcode"></a>x:Code  
 [x:Code](../../xaml-services/x-code-intrinsic-xaml-type.md) — это элемент директивы, определенный в [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]. Элемент директивы `x:Code` может содержать встроенный код программирования. Код, определенный встроенным, может взаимодействовать с [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] на той же странице. В следующем примере показан встроенный C# код. Обратите внимание, что код находится внутри элемента `x:Code` и что код должен быть заключен в `<CDATA[`...`]]>` для экранирования содержимого для [!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)], чтобы процессор [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] (интерпретируемый как [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] схему, так и [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] схему) не будет Попробуйте интерпретировать содержимое буквально как [!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)].  
  
 [!code-xaml[XAMLOvwSupport#ButtonWithInlineCode](~/samples/snippets/csharp/VS_Snippets_Wpf/XAMLOvwSupport/CSharp/page4.xaml#buttonwithinlinecode)]  
  
<a name="Inline_Code_Limitations"></a>   
## <a name="inline-code-limitations"></a>Ограничения встроенного кода  
 Рекомендуется избегать или ограничивать использование встроенного кода. С точки зрения архитектуры и философии программирования, обеспечение разделения между разметкой и кодом программной части обеспечивает гораздо более отличающиеся роли конструктора и разработчика. На более техническом уровне код, написанный для встроенного кода, может быть неудобным для записи, так как вы всегда пишете в [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] созданном разделяемом классе и можете использовать только сопоставления пространства имен XML по умолчанию. Так как вы не можете добавлять `using` операторы, необходимо полностью определить множество вызовов API. Сопоставления [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] по умолчанию включают большинство, но не все пространства имен CLR, которые имеются в сборках [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]. Вам придется полностью квалифицировать вызовы типов и членов, содержащихся в других пространствах имен CLR. Кроме того, нельзя определить что-либо за пределами разделяемого класса во встроенном коде, и все сущности кода пользователя, на которые вы ссылаетесь, должны существовать в виде члена или переменной в созданном разделяемом классе. Другие функции программирования, такие как макросы или `#ifdef` с глобальными переменными или переменные сборки, также недоступны. Дополнительные сведения см. в разделе Тип данных, [встроенный в x:Code](../../xaml-services/x-code-intrinsic-xaml-type.md).  
  
## <a name="see-also"></a>См. также

- [Общие сведения о языке XAML (WPF)](../../../desktop-wpf/fundamentals/xaml.md)
- [Встроенный тип XAML x:Code](../../xaml-services/x-code-intrinsic-xaml-type.md)
- [Построение приложения WPF](../app-development/building-a-wpf-application-wpf.md)
- [Подробное описание синтаксиса XAML](xaml-syntax-in-detail.md)
