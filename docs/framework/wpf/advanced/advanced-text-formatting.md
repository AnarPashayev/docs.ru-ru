---
title: Дополнительное форматирование текста
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- formatting [WPF]
- text [WPF]
- typography [WPF], text formatting
ms.assetid: f0a7986e-f5b2-485c-a27d-f8e922022212
ms.openlocfilehash: fa707ed9c409a2e6933629a658bfe650b43f3233
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2019
ms.locfileid: "59085731"
---
# <a name="advanced-text-formatting"></a><span data-ttu-id="b68ae-102">Дополнительное форматирование текста</span><span class="sxs-lookup"><span data-stu-id="b68ae-102">Advanced Text Formatting</span></span>
<span data-ttu-id="b68ae-103">Windows Presentation Foundation (WPF) предоставляет набор надежных [!INCLUDE[TLA#tla_api#plural](../../../../includes/tlasharptla-apisharpplural-md.md)] для включения текста в приложении.</span><span class="sxs-lookup"><span data-stu-id="b68ae-103">The Windows Presentation Foundation (WPF) provides a robust set of [!INCLUDE[TLA#tla_api#plural](../../../../includes/tlasharptla-apisharpplural-md.md)] for including text in your application.</span></span> <span data-ttu-id="b68ae-104">Макет и [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], такие как <xref:System.Windows.Controls.TextBlock>, обеспечивают наиболее распространенные и общие использовать элементы для представления текста.</span><span class="sxs-lookup"><span data-stu-id="b68ae-104">Layout and [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)][!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], such as <xref:System.Windows.Controls.TextBlock>, provide the most common and general use elements for text presentation.</span></span> <span data-ttu-id="b68ae-105">Рисование [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], такие как <xref:System.Windows.Media.GlyphRunDrawing> и <xref:System.Windows.Media.FormattedText>, предоставляют средства для включения форматированного текста в рисунки.</span><span class="sxs-lookup"><span data-stu-id="b68ae-105">Drawing [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], such as <xref:System.Windows.Media.GlyphRunDrawing> and <xref:System.Windows.Media.FormattedText>, provide a means for including formatted text in drawings.</span></span> <span data-ttu-id="b68ae-106">На наиболее продвинутом уровне [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] предоставляет расширяемый механизм форматирования текста для управления каждым аспектом представления текста: управление хранением текста, исполнением форматирования текста и внедренными объектами.</span><span class="sxs-lookup"><span data-stu-id="b68ae-106">At the most advanced level, [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] provides an extensible text formatting engine to control every aspect of text presentation, such as text store management, text run formatting management, and embedded object management.</span></span>  
  
 <span data-ttu-id="b68ae-107">В этом разделе содержатся вводные [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] форматирование текста.</span><span class="sxs-lookup"><span data-stu-id="b68ae-107">This topic provides an introduction to [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] text formatting.</span></span> <span data-ttu-id="b68ae-108">Этот раздел посвящен реализации клиента и использовании [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] механизм форматирования текста.</span><span class="sxs-lookup"><span data-stu-id="b68ae-108">It focuses on client implementation and use of the [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] text formatting engine.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b68ae-109">Все примеры кода в этом документе можно найти в [пример расширенного форматирования текста](https://go.microsoft.com/fwlink/?LinkID=159965).</span><span class="sxs-lookup"><span data-stu-id="b68ae-109">All code examples within this document can be found in the [Advanced Text Formatting Sample](https://go.microsoft.com/fwlink/?LinkID=159965).</span></span>  

<a name="prereq"></a>   
## <a name="prerequisites"></a><span data-ttu-id="b68ae-110">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="b68ae-110">Prerequisites</span></span>  
 <span data-ttu-id="b68ae-111">В этом разделе предполагается, что вы знакомы с высоким уровнем [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] используемыми для представления текста.</span><span class="sxs-lookup"><span data-stu-id="b68ae-111">This topic assumes that you are familiar with the higher level [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] used for text presentation.</span></span> <span data-ttu-id="b68ae-112">Большинство сценариев не требует расширенного форматирования текста [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] описанных в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="b68ae-112">Most user scenarios will not require the advanced text formatting [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] discussed in this topic.</span></span> <span data-ttu-id="b68ae-113">Введение в другой текстовой [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], см. в разделе [документы в WPF](documents-in-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="b68ae-113">For an introduction to the different text [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], see [Documents in WPF](documents-in-wpf.md).</span></span>  
  
<a name="section1"></a>   
## <a name="advanced-text-formatting"></a><span data-ttu-id="b68ae-114">Дополнительное форматирование текста</span><span class="sxs-lookup"><span data-stu-id="b68ae-114">Advanced Text Formatting</span></span>  
 <span data-ttu-id="b68ae-115">Макет текста и [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] элементов управления в [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] предоставляют свойства форматирования, которые дают возможность легко включать в приложение форматированный текст.</span><span class="sxs-lookup"><span data-stu-id="b68ae-115">The text layout and [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] controls in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] provide formatting properties that allow you to easily include formatted text in your application.</span></span> <span data-ttu-id="b68ae-116">Эти элементы управления предоставляют ряд свойств для обработки представления текста, включая гарнитуру, размер и цвет.</span><span class="sxs-lookup"><span data-stu-id="b68ae-116">These controls expose a number of properties to handle the presentation of text, which includes its typeface, size, and color.</span></span> <span data-ttu-id="b68ae-117">В обычных условиях эти элементы управления могут обрабатывать большинство вариантов представления текста в приложении.</span><span class="sxs-lookup"><span data-stu-id="b68ae-117">Under ordinary circumstances, these controls can handle the majority of text presentation in your application.</span></span> <span data-ttu-id="b68ae-118">Тем не менее некоторые расширенные сценарии требуют управления хранением текста, а также его представлением.</span><span class="sxs-lookup"><span data-stu-id="b68ae-118">However, some advanced scenarios require the control of text storage as well as text presentation.</span></span> [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] <span data-ttu-id="b68ae-119">предоставляет расширяемый механизм форматирования текста для этой цели.</span><span class="sxs-lookup"><span data-stu-id="b68ae-119">provides an extensible text formatting engine for this purpose.</span></span>  
  
 <span data-ttu-id="b68ae-120">Найти дополнительные функции форматирования текста в [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] состоят из механизма форматирования, хранилища текста фрагментов текста и свойств форматирования текста.</span><span class="sxs-lookup"><span data-stu-id="b68ae-120">The advanced text formatting features found in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] consist of a text formatting engine, a text store, text runs, and formatting properties.</span></span> <span data-ttu-id="b68ae-121">Механизм форматирования текста, <xref:System.Windows.Media.TextFormatting.TextFormatter>, создает строки текста, используемые для представления.</span><span class="sxs-lookup"><span data-stu-id="b68ae-121">The text formatting engine, <xref:System.Windows.Media.TextFormatting.TextFormatter>, creates lines of text to be used for presentation.</span></span> <span data-ttu-id="b68ae-122">Это достигается путем запуска процесса форматирования строки и вызова модуля форматирования текста <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A>.</span><span class="sxs-lookup"><span data-stu-id="b68ae-122">This is achieved by initiating the line formatting process and calling the text formatter's <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A>.</span></span> <span data-ttu-id="b68ae-123">Модуль форматирования текста получает фрагментов текста из хранилища текста, вызывая магазина <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> метод.</span><span class="sxs-lookup"><span data-stu-id="b68ae-123">The text formatter retrieves text runs from your text store by calling the store's <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> method.</span></span> <span data-ttu-id="b68ae-124"><xref:System.Windows.Media.TextFormatting.TextRun> Объекты затем формируются в <xref:System.Windows.Media.TextFormatting.TextLine> объектов модулем форматирования текста и передаются в приложение для проверки или отображения.</span><span class="sxs-lookup"><span data-stu-id="b68ae-124">The <xref:System.Windows.Media.TextFormatting.TextRun> objects are then formed into <xref:System.Windows.Media.TextFormatting.TextLine> objects by the text formatter and given to your application for inspection or display.</span></span>  
  
<a name="section2"></a>   
## <a name="using-the-text-formatter"></a><span data-ttu-id="b68ae-125">Использование модуля форматирования текста</span><span class="sxs-lookup"><span data-stu-id="b68ae-125">Using the Text Formatter</span></span>  
 <span data-ttu-id="b68ae-126"><xref:System.Windows.Media.TextFormatting.TextFormatter> является [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] механизма форматирования текста и предоставляет службы для форматирования и переноса строк текста.</span><span class="sxs-lookup"><span data-stu-id="b68ae-126"><xref:System.Windows.Media.TextFormatting.TextFormatter> is the [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] text formatting engine and provides services for formatting and breaking text lines.</span></span> <span data-ttu-id="b68ae-127">Модуль форматирования текста может обрабатывать различные форматы текстовых символов и стили абзацев и включает поддержку международного макета текста.</span><span class="sxs-lookup"><span data-stu-id="b68ae-127">The text formatter can handle different text character formats and paragraph styles, and includes support for international text layout.</span></span>  
  
 <span data-ttu-id="b68ae-128">В отличие от традиционного текстового [!INCLUDE[TLA#tla_api](../../../../includes/tlasharptla-api-md.md)], <xref:System.Windows.Media.TextFormatting.TextFormatter> взаимодействует с клиентом макета текста через набор методов обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="b68ae-128">Unlike a traditional text [!INCLUDE[TLA#tla_api](../../../../includes/tlasharptla-api-md.md)], the <xref:System.Windows.Media.TextFormatting.TextFormatter> interacts with a text layout client through a set of callback methods.</span></span> <span data-ttu-id="b68ae-129">Требуется клиент для предоставления этих методов в реализации <xref:System.Windows.Media.TextFormatting.TextSource> класса.</span><span class="sxs-lookup"><span data-stu-id="b68ae-129">It requires the client to provide these methods in an implementation of the <xref:System.Windows.Media.TextFormatting.TextSource> class.</span></span> <span data-ttu-id="b68ae-130">Следующая диаграмма иллюстрирует взаимодействие макета текста между клиентским приложением и <xref:System.Windows.Media.TextFormatting.TextFormatter>.</span><span class="sxs-lookup"><span data-stu-id="b68ae-130">The following diagram illustrates the text layout interaction between the client application and <xref:System.Windows.Media.TextFormatting.TextFormatter>.</span></span>  
  
 ![Схема клиента структуры текста и TextFormatter](./media/advanced-text-formatting/text-layout-textformatter-interaction.png)  
  
 <span data-ttu-id="b68ae-132">Модуль форматирования текста используется для извлечения форматированных строк текста из хранилища текста, который представляет собой реализацию <xref:System.Windows.Media.TextFormatting.TextSource>.</span><span class="sxs-lookup"><span data-stu-id="b68ae-132">The text formatter is used to retrieve formatted text lines from the text store, which is an implementation of <xref:System.Windows.Media.TextFormatting.TextSource>.</span></span> <span data-ttu-id="b68ae-133">Для этого сначала создается экземпляр модуля форматирования текста с помощью <xref:System.Windows.Media.TextFormatting.TextFormatter.Create%2A> метод.</span><span class="sxs-lookup"><span data-stu-id="b68ae-133">This is done by first creating an instance of the text formatter by using the <xref:System.Windows.Media.TextFormatting.TextFormatter.Create%2A> method.</span></span> <span data-ttu-id="b68ae-134">Этот метод создает экземпляр модуля форматирования текста и задает максимальные значения высоты и ширины строки.</span><span class="sxs-lookup"><span data-stu-id="b68ae-134">This method creates an instance of the text formatter and sets the maximum line height and width values.</span></span> <span data-ttu-id="b68ae-135">Как только создается экземпляр модуля форматирования текста, процесс создания строки, начатую посредством вызова <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A> метод.</span><span class="sxs-lookup"><span data-stu-id="b68ae-135">As soon as an instance of the text formatter is created, the line creation process is started by calling the <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A> method.</span></span> <span data-ttu-id="b68ae-136"><xref:System.Windows.Media.TextFormatting.TextFormatter> обратный вызов к источнику текста для получения текста и параметров форматирования для фрагментов текста эту форму строки.</span><span class="sxs-lookup"><span data-stu-id="b68ae-136"><xref:System.Windows.Media.TextFormatting.TextFormatter> calls back to the text source to retrieve the text and formatting parameters for the runs of text that form a line.</span></span>  
  
 <span data-ttu-id="b68ae-137">В следующем примере показан процесс форматирования хранилища текста.</span><span class="sxs-lookup"><span data-stu-id="b68ae-137">In the following example, the process of formatting a text store is shown.</span></span> <span data-ttu-id="b68ae-138"><xref:System.Windows.Media.TextFormatting.TextFormatter> Объект используется для извлечения строк текста из хранилища текста и последующего форматирования строк текста для рисования в <xref:System.Windows.Media.DrawingContext>.</span><span class="sxs-lookup"><span data-stu-id="b68ae-138">The <xref:System.Windows.Media.TextFormatting.TextFormatter> object is used to retrieve text lines from the text store and then format the text line for drawing into the <xref:System.Windows.Media.DrawingContext>.</span></span>  
  
 [!code-csharp[TextFormatterExample#100](~/samples/snippets/csharp/VS_Snippets_Wpf/TextFormatterExample/CSharp/Window1.xaml.cs#100)]
 [!code-vb[TextFormatterExample#100](~/samples/snippets/visualbasic/VS_Snippets_Wpf/TextFormatterExample/VisualBasic/Window1.xaml.vb#100)]  
  
<a name="section3"></a>   
## <a name="implementing-the-client-text-store"></a><span data-ttu-id="b68ae-139">Реализация клиентского хранилища текста</span><span class="sxs-lookup"><span data-stu-id="b68ae-139">Implementing the Client Text Store</span></span>  
 <span data-ttu-id="b68ae-140">При расширении механизма форматирования текста необходимо реализовать все аспекты хранилища текста и управлять ими.</span><span class="sxs-lookup"><span data-stu-id="b68ae-140">When you extend the text formatting engine, you are required to implement and manage all aspects of the text store.</span></span> <span data-ttu-id="b68ae-141">Это довольно сложная задача.</span><span class="sxs-lookup"><span data-stu-id="b68ae-141">This is not a trivial task.</span></span> <span data-ttu-id="b68ae-142">Хранилище текста отвечает за отслеживание свойств фрагментов текста, свойств абзаца, встроенных объектов и других подобных элементов.</span><span class="sxs-lookup"><span data-stu-id="b68ae-142">The text store is responsible for tracking text run properties, paragraph properties, embedded objects, and other similar content.</span></span> <span data-ttu-id="b68ae-143">Он также предоставляет модуль форматирования текста с отдельными <xref:System.Windows.Media.TextFormatting.TextRun> объектов, которые использует модуль форматирования текста для создания <xref:System.Windows.Media.TextFormatting.TextLine> объектов.</span><span class="sxs-lookup"><span data-stu-id="b68ae-143">It also provides the text formatter with individual <xref:System.Windows.Media.TextFormatting.TextRun> objects which the text formatter uses to create <xref:System.Windows.Media.TextFormatting.TextLine> objects.</span></span>  
  
 <span data-ttu-id="b68ae-144">Для обработки виртуализации хранилища текста, хранилища текста должен быть производным от <xref:System.Windows.Media.TextFormatting.TextSource>.</span><span class="sxs-lookup"><span data-stu-id="b68ae-144">To handle the virtualization of the text store, the text store must be derived from <xref:System.Windows.Media.TextFormatting.TextSource>.</span></span> <span data-ttu-id="b68ae-145"><xref:System.Windows.Media.TextFormatting.TextSource> Определяет метод, используемый модулем форматирования текста для извлечения фрагментов текста из хранилища текста.</span><span class="sxs-lookup"><span data-stu-id="b68ae-145"><xref:System.Windows.Media.TextFormatting.TextSource> defines the method the text formatter uses to retrieve text runs from the text store.</span></span> <span data-ttu-id="b68ae-146"><xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> — Это метод, используемый модулем форматирования текста для извлечения текста цепочек, используемых в форматировании строки.</span><span class="sxs-lookup"><span data-stu-id="b68ae-146"><xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> is the method used by the text formatter to retrieve text runs used in line formatting.</span></span> <span data-ttu-id="b68ae-147">Вызов <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> неоднократно осуществляется модулем форматирования текста, пока не произойдет одно из следующих условий:</span><span class="sxs-lookup"><span data-stu-id="b68ae-147">The call to <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> is repeatedly made by the text formatter until one of the following conditions occurs:</span></span>  
  
-   <span data-ttu-id="b68ae-148">Объект <xref:System.Windows.Media.TextFormatting.TextEndOfLine> или подкласс возвращается.</span><span class="sxs-lookup"><span data-stu-id="b68ae-148">A <xref:System.Windows.Media.TextFormatting.TextEndOfLine> or a subclass is returned.</span></span>  
  
-   <span data-ttu-id="b68ae-149">Суммарная ширина фрагментов текста превышает ширину строк, указанную в вызове для создания модуля форматирования текста или вызов модуля форматирования текста <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A> метод.</span><span class="sxs-lookup"><span data-stu-id="b68ae-149">The accumulated width of text runs exceeds the maximum line width specified in either the call to create the text formatter or the call to the text formatter's <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A> method.</span></span>  
  
-   <span data-ttu-id="b68ae-150">Объект [!INCLUDE[TLA#tla_unicode](../../../../includes/tlasharptla-unicode-md.md)] возвращается последовательность новой строки, например «CF», «LF» или «CRLF,».</span><span class="sxs-lookup"><span data-stu-id="b68ae-150">A [!INCLUDE[TLA#tla_unicode](../../../../includes/tlasharptla-unicode-md.md)] newline sequence, such as "CF", "LF", or "CRLF", is returned.</span></span>  
  
<a name="section4"></a>   
## <a name="providing-text-runs"></a><span data-ttu-id="b68ae-151">Предоставление фрагментов текста</span><span class="sxs-lookup"><span data-stu-id="b68ae-151">Providing Text Runs</span></span>  
 <span data-ttu-id="b68ae-152">Ядром процесса форматирования текста является взаимодействие между модулем форматирования текста и хранилищем текста.</span><span class="sxs-lookup"><span data-stu-id="b68ae-152">The core of the text formatting process is the interaction between the text formatter and the text store.</span></span> <span data-ttu-id="b68ae-153">Реализация <xref:System.Windows.Media.TextFormatting.TextSource> предоставляет модуль форматирования текста с <xref:System.Windows.Media.TextFormatting.TextRun> объектов и свойств, с помощью которых форматируются исполнения текста.</span><span class="sxs-lookup"><span data-stu-id="b68ae-153">Your implementation of <xref:System.Windows.Media.TextFormatting.TextSource> provides the text formatter with the <xref:System.Windows.Media.TextFormatting.TextRun> objects and the properties with which to format the text runs.</span></span> <span data-ttu-id="b68ae-154">Это взаимодействие обрабатывается <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> метод, который вызывается модулем форматирования текста.</span><span class="sxs-lookup"><span data-stu-id="b68ae-154">This interaction is handled by the <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> method, which is called by the text formatter.</span></span>  
  
 <span data-ttu-id="b68ae-155">В следующей таблице показаны некоторые из предварительно определенных <xref:System.Windows.Media.TextFormatting.TextRun> объектов.</span><span class="sxs-lookup"><span data-stu-id="b68ae-155">The following table shows some of the predefined <xref:System.Windows.Media.TextFormatting.TextRun> objects.</span></span>  
  
|<span data-ttu-id="b68ae-156">Тип TextRun</span><span class="sxs-lookup"><span data-stu-id="b68ae-156">TextRun Type</span></span>|<span data-ttu-id="b68ae-157">Использование</span><span class="sxs-lookup"><span data-stu-id="b68ae-157">Usage</span></span>|  
|------------------|-----------|  
|<xref:System.Windows.Media.TextFormatting.TextCharacters>|<span data-ttu-id="b68ae-158">Специализированный фрагмент текста, который используется для передачи представления глифов символов обратно в модуль форматирования текста.</span><span class="sxs-lookup"><span data-stu-id="b68ae-158">The specialized text run used to pass a representation of character glyphs back to the text formatter.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextEmbeddedObject>|<span data-ttu-id="b68ae-159">Специализированный фрагмент текста, который используется для предоставления содержимого, в котором измерение, проверка нажатия и рисование выполняются в целом (например, кнопка или изображение в тексте).</span><span class="sxs-lookup"><span data-stu-id="b68ae-159">The specialized text run used to provide content in which measuring, hit testing, and drawing is done in whole, such as a button or image within the text.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextEndOfLine>|<span data-ttu-id="b68ae-160">Специализированный фрагмент текста, который используется для обозначения конца строки.</span><span class="sxs-lookup"><span data-stu-id="b68ae-160">The specialized text run used to mark the end of a line.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextEndOfParagraph>|<span data-ttu-id="b68ae-161">Специализированный фрагмент текста, который используется для обозначения конца абзаца.</span><span class="sxs-lookup"><span data-stu-id="b68ae-161">The specialized text run used to mark the end of a paragraph.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextEndOfSegment>|<span data-ttu-id="b68ae-162">Специализированный фрагмент текста, используемый для обозначения конца сегмента, например конца области, затронутых предыдущим <xref:System.Windows.Media.TextFormatting.TextModifier> запуска.</span><span class="sxs-lookup"><span data-stu-id="b68ae-162">The specialized text run used to mark the end of a segment, such as to end the scope affected by a previous <xref:System.Windows.Media.TextFormatting.TextModifier> run.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextHidden>|<span data-ttu-id="b68ae-163">Специализированный фрагмент текста, который используется для отметки диапазона скрытых символов.</span><span class="sxs-lookup"><span data-stu-id="b68ae-163">The specialized text run used to mark a range of hidden characters.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextModifier>|<span data-ttu-id="b68ae-164">Специализированный фрагмент текста, который используется для изменения свойств фрагментов текста в своей области.</span><span class="sxs-lookup"><span data-stu-id="b68ae-164">The specialized text run used to modify properties of text runs in its scope.</span></span> <span data-ttu-id="b68ae-165">Область расширяется до следующего соответствия <xref:System.Windows.Media.TextFormatting.TextEndOfSegment> текстовой цепочки или следующего <xref:System.Windows.Media.TextFormatting.TextEndOfParagraph>.</span><span class="sxs-lookup"><span data-stu-id="b68ae-165">The scope extends to the next matching <xref:System.Windows.Media.TextFormatting.TextEndOfSegment> text run, or the next <xref:System.Windows.Media.TextFormatting.TextEndOfParagraph>.</span></span>|  
  
 <span data-ttu-id="b68ae-166">Любые из стандартных <xref:System.Windows.Media.TextFormatting.TextRun> объектов может быть подклассом.</span><span class="sxs-lookup"><span data-stu-id="b68ae-166">Any of the predefined <xref:System.Windows.Media.TextFormatting.TextRun> objects can be subclassed.</span></span> <span data-ttu-id="b68ae-167">Это позволяет источнику текста предоставлять модуль форматирования текста с фрагментами текста, включающими пользовательские данные.</span><span class="sxs-lookup"><span data-stu-id="b68ae-167">This allows your text source to provide the text formatter with text runs that include custom data.</span></span>  
  
 <span data-ttu-id="b68ae-168">В следующем примере демонстрируется <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> метод.</span><span class="sxs-lookup"><span data-stu-id="b68ae-168">The following example demonstrates a <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> method.</span></span> <span data-ttu-id="b68ae-169">Это хранилище текста возвращает <xref:System.Windows.Media.TextFormatting.TextRun> объектов для форматирования текста для обработки.</span><span class="sxs-lookup"><span data-stu-id="b68ae-169">This text store returns <xref:System.Windows.Media.TextFormatting.TextRun> objects to the text formatter for processing.</span></span>  
  
 [!code-csharp[TextFormatterExample#101](~/samples/snippets/csharp/VS_Snippets_Wpf/TextFormatterExample/CSharp/CustomTextSource.cs#101)]
 [!code-vb[TextFormatterExample#101](~/samples/snippets/visualbasic/VS_Snippets_Wpf/TextFormatterExample/VisualBasic/CustomTextSource.vb#101)]  
  
> [!NOTE]
>  <span data-ttu-id="b68ae-170">В этом примере хранилище текста предоставляет одни и те же свойства текста всему тексту.</span><span class="sxs-lookup"><span data-stu-id="b68ae-170">In this example, the text store provides the same text properties to all of the text.</span></span> <span data-ttu-id="b68ae-171">Расширенные хранилища текста могут потребоваться для реализации собственного управления диапазонами, чтобы позволить отдельным символам иметь разные свойства.</span><span class="sxs-lookup"><span data-stu-id="b68ae-171">Advanced text stores would need to implement their own span management to allow individual characters to have different properties.</span></span>  
  
<a name="section5"></a>   
## <a name="specifying-formatting-properties"></a><span data-ttu-id="b68ae-172">Задание свойств форматирования</span><span class="sxs-lookup"><span data-stu-id="b68ae-172">Specifying Formatting Properties</span></span>  
 <span data-ttu-id="b68ae-173"><xref:System.Windows.Media.TextFormatting.TextRun> объекты форматируются с помощью свойств, предоставляемых хранилищем текста.</span><span class="sxs-lookup"><span data-stu-id="b68ae-173"><xref:System.Windows.Media.TextFormatting.TextRun> objects are formatted by using properties provided by the text store.</span></span> <span data-ttu-id="b68ae-174">Эти свойства бывают двух типов <xref:System.Windows.Media.TextFormatting.TextParagraphProperties> и <xref:System.Windows.Media.TextFormatting.TextRunProperties>.</span><span class="sxs-lookup"><span data-stu-id="b68ae-174">These properties come in two types, <xref:System.Windows.Media.TextFormatting.TextParagraphProperties> and <xref:System.Windows.Media.TextFormatting.TextRunProperties>.</span></span> <span data-ttu-id="b68ae-175"><xref:System.Windows.Media.TextFormatting.TextParagraphProperties> обрабатывать все свойства абзаца, например <xref:System.Windows.TextAlignment> и <xref:System.Windows.FlowDirection>.</span><span class="sxs-lookup"><span data-stu-id="b68ae-175"><xref:System.Windows.Media.TextFormatting.TextParagraphProperties> handle paragraph inclusive properties such as <xref:System.Windows.TextAlignment> and <xref:System.Windows.FlowDirection>.</span></span> <span data-ttu-id="b68ae-176"><xref:System.Windows.Media.TextFormatting.TextRunProperties> — Это свойства, которые могут быть разными для каждого текста в абзаце, например кисть переднего плана, <xref:System.Windows.Media.Typeface>и размер шрифта.</span><span class="sxs-lookup"><span data-stu-id="b68ae-176"><xref:System.Windows.Media.TextFormatting.TextRunProperties> are properties that can be different for each text run within a paragraph, such as foreground brush, <xref:System.Windows.Media.Typeface>, and font size.</span></span> <span data-ttu-id="b68ae-177">Для реализации пользовательских абзацев и текст, типов свойств, приложение должно создавать классы, производные от <xref:System.Windows.Media.TextFormatting.TextParagraphProperties> и <xref:System.Windows.Media.TextFormatting.TextRunProperties> соответственно.</span><span class="sxs-lookup"><span data-stu-id="b68ae-177">To implement custom paragraph and custom text run property types, your application must create classes that derive from <xref:System.Windows.Media.TextFormatting.TextParagraphProperties> and <xref:System.Windows.Media.TextFormatting.TextRunProperties> respectively.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b68ae-178">См. также</span><span class="sxs-lookup"><span data-stu-id="b68ae-178">See also</span></span>

- [<span data-ttu-id="b68ae-179">Оформление в WPF</span><span class="sxs-lookup"><span data-stu-id="b68ae-179">Typography in WPF</span></span>](typography-in-wpf.md)
- [<span data-ttu-id="b68ae-180">Документы в WPF</span><span class="sxs-lookup"><span data-stu-id="b68ae-180">Documents in WPF</span></span>](documents-in-wpf.md)
