---
title: Ресурсы XAML
ms.date: 03/30/2017
helpviewer_keywords:
- reusing resources [WPF]
- resources [WPF], reusing
- reusing commonly defined objects [WPF]
- XAML [WPF], reusing resources
ms.assetid: 91580b89-a0a8-4889-aecb-fddf8e63175f
ms.openlocfilehash: 738a4f397b1677b867126c7bb439b027f951baa0
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/22/2019
ms.locfileid: "69958822"
---
# <a name="xaml-resources"></a><span data-ttu-id="18ebd-102">Ресурсы XAML</span><span class="sxs-lookup"><span data-stu-id="18ebd-102">XAML Resources</span></span>
<span data-ttu-id="18ebd-103">Ресурс — это объект, который можно повторно использовать в разных местах приложения.</span><span class="sxs-lookup"><span data-stu-id="18ebd-103">A resource is an object that can be reused in different places in your application.</span></span> <span data-ttu-id="18ebd-104">Примерами ресурсов являются кисти и стили.</span><span class="sxs-lookup"><span data-stu-id="18ebd-104">Examples of resources include brushes and styles.</span></span> <span data-ttu-id="18ebd-105">В этом обзоре описывается использование ресурсов в [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="18ebd-105">This overview describes how to use resources in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span> <span data-ttu-id="18ebd-106">Вы также можете создавать ресурсы и получать к ним доступ с помощью кода или взаимозаменяемости между [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)]кодом и.</span><span class="sxs-lookup"><span data-stu-id="18ebd-106">You can also create and access resources by using code, or interchangeably between code and [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)].</span></span> <span data-ttu-id="18ebd-107">Дополнительные сведения см. в разделе [ресурсы и код](resources-and-code.md).</span><span class="sxs-lookup"><span data-stu-id="18ebd-107">For more information, see [Resources and Code](resources-and-code.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="18ebd-108">Файлы ресурсов, описанные в этом разделе, отличаются от файлов ресурсов, описанных в [ресурсах, содержимом и файлах данных приложения WPF,](../app-development/wpf-application-resource-content-and-data-files.md) а не на внедренных или связанных ресурсах, описанных в статье [Управление ресурсами приложения (.NET). ](/visualstudio/ide/managing-application-resources-dotnet).</span><span class="sxs-lookup"><span data-stu-id="18ebd-108">The resource files described in this topic are different than the resource files described in [WPF Application Resource, Content, and Data Files](../app-development/wpf-application-resource-content-and-data-files.md) and different than the embedded or linked resources described in [Manage Application Resources (.NET)](/visualstudio/ide/managing-application-resources-dotnet).</span></span>  

<a name="usingresources"></a>   
## <a name="using-resources-in-xaml"></a><span data-ttu-id="18ebd-109">Использование ресурсов в XAML</span><span class="sxs-lookup"><span data-stu-id="18ebd-109">Using Resources in XAML</span></span>  
 <span data-ttu-id="18ebd-110">В следующем примере определяется <xref:System.Windows.Media.SolidColorBrush> как ресурс в корневом элементе страницы.</span><span class="sxs-lookup"><span data-stu-id="18ebd-110">The following example defines a <xref:System.Windows.Media.SolidColorBrush> as a resource on the root element of a page.</span></span> <span data-ttu-id="18ebd-111">Затем этот пример ссылается на ресурс и использует его для задания свойств нескольких дочерних элементов, включая <xref:System.Windows.Shapes.Ellipse> <xref:System.Windows.Controls.TextBlock>, и <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="18ebd-111">The example then references the resource and uses it to set properties of several child elements, including an <xref:System.Windows.Shapes.Ellipse>, a <xref:System.Windows.Controls.TextBlock>, and a <xref:System.Windows.Controls.Button>.</span></span>  
  
 [!code-xaml[FEResourceSH_snip#XAML](~/samples/snippets/csharp/VS_Snippets_Wpf/FEResourceSH_snip/CS/page1.xaml#xaml)]  
  
 <span data-ttu-id="18ebd-112">Каждый элемент уровня среды<xref:System.Windows.FrameworkElement> (или <xref:System.Windows.FrameworkContentElement>) имеет <xref:System.Windows.FrameworkElement.Resources%2A> свойство, которое является <xref:System.Windows.ResourceDictionary>свойством, содержащим ресурсы (как), которые определяет ресурс.</span><span class="sxs-lookup"><span data-stu-id="18ebd-112">Every framework-level element (<xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>) has a <xref:System.Windows.FrameworkElement.Resources%2A> property, which is the property that contains the resources (as a <xref:System.Windows.ResourceDictionary>) that a resource defines.</span></span> <span data-ttu-id="18ebd-113">Вы можете определить ресурсы в любом элементе.</span><span class="sxs-lookup"><span data-stu-id="18ebd-113">You can define resources on any element.</span></span> <span data-ttu-id="18ebd-114">Однако чаще всего ресурсы определяются в корневом элементе, который находится <xref:System.Windows.Controls.Page> в примере.</span><span class="sxs-lookup"><span data-stu-id="18ebd-114">However, resources are most often defined on the root element, which is <xref:System.Windows.Controls.Page> in the example.</span></span>  
  
 <span data-ttu-id="18ebd-115">Каждый ресурс в словаре ресурсов должен иметь уникальный ключ.</span><span class="sxs-lookup"><span data-stu-id="18ebd-115">Each resource in a resource dictionary must have a unique key.</span></span> <span data-ttu-id="18ebd-116">При определении ресурсов в разметке уникальный ключ назначается с помощью [директивы x:Key](../../xaml-services/x-key-directive.md).</span><span class="sxs-lookup"><span data-stu-id="18ebd-116">When you define resources in markup, you assign the unique key through the [x:Key Directive](../../xaml-services/x-key-directive.md).</span></span> <span data-ttu-id="18ebd-117">Как правило, ключ является строкой. Однако можно задать его как другой тип объекта с помощью соответствующих расширений разметки.</span><span class="sxs-lookup"><span data-stu-id="18ebd-117">Typically, the key is a string; however, you can also set it to other object types by using the appropriate markup extensions.</span></span> <span data-ttu-id="18ebd-118">Нестроковые ключи для ресурсов используются в определенных функциональных областях в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], особенно для стилей, ресурсов компонентов и стилей данных.</span><span class="sxs-lookup"><span data-stu-id="18ebd-118">Nonstring keys for resources are used by certain feature areas in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], notably for styles, component resources, and data styling.</span></span>  
  
 <span data-ttu-id="18ebd-119">После определения ресурса можно ссылаться на ресурс, который должен быть использован для значения свойства, с помощью синтаксиса расширения разметки ресурсов, задающего имя ключа, например:</span><span class="sxs-lookup"><span data-stu-id="18ebd-119">After you define a resource, you can reference the resource to be used for a property value by using a resource markup extension syntax that specifies the key name, for example:</span></span>  
  
 [!code-xaml[FEResourceSH_snip#KeyNameUsage](~/samples/snippets/csharp/VS_Snippets_Wpf/FEResourceSH_snip/CS/page2.xaml#keynameusage)]  
  
 <span data-ttu-id="18ebd-120">В предыдущем примере [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] , когда загрузчик обрабатывает значение `{StaticResource MyBrush}` <xref:System.Windows.Controls.Control.Background%2A> свойства в <xref:System.Windows.Controls.Button>, логика поиска ресурсов сначала проверяет словарь ресурсов для <xref:System.Windows.Controls.Button> элемента.</span><span class="sxs-lookup"><span data-stu-id="18ebd-120">In the preceding example, when the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] loader processes the value `{StaticResource MyBrush}` for the <xref:System.Windows.Controls.Control.Background%2A> property on <xref:System.Windows.Controls.Button>, the resource lookup logic first checks the resource dictionary for the <xref:System.Windows.Controls.Button> element.</span></span> <span data-ttu-id="18ebd-121">Если <xref:System.Windows.Controls.Button> не имеет определения ключа `MyBrush` ресурса (это не значит, что его коллекция ресурсов пуста), уточняющий запрос <xref:System.Windows.Controls.Button>проверяет родительский элемент, который имеет значение <xref:System.Windows.Controls.Page>.</span><span class="sxs-lookup"><span data-stu-id="18ebd-121">If <xref:System.Windows.Controls.Button> does not have a definition of the resource key `MyBrush` (it does not; its resource collection is empty), the lookup next checks the parent element of <xref:System.Windows.Controls.Button>, which is <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="18ebd-122">Таким словами, при определении ресурса в <xref:System.Windows.Controls.Page> корневом элементе все элементы в логическом дереве <xref:System.Windows.Controls.Page> объекта могут получить к нему доступ, и вы можете повторно использовать тот же ресурс для установки значения <xref:System.Type> любого свойства, которое принимает, что ресурс соответствующий.</span><span class="sxs-lookup"><span data-stu-id="18ebd-122">Thus, when you define a resource on the <xref:System.Windows.Controls.Page> root element, all the elements in the logical tree of the <xref:System.Windows.Controls.Page> can access it, and you can reuse the same resource for setting the value of any property that accepts the <xref:System.Type> that the resource represents.</span></span> <span data-ttu-id="18ebd-123">В предыдущем примере один и тот же `MyBrush` ресурс задает два разных свойства: свойства <xref:System.Windows.Controls.Control.Background%2A> <xref:System.Windows.Controls.Button>и <xref:System.Windows.Shapes.Shape.Fill%2A> <xref:System.Windows.Shapes.Rectangle>объекта.</span><span class="sxs-lookup"><span data-stu-id="18ebd-123">In the previous example, the same `MyBrush` resource sets two different properties: the <xref:System.Windows.Controls.Control.Background%2A> of a <xref:System.Windows.Controls.Button>, and the <xref:System.Windows.Shapes.Shape.Fill%2A> of a <xref:System.Windows.Shapes.Rectangle>.</span></span>  
  
<a name="staticdynamic"></a>   
## <a name="static-and-dynamic-resources"></a><span data-ttu-id="18ebd-124">Статические и динамические ресурсы</span><span class="sxs-lookup"><span data-stu-id="18ebd-124">Static and Dynamic Resources</span></span>  
 <span data-ttu-id="18ebd-125">Ресурс может использоваться как статический или динамический ресурс.</span><span class="sxs-lookup"><span data-stu-id="18ebd-125">A resource can be referenced as either a static resource or a dynamic resource.</span></span> <span data-ttu-id="18ebd-126">Это можно сделать с помощью [расширения разметки StaticResource](staticresource-markup-extension.md) или [расширения разметки DynamicResource](dynamicresource-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="18ebd-126">This is done by using either the [StaticResource Markup Extension](staticresource-markup-extension.md) or the [DynamicResource Markup Extension](dynamicresource-markup-extension.md).</span></span> <span data-ttu-id="18ebd-127">Расширение разметки — это функция [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] , позволяющая указать ссылку на объект, разлучив расширение разметки на обработку строки атрибута и возвращая объект [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] загрузчику.</span><span class="sxs-lookup"><span data-stu-id="18ebd-127">A markup extension is a feature of [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] whereby you can specify an object reference by having the markup extension process the attribute string and return the object to a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] loader.</span></span> <span data-ttu-id="18ebd-128">Дополнительные сведения о поведении расширения разметки см. в разделе [расширения разметки и XAML WPF](markup-extensions-and-wpf-xaml.md).</span><span class="sxs-lookup"><span data-stu-id="18ebd-128">For more information about markup extension behavior, see [Markup Extensions and WPF XAML](markup-extensions-and-wpf-xaml.md).</span></span>  
  
 <span data-ttu-id="18ebd-129">При использовании расширения разметки обычно предоставляют один или несколько параметров в виде строки; они обрабатываются этим расширением разметки, а не в контексте задаваемого свойства.</span><span class="sxs-lookup"><span data-stu-id="18ebd-129">When you use a markup extension, you typically provide one or more parameters in string form that are processed by that particular markup extension, rather than being evaluated in the context of the property being set.</span></span> <span data-ttu-id="18ebd-130">[Расширение разметки StaticResource](staticresource-markup-extension.md) обрабатывает ключ путем поиска значения для этого ключа во всех доступных словарях ресурсов.</span><span class="sxs-lookup"><span data-stu-id="18ebd-130">The [StaticResource Markup Extension](staticresource-markup-extension.md) processes a key by looking up the value for that key in all available resource dictionaries.</span></span> <span data-ttu-id="18ebd-131">Это происходит во время загрузки, которая является моментом времени, когда процессу загрузки необходимо присвоить значение свойству, которое принимает ссылку на статический ресурс.</span><span class="sxs-lookup"><span data-stu-id="18ebd-131">This happens during loading, which is the point in time when the loading process needs to assign the property value that takes the static resource reference.</span></span> <span data-ttu-id="18ebd-132">Вместо этого [расширение разметки DynamicResource](dynamicresource-markup-extension.md) обрабатывает ключ путем создания выражения, и это выражение остается невычисленным до тех пор, пока приложение не будет запущено, когда выражение вычисляется и предоставляет значение.</span><span class="sxs-lookup"><span data-stu-id="18ebd-132">The [DynamicResource Markup Extension](dynamicresource-markup-extension.md) instead processes a key by creating an expression, and that expression remains unevaluated until the application is actually run, at which time the expression is evaluated and provides a value.</span></span>  
  
 <span data-ttu-id="18ebd-133">Приведенные ниже соображения могут повлиять на выбор использования ссылки на статический или динамический ресурс.</span><span class="sxs-lookup"><span data-stu-id="18ebd-133">When you reference a resource, the following considerations can influence whether you use a static resource reference or a dynamic resource reference:</span></span>  
  
- <span data-ttu-id="18ebd-134">Общая схема создания ресурсов для приложения (на странице в приложении, свободно [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], в сборке только ресурсов).</span><span class="sxs-lookup"><span data-stu-id="18ebd-134">The overall design of how you create the resources for your application (per page, in the application, in loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], in a resource only assembly).</span></span>  
  
- <span data-ttu-id="18ebd-135">Является ли обновление ресурсов в режиме реального времени частью требований приложения.</span><span class="sxs-lookup"><span data-stu-id="18ebd-135">The application functionality: is updating resources in real time part of your application requirements?</span></span>  
  
- <span data-ttu-id="18ebd-136">Соответствующее поведение подстановки этого ссылочного типа ресурса.</span><span class="sxs-lookup"><span data-stu-id="18ebd-136">The respective lookup behavior of that resource reference type.</span></span>  
  
- <span data-ttu-id="18ebd-137">Конкретное свойство или тип ресурса и собственное поведение этих типов.</span><span class="sxs-lookup"><span data-stu-id="18ebd-137">The particular property or resource type, and the native behavior of those types.</span></span>  
  
### <a name="static-resources"></a><span data-ttu-id="18ebd-138">Статические ресурсы</span><span class="sxs-lookup"><span data-stu-id="18ebd-138">Static Resources</span></span>  
 <span data-ttu-id="18ebd-139">Ссылки на статические ресурсы лучше всего использовать в указанных ниже случаях.</span><span class="sxs-lookup"><span data-stu-id="18ebd-139">Static resource references work best for the following circumstances:</span></span>  
  
- <span data-ttu-id="18ebd-140">Когда структура приложения концентрирует большую часть его ресурсов в словарях ресурсов уровня страницы или приложения.</span><span class="sxs-lookup"><span data-stu-id="18ebd-140">Your application design concentrates most of all of its resources into page or application level resource dictionaries.</span></span> <span data-ttu-id="18ebd-141">Ссылки на статические ресурсы не обрабатываются повторно в зависимости от поведения во время выполнения, например при перезагрузке страницы. Таким образом, можно получить выигрыш в производительности благодаря отсутствию большого количества динамических ссылок на ресурсы, когда согласно структуре ресурсов и приложения в них нет необходимости.</span><span class="sxs-lookup"><span data-stu-id="18ebd-141">Static resource references are not reevaluated based on runtime behaviors such as reloading a page, and therefore there can be some performance benefit to avoiding large numbers of dynamic resource references when they are not necessary per your resource and application design.</span></span>  
  
- <span data-ttu-id="18ebd-142">Вы устанавливаете значение свойства, которое не находится в <xref:System.Windows.DependencyObject> <xref:System.Windows.Freezable>или.</span><span class="sxs-lookup"><span data-stu-id="18ebd-142">You are setting the value of a property that is not on a <xref:System.Windows.DependencyObject> or a <xref:System.Windows.Freezable>.</span></span>  
  
- <span data-ttu-id="18ebd-143">При создании словаря ресурсов, который будет скомпилирован в DLL и либо упакован как часть приложения, либо совместно использоваться приложениями.</span><span class="sxs-lookup"><span data-stu-id="18ebd-143">You are creating a resource dictionary that will be compiled into a DLL, and packaged as part of the application or shared between applications.</span></span>  
  
- <span data-ttu-id="18ebd-144">При создании темы для пользовательского элемента управления и определении ресурсов, используемых в темах.</span><span class="sxs-lookup"><span data-stu-id="18ebd-144">You are creating a theme for a custom control, and are defining resources that are used within the themes.</span></span> <span data-ttu-id="18ebd-145">В этом случае обычно не требуется подстановка ссылок на динамические ресурсы. Вместо этого требуется подстановка ссылок на статические ресурсы, чтобы подстановка была прогнозируемой и самодостаточной для темы.</span><span class="sxs-lookup"><span data-stu-id="18ebd-145">For this case, you typically do not want the dynamic resource reference lookup behavior, you instead want the static resource reference behavior so that the lookup is predictable and self-contained to the theme.</span></span> <span data-ttu-id="18ebd-146">При использовании ссылки на динамический ресурс даже ссылка в теме остается необработанной до времени выполнения и есть вероятность того, что при применении темы некоторые локальные элементы переопределят ключ, на который тема пытается сослаться, и локальный элемент окажется перед темой при подстановке.</span><span class="sxs-lookup"><span data-stu-id="18ebd-146">With a dynamic resource reference, even a reference within a theme is left unevaluated until runtime, and there is a chance that when the theme is applied, some local element will redefine a key that your theme is trying to reference, and the local element will fall prior to the theme itself in the lookup.</span></span> <span data-ttu-id="18ebd-147">Если такое случится, тема будет работать не так, как ожидалось.</span><span class="sxs-lookup"><span data-stu-id="18ebd-147">If that happens, your theme will not behave in an expected manner.</span></span>  
  
- <span data-ttu-id="18ebd-148">При использовании ресурсов для задания большого количества свойств зависимостей.</span><span class="sxs-lookup"><span data-stu-id="18ebd-148">You are using resources to set large numbers of dependency properties.</span></span> <span data-ttu-id="18ebd-149">Свойства зависимостей обладают эффективным кэшированием значений, обеспечиваемым системой свойств, поэтому, если предоставить свойству зависимости значение, которое может быть вычислено во время загрузки, свойству не потребуется проверять пересчитанное выражение и оно сможет вернуть последнее фактическое значение.</span><span class="sxs-lookup"><span data-stu-id="18ebd-149">Dependency properties have effective value caching as enabled by the property system, so if you provide a value for a dependency property that can be evaluated at load time, the dependency property does not have to check for a reevaluated expression and can return the last effective value.</span></span> <span data-ttu-id="18ebd-150">Этот метод может обеспечить выигрыш в производительности.</span><span class="sxs-lookup"><span data-stu-id="18ebd-150">This technique can be a performance benefit.</span></span>  
  
- <span data-ttu-id="18ebd-151">Необходимо изменить базовый ресурс для всех потребителей или сохранить отдельные экземпляры, доступные для записи, для каждого потребителя с помощью [атрибута x:Shared](../../xaml-services/x-shared-attribute.md).</span><span class="sxs-lookup"><span data-stu-id="18ebd-151">You want to change the underlying resource for all consumers, or you want to maintain separate writable instances for each consumer by using the [x:Shared Attribute](../../xaml-services/x-shared-attribute.md).</span></span>  
  
#### <a name="static-resource-lookup-behavior"></a><span data-ttu-id="18ebd-152">Поведение подстановки статического ресурса</span><span class="sxs-lookup"><span data-stu-id="18ebd-152">Static resource lookup behavior</span></span>  
  
1. <span data-ttu-id="18ebd-153">Процесс подстановки ищет запрошенный ключ в словаре ресурсов, определенном элементом, который устанавливает это свойство.</span><span class="sxs-lookup"><span data-stu-id="18ebd-153">The lookup process checks for the requested key within the resource dictionary defined by the element that sets the property.</span></span>  
  
2. <span data-ttu-id="18ebd-154">Затем процесс подстановки обходит логическое дерево снизу вверх до родительского элемента и его словаря ресурсов.</span><span class="sxs-lookup"><span data-stu-id="18ebd-154">The lookup process then traverses the logical tree upward, to the parent element and its resource dictionary.</span></span> <span data-ttu-id="18ebd-155">Это продолжается до тех пор, пока не будет достигнут корневой элемент.</span><span class="sxs-lookup"><span data-stu-id="18ebd-155">This continues until the root element is reached.</span></span>  
  
3. <span data-ttu-id="18ebd-156">Далее проверяются ресурсы приложения.</span><span class="sxs-lookup"><span data-stu-id="18ebd-156">Next, application resources are checked.</span></span> <span data-ttu-id="18ebd-157">Ресурсы приложения — это ресурсы в словаре ресурсов, определяемые <xref:System.Windows.Application> объектом [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] для приложения.</span><span class="sxs-lookup"><span data-stu-id="18ebd-157">Application resources are those resources within the resource dictionary that is defined by the <xref:System.Windows.Application> object for your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application.</span></span>  
  
 <span data-ttu-id="18ebd-158">Ссылки на статический ресурс из словаря ресурсов должны указывать на ресурс, уже определенный лексически до ссылки на ресурс.</span><span class="sxs-lookup"><span data-stu-id="18ebd-158">Static resource references from within a resource dictionary must reference a resource that has already been defined lexically before the resource reference.</span></span> <span data-ttu-id="18ebd-159">Опережающие ссылки не могут быть разрешены ссылкой на статический ресурс.</span><span class="sxs-lookup"><span data-stu-id="18ebd-159">Forward references cannot be resolved by a static resource reference.</span></span> <span data-ttu-id="18ebd-160">По этой причине, если используются ссылки на статический ресурс, нужно так разрабатывать структуру словаря ресурсов, чтобы ресурсы, предназначенные для использования ресурсами, определялись в начале каждого соответствующего словаря ресурсов или около него.</span><span class="sxs-lookup"><span data-stu-id="18ebd-160">For this reason, if you use static resource references, you must design your resource dictionary structure such that resources intended for by-resource use are defined at or near the beginning of each respective resource dictionary.</span></span>  
  
 <span data-ttu-id="18ebd-161">Поиск статических ресурсов можно расширить на темы или в системные ресурсы, но это поддерживается только потому, [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] что загрузчик откладывает запрос.</span><span class="sxs-lookup"><span data-stu-id="18ebd-161">Static resource lookup can extend into themes, or into system resources, but this is supported only because the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] loader defers the request.</span></span> <span data-ttu-id="18ebd-162">Задержка необходима, чтобы тема среды выполнения в момент загрузки страницы правильно применялась к приложению.</span><span class="sxs-lookup"><span data-stu-id="18ebd-162">The deferral is necessary so that the runtime theme at the time the page loads applies properly to the application.</span></span> <span data-ttu-id="18ebd-163">Однако не рекомендуется использование ссылок на статические ресурсы для ключей, которые существуют только в теме или как системные ресурсы.</span><span class="sxs-lookup"><span data-stu-id="18ebd-163">However, static resource references to keys that are known to only exist in themes or as system resources are not recommended.</span></span> <span data-ttu-id="18ebd-164">Это происходит потому, что такие ссылки не будут повторно обработаны при изменении темы пользователем в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="18ebd-164">This is because such references are not reevaluated if the theme is changed by the user in realtime.</span></span> <span data-ttu-id="18ebd-165">Ссылки на динамические ресурсы более надежны при запросе темы или системных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="18ebd-165">A dynamic resource reference is more reliable when you request theme or system resources.</span></span> <span data-ttu-id="18ebd-166">Исключением является случай, когда элемент темы сам запрашивает другой ресурс.</span><span class="sxs-lookup"><span data-stu-id="18ebd-166">The exception is when a theme element itself requests another resource.</span></span> <span data-ttu-id="18ebd-167">Такие ссылки должны быть статическими по причинам, упомянутым выше.</span><span class="sxs-lookup"><span data-stu-id="18ebd-167">These references should be static resource references, for the reasons mentioned earlier.</span></span>  
  
 <span data-ttu-id="18ebd-168">Поведение исключения, если ссылка на статический ресурс не найдена, варьируется.</span><span class="sxs-lookup"><span data-stu-id="18ebd-168">The exception behavior if a static resource reference is not found varies.</span></span> <span data-ttu-id="18ebd-169">Если ресурс был задержан, то исключение возникнет во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="18ebd-169">If the resource was deferred, then the exception occurs at runtime.</span></span> <span data-ttu-id="18ebd-170">Если ресурс не был задержан, исключение возникнет во время загрузки.</span><span class="sxs-lookup"><span data-stu-id="18ebd-170">If the resource was not deferred, the exception occurs at load time.</span></span>  
  
### <a name="dynamic-resources"></a><span data-ttu-id="18ebd-171">Динамические ресурсы</span><span class="sxs-lookup"><span data-stu-id="18ebd-171">Dynamic Resources</span></span>  
 <span data-ttu-id="18ebd-172">Динамические ресурсы лучше всего подходят для указанных ниже случаев.</span><span class="sxs-lookup"><span data-stu-id="18ebd-172">Dynamic resources work best for the following circumstances:</span></span>  
  
- <span data-ttu-id="18ebd-173">Когда значение ресурса зависит от условий, не известных до времени выполнения.</span><span class="sxs-lookup"><span data-stu-id="18ebd-173">The value of the resource depends on conditions that are not known until runtime.</span></span> <span data-ttu-id="18ebd-174">Сюда входят системные ресурсы или ресурсы, которые в противном случае задаются пользователем.</span><span class="sxs-lookup"><span data-stu-id="18ebd-174">This includes system resources, or resources that are otherwise user settable.</span></span> <span data-ttu-id="18ebd-175">Например, можно создать значения Setter, которые ссылаются на системные свойства, предоставляемые <xref:System.Windows.SystemColors>, <xref:System.Windows.SystemFonts>или <xref:System.Windows.SystemParameters>.</span><span class="sxs-lookup"><span data-stu-id="18ebd-175">For example, you can create setter values that refer to system properties, as exposed by <xref:System.Windows.SystemColors>, <xref:System.Windows.SystemFonts>, or <xref:System.Windows.SystemParameters>.</span></span> <span data-ttu-id="18ebd-176">Эти значения являются действительно динамическими, так как они в конечном счете берутся из среды выполнения пользователя и операционной системы.</span><span class="sxs-lookup"><span data-stu-id="18ebd-176">These values are truly dynamic because they ultimately come from the runtime environment of the user and operating system.</span></span> <span data-ttu-id="18ebd-177">Кроме того, возможны темы уровня приложения, которые могут изменяться, когда при доступе к ресурсу уровня страницы также необходимо отследить изменения.</span><span class="sxs-lookup"><span data-stu-id="18ebd-177">You might also have application-level themes that can change, where page-level resource access must also capture the change.</span></span>  
  
- <span data-ttu-id="18ebd-178">При создании стилей темы или ссылке на них для пользовательского элемента управления.</span><span class="sxs-lookup"><span data-stu-id="18ebd-178">You are creating or referencing theme styles for a custom control.</span></span>  
  
- <span data-ttu-id="18ebd-179">Предполагается настраивать содержимое объекта <xref:System.Windows.ResourceDictionary> во время существования приложения.</span><span class="sxs-lookup"><span data-stu-id="18ebd-179">You intend to adjust the contents of a <xref:System.Windows.ResourceDictionary> during an application lifetime.</span></span>  
  
- <span data-ttu-id="18ebd-180">Когда имеется сложная структура ресурсов с взаимозависимостями, где могут потребоваться опережающие ссылки.</span><span class="sxs-lookup"><span data-stu-id="18ebd-180">You have a complicated resource structure that has interdependencies, where a forward reference may be required.</span></span> <span data-ttu-id="18ebd-181">Ссылки на статические ресурсы не поддерживают прямые ссылки, но ссылки на динамические ресурсы поддерживают их, так как ресурс не должен оцениваться до времени выполнения, а пересылка ссылок, следовательно, не является подходящим понятием.</span><span class="sxs-lookup"><span data-stu-id="18ebd-181">Static resource references do not support forward references, but dynamic resource references do support them because the resource does not need to be evaluated until runtime, and forward references are therefore not a relevant concept.</span></span>  
  
- <span data-ttu-id="18ebd-182">При ссылке на особенно большой с точки зрения компиляции или рабочего множества ресурс, если он может не использоваться немедленно при загрузке страницы.</span><span class="sxs-lookup"><span data-stu-id="18ebd-182">You are referencing a resource that is particularly large from the perspective of a compile or working set, and the resource might not be used immediately when the page loads.</span></span> <span data-ttu-id="18ebd-183">Ссылки на статические ресурсы всегда [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] загружаются с момента загрузки страницы, однако ссылка на динамический ресурс не загружается, пока она не будет фактически использована.</span><span class="sxs-lookup"><span data-stu-id="18ebd-183">Static resource references always load from [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] when the page loads; however, a dynamic resource reference does not load until it is actually used.</span></span>  
  
- <span data-ttu-id="18ebd-184">При создании стиля, где значения для метода задания могут браться из других значений, на которые влияют темы или другие пользовательские параметры.</span><span class="sxs-lookup"><span data-stu-id="18ebd-184">You are creating a style where setter values might come from other values that are influenced by themes or other user settings.</span></span>  
  
- <span data-ttu-id="18ebd-185">Когда ресурсы применяются к элементам, для которых во время существования приложения может быть изменен порядок наследования в логическом дереве.</span><span class="sxs-lookup"><span data-stu-id="18ebd-185">You are applying resources to elements that might be reparented in the logical tree during application lifetime.</span></span> <span data-ttu-id="18ebd-186">Изменение родительского элемента также потенциально изменяет область подстановки ресурса, так что, если необходим пересчет ресурса в новой области элемента с измененным порядком наследования, всегда следует использовать ссылку на динамический ресурс.</span><span class="sxs-lookup"><span data-stu-id="18ebd-186">Changing the parent also potentially changes the resource lookup scope, so if you want the resource for a reparented element to be reevaluated based on the new scope, always use a dynamic resource reference.</span></span>  
  
#### <a name="dynamic-resource-lookup-behavior"></a><span data-ttu-id="18ebd-187">Поведение подстановки динамического ресурса</span><span class="sxs-lookup"><span data-stu-id="18ebd-187">Dynamic resource lookup behavior</span></span>  
 <span data-ttu-id="18ebd-188">Поведение поиска ресурсов для ссылки на динамический ресурс параллельно выполняет поиск в коде при вызове метода <xref:System.Windows.FrameworkElement.FindResource%2A> или. <xref:System.Windows.FrameworkElement.SetResourceReference%2A></span><span class="sxs-lookup"><span data-stu-id="18ebd-188">Resource lookup behavior for a dynamic resource reference parallels the lookup behavior in your code if you call <xref:System.Windows.FrameworkElement.FindResource%2A> or <xref:System.Windows.FrameworkElement.SetResourceReference%2A>.</span></span>  
  
1. <span data-ttu-id="18ebd-189">Процесс подстановки ищет запрошенный ключ в словаре ресурсов, определенном элементом, который устанавливает это свойство.</span><span class="sxs-lookup"><span data-stu-id="18ebd-189">The lookup process checks for the requested key within the resource dictionary defined by the element that sets the property.</span></span>  
  
    - <span data-ttu-id="18ebd-190">Если элемент определяет <xref:System.Windows.FrameworkElement.Style%2A> свойство <xref:System.Windows.Style.Resources%2A> , проверяется словарь <xref:System.Windows.Style> в.</span><span class="sxs-lookup"><span data-stu-id="18ebd-190">If the element defines a <xref:System.Windows.FrameworkElement.Style%2A> property, the <xref:System.Windows.Style.Resources%2A> dictionary within the <xref:System.Windows.Style> is checked.</span></span>  
  
    - <span data-ttu-id="18ebd-191">Если элемент определяет <xref:System.Windows.Controls.Control.Template%2A> свойство <xref:System.Windows.FrameworkTemplate.Resources%2A> , проверяется словарь <xref:System.Windows.FrameworkTemplate> в.</span><span class="sxs-lookup"><span data-stu-id="18ebd-191">If the element defines a <xref:System.Windows.Controls.Control.Template%2A> property, the <xref:System.Windows.FrameworkTemplate.Resources%2A> dictionary within the <xref:System.Windows.FrameworkTemplate> is checked.</span></span>  
  
2. <span data-ttu-id="18ebd-192">Затем процесс подстановки обходит логическое дерево снизу вверх до родительского элемента и его словаря ресурсов.</span><span class="sxs-lookup"><span data-stu-id="18ebd-192">The lookup process then traverses the logical tree upward, to the parent element and its resource dictionary.</span></span> <span data-ttu-id="18ebd-193">Это продолжается до тех пор, пока не будет достигнут корневой элемент.</span><span class="sxs-lookup"><span data-stu-id="18ebd-193">This continues until the root element is reached.</span></span>  
  
3. <span data-ttu-id="18ebd-194">Далее проверяются ресурсы приложения.</span><span class="sxs-lookup"><span data-stu-id="18ebd-194">Next, application resources are checked.</span></span> <span data-ttu-id="18ebd-195">Ресурсы приложения — это ресурсы в словаре ресурсов, определяемые <xref:System.Windows.Application> объектом [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] для приложения.</span><span class="sxs-lookup"><span data-stu-id="18ebd-195">Application resources are those resources within the resource dictionary that is defined by the <xref:System.Windows.Application> object for your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application.</span></span>  
  
4. <span data-ttu-id="18ebd-196">Для текущей активной темы проверяется словарь ресурсов темы.</span><span class="sxs-lookup"><span data-stu-id="18ebd-196">Theme resource dictionary is checked, for the currently active theme.</span></span> <span data-ttu-id="18ebd-197">Если тема изменяется во время выполнения, значение будет повторно вычислено.</span><span class="sxs-lookup"><span data-stu-id="18ebd-197">If the theme changes at runtime, the value is reevaluated.</span></span>  
  
5. <span data-ttu-id="18ebd-198">Проверяются системные ресурсы.</span><span class="sxs-lookup"><span data-stu-id="18ebd-198">System resources are checked.</span></span>  
  
 <span data-ttu-id="18ebd-199">Поведение исключения (если таковое имеется) варьируется.</span><span class="sxs-lookup"><span data-stu-id="18ebd-199">Exception behavior (if any) varies:</span></span>  
  
- <span data-ttu-id="18ebd-200">Если ресурс был запрошен <xref:System.Windows.FrameworkElement.FindResource%2A> вызовом и не найден, возникает исключение.</span><span class="sxs-lookup"><span data-stu-id="18ebd-200">If a resource was requested by a <xref:System.Windows.FrameworkElement.FindResource%2A> call, and was not found, an exception is raised.</span></span>  
  
- <span data-ttu-id="18ebd-201">Если ресурс был запрошен <xref:System.Windows.FrameworkElement.TryFindResource%2A> вызовом и не найден, исключение не возникает, но возвращается `null`значение.</span><span class="sxs-lookup"><span data-stu-id="18ebd-201">If a resource was requested by a <xref:System.Windows.FrameworkElement.TryFindResource%2A> call, and was not found, no exception is raised, but the returned value is `null`.</span></span> <span data-ttu-id="18ebd-202">Если задаваемое свойство не принимается `null`, то по-прежнему может возникнуть более подробное исключение (это зависит от устанавливаемого свойства).</span><span class="sxs-lookup"><span data-stu-id="18ebd-202">If the property being set does not accept `null`, then it is still possible that a deeper exception will be raised (this depends on the individual property being set).</span></span>  
  
- <span data-ttu-id="18ebd-203">Если ресурс был запрошен ссылкой на динамический ресурс в [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]и не найден, то поведение зависит от общей системы свойств, но общее поведение имеет значение, как если бы на уровне, где существует ресурс, не происходила операция установки свойства.</span><span class="sxs-lookup"><span data-stu-id="18ebd-203">If a resource was requested by a dynamic resource reference in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], and was not found, then the behavior depends on the general property system, but the general behavior is as if no property setting operation occurred at the level where the resource exists.</span></span> <span data-ttu-id="18ebd-204">Например, при попытке задать фон для отдельного элемента кнопки с помощью ресурса, который не может быть вычислен, не происходит задания значения, но фактическое значение по-прежнему может быть получено от других членов системы свойств и приоритета значения.</span><span class="sxs-lookup"><span data-stu-id="18ebd-204">For instance, if you attempt to set the background on a an individual button element using a resource that could not be evaluated, then no value set results, but the effective value can still come from other participants in the property system and value precedence.</span></span> <span data-ttu-id="18ebd-205">Например, значение фона может по-прежнему браться из локально определенного стиля кнопки или из стиля темы.</span><span class="sxs-lookup"><span data-stu-id="18ebd-205">For instance, the background value might still come from a locally defined button style, or from the theme style.</span></span> <span data-ttu-id="18ebd-206">Для свойств, не определенных стилями темы, после неудавшейся попытки обработки ресурса фактическое значение может браться из значения по умолчанию в метаданных свойства.</span><span class="sxs-lookup"><span data-stu-id="18ebd-206">For properties that are not defined by theme styles, the effective value after a failed resource evaluation might come from the default value in the property metadata.</span></span>  
  
#### <a name="restrictions"></a><span data-ttu-id="18ebd-207">Ограничения</span><span class="sxs-lookup"><span data-stu-id="18ebd-207">Restrictions</span></span>  
 <span data-ttu-id="18ebd-208">Для ссылок на динамические ресурсы есть некоторые важные ограничения.</span><span class="sxs-lookup"><span data-stu-id="18ebd-208">Dynamic resource references have some notable restrictions.</span></span> <span data-ttu-id="18ebd-209">Должно выполняться по крайней мере одно из указанных ниже условий.</span><span class="sxs-lookup"><span data-stu-id="18ebd-209">At least one of the following must be true:</span></span>  
  
- <span data-ttu-id="18ebd-210">Устанавливаемое свойство должно быть свойством в <xref:System.Windows.FrameworkElement> или. <xref:System.Windows.FrameworkContentElement></span><span class="sxs-lookup"><span data-stu-id="18ebd-210">The property being set must be a property on a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="18ebd-211">Это свойство должно быть зарезервировано <xref:System.Windows.DependencyProperty>.</span><span class="sxs-lookup"><span data-stu-id="18ebd-211">That property must be backed by a <xref:System.Windows.DependencyProperty>.</span></span>  
  
- <span data-ttu-id="18ebd-212">Ссылка на значение в <xref:System.Windows.Style>. <xref:System.Windows.Setter></span><span class="sxs-lookup"><span data-stu-id="18ebd-212">The reference is for a value within a <xref:System.Windows.Style><xref:System.Windows.Setter>.</span></span>  
  
- <span data-ttu-id="18ebd-213">Устанавливаемое свойство должно быть свойством <xref:System.Windows.Freezable> в, которое предоставляется как значение <xref:System.Windows.FrameworkElement> свойства <xref:System.Windows.Setter> или <xref:System.Windows.FrameworkContentElement> либо значение.</span><span class="sxs-lookup"><span data-stu-id="18ebd-213">The property being set must be a property on a <xref:System.Windows.Freezable> that is provided as a value of either a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement> property, or a <xref:System.Windows.Setter> value.</span></span>  
  
 <span data-ttu-id="18ebd-214">Так как устанавливаемое свойство должно быть <xref:System.Windows.DependencyProperty> свойством или <xref:System.Windows.Freezable> , большинство изменений свойств может распространяться на пользовательский интерфейс, так как изменение свойства (измененное значение динамического ресурса) подтверждается системой свойств.</span><span class="sxs-lookup"><span data-stu-id="18ebd-214">Because the property being set must be a <xref:System.Windows.DependencyProperty> or <xref:System.Windows.Freezable> property, most property changes can propagate to UI because a property change (the changed dynamic resource value) is acknowledged by the property system.</span></span> <span data-ttu-id="18ebd-215">Большинство элементов управления включают логику, которая будет принудительно выполнять другой макет <xref:System.Windows.DependencyProperty> элемента управления, если изменяется и это свойство может повлиять на макет.</span><span class="sxs-lookup"><span data-stu-id="18ebd-215">Most controls include logic that will force another layout of a control if a <xref:System.Windows.DependencyProperty> changes and that property might affect layout.</span></span> <span data-ttu-id="18ebd-216">Однако не все свойства, имеющие [расширение разметки DynamicResource](dynamicresource-markup-extension.md) в качестве значения, гарантированно предоставляют значение таким образом, что они обновляются в пользовательском интерфейсе в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="18ebd-216">However, not all properties that have a [DynamicResource Markup Extension](dynamicresource-markup-extension.md) as their value are guaranteed to provide the value in such a way that they update in realtime in the UI.</span></span> <span data-ttu-id="18ebd-217">Функциональные возможности по-прежнему могут отличаться в зависимости от свойства, типа, которому принадлежит свойство, или даже логической структуры приложения.</span><span class="sxs-lookup"><span data-stu-id="18ebd-217">That functionality still might vary depending on the property, as well as depending on the type that owns the property, or even the logical structure of your application.</span></span>  
  
<a name="stylesimplicitkeys"></a>   
## <a name="styles-datatemplates-and-implicit-keys"></a><span data-ttu-id="18ebd-218">Стили, DataTemplates и неявные ключи</span><span class="sxs-lookup"><span data-stu-id="18ebd-218">Styles, DataTemplates, and Implicit Keys</span></span>  
 <span data-ttu-id="18ebd-219">Ранее было указано, что все элементы в <xref:System.Windows.ResourceDictionary> должны иметь ключ.</span><span class="sxs-lookup"><span data-stu-id="18ebd-219">Earlier, it was stated that all items in a <xref:System.Windows.ResourceDictionary> must have a key.</span></span> <span data-ttu-id="18ebd-220">Однако это не означает, что все ресурсы должны иметь явный `x:Key`.</span><span class="sxs-lookup"><span data-stu-id="18ebd-220">However, that does not mean that all resources must have an explicit `x:Key`.</span></span> <span data-ttu-id="18ebd-221">Некоторые типы объектов поддерживают неявный ключ, если он определен как ресурс, где значение ключа связано со значением другого свойства.</span><span class="sxs-lookup"><span data-stu-id="18ebd-221">Several object types support an implicit key when defined as a resource, where the key value is tied to the value of another property.</span></span> <span data-ttu-id="18ebd-222">Это называется неявным ключом, в то время как `x:Key` атрибут является явным ключом.</span><span class="sxs-lookup"><span data-stu-id="18ebd-222">This is known as an implicit key, whereas an `x:Key` attribute is an explicit key.</span></span> <span data-ttu-id="18ebd-223">Любой неявный ключ можно перезаписать, указав явный ключ.</span><span class="sxs-lookup"><span data-stu-id="18ebd-223">You can overwrite any implicit key by specifying an explicit key.</span></span>  
  
 <span data-ttu-id="18ebd-224">Одним из очень важных сценариев для ресурсов является определение <xref:System.Windows.Style>.</span><span class="sxs-lookup"><span data-stu-id="18ebd-224">One very important scenario for resources is when you define a <xref:System.Windows.Style>.</span></span> <span data-ttu-id="18ebd-225">Фактически, <xref:System.Windows.Style> в словаре ресурсов почти всегда определяется как запись, поскольку стили изначально предназначены для повторного использования.</span><span class="sxs-lookup"><span data-stu-id="18ebd-225">In fact, a <xref:System.Windows.Style> is almost always defined as an entry in a resource dictionary, because styles are inherently intended for reuse.</span></span> <span data-ttu-id="18ebd-226">Дополнительные сведения о стилях см. в разделе [Стилизация и использование шаблонов](../controls/styling-and-templating.md).</span><span class="sxs-lookup"><span data-stu-id="18ebd-226">For more information about styles, see [Styling and Templating](../controls/styling-and-templating.md).</span></span>  
  
 <span data-ttu-id="18ebd-227">С помощью неявного ключа можно создавать стили для элементов управления либо ссылаться на них.</span><span class="sxs-lookup"><span data-stu-id="18ebd-227">Styles for controls can be both created with and referenced with an implicit key.</span></span> <span data-ttu-id="18ebd-228">Стили темы, определяющие внешний вид элемента управления по умолчанию, используют этот неявный ключ.</span><span class="sxs-lookup"><span data-stu-id="18ebd-228">The theme styles that define the default appearance of a control rely on this implicit key.</span></span> <span data-ttu-id="18ebd-229">Неявным ключом с точки зрения запроса является <xref:System.Type> сам элемент управления.</span><span class="sxs-lookup"><span data-stu-id="18ebd-229">The implicit key from the standpoint of requesting it is the <xref:System.Type> of the control itself.</span></span> <span data-ttu-id="18ebd-230">Неявным ключом с точки зрения определения ресурса является <xref:System.Windows.Style.TargetType%2A> стиль.</span><span class="sxs-lookup"><span data-stu-id="18ebd-230">The implicit key from the standpoint of defining the resource is the <xref:System.Windows.Style.TargetType%2A> of the style.</span></span> <span data-ttu-id="18ebd-231">Поэтому при создании тем для пользовательских элементов управления и создании стилей, взаимодействующих с существующими стилями тем, не нужно указывать директиву [x:Key](../../xaml-services/x-key-directive.md) для этого <xref:System.Windows.Style>.</span><span class="sxs-lookup"><span data-stu-id="18ebd-231">Therefore, if you are creating themes for custom controls, creating styles that interact with existing theme styles, you do not need to specify an [x:Key Directive](../../xaml-services/x-key-directive.md) for that <xref:System.Windows.Style>.</span></span> <span data-ttu-id="18ebd-232">А если требуется использовать стили из тем, то вообще не нужно задавать стиль.</span><span class="sxs-lookup"><span data-stu-id="18ebd-232">And if you want to use the themed styles, you do not need to specify any style at all.</span></span> <span data-ttu-id="18ebd-233">Например, следующее определение стиля работает, даже если <xref:System.Windows.Style> ресурс не имеет ключа:</span><span class="sxs-lookup"><span data-stu-id="18ebd-233">For instance, the following style definition works, even though the <xref:System.Windows.Style> resource does not appear to have a key:</span></span>  
  
 [!code-xaml[FEResourceSH_snip#ImplicitStyle](~/samples/snippets/csharp/VS_Snippets_Wpf/FEResourceSH_snip/CS/page2.xaml#implicitstyle)]  
  
 <span data-ttu-id="18ebd-234">У этого стиля действительно есть ключ: неявный ключ `typeof(`. <xref:System.Windows.Controls.Button> `)`</span><span class="sxs-lookup"><span data-stu-id="18ebd-234">That style really does have a key: the implicit key `typeof(`<xref:System.Windows.Controls.Button>`)`.</span></span> <span data-ttu-id="18ebd-235">В разметке можно указать <xref:System.Windows.Style.TargetType%2A> непосредственно в качестве имени типа (или при необходимости можно использовать [{x:Type...}](../../xaml-services/x-type-markup-extension.md)</span><span class="sxs-lookup"><span data-stu-id="18ebd-235">In markup, you can specify a <xref:System.Windows.Style.TargetType%2A> directly as the type name (or you can optionally use [{x:Type...}](../../xaml-services/x-type-markup-extension.md)</span></span> <span data-ttu-id="18ebd-236">для возврата <xref:System.Type>.</span><span class="sxs-lookup"><span data-stu-id="18ebd-236">to return a <xref:System.Type>.</span></span>  
  
 <span data-ttu-id="18ebd-237">С помощью механизмов тематического стиля по умолчанию [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], используемых в, этот стиль применяется <xref:System.Windows.Controls.Button> в качестве стиля среды выполнения на странице, даже если <xref:System.Windows.Controls.Button> он не пытается указать <xref:System.Windows.FrameworkElement.Style%2A> свойство или конкретный ресурс. Ссылка на стиль.</span><span class="sxs-lookup"><span data-stu-id="18ebd-237">Through the default theme style mechanisms used by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], that style is applied as the runtime style of a <xref:System.Windows.Controls.Button> on the page, even though the <xref:System.Windows.Controls.Button> itself does not attempt to specify its <xref:System.Windows.FrameworkElement.Style%2A> property or a specific resource reference to the style.</span></span> <span data-ttu-id="18ebd-238">Ваш стиль, определенный на странице, находится выше в последовательности поиска, чем стиль словаря темы, используя тот же ключ, что и стиль словаря темы.</span><span class="sxs-lookup"><span data-stu-id="18ebd-238">Your style defined in the page is found earlier in the lookup sequence than the theme dictionary style, using the same key that the theme dictionary style has.</span></span> <span data-ttu-id="18ebd-239">Можно просто указать `<Button>Hello</Button>` в любом месте страницы, и стиль, определенный `Button` в параметре <xref:System.Windows.Style.TargetType%2A> , будет применен к этой кнопке.</span><span class="sxs-lookup"><span data-stu-id="18ebd-239">You could just specify `<Button>Hello</Button>` anywhere in the page, and the style you defined with <xref:System.Windows.Style.TargetType%2A> of `Button` would apply to that button.</span></span> <span data-ttu-id="18ebd-240">При необходимости вы по-прежнему можете явным образом создать ключ для стиля с тем же значением <xref:System.Windows.Style.TargetType%2A>типа, что и для ясности в разметке, но это необязательно.</span><span class="sxs-lookup"><span data-stu-id="18ebd-240">If you want, you can still explicitly key the style with the same type value as <xref:System.Windows.Style.TargetType%2A>, for clarity in your markup, but that is optional.</span></span>  
  
 <span data-ttu-id="18ebd-241">Неявные ключи для стилей не применяются к элементу <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> управления `true` , если имеет значение <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> (также обратите внимание, что может быть задано как часть собственного поведения для класса элемента управления, а не явно на экземпляре элемента управления).</span><span class="sxs-lookup"><span data-stu-id="18ebd-241">Implicit keys for styles do not apply on a control if <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> is `true` (also note that <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> might be set as part of native behavior for the control class, rather than explicitly on an instance of the control).</span></span> <span data-ttu-id="18ebd-242">Кроме того, для поддержки неявных ключей в сценариях производных классов элемент управления <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> должен переопределяться (все существующие элементы [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] управления, предоставленные как часть этого).</span><span class="sxs-lookup"><span data-stu-id="18ebd-242">Also, in order to support implicit keys for derived class scenarios, the control must override <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> (all existing controls provided as part of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] do this).</span></span> <span data-ttu-id="18ebd-243">Дополнительные сведения о стилях, темах и проектировании элементов управления см. в разделе [рекомендации по проектированию элементов управления стили](../controls/guidelines-for-designing-stylable-controls.md).</span><span class="sxs-lookup"><span data-stu-id="18ebd-243">For more information about styles, themes, and control design, see [Guidelines for Designing Stylable Controls](../controls/guidelines-for-designing-stylable-controls.md).</span></span>  
  
 <span data-ttu-id="18ebd-244"><xref:System.Windows.DataTemplate>также имеет неявный ключ.</span><span class="sxs-lookup"><span data-stu-id="18ebd-244"><xref:System.Windows.DataTemplate> also has an implicit key.</span></span> <span data-ttu-id="18ebd-245">Неявный ключ для <xref:System.Windows.DataTemplate> <xref:System.Windows.DataTemplate.DataType%2A> — это значение свойства.</span><span class="sxs-lookup"><span data-stu-id="18ebd-245">The implicit key for a <xref:System.Windows.DataTemplate> is the <xref:System.Windows.DataTemplate.DataType%2A> property value.</span></span> <span data-ttu-id="18ebd-246"><xref:System.Windows.DataTemplate.DataType%2A>также можно указать как имя типа, а не явно использовать [{x:Type...}](../../xaml-services/x-type-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="18ebd-246"><xref:System.Windows.DataTemplate.DataType%2A> can also be specified as the name of the type rather than explicitly using [{x:Type...}](../../xaml-services/x-type-markup-extension.md).</span></span> <span data-ttu-id="18ebd-247">Дополнительные сведения см. в разделе [Общие сведения о шаблонах данных](../data/data-templating-overview.md).</span><span class="sxs-lookup"><span data-stu-id="18ebd-247">For details, see [Data Templating Overview](../data/data-templating-overview.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="18ebd-248">См. также</span><span class="sxs-lookup"><span data-stu-id="18ebd-248">See also</span></span>

- <xref:System.Windows.ResourceDictionary>
- [<span data-ttu-id="18ebd-249">Ресурсы приложений</span><span class="sxs-lookup"><span data-stu-id="18ebd-249">Application Resources</span></span>](optimizing-performance-application-resources.md)
- [<span data-ttu-id="18ebd-250">Ресурсы и код</span><span class="sxs-lookup"><span data-stu-id="18ebd-250">Resources and Code</span></span>](resources-and-code.md)
- [<span data-ttu-id="18ebd-251">Определение и создание ссылки на ресурс</span><span class="sxs-lookup"><span data-stu-id="18ebd-251">Define and Reference a Resource</span></span>](how-to-define-and-reference-a-resource.md)
- [<span data-ttu-id="18ebd-252">Общие сведения об управлении приложением</span><span class="sxs-lookup"><span data-stu-id="18ebd-252">Application Management Overview</span></span>](../app-development/application-management-overview.md)
- [<span data-ttu-id="18ebd-253">Расширение разметки x:Type</span><span class="sxs-lookup"><span data-stu-id="18ebd-253">x:Type Markup Extension</span></span>](../../xaml-services/x-type-markup-extension.md)
- [<span data-ttu-id="18ebd-254">Расширение разметки StaticResource</span><span class="sxs-lookup"><span data-stu-id="18ebd-254">StaticResource Markup Extension</span></span>](staticresource-markup-extension.md)
- [<span data-ttu-id="18ebd-255">Расширение разметки DynamicResource</span><span class="sxs-lookup"><span data-stu-id="18ebd-255">DynamicResource Markup Extension</span></span>](dynamicresource-markup-extension.md)
