---
title: Наследование значения свойства
ms.date: 03/30/2017
helpviewer_keywords:
- inheritance [WPF], property values
- value inheritance [WPF]
- properties [WPF], value inheritance
ms.assetid: d7c338f9-f2bf-48ed-832c-7be58ac390e4
ms.openlocfilehash: b63f307d9edffd14315d383d8e06419fa141aee1
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2020
ms.locfileid: "79187193"
---
# <a name="property-value-inheritance"></a>Наследование значения свойства
Наследование значения свойства — это функция системы свойств [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]. Наследование значения свойства позволяет дочерним элементам в дереве элементов получать значение конкретного свойства из родительских элементов, наследуя это значение, настроенное в ближайшем родительском элементе. Родительский элемент также мог получить свое значение через наследование значения свойства, поэтому система потенциально рекурсивно проходит по элементам к корню страницы. Наследование значения свойства не является стандартным поведением системы свойств. Чтобы свойство инициировало наследование значения свойства для дочерних элементов, оно должно быть установлено с определенным параметром метаданных.  

<a name="Property_Value_Inheritance_is_Containment_Inheritance"></a>
## <a name="property-value-inheritance-is-containment-inheritance"></a>Наследование значения свойства является наследованием вложений  
 Используемый здесь термин "наследование" отличается от концепции наследования в контексте типов и общего объектно-ориентированного программирования, где производные классы наследуют определения членов от своих базовых классов. Это значение наследования также активно в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]: свойства, определенные в различных базовых классах, отображаются как атрибуты для производных классов [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] при использовании в качестве элементов и представляются для кода как члены. В частности, наследование значения свойства заключается в том, как значения свойств могут наследоваться от одного элемента к другому на основе иерархических отношений в дереве элементов. Это дерево элементов наиболее явно видно при встраивании элементов в другие элементы во время определения приложения в разметке [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]. Деревья объектов также могут создаваться программно путем добавления объектов к выделенным коллекциям других объектов, а наследование значения свойства работает аналогично в конечном дереве во время выполнения.  
  
<a name="Practical_Applications_of_Property_Value_Inheritance"></a>
## <a name="practical-applications-of-property-value-inheritance"></a>Практическое применение наследования значения свойства  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] AA включают несколько свойств, которые имеют свойство наследования включен. Как правило, сценарий для них состоит во включении свойства там, где уместно устанавливать свойство только один раз на странице, но это свойство также является членом одного из базовых классов элементов и, таким образом, может существовать в большинстве дочерних элементов. Например, <xref:System.Windows.FrameworkElement.FlowDirection%2A> элемент управления свойствами, по направлению которого течет содержимое должно быть представлено и расположены на странице. Как правило, требуется, чтобы концепция направления текста согласованно обрабатывалась во всех дочерних элементах. Если направление передачи по какой-то причине было прервано на некотором уровне дерева элементов в результате действия пользователя или среды, то оно должно быть перезапущено повсюду. Когда <xref:System.Windows.FrameworkElement.FlowDirection%2A> свойство наследуется, значение должно быть установлено или сбросить только один раз на уровне дерева элемента, который включает в себя потребности в представлении каждой страницы в приложении. Таким образом будет наследоваться даже начальное значение по умолчанию. Модель наследования значений свойств также позволяет отдельным элементам сбрасывать значение в тех редких случаях, когда сочетание направлений текста является преднамеренным.  
  
<a name="Making_a_Custom_Property_Inheritable"></a>
## <a name="making-a-custom-property-inheritable"></a>Создание настраиваемого наследуемого свойства  
 Изменяя метаданные настраиваемого свойства, можно создать собственные наследуемые свойства. Обратите внимание, что назначение свойства как наследуемого оказывает определенное влияние на производительность. В случаях, когда это свойство не имеет установленного локального значения или значения, полученного через стили, шаблоны или привязки данных, наследуемое свойство предоставляет присвоенные ему значения всем дочерним элементам в логическом дереве.  
  
 Чтобы свойство участвовало в наследовании значения, создайте настраиваемое присоединенное свойство, как описано в разделе [Регистрация присоединенного свойства](how-to-register-an-attached-property.md). Зарегистрируйте свойство с<xref:System.Windows.FrameworkPropertyMetadata>метаданными () и укажите опцию "Наследуют" в настройках параметров в этих метаданных. Также убедитесь, что для свойства задано значение по умолчанию, так как теперь это значение будет наследоваться. Несмотря на регистрацию свойства как присоединенного, можно создать "оболочку" свойства для получения/настройки доступа к типу владельца точно так же, как и для "неприсоединенного" свойства зависимостей. После этого, наследуемое свойство может быть установлено с помощью прямой обертки собственности на тип владельца или <xref:System.Windows.DependencyObject>производных типов, или он может быть установлен с помощью прилагаемого синтаксиса собственности на любой .  
  
 Прилагаемые свойства концептуально похожи на глобальные свойства; Вы можете проверить значение <xref:System.Windows.DependencyObject> на любом и получить действительный результат. Типичный сценарий для прилагаемых свойств заключается в установлении значений свойств на элементах ребенка, и этот сценарий является<xref:System.Windows.DependencyObject>более эффективным, если свойство, о котором идет речь, является прилагаемым свойством, которое всегда неявно присутствует в виде прикрепленного свойства на каждом элементе () в дереве.  
  
> [!NOTE]
> Несмотря на то что наследование значения свойства может выполняться для неприсоединенных свойств зависимостей, поведение наследования для таких свойств через определенные границы элементов в дереве среды выполнения не определено. Всегда <xref:System.Windows.DependencyProperty.RegisterAttached%2A> используйте для регистрации свойств, в которых вы указываете <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> в метаданных.  
  
<a name="InheritanceContext"></a>
## <a name="inheriting-property-values-across-tree-boundaries"></a>Наследование значений свойств за границами дерева  
 Наследование свойств работает путем обхода дерева элементов. Это дерево часто параллельно логическому дереву. Однако всякий раз, когда вы включаете объект базового уровня WPF в <xref:System.Windows.Media.Brush>разметку, определяющую дерево элемента, например, , вы создали прерывистое логическое дерево. Истинное логическое дерево концептуально не распространяется через <xref:System.Windows.Media.Brush>, потому что логическое дерево является концепцией уровня рамочного уровня WPF. Вы можете увидеть это отражено в результатах <xref:System.Windows.LogicalTreeHelper>при использовании методов . Тем не менее, наследство стоимости свойства может преодолеть этот пробел в логическом дереве и все еще может пройти унаследованные значения <xref:System.Windows.Controls.Frame>через, до тех пор, как наследуемое имущество было зарегистрировано в качестве прилагаемого имущества и не преднамеренное наследство блокировки границы (например, ) не встречается.  
  
## <a name="see-also"></a>См. также раздел

- [Метаданные свойства зависимости](dependency-property-metadata.md)
- [Общие сведения о присоединенных свойствах](attached-properties-overview.md)
- [Приоритет стоимости свойств зависимости](dependency-property-value-precedence.md)
