---
title: Наследование значения свойства
ms.date: 03/30/2017
helpviewer_keywords:
- inheritance [WPF], property values
- value inheritance [WPF]
- properties [WPF], value inheritance
ms.assetid: d7c338f9-f2bf-48ed-832c-7be58ac390e4
ms.openlocfilehash: eb757d039437d9954a2b648c5f758dffa3fee3d2
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/22/2019
ms.locfileid: "69958366"
---
# <a name="property-value-inheritance"></a>Наследование значения свойства
Наследование значения свойства — это функция системы свойств [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]. Наследование значения свойства позволяет дочерним элементам в дереве элементов получать значение конкретного свойства из родительских элементов, наследуя это значение, настроенное в ближайшем родительском элементе. Родительский элемент также мог получить свое значение через наследование значения свойства, поэтому система потенциально рекурсивно проходит по элементам к корню страницы. Наследование значения свойства не является стандартным поведением системы свойств. Чтобы свойство инициировало наследование значения свойства для дочерних элементов, оно должно быть установлено с определенным параметром метаданных.  

<a name="Property_Value_Inheritance_is_Containment_Inheritance"></a>   
## <a name="property-value-inheritance-is-containment-inheritance"></a>Наследование значения свойства является наследованием вложений  
 Используемый здесь термин "наследование" отличается от концепции наследования в контексте типов и общего объектно-ориентированного программирования, где производные классы наследуют определения членов от своих базовых классов. Это значение наследования также активно в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]: свойства, определенные в различных базовых классах, отображаются как атрибуты для производных классов [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] при использовании в качестве элементов и представляются для кода как члены. В частности, наследование значения свойства заключается в том, как значения свойств могут наследоваться от одного элемента к другому на основе иерархических отношений в дереве элементов. Это дерево элементов наиболее явно видно при встраивании элементов в другие элементы во время определения приложения в разметке [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]. Деревья объектов также могут создаваться программно путем добавления объектов к выделенным коллекциям других объектов, а наследование значения свойства работает аналогично в конечном дереве во время выполнения.  
  
<a name="Practical_Applications_of_Property_Value_Inheritance"></a>   
## <a name="practical-applications-of-property-value-inheritance"></a>Практическое применение наследования значения свойства  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] API-интерфейсы включают несколько свойств, для которых включено наследование свойств. Как правило, сценарий для них состоит во включении свойства там, где уместно устанавливать свойство только один раз на странице, но это свойство также является членом одного из базовых классов элементов и, таким образом, может существовать в большинстве дочерних элементов. Например, элементы управления <xref:System.Windows.FrameworkElement.FlowDirection%2A> , которые направлены на направление содержимого, должны быть представлены и упорядочены на странице. Как правило, требуется, чтобы концепция направления текста согласованно обрабатывалась во всех дочерних элементах. Если направление передачи по какой-то причине было прервано на некотором уровне дерева элементов в результате действия пользователя или среды, то оно должно быть перезапущено повсюду. <xref:System.Windows.FrameworkElement.FlowDirection%2A> Когда свойство наследуется, оно должно быть установлено или сброшено только один раз на уровне в дереве элементов, охватывающем потребности представления каждой страницы в приложении. Таким образом будет наследоваться даже начальное значение по умолчанию. Модель наследования значений свойств также позволяет отдельным элементам сбрасывать значение в тех редких случаях, когда сочетание направлений текста является преднамеренным.  
  
<a name="Making_a_Custom_Property_Inheritable"></a>   
## <a name="making-a-custom-property-inheritable"></a>Создание настраиваемого наследуемого свойства  
 Изменяя метаданные настраиваемого свойства, можно создать собственные наследуемые свойства. Обратите внимание, что назначение свойства как наследуемого оказывает определенное влияние на производительность. В случаях, когда это свойство не имеет установленного локального значения или значения, полученного через стили, шаблоны или привязки данных, наследуемое свойство предоставляет присвоенные ему значения всем дочерним элементам в логическом дереве.  
  
 Чтобы свойство участвовало в наследовании значения, создайте настраиваемое присоединенное свойство, как описано в разделе [Регистрация присоединенного свойства](how-to-register-an-attached-property.md). Зарегистрируйте свойство с помощью метаданных<xref:System.Windows.FrameworkPropertyMetadata>() и укажите параметр "Inherits" в параметрах параметров в этих метаданных. Также убедитесь, что для свойства задано значение по умолчанию, так как теперь это значение будет наследоваться. Несмотря на регистрацию свойства как присоединенного, можно создать "оболочку" свойства для получения/настройки доступа к типу владельца точно так же, как и для "неприсоединенного" свойства зависимостей. После этого наследуемое свойство может быть установлено с помощью оболочки прямого свойства для типа владельца или производных типов или может быть задана с помощью синтаксиса присоединенного свойства для любого <xref:System.Windows.DependencyObject>.  
  
 Присоединенные свойства концептуально похожи на глобальные свойства. можно проверить значение Any <xref:System.Windows.DependencyObject> и получить допустимый результат. Типичным сценарием для присоединенных свойств является установка значений свойств для дочерних элементов, и этот сценарий более эффективен, если рассматриваемое свойство является вложенным свойством, которое всегда неявно представляется как присоединенное свойство для каждого элемента (<xref:System.Windows.DependencyObject>) в дереве.  
  
> [!NOTE]
> Несмотря на то что наследование значения свойства может выполняться для неприсоединенных свойств зависимостей, поведение наследования для таких свойств через определенные границы элементов в дереве среды выполнения не определено. Всегда используйте <xref:System.Windows.DependencyProperty.RegisterAttached%2A> для регистрации свойств, в которых <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> указывается в метаданных.  
  
<a name="InheritanceContext"></a>   
## <a name="inheriting-property-values-across-tree-boundaries"></a>Наследование значений свойств за границами дерева  
 Наследование свойств работает путем обхода дерева элементов. Это дерево часто параллельно логическому дереву. Однако при включении объекта уровня ядра WPF в разметку, определяющую дерево элементов, например <xref:System.Windows.Media.Brush>, вы создали неразрывное логическое дерево. Истинное логическое дерево по сути не расширяется с помощью <xref:System.Windows.Media.Brush>, поскольку логическое дерево является концепцией уровня среды WPF. Это отображается в результатах при использовании методов <xref:System.Windows.LogicalTreeHelper>. Однако наследование значения свойства может преодолеть этот зазор в логическом дереве и по-прежнему может передавать унаследованные значения с помощью, пока свойство, которое наследуется, было зарегистрировано как присоединенное свойство и не имеет намеренной границы блокировки наследования (например, <xref:System.Windows.Controls.Frame>).  
  
## <a name="see-also"></a>См. также

- [Метаданные свойства зависимостей](dependency-property-metadata.md)
- [Общие сведения о присоединенных свойствах](attached-properties-overview.md)
- [Приоритет значения свойства зависимостей](dependency-property-value-precedence.md)
