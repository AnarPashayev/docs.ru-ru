---
title: События предварительного просмотра
ms.date: 03/30/2017
helpviewer_keywords:
- Preview events [WPF]
- suppressing events [WPF]
- events [WPF], Preview
- events [WPF], suppressing
ms.assetid: b5032308-aa9c-4d02-af11-630ecec8df7e
ms.openlocfilehash: 75165df94aa8b508ef85cf970933efb98b9d62ca
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2019
ms.locfileid: "59211402"
---
# <a name="preview-events"></a><span data-ttu-id="60961-102">События предварительного просмотра</span><span class="sxs-lookup"><span data-stu-id="60961-102">Preview Events</span></span>
<span data-ttu-id="60961-103">События предварительного просмотра, также известный как события, нисходящей маршрутизации – это маршрутизированные события, где направление маршрута перемещается из корня приложения в сторону элемента, вызвавшего событие оно выводится как источник в данных события.</span><span class="sxs-lookup"><span data-stu-id="60961-103">Preview events, also known as tunneling events, are routed events where the direction of the route travels from the application root towards the element that raised the event and is reported as the source in event data.</span></span> <span data-ttu-id="60961-104">Не для всех сценариев события поддержки или требования события предварительного просмотра; в этом разделе описываются ситуации, где существуют события предварительного просмотра, как приложений или компонентов, их обработки, и случаи, где Создание события предварительного просмотра в пользовательских компонентов или классов можно использовать.</span><span class="sxs-lookup"><span data-stu-id="60961-104">Not all event scenarios support or require preview events; this topic describes the situations where preview events exist, how applications or components should handle them, and cases where creating preview events in custom components or classes might be appropriate.</span></span>  
  
## <a name="preview-events-and-input"></a><span data-ttu-id="60961-105">События предварительного просмотра и входных данных</span><span class="sxs-lookup"><span data-stu-id="60961-105">Preview Events and Input</span></span>  
 <span data-ttu-id="60961-106">При обработке событий в общем случае будьте осторожны при предварительной версии пометки события обработки событий данных.</span><span class="sxs-lookup"><span data-stu-id="60961-106">When you handle Preview events in general, be cautious about marking the events handled in the event data.</span></span> <span data-ttu-id="60961-107">Обработка события предварительного просмотра для любого элемента, отличные от элемента, вызвавшего его (элемент, который передается в качестве источника данных события) имеет возможность обработать событие, которое они были созданы не предоставления элемента.</span><span class="sxs-lookup"><span data-stu-id="60961-107">Handling a Preview event on any element other than the element that raised it (the element that is reported as the source in the event data) has the effect of not providing an element the opportunity to handle the event that it originated.</span></span> <span data-ttu-id="60961-108">Иногда это нужного результата, особенно в том случае, если существуют указанные элементы в с компоновкой элемента управления.</span><span class="sxs-lookup"><span data-stu-id="60961-108">Sometimes this is the desired result, particularly if the elements in question exist in relationships within the compositing of a control.</span></span>  
  
 <span data-ttu-id="60961-109">Для событий ввода в частности, события предварительного просмотра также предоставлять экземпляров данных событий с помощью эквивалентных событий восходящей маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="60961-109">For input events specifically, Preview events also share event data instances with the equivalent bubbling event.</span></span> <span data-ttu-id="60961-110">При использовании класса обработчика просмотра событий для пометки входного события как обработанного обработчика класса входного события восходящей маршрутизации не будет вызываться.</span><span class="sxs-lookup"><span data-stu-id="60961-110">If you use a Preview event class handler to mark the input event handled, the bubbling input event class handler will not be invoked.</span></span> <span data-ttu-id="60961-111">Или, если вы используете экземпляр обработчика просмотра событий чтобы пометить событие как обработанное, обработчики для событий восходящей маршрутизации будет обычно не вызываются.</span><span class="sxs-lookup"><span data-stu-id="60961-111">Or, if you use a Preview event instance handler to mark the event handled, handlers for the bubbling event will not typically be invoked.</span></span> <span data-ttu-id="60961-112">Обработчики классов или обработчиков экземпляров может быть зарегистрирован или присоединены с возможностью вызываемого даже если событие помечено как обработанное, но этот метод обычно не используется.</span><span class="sxs-lookup"><span data-stu-id="60961-112">Class handlers or instance handlers can be registered or attached with an option to be invoked even if the event is marked handled, but that technique is not commonly used.</span></span>  
  
 <span data-ttu-id="60961-113">Дополнительные сведения об обработке классов и его связь с события предварительного просмотра см. в разделе [маркировка перенаправленных событий как обработанных и обработка классов](marking-routed-events-as-handled-and-class-handling.md).</span><span class="sxs-lookup"><span data-stu-id="60961-113">For more information about class handling and how it relates to Preview events see [Marking Routed Events as Handled, and Class Handling](marking-routed-events-as-handled-and-class-handling.md).</span></span>  
  
### <a name="working-around-event-suppression-by-controls"></a><span data-ttu-id="60961-114">Обход скрытия события элементами управления</span><span class="sxs-lookup"><span data-stu-id="60961-114">Working Around Event Suppression by Controls</span></span>  
 <span data-ttu-id="60961-115">Один сценарий, где обычно используются события предварительного просмотра предназначен для обработки событий ввода составной элемент управления.</span><span class="sxs-lookup"><span data-stu-id="60961-115">One scenario where Preview events are commonly used is for composited control handling of input events.</span></span> <span data-ttu-id="60961-116">В некоторых случаях разработчик элемента управления подавляет некоторые события от прежнего из их контроля, возможно, чтобы заменить на определяемое компонентом событие, которое содержит дополнительные сведения или подразумевает более конкретное поведение.</span><span class="sxs-lookup"><span data-stu-id="60961-116">Sometimes, the author of the control suppresses a certain event from originating from their control, perhaps in order to substitute a component-defined event that carries more information or implies a more specific behavior.</span></span> <span data-ttu-id="60961-117">Например [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <xref:System.Windows.Controls.Button> подавляет <xref:System.Windows.UIElement.MouseLeftButtonDown> и <xref:System.Windows.UIElement.MouseRightButtonDown> восходящей маршрутизации событий, вызванных <xref:System.Windows.Controls.Button> или его составными элементами для регистрации действий мыши и вызов <xref:System.Windows.Controls.Primitives.ButtonBase.Click> событие, которое вызывается всегда <xref:System.Windows.Controls.Button> сам.</span><span class="sxs-lookup"><span data-stu-id="60961-117">For instance, a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <xref:System.Windows.Controls.Button> suppresses <xref:System.Windows.UIElement.MouseLeftButtonDown> and <xref:System.Windows.UIElement.MouseRightButtonDown> bubbling events raised by the <xref:System.Windows.Controls.Button> or its composite elements in favor of capturing the mouse and raising a <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event that is always raised by the <xref:System.Windows.Controls.Button> itself.</span></span> <span data-ttu-id="60961-118">События и его данные по-прежнему в маршруте, но так как <xref:System.Windows.Controls.Button> помечает данные событий в виде <xref:System.Windows.RoutedEventArgs.Handled%2A>, только обработчики для событий, в которых явно указана, они должны работать в `handledEventsToo` вызываются.</span><span class="sxs-lookup"><span data-stu-id="60961-118">The event and its data still continue along the route, but because the <xref:System.Windows.Controls.Button> marks the event data as <xref:System.Windows.RoutedEventArgs.Handled%2A>, only handlers for the event that specifically indicated they should act in the `handledEventsToo` case  are invoked.</span></span>  <span data-ttu-id="60961-119">Если другие элементы к корню приложения по-прежнему требуется возможность обработать событие запрещенное элемента управления, альтернативой является присоединение обработчиков в коде с помощью `handledEventsToo` указанный в виде `true`.</span><span class="sxs-lookup"><span data-stu-id="60961-119">If other elements towards the root of your application still wanted an opportunity to handle a control-suppressed event, one alternative is to attach handlers in code with `handledEventsToo` specified as `true`.</span></span> <span data-ttu-id="60961-120">Однако часто более простой способ изменить направление маршрутизации, обрабатывать события ввода эквивалентом предварительной версии.</span><span class="sxs-lookup"><span data-stu-id="60961-120">But often a simpler technique is to change the routing direction you handle to be the Preview equivalent of an input event.</span></span> <span data-ttu-id="60961-121">Например если элемент управления подавляет <xref:System.Windows.UIElement.MouseLeftButtonDown>, попробуйте присоединения обработчика для <xref:System.Windows.UIElement.PreviewMouseLeftButtonDown> вместо этого.</span><span class="sxs-lookup"><span data-stu-id="60961-121">For instance, if a control suppresses <xref:System.Windows.UIElement.MouseLeftButtonDown>, try attaching a handler for <xref:System.Windows.UIElement.PreviewMouseLeftButtonDown> instead.</span></span> <span data-ttu-id="60961-122">Этот метод подходит только для событий ввода базовых элементов например <xref:System.Windows.UIElement.MouseLeftButtonDown>.</span><span class="sxs-lookup"><span data-stu-id="60961-122">This technique only works for base element input events such as <xref:System.Windows.UIElement.MouseLeftButtonDown>.</span></span> <span data-ttu-id="60961-123">Эти входные события используют пары нисходящей и восходящей, вызовет оба события и совместно использовать данные события.</span><span class="sxs-lookup"><span data-stu-id="60961-123">These input events use tunnel/bubble pairs, raise both events, and share the event data.</span></span>  
  
 <span data-ttu-id="60961-124">Каждый из этих методов имеет побочные эффекты или ограничения.</span><span class="sxs-lookup"><span data-stu-id="60961-124">Each of these techniques has either side effects or limitations.</span></span> <span data-ttu-id="60961-125">Побочный эффект — обработка события предварительного просмотра является обработка события в этот момент может отключить обработчики, которые должны обрабатывать событие восходящей маршрутизации, что таким образом ограничение — это обычно не рекомендуется пометить событие как обработанное, хотя по-прежнему Previ новые возможности часть маршрута.</span><span class="sxs-lookup"><span data-stu-id="60961-125">The side effect of handling the Preview event is that handling the event at that point might disable handlers that expect to handle the bubbling event, and therefore the limitation is that it is usually not a good idea to mark the event handled while it is still on the Preview part of the route.</span></span> <span data-ttu-id="60961-126">Ограничение `handledEventsToo` бывает, что нельзя указать `handledEventsToo` обработчик в [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] как атрибут, необходимо зарегистрировать обработчик событий в коде после получения ссылку на элемент, где должен быть связан обработчик.</span><span class="sxs-lookup"><span data-stu-id="60961-126">The limitation of the `handledEventsToo` technique is that you cannot specify a `handledEventsToo` handler in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] as an attribute, you must register the event handler in code after obtaining an object reference to the element where the handler is to be attached.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="60961-127">См. также</span><span class="sxs-lookup"><span data-stu-id="60961-127">See also</span></span>

- [<span data-ttu-id="60961-128">Маркировка перенаправленных событий как обработанных и обработка классов</span><span class="sxs-lookup"><span data-stu-id="60961-128">Marking Routed Events as Handled, and Class Handling</span></span>](marking-routed-events-as-handled-and-class-handling.md)
- [<span data-ttu-id="60961-129">Общие сведения о перенаправленных событиях</span><span class="sxs-lookup"><span data-stu-id="60961-129">Routed Events Overview</span></span>](routed-events-overview.md)
