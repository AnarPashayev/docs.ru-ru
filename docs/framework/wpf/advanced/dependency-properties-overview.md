---
title: Общие сведения о свойствах зависимости
description: Свойство, поддерживаемое системой свойств WPF, называется свойством зависимостей. В этом обзоре описывается система свойств WPF и возможности свойства зависимостей.
ms.date: 06/06/2018
dev_langs:
- csharp
- vb
helpviewer_keywords:
- properties [WPF], attached
- properties [WPF], overview
- styles [WPF]
- attached properties [WPF]
- data binding [WPF]
- dependency properties [WPF]
- resources [WPF], references to
ms.assetid: d119d00c-3afb-48d6-87a0-c4da4f83dee5
ms.openlocfilehash: 443ea9ad56d13d26191231104ce3998b2691fc34
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2019
ms.locfileid: "59188647"
---
# <a name="dependency-properties-overview"></a><span data-ttu-id="31fb0-104">Общие сведения о свойствах зависимости</span><span class="sxs-lookup"><span data-stu-id="31fb0-104">Dependency properties overview</span></span>

<span data-ttu-id="31fb0-105">Windows Presentation Foundation (WPF) предоставляет набор служб, которые можно использовать для расширения функциональных возможностей [свойства](../../../standard/base-types/common-type-system.md#Properties).</span><span class="sxs-lookup"><span data-stu-id="31fb0-105">Windows Presentation Foundation (WPF) provides a set of services that can be used to extend the functionality of a type's [property](../../../standard/base-types/common-type-system.md#Properties).</span></span> <span data-ttu-id="31fb0-106">В совокупности эти службы обычно называются системой свойств WPF.</span><span class="sxs-lookup"><span data-stu-id="31fb0-106">Collectively, these services are typically referred to as the WPF property system.</span></span> <span data-ttu-id="31fb0-107">Свойство, поддерживаемое системой свойств WPF, называется свойством зависимостей.</span><span class="sxs-lookup"><span data-stu-id="31fb0-107">A property that is backed by the WPF property system is known as a dependency property.</span></span> <span data-ttu-id="31fb0-108">В этом обзоре описывается система свойств WPF и возможности свойства зависимостей.</span><span class="sxs-lookup"><span data-stu-id="31fb0-108">This overview describes the WPF property system and the capabilities of a dependency property.</span></span> <span data-ttu-id="31fb0-109">В обзоре также описывается использование существующих свойств зависимостей в языке XAML и коде.</span><span class="sxs-lookup"><span data-stu-id="31fb0-109">This includes how to use existing dependency properties in XAML and in code.</span></span> <span data-ttu-id="31fb0-110">Кроме того, в обзоре представлены общие сведения о специальных аспектах свойств зависимостей, таких как метаданные свойств зависимостей и способы создания собственного свойства зависимостей в пользовательском классе.</span><span class="sxs-lookup"><span data-stu-id="31fb0-110">This overview also introduces specialized aspects of dependency properties, such as dependency property metadata, and how to create your own dependency property in a custom class.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="31fb0-111">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="31fb0-111">Prerequisites</span></span>
<span data-ttu-id="31fb0-112">В этом разделе предполагается, что у вас есть базовые знания о системе типа .NET и объектно-ориентированном программировании.</span><span class="sxs-lookup"><span data-stu-id="31fb0-112">This topic assumes that you have some basic knowledge of the .NET type system and object-oriented programming.</span></span> <span data-ttu-id="31fb0-113">Чтобы выполнить примеры в этом разделе, следует также иметь представление о XAML и написании простых приложений WPF.</span><span class="sxs-lookup"><span data-stu-id="31fb0-113">In order to follow the examples in this topic, you should also understand XAML and know how to write WPF applications.</span></span> <span data-ttu-id="31fb0-114">Дополнительные сведения см. в разделе [Пошаговое руководство: Создание первого классического приложения WPF](../getting-started/walkthrough-my-first-wpf-desktop-application.md).</span><span class="sxs-lookup"><span data-stu-id="31fb0-114">For more information, see [Walkthrough: My first WPF desktop application](../getting-started/walkthrough-my-first-wpf-desktop-application.md).</span></span>  
  
## <a name="dependency-properties-and-clr-properties"></a><span data-ttu-id="31fb0-115">Свойства зависимостей и свойства CLR</span><span class="sxs-lookup"><span data-stu-id="31fb0-115">Dependency properties and CLR properties</span></span>
 <span data-ttu-id="31fb0-116">В WPF свойства обычно представляются как стандартные [свойства](../../../standard/base-types/common-type-system.md#Properties) .NET.</span><span class="sxs-lookup"><span data-stu-id="31fb0-116">In WPF, properties are typically exposed as standard .NET [properties](../../../standard/base-types/common-type-system.md#Properties).</span></span> <span data-ttu-id="31fb0-117">На базовом уровне можно взаимодействовать с этими свойствами непосредственно и не знать, что они реализуются как свойства зависимостей.</span><span class="sxs-lookup"><span data-stu-id="31fb0-117">At a basic level, you could interact with these properties directly and never know that they are implemented as a dependency property.</span></span> <span data-ttu-id="31fb0-118">Тем не менее настоятельно рекомендуется ознакомиться с некоторыми, а лучше со всеми, функциями системы свойств WPF, чтобы воспользоваться преимуществами этих функций.</span><span class="sxs-lookup"><span data-stu-id="31fb0-118">However, you should become familiar with some or all of the features of the WPF property system, so that you can take advantage of these features.</span></span>

<span data-ttu-id="31fb0-119">Свойства зависимостей предназначены для предоставления способа вычисления значения свойства по значениям других входных данных.</span><span class="sxs-lookup"><span data-stu-id="31fb0-119">The purpose of dependency properties is to provide a way to compute the value of a property based on the value of other inputs.</span></span> <span data-ttu-id="31fb0-120">Эти входные данные могут включать в себя системные свойства, такие как темы и пользовательские параметры, JIT-механизмы определения свойств, такие как привязка данных и анимации (раскадровки), шаблоны многократного использования, например ресурсы и стили, а также значения, известные благодаря отношениям между родительскими и дочерними элементами с другими элементами в дереве.</span><span class="sxs-lookup"><span data-stu-id="31fb0-120">These other inputs might include system properties such as themes and user preference, just-in-time property determination mechanisms such as data binding and animations/storyboards, multiple-use templates such as resources and styles, or values known through parent-child relationships with other elements in the element tree.</span></span> <span data-ttu-id="31fb0-121">Кроме того, свойство зависимостей может быть реализовано для обеспечения автономной проверки, значений по умолчанию, обратных вызовов, отслеживающих изменения других свойств, и системы, которая может приводить значения свойств на основе информации потенциальной среды выполнения.</span><span class="sxs-lookup"><span data-stu-id="31fb0-121">In addition, a dependency property can be implemented to provide self-contained validation, default values, callbacks that monitor changes to other properties, and a system that can coerce property values based on potentially runtime information.</span></span> <span data-ttu-id="31fb0-122">Производные классы также могут изменять некоторые специфические характеристики существующего свойства путем переопределения метаданных свойства зависимостей вместо того, чтобы переопределять фактические реализации существующих свойств или создавать новые свойства.</span><span class="sxs-lookup"><span data-stu-id="31fb0-122">Derived classes can also change some specific characteristics of an existing property by overriding dependency property metadata, rather than overriding the actual implementation of existing properties or creating new properties.</span></span>

<span data-ttu-id="31fb0-123">В справочнике по SDK можно определить, что это свойство является свойством зависимостей по наличию раздела сведений о свойстве зависимостей на странице управляемой ссылки для этого свойства.</span><span class="sxs-lookup"><span data-stu-id="31fb0-123">In the SDK reference, you can identify which property is a dependency property by the presence of the Dependency Property Information section on the managed reference page for that property.</span></span> <span data-ttu-id="31fb0-124">В разделе сведений о свойстве зависимостей есть ссылка на идентификатор поля для этого свойства зависимостей <xref:System.Windows.DependencyProperty>, список параметров метаданных, заданных для этого свойства, информацию по переопределению для каждого класса и другие сведения.</span><span class="sxs-lookup"><span data-stu-id="31fb0-124">The Dependency Property Information section includes a link to the <xref:System.Windows.DependencyProperty> identifier field for that dependency property, and also includes a list of the metadata options that are set for that property, per-class override information, and other details.</span></span>

## <a name="dependency-properties-back-clr-properties"></a><span data-ttu-id="31fb0-125">Свойства зависимостей поддерживают свойства CLR</span><span class="sxs-lookup"><span data-stu-id="31fb0-125">Dependency properties back CLR properties</span></span>
<span data-ttu-id="31fb0-126">Свойства зависимостей и система свойств WPF расширяют функциональные возможности свойства, предоставляя тип, который поддерживает свойство, в качестве альтернативной реализации для стандартного способа обеспечения свойства с помощью закрытого поля.</span><span class="sxs-lookup"><span data-stu-id="31fb0-126">Dependency properties and the WPF property system extend property functionality by providing a type that backs a property, as an alternative implementation to the standard pattern of backing the property with a private field.</span></span> <span data-ttu-id="31fb0-127">Имя этого типа — <xref:System.Windows.DependencyProperty>.</span><span class="sxs-lookup"><span data-stu-id="31fb0-127">The name of this type is <xref:System.Windows.DependencyProperty>.</span></span> <span data-ttu-id="31fb0-128">Другим важным типом, который определяет систему свойств WPF, является <xref:System.Windows.DependencyObject>.</span><span class="sxs-lookup"><span data-stu-id="31fb0-128">The other important type that defines the WPF property system is <xref:System.Windows.DependencyObject>.</span></span> <span data-ttu-id="31fb0-129">Тип <xref:System.Windows.DependencyObject> определяет базовый класс для регистрации свойства зависимостей и использования в качестве его владельца.</span><span class="sxs-lookup"><span data-stu-id="31fb0-129"><xref:System.Windows.DependencyObject> defines the base class that can register and own a dependency property.</span></span>

<span data-ttu-id="31fb0-130">Далее перечислены термины, используемые для свойств зависимостей.</span><span class="sxs-lookup"><span data-stu-id="31fb0-130">The following lists the terminology that is used with dependency properties:</span></span>

- <span data-ttu-id="31fb0-131">**Свойства зависимостей:** Свойство, поддерживаемый <xref:System.Windows.DependencyProperty>.</span><span class="sxs-lookup"><span data-stu-id="31fb0-131">**Dependency property:** A property that is backed by a <xref:System.Windows.DependencyProperty>.</span></span>

- <span data-ttu-id="31fb0-132">**Идентификатор свойства зависимостей.** Объект <xref:System.Windows.DependencyProperty> экземпляр, который извлекается как возвращаемое значение при регистрации свойства зависимостей и затем сохраняется как статический член класса.</span><span class="sxs-lookup"><span data-stu-id="31fb0-132">**Dependency property identifier:** A <xref:System.Windows.DependencyProperty> instance, which is obtained as a return value when registering a dependency property, and then stored as a static member of a class.</span></span> <span data-ttu-id="31fb0-133">Этот идентификатор используется в качестве параметра для многих API, взаимодействующих с системой свойств WPF.</span><span class="sxs-lookup"><span data-stu-id="31fb0-133">This identifier is used as a parameter for many of the APIs that interact with the WPF property system.</span></span>

- <span data-ttu-id="31fb0-134">**CLR-«оболочка»:** Фактические реализации получения и задания для свойства.</span><span class="sxs-lookup"><span data-stu-id="31fb0-134">**CLR "wrapper":** The actual get and set implementations for the property.</span></span> <span data-ttu-id="31fb0-135">Эти реализации включают идентификатор свойства зависимостей, используя его в вызовах <xref:System.Windows.DependencyObject.GetValue%2A> и <xref:System.Windows.DependencyObject.SetValue%2A> и, таким образом, обеспечивая поддержку для свойства с помощью системы свойств WPF.</span><span class="sxs-lookup"><span data-stu-id="31fb0-135">These implementations incorporate the dependency property identifier by using it in the <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> calls, thus providing the backing for the property using the WPF property system.</span></span>

<span data-ttu-id="31fb0-136">В следующем примере определяется свойство зависимостей `IsSpinning` и демонстрируется связь между идентификатором <xref:System.Windows.DependencyProperty> и свойством, которое он поддерживает.</span><span class="sxs-lookup"><span data-stu-id="31fb0-136">The following example defines the `IsSpinning` dependency property, and shows the relationship of the <xref:System.Windows.DependencyProperty> identifier to the property that it backs.</span></span>

[!code-csharp[PropertiesOvwSupport#DPFormBasic](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page4.xaml.cs#dpformbasic)]
[!code-vb[PropertiesOvwSupport#DPFormBasic](~/samples/snippets/visualbasic/VS_Snippets_Wpf/PropertiesOvwSupport/visualbasic/page4.xaml.vb#dpformbasic)]  
  
<span data-ttu-id="31fb0-137">Соглашение об именовании свойства и его поддерживающего поля <xref:System.Windows.DependencyProperty> имеет важное значение.</span><span class="sxs-lookup"><span data-stu-id="31fb0-137">The naming convention of the property and its backing <xref:System.Windows.DependencyProperty> field is important.</span></span> <span data-ttu-id="31fb0-138">Имя поля всегда определяется как имя свойства с добавленным суффиксом `Property`.</span><span class="sxs-lookup"><span data-stu-id="31fb0-138">The name of the field is always the name of the property, with the suffix `Property` appended.</span></span> <span data-ttu-id="31fb0-139">Дополнительные сведения об этом соглашении и разъяснения по нему см. в разделе [Пользовательские свойства зависимостей](custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="31fb0-139">For more information about this convention and the reasons for it, see [Custom Dependency Properties](custom-dependency-properties.md).</span></span>  

## <a name="setting-property-values"></a><span data-ttu-id="31fb0-140">Задание значений свойств</span><span class="sxs-lookup"><span data-stu-id="31fb0-140">Setting property values</span></span>
<span data-ttu-id="31fb0-141">Свойства можно задать с помощью кода или XAML.</span><span class="sxs-lookup"><span data-stu-id="31fb0-141">You can set properties either in code or in XAML.</span></span>

### <a name="setting-property-values-in-xaml"></a><span data-ttu-id="31fb0-142">Задание значений свойств с помощью XAML</span><span class="sxs-lookup"><span data-stu-id="31fb0-142">Setting property values in XAML</span></span> 
<span data-ttu-id="31fb0-143">В следующем примере на XAML задается красный цвет фона кнопки.</span><span class="sxs-lookup"><span data-stu-id="31fb0-143">The following XAML example specifies the background color of a button as red.</span></span> <span data-ttu-id="31fb0-144">В этом примере показан случай, когда простое строковое значение атрибута на языке XAML преобразуется синтаксическим анализатором WPF XAML в тип WPF (<xref:System.Windows.Media.Color> посредством <xref:System.Windows.Media.SolidColorBrush>) в созданном коде.</span><span class="sxs-lookup"><span data-stu-id="31fb0-144">This example illustrates a case where the simple string value for a XAML attribute is type-converted by the WPF XAML parser into a WPF type (a <xref:System.Windows.Media.Color>, by way of a <xref:System.Windows.Media.SolidColorBrush>) in the generated code.</span></span>

[!code-xaml[PropertiesOvwSupport#MostBasicProperty](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/Page1.xaml#mostbasicproperty)]

<span data-ttu-id="31fb0-145">Язык XAML поддерживает различные синтаксические формы для задания свойств.</span><span class="sxs-lookup"><span data-stu-id="31fb0-145">XAML supports a variety of syntax forms for setting properties.</span></span> <span data-ttu-id="31fb0-146">Выбор синтаксиса для конкретного свойства зависит от типа значения, которое использует свойство, а также других факторов, например наличия преобразователя типов.</span><span class="sxs-lookup"><span data-stu-id="31fb0-146">Which syntax to use for a particular property will depend on the value type that a property uses, as well as other factors such as the presence of a type converter.</span></span> <span data-ttu-id="31fb0-147">Дополнительные сведения об использовании синтаксиса XAML для задания свойств см. в разделе [Общие сведения о XAML (WPF)](xaml-overview-wpf.md) и [Подробное описание синтаксиса XAML](xaml-syntax-in-detail.md).</span><span class="sxs-lookup"><span data-stu-id="31fb0-147">For more information on XAML syntax for property setting, see [XAML Overview (WPF)](xaml-overview-wpf.md) and [XAML Syntax In Detail](xaml-syntax-in-detail.md).</span></span>

<span data-ttu-id="31fb0-148">В следующем примере на языке XAML в качестве примера синтаксиса без атрибутов показан другой цвет фона кнопки.</span><span class="sxs-lookup"><span data-stu-id="31fb0-148">As an example of non-attribute syntax, the following XAML example shows another button background.</span></span> <span data-ttu-id="31fb0-149">Здесь вместо задания простой заливки цветом в качестве фона определяется изображение. Это делается с помощью элемента, представляющего изображение, и источника изображения, указанного как атрибут вложенного элемента.</span><span class="sxs-lookup"><span data-stu-id="31fb0-149">This time rather than setting a simple solid color, the background is set to an image, with an element representing that image and the source of that image specified as an attribute of the nested element.</span></span> <span data-ttu-id="31fb0-150">Это пример синтаксиса элемента свойства.</span><span class="sxs-lookup"><span data-stu-id="31fb0-150">This is an example of property element syntax.</span></span>

[!code-xaml[PropertiesOvwSupport#PESyntaxProperty](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/Page1.xaml#pesyntaxproperty)]

### <a name="setting-properties-in-code"></a><span data-ttu-id="31fb0-151">Задание свойств с помощью кода</span><span class="sxs-lookup"><span data-stu-id="31fb0-151">Setting properties in code</span></span>
 <span data-ttu-id="31fb0-152">Задание значений свойств зависимостей с помощью кода обычно представляет собой обращение к реализации метода установки, предоставленного "оболочкой" [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="31fb0-152">Setting dependency property values in code is typically just a call to the set implementation exposed by the [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] "wrapper".</span></span>

[!code-csharp[PropertiesOvwSupport#ProceduralPropertySet](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/Page1.xaml.cs#proceduralpropertyset)]
[!code-vb[PropertiesOvwSupport#ProceduralPropertySet](~/samples/snippets/visualbasic/VS_Snippets_Wpf/PropertiesOvwSupport/visualbasic/page1.xaml.vb#proceduralpropertyset)]

<span data-ttu-id="31fb0-153">Получение значения свойства также является фактически вызовом реализации метода получения, имеющегося в "оболочке":</span><span class="sxs-lookup"><span data-stu-id="31fb0-153">Getting a property value is also essentially a call to the get "wrapper" implementation:</span></span>

[!code-csharp[PropertiesOvwSupport#ProceduralPropertyGet](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/Page1.xaml.cs#proceduralpropertyget)]
 [!code-vb[PropertiesOvwSupport#ProceduralPropertyGet](~/samples/snippets/visualbasic/VS_Snippets_Wpf/PropertiesOvwSupport/visualbasic/page1.xaml.vb#proceduralpropertyget)]

<span data-ttu-id="31fb0-154">Систему свойств [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] <xref:System.Windows.DependencyObject.GetValue%2A> и <xref:System.Windows.DependencyObject.SetValue%2A> также можно вызывать напрямую.</span><span class="sxs-lookup"><span data-stu-id="31fb0-154">You can also call the property system [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> directly.</span></span> <span data-ttu-id="31fb0-155">Обычно в этом нет необходимости при использовании существующих свойств (оболочки более удобны и дают лучшее предоставление свойства для средств разработчика), но в некоторых сценариях удобнее использовать непосредственный вызов [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)].</span><span class="sxs-lookup"><span data-stu-id="31fb0-155">This is not typically necessary if you are using existing properties (the wrappers are more convenient, and provide better exposure of the property for developer tools), but calling the [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] directly is appropriate for certain scenarios.</span></span>

<span data-ttu-id="31fb0-156">Свойства можно задать на языке XAML, а затем использовать их в коде, с помощью кода программной части.</span><span class="sxs-lookup"><span data-stu-id="31fb0-156">Properties can be also set in XAML and then accessed later in code, through code-behind.</span></span> <span data-ttu-id="31fb0-157">Дополнительные сведения см. в разделе [Код программной части и XAML в WPF](code-behind-and-xaml-in-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="31fb0-157">For details, see [Code-Behind and XAML in WPF](code-behind-and-xaml-in-wpf.md).</span></span>

## <a name="property-functionality-provided-by-a-dependency-property"></a><span data-ttu-id="31fb0-158">Функциональные возможности свойства, предоставленные свойством зависимостей</span><span class="sxs-lookup"><span data-stu-id="31fb0-158">Property functionality provided by a dependency property</span></span>
<span data-ttu-id="31fb0-159">Свойство зависимостей предоставляет дополнительные функциональные возможности в сравнении с теми, которые предоставляются свойством, поддерживаемым полем.</span><span class="sxs-lookup"><span data-stu-id="31fb0-159">A dependency property provides functionality that extends the functionality of a property as opposed to a property that is backed by a field.</span></span> <span data-ttu-id="31fb0-160">Часто такая функция представляет или поддерживает одну из следующих возможностей:</span><span class="sxs-lookup"><span data-stu-id="31fb0-160">Often, such functionality represents or supports one of the following specific features:</span></span>

- [<span data-ttu-id="31fb0-161">Ресурсы</span><span class="sxs-lookup"><span data-stu-id="31fb0-161">Resources</span></span>](#resources)

- [<span data-ttu-id="31fb0-162">Привязка данных</span><span class="sxs-lookup"><span data-stu-id="31fb0-162">Data binding</span></span>](#data-binding)

- [<span data-ttu-id="31fb0-163">Стили</span><span class="sxs-lookup"><span data-stu-id="31fb0-163">Styles</span></span>](#styles)

- [<span data-ttu-id="31fb0-164">Анимации</span><span class="sxs-lookup"><span data-stu-id="31fb0-164">Animations</span></span>](#animations)

- [<span data-ttu-id="31fb0-165">Переопределение метаданных</span><span class="sxs-lookup"><span data-stu-id="31fb0-165">Metadata overrides</span></span>](#metadata-overrides)

- [<span data-ttu-id="31fb0-166">Наследование значения свойства</span><span class="sxs-lookup"><span data-stu-id="31fb0-166">Property value inheritance</span></span>](#property-value-inheritance)

- [<span data-ttu-id="31fb0-167">Интеграция конструктора WPF</span><span class="sxs-lookup"><span data-stu-id="31fb0-167">WPF Designer integration</span></span>](#wpf-designer-integration)

### <a name="resources"></a><span data-ttu-id="31fb0-168">Ресурсы</span><span class="sxs-lookup"><span data-stu-id="31fb0-168">Resources</span></span>
<span data-ttu-id="31fb0-169">Значение свойства зависимостей можно задать ссылкой на ресурс.</span><span class="sxs-lookup"><span data-stu-id="31fb0-169">A dependency property value can be set by referencing a resource.</span></span> <span data-ttu-id="31fb0-170">Ресурсы обычно указываются как значение свойства `Resources` корневого элемента страницы или приложения. (Эти расположения делают возможным наиболее удобный доступ к ресурсу.)</span><span class="sxs-lookup"><span data-stu-id="31fb0-170">Resources are typically specified as the `Resources` property value of a page root element, or of the application (these locations enable the most convenient access to the resource).</span></span> <span data-ttu-id="31fb0-171">В следующем примере показано, как определить ресурс <xref:System.Windows.Media.SolidColorBrush>.</span><span class="sxs-lookup"><span data-stu-id="31fb0-171">The following example shows how to define a <xref:System.Windows.Media.SolidColorBrush> resource.</span></span>

[!code-xaml[PropertiesOvwSupport#ResourcesResource](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page2.xaml#resourcesresource)]

<span data-ttu-id="31fb0-172">После определения ресурса можно ссылаться на него и использовать для предоставления значения свойства:</span><span class="sxs-lookup"><span data-stu-id="31fb0-172">Once the resource is defined, you can reference the resource and use it to provide a property value:</span></span>

[!code-xaml[PropertiesOvwSupport#ResourcesReference](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page2.xaml#resourcesreference)]

<span data-ttu-id="31fb0-173">Этот конкретный ресурс называется [Расширение разметки DynamicResource](dynamicresource-markup-extension.md) (в WPF XAML можно использовать статическую или динамическую ссылку на ресурс).</span><span class="sxs-lookup"><span data-stu-id="31fb0-173">This particular resource is referenced as a [DynamicResource Markup Extension](dynamicresource-markup-extension.md) (in WPF XAML, you can use either a static or dynamic resource reference).</span></span> <span data-ttu-id="31fb0-174">Чтобы использовать динамическую ссылку на ресурс, необходимо задать значение для свойства зависимостей. Это явное использование динамической ссылки на ресурс, разрешенное системой свойств WPF.</span><span class="sxs-lookup"><span data-stu-id="31fb0-174">To use a dynamic resource reference, you must be setting to a dependency property, so it is specifically the dynamic resource reference usage that is enabled by the WPF property system.</span></span> <span data-ttu-id="31fb0-175">Дополнительные сведения см. в разделе [Ресурсы XAML](xaml-resources.md).</span><span class="sxs-lookup"><span data-stu-id="31fb0-175">For more information, see [XAML Resources](xaml-resources.md).</span></span>

> [!NOTE]
> <span data-ttu-id="31fb0-176">Ресурсы считаются локальными значениями. Это означает, что если задается другое локальное значение, ссылка на ресурс удаляется.</span><span class="sxs-lookup"><span data-stu-id="31fb0-176">Resources are treated as a local value, which means that if you set another local value, you will eliminate the resource reference.</span></span> <span data-ttu-id="31fb0-177">Дополнительные сведения см. в разделе [Приоритет значений свойств зависимостей](dependency-property-value-precedence.md).</span><span class="sxs-lookup"><span data-stu-id="31fb0-177">For more information, see [Dependency Property Value Precedence](dependency-property-value-precedence.md).</span></span>

### <a name="data-binding"></a><span data-ttu-id="31fb0-178">Привязка данных</span><span class="sxs-lookup"><span data-stu-id="31fb0-178">Data binding</span></span>
<span data-ttu-id="31fb0-179">Свойства зависимостей могут ссылаться на значения через привязки данных.</span><span class="sxs-lookup"><span data-stu-id="31fb0-179">A dependency property can reference a value through data binding.</span></span> <span data-ttu-id="31fb0-180">Привязка данных использует специальный синтаксис расширения разметки на языке XAML или объект <xref:System.Windows.Data.Binding> в коде.</span><span class="sxs-lookup"><span data-stu-id="31fb0-180">Data binding works through a specific markup extension syntax in XAML, or the <xref:System.Windows.Data.Binding> object in code.</span></span> <span data-ttu-id="31fb0-181">Благодаря функции привязки данных определение окончательного значения свойства откладывается до времени выполнения. Затем значение извлекается из источника данных.</span><span class="sxs-lookup"><span data-stu-id="31fb0-181">With data binding, the final property value determination is deferred until run time, at which time the value is obtained from a data source.</span></span>

<span data-ttu-id="31fb0-182">В следующем примере свойство <xref:System.Windows.Controls.ContentControl.Content%2A> задается для <xref:System.Windows.Controls.Button> с помощью привязки, объявленной в XAML.</span><span class="sxs-lookup"><span data-stu-id="31fb0-182">The following example sets the <xref:System.Windows.Controls.ContentControl.Content%2A> property for a <xref:System.Windows.Controls.Button>, using a binding declared in XAML.</span></span> <span data-ttu-id="31fb0-183">Привязка использует наследуемый контекст данных и источник данных <xref:System.Windows.Data.XmlDataProvider> (не показан).</span><span class="sxs-lookup"><span data-stu-id="31fb0-183">The binding uses an inherited data context and an <xref:System.Windows.Data.XmlDataProvider> data source (not shown).</span></span> <span data-ttu-id="31fb0-184">Привязка сама определяет нужный источник с помощью свойства <xref:System.Windows.Data.Binding.XPath%2A> в источнике данных.</span><span class="sxs-lookup"><span data-stu-id="31fb0-184">The binding itself specifies the desired source property by <xref:System.Windows.Data.Binding.XPath%2A> within the data source.</span></span>

[!code-xaml[PropertiesOvwSupport#BasicInlineBinding](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page3.xaml#basicinlinebinding)]

> [!NOTE]
> <span data-ttu-id="31fb0-185">Привязки считаются локальными значениями. Это означает, что если задается другое локальное значение, привязка удаляется.</span><span class="sxs-lookup"><span data-stu-id="31fb0-185">Bindings are treated as a local value, which means that if you set another local value, you will eliminate the binding.</span></span> <span data-ttu-id="31fb0-186">Дополнительные сведения см. в разделе [Приоритет значений свойств зависимостей](dependency-property-value-precedence.md).</span><span class="sxs-lookup"><span data-stu-id="31fb0-186">For details, see [Dependency Property Value Precedence](dependency-property-value-precedence.md).</span></span>

<span data-ttu-id="31fb0-187">Для свойств зависимостей (или класса <xref:System.Windows.DependencyObject>) не предусмотрена собственная поддержка <xref:System.ComponentModel.INotifyPropertyChanged> для формирования уведомлений об изменениях в исходном значении свойства <xref:System.Windows.DependencyObject> для операций привязки данных.</span><span class="sxs-lookup"><span data-stu-id="31fb0-187">Dependency properties, or the <xref:System.Windows.DependencyObject> class, do not natively support <xref:System.ComponentModel.INotifyPropertyChanged> for purposes of producing notifications of changes in <xref:System.Windows.DependencyObject> source property value for data binding operations.</span></span> <span data-ttu-id="31fb0-188">Дополнительные сведения о создании свойств для использования в привязках данных, которые могут передавать сообщения об изменениях в целевой объект привязки данных, см. в разделе [Общие сведения о привязках данных](../data/data-binding-overview.md).</span><span class="sxs-lookup"><span data-stu-id="31fb0-188">For more information on how to create properties for use in data binding that can report changes to a data binding target, see [Data Binding Overview](../data/data-binding-overview.md).</span></span>

### <a name="styles"></a><span data-ttu-id="31fb0-189">Стили</span><span class="sxs-lookup"><span data-stu-id="31fb0-189">Styles</span></span>
<span data-ttu-id="31fb0-190">Существует два основных направления применения свойств зависимостей — стили и шаблоны.</span><span class="sxs-lookup"><span data-stu-id="31fb0-190">Styles and templates are two of the chief motivating scenarios for using dependency properties.</span></span> <span data-ttu-id="31fb0-191">Стили особенно полезны для настройки свойств, определяющих приложение [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)].</span><span class="sxs-lookup"><span data-stu-id="31fb0-191">Styles are particularly useful for setting properties that define application [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)].</span></span> <span data-ttu-id="31fb0-192">Обычно стили определяются в XAML в качестве ресурсов.</span><span class="sxs-lookup"><span data-stu-id="31fb0-192">Styles are typically defined as resources in XAML.</span></span> <span data-ttu-id="31fb0-193">Стили взаимодействуют с системой свойств, так как они обычно содержат код для задания значения конкретного свойства, а также "правила срабатывания", которые определяют изменение значения свойства в зависимости от значения другого свойства в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="31fb0-193">Styles interact with the property system because they typically contain "setters" for particular properties, as well as "triggers" that change a property value based on the real-time value for another property.</span></span>

<span data-ttu-id="31fb0-194">В следующем примере создается очень простой стиль, который будет определяться внутри словаря <xref:System.Windows.FrameworkElement.Resources%2A> (не показан). Затем этот стиль применяется непосредственно к свойству <xref:System.Windows.FrameworkElement.Style%2A> для <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="31fb0-194">The following example creates a very simple style (which would be defined inside a <xref:System.Windows.FrameworkElement.Resources%2A> dictionary, not shown), then applies that style directly to the <xref:System.Windows.FrameworkElement.Style%2A> property for a <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="31fb0-195">Метод задания в стиле задает для свойства <xref:System.Windows.Controls.Control.Background%2A> элемента управления <xref:System.Windows.Controls.Button> значение "зеленый".</span><span class="sxs-lookup"><span data-stu-id="31fb0-195">The setter within the style sets the <xref:System.Windows.Controls.Control.Background%2A> property for a styled <xref:System.Windows.Controls.Button> to green.</span></span>

[!code-xaml[PropertiesOvwSupport#SimpleStyleDef](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page3.xaml#simplestyledef)]

[!code-xaml[PropertiesOvwSupport#SimpleStyle](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page3.xaml#simplestyle)]

<span data-ttu-id="31fb0-196">Более подробную информацию см. в разделе [Стилизация и использование шаблонов](../controls/styling-and-templating.md).</span><span class="sxs-lookup"><span data-stu-id="31fb0-196">For more information, see [Styling and Templating](../controls/styling-and-templating.md).</span></span>

### <a name="animations"></a><span data-ttu-id="31fb0-197">Анимации</span><span class="sxs-lookup"><span data-stu-id="31fb0-197">Animations</span></span>
<span data-ttu-id="31fb0-198">Свойства зависимостей могут быть анимированы.</span><span class="sxs-lookup"><span data-stu-id="31fb0-198">Dependency properties can be animated.</span></span> <span data-ttu-id="31fb0-199">При выполнении анимации анимированное значение действует с более высоким приоритетом, чем любое другое значение (например, локальное значение), которое имелось бы у свойства.</span><span class="sxs-lookup"><span data-stu-id="31fb0-199">When an animation is applied and is running, the animated value operates at a higher precedence than any value (such as a local value) that the property otherwise has.</span></span>

<span data-ttu-id="31fb0-200">В следующем примере <xref:System.Windows.Controls.Control.Background%2A> анимируется для свойства <xref:System.Windows.Controls.Button> (с технической точки зрения <xref:System.Windows.Controls.Control.Background%2A> анимируется с помощью синтаксиса элемента свойства для указания пустого <xref:System.Windows.Media.SolidColorBrush> в качестве <xref:System.Windows.Controls.Control.Background%2A>, тогда свойство <xref:System.Windows.Media.SolidColorBrush.Color%2A> этого элемента <xref:System.Windows.Media.SolidColorBrush> — это свойство, которое непосредственно анимируется).</span><span class="sxs-lookup"><span data-stu-id="31fb0-200">The following example animates the <xref:System.Windows.Controls.Control.Background%2A> on a <xref:System.Windows.Controls.Button> property (technically, the <xref:System.Windows.Controls.Control.Background%2A> is animated by using property element syntax to specify a blank <xref:System.Windows.Media.SolidColorBrush> as the <xref:System.Windows.Controls.Control.Background%2A>, then the <xref:System.Windows.Media.SolidColorBrush.Color%2A> property of that <xref:System.Windows.Media.SolidColorBrush> is the property that is directly animated).</span></span>

[!code-xaml[PropertiesOvwSupport#MiniAnimate](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page3.xaml#minianimate)]

<span data-ttu-id="31fb0-201">Дополнительные сведения об анимации свойств см. в разделах [Общие сведения об анимации](../graphics-multimedia/animation-overview.md) и [Общие сведения о раскадровках](../graphics-multimedia/storyboards-overview.md).</span><span class="sxs-lookup"><span data-stu-id="31fb0-201">For more information on animating properties, see [Animation Overview](../graphics-multimedia/animation-overview.md) and [Storyboards Overview](../graphics-multimedia/storyboards-overview.md).</span></span>

### <a name="metadata-overrides"></a><span data-ttu-id="31fb0-202">Переопределения метаданных</span><span class="sxs-lookup"><span data-stu-id="31fb0-202">Metadata overrides</span></span>
<span data-ttu-id="31fb0-203">Правила взаимодействия свойства зависимостей можно изменять путем переопределения метаданных свойства при наследовании от класса, в котором это свойство зависимостей было изначально зарегистрировано.</span><span class="sxs-lookup"><span data-stu-id="31fb0-203">You can change certain behaviors of a dependency property by overriding the metadata for that property when you derive from the class that originally registers the dependency property.</span></span> <span data-ttu-id="31fb0-204">Переопределение метаданных зависит от идентификатора <xref:System.Windows.DependencyProperty>.</span><span class="sxs-lookup"><span data-stu-id="31fb0-204">Overriding metadata relies on the <xref:System.Windows.DependencyProperty> identifier.</span></span> <span data-ttu-id="31fb0-205">Переопределение метаданных не требует повторной реализации свойства.</span><span class="sxs-lookup"><span data-stu-id="31fb0-205">Overriding metadata does not require re-implementing the property.</span></span> <span data-ttu-id="31fb0-206">Изменение метаданных изначально обрабатывается системой свойств. Каждый класс потенциально содержит отдельные метаданные для всех свойств, которые наследуются от базовых классов, отдельно по каждому типу.</span><span class="sxs-lookup"><span data-stu-id="31fb0-206">The metadata change is handled natively by the property system; each class potentially holds individual metadata for all properties that are inherited from base classes, on a per-type basis.</span></span>

<span data-ttu-id="31fb0-207">В следующем примере метаданные переопределяются для свойства зависимостей <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A>.</span><span class="sxs-lookup"><span data-stu-id="31fb0-207">The following example overrides metadata for a dependency property <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A>.</span></span> <span data-ttu-id="31fb0-208">Переопределение метаданных этого конкретного свойства зависимостей включено в состав шаблона реализации, с помощью которого создаются элементы управления, которые могут использовать стили, заданные по умолчанию в темах.</span><span class="sxs-lookup"><span data-stu-id="31fb0-208">Overriding this particular dependency property metadata is part of an implementation pattern that creates controls that can use default styles from themes.</span></span>

[!code-csharp[PropertiesOvwSupport#OverrideMetadata](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page3.xaml.cs#overridemetadata)]
[!code-vb[PropertiesOvwSupport#OverrideMetadata](~/samples/snippets/visualbasic/VS_Snippets_Wpf/PropertiesOvwSupport/visualbasic/page3.xaml.vb#overridemetadata)]

<span data-ttu-id="31fb0-209">Дополнительные сведения о переопределении и получении метаданных свойства см. в разделе [Метаданные свойств зависимостей](dependency-property-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="31fb0-209">For more information about overriding or obtaining property metadata, see [Dependency Property Metadata](dependency-property-metadata.md).</span></span>

### <a name="property-value-inheritance"></a><span data-ttu-id="31fb0-210">Наследование значения свойства</span><span class="sxs-lookup"><span data-stu-id="31fb0-210">Property value inheritance</span></span>
<span data-ttu-id="31fb0-211">Элемент может наследовать значение свойства зависимостей от своего родительского элемента в дереве объектов.</span><span class="sxs-lookup"><span data-stu-id="31fb0-211">An element can inherit the value of a dependency property from its parent in the object tree.</span></span>

> [!NOTE]
> <span data-ttu-id="31fb0-212">Наследование значений свойств не включено глобально для всех свойств зависимостей, потому что выполнение вычислений при наследовании отрицательно сказывается на производительности.</span><span class="sxs-lookup"><span data-stu-id="31fb0-212">Property value inheritance behavior is not globally enabled for all dependency properties, because the calculation time for inheritance does have some performance impact.</span></span> <span data-ttu-id="31fb0-213">Наследование значений свойств обычно включается только для тех свойств, для которых в конкретном сценарии предполагается, что это наследование является оправданным.</span><span class="sxs-lookup"><span data-stu-id="31fb0-213">Property value inheritance is typically only enabled for properties where a particular scenario suggests that property value inheritance is appropriate.</span></span> <span data-ttu-id="31fb0-214">Определить, наследуется ли данное свойство зависимостей, можно, просмотрев раздел **Сведения о свойствах зависимостей** для этого свойства в справочнике по SDK.</span><span class="sxs-lookup"><span data-stu-id="31fb0-214">You can determine whether a dependency property inherits by looking at the **Dependency Property Information** section for that dependency property in the SDK reference.</span></span>

<span data-ttu-id="31fb0-215">В следующем примере показано, как для привязки задается свойство <xref:System.Windows.FrameworkElement.DataContext%2A>, указывающее источник привязки, который не был показан в предыдущем примере.</span><span class="sxs-lookup"><span data-stu-id="31fb0-215">The following example shows a binding, and sets the <xref:System.Windows.FrameworkElement.DataContext%2A> property that specifies the source of the binding, which was not shown in the earlier binding example.</span></span> <span data-ttu-id="31fb0-216">Все последующие привязки в дочерних объектах не должны указывать источник: они могут использовать унаследованное значение из <xref:System.Windows.FrameworkElement.DataContext%2A> в родительском объекте <xref:System.Windows.Controls.StackPanel>.</span><span class="sxs-lookup"><span data-stu-id="31fb0-216">Any subsequent bindings in child objects do not need to specify the source, they can use the inherited value from <xref:System.Windows.FrameworkElement.DataContext%2A> in the parent <xref:System.Windows.Controls.StackPanel> object.</span></span> <span data-ttu-id="31fb0-217">(Кроме того, вместо этого дочерний объект может напрямую указывать свой собственный контекст <xref:System.Windows.FrameworkElement.DataContext%2A> или <xref:System.Windows.Data.Binding.Source%2A> в <xref:System.Windows.Data.Binding> и намеренно не использовать унаследованное значение для контекста данных своих привязок.)</span><span class="sxs-lookup"><span data-stu-id="31fb0-217">(Alternatively, a child object could instead choose to directly specify its own <xref:System.Windows.FrameworkElement.DataContext%2A> or a <xref:System.Windows.Data.Binding.Source%2A> in the <xref:System.Windows.Data.Binding>, and to deliberately not use the inherited value for data context of its bindings.)</span></span>

[!code-xaml[PropertiesOvwSupport#InheritanceContext](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page3.xaml#inheritancecontext)]

<span data-ttu-id="31fb0-218">Дополнительные сведения см. в разделе [Наследование значения свойства](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="31fb0-218">For more information, see [Property Value Inheritance](property-value-inheritance.md).</span></span>

### <a name="wpf-designer-integration"></a><span data-ttu-id="31fb0-219">Интеграция конструктора WPF</span><span class="sxs-lookup"><span data-stu-id="31fb0-219">WPF designer integration</span></span>
<span data-ttu-id="31fb0-220">Пользовательский элемент управления со свойствами, которые реализуются как свойства зависимостей, получает соответствующую поддержку [!INCLUDE[wpfdesigner_current_long](../../../../includes/wpfdesigner-current-long-md.md)].</span><span class="sxs-lookup"><span data-stu-id="31fb0-220">A custom control with properties that are implemented as dependency properties will receive appropriate [!INCLUDE[wpfdesigner_current_long](../../../../includes/wpfdesigner-current-long-md.md)] support.</span></span> <span data-ttu-id="31fb0-221">Один из примеров этого — возможность редактирования прямых и присоединенных свойств зависимостей с помощью окна **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="31fb0-221">One example is the ability to edit direct and attached dependency properties with the **Properties** window.</span></span> <span data-ttu-id="31fb0-222">Дополнительные сведения см. в разделе [Общие сведения о разработке элементов управления](../controls/control-authoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="31fb0-222">For more information, see [Control Authoring Overview](../controls/control-authoring-overview.md).</span></span>

## <a name="dependency-property-value-precedence"></a><span data-ttu-id="31fb0-223">Приоритет значения свойств зависимостей</span><span class="sxs-lookup"><span data-stu-id="31fb0-223">Dependency property value precedence</span></span>
<span data-ttu-id="31fb0-224">Получая значение свойства зависимостей, вы, вероятно, получаете значение, которое было установлено для этого свойства с использованием какого-либо другого свойства, дающего входное значение и участвующего в системе свойств WPF.</span><span class="sxs-lookup"><span data-stu-id="31fb0-224">When you get the value of a dependency property, you are potentially obtaining a value that was set on that property through any one of the other property-based inputs that participate in the WPF property system.</span></span> <span data-ttu-id="31fb0-225">Для значений свойств зависимостей установлена система приоритетов, благодаря чему различные сценарии получения свойствами своих значений могут выполняться вполне предсказуемо.</span><span class="sxs-lookup"><span data-stu-id="31fb0-225">Dependency property value precedence exists so that a variety of scenarios for how properties obtain their values can interact in a predictable way.</span></span>

<span data-ttu-id="31fb0-226">Рассмотрим следующий пример.</span><span class="sxs-lookup"><span data-stu-id="31fb0-226">Consider the following example.</span></span> <span data-ttu-id="31fb0-227">В примере представлен стиль, применяемый ко всем кнопкам и их свойствам <xref:System.Windows.Controls.Control.Background%2A>, однако также указывается одна кнопка с локально заданным значением <xref:System.Windows.Controls.Control.Background%2A>.</span><span class="sxs-lookup"><span data-stu-id="31fb0-227">The example includes a style that applies to all buttons and their <xref:System.Windows.Controls.Control.Background%2A> properties, but then also specifies one button with a locally set <xref:System.Windows.Controls.Control.Background%2A> value.</span></span>

> [!NOTE]
> <span data-ttu-id="31fb0-228">В документации по SDK при описании свойств зависимостей используется термин "локальное значение" или иногда "локально заданное значение".</span><span class="sxs-lookup"><span data-stu-id="31fb0-228">The SDK documentation uses the terms "local value" or "locally set value" occasionally when discussing dependency properties.</span></span> <span data-ttu-id="31fb0-229">Локально заданное значение — это значение свойства, которое задается непосредственно для экземпляра объекта в коде или как атрибут элемента на языке XAML.</span><span class="sxs-lookup"><span data-stu-id="31fb0-229">A locally set value is a property value that is set directly on an object instance in code, or as an attribute on an element in XAML.</span></span>  
  
<span data-ttu-id="31fb0-230">Фактически для первой кнопки свойство задано дважды, но применяется только одно значение, то, у которого наивысший приоритет.</span><span class="sxs-lookup"><span data-stu-id="31fb0-230">In principle, for the first button, the property is set twice, but only one value applies: the value with the highest precedence.</span></span> <span data-ttu-id="31fb0-231">Локально заданное значение имеет наивысший приоритет (исключение — выполняющаяся анимация, но анимаций нет в этом примере), поэтому вместо значения цвета фона первой кнопки, определенного стилем, используется локально заданное значение.</span><span class="sxs-lookup"><span data-stu-id="31fb0-231">A locally set value has the highest precedence (except for a running animation, but no animation applies in this example) and thus the locally set value is used instead of the style setter value for the background on the first button.</span></span> <span data-ttu-id="31fb0-232">Для второй кнопки не задано локальное значение (или другое значение с более высоким приоритетом, чем у стиля), поэтому цвет фона для этой кнопки определяется стилем.</span><span class="sxs-lookup"><span data-stu-id="31fb0-232">The second button has no local value (and no other value with higher precedence than a style setter) and thus the background in that button comes from the style setter.</span></span>

[!code-xaml[PropertiesOvwSupport#MiniPrecedence](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page3.xaml#miniprecedence)]  

### <a name="why-does-dependency-property-precedence-exist"></a><span data-ttu-id="31fb0-233">Для чего нужны приоритеты свойств зависимостей?</span><span class="sxs-lookup"><span data-stu-id="31fb0-233">Why does dependency property precedence exist?</span></span>
<span data-ttu-id="31fb0-234">Обычно не требуется постоянное применение стиля, переопределяющее локально заданные значения отдельных элементов (в противном случае было бы вообще очень сложно использовать стили и элементы).</span><span class="sxs-lookup"><span data-stu-id="31fb0-234">Typically, you would not want styles to always apply and to obscure even a locally set value of an individual element (otherwise, it would be very difficult to use either styles or elements in general).</span></span> <span data-ttu-id="31fb0-235">Поэтому значения, определяемые стилем, имеют более низкий приоритет, чем локально заданные значения.</span><span class="sxs-lookup"><span data-stu-id="31fb0-235">Therefore, the values that come from styles operate at a lower precedent than a locally set value.</span></span> <span data-ttu-id="31fb0-236">Более полный список свойств зависимостей и порядок определения их действующих значений см. в разделе [Приоритет значений свойств зависимостей](dependency-property-value-precedence.md).</span><span class="sxs-lookup"><span data-stu-id="31fb0-236">For a more thorough listing of dependency properties and where a dependency property effective value might come from, see [Dependency Property Value Precedence](dependency-property-value-precedence.md).</span></span>

> [!NOTE]
> <span data-ttu-id="31fb0-237">Не все свойства, определенные для элементов WPF, являются свойствами зависимостей.</span><span class="sxs-lookup"><span data-stu-id="31fb0-237">There are a number of properties defined on WPF elements that are not dependency properties.</span></span> <span data-ttu-id="31fb0-238">Как правило, свойства реализуются в виде свойств зависимостей только в тех случаях, когда возникает потребность поддерживать по крайней мере один из сценариев, реализуемых системой свойств (привязку данных, применение стилей, анимацию, поддержку значений по умолчанию, наследование, присоединенные свойства или проверку).</span><span class="sxs-lookup"><span data-stu-id="31fb0-238">By and large, properties were implemented as dependency properties only when there were needs to support at least one of the scenarios enabled by the property system: data binding, styling, animation, default value support, inheritance, attached properties, or invalidation.</span></span>

## <a name="learning-more-about-dependency-properties"></a><span data-ttu-id="31fb0-239">Дополнительные сведения о свойствах зависимостей</span><span class="sxs-lookup"><span data-stu-id="31fb0-239">Learning more about dependency properties</span></span>  

- <span data-ttu-id="31fb0-240">Присоединенное свойство — это тип свойства, поддерживающий специализированный синтаксис на языке XAML.</span><span class="sxs-lookup"><span data-stu-id="31fb0-240">An attached property is a type of property that supports a specialized syntax in XAML.</span></span> <span data-ttu-id="31fb0-241">Присоединенные свойства часто не имеют однозначного соответствия со свойствами [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] и не обязательно являются свойствами зависимостей.</span><span class="sxs-lookup"><span data-stu-id="31fb0-241">An attached property often does not have a 1:1 correspondence with a [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] property, and is not necessarily a dependency property.</span></span> <span data-ttu-id="31fb0-242">Обычным назначением присоединенного свойства является разрешение дочерним элементам передавать значения свойств родительским элементам, даже если это свойство не включено в список элементов класса обоих элементов — родительского и дочернего.</span><span class="sxs-lookup"><span data-stu-id="31fb0-242">The typical purpose of a attached property is to allow child elements to report property values to a parent element, even if the parent element and child element do not both possess that property as part of the class members listings.</span></span> <span data-ttu-id="31fb0-243">Как правило, требуется разрешить дочерним элементам уведомлять родительский элемент о том, как они должны быть представлены в [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] (пример см. в разделе <xref:System.Windows.Controls.DockPanel.Dock%2A> или <xref:System.Windows.Controls.Canvas.Left%2A>).</span><span class="sxs-lookup"><span data-stu-id="31fb0-243">One primary scenario is to enable child elements to inform the parent how they should be presented in [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]; for an example, see <xref:System.Windows.Controls.DockPanel.Dock%2A> or <xref:System.Windows.Controls.Canvas.Left%2A>.</span></span> <span data-ttu-id="31fb0-244">Дополнительные сведения см. в разделе [Общие сведения о присоединенных свойствах](attached-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="31fb0-244">For details, see [Attached Properties Overview](attached-properties-overview.md).</span></span>

- <span data-ttu-id="31fb0-245">У разработчиков компонентов и разработчиков приложений может возникнуть потребность в создании собственных свойств зависимостей для получения таких возможностей, как привязка данных, поддержка стилей, проверка и приведение данных.</span><span class="sxs-lookup"><span data-stu-id="31fb0-245">Component developers or application developers may wish to create their own dependency property, in order to enable capabilities such as data binding or styles support, or for invalidation and value coercion support.</span></span> <span data-ttu-id="31fb0-246">Дополнительные сведения см. в разделе [Пользовательские свойства зависимостей](custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="31fb0-246">For details, see [Custom Dependency Properties](custom-dependency-properties.md).</span></span>

- <span data-ttu-id="31fb0-247">Обычно свойства зависимостей определяются как открытые свойства, доступные или, по крайней мере, видимые любому вызывающему объекту, имеющему доступ к экземпляру.</span><span class="sxs-lookup"><span data-stu-id="31fb0-247">Dependency properties should generally be considered to be public properties, accessible or at least discoverable by any caller that has access to an instance.</span></span> <span data-ttu-id="31fb0-248">Дополнительные сведения см. в разделе [Безопасность свойств зависимостей](dependency-property-security.md).</span><span class="sxs-lookup"><span data-stu-id="31fb0-248">For more information, see [Dependency Property Security](dependency-property-security.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="31fb0-249">См. также</span><span class="sxs-lookup"><span data-stu-id="31fb0-249">See also</span></span>

- [<span data-ttu-id="31fb0-250">Пользовательские свойства зависимостей</span><span class="sxs-lookup"><span data-stu-id="31fb0-250">Custom Dependency Properties</span></span>](custom-dependency-properties.md)
- [<span data-ttu-id="31fb0-251">Свойства зависимости "только для чтения"</span><span class="sxs-lookup"><span data-stu-id="31fb0-251">Read-Only Dependency Properties</span></span>](read-only-dependency-properties.md)
- [<span data-ttu-id="31fb0-252">Общие сведения о языке XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="31fb0-252">XAML Overview (WPF)</span></span>](xaml-overview-wpf.md)
- [<span data-ttu-id="31fb0-253">Архитектура WPF</span><span class="sxs-lookup"><span data-stu-id="31fb0-253">WPF Architecture</span></span>](wpf-architecture.md)
