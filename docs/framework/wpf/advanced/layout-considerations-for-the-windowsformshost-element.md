---
title: Вопросы, связанные с макетом элемента WindowsFormsHost
ms.date: 03/30/2017
helpviewer_keywords:
- Windows Forms [WPF], interoperability with
- Windows Forms [WPF], WPF interoperation
- interoperability [WPF], Windows Forms
- WindowsFormsHost element layout considerations [WPF]
- dynamic layout [WPF interoperability]
- device-independent pixels
ms.assetid: 3c574597-bbde-440f-95cc-01371f1a5d9d
ms.openlocfilehash: 9f97639447284b792d52cf4aa25b81f584d7291a
ms.sourcegitcommit: 13e79efdbd589cad6b1de634f5d6b1262b12ab01
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/28/2020
ms.locfileid: "76787908"
---
# <a name="layout-considerations-for-the-windowsformshost-element"></a><span data-ttu-id="5addb-102">Вопросы, связанные с макетом элемента WindowsFormsHost</span><span class="sxs-lookup"><span data-stu-id="5addb-102">Layout Considerations for the WindowsFormsHost Element</span></span>
<span data-ttu-id="5addb-103">В этом разделе описано, как элемент <xref:System.Windows.Forms.Integration.WindowsFormsHost> взаимодействует с системой разметки [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5addb-103">This topic describes how the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element interacts with the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layout system.</span></span>  
  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="5addb-104">и Windows Forms поддерживают разную, но похожую логику для определения размеров и позиционирования элементов на форме или странице.</span><span class="sxs-lookup"><span data-stu-id="5addb-104">and Windows Forms support different, but similar, logic for sizing and positioning elements on a form or page.</span></span> <span data-ttu-id="5addb-105">При создании гибридного пользовательского интерфейса, размещающего элементы управления Windows Forms в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], элемент <xref:System.Windows.Forms.Integration.WindowsFormsHost> интегрирует две схемы макета.</span><span class="sxs-lookup"><span data-stu-id="5addb-105">When you create a hybrid user interface (UI) that hosts Windows Forms controls in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element integrates the two layout schemes.</span></span>  
  
## <a name="differences-in-layout-between-wpf-and-windows-forms"></a><span data-ttu-id="5addb-106">Различия в макете между WPF и Windows Forms</span><span class="sxs-lookup"><span data-stu-id="5addb-106">Differences in Layout Between WPF and Windows Forms</span></span>  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="5addb-107">использует макет, не зависящий от разрешения.</span><span class="sxs-lookup"><span data-stu-id="5addb-107">uses resolution-independent layout.</span></span> <span data-ttu-id="5addb-108">Все измерения макета [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] задаются с помощью *аппаратно-независимых пикселей*.</span><span class="sxs-lookup"><span data-stu-id="5addb-108">All [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layout dimensions are specified using *device-independent pixels*.</span></span> <span data-ttu-id="5addb-109">Аппаратно-независимый пиксель — это один девяносто-шестой дюйма в размере и не зависит от разрешения, поэтому вы получаете аналогичные результаты независимо от того, выполняется ли визуализация на мониторе с 72 dpi или на принтере 19 200-dpi.</span><span class="sxs-lookup"><span data-stu-id="5addb-109">A device-independent pixel is one ninety-sixth of an inch in size and resolution-independent, so you get similar results regardless of whether you are rendering to a 72-dpi monitor or a 19,200-dpi printer.</span></span>  
  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="5addb-110">также основано на *динамическом макете*.</span><span class="sxs-lookup"><span data-stu-id="5addb-110">is also based on *dynamic layout*.</span></span> <span data-ttu-id="5addb-111">Это означает, что элемент пользовательского интерфейса упорядочивает себя на форме или странице в соответствии с его содержимым, родительским контейнером макета и доступным размером экрана.</span><span class="sxs-lookup"><span data-stu-id="5addb-111">This means that a UI element arranges itself on a form or page according to its content, its parent layout container, and the available screen size.</span></span> <span data-ttu-id="5addb-112">Динамический макет упрощает локализацию, автоматически настраивая размер и положение элементов пользовательского интерфейса, когда строки, которые они содержат, изменили длину.</span><span class="sxs-lookup"><span data-stu-id="5addb-112">Dynamic layout facilitates localization by automatically adjusting the size and position of UI elements when the strings they contain change length.</span></span>  
  
 <span data-ttu-id="5addb-113">Макет в Windows Forms зависит от устройства и, скорее всего, является статическим.</span><span class="sxs-lookup"><span data-stu-id="5addb-113">Layout in Windows Forms is device-dependent and more likely to be static.</span></span> <span data-ttu-id="5addb-114">Как правило, Windows Forms элементы управления располагаются абсолютно на форме с использованием измерений, заданных в аппаратных пикселях.</span><span class="sxs-lookup"><span data-stu-id="5addb-114">Typically, Windows Forms controls are positioned absolutely on a form using dimensions specified in hardware pixels.</span></span> <span data-ttu-id="5addb-115">Однако Windows Forms поддерживает некоторые функции динамического макета, как показано в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="5addb-115">However, Windows Forms does support some dynamic layout features, as summarized in the following table.</span></span>  
  
|<span data-ttu-id="5addb-116">Функция макета</span><span class="sxs-lookup"><span data-stu-id="5addb-116">Layout feature</span></span>|<span data-ttu-id="5addb-117">Описание</span><span class="sxs-lookup"><span data-stu-id="5addb-117">Description</span></span>|  
|--------------------|-----------------|  
|<span data-ttu-id="5addb-118">Автоматическое изменение размера</span><span class="sxs-lookup"><span data-stu-id="5addb-118">Autosizing</span></span>|<span data-ttu-id="5addb-119">Некоторые Windows Forms элементы управления изменяют размер, чтобы правильно отображать их содержимое.</span><span class="sxs-lookup"><span data-stu-id="5addb-119">Some Windows Forms controls resize themselves to display their contents properly.</span></span> <span data-ttu-id="5addb-120">Дополнительные сведения см. в разделе [Общие сведения о свойстве AutoSize](../../winforms/controls/autosize-property-overview.md).</span><span class="sxs-lookup"><span data-stu-id="5addb-120">For more information, see [AutoSize Property Overview](../../winforms/controls/autosize-property-overview.md).</span></span>|  
|<span data-ttu-id="5addb-121">Привязка и закрепление</span><span class="sxs-lookup"><span data-stu-id="5addb-121">Anchoring and docking</span></span>|<span data-ttu-id="5addb-122">Элементы управления Windows Forms поддерживают размещение и изменение размера на основе родительского контейнера.</span><span class="sxs-lookup"><span data-stu-id="5addb-122">Windows Forms controls support positioning and sizing based on the parent container.</span></span> <span data-ttu-id="5addb-123">Дополнительные сведения см. в разделах <xref:System.Windows.Forms.Control.Anchor%2A?displayProperty=nameWithType> и <xref:System.Windows.Forms.Control.Dock%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="5addb-123">For more information, see <xref:System.Windows.Forms.Control.Anchor%2A?displayProperty=nameWithType> and <xref:System.Windows.Forms.Control.Dock%2A?displayProperty=nameWithType>.</span></span>|  
|<span data-ttu-id="5addb-124">Автомасштабирования</span><span class="sxs-lookup"><span data-stu-id="5addb-124">Autoscaling</span></span>|<span data-ttu-id="5addb-125">Размеры элементов управления контейнера и их дочерние элементы изменяются в зависимости от разрешения выходного устройства или размера (в пикселях) шрифта контейнера по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="5addb-125">Container controls resize themselves and their children based on the resolution of the output device or the size, in pixels, of the default container font.</span></span> <span data-ttu-id="5addb-126">Дополнительные сведения см. [в разделе Автоматическое масштабирование в Windows Forms](../../winforms/automatic-scaling-in-windows-forms.md).</span><span class="sxs-lookup"><span data-stu-id="5addb-126">For more information, see [Automatic Scaling in Windows Forms](../../winforms/automatic-scaling-in-windows-forms.md).</span></span>|  
|<span data-ttu-id="5addb-127">Контейнеры макета</span><span class="sxs-lookup"><span data-stu-id="5addb-127">Layout containers</span></span>|<span data-ttu-id="5addb-128">Элементы управления <xref:System.Windows.Forms.FlowLayoutPanel> и <xref:System.Windows.Forms.TableLayoutPanel> упорядочивают свои дочерние элементы управления и сами имеют свой размер в соответствии с их содержимым.</span><span class="sxs-lookup"><span data-stu-id="5addb-128">The <xref:System.Windows.Forms.FlowLayoutPanel> and <xref:System.Windows.Forms.TableLayoutPanel> controls arrange their child controls and size themselves according to their contents.</span></span>|  
  
## <a name="layout-limitations"></a><span data-ttu-id="5addb-129">Ограничения макета</span><span class="sxs-lookup"><span data-stu-id="5addb-129">Layout Limitations</span></span>  
 <span data-ttu-id="5addb-130">В общем случае Windows Forms элементы управления не могут масштабироваться и преобразовываться в экстенты, доступные в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5addb-130">In general, Windows Forms controls cannot be scaled and transformed to the extent possible in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="5addb-131">В следующем списке описаны известные ограничения, когда элемент <xref:System.Windows.Forms.Integration.WindowsFormsHost> пытается интегрировать его размещенный элемент управления Windows Forms в систему разметки [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5addb-131">The following list describes the known limitations when the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element attempts to integrate its hosted Windows Forms control into the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layout system.</span></span>  
  
- <span data-ttu-id="5addb-132">В некоторых случаях размеры элементов управления Windows Forms не могут изменяться или их размер можно изменять только до определенных размеров.</span><span class="sxs-lookup"><span data-stu-id="5addb-132">In some cases, Windows Forms controls cannot be resized, or can be sized only to specific dimensions.</span></span> <span data-ttu-id="5addb-133">Например, элемент управления Windows Forms <xref:System.Windows.Forms.ComboBox> поддерживает только одну высоту, которая определяется размером шрифта элемента управления.</span><span class="sxs-lookup"><span data-stu-id="5addb-133">For example, a Windows Forms <xref:System.Windows.Forms.ComboBox> control supports only a single height, which is defined by the control's font size.</span></span> <span data-ttu-id="5addb-134">В [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] динамическом макете, в котором элементы могут растягиваться вертикально, размещаемый элемент управления <xref:System.Windows.Forms.ComboBox> не будет растягиваться должным образом.</span><span class="sxs-lookup"><span data-stu-id="5addb-134">In a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] dynamic layout where elements can stretch vertically, a hosted <xref:System.Windows.Forms.ComboBox> control will not stretch as expected.</span></span>  
  
- <span data-ttu-id="5addb-135">Элементы управления Windows Forms нельзя поворачивать или расклонять.</span><span class="sxs-lookup"><span data-stu-id="5addb-135">Windows Forms controls cannot be rotated or skewed.</span></span> <span data-ttu-id="5addb-136">Элемент <xref:System.Windows.Forms.Integration.WindowsFormsHost> вызывает событие <xref:System.Windows.Forms.Integration.WindowsFormsHost.LayoutError>, если применяется преобразование «наклон» или «вращение».</span><span class="sxs-lookup"><span data-stu-id="5addb-136">The <xref:System.Windows.Forms.Integration.WindowsFormsHost> element raises the <xref:System.Windows.Forms.Integration.WindowsFormsHost.LayoutError> event if you apply a skew or rotation transformation.</span></span> <span data-ttu-id="5addb-137">Если событие <xref:System.Windows.Forms.Integration.WindowsFormsHost.LayoutError> не обрабатывается, возникает <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="5addb-137">If you do not handle the <xref:System.Windows.Forms.Integration.WindowsFormsHost.LayoutError> event, an <xref:System.InvalidOperationException> is raised.</span></span>  
  
- <span data-ttu-id="5addb-138">В большинстве случаев Windows Forms элементы управления не поддерживают пропорциональное масштабирование.</span><span class="sxs-lookup"><span data-stu-id="5addb-138">In most cases, Windows Forms controls do not support proportional scaling.</span></span> <span data-ttu-id="5addb-139">Несмотря на то, что общий размер элемента управления масштабируется, дочерние элементы управления и компоненты элемента управления могут изменять размеры не так, как ожидается.</span><span class="sxs-lookup"><span data-stu-id="5addb-139">Although the overall dimensions of the control will scale, child controls and component elements of the control may not resize as expected.</span></span> <span data-ttu-id="5addb-140">Это ограничение зависит от того, насколько хорошо каждый элемент управления Windows Forms поддерживает масштабирование.</span><span class="sxs-lookup"><span data-stu-id="5addb-140">This limitation depends on how well each Windows Forms control supports scaling.</span></span> <span data-ttu-id="5addb-141">Кроме того, нельзя масштабировать элементы управления Windows Forms вниз до размера 0 пикселей.</span><span class="sxs-lookup"><span data-stu-id="5addb-141">In addition, you cannot scale Windows Forms controls down to a size of 0 pixels.</span></span>  
  
- <span data-ttu-id="5addb-142">Windows Forms элементы управления поддерживают Автомасштабирование, при котором форма автоматически изменяет размер и элементы управления в зависимости от размера шрифта.</span><span class="sxs-lookup"><span data-stu-id="5addb-142">Windows Forms controls support autoscaling, in which the form will automatically resize itself and its controls based on the font size.</span></span> <span data-ttu-id="5addb-143">В пользовательском интерфейсе [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] изменение размера шрифта не влечет за собой изменение размера всего макета, хотя отдельные элементы могут динамически изменять размер.</span><span class="sxs-lookup"><span data-stu-id="5addb-143">In a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] user interface, changing the font size does not resize the entire layout, although individual elements may dynamically resize.</span></span>  
  
### <a name="z-order"></a><span data-ttu-id="5addb-144">Z-порядок</span><span class="sxs-lookup"><span data-stu-id="5addb-144">Z-order</span></span>  
 <span data-ttu-id="5addb-145">В пользовательском интерфейсе [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] можно изменить z-порядок элементов для контроля поведения перекрывания.</span><span class="sxs-lookup"><span data-stu-id="5addb-145">In a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] user interface, you can change the z-order of elements to control overlapping behavior.</span></span> <span data-ttu-id="5addb-146">Размещенный элемент управления Windows Forms рисуется в отдельном HWND, поэтому он всегда отображается поверх [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] элементов.</span><span class="sxs-lookup"><span data-stu-id="5addb-146">A hosted Windows Forms control is drawn in a separate HWND, so it is always drawn on top of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] elements.</span></span>  
  
 <span data-ttu-id="5addb-147">Размещенный элемент управления Windows Forms также рисуется поверх любого <xref:System.Windows.Documents.Adorner> элементов.</span><span class="sxs-lookup"><span data-stu-id="5addb-147">A hosted Windows Forms control is also drawn on top of any <xref:System.Windows.Documents.Adorner> elements.</span></span>  
  
## <a name="layout-behavior"></a><span data-ttu-id="5addb-148">Поведение макета</span><span class="sxs-lookup"><span data-stu-id="5addb-148">Layout Behavior</span></span>  
 <span data-ttu-id="5addb-149">В следующих разделах описываются конкретные аспекты поведения макета при размещении элементов управления Windows Forms в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5addb-149">The following sections describe specific aspects of layout behavior when hosting Windows Forms controls in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>  
  
### <a name="scaling-unit-conversion-and-device-independence"></a><span data-ttu-id="5addb-150">Масштабирование, преобразование единиц и независимость устройств</span><span class="sxs-lookup"><span data-stu-id="5addb-150">Scaling, Unit Conversion, and Device Independence</span></span>  
 <span data-ttu-id="5addb-151">Каждый раз, когда элемент <xref:System.Windows.Forms.Integration.WindowsFormsHost> выполняет операции с измерениями [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] и Windows Forms, участвуют две системы координат: аппаратно-независимые пиксели для [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] и аппаратных пикселей для Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="5addb-151">Whenever the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element performs operations involving [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and Windows Forms dimensions, two coordinate systems are involved: device-independent pixels for [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and hardware pixels for Windows Forms.</span></span> <span data-ttu-id="5addb-152">Поэтому необходимо применить соответствующие преобразования единиц и масштабирования для достижения согласованного макета.</span><span class="sxs-lookup"><span data-stu-id="5addb-152">Therefore, you must apply proper unit and scaling conversions to achieve a consistent layout.</span></span>  
  
 <span data-ttu-id="5addb-153">Преобразование между системами координат зависит от текущего разрешения устройства и любых преобразований макета или отрисовки, примененных к элементу <xref:System.Windows.Forms.Integration.WindowsFormsHost> или его предкам.</span><span class="sxs-lookup"><span data-stu-id="5addb-153">Conversion between the coordinate systems depends on the current device resolution and any layout or rendering transforms applied to the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element or to its ancestors.</span></span>  
  
 <span data-ttu-id="5addb-154">Если выходное устройство равно 96 dpi и к элементу <xref:System.Windows.Forms.Integration.WindowsFormsHost> не применено масштабирование, то один аппаратно-зависимый пиксель равен одному пикселю оборудования.</span><span class="sxs-lookup"><span data-stu-id="5addb-154">If the output device is 96 dpi and no scaling has been applied to the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element, one device-independent pixel is equal to one hardware pixel.</span></span>  
  
 <span data-ttu-id="5addb-155">Во всех остальных случаях требуется масштабирование системы координат.</span><span class="sxs-lookup"><span data-stu-id="5addb-155">All other cases require coordinate system scaling.</span></span> <span data-ttu-id="5addb-156">Размер размещенного элемента управления не изменяется.</span><span class="sxs-lookup"><span data-stu-id="5addb-156">The hosted control is not resized.</span></span> <span data-ttu-id="5addb-157">Вместо этого элемент <xref:System.Windows.Forms.Integration.WindowsFormsHost> пытается масштабировать размещаемый элемент управления и все его дочерние элементы управления.</span><span class="sxs-lookup"><span data-stu-id="5addb-157">Instead, the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element attempts to scale the hosted control and all of its child controls.</span></span> <span data-ttu-id="5addb-158">Поскольку Windows Forms не полностью поддерживает масштабирование, элемент <xref:System.Windows.Forms.Integration.WindowsFormsHost> масштабируется до степени, поддерживаемой определенными элементами управления.</span><span class="sxs-lookup"><span data-stu-id="5addb-158">Because Windows Forms does not fully support scaling, the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element scales to the degree supported by particular controls.</span></span>  
  
 <span data-ttu-id="5addb-159">Переопределите метод <xref:System.Windows.Forms.Integration.WindowsFormsHost.ScaleChild%2A>, чтобы обеспечить пользовательское поведение масштабирования для размещаемого элемента управления Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="5addb-159">Override the <xref:System.Windows.Forms.Integration.WindowsFormsHost.ScaleChild%2A> method to provide custom scaling behavior for the hosted Windows Forms control.</span></span>  
  
 <span data-ttu-id="5addb-160">Помимо масштабирования, элемент <xref:System.Windows.Forms.Integration.WindowsFormsHost> обрабатывает варианты округления и переполнения, как описано в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="5addb-160">In addition to scaling, the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element handles rounding and overflow cases as described in the following table.</span></span>  
  
|<span data-ttu-id="5addb-161">Проблемы с преобразованием</span><span class="sxs-lookup"><span data-stu-id="5addb-161">Conversion issue</span></span>|<span data-ttu-id="5addb-162">Описание</span><span class="sxs-lookup"><span data-stu-id="5addb-162">Description</span></span>|  
|----------------------|-----------------|  
|<span data-ttu-id="5addb-163">округление;</span><span class="sxs-lookup"><span data-stu-id="5addb-163">Rounding</span></span>|[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="5addb-164">измерения, независимые от устройства, задаются как `double`, а Windows Forms измерения пикселей оборудования задаются как `int`.</span><span class="sxs-lookup"><span data-stu-id="5addb-164">device-independent pixel dimensions are specified as `double`, and Windows Forms hardware pixel dimensions are specified as `int`.</span></span> <span data-ttu-id="5addb-165">В случаях, когда измерения на основе `double`преобразуются в измерения на основе `int`, элемент <xref:System.Windows.Forms.Integration.WindowsFormsHost> использует стандартное округление, чтобы дробные значения меньше 0,5 округлялись вниз до 0.</span><span class="sxs-lookup"><span data-stu-id="5addb-165">In cases where `double`-based dimensions are converted to `int`-based dimensions, the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element uses standard rounding, so that fractional values less than 0.5 are rounded down to 0.</span></span>|  
|<span data-ttu-id="5addb-166">Переполнение</span><span class="sxs-lookup"><span data-stu-id="5addb-166">Overflow</span></span>|<span data-ttu-id="5addb-167">Когда элемент <xref:System.Windows.Forms.Integration.WindowsFormsHost> преобразует из `double` значений в значения `int`, возможно переполнение.</span><span class="sxs-lookup"><span data-stu-id="5addb-167">When the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element converts from `double` values to `int` values, overflow is possible.</span></span> <span data-ttu-id="5addb-168">Значения, превышающие <xref:System.Int32.MaxValue>, задаются равными <xref:System.Int32.MaxValue>.</span><span class="sxs-lookup"><span data-stu-id="5addb-168">Values that are larger than <xref:System.Int32.MaxValue> are set to <xref:System.Int32.MaxValue>.</span></span>|  
  
### <a name="layout-related-properties"></a><span data-ttu-id="5addb-169">Свойства, связанные с макетом</span><span class="sxs-lookup"><span data-stu-id="5addb-169">Layout-related Properties</span></span>  
 <span data-ttu-id="5addb-170">Свойства, управляющие поведением макета в элементах управления Windows Forms и [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], соответствующим образом сопоставляются элементу <xref:System.Windows.Forms.Integration.WindowsFormsHost>.</span><span class="sxs-lookup"><span data-stu-id="5addb-170">Properties that control layout behavior in Windows Forms controls and [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] elements are mapped appropriately by the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element.</span></span> <span data-ttu-id="5addb-171">Дополнительные сведения см. в разделе [Сопоставление свойств Windows Forms и WPF](windows-forms-and-wpf-property-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="5addb-171">For more information, see [Windows Forms and WPF Property Mapping](windows-forms-and-wpf-property-mapping.md).</span></span>  
  
### <a name="layout-changes-in-the-hosted-control"></a><span data-ttu-id="5addb-172">Изменения макета в размещенном элементе управления</span><span class="sxs-lookup"><span data-stu-id="5addb-172">Layout Changes in the Hosted Control</span></span>  
 <span data-ttu-id="5addb-173">Изменения макета в размещенном элементе управления Windows Forms распространяются на [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] для активации обновлений макета.</span><span class="sxs-lookup"><span data-stu-id="5addb-173">Layout changes in the hosted Windows Forms control are propagated to [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] to trigger layout updates.</span></span> <span data-ttu-id="5addb-174">Метод <xref:System.Windows.UIElement.InvalidateMeasure%2A> на <xref:System.Windows.Forms.Integration.WindowsFormsHost> гарантирует, что изменения макета в размещенном элементе управления приведут к запуску обработчика разметки [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5addb-174">The <xref:System.Windows.UIElement.InvalidateMeasure%2A> method on <xref:System.Windows.Forms.Integration.WindowsFormsHost> ensures that layout changes in the hosted control cause the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layout engine to run.</span></span>  
  
### <a name="continuously-sized-windows-forms-controls"></a><span data-ttu-id="5addb-175">Постоянно изменяемые элементы управления Windows Forms</span><span class="sxs-lookup"><span data-stu-id="5addb-175">Continuously Sized Windows Forms Controls</span></span>  
 <span data-ttu-id="5addb-176">Windows Forms элементы управления, поддерживающие непрерывное масштабирование, полностью взаимодействуют с системой разметки [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5addb-176">Windows Forms controls that support continuous scaling fully interact with the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layout system.</span></span> <span data-ttu-id="5addb-177">Элемент <xref:System.Windows.Forms.Integration.WindowsFormsHost> использует методы <xref:System.Windows.FrameworkElement.MeasureOverride%2A> и <xref:System.Windows.FrameworkElement.ArrangeOverride%2A> как обычно для изменения размера и упорядочивания размещаемого элемента управления Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="5addb-177">The <xref:System.Windows.Forms.Integration.WindowsFormsHost> element uses the <xref:System.Windows.FrameworkElement.MeasureOverride%2A> and <xref:System.Windows.FrameworkElement.ArrangeOverride%2A> methods as usual to size and arrange the hosted Windows Forms control.</span></span>  
  
### <a name="sizing-algorithm"></a><span data-ttu-id="5addb-178">Алгоритм изменения размера</span><span class="sxs-lookup"><span data-stu-id="5addb-178">Sizing Algorithm</span></span>  
 <span data-ttu-id="5addb-179">Элемент <xref:System.Windows.Forms.Integration.WindowsFormsHost> использует следующую процедуру для изменения размера размещенного элемента управления:</span><span class="sxs-lookup"><span data-stu-id="5addb-179">The <xref:System.Windows.Forms.Integration.WindowsFormsHost> element uses the following procedure to size the hosted control:</span></span>  
  
1. <span data-ttu-id="5addb-180">Элемент <xref:System.Windows.Forms.Integration.WindowsFormsHost> переопределяет методы <xref:System.Windows.FrameworkElement.MeasureOverride%2A> и <xref:System.Windows.FrameworkElement.ArrangeOverride%2A>.</span><span class="sxs-lookup"><span data-stu-id="5addb-180">The <xref:System.Windows.Forms.Integration.WindowsFormsHost> element overrides the <xref:System.Windows.FrameworkElement.MeasureOverride%2A> and <xref:System.Windows.FrameworkElement.ArrangeOverride%2A> methods.</span></span>  
  
2. <span data-ttu-id="5addb-181">Чтобы определить размер размещаемого элемента управления, метод <xref:System.Windows.FrameworkElement.MeasureOverride%2A> вызывает метод <xref:System.Windows.Forms.Control.GetPreferredSize%2A> размещенного элемента управления с ограничением, переведенным из ограничения, переданного в метод <xref:System.Windows.FrameworkElement.MeasureOverride%2A>.</span><span class="sxs-lookup"><span data-stu-id="5addb-181">To determine the size of the hosted control, the <xref:System.Windows.FrameworkElement.MeasureOverride%2A> method calls the hosted control's <xref:System.Windows.Forms.Control.GetPreferredSize%2A> method with a constraint translated from the constraint passed to the <xref:System.Windows.FrameworkElement.MeasureOverride%2A> method.</span></span>  
  
3. <span data-ttu-id="5addb-182">Метод <xref:System.Windows.FrameworkElement.ArrangeOverride%2A> пытается задать для размещенного элемента управления указанное ограничение размера.</span><span class="sxs-lookup"><span data-stu-id="5addb-182">The <xref:System.Windows.FrameworkElement.ArrangeOverride%2A> method attempts to set the hosted control to the given size constraint.</span></span>  
  
4. <span data-ttu-id="5addb-183">Если свойство <xref:System.Windows.Forms.Control.Size%2A> размещенного элемента управления соответствует указанному ограничению, размер размещаемого элемента управления определяется ограничением.</span><span class="sxs-lookup"><span data-stu-id="5addb-183">If the hosted control's <xref:System.Windows.Forms.Control.Size%2A> property matches the specified constraint, the hosted control is sized to the constraint.</span></span>  
  
 <span data-ttu-id="5addb-184">Если свойство <xref:System.Windows.Forms.Control.Size%2A> не соответствует указанному ограничению, размещенный элемент управления не поддерживает непрерывное изменение размера.</span><span class="sxs-lookup"><span data-stu-id="5addb-184">If the <xref:System.Windows.Forms.Control.Size%2A> property does not match the specified constraint, the hosted control does not support continuous sizing.</span></span> <span data-ttu-id="5addb-185">Например, элемент управления <xref:System.Windows.Forms.MonthCalendar> допускает только дискретные размеры.</span><span class="sxs-lookup"><span data-stu-id="5addb-185">For example, the <xref:System.Windows.Forms.MonthCalendar> control allows only discrete sizes.</span></span> <span data-ttu-id="5addb-186">Допустимые размеры для этого элемента управления состоят из целых чисел (представляющих число месяцев) как для высоты, так и для ширины.</span><span class="sxs-lookup"><span data-stu-id="5addb-186">The permitted sizes for this control consist of integers (representing the number of months) for both height and width.</span></span> <span data-ttu-id="5addb-187">В таких случаях элемент <xref:System.Windows.Forms.Integration.WindowsFormsHost> ведет себя следующим образом:</span><span class="sxs-lookup"><span data-stu-id="5addb-187">In cases such as this, the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element behaves as follows:</span></span>  
  
- <span data-ttu-id="5addb-188">Если свойство <xref:System.Windows.Forms.Control.Size%2A> возвращает больший размер, чем указанное ограничение, элемент <xref:System.Windows.Forms.Integration.WindowsFormsHost> обрезает размещаемый элемент управления.</span><span class="sxs-lookup"><span data-stu-id="5addb-188">If the <xref:System.Windows.Forms.Control.Size%2A> property returns a larger size than the specified constraint, the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element clips the hosted control.</span></span> <span data-ttu-id="5addb-189">Высота и ширина обрабатываются отдельно, поэтому размещаемый элемент управления может быть обрезан в любом направлении.</span><span class="sxs-lookup"><span data-stu-id="5addb-189">Height and width are handled separately, so the hosted control may be clipped in either direction.</span></span>  
  
- <span data-ttu-id="5addb-190">Если свойство <xref:System.Windows.Forms.Control.Size%2A> возвращает меньший размер, чем указанное ограничение, <xref:System.Windows.Forms.Integration.WindowsFormsHost> принимает это значение размера и возвращает значение в систему макета [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5addb-190">If the <xref:System.Windows.Forms.Control.Size%2A> property returns a smaller size than the specified constraint, <xref:System.Windows.Forms.Integration.WindowsFormsHost> accepts this size value and returns the value to the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layout system.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5addb-191">См. также:</span><span class="sxs-lookup"><span data-stu-id="5addb-191">See also</span></span>

- <xref:System.Windows.Forms.Integration.ElementHost>
- <xref:System.Windows.Forms.Integration.WindowsFormsHost>
- [<span data-ttu-id="5addb-192">Пошаговое руководство. Упорядочение элементов управления Windows Forms в приложении WPF</span><span class="sxs-lookup"><span data-stu-id="5addb-192">Walkthrough: Arranging Windows Forms Controls in WPF</span></span>](walkthrough-arranging-windows-forms-controls-in-wpf.md)
- [<span data-ttu-id="5addb-193">Пример упорядочивания элементов управления Windows Forms в WPF</span><span class="sxs-lookup"><span data-stu-id="5addb-193">Arranging Windows Forms Controls in WPF Sample</span></span>](https://go.microsoft.com/fwlink/?LinkID=159971)
- [<span data-ttu-id="5addb-194">Сопоставление свойств Windows Forms и WPF</span><span class="sxs-lookup"><span data-stu-id="5addb-194">Windows Forms and WPF Property Mapping</span></span>](windows-forms-and-wpf-property-mapping.md)
- [<span data-ttu-id="5addb-195">Миграция и взаимодействие систем</span><span class="sxs-lookup"><span data-stu-id="5addb-195">Migration and Interoperability</span></span>](migration-and-interoperability.md)
