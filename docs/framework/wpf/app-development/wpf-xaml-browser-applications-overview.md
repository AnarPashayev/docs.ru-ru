---
title: Общие сведения о приложениях браузера XAML
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- XBAP [WPF], XAML browser application
- WPF XAML browser applications (XBAP)
- XAML browser applications (XBAP)
- browser-hosted applications [WPF]
ms.assetid: 3a7a86a8-75d5-4898-96b9-73da151e5e16
ms.openlocfilehash: bec7e14ceed867e89c3117efbc245938356b9d78
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2020
ms.locfileid: "76742277"
---
# <a name="wpf-xaml-browser-applications-overview"></a><span data-ttu-id="f1596-102">Общие сведения о приложениях браузера WPF XAML</span><span class="sxs-lookup"><span data-stu-id="f1596-102">WPF XAML Browser Applications Overview</span></span>
<a name="introduction"></a><span data-ttu-id="f1596-103">Приложения браузера XAML (XBAP) объединяют функции веб-приложений и многофункциональных клиентских приложений.</span><span class="sxs-lookup"><span data-stu-id="f1596-103">XAML browser applications (XBAPs) combines features of both Web applications and rich-client applications.</span></span> <span data-ttu-id="f1596-104">Как веб-приложения, XBAP можно развертывать на веб-сервере и запускать из Internet Explorer или Firefox.</span><span class="sxs-lookup"><span data-stu-id="f1596-104">Like Web applications, XBAPs can be deployed to a Web server and started from Internet Explorer or Firefox.</span></span> <span data-ttu-id="f1596-105">Как и многофункциональные клиентские приложения, XBAP могут использовать возможности WPF.</span><span class="sxs-lookup"><span data-stu-id="f1596-105">Like rich-client applications, XBAPs can take advantage of the capabilities of WPF.</span></span> <span data-ttu-id="f1596-106">Кроме того, XBAP разрабатываются аналогично многофункциональным клиентским приложениям.</span><span class="sxs-lookup"><span data-stu-id="f1596-106">Developing XBAPs is also similar to rich-client development.</span></span> <span data-ttu-id="f1596-107">Этот раздел содержит простое, общее введение в разработку XBAP и показывает, чем она отличается от разработки стандартных многофункциональных клиентов.</span><span class="sxs-lookup"><span data-stu-id="f1596-107">This topic provides a simple, high-level introduction to XBAP development and describes where XBAP development differs from standard rich-client development.</span></span>

 <span data-ttu-id="f1596-108">Этот раздел состоит из следующих подразделов.</span><span class="sxs-lookup"><span data-stu-id="f1596-108">This topic contains the following sections:</span></span>

- [<span data-ttu-id="f1596-109">Создание приложения обозревателя XAML (XBAP)</span><span class="sxs-lookup"><span data-stu-id="f1596-109">Creating a New XAML Browser Application (XBAP)</span></span>](#creating_a_new_xaml_browser_application_xbap)

- [<span data-ttu-id="f1596-110">Развертывание XBAP</span><span class="sxs-lookup"><span data-stu-id="f1596-110">Deploying an XBAP</span></span>](#deploying_a_xbap)

- [<span data-ttu-id="f1596-111">Связь с веб-страницей размещения</span><span class="sxs-lookup"><span data-stu-id="f1596-111">Communicating with the Host Web Page</span></span>](#communicating_with_the_host_web_page)

- [<span data-ttu-id="f1596-112">Вопросы безопасности XBAP</span><span class="sxs-lookup"><span data-stu-id="f1596-112">XBAP Security Considerations</span></span>](#xbap_security_considerations)

- [<span data-ttu-id="f1596-113">Влияние времени запуска XBAP на производительность</span><span class="sxs-lookup"><span data-stu-id="f1596-113">XBAP Start Time Performance Considerations</span></span>](#xbap_start_time_performance_considerations)

<a name="creating_a_new_xaml_browser_application_xbap"></a>
## <a name="creating-a-new-xaml-browser-application-xbap"></a><span data-ttu-id="f1596-114">Создание приложения обозревателя XAML (XBAP)</span><span class="sxs-lookup"><span data-stu-id="f1596-114">Creating a New XAML Browser Application (XBAP)</span></span>
 <span data-ttu-id="f1596-115">Самый простой способ создать новый проект XBAP — Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f1596-115">The simplest way to create a new XBAP project is with Visual Studio.</span></span> <span data-ttu-id="f1596-116">При создании нового проекта выберите из списка шаблонов **приложение браузера WPF**.</span><span class="sxs-lookup"><span data-stu-id="f1596-116">When creating a new project, select **WPF Browser Application** from the list of templates.</span></span> <span data-ttu-id="f1596-117">Дополнительные сведения см. в разделе [Практическое руководство. Создание нового проекта приложения обозревателя WPF](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/bb628663(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="f1596-117">For more information, see [How to: Create a New WPF Browser Application Project](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/bb628663(v=vs.100)).</span></span>

 <span data-ttu-id="f1596-118">При запуске проект XBAP откроется в окне браузера, а не в отдельном окне.</span><span class="sxs-lookup"><span data-stu-id="f1596-118">When you run the XBAP project, it opens in a browser window instead of a stand-alone window.</span></span> <span data-ttu-id="f1596-119">При отладке XBAP из Visual Studio приложение запускается с разрешениями зоны Интернета и, таким образом, создает исключения безопасности, если эти разрешения превышены.</span><span class="sxs-lookup"><span data-stu-id="f1596-119">When you debug the XBAP from Visual Studio, the application runs with Internet zone permission and will therefore throw security exceptions if those permissions are exceeded.</span></span> <span data-ttu-id="f1596-120">Дополнительные сведения см. в разделах [Безопасность](../security-wpf.md) и [Безопасность частичного доверия в WPF](../wpf-partial-trust-security.md).</span><span class="sxs-lookup"><span data-stu-id="f1596-120">For more information, see [Security](../security-wpf.md) and [WPF Partial Trust Security](../wpf-partial-trust-security.md).</span></span>

> [!NOTE]
> <span data-ttu-id="f1596-121">Если вы не разрабатываете с помощью Visual Studio или хотите узнать больше о файлах проекта, см. раздел [Создание приложения WPF](building-a-wpf-application-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="f1596-121">If you are not developing with Visual Studio or want to learn more about the project files, see [Building a WPF Application](building-a-wpf-application-wpf.md).</span></span>

<a name="deploying_a_xbap"></a>
## <a name="deploying-an-xbap"></a><span data-ttu-id="f1596-122">Развертывание XBAP</span><span class="sxs-lookup"><span data-stu-id="f1596-122">Deploying an XBAP</span></span>
 <span data-ttu-id="f1596-123">При построении XBAP создаются следующие три файла:</span><span class="sxs-lookup"><span data-stu-id="f1596-123">When you build an XBAP, the output includes the following three files:</span></span>

|<span data-ttu-id="f1596-124">Файл</span><span class="sxs-lookup"><span data-stu-id="f1596-124">File</span></span>|<span data-ttu-id="f1596-125">Description</span><span class="sxs-lookup"><span data-stu-id="f1596-125">Description</span></span>|
|----------|-----------------|
|<span data-ttu-id="f1596-126">Исполняемый файл (.EXE)</span><span class="sxs-lookup"><span data-stu-id="f1596-126">Executable (.exe)</span></span>|<span data-ttu-id="f1596-127">Содержит скомпилированный код и имеет расширение EXE.</span><span class="sxs-lookup"><span data-stu-id="f1596-127">This contains the compiled code and has an .exe extension.</span></span>|
|<span data-ttu-id="f1596-128">Манифест приложения (.MANIFEST)</span><span class="sxs-lookup"><span data-stu-id="f1596-128">Application manifest (.manifest)</span></span>|<span data-ttu-id="f1596-129">Содержит метаданные, связанные с приложением, и имеет расширение MANIFEST.</span><span class="sxs-lookup"><span data-stu-id="f1596-129">This contains metadata associated with the application and has a .manifest extension.</span></span>|
|<span data-ttu-id="f1596-130">Манифест развертывания (.XBAP)</span><span class="sxs-lookup"><span data-stu-id="f1596-130">Deployment manifest (.xbap)</span></span>|<span data-ttu-id="f1596-131">Этот файл содержит сведения, используемые технологией ClickOnce для развертывания приложения и имеющего расширение XBAP.</span><span class="sxs-lookup"><span data-stu-id="f1596-131">This file contains the information that ClickOnce uses to deploy the application and has the .xbap extension.</span></span>|

 <span data-ttu-id="f1596-132">Приложения XBAP развертываются на веб-сервере, например Microsoft службы IIS (IIS) 5,0 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="f1596-132">You deploy XBAPs to a Web server, for example Microsoft Internet Information Services (IIS) 5.0 or later versions.</span></span> <span data-ttu-id="f1596-133">Вам не нужно устанавливать .NET Framework на веб-сервере, но необходимо зарегистрировать типы MIME и расширения имен файлов для различных расширений электронной почты в WPF.</span><span class="sxs-lookup"><span data-stu-id="f1596-133">You do not have to install the .NET Framework on the Web server, but you do have to register the WPF Multipurpose Internet Mail Extensions (MIME) types and file name extensions.</span></span> <span data-ttu-id="f1596-134">Дополнительные сведения см. в разделе [Практическое руководство. Настройка служб IIS 5.0 и IIS 6.0 для развертывания приложений WPF](how-to-configure-iis-5-0-and-iis-6-0-to-deploy-wpf-applications.md).</span><span class="sxs-lookup"><span data-stu-id="f1596-134">For more information, see [Configure IIS 5.0 and IIS 6.0 to Deploy WPF Applications](how-to-configure-iis-5-0-and-iis-6-0-to-deploy-wpf-applications.md).</span></span>

 <span data-ttu-id="f1596-135">Чтобы подготовить XBAP для развертывания, скопируйте файл EXE и связанные с ним манифесты на веб-сервер.</span><span class="sxs-lookup"><span data-stu-id="f1596-135">To prepare your XBAP for deployment, copy the .exe and the associated manifests to the Web server.</span></span> <span data-ttu-id="f1596-136">Создайте HTML-страницу, содержащую гиперссылку, чтобы открыть манифест развертывания, который является файлом с расширением XBAP.</span><span class="sxs-lookup"><span data-stu-id="f1596-136">Create an HTML page that contains a hyperlink to open the deployment manifest, which is the file that has the .xbap extension.</span></span> <span data-ttu-id="f1596-137">Когда пользователь щелкает ссылку на XBAP файл, ClickOnce автоматически обрабатывает механизм загрузки и запуска приложения.</span><span class="sxs-lookup"><span data-stu-id="f1596-137">When the user clicks the link to the .xbap file, ClickOnce automatically handles the mechanics of downloading and starting the application.</span></span> <span data-ttu-id="f1596-138">В следующем примере кода показана HTML-страница, которая содержит гиперссылку, указывающую на XBAP.</span><span class="sxs-lookup"><span data-stu-id="f1596-138">The following example code shows an HTML page that contains a hyperlink that points to an XBAP.</span></span>

```html
<html>
    <head></head>
    <body>
        <a href="XbapEx.xbap">Click this link to launch the application</a>
    </body>
</html>
```

 <span data-ttu-id="f1596-139">Кроме того, XBAP можно разместить во фрейме веб-страницы.</span><span class="sxs-lookup"><span data-stu-id="f1596-139">You can also host an XBAP in the frame of a Web page.</span></span> <span data-ttu-id="f1596-140">Создайте веб-страницу с одним или несколькими фреймами.</span><span class="sxs-lookup"><span data-stu-id="f1596-140">Create a Web page with one or more frames.</span></span> <span data-ttu-id="f1596-141">Назначьте исходное свойство фрейма файлу манифеста развертывания.</span><span class="sxs-lookup"><span data-stu-id="f1596-141">Set the source property of a frame to the deployment manifest file.</span></span> <span data-ttu-id="f1596-142">Чтобы использовать встроенный механизм взаимодействия между веб-страницей размещения и XBAP, необходимо разместить приложение во фрейме.</span><span class="sxs-lookup"><span data-stu-id="f1596-142">If you want to use the built-in mechanism to communicate between the hosting Web page and the XBAP, you must host the application in a frame.</span></span> <span data-ttu-id="f1596-143">В следующем примере кода показана HTML-страница с двумя фреймами; в качестве источника для второго фрейма выбран XBAP.</span><span class="sxs-lookup"><span data-stu-id="f1596-143">The following example code shows an HTML page with two frames, the source for the second frame is set to an XBAP.</span></span>

```html
<html>
    <head>
        <title>A page with frames</title>
    </head>
    <frameset cols="50%,50%">
        <frame src="introduction.htm">
        <frame src="XbapEx.xbap">
    </frameset>
</html>
```

### <a name="clearing-cached-xbaps"></a><span data-ttu-id="f1596-144">Очистка кэшированных XBAP</span><span class="sxs-lookup"><span data-stu-id="f1596-144">Clearing Cached XBAPs</span></span>
 <span data-ttu-id="f1596-145">В некоторых случаях после повторной сборки и запуска XBAP может оказаться, что открывается более ранняя версия XBAP.</span><span class="sxs-lookup"><span data-stu-id="f1596-145">In some situations after rebuilding and starting your XBAP, you may find that an earlier version of the XBAP is opened.</span></span> <span data-ttu-id="f1596-146">Это может произойти, например, если номер версии сборки XBAP статичен и XBAP запускается из командной строки.</span><span class="sxs-lookup"><span data-stu-id="f1596-146">For example, this behavior may occur when your XBAP assembly version number is static and you start the XBAP from the command line.</span></span> <span data-ttu-id="f1596-147">В этом случае в связи с тем, что номер кэшированной версии (версии, запущенной ранее) и новой версии остаются прежними, новая версия XBAP не загружается.</span><span class="sxs-lookup"><span data-stu-id="f1596-147">In this case, because the version number between the cached version (the version that was previously started) and the new version remains the same, the new version of the XBAP is not downloaded.</span></span> <span data-ttu-id="f1596-148">Вместе нее загружается кэшированная версия.</span><span class="sxs-lookup"><span data-stu-id="f1596-148">Instead, the cached version is loaded.</span></span>

 <span data-ttu-id="f1596-149">В таких ситуациях можно удалить кэшированную версию с помощью команды **Mage** (устанавливается вместе с Visual Studio или Windows SDK) из командной строки.</span><span class="sxs-lookup"><span data-stu-id="f1596-149">In these situations, you can remove the cached version by using the **Mage** command (installed with Visual Studio or the Windows SDK) at the command prompt.</span></span> <span data-ttu-id="f1596-150">Следующая команда очищает кэш приложения.</span><span class="sxs-lookup"><span data-stu-id="f1596-150">The following command clears the application cache.</span></span>

 ```console
 Mage.exe -cc
 ```

 <span data-ttu-id="f1596-151">Она обеспечивает запуск последней версии XBAP.</span><span class="sxs-lookup"><span data-stu-id="f1596-151">This command guarantees that the latest version of your XBAP is started.</span></span> <span data-ttu-id="f1596-152">При отладке приложения в Visual Studio должна быть запущена последняя версия XBAP.</span><span class="sxs-lookup"><span data-stu-id="f1596-152">When you debug your application in Visual Studio, the latest version of your XBAP should be started.</span></span> <span data-ttu-id="f1596-153">Как правило, номер версии развертывания необходимо обновлять при каждой сборке.</span><span class="sxs-lookup"><span data-stu-id="f1596-153">In general, you should update your deployment version number with each build.</span></span> <span data-ttu-id="f1596-154">Дополнительные сведения о команде Mage см. в разделе [Mage.exe (средство создания и редактирования манифеста)](../../tools/mage-exe-manifest-generation-and-editing-tool.md).</span><span class="sxs-lookup"><span data-stu-id="f1596-154">For more information about Mage, see [Mage.exe (Manifest Generation and Editing Tool)](../../tools/mage-exe-manifest-generation-and-editing-tool.md).</span></span>

<a name="communicating_with_the_host_web_page"></a>
## <a name="communicating-with-the-host-web-page"></a><span data-ttu-id="f1596-155">Связь с веб-страницей размещения</span><span class="sxs-lookup"><span data-stu-id="f1596-155">Communicating with the Host Web Page</span></span>
 <span data-ttu-id="f1596-156">Если приложение находится во фрейме HTML, вы можете взаимодействовать с веб-страницей, которая содержит XBAP.</span><span class="sxs-lookup"><span data-stu-id="f1596-156">When the application is hosted in an HTML frame, you can communicate with the Web page that contains the XBAP.</span></span> <span data-ttu-id="f1596-157">Это можно сделать, извлекая свойство <xref:System.Windows.Interop.BrowserInteropHelper.HostScript%2A> <xref:System.Windows.Interop.BrowserInteropHelper>.</span><span class="sxs-lookup"><span data-stu-id="f1596-157">You do this by retrieving the <xref:System.Windows.Interop.BrowserInteropHelper.HostScript%2A> property of <xref:System.Windows.Interop.BrowserInteropHelper>.</span></span> <span data-ttu-id="f1596-158">Оно возвращает объект скрипта, представляющий окно HTML.</span><span class="sxs-lookup"><span data-stu-id="f1596-158">This property returns a script object that represents the HTML window.</span></span> <span data-ttu-id="f1596-159">Доступ к свойствам, методам и событиям можно получить в [объекте окна](https://go.microsoft.com/fwlink/?LinkId=160274), используя обычный синтаксис с точками.</span><span class="sxs-lookup"><span data-stu-id="f1596-159">You can then access the properties, methods, and events on the [window object](https://go.microsoft.com/fwlink/?LinkId=160274) by using regular dot syntax.</span></span> <span data-ttu-id="f1596-160">Также можно получить доступ к методам скрипта и глобальным переменным.</span><span class="sxs-lookup"><span data-stu-id="f1596-160">You can also access script methods and global variables.</span></span> <span data-ttu-id="f1596-161">В следующем примере показано, как извлечь объект скрипта и закрыть браузер.</span><span class="sxs-lookup"><span data-stu-id="f1596-161">The following example shows how to retrieve the script object and close the browser.</span></span>

 [!code-csharp[XbapBrowserInterop#10](~/samples/snippets/csharp/VS_Snippets_Wpf/xbapbrowserinterop/cs/page1.xaml.cs#10)]
 [!code-vb[XbapBrowserInterop#10](~/samples/snippets/visualbasic/VS_Snippets_Wpf/xbapbrowserinterop/vb/page1.xaml.vb#10)]

### <a name="debugging-xbaps-that-use-hostscript"></a><span data-ttu-id="f1596-162">Отладка XBAP, в котором используется HostScript</span><span class="sxs-lookup"><span data-stu-id="f1596-162">Debugging XBAPs that Use HostScript</span></span>
 <span data-ttu-id="f1596-163">Если XBAP использует объект <xref:System.Windows.Interop.BrowserInteropHelper.HostScript%2A> для взаимодействия с окном HTML, необходимо указать два параметра для запуска и отладки приложения в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f1596-163">If your XBAP uses the <xref:System.Windows.Interop.BrowserInteropHelper.HostScript%2A> object to communicate with the HTML window, there are two settings that you must specify to run and debug the application in Visual Studio.</span></span> <span data-ttu-id="f1596-164">Приложение должно иметь доступ к своему исходному сайту, а запустить его необходимо с HTML-страницы, которая содержит XBAP.</span><span class="sxs-lookup"><span data-stu-id="f1596-164">The application must have access to its site of origin and you must start the application with the HTML page that contains the XBAP.</span></span> <span data-ttu-id="f1596-165">Ниже описаны процедуры проверки двух этих параметров:</span><span class="sxs-lookup"><span data-stu-id="f1596-165">The following steps describe how to check these two settings:</span></span>

1. <span data-ttu-id="f1596-166">В Visual Studio откройте свойства проекта.</span><span class="sxs-lookup"><span data-stu-id="f1596-166">In Visual Studio, open the project properties.</span></span>

2. <span data-ttu-id="f1596-167">На вкладке **Безопасность** нажмите кнопку **Дополнительно**.</span><span class="sxs-lookup"><span data-stu-id="f1596-167">On the **Security** tab, click **Advanced**.</span></span>

     <span data-ttu-id="f1596-168">Откроется диалоговое окно "Дополнительные параметры безопасности".</span><span class="sxs-lookup"><span data-stu-id="f1596-168">The Advanced Security Settings dialog box appears.</span></span>

3. <span data-ttu-id="f1596-169">Убедитесь, что флажок **Предоставить приложению доступ к своему исходному сайту** установлен, и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="f1596-169">Make sure that the **Grant the application access to its site of origin** check box is checked and then click **OK**.</span></span>

4. <span data-ttu-id="f1596-170">На вкладке **Отладка** выберите параметр **Запустить браузер, используя URL-адрес** и укажите URL-адрес HTML-страницы, содержащей XBAP.</span><span class="sxs-lookup"><span data-stu-id="f1596-170">On the **Debug** tab, select the **Start browser with URL** option and specify the URL for the HTML page that contains the XBAP.</span></span>

5. <span data-ttu-id="f1596-171">В Internet Explorer нажмите кнопку **Сервис** и выберите **Свойства обозревателя**.</span><span class="sxs-lookup"><span data-stu-id="f1596-171">In Internet Explorer, click the **Tools** button and then select **Internet Options**.</span></span>

     <span data-ttu-id="f1596-172">Откроется диалоговое окно «Свойства веб-обозревателя».</span><span class="sxs-lookup"><span data-stu-id="f1596-172">The Internet Options dialog box appears.</span></span>

6. <span data-ttu-id="f1596-173">Перейдите на вкладку **Дополнительно**.</span><span class="sxs-lookup"><span data-stu-id="f1596-173">Click the **Advanced** tab.</span></span>

7. <span data-ttu-id="f1596-174">В списке **Параметры** в разделе **Безопасность** установите флажок **Разрешать запуск активного содержимого файлов на моем компьютере**.</span><span class="sxs-lookup"><span data-stu-id="f1596-174">In the **Settings** list under **Security**, check the **Allow active content to run in files on My Computer** check box.</span></span>

8. <span data-ttu-id="f1596-175">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="f1596-175">Click **OK**.</span></span>

     <span data-ttu-id="f1596-176">Чтобы изменения вступили в силу, Internet Explorer необходимо перезапустить.</span><span class="sxs-lookup"><span data-stu-id="f1596-176">The changes will take effect after you restart Internet Explorer.</span></span>

> [!CAUTION]
> <span data-ttu-id="f1596-177">Включение активного содержимого в Internet Explorer может подвергнуть компьютер риску.</span><span class="sxs-lookup"><span data-stu-id="f1596-177">Enabling active content in Internet Explorer may put your computer at risk.</span></span> <span data-ttu-id="f1596-178">Если вы не хотите изменять параметры безопасности Internet Explorer, можно запустить HTML-страницу с сервера и подключить к процессу отладчик Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f1596-178">If you do not want to change your Internet Explorer security settings, you can launch the HTML page from a server and attach the Visual Studio debugger to the process.</span></span>

<a name="xbap_security_considerations"></a>
## <a name="xbap-security-considerations"></a><span data-ttu-id="f1596-179">Вопросы безопасности XBAP</span><span class="sxs-lookup"><span data-stu-id="f1596-179">XBAP Security Considerations</span></span>
 <span data-ttu-id="f1596-180">Обычно XBAP выполняются в изолированной среде безопасности частичного доверия, ограниченной набором разрешений зоны Интернета.</span><span class="sxs-lookup"><span data-stu-id="f1596-180">XBAPs typically execute in a partial-trust security sandbox that is restricted to the Internet zone permission set.</span></span> <span data-ttu-id="f1596-181">Следовательно, ваша реализация должна поддерживать подмножество элементов WPF, которые поддерживаются в зоне Интернета, или необходимо повысить уровень разрешений приложения.</span><span class="sxs-lookup"><span data-stu-id="f1596-181">Consequently, your implementation must support the subset of WPF elements that are supported in the Internet zone or you must elevate the permissions of your application.</span></span> <span data-ttu-id="f1596-182">Дополнительные сведения см. в статье [Безопасность](../security-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="f1596-182">For more information, see [Security](../security-wpf.md).</span></span>

 <span data-ttu-id="f1596-183">При использовании элемента управления <xref:System.Windows.Controls.WebBrowser> в приложении WPF внутренним образом создает собственный элемент управления ActiveX WebBrowser.</span><span class="sxs-lookup"><span data-stu-id="f1596-183">When you use a <xref:System.Windows.Controls.WebBrowser> control in your application, WPF internally instantiates the native WebBrowser ActiveX control.</span></span> <span data-ttu-id="f1596-184">Если ваше приложение — это XBAP частичного доверия, запущенный в браузере Internet Explorer, элемент управления ActiveX выполняется в выделенном потоке процесса Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="f1596-184">When your application is a partial-trust XBAP running in Internet Explorer, the ActiveX control runs in a dedicated thread of the Internet Explorer process.</span></span> <span data-ttu-id="f1596-185">В связи с этим применяются указанные ниже ограничения.</span><span class="sxs-lookup"><span data-stu-id="f1596-185">Therefore, the following limitations apply:</span></span>

- <span data-ttu-id="f1596-186">Элемент управления <xref:System.Windows.Controls.WebBrowser> должен обеспечивать поведение, аналогичное обозревателю узла, включая ограничения безопасности.</span><span class="sxs-lookup"><span data-stu-id="f1596-186">The <xref:System.Windows.Controls.WebBrowser> control should provide behavior similar to the host browser, including security restrictions.</span></span> <span data-ttu-id="f1596-187">Некоторыми из этих ограничений безопасности можно управлять с помощью параметров безопасности Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="f1596-187">Some of these security restrictions can be controlled through the Internet Explorer security settings.</span></span> <span data-ttu-id="f1596-188">Дополнительные сведения см. в статье [Безопасность](../security-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="f1596-188">For more information, see [Security](../security-wpf.md).</span></span>

- <span data-ttu-id="f1596-189">Если XBAP загружается на HTML-странице в междоменном режиме, возникнет исключение.</span><span class="sxs-lookup"><span data-stu-id="f1596-189">An exception is thrown when an XBAP is loaded cross-domain in an HTML page.</span></span>

- <span data-ttu-id="f1596-190">Входные данные находятся в отдельном потоке из <xref:System.Windows.Controls.WebBrowser>WPF, поэтому ввод с клавиатуры не может быть перехвачен, а состояние IME не является общим.</span><span class="sxs-lookup"><span data-stu-id="f1596-190">Input is on a separate thread from the WPF <xref:System.Windows.Controls.WebBrowser>, so keyboard input cannot be intercepted and the IME state is not shared.</span></span>

- <span data-ttu-id="f1596-191">Время или порядок навигации могут отличаться, если элемент управления ActiveX выполняется в другом потоке.</span><span class="sxs-lookup"><span data-stu-id="f1596-191">The timing or order of navigation may be different due to the ActiveX control running on another thread.</span></span> <span data-ttu-id="f1596-192">Например, переход на какую-либо страницу не всегда отменяется при запуске другого запроса навигации.</span><span class="sxs-lookup"><span data-stu-id="f1596-192">For example, navigating to a page is not always cancelled by starting another navigation request.</span></span>

- <span data-ttu-id="f1596-193">Настраиваемый элемент управления ActiveX может испытывать проблемы со связью, поскольку приложение WPF выполняется в отдельном потоке.</span><span class="sxs-lookup"><span data-stu-id="f1596-193">A custom ActiveX control may have trouble with communication since the WPF application is running in a separate thread.</span></span>

- <span data-ttu-id="f1596-194"><xref:System.Windows.Interop.HwndHost.MessageHook> не возникает, так как <xref:System.Windows.Interop.HwndHost> не может создать подкласс окна, выполняющегося в другом потоке или процессе.</span><span class="sxs-lookup"><span data-stu-id="f1596-194"><xref:System.Windows.Interop.HwndHost.MessageHook> does not get raised because <xref:System.Windows.Interop.HwndHost> cannot subclass a window running in another thread or process.</span></span>

### <a name="creating-a-full-trust-xbap"></a><span data-ttu-id="f1596-195">Создание XBAP с полным доверием</span><span class="sxs-lookup"><span data-stu-id="f1596-195">Creating a Full-Trust XBAP</span></span>
 <span data-ttu-id="f1596-196">Если XBAP требует полного доверия, проект можно изменить, предоставив ему соответствующее разрешение.</span><span class="sxs-lookup"><span data-stu-id="f1596-196">If your XBAP requires full trust, you can change your project to enable this permission.</span></span> <span data-ttu-id="f1596-197">Чтобы предоставить полное доверие, необходимо выполнить указанные ниже действия.</span><span class="sxs-lookup"><span data-stu-id="f1596-197">The following steps describe how to enable full trust:</span></span>

1. <span data-ttu-id="f1596-198">В Visual Studio откройте свойства проекта.</span><span class="sxs-lookup"><span data-stu-id="f1596-198">In Visual Studio, open the project properties.</span></span>

2. <span data-ttu-id="f1596-199">На вкладке **Безопасность** выберите параметр **Это приложение с полным доверием**.</span><span class="sxs-lookup"><span data-stu-id="f1596-199">On the **Security** tab, select the **This is a full trust application** option.</span></span>

 <span data-ttu-id="f1596-200">При этом происходят следующие изменения:</span><span class="sxs-lookup"><span data-stu-id="f1596-200">This setting makes the following changes:</span></span>

- <span data-ttu-id="f1596-201">В файле проекта значение элемента `<TargetZone>` изменяется на `Custom`.</span><span class="sxs-lookup"><span data-stu-id="f1596-201">In the project file, the `<TargetZone>` element value is changed to `Custom`.</span></span>

- <span data-ttu-id="f1596-202">В манифесте приложения (App. manifest) атрибут `Unrestricted="true"` добавляется в элемент<xref:System.Security.PermissionSet>.</span><span class="sxs-lookup"><span data-stu-id="f1596-202">In the application manifest (app.manifest), an `Unrestricted="true"` attribute is added to the \`<xref:System.Security.PermissionSet> element.</span></span>

    ```xml
    <PermissionSet class="System.Security.PermissionSet"
                   version="1"
                   ID="Custom"
                   SameSite="site"
                   Unrestricted="true" />
    ```

### <a name="deploying-a-full-trust-xbap"></a><span data-ttu-id="f1596-203">Развертывание XBAP с полным доверием</span><span class="sxs-lookup"><span data-stu-id="f1596-203">Deploying a Full-Trust XBAP</span></span>
 <span data-ttu-id="f1596-204">При развертывании XBAP с полным доверием, не основанного на модели доверенного развертывания ClickOnce, действия, выполняемые после того, как пользователь запустит приложение, зависят от зоны безопасности.</span><span class="sxs-lookup"><span data-stu-id="f1596-204">When you deploy a full-trust XBAP that does not follow the ClickOnce Trusted Deployment model, the behavior when the user runs the application will depend on the security zone.</span></span> <span data-ttu-id="f1596-205">В некоторых случаях пользователь получит предупреждение при попытке установить приложение.</span><span class="sxs-lookup"><span data-stu-id="f1596-205">In some cases, the user will receive a warning when they attempt to install it.</span></span> <span data-ttu-id="f1596-206">Пользователь может выбрать продолжение или отмену установки.</span><span class="sxs-lookup"><span data-stu-id="f1596-206">The user can choose to continue or cancel the installation.</span></span> <span data-ttu-id="f1596-207">В следующей таблице описаны поведение приложения для каждой зоны безопасности и действия, необходимые для получения приложением полного доверия.</span><span class="sxs-lookup"><span data-stu-id="f1596-207">The following table describes the behavior of the application for each security zone and what you have to do for the application to receive full trust.</span></span>

|<span data-ttu-id="f1596-208">Зона безопасности</span><span class="sxs-lookup"><span data-stu-id="f1596-208">Security Zone</span></span>|<span data-ttu-id="f1596-209">Поведение</span><span class="sxs-lookup"><span data-stu-id="f1596-209">Behavior</span></span>|<span data-ttu-id="f1596-210">Получение полного доверия</span><span class="sxs-lookup"><span data-stu-id="f1596-210">Getting Full Trust</span></span>|
|-------------------|--------------|------------------------|
|<span data-ttu-id="f1596-211">Локальный компьютер</span><span class="sxs-lookup"><span data-stu-id="f1596-211">Local computer</span></span>|<span data-ttu-id="f1596-212">Автоматическое получение полного доверия</span><span class="sxs-lookup"><span data-stu-id="f1596-212">Automatic full trust</span></span>|<span data-ttu-id="f1596-213">Никаких действий не требуется.</span><span class="sxs-lookup"><span data-stu-id="f1596-213">No action is needed.</span></span>|
|<span data-ttu-id="f1596-214">Интрасеть и надежные веб-сайты</span><span class="sxs-lookup"><span data-stu-id="f1596-214">Intranet and trusted sites</span></span>|<span data-ttu-id="f1596-215">Запрос полного доверия</span><span class="sxs-lookup"><span data-stu-id="f1596-215">Prompt for full trust</span></span>|<span data-ttu-id="f1596-216">Подпишите приложение XBAP с помощью сертификата, чтобы пользователь видел источник в запросе.</span><span class="sxs-lookup"><span data-stu-id="f1596-216">Sign the XBAP with a certificate so that the user sees the source in the prompt.</span></span>|
|<span data-ttu-id="f1596-217">Интернет</span><span class="sxs-lookup"><span data-stu-id="f1596-217">Internet</span></span>|<span data-ttu-id="f1596-218">Сбой с сообщением "Доверие не оказано"</span><span class="sxs-lookup"><span data-stu-id="f1596-218">Fails with "Trust Not Granted"</span></span>|<span data-ttu-id="f1596-219">Подпишите приложение XBAP с помощью сертификата.</span><span class="sxs-lookup"><span data-stu-id="f1596-219">Sign the XBAP with a certificate.</span></span>|

> [!NOTE]
> <span data-ttu-id="f1596-220">Поведение, описанное в предыдущей таблице, относится к приложениям XBAP с полным доверием, не следующим модели доверенного развертывания ClickOnce.</span><span class="sxs-lookup"><span data-stu-id="f1596-220">The behavior described in the previous table is for full-trust XBAPs that do not follow the ClickOnce Trusted Deployment model.</span></span>

 <span data-ttu-id="f1596-221">Для развертывания XBAP с полным доверием рекомендуется использовать модель доверенного развертывания ClickOnce.</span><span class="sxs-lookup"><span data-stu-id="f1596-221">It is recommended that you use the ClickOnce Trusted Deployment model for deploying a full-trust XBAP.</span></span> <span data-ttu-id="f1596-222">Она позволяет XBAP получать полное доверие автоматически, независимо от зоны безопасности и не запрашивая подтверждение пользователя.</span><span class="sxs-lookup"><span data-stu-id="f1596-222">This model allows your XBAP to be granted full trust automatically, regardless of the security zone, so that the user is not prompted.</span></span> <span data-ttu-id="f1596-223">При использовании этой модели приложение должно быть подписано сертификатом надежного издателя.</span><span class="sxs-lookup"><span data-stu-id="f1596-223">As part of this model, you must sign your application with a certificate from a trusted publisher.</span></span> <span data-ttu-id="f1596-224">Дополнительные сведения см. в разделах [Общие сведения о развертывании доверенных приложений](/visualstudio/deployment/trusted-application-deployment-overview) и [Знакомство с подписыванием кода](https://go.microsoft.com/fwlink/?LinkId=166327).</span><span class="sxs-lookup"><span data-stu-id="f1596-224">For more information, see [Trusted Application Deployment Overview](/visualstudio/deployment/trusted-application-deployment-overview) and [Introduction to Code Signing](https://go.microsoft.com/fwlink/?LinkId=166327).</span></span>

<a name="xbap_start_time_performance_considerations"></a>
## <a name="xbap-start-time-performance-considerations"></a><span data-ttu-id="f1596-225">Влияние времени запуска XBAP на производительность</span><span class="sxs-lookup"><span data-stu-id="f1596-225">XBAP Start Time Performance Considerations</span></span>
 <span data-ttu-id="f1596-226">Важную роль в производительности XBAP играет время его запуска.</span><span class="sxs-lookup"><span data-stu-id="f1596-226">An important aspect of XBAP performance is its start time.</span></span> <span data-ttu-id="f1596-227">Если XBAP является первым загружаемым приложением WPF, время *холодного запуска* может составить от десяти секунд.</span><span class="sxs-lookup"><span data-stu-id="f1596-227">If an XBAP is the first WPF application to load, the *cold start* time can be ten seconds or more.</span></span> <span data-ttu-id="f1596-228">Это связано с тем, что страницу хода выполнения обрабатывает WPF, а для того, чтобы отображать приложение, требуется холодный запуск CLR и WPF.</span><span class="sxs-lookup"><span data-stu-id="f1596-228">This is because the progress page is rendered by WPF, and both the CLR and WPF must be cold-started to display the application.</span></span>

 <span data-ttu-id="f1596-229">Начиная с .NET Framework 3,5 с пакетом обновления 1 (SP1), время холодного запуска XBAP уменьшается за счет отображения неуправляемой страницы хода выполнения на ранних этапах цикла развертывания.</span><span class="sxs-lookup"><span data-stu-id="f1596-229">Starting in .NET Framework 3.5 SP1, XBAP cold-start time is mitigated by displaying an unmanaged progress page early in the deployment cycle.</span></span> <span data-ttu-id="f1596-230">Она открывается практически сразу после того, как приложение будет запущено, поскольку отображается машинным кодом размещения и выводится на экран в формате HTML.</span><span class="sxs-lookup"><span data-stu-id="f1596-230">The progress page appears almost immediately after the application is started, because it is displayed by native hosting code and rendered in HTML.</span></span>

 <span data-ttu-id="f1596-231">Кроме того, повышенная степень параллелизма в последовательности загрузки ClickOnce повышает время начала до десяти процентов.</span><span class="sxs-lookup"><span data-stu-id="f1596-231">In addition, improved concurrency of the ClickOnce download sequence improves start time by up to ten percent.</span></span> <span data-ttu-id="f1596-232">После скачивания и проверки манифестов ClickOnce запустится Загрузка приложения и начнется обновление индикатора выполнения.</span><span class="sxs-lookup"><span data-stu-id="f1596-232">After ClickOnce downloads and validates manifests, the application download starts, and the progress bar starts to update.</span></span>

## <a name="see-also"></a><span data-ttu-id="f1596-233">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="f1596-233">See also</span></span>

- [<span data-ttu-id="f1596-234">Настройка Visual Studio для отладки приложений браузера XAML для вызова веб-службы</span><span class="sxs-lookup"><span data-stu-id="f1596-234">Configure Visual Studio to Debug a XAML Browser Application to Call a Web Service</span></span>](configure-vs-to-debug-a-xaml-browser-to-call-a-web-service.md)
- [<span data-ttu-id="f1596-235">Развертывание приложений WPF</span><span class="sxs-lookup"><span data-stu-id="f1596-235">Deploying a WPF Application</span></span>](deploying-a-wpf-application-wpf.md)
