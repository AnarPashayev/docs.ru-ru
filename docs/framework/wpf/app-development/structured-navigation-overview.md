---
title: Общие сведения о структурной навигации
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- structured navigation [WPF]
ms.assetid: 025d30ef-fec5-436d-ad7a-5d5483331c26
ms.openlocfilehash: 0cf2a37eaa812d27dc3d111b1459c9daae72dc5a
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61788834"
---
# <a name="structured-navigation-overview"></a><span data-ttu-id="b4958-102">Общие сведения о структурной навигации</span><span class="sxs-lookup"><span data-stu-id="b4958-102">Structured Navigation Overview</span></span>
<span data-ttu-id="b4958-103">Содержимое, которое может размещаться в [!INCLUDE[TLA#tla_xbap](../../../../includes/tlasharptla-xbap-md.md)], <xref:System.Windows.Controls.Frame>, или <xref:System.Windows.Navigation.NavigationWindow> состоит из страниц, которые могут быть идентифицированы пакетом [!INCLUDE[TLA#tla_uri#plural](../../../../includes/tlasharptla-urisharpplural-md.md)] и просматриваться с помощью гиперссылок.</span><span class="sxs-lookup"><span data-stu-id="b4958-103">Content that can be hosted by an [!INCLUDE[TLA#tla_xbap](../../../../includes/tlasharptla-xbap-md.md)], a <xref:System.Windows.Controls.Frame>, or a <xref:System.Windows.Navigation.NavigationWindow> is composed of pages that can be identified by pack [!INCLUDE[TLA#tla_uri#plural](../../../../includes/tlasharptla-urisharpplural-md.md)] and navigated to by hyperlinks.</span></span> <span data-ttu-id="b4958-104">Структура страниц и способы навигации по ним с помощью гиперссылок называется топологией навигации.</span><span class="sxs-lookup"><span data-stu-id="b4958-104">The structure of pages and the ways in which they can be navigated, as defined by hyperlinks, is known as a navigation topology.</span></span> <span data-ttu-id="b4958-105">Такая топология подходит для различных типов приложений, особенно тех, в которых необходим переход по документам.</span><span class="sxs-lookup"><span data-stu-id="b4958-105">Such a topology suits a variety of application types, particularly those that navigate through documents.</span></span> <span data-ttu-id="b4958-106">В таких приложениях пользователь может перемещаться с одной страницы на другую даже при отсутствии связи между ними.</span><span class="sxs-lookup"><span data-stu-id="b4958-106">For such applications, the user can navigate from one page to another page without either page needing to know anything about the other.</span></span>  
  
 <span data-ttu-id="b4958-107">Тем не менее другие типы приложений содержат страницы, которым необходимо ссылаться друг на друга.</span><span class="sxs-lookup"><span data-stu-id="b4958-107">However, other types of applications have pages that do need to know when they have been navigated between.</span></span> <span data-ttu-id="b4958-108">Например, рассмотрим приложение управления персоналом, в котором есть одна страница со списком всех сотрудников организации — страница "Список сотрудников".</span><span class="sxs-lookup"><span data-stu-id="b4958-108">For example, consider a human resources application that has one page to list all the employees in an organization—the "List Employees" page.</span></span> <span data-ttu-id="b4958-109">На этой странице пользователи также могут добавить нового сотрудника, щелкнув гиперссылку.</span><span class="sxs-lookup"><span data-stu-id="b4958-109">This page could also allow users to add a new employee by clicking a hyperlink.</span></span> <span data-ttu-id="b4958-110">При ее щелчке открывается новая страница "Добавить сотрудника", на которой собираются сведения о новом сотруднике и возвращаются на страницу "Список сотрудников". При этом создается новый сотрудник и обновляется список.</span><span class="sxs-lookup"><span data-stu-id="b4958-110">When clicked, the page navigates to an "Add an Employee" page to gather the new employee's details and return them to the "List Employees" page to create the new employee and update the list.</span></span> <span data-ttu-id="b4958-111">Этот стиль навигации аналогичен вызову метода для выполнения обработки и возврата значения, который называется структурным программированием.</span><span class="sxs-lookup"><span data-stu-id="b4958-111">This style of navigation is similar to calling a method to perform some processing and return a value, which is known as structured programming.</span></span> <span data-ttu-id="b4958-112">Таким образом, этот стиль навигации называется *структурной навигацией*.</span><span class="sxs-lookup"><span data-stu-id="b4958-112">As such, this style of navigation is known as *structured navigation*.</span></span>  
  
 <span data-ttu-id="b4958-113"><xref:System.Windows.Controls.Page> Класс не реализует поддержку структурной навигации.</span><span class="sxs-lookup"><span data-stu-id="b4958-113">The <xref:System.Windows.Controls.Page> class doesn't implement support for structured navigation.</span></span> <span data-ttu-id="b4958-114">Вместо этого <xref:System.Windows.Navigation.PageFunction%601> класс является производным от <xref:System.Windows.Controls.Page> и расширяет его с помощью основных конструкций, необходимых для структурной навигации.</span><span class="sxs-lookup"><span data-stu-id="b4958-114">Instead, the <xref:System.Windows.Navigation.PageFunction%601> class derives from <xref:System.Windows.Controls.Page> and extends it with the basic constructs required for structured navigation.</span></span> <span data-ttu-id="b4958-115">В этом разделе показано, как установить структурной навигации с помощью <xref:System.Windows.Navigation.PageFunction%601>.</span><span class="sxs-lookup"><span data-stu-id="b4958-115">This topic shows how to establish structured navigation using <xref:System.Windows.Navigation.PageFunction%601>.</span></span>  

<a name="Structured_Navigation"></a>   
## <a name="structured-navigation"></a><span data-ttu-id="b4958-116">Структурная навигация</span><span class="sxs-lookup"><span data-stu-id="b4958-116">Structured Navigation</span></span>  
 <span data-ttu-id="b4958-117">Когда одна страница вызывает другую в структурной навигации, необходимы некоторые или все из следующих видов поведения.</span><span class="sxs-lookup"><span data-stu-id="b4958-117">When one page calls another page in a structured navigation, some or all of the following behaviors are required:</span></span>  
  
- <span data-ttu-id="b4958-118">Переход выполняется с вызывающей страницы на вызываемую. При этом могут передаваться параметры, необходимые вызываемой странице.</span><span class="sxs-lookup"><span data-stu-id="b4958-118">The calling page navigates to the called page, optionally passing parameters required by the called page.</span></span>  
  
- <span data-ttu-id="b4958-119">Когда пользователь завершает работу с вызывающей страницей, вызванная страница может возвращать вызывающей странице следующее:</span><span class="sxs-lookup"><span data-stu-id="b4958-119">The called page, when a user has completed using the calling page, returns specifically to the calling page, optionally:</span></span>  
  
    - <span data-ttu-id="b4958-120">Возврат информации о состоянии, которая описывает, как была завершена работа с вызывающей страницей (например, пользователь нажал кнопку "ОК" или "Отмена").</span><span class="sxs-lookup"><span data-stu-id="b4958-120">Returning state information that describes how the calling page was completed (for example, whether a user pressed an OK button or a Cancel button).</span></span>  
  
    - <span data-ttu-id="b4958-121">Возврат данных, которые были получены от пользователя (например, сведения о новом сотруднике).</span><span class="sxs-lookup"><span data-stu-id="b4958-121">Returning that data that was collected from the user (for example, new employee details).</span></span>  
  
- <span data-ttu-id="b4958-122">Когда вызывающая страница возвращается к вызываемой, вызванная страница удаляется из журнала навигации, чтобы изолировать один экземпляр вызываемой страницы от другого.</span><span class="sxs-lookup"><span data-stu-id="b4958-122">When the calling page returns to the called page, the called page is removed from navigation history to isolate one instance of a called page from another.</span></span>  
  
 <span data-ttu-id="b4958-123">Эти виды поведения показаны на следующем рисунке:</span><span class="sxs-lookup"><span data-stu-id="b4958-123">These behaviors are illustrated by the following figure:</span></span>  
  
 ![Снимок экрана показан поток между вызывающей и вызываемой страницей.](./media/structured-navigation-overview/flow-between-calling-page-called-page.png)  
  
 <span data-ttu-id="b4958-125">Эти поведения можно реализовать с помощью <xref:System.Windows.Navigation.PageFunction%601> качестве вызываемой страницы.</span><span class="sxs-lookup"><span data-stu-id="b4958-125">You can implement these behaviors by using a <xref:System.Windows.Navigation.PageFunction%601> as the called page.</span></span>  
  
<a name="Structured_Navigation_with_PageFunction"></a>   
## <a name="structured-navigation-with-pagefunction"></a><span data-ttu-id="b4958-126">Структурная навигация с помощью PageFunction</span><span class="sxs-lookup"><span data-stu-id="b4958-126">Structured Navigation with PageFunction</span></span>  
 <span data-ttu-id="b4958-127">В этом разделе показано, как реализовать основной механизм структурной навигации с одним <xref:System.Windows.Navigation.PageFunction%601>.</span><span class="sxs-lookup"><span data-stu-id="b4958-127">This topic shows how to implement the basic mechanics of structured navigation involving a single <xref:System.Windows.Navigation.PageFunction%601>.</span></span> <span data-ttu-id="b4958-128">В этом образце <xref:System.Windows.Controls.Page> вызовы <xref:System.Windows.Navigation.PageFunction%601> для получения <xref:System.String> от пользователя и вернуть его.</span><span class="sxs-lookup"><span data-stu-id="b4958-128">In this sample, a <xref:System.Windows.Controls.Page> calls a <xref:System.Windows.Navigation.PageFunction%601> to get a <xref:System.String> value from the user and return it.</span></span>  
  
### <a name="creating-a-calling-page"></a><span data-ttu-id="b4958-129">Создание вызывающей страницы</span><span class="sxs-lookup"><span data-stu-id="b4958-129">Creating a Calling Page</span></span>  
 <span data-ttu-id="b4958-130">Страница, которая вызывает <xref:System.Windows.Navigation.PageFunction%601> может быть либо <xref:System.Windows.Controls.Page> или <xref:System.Windows.Navigation.PageFunction%601>.</span><span class="sxs-lookup"><span data-stu-id="b4958-130">The page that calls a <xref:System.Windows.Navigation.PageFunction%601> can be either a <xref:System.Windows.Controls.Page> or a <xref:System.Windows.Navigation.PageFunction%601>.</span></span> <span data-ttu-id="b4958-131">В этом примере это <xref:System.Windows.Controls.Page>, как показано в следующем коде.</span><span class="sxs-lookup"><span data-stu-id="b4958-131">In this example, it is a <xref:System.Windows.Controls.Page>, as shown in the following code.</span></span>  
  
 [!code-xaml[StructuredNavigationSample#CallingPageDefaultMARKUP1](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml#callingpagedefaultmarkup1)]  
[!code-xaml[StructuredNavigationSample#CallingPageDefaultMARKUP2](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml#callingpagedefaultmarkup2)]  
  
 [!code-csharp[StructuredNavigationSample#CallingPageDefaultCODEBEHIND1](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml.cs#callingpagedefaultcodebehind1)]
 [!code-vb[StructuredNavigationSample#CallingPageDefaultCODEBEHIND1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CallingPage.xaml.vb#callingpagedefaultcodebehind1)]  
[!code-csharp[StructuredNavigationSample#CallingPageDefaultCODEBEHIND2](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml.cs#callingpagedefaultcodebehind2)]
[!code-vb[StructuredNavigationSample#CallingPageDefaultCODEBEHIND2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CallingPage.xaml.vb#callingpagedefaultcodebehind2)]  
[!code-csharp[StructuredNavigationSample#CallingPageDefaultCODEBEHIND3](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml.cs#callingpagedefaultcodebehind3)]
[!code-vb[StructuredNavigationSample#CallingPageDefaultCODEBEHIND3](~/samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CallingPage.xaml.vb#callingpagedefaultcodebehind3)]  
  
### <a name="creating-a-page-function-to-call"></a><span data-ttu-id="b4958-132">Создание страничной функции для вызова</span><span class="sxs-lookup"><span data-stu-id="b4958-132">Creating a Page Function to Call</span></span>  
 <span data-ttu-id="b4958-133">Поскольку вызывающая страница может использовать вызываемую страницу для сбора и возврата данных от пользователя, <xref:System.Windows.Navigation.PageFunction%601> реализуется в виде универсального класса, тип аргумента которого определяет тип значения, возвращаемого вызываемой страницей.</span><span class="sxs-lookup"><span data-stu-id="b4958-133">Because the calling page can use the called page to collect and return data from the user, <xref:System.Windows.Navigation.PageFunction%601> is implemented as a generic class whose type argument specifies the type of the value that the called page will return.</span></span> <span data-ttu-id="b4958-134">Следующий код показывает начальную реализацию вызываемой страницы, используя <xref:System.Windows.Navigation.PageFunction%601>, который возвращает <xref:System.String>.</span><span class="sxs-lookup"><span data-stu-id="b4958-134">The following code shows the initial implementation of the called page, using a <xref:System.Windows.Navigation.PageFunction%601>, which returns a <xref:System.String>.</span></span>  
  
 [!code-xaml[StructuredNavigationSample#CalledPageFunctionMARKUP](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CalledPageFunction.xaml#calledpagefunctionmarkup)]  
  
 [!code-csharp[StructuredNavigationSample#CalledPageFunctionCODEBEHIND1](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CalledPageFunction.xaml.cs#calledpagefunctioncodebehind1)]
 [!code-vb[StructuredNavigationSample#CalledPageFunctionCODEBEHIND1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CalledPageFunction.xaml.vb#calledpagefunctioncodebehind1)]  
[!code-csharp[StructuredNavigationSample#CalledPageFunctionCODEBEHIND2](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CalledPageFunction.xaml.cs#calledpagefunctioncodebehind2)]
[!code-vb[StructuredNavigationSample#CalledPageFunctionCODEBEHIND2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CalledPageFunction.xaml.vb#calledpagefunctioncodebehind2)]  
  
 <span data-ttu-id="b4958-135">Объявление <xref:System.Windows.Navigation.PageFunction%601> похоже на объявление <xref:System.Windows.Controls.Page> с добавлением аргументов типа.</span><span class="sxs-lookup"><span data-stu-id="b4958-135">The declaration of a <xref:System.Windows.Navigation.PageFunction%601> is similar to the declaration of a <xref:System.Windows.Controls.Page> with the addition of the type arguments.</span></span> <span data-ttu-id="b4958-136">Как видно из примера кода, аргументы типа указаны и в разметке [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] с помощью атрибута `x:TypeArguments`, и в коде программной части с помощью стандартного синтаксиса аргумента универсального типа.</span><span class="sxs-lookup"><span data-stu-id="b4958-136">As you can see from the code example, the type arguments are specified in both [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] markup, using the `x:TypeArguments` attribute, and code-behind, using standard generic type argument syntax.</span></span>  
  
 <span data-ttu-id="b4958-137">Не нужно использовать только классы [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] в качестве аргументов типа.</span><span class="sxs-lookup"><span data-stu-id="b4958-137">You don't have to use only [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] classes as type arguments.</span></span> <span data-ttu-id="b4958-138">Объект <xref:System.Windows.Navigation.PageFunction%601> может быть вызван для сбора данных отдельного домена, которые абстрагированы как пользовательский тип.</span><span class="sxs-lookup"><span data-stu-id="b4958-138">A <xref:System.Windows.Navigation.PageFunction%601> could be called to gather domain-specific data that is abstracted as a custom type.</span></span> <span data-ttu-id="b4958-139">Ниже показано, как использовать пользовательский тип в качестве аргумента типа для <xref:System.Windows.Navigation.PageFunction%601>.</span><span class="sxs-lookup"><span data-stu-id="b4958-139">The following code shows how to use a custom type as a type argument for a <xref:System.Windows.Navigation.PageFunction%601>.</span></span>  
  
 [!code-csharp[CustomTypePageFunctionSnippets#CustomTypeCODE1](~/samples/snippets/csharp/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/CSharp/CustomType.cs#customtypecode1)]
 [!code-vb[CustomTypePageFunctionSnippets#CustomTypeCODE1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/VisualBasic/CustomType.vb#customtypecode1)]  
[!code-csharp[CustomTypePageFunctionSnippets#CustomTypeCODE2](~/samples/snippets/csharp/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/CSharp/CustomType.cs#customtypecode2)]
[!code-vb[CustomTypePageFunctionSnippets#CustomTypeCODE2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/VisualBasic/CustomType.vb#customtypecode2)]  
  
 [!code-xaml[CustomTypePageFunctionSnippets#CustomTypePageFunctionMARKUP1](~/samples/snippets/csharp/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/CSharp/CustomTypePageFunction.xaml#customtypepagefunctionmarkup1)]  
[!code-xaml[CustomTypePageFunctionSnippets#CustomTypePageFunctionMARKUP2](~/samples/snippets/csharp/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/CSharp/CustomTypePageFunction.xaml#customtypepagefunctionmarkup2)]  
  
 [!code-csharp[CustomTypePageFunctionSnippets#CustomTypePageFunctionCODEBEHIND1](~/samples/snippets/csharp/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/CSharp/CustomTypePageFunction.xaml.cs#customtypepagefunctioncodebehind1)]
 [!code-vb[CustomTypePageFunctionSnippets#CustomTypePageFunctionCODEBEHIND1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/VisualBasic/CustomTypePageFunction.xaml.vb#customtypepagefunctioncodebehind1)]  
[!code-csharp[CustomTypePageFunctionSnippets#CustomTypePageFunctionCODEBEHIND2](~/samples/snippets/csharp/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/CSharp/CustomTypePageFunction.xaml.cs#customtypepagefunctioncodebehind2)]
[!code-vb[CustomTypePageFunctionSnippets#CustomTypePageFunctionCODEBEHIND2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/CustomTypePageFunctionSnippets/VisualBasic/CustomTypePageFunction.xaml.vb#customtypepagefunctioncodebehind2)]  
  
 <span data-ttu-id="b4958-140">Аргументы типа для <xref:System.Windows.Navigation.PageFunction%601> обеспечивают основу для связи между вызывающей и вызываемой страницами, которые рассматриваются в следующих разделах.</span><span class="sxs-lookup"><span data-stu-id="b4958-140">The type arguments for the <xref:System.Windows.Navigation.PageFunction%601> provide the foundation for the communication between a calling page and the called page, which are discussed in the following sections.</span></span>  
  
 <span data-ttu-id="b4958-141">Как вы увидите, тип, который идентифицируется с помощью объявления <xref:System.Windows.Navigation.PageFunction%601> играет важную роль в возврате данных из <xref:System.Windows.Navigation.PageFunction%601> вызывающей странице.</span><span class="sxs-lookup"><span data-stu-id="b4958-141">As you'll see, the type that is identified with the declaration of a <xref:System.Windows.Navigation.PageFunction%601> plays an important role in returning data from a <xref:System.Windows.Navigation.PageFunction%601> to the calling page.</span></span>  
  
### <a name="calling-a-pagefunction-and-passing-parameters"></a><span data-ttu-id="b4958-142">Вызов PageFunction и передача параметров</span><span class="sxs-lookup"><span data-stu-id="b4958-142">Calling a PageFunction and Passing Parameters</span></span>  
 <span data-ttu-id="b4958-143">Чтобы вызвать страницу, вызывающая страница должна создать экземпляр вызываемой страницы и перейдите к нему с помощью <xref:System.Windows.Navigation.NavigationService.Navigate%2A> метод.</span><span class="sxs-lookup"><span data-stu-id="b4958-143">To call a page, the calling page must instantiate the called page and navigate to it using the <xref:System.Windows.Navigation.NavigationService.Navigate%2A> method.</span></span> <span data-ttu-id="b4958-144">Это позволяет вызывающей странице передавать вызываемой начальные данные, например, значения по умолчанию для данных, собираемых вызываемой страницей.</span><span class="sxs-lookup"><span data-stu-id="b4958-144">This allows the calling page to pass initial data to the called page, such as default values for the data being gathered by the called page.</span></span>  
  
 <span data-ttu-id="b4958-145">В следующем коде показана вызываемая страница с нестандартным конструктором, который принимает параметры от вызывающей страницы.</span><span class="sxs-lookup"><span data-stu-id="b4958-145">The following code shows the called page with a non-default constructor to accept parameters from the calling page.</span></span>  
  
 [!code-csharp[StructuredNavigationSample#AcceptsInitialDataCODEBEHIND1](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CalledPageFunction.xaml.cs#acceptsinitialdatacodebehind1)]
 [!code-vb[StructuredNavigationSample#AcceptsInitialDataCODEBEHIND1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CalledPageFunction.xaml.vb#acceptsinitialdatacodebehind1)]  
[!code-csharp[StructuredNavigationSample#AcceptsInitialDataCODEBEHIND2](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CalledPageFunction.xaml.cs#acceptsinitialdatacodebehind2)]
[!code-vb[StructuredNavigationSample#AcceptsInitialDataCODEBEHIND2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CalledPageFunction.xaml.vb#acceptsinitialdatacodebehind2)]  
[!code-csharp[StructuredNavigationSample#AcceptsInitialDataCODEBEHIND3](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CalledPageFunction.xaml.cs#acceptsinitialdatacodebehind3)]
[!code-vb[StructuredNavigationSample#AcceptsInitialDataCODEBEHIND3](~/samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CalledPageFunction.xaml.vb#acceptsinitialdatacodebehind3)]  
[!code-csharp[StructuredNavigationSample#AcceptsInitialDataCODEBEHIND4](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CalledPageFunction.xaml.cs#acceptsinitialdatacodebehind4)]
[!code-vb[StructuredNavigationSample#AcceptsInitialDataCODEBEHIND4](~/samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CalledPageFunction.xaml.vb#acceptsinitialdatacodebehind4)]  
  
 <span data-ttu-id="b4958-146">В следующем коде показано вызывающая страница, обрабатывающая <xref:System.Windows.Documents.Hyperlink.Click> событие <xref:System.Windows.Documents.Hyperlink> для создания экземпляра вызываемой страницы и передачи ей исходного строкового параметра.</span><span class="sxs-lookup"><span data-stu-id="b4958-146">The following code shows the calling page handling the <xref:System.Windows.Documents.Hyperlink.Click> event of the <xref:System.Windows.Documents.Hyperlink> to instantiate the called page and pass it an initial string value.</span></span>  
  
 [!code-xaml[StructuredNavigationSample#PassingDataMARKUP2](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml#passingdatamarkup2)]  
[!code-csharp[StructuredNavigationSample#PassingDataCODEBEHIND1](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml.cs#passingdatacodebehind1)]
[!code-vb[StructuredNavigationSample#PassingDataCODEBEHIND1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CallingPage.xaml.vb#passingdatacodebehind1)]  
[!code-csharp[StructuredNavigationSample#PassingDataCODEBEHIND2](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml.cs#passingdatacodebehind2)]
[!code-vb[StructuredNavigationSample#PassingDataCODEBEHIND2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CallingPage.xaml.vb#passingdatacodebehind2)]  
[!code-csharp[StructuredNavigationSample#PassingDataCODEBEHIND3](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml.cs#passingdatacodebehind3)]
[!code-vb[StructuredNavigationSample#PassingDataCODEBEHIND3](~/samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CallingPage.xaml.vb#passingdatacodebehind3)]  
  
 <span data-ttu-id="b4958-147">Необязательно передавать параметры вызываемой странице.</span><span class="sxs-lookup"><span data-stu-id="b4958-147">You are not required to pass parameters to the called page.</span></span> <span data-ttu-id="b4958-148">Вместо этого можно сделать следующее.</span><span class="sxs-lookup"><span data-stu-id="b4958-148">Instead, you could do the following:</span></span>  
  
- <span data-ttu-id="b4958-149">Из вызывающей страницы:</span><span class="sxs-lookup"><span data-stu-id="b4958-149">From the calling page:</span></span>  
  
    1. <span data-ttu-id="b4958-150">Создать экземпляр вызываемой <xref:System.Windows.Navigation.PageFunction%601> с помощью конструктора по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="b4958-150">Instantiate the called <xref:System.Windows.Navigation.PageFunction%601> using the default constructor.</span></span>  
  
    2. <span data-ttu-id="b4958-151">Параметры в Store <xref:System.Windows.Application.Properties%2A>.</span><span class="sxs-lookup"><span data-stu-id="b4958-151">Store the parameters in <xref:System.Windows.Application.Properties%2A>.</span></span>  
  
    3. <span data-ttu-id="b4958-152">Перейдите к вызываемому <xref:System.Windows.Navigation.PageFunction%601>.</span><span class="sxs-lookup"><span data-stu-id="b4958-152">Navigate to the called <xref:System.Windows.Navigation.PageFunction%601>.</span></span>  
  
- <span data-ttu-id="b4958-153">Из вызванной <xref:System.Windows.Navigation.PageFunction%601>:</span><span class="sxs-lookup"><span data-stu-id="b4958-153">From the called <xref:System.Windows.Navigation.PageFunction%601>:</span></span>  
  
    - <span data-ttu-id="b4958-154">Получить и использовать параметры, сохраненные в <xref:System.Windows.Application.Properties%2A>.</span><span class="sxs-lookup"><span data-stu-id="b4958-154">Retrieve and use the parameters stored in <xref:System.Windows.Application.Properties%2A>.</span></span>  
  
 <span data-ttu-id="b4958-155">Однако вскоре вы увидите, что и в этом случае потребуется код для создания экземпляра и перехода к вызываемой странице для сбора данных, возвращаемых вызываемой страницей.</span><span class="sxs-lookup"><span data-stu-id="b4958-155">But, as you'll see shortly, you'll still need use code to instantiate and navigate to the called page to collect the data returned by the called page.</span></span> <span data-ttu-id="b4958-156">По этой причине <xref:System.Windows.Navigation.PageFunction%601> должен поддерживаться; в противном случае — значение, в следующий раз вы переходите <xref:System.Windows.Navigation.PageFunction%601>, [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] создает <xref:System.Windows.Navigation.PageFunction%601> с помощью конструктора по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="b4958-156">For this reason, the <xref:System.Windows.Navigation.PageFunction%601> needs to be kept alive; otherwise, the next time you navigate to the <xref:System.Windows.Navigation.PageFunction%601>, [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] instantiates the <xref:System.Windows.Navigation.PageFunction%601> using the default constructor.</span></span>  
  
 <span data-ttu-id="b4958-157">Однако до возврата вызываемой страницы она должна вернуть данные, которые могут быть получены вызывающей страницей.</span><span class="sxs-lookup"><span data-stu-id="b4958-157">Before the called page can return, however, it needs to return data that can be retrieved by the calling page.</span></span>  
  
### <a name="returning-task-result-and-task-data-from-a-task-to-a-calling-page"></a><span data-ttu-id="b4958-158">Возврат результата и данных задачи из задачи на вызывающую страницу</span><span class="sxs-lookup"><span data-stu-id="b4958-158">Returning Task Result and Task Data from a Task to a Calling Page</span></span>  
 <span data-ttu-id="b4958-159">Когда пользователь закончит использовать вызываемую страницу (в данном примере он нажимает кнопку "ОК" или "Отмена"), необходим возврат вызываемой страницы.</span><span class="sxs-lookup"><span data-stu-id="b4958-159">Once the user has finished using the called page, signified in this example by pressing either the OK or Cancel buttons, the called page needs to return.</span></span> <span data-ttu-id="b4958-160">Поскольку вызывающая страница использовала вызываемую для сбора данных от пользователя, вызывающей странице необходимо два типа информации:</span><span class="sxs-lookup"><span data-stu-id="b4958-160">Since the calling page used the called page to collect data from the user, the calling page requires two types of information:</span></span>  
  
1. <span data-ttu-id="b4958-161">Отменил ли пользователь вызываемую страницу (нажав кнопку "ОК" или "Отмена" в этом примере).</span><span class="sxs-lookup"><span data-stu-id="b4958-161">Whether the user canceled the called page (by pressing either the OK button or the Cancel button in this example).</span></span> <span data-ttu-id="b4958-162">Это позволяет вызывающей странице определить, следует ли обрабатывать данные, собранные вызывающей страницей от пользователя.</span><span class="sxs-lookup"><span data-stu-id="b4958-162">This allows the calling page to determine whether to process the data that the calling page gathered from the user.</span></span>  
  
2. <span data-ttu-id="b4958-163">Данные, предоставленные пользователем.</span><span class="sxs-lookup"><span data-stu-id="b4958-163">The data that was provided by the user.</span></span>  
  
 <span data-ttu-id="b4958-164">Для получения сведений, <xref:System.Windows.Navigation.PageFunction%601> реализует <xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A> метод.</span><span class="sxs-lookup"><span data-stu-id="b4958-164">To return information, <xref:System.Windows.Navigation.PageFunction%601> implements the <xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A> method.</span></span> <span data-ttu-id="b4958-165">В следующем коде показан его вызов.</span><span class="sxs-lookup"><span data-stu-id="b4958-165">The following code shows how to call it.</span></span>  
  
 [!code-csharp[StructuredNavigationSample#ReturnCODEBEHIND1](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CalledPageFunction.xaml.cs#returncodebehind1)]
 [!code-vb[StructuredNavigationSample#ReturnCODEBEHIND1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CalledPageFunction.xaml.vb#returncodebehind1)]  
[!code-csharp[StructuredNavigationSample#ReturnCODEBEHIND2](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CalledPageFunction.xaml.cs#returncodebehind2)]
[!code-vb[StructuredNavigationSample#ReturnCODEBEHIND2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CalledPageFunction.xaml.vb#returncodebehind2)]  
  
 <span data-ttu-id="b4958-166">В этом примере, если пользователь нажимает кнопку "Отмена", значение `null` возвращается вызывающей странице.</span><span class="sxs-lookup"><span data-stu-id="b4958-166">In this example, if a user presses the Cancel button, a value of `null` is returned to the calling page.</span></span> <span data-ttu-id="b4958-167">Если нажата кнопка "ОК", возвращается строковый параметр, предоставленный пользователем.</span><span class="sxs-lookup"><span data-stu-id="b4958-167">If the OK button is pressed instead, the string value provided by the user is returned.</span></span> <span data-ttu-id="b4958-168"><xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A> является `protected virtual` метод, который вы вызываете для возврата данных вызывающей странице.</span><span class="sxs-lookup"><span data-stu-id="b4958-168"><xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A> is a `protected virtual` method that you call to return your data to the calling page.</span></span> <span data-ttu-id="b4958-169">Данные необходимо упаковать в экземпляре универсального <xref:System.Windows.Navigation.ReturnEventArgs%601> тип, тип аргумента которого определяет тип значения, <xref:System.Windows.Navigation.ReturnEventArgs%601.Result%2A> возвращает.</span><span class="sxs-lookup"><span data-stu-id="b4958-169">Your data needs to be packaged in an instance of the generic <xref:System.Windows.Navigation.ReturnEventArgs%601> type, whose type argument specifies the type of value that <xref:System.Windows.Navigation.ReturnEventArgs%601.Result%2A> returns.</span></span> <span data-ttu-id="b4958-170">Таким образом, при объявлении <xref:System.Windows.Navigation.PageFunction%601> с определенным аргументом типа, вы заявляете, что <xref:System.Windows.Navigation.PageFunction%601> возвращает экземпляр типа, указанного аргументом типа.</span><span class="sxs-lookup"><span data-stu-id="b4958-170">In this way, when you declare a <xref:System.Windows.Navigation.PageFunction%601> with a particular type argument, you are stating that a <xref:System.Windows.Navigation.PageFunction%601> will return an instance of the type that is specified by the type argument.</span></span> <span data-ttu-id="b4958-171">В этом примере аргумент типа и, следовательно, возвращаемое значение имеет тип <xref:System.String>.</span><span class="sxs-lookup"><span data-stu-id="b4958-171">In this example, the type argument and, consequently, the return value is of type <xref:System.String>.</span></span>  
  
 <span data-ttu-id="b4958-172">Когда <xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A> называется вызывающей странице требуется способ получения возвращаемого значения <xref:System.Windows.Navigation.PageFunction%601>.</span><span class="sxs-lookup"><span data-stu-id="b4958-172">When <xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A> is called, the calling page needs some way of receiving the return value of the <xref:System.Windows.Navigation.PageFunction%601>.</span></span> <span data-ttu-id="b4958-173">По этой причине <xref:System.Windows.Navigation.PageFunction%601> реализует <xref:System.Windows.Navigation.PageFunction%601.Return> событие для вызывающей страницы для обработки.</span><span class="sxs-lookup"><span data-stu-id="b4958-173">For this reason, <xref:System.Windows.Navigation.PageFunction%601> implements the <xref:System.Windows.Navigation.PageFunction%601.Return> event for calling pages to handle.</span></span> <span data-ttu-id="b4958-174">При <xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A> вызове <xref:System.Windows.Navigation.PageFunction%601.Return> вызывается, поэтому вызывающая страница может зарегистрироваться с <xref:System.Windows.Navigation.PageFunction%601.Return> для получения уведомлений.</span><span class="sxs-lookup"><span data-stu-id="b4958-174">When <xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A> is called, <xref:System.Windows.Navigation.PageFunction%601.Return> is raised, so the calling page can register with <xref:System.Windows.Navigation.PageFunction%601.Return> to receive the notification.</span></span>  
  
 [!code-csharp[StructuredNavigationSample#ProcessResultCODEBEHIND1](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml.cs#processresultcodebehind1)]
 [!code-vb[StructuredNavigationSample#ProcessResultCODEBEHIND1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CallingPage.xaml.vb#processresultcodebehind1)]  
[!code-csharp[StructuredNavigationSample#ProcessResultCODEBEHIND2](~/samples/snippets/csharp/VS_Snippets_Wpf/StructuredNavigationSample/CSharp/CallingPage.xaml.cs#processresultcodebehind2)]
[!code-vb[StructuredNavigationSample#ProcessResultCODEBEHIND2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/StructuredNavigationSample/VisualBasic/CallingPage.xaml.vb#processresultcodebehind2)]  
  
### <a name="removing-task-pages-when-a-task-completes"></a><span data-ttu-id="b4958-175">Удаление страниц задачи после завершения задачи</span><span class="sxs-lookup"><span data-stu-id="b4958-175">Removing Task Pages When a Task Completes</span></span>  
 <span data-ttu-id="b4958-176">Когда вызываемая страница возвращается и пользователь не отменяет ее, вызывающая страница будет обрабатывать данные, предоставленные пользователем и возвращенные вызываемой страницей.</span><span class="sxs-lookup"><span data-stu-id="b4958-176">When a called page returns, and the user didn't cancel the called page, the calling page will process the data that was provided by the user and also returned from the called page.</span></span> <span data-ttu-id="b4958-177">Сбор данных таким способом, как правило, является изолированным действием. Когда возвращается вызываемая страница, вызывающей странице необходимо создать новую вызывающую страницу и перейти к ней для сбора дополнительных данных.</span><span class="sxs-lookup"><span data-stu-id="b4958-177">Data acquisition in this way is usually an isolated activity; when the called page returns, the calling page needs to create and navigate to a new calling page to capture more data.</span></span>  
  
 <span data-ttu-id="b4958-178">Однако, если вызываемая страница не удалена из журнала, пользователь сможет перейти обратно к предыдущему экземпляру вызывающей страницы.</span><span class="sxs-lookup"><span data-stu-id="b4958-178">However, unless a called page is removed from the journal, a user will be able to navigate back to a previous instance of the calling page.</span></span> <span data-ttu-id="b4958-179">Ли <xref:System.Windows.Navigation.PageFunction%601> сохраняется в журнале, определяется <xref:System.Windows.Navigation.PageFunctionBase.RemoveFromJournal%2A> свойство.</span><span class="sxs-lookup"><span data-stu-id="b4958-179">Whether a <xref:System.Windows.Navigation.PageFunction%601> is retained in the journal is determined by the <xref:System.Windows.Navigation.PageFunctionBase.RemoveFromJournal%2A> property.</span></span> <span data-ttu-id="b4958-180">По умолчанию — страничная функция автоматически удаляется, когда <xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A> называется, поскольку <xref:System.Windows.Navigation.PageFunctionBase.RemoveFromJournal%2A> присваивается `true`.</span><span class="sxs-lookup"><span data-stu-id="b4958-180">By default, a page function is automatically removed when <xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A> is called because <xref:System.Windows.Navigation.PageFunctionBase.RemoveFromJournal%2A> is set to `true`.</span></span> <span data-ttu-id="b4958-181">Чтобы сохранить страничную функцию в журнале навигации после <xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A> вызывается, задайте <xref:System.Windows.Navigation.PageFunctionBase.RemoveFromJournal%2A> для `false`.</span><span class="sxs-lookup"><span data-stu-id="b4958-181">To keep a page function in navigation history after <xref:System.Windows.Navigation.PageFunction%601.OnReturn%2A> is called, set <xref:System.Windows.Navigation.PageFunctionBase.RemoveFromJournal%2A> to `false`.</span></span>  
  
<a name="Other_Types_of_Structured_Navigation"></a>   
## <a name="other-types-of-structured-navigation"></a><span data-ttu-id="b4958-182">Другие типы структурной навигации</span><span class="sxs-lookup"><span data-stu-id="b4958-182">Other Types of Structured Navigation</span></span>  
 <span data-ttu-id="b4958-183">В этом разделе показан самый простой метод <xref:System.Windows.Navigation.PageFunction%601> для поддержки вызова/возврата структурной навигации.</span><span class="sxs-lookup"><span data-stu-id="b4958-183">This topic illustrates the most basic use of a <xref:System.Windows.Navigation.PageFunction%601> to support call/return structured navigation.</span></span> <span data-ttu-id="b4958-184">На этой основе можно создавать более сложные типы структурной навигации.</span><span class="sxs-lookup"><span data-stu-id="b4958-184">This foundation provides you with the ability to create more complex types of structured navigation.</span></span>  
  
 <span data-ttu-id="b4958-185">Например, иногда вызывающей странице требуется несколько страниц для сбора достаточного количества данных от пользователя или выполнения задачи.</span><span class="sxs-lookup"><span data-stu-id="b4958-185">For example, sometimes multiple pages are required by a calling page to gather enough data from a user or to perform a task.</span></span> <span data-ttu-id="b4958-186">Использование нескольких страниц называется "мастер".</span><span class="sxs-lookup"><span data-stu-id="b4958-186">The use of multiple pages is referred to as a "wizard".</span></span>  
  
 <span data-ttu-id="b4958-187">В других случаях для эффективной работы приложения могут иметь сложные топологии переходов, зависящие от структурной навигации.</span><span class="sxs-lookup"><span data-stu-id="b4958-187">In other cases, applications may have complex navigation topologies that depend on structured navigation to operate effectively.</span></span> <span data-ttu-id="b4958-188">Дополнительную информацию см. в разделе [Общие сведения о топологиях навигации](navigation-topologies-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b4958-188">For more information, see [Navigation Topologies Overview](navigation-topologies-overview.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b4958-189">См. также</span><span class="sxs-lookup"><span data-stu-id="b4958-189">See also</span></span>

- <xref:System.Windows.Navigation.PageFunction%601>
- <xref:System.Windows.Navigation.NavigationService>
- [<span data-ttu-id="b4958-190">Общие сведения о топологиях навигации</span><span class="sxs-lookup"><span data-stu-id="b4958-190">Navigation Topologies Overview</span></span>](navigation-topologies-overview.md)
