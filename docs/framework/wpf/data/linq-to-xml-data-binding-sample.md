---
title: Пример привязки данных LINQ to XML
ms.date: 10/22/2019
ms.topic: sample
helpviewer_keywords:
- linq to xml data binding sample
ms.openlocfilehash: aac814e4768a863a93e69e34cd18c941a9b35c89
ms.sourcegitcommit: 82f94a44ad5c64a399df2a03fa842db308185a76
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/25/2019
ms.locfileid: "72921224"
---
# <a name="linq-to-xml-data-binding-sample"></a>Пример привязки данных LINQ to XML

В этой статье описывается пример LinqToXmlDataBinding — приложение Windows Presentation Foundation (WPF), которое привязывает компоненты пользовательского интерфейса к внедренному источнику XML-данных.

## <a name="overview"></a>Обзор

Пример LinqToXmlDataBinding — это приложение Windows Presentation Foundation (WPF), которое содержит C# исходные файлы XAML и. Внедренный XML-документ определяет список книг. Приложение позволяет пользователю просматривать, добавлять, удалять и изменять записи книги.

Существует два основных исходных файла:

- Файл [L2DBForm.xaml](l2dbform-xaml-source-code.md) содержит декларацию кода XAML для пользовательского интерфейса главного окна. Он также содержит раздел ресурсов окна, который определяет поставщика данных и внедренный XML-документ для списков книг.

- Файл [L2DBForm.xaml.cs](l2dbform-xaml-cs-source-code.md) содержит методы инициализации и обработки событий, связанные с этим пользовательским интерфейсом.

Главное окно разделено по вертикали на четыре интерфейсных раздела.

- Раздел **XML** отображает необработанный код внедренного листинга книг на языке XML.

- Раздел **Список книг** отображает выполненные в формате стандартного текста записи книг и дает пользователю возможность выбирать и удалять отдельные записи.

- Раздел **Правка выделенной книги** позволяет пользователю изменять значения, связанные с книжной записью, выделенной в данный момент.

- Раздел **Добавить новую книгу** позволяет создавать новую запись в книге на базе значений, введенных пользователем.

## <a name="run-the-sample"></a>Запуск примера

В этом разделе показано, как создать и построить проект LinqToXmlDataBinding в Visual Studio и как запустить полученное приложение LinqToXmlDataBinding Windows Presentation Foundation (WPF).

### <a name="create-the-project"></a>Создание проекта

1. Запустите Visual Studio и создайте **приложение WPF** на C# с именем **LinqToXmlDataBinding**.

   В проекте необходимо использовать .NET Framework 3.5 (или более поздней версии).

1. Добавьте в проект ссылки для следующих сборок .NET, если они еще не заданы:

    - System.Data
    - System.Data.DataSetExtensions
    - System.Xml
    - System.Xml

1. Выполните сборку решения, нажав **Ctrl**+**Shift**+**B**, а затем запустите его с помощью клавиши **F5**.

   Проект должен быть скомпилирован без ошибок и выполнен как обычное приложение WPF.

### <a name="add-code"></a>Добавить код

1. В **обозревателе решений** переименуйте исходный файл **Window1.xaml** в **L2XDBForm.xaml**.

   Зависимый исходный файл Window1.xaml.cs автоматически переименовывается в L2XDBForm.xaml.cs.

1. Замените исходный код, обнаруженный в файле **L2XDBForm. XAML** , [исходным кодом L2DBForm. XAML](l2dbform-xaml-source-code.md). Для работы с этим файлом используйте представление источника данных XAML.

1. Аналогичным образом замените источник в **L2XDBForm.XAML.CS** на [Исходный код L2DBForm.XAML.CS](l2dbform-xaml-cs-source-code.md).

1. В файле **app. XAML**замените все вхождения строки **Window1. XAML** на **L2XDBForm. XAML**.

1. Выполните сборку решения, нажав **Ctrl**+**Shift**+**B**.

### <a name="run-the-app"></a>Запуск приложения

Приложение LinqToXmlDataBinding позволяет пользователю просматривать список книг, сохраненных в виде внедренного XML-элемента, и управлять им. Запустите приложение, нажав клавишу **F5** (начать отладку) или **клавишу CTRL**+**F5** (Запуск без отладки).

Откроется окно программы с заголовком **Привязка данных WPF с помощью LINQ to XML**.

В верхней части пользовательского интерфейса отображается необработанный **код XML** , представляющий список книг. Он выводится с помощью элемента управления WPF <xref:System.Windows.Controls.TextBlock>, не включающего взаимодействие с мышью или клавиатурой.

Второй вертикальный раздел, обозначенный как **Список книг**, отображает упорядоченный список книг в виде простого текста. В нем используется элемент управления <xref:System.Windows.Controls.ListBox>, допускающий выбор с помощью мыши или клавиатуры.

### <a name="add-and-delete-books"></a>Добавление и удаление книг

Чтобы добавить новую книгу в список, введите значения в поле **идентификатор** и **значение** <xref:System.Windows.Controls.TextBox> элементы управления в последнем разделе, **добавьте новую книгу**, а затем выберите **Добавить книгу**. Книга добавляется в список в списках «книга» и «XML». Эта программа не выполняет проверку правильности входных значений.

Чтобы удалить существующую книгу из списка, выберите ее в разделе **список книг** , а затем выберите **Удалить выбранную книгу**. Запись книги удаляется из списков книг и необработанных источников XML.

### <a name="edit-a-book-entry"></a>Изменение записи книги

1. Выделите книгу во втором разделе **Список книг**.

   Его текущие значения отображаются в разделе **изменение выбранной книги** .

1. Измените значения с клавиатуры. Как только <xref:System.Windows.Controls.TextBox> управления теряет фокус, изменения автоматически распространяются на XML-источники и списки книг.
