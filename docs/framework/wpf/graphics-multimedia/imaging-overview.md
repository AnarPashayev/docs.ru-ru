---
title: Общие сведения об обработке изображений
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- metadata [WPF], images
- displaying images [WPF]
- Imaging API [WPF]
- image metadata [WPF]
- converting images [WPF]
- encoding image formats [WPF]
- format decoding for images [WPF]
- painting with images [WPF]
- stretching images [WPF]
- images [WPF], about imaging
- format encoding for images [WPF]
- cropping images [WPF]
- decoding image formats [WPF]
- rotating images [WPF]
ms.assetid: 72aad87a-e6f3-4937-94cd-a18b7766e990
ms.openlocfilehash: 6cb389cd0458d1c9e7af94586c394764f01e4bab
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "64665186"
---
# <a name="imaging-overview"></a><span data-ttu-id="d178b-102">Общие сведения об обработке изображений</span><span class="sxs-lookup"><span data-stu-id="d178b-102">Imaging Overview</span></span>
<span data-ttu-id="d178b-103">В этом разделе содержатся общие сведения о платформе [!INCLUDE[TLA#tla_wic](../../../../includes/tlasharptla-wic-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d178b-103">This topic provides an introduction to the [!INCLUDE[TLA#tla_wic](../../../../includes/tlasharptla-wic-md.md)].</span></span> <span data-ttu-id="d178b-104">Платформа [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] позволяет разработчикам выполнять отображение, преобразование и форматирование изображений.</span><span class="sxs-lookup"><span data-stu-id="d178b-104">[!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] enables developers to display, transform, and format images.</span></span>  

<a name="_wpfImaging"></a>   
## <a name="wpf-imaging-component"></a><span data-ttu-id="d178b-105">Компонент обработки изображений WPF</span><span class="sxs-lookup"><span data-stu-id="d178b-105">WPF Imaging Component</span></span>  
 <span data-ttu-id="d178b-106">Платформа [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] предоставляет значительные расширения возможностей в обработке изображений в [!INCLUDE[TLA#tla_win](../../../../includes/tlasharptla-win-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d178b-106">[!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] provides significant enhancements in imaging capabilities within [!INCLUDE[TLA#tla_win](../../../../includes/tlasharptla-win-md.md)].</span></span> <span data-ttu-id="d178b-107">Возможности обработки изображений, например вывод растрового изображения или использование изображения на общем элементе управления были ранее реализованы с помощью библиотек [!INCLUDE[TLA#tla_gdi](../../../../includes/tlasharptla-gdi-md.md)] и [!INCLUDE[TLA#tla_gdiplus](../../../../includes/tlasharptla-gdiplus-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d178b-107">Imaging capabilities, such as displaying a bitmap or using an image on a common control were previously reliant upon the [!INCLUDE[TLA#tla_gdi](../../../../includes/tlasharptla-gdi-md.md)] or [!INCLUDE[TLA#tla_gdiplus](../../../../includes/tlasharptla-gdiplus-md.md)] libraries.</span></span> <span data-ttu-id="d178b-108">Эти библиотеки [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] обеспечивают базовые функции обработки изображений, но в них отсутствуют такие возможности, как поддержка расширяемости кодеков и изображений высокого качества.</span><span class="sxs-lookup"><span data-stu-id="d178b-108">These [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] provide baseline imaging functionality, but lack features such as support for codec extensibility and high fidelity image support.</span></span> <span data-ttu-id="d178b-109">При разработке платформы [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] были устранены недостатки [!INCLUDE[TLA2#tla_gdi](../../../../includes/tla2sharptla-gdi-md.md)] и [!INCLUDE[TLA2#tla_gdiplus](../../../../includes/tla2sharptla-gdiplus-md.md)]. Новый набор [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] позволяет отображать и использовать изображения в приложениях.</span><span class="sxs-lookup"><span data-stu-id="d178b-109">[!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] is designed to overcome the shortcomings of [!INCLUDE[TLA2#tla_gdi](../../../../includes/tla2sharptla-gdi-md.md)] and [!INCLUDE[TLA2#tla_gdiplus](../../../../includes/tla2sharptla-gdiplus-md.md)] and provide a new set of [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] to display and use images within your applications.</span></span>  
  
 <span data-ttu-id="d178b-110">Существует два способа доступа к [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] — управляемый компонент и неуправляемый компонент.</span><span class="sxs-lookup"><span data-stu-id="d178b-110">There are two ways to access the [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)], a managed component and an unmanaged component.</span></span> <span data-ttu-id="d178b-111">Неуправляемый компонент предоставляет следующие возможности.</span><span class="sxs-lookup"><span data-stu-id="d178b-111">The unmanaged component provides the following features.</span></span>  
  
- <span data-ttu-id="d178b-112">Модель расширяемости для новых или собственных форматов изображений.</span><span class="sxs-lookup"><span data-stu-id="d178b-112">Extensibility model for new or proprietary image formats.</span></span>  
  
- <span data-ttu-id="d178b-113">Повышение производительности и безопасности при работе с собственными форматами изображений, включая [!INCLUDE[TLA#tla_bmp](../../../../includes/tlasharptla-bmp-md.md)], [!INCLUDE[TLA#tla_jpegorg](../../../../includes/tlasharptla-jpegorg-md.md)], [!INCLUDE[TLA#tla_png](../../../../includes/tlasharptla-png-md.md)], [!INCLUDE[TLA#tla_tiff](../../../../includes/tlasharptla-tiff-md.md)], [!INCLUDE[TLA#tla_wdp](../../../../includes/tlasharptla-wdp-md.md)], [!INCLUDE[TLA#tla_gif](../../../../includes/tlasharptla-gif-md.md)] и формат значка (ICO).</span><span class="sxs-lookup"><span data-stu-id="d178b-113">Improved performance and security on native image formats including [!INCLUDE[TLA#tla_bmp](../../../../includes/tlasharptla-bmp-md.md)], [!INCLUDE[TLA#tla_jpegorg](../../../../includes/tlasharptla-jpegorg-md.md)], [!INCLUDE[TLA#tla_png](../../../../includes/tlasharptla-png-md.md)], [!INCLUDE[TLA#tla_tiff](../../../../includes/tlasharptla-tiff-md.md)], [!INCLUDE[TLA#tla_wdp](../../../../includes/tlasharptla-wdp-md.md)], [!INCLUDE[TLA#tla_gif](../../../../includes/tlasharptla-gif-md.md)], and icon (.ico).</span></span>  
  
- <span data-ttu-id="d178b-114">Сохранение изображений с большой глубиной цвета — до 8 бит на канал (32 бита на пиксель).</span><span class="sxs-lookup"><span data-stu-id="d178b-114">Preservation of high bit-depth image data up to 8 bits per channel (32 bits per pixel).</span></span>  
  
- <span data-ttu-id="d178b-115">Неразрушающее масштабирование, обрезка и повороты.</span><span class="sxs-lookup"><span data-stu-id="d178b-115">Nondestructive image scaling, cropping, and rotations.</span></span>  
  
- <span data-ttu-id="d178b-116">Упрощенное управление цветом.</span><span class="sxs-lookup"><span data-stu-id="d178b-116">Simplified color management.</span></span>  
  
- <span data-ttu-id="d178b-117">Поддержка собственных метаданных в файле.</span><span class="sxs-lookup"><span data-stu-id="d178b-117">Support for in-file, proprietary metadata.</span></span>  
  
- <span data-ttu-id="d178b-118">Управляемый компонент использует неуправляемую инфраструктуру для обеспечения плавной интеграции изображений с другими функциями [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], такими как [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)], анимация и графика.</span><span class="sxs-lookup"><span data-stu-id="d178b-118">The managed component utilizes the unmanaged infrastructure to provide seamless integration of images with other [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] features such as [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)], animation, and graphics.</span></span> <span data-ttu-id="d178b-119">Управляемый компонент также использует преимущества Windows Presentation Foundation (WPF) работы с образами модели расширяемости кодека которая позволяет автоматически распознавать новые форматы изображений в [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] приложений.</span><span class="sxs-lookup"><span data-stu-id="d178b-119">The managed component also benefits from the Windows Presentation Foundation (WPF) imaging codec extensibility model which enables automatic recognition of new image formats in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] applications.</span></span>  
  
 <span data-ttu-id="d178b-120">Большинство управляемых [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] находятся в <xref:System.Windows.Media.Imaging?displayProperty=nameWithType> пространства имен, хотя несколько важных типов, таких как <xref:System.Windows.Media.ImageBrush> и <xref:System.Windows.Media.ImageDrawing> находятся в <xref:System.Windows.Media?displayProperty=nameWithType> пространства имен и <xref:System.Windows.Controls.Image> находится в <xref:System.Windows.Controls?displayProperty=nameWithType> пространства имен.</span><span class="sxs-lookup"><span data-stu-id="d178b-120">The majority of the managed [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] reside in the <xref:System.Windows.Media.Imaging?displayProperty=nameWithType> namespace, though several important types, such as <xref:System.Windows.Media.ImageBrush> and <xref:System.Windows.Media.ImageDrawing> reside in the <xref:System.Windows.Media?displayProperty=nameWithType> namespace and <xref:System.Windows.Controls.Image> resides in the <xref:System.Windows.Controls?displayProperty=nameWithType> namespace.</span></span>  
  
 <span data-ttu-id="d178b-121">В этом разделе содержатся дополнительные сведения об управляемом компоненте.</span><span class="sxs-lookup"><span data-stu-id="d178b-121">This topic provides additional information about the managed component.</span></span> <span data-ttu-id="d178b-122">Дополнительные сведения о неуправляемом компоненте [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] см. в документации по [неуправляемому компоненту обработки изображений WPF](/windows/desktop/wic/-wic-lh).</span><span class="sxs-lookup"><span data-stu-id="d178b-122">For more information on the unmanaged [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] see the [Unmanaged WPF Imaging Component](/windows/desktop/wic/-wic-lh) documentation.</span></span>  
  
<a name="_imageformats"></a>   
## <a name="wpf-image-formats"></a><span data-ttu-id="d178b-123">Форматы изображений в WPF</span><span class="sxs-lookup"><span data-stu-id="d178b-123">WPF Image Formats</span></span>  
 <span data-ttu-id="d178b-124">Для кодирования и декодирования конкретного формата мультимедиа используются кодеки.</span><span class="sxs-lookup"><span data-stu-id="d178b-124">A codec is used to decode or encode a specific media format.</span></span> <span data-ttu-id="d178b-125">Платформа [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] имеет в своем составе кодеки для форматов изображений [!INCLUDE[TLA2#tla_bmp](../../../../includes/tla2sharptla-bmp-md.md)], [!INCLUDE[TLA2#tla_jpeg](../../../../includes/tla2sharptla-jpeg-md.md)], [!INCLUDE[TLA2#tla_png](../../../../includes/tla2sharptla-png-md.md)], [!INCLUDE[TLA2#tla_tiff](../../../../includes/tla2sharptla-tiff-md.md)], [!INCLUDE[TLA2#tla_wdp](../../../../includes/tla2sharptla-wdp-md.md)], [!INCLUDE[TLA2#tla_gif](../../../../includes/tla2sharptla-gif-md.md)] и ICON.</span><span class="sxs-lookup"><span data-stu-id="d178b-125">[!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] includes a codec  for [!INCLUDE[TLA2#tla_bmp](../../../../includes/tla2sharptla-bmp-md.md)], [!INCLUDE[TLA2#tla_jpeg](../../../../includes/tla2sharptla-jpeg-md.md)], [!INCLUDE[TLA2#tla_png](../../../../includes/tla2sharptla-png-md.md)], [!INCLUDE[TLA2#tla_tiff](../../../../includes/tla2sharptla-tiff-md.md)], [!INCLUDE[TLA2#tla_wdp](../../../../includes/tla2sharptla-wdp-md.md)], [!INCLUDE[TLA2#tla_gif](../../../../includes/tla2sharptla-gif-md.md)], and ICON image formats.</span></span> <span data-ttu-id="d178b-126">Каждый из этих кодеков позволяет приложениям декодировать и, за исключением формата ICON, кодировать изображения соответствующих форматов.</span><span class="sxs-lookup"><span data-stu-id="d178b-126">Each of these codecs enable applications to decode and, with the exception of ICON, encode their respective image formats.</span></span>  
  
 <span data-ttu-id="d178b-127"><xref:System.Windows.Media.Imaging.BitmapSource> важным классом, используемым для декодирования и кодирования изображений.</span><span class="sxs-lookup"><span data-stu-id="d178b-127"><xref:System.Windows.Media.Imaging.BitmapSource> is an important class used in the decoding and encoding of images.</span></span> <span data-ttu-id="d178b-128">Это основной строительный блок конвейера [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)]. Он представляет отдельный постоянный набор точек определенного размера и разрешения.</span><span class="sxs-lookup"><span data-stu-id="d178b-128">It is the basic building block of the [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] pipeline and represents a single, constant set of pixels at a certain size and resolution.</span></span> <span data-ttu-id="d178b-129">Объект <xref:System.Windows.Media.Imaging.BitmapSource> можно отдельных кадров из многокадрового изображения, или он может быть результатом преобразования, выполненного на <xref:System.Windows.Media.Imaging.BitmapSource>.</span><span class="sxs-lookup"><span data-stu-id="d178b-129">A <xref:System.Windows.Media.Imaging.BitmapSource> can be an individual frame of a multiple frame image, or it can be the result of a transform performed on a <xref:System.Windows.Media.Imaging.BitmapSource>.</span></span> <span data-ttu-id="d178b-130">Он является родителем многих основных классов, используемых в [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] imaging, такие как <xref:System.Windows.Media.Imaging.BitmapFrame>.</span><span class="sxs-lookup"><span data-stu-id="d178b-130">It is the parent of many of the primary classes used in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] imaging such as <xref:System.Windows.Media.Imaging.BitmapFrame>.</span></span>  
  
 <span data-ttu-id="d178b-131">Объект <xref:System.Windows.Media.Imaging.BitmapFrame> используется для хранения растровых данных формата изображения.</span><span class="sxs-lookup"><span data-stu-id="d178b-131">A <xref:System.Windows.Media.Imaging.BitmapFrame> is used to store the actual bitmap data of an image format.</span></span> <span data-ttu-id="d178b-132">Многие форматы изображения поддерживают использование только одного <xref:System.Windows.Media.Imaging.BitmapFrame>, хотя форматы, такие как [!INCLUDE[TLA2#tla_gif](../../../../includes/tla2sharptla-gif-md.md)] и [!INCLUDE[TLA2#tla_tiff](../../../../includes/tla2sharptla-tiff-md.md)] поддерживают несколько кадров в изображении.</span><span class="sxs-lookup"><span data-stu-id="d178b-132">Many image formats only support a single <xref:System.Windows.Media.Imaging.BitmapFrame>, although formats such as [!INCLUDE[TLA2#tla_gif](../../../../includes/tla2sharptla-gif-md.md)] and [!INCLUDE[TLA2#tla_tiff](../../../../includes/tla2sharptla-tiff-md.md)] support multiple frames per image.</span></span> <span data-ttu-id="d178b-133">Кадры используются декодерами в качестве входных данных и передаются кодировщикам для создания файлов изображений.</span><span class="sxs-lookup"><span data-stu-id="d178b-133">Frames are used by decoders as input data and are passed to encoders to create image files.</span></span>  
  
 <span data-ttu-id="d178b-134">В следующем примере показано, как <xref:System.Windows.Media.Imaging.BitmapFrame> создается на основе <xref:System.Windows.Media.Imaging.BitmapSource> и затем добавляются [!INCLUDE[TLA2#tla_tiff](../../../../includes/tla2sharptla-tiff-md.md)] изображения.</span><span class="sxs-lookup"><span data-stu-id="d178b-134">The following example demonstrates how a <xref:System.Windows.Media.Imaging.BitmapFrame> is created from a <xref:System.Windows.Media.Imaging.BitmapSource> and then added to a [!INCLUDE[TLA2#tla_tiff](../../../../includes/tla2sharptla-tiff-md.md)] image.</span></span>  
  
 [!code-csharp[BitmapFrameExample#10](~/samples/snippets/csharp/VS_Snippets_Wpf/BitmapFrameExample/CSharp/BitmapFrame.cs#10)]
 [!code-vb[BitmapFrameExample#10](~/samples/snippets/visualbasic/VS_Snippets_Wpf/BitmapFrameExample/VB/BitmapFrame.vb#10)]  
  
### <a name="image-format-decoding"></a><span data-ttu-id="d178b-135">Декодирование изображений разных форматов</span><span class="sxs-lookup"><span data-stu-id="d178b-135">Image Format Decoding</span></span>  
 <span data-ttu-id="d178b-136">Декодирование изображения — это преобразование изображения в некотором формате в данные изображения, которые могут быть использованы системой.</span><span class="sxs-lookup"><span data-stu-id="d178b-136">Image decoding is the translation of an image format to image data that can be used by the system.</span></span> <span data-ttu-id="d178b-137">Данные изображения затем могут использоваться для отображения, обработки или кодирования в другой формат.</span><span class="sxs-lookup"><span data-stu-id="d178b-137">The image data can then be used to display, process, or encode to a different format.</span></span> <span data-ttu-id="d178b-138">Выбор декодера зависит от формата изображения.</span><span class="sxs-lookup"><span data-stu-id="d178b-138">Decoder selection is based on the image format.</span></span> <span data-ttu-id="d178b-139">Выбор кодека производится автоматически, если не указан определенный декодер.</span><span class="sxs-lookup"><span data-stu-id="d178b-139">Codec selection is automatic unless a specific decoder is specified.</span></span> <span data-ttu-id="d178b-140">Примеры в разделе [Отображение изображений в WPF](#_displayingimages) демонстрируют автоматическое декодирование.</span><span class="sxs-lookup"><span data-stu-id="d178b-140">The examples in the [Displaying Images in WPF](#_displayingimages) section demonstrate automatic decoding.</span></span> <span data-ttu-id="d178b-141">Декодеры пользовательских форматов, разработанные с помощью неуправляемых интерфейсов [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] и зарегистрированные в системе, автоматически участвуют в выборе декодера.</span><span class="sxs-lookup"><span data-stu-id="d178b-141">Custom format decoders developed using the unmanaged [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] interfaces and registered with the system automatically participate in decoder selection.</span></span> <span data-ttu-id="d178b-142">Благодаря этому пользовательские форматы могут автоматически отображаться в приложениях [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d178b-142">This allows custom formats to be displayed automatically in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] applications.</span></span>  
  
 <span data-ttu-id="d178b-143">В следующем примере показано использование декодера точечных рисунков для декодирования изображения формата [!INCLUDE[TLA2#tla_bmp](../../../../includes/tla2sharptla-bmp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d178b-143">The following example demonstrates the use of a bitmap decoder to decode a [!INCLUDE[TLA2#tla_bmp](../../../../includes/tla2sharptla-bmp-md.md)] format image.</span></span>  
  
 [!code-cpp[BmpBitmapDecoderEncoder#5](~/samples/snippets/cpp/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/CPP/anotherfile.cpp#5)]
 [!code-csharp[BmpBitmapDecoderEncoder#5](~/samples/snippets/csharp/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/CSharp/BitmapFrame.cs#5)]
 [!code-vb[BmpBitmapDecoderEncoder#5](~/samples/snippets/visualbasic/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/VB/BitmapFrame.vb#5)]  
  
### <a name="image-format-encoding"></a><span data-ttu-id="d178b-144">Кодирование изображений разных форматов</span><span class="sxs-lookup"><span data-stu-id="d178b-144">Image Format Encoding</span></span>  
 <span data-ttu-id="d178b-145">Кодирование изображения — это преобразование данных изображения в определенный формат.</span><span class="sxs-lookup"><span data-stu-id="d178b-145">Image encoding is the translation of image data to a specific image format.</span></span> <span data-ttu-id="d178b-146">Кодированные данные изображения могут затем быть использованы для создания новых файлов изображений.</span><span class="sxs-lookup"><span data-stu-id="d178b-146">The encoded image data can then be used to create new image files.</span></span> <span data-ttu-id="d178b-147">Платформа [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] предоставляет кодировщики для всех описанных выше форматов изображения.</span><span class="sxs-lookup"><span data-stu-id="d178b-147">[!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] provides encoders for each of the image formats described above.</span></span>  
  
 <span data-ttu-id="d178b-148">В следующем примере показано использование кодировщика для сохранения вновь созданного точечного рисунка.</span><span class="sxs-lookup"><span data-stu-id="d178b-148">The following example demonstrates the use of an encoder to save a newly created bitmap image.</span></span>  
  
 [!code-cpp[BmpBitmapDecoderEncoder#3](~/samples/snippets/cpp/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/CPP/anotherfile.cpp#3)]
 [!code-csharp[BmpBitmapDecoderEncoder#3](~/samples/snippets/csharp/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/CSharp/BitmapFrame.cs#3)]
 [!code-vb[BmpBitmapDecoderEncoder#3](~/samples/snippets/visualbasic/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/VB/BitmapFrame.vb#3)]  
  
<a name="_displayingimages"></a>   
## <a name="displaying-images-in-wpf"></a><span data-ttu-id="d178b-149">Отображение изображений в WPF</span><span class="sxs-lookup"><span data-stu-id="d178b-149">Displaying Images in WPF</span></span>  
 <span data-ttu-id="d178b-150">Существует несколько способов отображения изображений в приложении Windows Presentation Foundation (WPF).</span><span class="sxs-lookup"><span data-stu-id="d178b-150">There are several ways to display an image in a Windows Presentation Foundation (WPF) application.</span></span> <span data-ttu-id="d178b-151">Изображения могут отображаться с помощью <xref:System.Windows.Controls.Image> элемента управления, нарисованный в визуального элемента с помощью <xref:System.Windows.Media.ImageBrush>, или отображаются с помощью <xref:System.Windows.Media.ImageDrawing>.</span><span class="sxs-lookup"><span data-stu-id="d178b-151">Images can be displayed using an <xref:System.Windows.Controls.Image> control, painted on a visual using an <xref:System.Windows.Media.ImageBrush>, or drawn using an <xref:System.Windows.Media.ImageDrawing>.</span></span>  
  
### <a name="using-the-image-control"></a><span data-ttu-id="d178b-152">Использование элемента управления Image</span><span class="sxs-lookup"><span data-stu-id="d178b-152">Using the Image Control</span></span>  
 <span data-ttu-id="d178b-153"><xref:System.Windows.Controls.Image> — Это элемент платформы и основной способ отображения изображений в приложениях.</span><span class="sxs-lookup"><span data-stu-id="d178b-153"><xref:System.Windows.Controls.Image> is a framework element and the primary way to display images in applications.</span></span> <span data-ttu-id="d178b-154">В [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], <xref:System.Windows.Controls.Image> можно использовать в двух способов; синтаксис атрибутов или синтаксис свойств.</span><span class="sxs-lookup"><span data-stu-id="d178b-154">In [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], <xref:System.Windows.Controls.Image> can be used in two ways; attribute syntax or property syntax.</span></span> <span data-ttu-id="d178b-155">В следующем примере показано, как можно отобразить изображение размером 200 пикселей в ширину, используя синтаксис атрибута и синтаксис тега свойства.</span><span class="sxs-lookup"><span data-stu-id="d178b-155">The following example shows how to render an image 200 pixels wide using both attribute syntax and property tag syntax.</span></span> <span data-ttu-id="d178b-156">Дополнительные сведения о синтаксисе атрибутов и синтаксисе свойств см. в разделе [Общие сведения о свойствах зависимостей](../advanced/dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="d178b-156">For more information on attribute syntax and property syntax, see [Dependency Properties Overview](../advanced/dependency-properties-overview.md).</span></span>  
  
 [!code-xaml[ImageElementExample_snip#ImageSimpleExampleInlineMarkup](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/ImageSimpleExample.xaml#imagesimpleexampleinlinemarkup)]  
  
 <span data-ttu-id="d178b-157">Во многих примерах используется <xref:System.Windows.Media.Imaging.BitmapImage> объект для ссылки на файл изображения.</span><span class="sxs-lookup"><span data-stu-id="d178b-157">Many of the examples use a <xref:System.Windows.Media.Imaging.BitmapImage> object to reference an image file.</span></span> <span data-ttu-id="d178b-158"><xref:System.Windows.Media.Imaging.BitmapImage> является специализированным <xref:System.Windows.Media.Imaging.BitmapSource> , оптимизированный для [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] загрузки и простой способ отображения изображений в качестве <xref:System.Windows.Controls.Image.Source%2A> из <xref:System.Windows.Controls.Image> элемента управления.</span><span class="sxs-lookup"><span data-stu-id="d178b-158"><xref:System.Windows.Media.Imaging.BitmapImage> is a specialized <xref:System.Windows.Media.Imaging.BitmapSource> that is optimized for [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] loading and is an easy way to display images as the <xref:System.Windows.Controls.Image.Source%2A> of an <xref:System.Windows.Controls.Image> control.</span></span>  
  
 <span data-ttu-id="d178b-159">В следующем примере показано, как построить изображение шириной 200 пикселей с использованием кода.</span><span class="sxs-lookup"><span data-stu-id="d178b-159">The following example shows how to render an image 200 pixels wide using code.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d178b-160"><xref:System.Windows.Media.Imaging.BitmapImage> реализует <xref:System.ComponentModel.ISupportInitialize> интерфейс для оптимизации инициализации на нескольких свойствах.</span><span class="sxs-lookup"><span data-stu-id="d178b-160"><xref:System.Windows.Media.Imaging.BitmapImage> implements the <xref:System.ComponentModel.ISupportInitialize> interface to optimize initialization on multiple properties.</span></span> <span data-ttu-id="d178b-161">Изменения свойств происходят только во время инициализации объекта.</span><span class="sxs-lookup"><span data-stu-id="d178b-161">Property changes can only occur during object initialization.</span></span> <span data-ttu-id="d178b-162">Вызовите <xref:System.Windows.Media.Imaging.BitmapImage.BeginInit%2A> для обозначения начала инициализации и <xref:System.Windows.Media.Imaging.BitmapImage.EndInit%2A> для обозначения завершения инициализации.</span><span class="sxs-lookup"><span data-stu-id="d178b-162">Call <xref:System.Windows.Media.Imaging.BitmapImage.BeginInit%2A> to signal that initialization has begun and <xref:System.Windows.Media.Imaging.BitmapImage.EndInit%2A> to signal that initialization has completed.</span></span> <span data-ttu-id="d178b-163">После инициализации изменения свойств игнорируются.</span><span class="sxs-lookup"><span data-stu-id="d178b-163">Once initialized, property changes are ignored.</span></span>  
  
 [!code-csharp[ImageElementExample_snip#ImageSimpleExampleInlineCode1](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/ImageSimpleExample.xaml.cs#imagesimpleexampleinlinecode1)]
 [!code-vb[ImageElementExample_snip#ImageSimpleExampleInlineCode1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/ImageElementExample_snip/VB/ImageSimpleExample.xaml.vb#imagesimpleexampleinlinecode1)]  
  
#### <a name="rotating-converting-and-cropping-images"></a><span data-ttu-id="d178b-164">Вращение, преобразование и обрезка изображений</span><span class="sxs-lookup"><span data-stu-id="d178b-164">Rotating, Converting, and Cropping Images</span></span>  
 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] <span data-ttu-id="d178b-165">позволяет пользователям осуществлять преобразования изображений с помощью свойств объекта <xref:System.Windows.Media.Imaging.BitmapImage> или с помощью дополнительных <xref:System.Windows.Media.Imaging.BitmapSource> объекты, такие как <xref:System.Windows.Media.Imaging.CroppedBitmap> или <xref:System.Windows.Media.Imaging.FormatConvertedBitmap>.</span><span class="sxs-lookup"><span data-stu-id="d178b-165">enables users to transform images by using properties of <xref:System.Windows.Media.Imaging.BitmapImage> or by using additional <xref:System.Windows.Media.Imaging.BitmapSource> objects such as <xref:System.Windows.Media.Imaging.CroppedBitmap> or <xref:System.Windows.Media.Imaging.FormatConvertedBitmap>.</span></span> <span data-ttu-id="d178b-166">С помощью этих преобразований можно масштабировать или поворачивать изображения, изменять формат пикселей изображения и обрезать изображения.</span><span class="sxs-lookup"><span data-stu-id="d178b-166">These image transformations can scale or rotate an image, change the pixel format of an image, or crop an image.</span></span>  
  
 <span data-ttu-id="d178b-167">Вращение изображения осуществляется с помощью <xref:System.Windows.Media.Imaging.BitmapImage.Rotation%2A> свойство <xref:System.Windows.Media.Imaging.BitmapImage>.</span><span class="sxs-lookup"><span data-stu-id="d178b-167">Image rotations are performed using the <xref:System.Windows.Media.Imaging.BitmapImage.Rotation%2A> property of <xref:System.Windows.Media.Imaging.BitmapImage>.</span></span> <span data-ttu-id="d178b-168">Вращение возможно только с шагом 90 градусов.</span><span class="sxs-lookup"><span data-stu-id="d178b-168">Rotations can only be done in 90 degree increments.</span></span> <span data-ttu-id="d178b-169">В следующем примере изображение поворачивается на 90 градусов.</span><span class="sxs-lookup"><span data-stu-id="d178b-169">In the following example, an image is rotated 90 degrees.</span></span>  
  
 [!code-xaml[ImageElementExample#TransformedXAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample/CSharp/TransformedImageExample.xaml#transformedxaml2)]  
  
 [!code-csharp[ImageElementExample#TransformedCSharp1](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample/CSharp/TransformedImageExample.xaml.cs#transformedcsharp1)]
 [!code-vb[ImageElementExample#TransformedCSharp1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/ImageElementExample/VB/TransformedImageExample.xaml.vb#transformedcsharp1)]  
  
 <span data-ttu-id="d178b-170">Преобразование изображения к другому формату, такие как серого выполняется с помощью <xref:System.Windows.Media.Imaging.FormatConvertedBitmap>.</span><span class="sxs-lookup"><span data-stu-id="d178b-170">Converting an image to a different pixel format such as grayscale is done using <xref:System.Windows.Media.Imaging.FormatConvertedBitmap>.</span></span> <span data-ttu-id="d178b-171">В следующих примерах изображения преобразуются в <xref:System.Windows.Media.PixelFormats.Gray4%2A>.</span><span class="sxs-lookup"><span data-stu-id="d178b-171">In the following examples, an image is converted to <xref:System.Windows.Media.PixelFormats.Gray4%2A>.</span></span>  
  
 [!code-xaml[ImageElementExample_snip#ConvertedXAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/FormatConvertedExample.xaml#convertedxaml2)]  
  
 [!code-csharp[ImageElementExample_snip#ConvertedCSharp1](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/FormatConvertedExample.xaml.cs#convertedcsharp1)]
 [!code-vb[ImageElementExample_snip#ConvertedCSharp1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/ImageElementExample_snip/VB/FormatConvertedExample.xaml.vb#convertedcsharp1)]  
  
 <span data-ttu-id="d178b-172">Чтобы обрезать изображение, либо <xref:System.Windows.UIElement.Clip%2A> свойство <xref:System.Windows.Controls.Image> или <xref:System.Windows.Media.Imaging.CroppedBitmap> может использоваться.</span><span class="sxs-lookup"><span data-stu-id="d178b-172">To crop an image, either the <xref:System.Windows.UIElement.Clip%2A> property of <xref:System.Windows.Controls.Image> or <xref:System.Windows.Media.Imaging.CroppedBitmap> can be used.</span></span> <span data-ttu-id="d178b-173">Как правило, если вы просто хотите отобразить часть изображения, <xref:System.Windows.UIElement.Clip%2A> следует использовать.</span><span class="sxs-lookup"><span data-stu-id="d178b-173">Typically, if you just want to display a portion of an image, <xref:System.Windows.UIElement.Clip%2A> should be used.</span></span> <span data-ttu-id="d178b-174">Если вам нужно закодировать и сохранить обрезанное изображения, <xref:System.Windows.Media.Imaging.CroppedBitmap> следует использовать.</span><span class="sxs-lookup"><span data-stu-id="d178b-174">If you need to encode and save a cropped image, the <xref:System.Windows.Media.Imaging.CroppedBitmap> should be used.</span></span> <span data-ttu-id="d178b-175">В следующем примере изображение обрезается с помощью свойства Clip с помощью <xref:System.Windows.Media.EllipseGeometry>.</span><span class="sxs-lookup"><span data-stu-id="d178b-175">In the following example, an image is cropped using the Clip property using an <xref:System.Windows.Media.EllipseGeometry>.</span></span>  
  
 [!code-xaml[ImageElementExample_snip#CroppedXAMLUsingClip1](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/CroppedImageExample.xaml#croppedxamlusingclip1)]  
  
 [!code-csharp[ImageElementExample_snip#CroppedCSharpUsingClip1](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/CroppedImageExample.xaml.cs#croppedcsharpusingclip1)]
 [!code-vb[ImageElementExample_snip#CroppedCSharpUsingClip1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/ImageElementExample_snip/VB/CroppedImageExample.xaml.vb#croppedcsharpusingclip1)]  
  
#### <a name="stretching-images"></a><span data-ttu-id="d178b-176">Растягивание изображений</span><span class="sxs-lookup"><span data-stu-id="d178b-176">Stretching Images</span></span>  
 <span data-ttu-id="d178b-177"><xref:System.Windows.Controls.Image.Stretch%2A> Свойство определяет, как изображение растягивается для заполнения его контейнера.</span><span class="sxs-lookup"><span data-stu-id="d178b-177">The <xref:System.Windows.Controls.Image.Stretch%2A> property controls how an image is stretched to fill its container.</span></span> <span data-ttu-id="d178b-178"><xref:System.Windows.Controls.Image.Stretch%2A> Свойство принимает следующие значения, определенные <xref:System.Windows.Media.Stretch> перечисления:</span><span class="sxs-lookup"><span data-stu-id="d178b-178">The <xref:System.Windows.Controls.Image.Stretch%2A> property accepts the following values, defined by the <xref:System.Windows.Media.Stretch> enumeration:</span></span>  
  
- <span data-ttu-id="d178b-179"><xref:System.Windows.Media.Stretch.None>: Изображение не растягивается для заполнения области вывода.</span><span class="sxs-lookup"><span data-stu-id="d178b-179"><xref:System.Windows.Media.Stretch.None>: The image is not stretched to fill the output area.</span></span> <span data-ttu-id="d178b-180">Если изображение больше, чем область вывода, изображение заполняет область вывода с обрезкой тех частей, которые не входят.</span><span class="sxs-lookup"><span data-stu-id="d178b-180">If the image is larger than the output area, the image is drawn to the output area, clipping what does not fit.</span></span>  
  
- <span data-ttu-id="d178b-181"><xref:System.Windows.Media.Stretch.Fill>: Изображение масштабируется в соответствии с области вывода.</span><span class="sxs-lookup"><span data-stu-id="d178b-181"><xref:System.Windows.Media.Stretch.Fill>: The image is scaled to fit the output area.</span></span> <span data-ttu-id="d178b-182">Так как высота и ширина изображения масштабируются независимо друг от друга, исходные пропорции изображения могут не сохраниться.</span><span class="sxs-lookup"><span data-stu-id="d178b-182">Because the image height and width are scaled independently, the original aspect ratio of the image might not be preserved.</span></span> <span data-ttu-id="d178b-183">То есть изображение может быть деформировано для полного заполнения контейнера вывода.</span><span class="sxs-lookup"><span data-stu-id="d178b-183">That is, the image might be warped in order to completely fill the output container.</span></span>  
  
- <span data-ttu-id="d178b-184"><xref:System.Windows.Media.Stretch.Uniform>: Изображение масштабируется таким образом, чтобы полностью уместиться внутри области вывода.</span><span class="sxs-lookup"><span data-stu-id="d178b-184"><xref:System.Windows.Media.Stretch.Uniform>: The image is scaled so that it fits completely within the output area.</span></span> <span data-ttu-id="d178b-185">Пропорции изображения сохраняются.</span><span class="sxs-lookup"><span data-stu-id="d178b-185">The image's aspect ratio is preserved.</span></span>  
  
- <span data-ttu-id="d178b-186"><xref:System.Windows.Media.Stretch.UniformToFill>: Изображение масштабируется таким образом, чтобы полностью заполнить область вывода при этом сохранить исходные пропорции изображения.</span><span class="sxs-lookup"><span data-stu-id="d178b-186"><xref:System.Windows.Media.Stretch.UniformToFill>: The image is scaled so that it completely fills the output area while preserving the image's original aspect ratio.</span></span>  
  
 <span data-ttu-id="d178b-187">В следующем примере применяется, каждое из доступных <xref:System.Windows.Media.Stretch> перечислений для <xref:System.Windows.Controls.Image>.</span><span class="sxs-lookup"><span data-stu-id="d178b-187">The following example applies each of the available <xref:System.Windows.Media.Stretch> enumerations to an <xref:System.Windows.Controls.Image>.</span></span>  
  
 <span data-ttu-id="d178b-188">Ниже показаны выходные данные из примера и демонстрируется влияние различных <xref:System.Windows.Controls.Image.Stretch%2A> параметров изображения.</span><span class="sxs-lookup"><span data-stu-id="d178b-188">The following image shows the output from the example and demonstrates the affect the different <xref:System.Windows.Controls.Image.Stretch%2A> settings have when applied to an image.</span></span>  
  
 <span data-ttu-id="d178b-189">![Различные параметры растяжения TileBrush](./media/img-mmgraphics-stretchenum.jpg "img_mmgraphics_stretchenum")</span><span class="sxs-lookup"><span data-stu-id="d178b-189">![Different TileBrush Stretch settings](./media/img-mmgraphics-stretchenum.jpg "img_mmgraphics_stretchenum")</span></span>  
<span data-ttu-id="d178b-190">Различные параметры растяжения</span><span class="sxs-lookup"><span data-stu-id="d178b-190">Different stretch settings</span></span>  
  
 [!code-xaml[ImageElementExample_snip#ImageStretchExampleWholePage](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/ImageStretchExample.xaml#imagestretchexamplewholepage)]  
  
### <a name="painting-with-images"></a><span data-ttu-id="d178b-191">Закрашивание с помощью изображений</span><span class="sxs-lookup"><span data-stu-id="d178b-191">Painting with Images</span></span>  
 <span data-ttu-id="d178b-192">Изображения могут также отображаться в приложении путем рисования с помощью <xref:System.Windows.Media.Brush>.</span><span class="sxs-lookup"><span data-stu-id="d178b-192">Images can also be displayed in an application by painting with a <xref:System.Windows.Media.Brush>.</span></span> <span data-ttu-id="d178b-193">Кисти позволяют заполнять объекты [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] различными изображениями, начиная с просто сплошного цвета и заканчивая сложными наборами шаблонов и изображений.</span><span class="sxs-lookup"><span data-stu-id="d178b-193">Brushes enable you to paint [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] objects with anything from simple, solid colors to complex sets of patterns and images.</span></span> <span data-ttu-id="d178b-194">Для заполнения изображением используйте <xref:System.Windows.Media.ImageBrush>.</span><span class="sxs-lookup"><span data-stu-id="d178b-194">To paint with images, use an <xref:System.Windows.Media.ImageBrush>.</span></span> <span data-ttu-id="d178b-195"><xref:System.Windows.Media.ImageBrush> — Это разновидность <xref:System.Windows.Media.TileBrush> , определяющей содержимое как растровое изображение.</span><span class="sxs-lookup"><span data-stu-id="d178b-195">An <xref:System.Windows.Media.ImageBrush> is a type of <xref:System.Windows.Media.TileBrush> that defines its content as a bitmap image.</span></span> <span data-ttu-id="d178b-196"><xref:System.Windows.Media.ImageBrush> Отображает одно изображение, которое определяется ее <xref:System.Windows.Media.ImageBrush.ImageSource%2A> свойство.</span><span class="sxs-lookup"><span data-stu-id="d178b-196">An <xref:System.Windows.Media.ImageBrush> displays a single image, which is specified by its <xref:System.Windows.Media.ImageBrush.ImageSource%2A> property.</span></span> <span data-ttu-id="d178b-197">Способом растяжения изображения, выравнивания и заполнения мозаикой можно управлять, что позволяет избегать искажений, создавать шаблоны и применять другие эффекты.</span><span class="sxs-lookup"><span data-stu-id="d178b-197">You can control how the image is stretched, aligned, and tiled, enabling you to prevent distortion and produce patterns and other effects.</span></span> <span data-ttu-id="d178b-198">На следующем рисунке показан некоторые эффекты, которые могут быть обеспечены <xref:System.Windows.Media.ImageBrush>.</span><span class="sxs-lookup"><span data-stu-id="d178b-198">The following illustration shows some effects that can be achieved with an <xref:System.Windows.Media.ImageBrush>.</span></span>  
  
 <span data-ttu-id="d178b-199">![Примеры вывода ImageBrush](./media/wcpsdk-mmgraphics-imagebrushexamples.gif "wcpsdk_mmgraphics_imagebrushexamples")</span><span class="sxs-lookup"><span data-stu-id="d178b-199">![ImageBrush output examples](./media/wcpsdk-mmgraphics-imagebrushexamples.gif "wcpsdk_mmgraphics_imagebrushexamples")</span></span>  
<span data-ttu-id="d178b-200">Используя кисти изображения, можно заполнять фигуры, элементы управления, текст и многое другое</span><span class="sxs-lookup"><span data-stu-id="d178b-200">Image brushes can fill shapes, controls, text, and more</span></span>  
  
 <span data-ttu-id="d178b-201">Следующий пример демонстрирует рисования фона кнопки с образа с помощью <xref:System.Windows.Media.ImageBrush>.</span><span class="sxs-lookup"><span data-stu-id="d178b-201">The following example demonstrates how to paint the background of a button with an image using an <xref:System.Windows.Media.ImageBrush>.</span></span>  
  
 [!code-xaml[UsingImageBrush#4](~/samples/snippets/csharp/VS_Snippets_Wpf/UsingImageBrush/CS/PaintingWithImages.xaml#4)]  
  
 <span data-ttu-id="d178b-202">Дополнительные сведения о <xref:System.Windows.Media.ImageBrush> и закрашивании изображений см. в разделе [Рисование с помощью изображений, рисунков и визуальных элементов](painting-with-images-drawings-and-visuals.md).</span><span class="sxs-lookup"><span data-stu-id="d178b-202">For additional information about <xref:System.Windows.Media.ImageBrush> and painting images see [Painting with Images, Drawings, and Visuals](painting-with-images-drawings-and-visuals.md).</span></span>  
  
<a name="_metadata"></a>   
## <a name="image-metadata"></a><span data-ttu-id="d178b-203">Метаданные изображений</span><span class="sxs-lookup"><span data-stu-id="d178b-203">Image Metadata</span></span>  
 <span data-ttu-id="d178b-204">Некоторые файлы изображений содержат метаданные, описывающие содержимое или характеристики файла.</span><span class="sxs-lookup"><span data-stu-id="d178b-204">Some image files contain metadata that describes the content or the characteristics of the file.</span></span> <span data-ttu-id="d178b-205">Например, большинство цифровых фотоаппаратов создают изображения, содержащие метаданные об изготовителе и модели фотоаппарата, использованного для создания изображения.</span><span class="sxs-lookup"><span data-stu-id="d178b-205">For example, most digital cameras create images that contain metadata about the make and model of the camera used to capture the image.</span></span> <span data-ttu-id="d178b-206">В разных форматах изображения метаданные обрабатываются по-разному. Платформа [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] предоставляет универсальный способ хранения и извлечения метаданных для всех поддерживаемых форматов изображения.</span><span class="sxs-lookup"><span data-stu-id="d178b-206">Each image format handles metadata differently but [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] provides a uniform way of storing and retrieving metadata for each supported image format.</span></span>  
  
 <span data-ttu-id="d178b-207">Доступ к метаданным предоставляется через <xref:System.Windows.Media.Imaging.BitmapSource.Metadata%2A> свойство <xref:System.Windows.Media.Imaging.BitmapSource> объекта.</span><span class="sxs-lookup"><span data-stu-id="d178b-207">Access to metadata is provided through the <xref:System.Windows.Media.Imaging.BitmapSource.Metadata%2A> property of a <xref:System.Windows.Media.Imaging.BitmapSource> object.</span></span> <span data-ttu-id="d178b-208"><xref:System.Windows.Media.Imaging.BitmapSource.Metadata%2A> Возвращает <xref:System.Windows.Media.Imaging.BitmapMetadata> объекта, который содержит все метаданные, содержащиеся в изображении.</span><span class="sxs-lookup"><span data-stu-id="d178b-208"><xref:System.Windows.Media.Imaging.BitmapSource.Metadata%2A> returns a <xref:System.Windows.Media.Imaging.BitmapMetadata> object that includes all the metadata contained by the image.</span></span> <span data-ttu-id="d178b-209">Эти данные могут представлять собой одну схему метаданных или комбинацию различных схем.</span><span class="sxs-lookup"><span data-stu-id="d178b-209">This data may be in one metadata schema or a combination of different schemes.</span></span> <span data-ttu-id="d178b-210">Платформа [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] поддерживает следующие схемы метаданных изображения: [!INCLUDE[TLA#tla_exif](../../../../includes/tlasharptla-exif-md.md)], текст (текстовые данные PNG), [!INCLUDE[TLA#tla_ifd](../../../../includes/tlasharptla-ifd-md.md)], [!INCLUDE[TLA#tla_iptc](../../../../includes/tlasharptla-iptc-md.md)] и [!INCLUDE[TLA#tla_xmp](../../../../includes/tlasharptla-xmp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d178b-210">[!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] supports the following image metadata schemas: [!INCLUDE[TLA#tla_exif](../../../../includes/tlasharptla-exif-md.md)], tEXt (PNG Textual Data), [!INCLUDE[TLA#tla_ifd](../../../../includes/tlasharptla-ifd-md.md)], [!INCLUDE[TLA#tla_iptc](../../../../includes/tlasharptla-iptc-md.md)], and [!INCLUDE[TLA#tla_xmp](../../../../includes/tlasharptla-xmp-md.md)].</span></span>  
  
 <span data-ttu-id="d178b-211">Для упрощения процесса чтения метаданных <xref:System.Windows.Media.Imaging.BitmapMetadata> предоставляет несколько именованных свойств, которые легко доступны такие как <xref:System.Windows.Media.Imaging.BitmapMetadata.Author%2A>, <xref:System.Windows.Media.Imaging.BitmapMetadata.Title%2A>, и <xref:System.Windows.Media.Imaging.BitmapMetadata.CameraModel%2A>.</span><span class="sxs-lookup"><span data-stu-id="d178b-211">In order to simplify the process of reading metadata, <xref:System.Windows.Media.Imaging.BitmapMetadata> provides several named properties that can be easily accessed such as <xref:System.Windows.Media.Imaging.BitmapMetadata.Author%2A>, <xref:System.Windows.Media.Imaging.BitmapMetadata.Title%2A>, and <xref:System.Windows.Media.Imaging.BitmapMetadata.CameraModel%2A>.</span></span> <span data-ttu-id="d178b-212">Многие из этих именованных свойств могут также использоваться для записи метаданных.</span><span class="sxs-lookup"><span data-stu-id="d178b-212">Many of these named properties can also be used to write metadata.</span></span> <span data-ttu-id="d178b-213">Дополнительная поддержка чтения метаданных обеспечивается благодаря использованию считывателя запросов метаданных.</span><span class="sxs-lookup"><span data-stu-id="d178b-213">Additional support for reading metadata is provided by the metadata query reader.</span></span> <span data-ttu-id="d178b-214"><xref:System.Windows.Media.Imaging.BitmapMetadata.GetQuery%2A> Метод используется для извлечения считывателя запросов метаданных, предоставляя строки запроса, такие как *«/ app1/exif /»*.</span><span class="sxs-lookup"><span data-stu-id="d178b-214">The <xref:System.Windows.Media.Imaging.BitmapMetadata.GetQuery%2A> method is used to retrieve a metadata query reader by providing a string query such as *"/app1/exif/"*.</span></span> <span data-ttu-id="d178b-215">В следующем примере <xref:System.Windows.Media.Imaging.BitmapMetadata.GetQuery%2A> используется для получения текста, хранящегося в *«/ Text/Description»* расположение.</span><span class="sxs-lookup"><span data-stu-id="d178b-215">In the following example, <xref:System.Windows.Media.Imaging.BitmapMetadata.GetQuery%2A> is used to obtain the text stored in the *"/Text/Description"* location.</span></span>  
  
 [!code-cpp[BitmapMetadata#GetQuery](~/samples/snippets/cpp/VS_Snippets_Wpf/BitMapMetadata/CPP/BitmapMetadata.cpp#getquery)]
 [!code-csharp[BitmapMetadata#GetQuery](~/samples/snippets/csharp/VS_Snippets_Wpf/BitMapMetadata/CSharp/BitmapMetadata.cs#getquery)]
 [!code-vb[BitmapMetadata#GetQuery](~/samples/snippets/visualbasic/VS_Snippets_Wpf/BitMapMetadata/VB/BitmapMetadata.vb#getquery)]  
  
 <span data-ttu-id="d178b-216">Для написания метаданных используется мастер написания запросов метаданных.</span><span class="sxs-lookup"><span data-stu-id="d178b-216">To write metadata, a metadata query writer is used.</span></span> <span data-ttu-id="d178b-217"><xref:System.Windows.Media.Imaging.BitmapMetadata.SetQuery%2A> Получает запрос и задает требуемое значение.</span><span class="sxs-lookup"><span data-stu-id="d178b-217"><xref:System.Windows.Media.Imaging.BitmapMetadata.SetQuery%2A> obtains the query writer and sets the desired value.</span></span> <span data-ttu-id="d178b-218">В следующем примере <xref:System.Windows.Media.Imaging.BitmapMetadata.SetQuery%2A> используется для записи текста, хранящегося в *«/ Text/Description»* расположение.</span><span class="sxs-lookup"><span data-stu-id="d178b-218">In the following example, <xref:System.Windows.Media.Imaging.BitmapMetadata.SetQuery%2A> is used to write the text stored in the *"/Text/Description"* location.</span></span>  
  
 [!code-cpp[BitmapMetadata#SetQuery](~/samples/snippets/cpp/VS_Snippets_Wpf/BitMapMetadata/CPP/BitmapMetadata.cpp#setquery)]
 [!code-csharp[BitmapMetadata#SetQuery](~/samples/snippets/csharp/VS_Snippets_Wpf/BitMapMetadata/CSharp/BitmapMetadata.cs#setquery)]
 [!code-vb[BitmapMetadata#SetQuery](~/samples/snippets/visualbasic/VS_Snippets_Wpf/BitMapMetadata/VB/BitmapMetadata.vb#setquery)]  
  
<a name="_extensibility"></a>   
## <a name="codec-extensibility"></a><span data-ttu-id="d178b-219">Расширяемость кодеков</span><span class="sxs-lookup"><span data-stu-id="d178b-219">Codec Extensibility</span></span>  
 <span data-ttu-id="d178b-220">Основной особенностью [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] является модель расширяемости для новых кодеков изображений.</span><span class="sxs-lookup"><span data-stu-id="d178b-220">A core feature of [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] is the extensibility model for new image codecs.</span></span> <span data-ttu-id="d178b-221">Эти неуправляемые интерфейсы позволяют разработчикам кодеков интегрировать кодеки в [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]. Благодаря этому новые форматы изображений могут автоматически использоваться приложениями [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d178b-221">These unmanaged interfaces enable codec developers to integrate codecs with [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] so new image formats can automatically be used by [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] applications.</span></span>  
  
 <span data-ttu-id="d178b-222">Пример расширяемости [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] см. в разделе [Пример кодека Win32](https://go.microsoft.com/fwlink/?LinkID=160052).</span><span class="sxs-lookup"><span data-stu-id="d178b-222">For a sample of the extensibility [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)], see the [Win32 Sample Codec](https://go.microsoft.com/fwlink/?LinkID=160052).</span></span> <span data-ttu-id="d178b-223">В этом примере показано создание декодера и кодировщика для пользовательского формата изображения.</span><span class="sxs-lookup"><span data-stu-id="d178b-223">This sample demonstrates how to create a decoder and encoder for a custom image format.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d178b-224">Чтобы система могла распознать кодек, он должен иметь цифровую подпись.</span><span class="sxs-lookup"><span data-stu-id="d178b-224">The codec must be digitally signed for the system to recognize it.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d178b-225">См. также</span><span class="sxs-lookup"><span data-stu-id="d178b-225">See also</span></span>

- <xref:System.Windows.Media.Imaging.BitmapSource>
- <xref:System.Windows.Media.Imaging.BitmapImage>
- <xref:System.Windows.Controls.Image>
- <xref:System.Windows.Media.Imaging.BitmapMetadata>
- [<span data-ttu-id="d178b-226">Двумерная графика и изображения</span><span class="sxs-lookup"><span data-stu-id="d178b-226">2D Graphics and Imaging</span></span>](../advanced/optimizing-performance-2d-graphics-and-imaging.md)
- [<span data-ttu-id="d178b-227">Пример кодека Win32</span><span class="sxs-lookup"><span data-stu-id="d178b-227">Win32 Sample Codec</span></span>](https://go.microsoft.com/fwlink/?LinkID=160052)
