---
title: Общие сведения об анимации и системе управления временем
ms.date: 03/30/2017
helpviewer_keywords:
- timing system [WPF]
- animation [WPF]
ms.assetid: 172cd5a8-a333-4c81-9456-fafccc19f382
ms.openlocfilehash: d0ac2a8160a1e6f9bcdb333593ec207954b391aa
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2020
ms.locfileid: "79187706"
---
# <a name="animation-and-timing-system-overview"></a><span data-ttu-id="4cc0e-102">Общие сведения об анимации и системе управления временем</span><span class="sxs-lookup"><span data-stu-id="4cc0e-102">Animation and Timing System Overview</span></span>
<span data-ttu-id="4cc0e-103">В этой теме описывается, <xref:System.Windows.Media.Animation.Timeline>как <xref:System.Windows.Media.Animation.Clock> система синхронизации использует анимацию и классы для анимации свойств.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-103">This topic describes how the timing system uses the animation, <xref:System.Windows.Media.Animation.Timeline>, and <xref:System.Windows.Media.Animation.Clock> classes to animate properties.</span></span>  
  
<a name="prerequisites"></a>
## <a name="prerequisites"></a><span data-ttu-id="4cc0e-104">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="4cc0e-104">Prerequisites</span></span>  
 <span data-ttu-id="4cc0e-105">Чтобы понять содержимое этого раздела, необходимо знать, как использовать анимацию [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] для анимации свойств, как описано в разделе [Общие сведения об эффектах анимации](animation-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4cc0e-105">To understand this topic, you should be able to use [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animations to animate properties, as described in the [Animation Overview](animation-overview.md).</span></span> <span data-ttu-id="4cc0e-106">В нем также можно ознакомиться со свойствами зависимостей. Дополнительные сведения см. в разделе [Общие сведения о свойствах зависимостей](../advanced/dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4cc0e-106">It also helps to be familiar with dependency properties; for more information, see the [Dependency Properties Overview](../advanced/dependency-properties-overview.md).</span></span>  
  
<a name="timelinesandclocks"></a>
## <a name="timelines-and-clocks"></a><span data-ttu-id="4cc0e-107">Временные шкалы и часы</span><span class="sxs-lookup"><span data-stu-id="4cc0e-107">Timelines and Clocks</span></span>  
 <span data-ttu-id="4cc0e-108">[Обзор анимации](animation-overview.md) описал, <xref:System.Windows.Media.Animation.Timeline> как а представляет собой сегмент времени, <xref:System.Windows.Media.Animation.Timeline> а анимация — это тип, который производит значения вывода.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-108">The [Animation Overview](animation-overview.md) described how a <xref:System.Windows.Media.Animation.Timeline> represents a segment of time, and an animation is a type of <xref:System.Windows.Media.Animation.Timeline> that produces output values.</span></span> <span data-ttu-id="4cc0e-109">Сам по <xref:System.Windows.Media.Animation.Timeline>себе, не делает ничего, кроме просто описать сегмент времени.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-109">By itself, a <xref:System.Windows.Media.Animation.Timeline>, doesn't do anything other than just describe a segment of time.</span></span> <span data-ttu-id="4cc0e-110">Это объект Временной шкалы, <xref:System.Windows.Media.Animation.Clock> который делает реальную работу.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-110">It's the timeline's <xref:System.Windows.Media.Animation.Clock> object that does the real work.</span></span> <span data-ttu-id="4cc0e-111">Аналогичным образом, анимация на самом деле не оживляет свойства: класс анимации описывает, как должны быть вычисляются значения вывода, но это то, <xref:System.Windows.Media.Animation.Clock> что было создано для анимации, которая управляет выходом анимации и применяет его к свойствам.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-111">Likewise, animation doesn't actually animate properties: an animation class describes how output values should be calculated, but it’s the <xref:System.Windows.Media.Animation.Clock> that was created for the animation that drives the animation output and applies it to properties.</span></span>  
  
 <span data-ttu-id="4cc0e-112">A <xref:System.Windows.Media.Animation.Clock> — это особый тип объекта, который поддерживает состояние <xref:System.Windows.Media.Animation.Timeline>времени выполнения для .</span><span class="sxs-lookup"><span data-stu-id="4cc0e-112">A <xref:System.Windows.Media.Animation.Clock> is a special type of object that maintains timing-related run-time state for the <xref:System.Windows.Media.Animation.Timeline>.</span></span> <span data-ttu-id="4cc0e-113">Он предоставляет три бита информации, которые имеют <xref:System.Windows.Media.Animation.Clock.CurrentTime%2A>важное значение для анимации и системы синхронизации: , <xref:System.Windows.Media.Animation.Clock.CurrentProgress%2A>и <xref:System.Windows.Media.Animation.Clock.CurrentState%2A>.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-113">It provides three bits of information that are essential to the animation and timing system: <xref:System.Windows.Media.Animation.Clock.CurrentTime%2A>, <xref:System.Windows.Media.Animation.Clock.CurrentProgress%2A>, and <xref:System.Windows.Media.Animation.Clock.CurrentState%2A>.</span></span> <span data-ttu-id="4cc0e-114">A <xref:System.Windows.Media.Animation.Clock> определяет его текущее время, прогресс и состояние, используя <xref:System.Windows.Media.Animation.Timeline> <xref:System.Windows.Media.Animation.Timeline.Duration%2A>поведение <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A>времени, описанное его : , и так далее.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-114">A <xref:System.Windows.Media.Animation.Clock> determines its current time, progress, and state by using the timing behaviors described by its <xref:System.Windows.Media.Animation.Timeline>: <xref:System.Windows.Media.Animation.Timeline.Duration%2A>, <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A>, <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A>, and so on.</span></span>  
  
 <span data-ttu-id="4cc0e-115">В большинстве <xref:System.Windows.Media.Animation.Clock> случаев a создается автоматически для вашей Временной шкалы.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-115">In most cases, a <xref:System.Windows.Media.Animation.Clock> is created automatically for your timeline.</span></span> <span data-ttu-id="4cc0e-116">При анимации с помощью <xref:System.Windows.Media.Animation.Storyboard> <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A> или метода часы автоматически создаются для ваших временных линий и анимаций и применяются к их целевым свойствам.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-116">When you animate by using a <xref:System.Windows.Media.Animation.Storyboard> or the <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A> method, clocks are automatically created for your timelines and animations and applied to their targeted properties.</span></span> <span data-ttu-id="4cc0e-117">Вы также можете <xref:System.Windows.Media.Animation.Clock> создать явно <xref:System.Windows.Media.Animation.Timeline.CreateClock%2A> с помощью метода вашего <xref:System.Windows.Media.Animation.Timeline>.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-117">You can also create a <xref:System.Windows.Media.Animation.Clock> explicitly by using the <xref:System.Windows.Media.Animation.Timeline.CreateClock%2A> method of your <xref:System.Windows.Media.Animation.Timeline>.</span></span> <span data-ttu-id="4cc0e-118">Метод <xref:System.Windows.Media.MediaTimeline.CreateClock%2A?displayProperty=nameWithType> создает часы соответствующего типа, <xref:System.Windows.Media.Animation.Timeline> для которого он называется.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-118">The <xref:System.Windows.Media.MediaTimeline.CreateClock%2A?displayProperty=nameWithType> method creates a clock of the appropriate type for the <xref:System.Windows.Media.Animation.Timeline> on which it is called.</span></span> <span data-ttu-id="4cc0e-119">Если <xref:System.Windows.Media.Animation.Timeline> в графике ребенка <xref:System.Windows.Media.Animation.Clock> содержатся детские сроки, он создает объекты и для них.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-119">If the <xref:System.Windows.Media.Animation.Timeline> contains child timelines, it creates <xref:System.Windows.Media.Animation.Clock> objects for them as well.</span></span> <span data-ttu-id="4cc0e-120">Полученные <xref:System.Windows.Media.Animation.Clock> объекты расположены на деревьях, которые соответствуют структуре <xref:System.Windows.Media.Animation.Timeline> дерева объектов, из которых они создаются.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-120">The resulting <xref:System.Windows.Media.Animation.Clock> objects are arranged in trees that match the structure of the <xref:System.Windows.Media.Animation.Timeline> objects tree from which they are created.</span></span>  
  
 <span data-ttu-id="4cc0e-121">Существует различных типа часов для различных типов шкал времени.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-121">There are different types of clocks for different types of timelines.</span></span> <span data-ttu-id="4cc0e-122">В следующей <xref:System.Windows.Media.Animation.Clock> таблице показаны типы, <xref:System.Windows.Media.Animation.Timeline> соответствующие некоторым типам.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-122">The following table shows the <xref:System.Windows.Media.Animation.Clock> types that correspond to some of the different <xref:System.Windows.Media.Animation.Timeline> types.</span></span>  
  
|<span data-ttu-id="4cc0e-123">Тип временной шкалы</span><span class="sxs-lookup"><span data-stu-id="4cc0e-123">Timeline type</span></span>|<span data-ttu-id="4cc0e-124">Тип часов</span><span class="sxs-lookup"><span data-stu-id="4cc0e-124">Clock type</span></span>|<span data-ttu-id="4cc0e-125">Назначение часов</span><span class="sxs-lookup"><span data-stu-id="4cc0e-125">Clock purpose</span></span>|  
|-------------------|----------------|-------------------|  
|<span data-ttu-id="4cc0e-126">Анимация (наследует от <xref:System.Windows.Media.Animation.AnimationTimeline>)</span><span class="sxs-lookup"><span data-stu-id="4cc0e-126">Animation (inherits from <xref:System.Windows.Media.Animation.AnimationTimeline>)</span></span>|<xref:System.Windows.Media.Animation.AnimationClock>|<span data-ttu-id="4cc0e-127">Создает выходные значения для свойства зависимостей.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-127">Generates output values for a dependency property.</span></span>|  
|<xref:System.Windows.Media.MediaTimeline>|<xref:System.Windows.Media.MediaClock>|<span data-ttu-id="4cc0e-128">Обрабатывает файл мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-128">Processes a media file.</span></span>|  
|<xref:System.Windows.Media.Animation.ParallelTimeline>|<xref:System.Windows.Media.Animation.ClockGroup>|<span data-ttu-id="4cc0e-129">Группы и <xref:System.Windows.Media.Animation.Clock> управление своими детскими объектами</span><span class="sxs-lookup"><span data-stu-id="4cc0e-129">Groups and controls its child <xref:System.Windows.Media.Animation.Clock> objects</span></span>|  
|<xref:System.Windows.Media.Animation.Storyboard>|<xref:System.Windows.Media.Animation.ClockGroup>|<span data-ttu-id="4cc0e-130">Группы и <xref:System.Windows.Media.Animation.Clock> управление своими детскими объектами</span><span class="sxs-lookup"><span data-stu-id="4cc0e-130">Groups and controls its child <xref:System.Windows.Media.Animation.Clock> objects</span></span>|  
  
 <span data-ttu-id="4cc0e-131">Вы можете <xref:System.Windows.Media.Animation.AnimationClock> применить любые объекты, которые вы <xref:System.Windows.Media.Animation.IAnimatable.ApplyAnimationClock%2A> создаете, к совместимым свойствам зависимости с помощью метода.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-131">You can apply any <xref:System.Windows.Media.Animation.AnimationClock> objects you create to compatible dependency properties by using the <xref:System.Windows.Media.Animation.IAnimatable.ApplyAnimationClock%2A> method.</span></span>  
  
 <span data-ttu-id="4cc0e-132">В сценариях, связанных с производительностью, таких как анимация большого количества подобных объектов, управление собственным <xref:System.Windows.Media.Animation.Clock> использованием может обеспечить преимущества производительности.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-132">In performance-intensive scenarios, such as animating large numbers of similar objects, managing your own <xref:System.Windows.Media.Animation.Clock> use can provide performance benefits.</span></span>  
  
<a name="timemanager"></a>
## <a name="clocks-and-the-time-manager"></a><span data-ttu-id="4cc0e-133">Часы и диспетчер времени</span><span class="sxs-lookup"><span data-stu-id="4cc0e-133">Clocks and the Time Manager</span></span>  
 <span data-ttu-id="4cc0e-134">Когда вы оживляют [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]объекты в, это менеджер <xref:System.Windows.Media.MediaPlayer.Clock%2A> времени, который управляет объектами, созданными для ваших временных линий.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-134">When you animate objects in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], it’s the time manager that manages the <xref:System.Windows.Media.MediaPlayer.Clock%2A> objects created for your timelines.</span></span> <span data-ttu-id="4cc0e-135">Диспетчер времени — это корень дерева объектов <xref:System.Windows.Media.MediaPlayer.Clock%2A>, который управляет потоком времени в этом дереве.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-135">The time manager is the root of a tree of <xref:System.Windows.Media.MediaPlayer.Clock%2A> objects and controls the flow of time in that tree.</span></span>  <span data-ttu-id="4cc0e-136">Диспетчер времени создается автоматически для каждого приложения [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] и остается невидимым для разработчика приложения.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-136">A time manager is automatically created for each [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application and is invisible to the application developer.</span></span> <span data-ttu-id="4cc0e-137">Диспетчер времени "тикает" много раз в секунду; фактическое число тактов, возникающих каждую секунду, зависит от доступных системных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-137">The time manager "ticks" many times per second; the actual number of ticks that occur each second varies depending on available system resources.</span></span> <span data-ttu-id="4cc0e-138">Во время каждого из этих тиков диспетчер времени <xref:System.Windows.Media.Animation.ClockState.Active> <xref:System.Windows.Media.Animation.Clock> вычисляет состояние всех объектов в дереве синхронизации.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-138">During each one of these ticks, the time manager computes the state of all <xref:System.Windows.Media.Animation.ClockState.Active> <xref:System.Windows.Media.Animation.Clock> objects in the timing tree.</span></span>  
  
 <span data-ttu-id="4cc0e-139">На следующей иллюстрации показаны отношения <xref:System.Windows.Media.Animation.AnimationClock>между диспетчером времени и анимированным свойством зависимости.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-139">The following illustration shows the relationship between the time manager, and <xref:System.Windows.Media.Animation.AnimationClock>, and an animated dependency property.</span></span>  
  
 <span data-ttu-id="4cc0e-140">![Компоненты временной системы](./media/graphicsmm-clocks-1clock1prop.png "graphicsmm_clocks_1clock1prop")</span><span class="sxs-lookup"><span data-stu-id="4cc0e-140">![Timing system components](./media/graphicsmm-clocks-1clock1prop.png "graphicsmm_clocks_1clock1prop")</span></span>  
<span data-ttu-id="4cc0e-141">Анимирование свойства</span><span class="sxs-lookup"><span data-stu-id="4cc0e-141">Animating a property</span></span>  
  
 <span data-ttu-id="4cc0e-142">Когда диспетчер времени тикает, он обновляет <xref:System.Windows.Media.Animation.ClockState.Active> <xref:System.Windows.Media.Animation.Clock> время каждого в приложении.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-142">When the time manager ticks, it updates the time of every <xref:System.Windows.Media.Animation.ClockState.Active> <xref:System.Windows.Media.Animation.Clock> in the application.</span></span> <span data-ttu-id="4cc0e-143">Если <xref:System.Windows.Media.Animation.Clock> это <xref:System.Windows.Media.Animation.AnimationClock>, он <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> использует метод, <xref:System.Windows.Media.Animation.AnimationTimeline> из которого он был создан для расчета его текущего значения вывода.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-143">If the <xref:System.Windows.Media.Animation.Clock> is an <xref:System.Windows.Media.Animation.AnimationClock>, it uses the <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> method of the <xref:System.Windows.Media.Animation.AnimationTimeline> from which it was created to calculate its current output value.</span></span> <span data-ttu-id="4cc0e-144">Поставляет <xref:System.Windows.Media.Animation.AnimationClock> <xref:System.Windows.Media.Animation.AnimationTimeline> с текущим местным временем, входное значение, которое, как правило, базовое значение свойства, и значение назначения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-144">The <xref:System.Windows.Media.Animation.AnimationClock> supplies the <xref:System.Windows.Media.Animation.AnimationTimeline> with the current local time, an input value, which is typically the base value of the property, and a default destination value.</span></span> <span data-ttu-id="4cc0e-145">При получении значения анимированного свойства <xref:System.Windows.DependencyObject.GetValue%2A> с помощью метода или его аксессуара CLR вы получаете выход его. <xref:System.Windows.Media.Animation.AnimationClock></span><span class="sxs-lookup"><span data-stu-id="4cc0e-145">When you retrieve the value of an animated by property using the <xref:System.Windows.DependencyObject.GetValue%2A> method or its CLR accessor, you get the output of its <xref:System.Windows.Media.Animation.AnimationClock>.</span></span>  
  
#### <a name="clock-groups"></a><span data-ttu-id="4cc0e-146">Группы часов</span><span class="sxs-lookup"><span data-stu-id="4cc0e-146">Clock Groups</span></span>  
 <span data-ttu-id="4cc0e-147">В предыдущем разделе описано, <xref:System.Windows.Media.Animation.Clock> как существуют различные типы объектов для различных типов временных линий.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-147">The preceding section described how there are different types of <xref:System.Windows.Media.Animation.Clock> objects for different types of timelines.</span></span> <span data-ttu-id="4cc0e-148">На следующей иллюстрации показаны отношения <xref:System.Windows.Media.Animation.ClockGroup>между <xref:System.Windows.Media.Animation.AnimationClock>временной менеджером, а, и анимированным свойством зависимости.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-148">The following illustration shows the relationship between the time manager, a <xref:System.Windows.Media.Animation.ClockGroup>, an <xref:System.Windows.Media.Animation.AnimationClock>, and an animated dependency property.</span></span> <span data-ttu-id="4cc0e-149">A <xref:System.Windows.Media.Animation.ClockGroup> создается для временных линий, которые <xref:System.Windows.Media.Animation.Storyboard> группируют другие временные линии, такие как класс, который группирует анимацию и другие временные линии.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-149">A <xref:System.Windows.Media.Animation.ClockGroup> is created for timelines that group other timelines, such as the <xref:System.Windows.Media.Animation.Storyboard> class, which groups animations and other timelines.</span></span>  
  
 <span data-ttu-id="4cc0e-150">![Компоненты временной системы](./media/graphicsmm-clocks-2clock1clockgroup2prop.png "graphicsmm_clocks_2clock1clockgroup2prop")</span><span class="sxs-lookup"><span data-stu-id="4cc0e-150">![Timing system components](./media/graphicsmm-clocks-2clock1clockgroup2prop.png "graphicsmm_clocks_2clock1clockgroup2prop")</span></span>  
<span data-ttu-id="4cc0e-151">ClockGroup</span><span class="sxs-lookup"><span data-stu-id="4cc0e-151">A ClockGroup</span></span>  
  
#### <a name="composition"></a><span data-ttu-id="4cc0e-152">Создание</span><span class="sxs-lookup"><span data-stu-id="4cc0e-152">Composition</span></span>  
 <span data-ttu-id="4cc0e-153">Можно связать несколько часов с одним свойством. При этом каждые часы используют выходное значение предыдущих часов в качестве своего базового значения.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-153">It's possible to associate multiple clocks with a single property, in which case each clock uses the output value of the preceding clock as its base value.</span></span> <span data-ttu-id="4cc0e-154">На следующей <xref:System.Windows.Media.Animation.AnimationClock> иллюстрации показаны три объекта, применяемые к тому же свойству.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-154">The following illustration shows three <xref:System.Windows.Media.Animation.AnimationClock> objects applied to the same property.</span></span> <span data-ttu-id="4cc0e-155">Clock1 использует базовое значение анимируемого свойства в качестве входных данных и для создания выходных данных.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-155">Clock1 uses the base value of the animated property as its input and uses it to generate output.</span></span> <span data-ttu-id="4cc0e-156">Clock2 принимает выходные данные от Clock1 в качестве входных данных и использует их для создания выходных данных.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-156">Clock2 takes the output from Clock1 as its input and uses it to generate output.</span></span> <span data-ttu-id="4cc0e-157">Clock3 принимает выходные данные от Clock2 в качестве входных данных и использует их для создания выходных данных.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-157">Clock3 takes the output from Clock2 as its input and uses it to generate output.</span></span> <span data-ttu-id="4cc0e-158">Когда несколько часов влияют на одно и то же свойство одновременно, считается, что они находятся в цепочке композиции.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-158">When multiple clocks affect the same property simultaneously, they are said to be in a composition chain.</span></span>  
  
 <span data-ttu-id="4cc0e-159">![Компоненты временной системы](./media/graphicsmm-clocks-2clock1prop.png "graphicsmm_clocks_2clock1prop")</span><span class="sxs-lookup"><span data-stu-id="4cc0e-159">![Timing system components](./media/graphicsmm-clocks-2clock1prop.png "graphicsmm_clocks_2clock1prop")</span></span>  
<span data-ttu-id="4cc0e-160">Цепочка композиции</span><span class="sxs-lookup"><span data-stu-id="4cc0e-160">A composition chain</span></span>  
  
 <span data-ttu-id="4cc0e-161">Обратите внимание, что, хотя связь создается <xref:System.Windows.Media.Animation.AnimationClock> между входным и выходным объектов в цепочке композиции, их поведение времени не влияет; <xref:System.Windows.Media.Animation.Clock> объекты <xref:System.Windows.Media.Animation.AnimationClock> (включая объекты) имеют иерархическую зависимость от родительских <xref:System.Windows.Media.Animation.Clock> объектов.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-161">Note that although a relationship is created among the input and output of the <xref:System.Windows.Media.Animation.AnimationClock> objects in the composition chain, their timing behaviors are not affected; <xref:System.Windows.Media.Animation.Clock> objects (including <xref:System.Windows.Media.Animation.AnimationClock> objects) have a hierarchical dependency on their parent <xref:System.Windows.Media.Animation.Clock> objects.</span></span>  
  
 <span data-ttu-id="4cc0e-162">Чтобы применить несколько часов к тому <xref:System.Windows.Media.Animation.HandoffBehavior.Compose> <xref:System.Windows.Media.Animation.HandoffBehavior> же свойству, используйте при <xref:System.Windows.Media.Animation.Storyboard>применении, анимация, или. <xref:System.Windows.Media.Animation.AnimationClock></span><span class="sxs-lookup"><span data-stu-id="4cc0e-162">To apply multiple clocks to the same property, use the <xref:System.Windows.Media.Animation.HandoffBehavior.Compose> <xref:System.Windows.Media.Animation.HandoffBehavior> when applying a <xref:System.Windows.Media.Animation.Storyboard>, animation, or <xref:System.Windows.Media.Animation.AnimationClock>.</span></span>  
  
#### <a name="ticks-and-event-consolidation"></a><span data-ttu-id="4cc0e-163">Такты и объединение событий</span><span class="sxs-lookup"><span data-stu-id="4cc0e-163">Ticks and Event Consolidation</span></span>  
 <span data-ttu-id="4cc0e-164">В дополнение к расчету выходных значений тикающий диспетчер времени выполняет и другие операции: он определяет состояние всех часов и вызывает соответствующие события.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-164">In addition to calculating output values, the time manager does other work every time it ticks: it determines the state of each clock and raises events as appropriate.</span></span>  
  
 <span data-ttu-id="4cc0e-165">Хотя такты меняются часто, между ними может возникать множество событий.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-165">While ticks occur frequently, it's possible for a lot of things to happen between ticks.</span></span> <span data-ttu-id="4cc0e-166">Например, <xref:System.Windows.Media.Animation.Clock> может быть остановлен, запущен и остановлен снова, и в этом случае его <xref:System.Windows.Media.Animation.Clock.CurrentState%2A> значение изменится три раза.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-166">For example, a <xref:System.Windows.Media.Animation.Clock> might be stopped, started, and stopped again, in which case its <xref:System.Windows.Media.Animation.Clock.CurrentState%2A> value will have changed three times.</span></span> <span data-ttu-id="4cc0e-167"><xref:System.Windows.Media.Animation.Clock.CurrentStateInvalidated> Теоретически, событие может быть поднято несколько раз одним тиком; однако, механизм синхронизации консолидирует события, так что <xref:System.Windows.Media.Animation.Clock.CurrentStateInvalidated> событие может быть поднято не чаще одного раза за тик.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-167">In theory, the <xref:System.Windows.Media.Animation.Clock.CurrentStateInvalidated> event could be raised multiple times in a single tick; however, the timing engine consolidates events, so that the <xref:System.Windows.Media.Animation.Clock.CurrentStateInvalidated> event can be raised at most once per tick.</span></span> <span data-ttu-id="4cc0e-168">Это относится ко всем событиям синхронизации: не более одного <xref:System.Windows.Media.Animation.Clock> события каждого типа поднимается для данного объекта.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-168">This is true for all timing events: at most one event of each type is raised for a given <xref:System.Windows.Media.Animation.Clock> object.</span></span>  
  
 <span data-ttu-id="4cc0e-169">Когда <xref:System.Windows.Media.Animation.Clock> коммутирует состояния и возвращается обратно в исходное <xref:System.Windows.Media.Animation.ClockState.Active> <xref:System.Windows.Media.Animation.ClockState.Stopped> состояние между <xref:System.Windows.Media.Animation.ClockState.Active>тиками (например, изменение от вкл и обратно к), связанное событие все еще происходит.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-169">When a <xref:System.Windows.Media.Animation.Clock> switches states and returns back to its original state between ticks (such as changing from <xref:System.Windows.Media.Animation.ClockState.Active> to <xref:System.Windows.Media.Animation.ClockState.Stopped> and back to <xref:System.Windows.Media.Animation.ClockState.Active>), the associated event still occurs.</span></span>  
  
 <span data-ttu-id="4cc0e-170">Дополнительные сведения о временных событиях см. в разделе [Общие сведения о временных событиях](timing-events-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4cc0e-170">For more information about timing events, see the [Timing Events Overview](timing-events-overview.md).</span></span>  
  
<a name="currentvaluesbasevaluesofproperties"></a>
## <a name="current-values-and-base-values-of-properties"></a><span data-ttu-id="4cc0e-171">Текущие и базовые значения свойств</span><span class="sxs-lookup"><span data-stu-id="4cc0e-171">Current Values and Base Values of Properties</span></span>  
 <span data-ttu-id="4cc0e-172">Анимированное свойство может иметь два значения: базовое значение и текущее.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-172">An animatable property can have two values: a base value and a current value.</span></span> <span data-ttu-id="4cc0e-173">При установке свойства с помощью <xref:System.Windows.DependencyObject.SetValue%2A> аксессуара CLR или метода вы устанавливаете его базовое значение.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-173">When you set property using its CLR accessor or the <xref:System.Windows.DependencyObject.SetValue%2A> method, you set its base value.</span></span> <span data-ttu-id="4cc0e-174">Если свойство не анимировано, его базовое и текущее значения совпадают.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-174">When a property is not animated, its base and current values are the same.</span></span>  
  
 <span data-ttu-id="4cc0e-175">При анимировать свойство <xref:System.Windows.Media.Animation.AnimationClock> *устанавливается текущая* стоимость свойства.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-175">When you animate a property, the <xref:System.Windows.Media.Animation.AnimationClock> sets the property's *current* value.</span></span> <span data-ttu-id="4cc0e-176">Получение стоимости свойства через его clR-аксессуар <xref:System.Windows.DependencyObject.GetValue%2A> или метод возвращает <xref:System.Windows.Media.Animation.AnimationClock> выход, <xref:System.Windows.Media.Animation.ClockState.Active> <xref:System.Windows.Media.Animation.ClockState.Filling>когда <xref:System.Windows.Media.Animation.AnimationClock> является или .</span><span class="sxs-lookup"><span data-stu-id="4cc0e-176">Retrieving the property's value through its CLR accessor or the <xref:System.Windows.DependencyObject.GetValue%2A> method returns the output of the <xref:System.Windows.Media.Animation.AnimationClock> when the <xref:System.Windows.Media.Animation.AnimationClock> is <xref:System.Windows.Media.Animation.ClockState.Active> or <xref:System.Windows.Media.Animation.ClockState.Filling>.</span></span> <span data-ttu-id="4cc0e-177">Вы можете получить базовое значение свойства <xref:System.Windows.Media.Animation.IAnimatable.GetAnimationBaseValue%2A> с помощью метода.</span><span class="sxs-lookup"><span data-stu-id="4cc0e-177">You can retrieve the property's base value by using the <xref:System.Windows.Media.Animation.IAnimatable.GetAnimationBaseValue%2A> method.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4cc0e-178">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="4cc0e-178">See also</span></span>

- [<span data-ttu-id="4cc0e-179">Общие сведения об эффектах анимации</span><span class="sxs-lookup"><span data-stu-id="4cc0e-179">Animation Overview</span></span>](animation-overview.md)
- [<span data-ttu-id="4cc0e-180">Общие сведения о временных событиях</span><span class="sxs-lookup"><span data-stu-id="4cc0e-180">Timing Events Overview</span></span>](timing-events-overview.md)
- [<span data-ttu-id="4cc0e-181">Общие сведения о характере поведения во времени</span><span class="sxs-lookup"><span data-stu-id="4cc0e-181">Timing Behaviors Overview</span></span>](timing-behaviors-overview.md)
