---
title: Настройка внешнего вида существующего элемента управления путем создания объекта ControlTemplate
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- control contract [WPF]
- controls [WPF], visual structure changes
- ControlTemplate [WPF], customizing for existing controls
- skinning controls [WPF]
- controls [WPF], appearance specified by state
- templates [WPF], custom for existing controls
ms.assetid: 678dd116-43a2-4b8c-82b5-6b826f126e31
ms.openlocfilehash: 63a0b724b71c4a4901c2dedcf502045a75ec405c
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/22/2019
ms.locfileid: "69933722"
---
# <a name="customizing-the-appearance-of-an-existing-control-by-creating-a-controltemplate"></a><span data-ttu-id="918e6-102">Настройка внешнего вида существующего элемента управления путем создания объекта ControlTemplate</span><span class="sxs-lookup"><span data-stu-id="918e6-102">Customizing the Appearance of an Existing Control by Creating a ControlTemplate</span></span>
<a name="introduction"></a><span data-ttu-id="918e6-103">Объект <xref:System.Windows.Controls.ControlTemplate> задает визуальную структуру и визуальное поведение элемента управления.</span><span class="sxs-lookup"><span data-stu-id="918e6-103">A <xref:System.Windows.Controls.ControlTemplate> specifies the visual structure and visual behavior of a control.</span></span> <span data-ttu-id="918e6-104">Внешний вид элемента управления можно настроить, присвоив ему новый <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="918e6-104">You can customize the appearance of a control by giving it a new <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="918e6-105">При создании <xref:System.Windows.Controls.ControlTemplate>вы заменяете внешний вид существующего элемента управления, не изменяя его функциональность.</span><span class="sxs-lookup"><span data-stu-id="918e6-105">When you create a <xref:System.Windows.Controls.ControlTemplate>, you replace the appearance of an existing control without changing its functionality.</span></span> <span data-ttu-id="918e6-106">Например, можно сделать так, чтобы кнопки в приложении округлялись вместо квадратной фигуры по умолчанию, но кнопка по-прежнему будет <xref:System.Windows.Controls.Primitives.ButtonBase.Click> вызывать событие.</span><span class="sxs-lookup"><span data-stu-id="918e6-106">For example, you can make the buttons in your application round instead of the default square shape, but the button will still raise the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event.</span></span>  
  
 <span data-ttu-id="918e6-107">В этом разделе объясняются различные части <xref:System.Windows.Controls.ControlTemplate>, демонстрируется создание простого <xref:System.Windows.Controls.ControlTemplate> для <xref:System.Windows.Controls.Button>, а также объясняется, как определить контракт элемента управления, чтобы можно было настроить его внешний вид.</span><span class="sxs-lookup"><span data-stu-id="918e6-107">This topic explains the various parts of a <xref:System.Windows.Controls.ControlTemplate>, demonstrates creating a simple <xref:System.Windows.Controls.ControlTemplate> for a <xref:System.Windows.Controls.Button>, and explains how to understand the control contract of a control so that you can customize its appearance.</span></span> <span data-ttu-id="918e6-108">Поскольку вы создаете <xref:System.Windows.Controls.ControlTemplate> в [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], можно изменить внешний вид элемента управления без написания какого-либо кода.</span><span class="sxs-lookup"><span data-stu-id="918e6-108">Because you create a <xref:System.Windows.Controls.ControlTemplate> in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], you can change a control's appearance without writing any code.</span></span> <span data-ttu-id="918e6-109">Можно также использовать конструктор, например Microsoft Expression Blend, чтобы создать шаблоны пользовательского элемента управления.</span><span class="sxs-lookup"><span data-stu-id="918e6-109">You can also use a designer, such as Microsoft Expression Blend, to create custom control templates.</span></span> <span data-ttu-id="918e6-110">В этом разделе приведены примеры в [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] , которые настраивают внешний вид <xref:System.Windows.Controls.Button> и перечислены полные примеры в конце раздела.</span><span class="sxs-lookup"><span data-stu-id="918e6-110">This topic shows examples in the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] that customize the appearance of a <xref:System.Windows.Controls.Button> and lists the complete example at the end of the topic.</span></span> <span data-ttu-id="918e6-111">Дополнительные сведения об использовании Expression Blend см. в статье [Настройка стиля элемента управления, поддерживающего шаблон](https://go.microsoft.com/fwlink/?LinkId=161153).</span><span class="sxs-lookup"><span data-stu-id="918e6-111">For more information about using Expression Blend, see [Styling a control that supports templates](https://go.microsoft.com/fwlink/?LinkId=161153).</span></span>  
  
 <span data-ttu-id="918e6-112">На следующих иллюстрациях показан <xref:System.Windows.Controls.Button> объект, который <xref:System.Windows.Controls.ControlTemplate> использует объект, созданный в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="918e6-112">The following illustrations show a <xref:System.Windows.Controls.Button> that uses the <xref:System.Windows.Controls.ControlTemplate> that is created in this topic.</span></span>  
  
 <span data-ttu-id="918e6-113">![Кнопка с пользовательским шаблоном элемента управления.](./media/ndp-buttonnormal.png "NDP_ButtonNormal")</span><span class="sxs-lookup"><span data-stu-id="918e6-113">![A button with a custom control template.](./media/ndp-buttonnormal.png "NDP_ButtonNormal")</span></span>  
<span data-ttu-id="918e6-114">Кнопка, использующая пользовательский шаблон элемента управления</span><span class="sxs-lookup"><span data-stu-id="918e6-114">A button that uses a custom control template</span></span>  
  
 <span data-ttu-id="918e6-115">![Кнопка с красной границей.](./media/ndp-buttonmouseover.png "NDP_ButtonMouseOver")</span><span class="sxs-lookup"><span data-stu-id="918e6-115">![A button with a red border.](./media/ndp-buttonmouseover.png "NDP_ButtonMouseOver")</span></span>  
<span data-ttu-id="918e6-116">Кнопка, использующая пользовательский шаблон элемента управления, когда на ней находится указатель мыши</span><span class="sxs-lookup"><span data-stu-id="918e6-116">A button that uses a custom control template and has the mouse pointer over it</span></span>  

<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="918e6-117">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="918e6-117">Prerequisites</span></span>  
 <span data-ttu-id="918e6-118">В этом разделе предполагается, что пользователь понимает процесс создания и использования элементов управления и стилей, который рассматривался в разделе [Элементы управления](index.md).</span><span class="sxs-lookup"><span data-stu-id="918e6-118">This topic assumes that you understand how to create and use controls and styles as discussed in [Controls](index.md).</span></span> <span data-ttu-id="918e6-119">Концепции, обсуждаемые в этом разделе, применяются к элементам, которые <xref:System.Windows.Controls.Control> наследуются от класса <xref:System.Windows.Controls.UserControl>, за исключением.</span><span class="sxs-lookup"><span data-stu-id="918e6-119">The concepts discussed in this topic apply to elements that inherit from the <xref:System.Windows.Controls.Control> class, except for the <xref:System.Windows.Controls.UserControl>.</span></span> <span data-ttu-id="918e6-120"><xref:System.Windows.Controls.ControlTemplate> К нельзя применять. <xref:System.Windows.Controls.UserControl></span><span class="sxs-lookup"><span data-stu-id="918e6-120">You cannot apply a <xref:System.Windows.Controls.ControlTemplate> to a <xref:System.Windows.Controls.UserControl>.</span></span>  
  
<a name="when_you_should_create_a_controltemplate"></a>   
## <a name="when-you-should-create-a-controltemplate"></a><span data-ttu-id="918e6-121">Когда следует создавать объект ControlTemplate</span><span class="sxs-lookup"><span data-stu-id="918e6-121">When You Should Create a ControlTemplate</span></span>  
 <span data-ttu-id="918e6-122">Элементы управления имеют много свойств, таких <xref:System.Windows.Controls.Border.Background%2A>как <xref:System.Windows.Controls.Control.Foreground%2A>, и <xref:System.Windows.Controls.Control.FontFamily%2A>, которые можно задать для задания различных аспектов внешнего вида элемента управления, но изменения, которые можно выполнить путем установки этих свойств, ограничены.</span><span class="sxs-lookup"><span data-stu-id="918e6-122">Controls have many properties, such as <xref:System.Windows.Controls.Border.Background%2A>, <xref:System.Windows.Controls.Control.Foreground%2A>, and <xref:System.Windows.Controls.Control.FontFamily%2A>, that you can set to specify different aspects of the control's appearance, but the changes that you can make by setting these properties are limited.</span></span> <span data-ttu-id="918e6-123">Например, можно задать <xref:System.Windows.Controls.Control.Foreground%2A> для свойства синий цвет и <xref:System.Windows.Controls.Control.FontStyle%2A> курсив на <xref:System.Windows.Controls.CheckBox>.</span><span class="sxs-lookup"><span data-stu-id="918e6-123">For example, you can set the <xref:System.Windows.Controls.Control.Foreground%2A> property to blue and <xref:System.Windows.Controls.Control.FontStyle%2A> to italic on a <xref:System.Windows.Controls.CheckBox>.</span></span>  
  
 <span data-ttu-id="918e6-124">Без возможности создания новых <xref:System.Windows.Controls.ControlTemplate> элементов управления для всех элементов управления в каждом [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]приложении будет иметь одинаковый общий внешний вид, что ограничит возможность создания приложения с пользовательским внешним видом и поведением.</span><span class="sxs-lookup"><span data-stu-id="918e6-124">Without the ability to create a new <xref:System.Windows.Controls.ControlTemplate> for controls, all controls in every [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-based application would have the same general appearance, which would limit the ability to create an application with a custom look and feel.</span></span> <span data-ttu-id="918e6-125">По умолчанию каждый <xref:System.Windows.Controls.CheckBox> из них имеет похожие характеристики.</span><span class="sxs-lookup"><span data-stu-id="918e6-125">By default, every <xref:System.Windows.Controls.CheckBox> has similar characteristics.</span></span> <span data-ttu-id="918e6-126">Например, содержимое <xref:System.Windows.Controls.CheckBox> элемента всегда находится справа от индикатора выбора, а галочка всегда используется для указания того, что выбрано значение <xref:System.Windows.Controls.CheckBox> .</span><span class="sxs-lookup"><span data-stu-id="918e6-126">For example, the content of the <xref:System.Windows.Controls.CheckBox> is always to the right of the selection indicator, and the check mark is always used to indicate that the <xref:System.Windows.Controls.CheckBox> is selected.</span></span>  
  
 <span data-ttu-id="918e6-127">Вы создаете <xref:System.Windows.Controls.ControlTemplate> , когда нужно настроить внешний вид элемента управления, помимо того, что устанавливает другие свойства элемента управления.</span><span class="sxs-lookup"><span data-stu-id="918e6-127">You create a <xref:System.Windows.Controls.ControlTemplate> when you want to customize the control's appearance beyond what setting the other properties on the control will do.</span></span> <span data-ttu-id="918e6-128">Предположим, что содержимое флажка находится над индикатором выделения, и необходимо, чтобы значение X указывало <xref:System.Windows.Controls.CheckBox> на выбранное значение. <xref:System.Windows.Controls.CheckBox></span><span class="sxs-lookup"><span data-stu-id="918e6-128">In the example of the <xref:System.Windows.Controls.CheckBox>, suppose that you want the content of the check box to be above the selection indicator and you want an X to indicate that the <xref:System.Windows.Controls.CheckBox> is selected.</span></span> <span data-ttu-id="918e6-129">Эти изменения указываются в параметре <xref:System.Windows.Controls.ControlTemplate> <xref:System.Windows.Controls.CheckBox>объекта.</span><span class="sxs-lookup"><span data-stu-id="918e6-129">You specify these changes in the <xref:System.Windows.Controls.ControlTemplate> of the <xref:System.Windows.Controls.CheckBox>.</span></span>  
  
 <span data-ttu-id="918e6-130">На следующем рисунке показан объект <xref:System.Windows.Controls.CheckBox> , который использует значение <xref:System.Windows.Controls.ControlTemplate>по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="918e6-130">The following illustration shows a <xref:System.Windows.Controls.CheckBox> that uses a default <xref:System.Windows.Controls.ControlTemplate>.</span></span>  
  
 <span data-ttu-id="918e6-131">![Флажок с шаблоном элемента управления по умолчанию.](./media/ndp-checkboxdefault.png "NDP_CheckBoxDefault")</span><span class="sxs-lookup"><span data-stu-id="918e6-131">![A checkbox with the default control template.](./media/ndp-checkboxdefault.png "NDP_CheckBoxDefault")</span></span>  
<span data-ttu-id="918e6-132">Элемент управления CheckBox, использующий шаблон элемента управления по умолчанию</span><span class="sxs-lookup"><span data-stu-id="918e6-132">A CheckBox that uses the default control template</span></span>  
  
 <span data-ttu-id="918e6-133">На следующем рисунке показан объект <xref:System.Windows.Controls.CheckBox> , который использует пользовательский <xref:System.Windows.Controls.ControlTemplate> объект для <xref:System.Windows.Controls.CheckBox> размещения содержимого над индикатором <xref:System.Windows.Controls.CheckBox> выделения и отображает X при выборе.</span><span class="sxs-lookup"><span data-stu-id="918e6-133">The following illustration shows a <xref:System.Windows.Controls.CheckBox> that uses a custom <xref:System.Windows.Controls.ControlTemplate> to place the content of the <xref:System.Windows.Controls.CheckBox> above the selection indicator and displays an X when the <xref:System.Windows.Controls.CheckBox> is selected.</span></span>  
  
 <span data-ttu-id="918e6-134">![Флажок с пользовательским шаблоном элемента управления.](./media/ndp-checkboxcustom.png "NDP_CheckBoxCustom")</span><span class="sxs-lookup"><span data-stu-id="918e6-134">![A checkbox with a custom control template.](./media/ndp-checkboxcustom.png "NDP_CheckBoxCustom")</span></span>  
<span data-ttu-id="918e6-135">Элемент управления CheckBox, использующий пользовательский шаблон элемента управления</span><span class="sxs-lookup"><span data-stu-id="918e6-135">A CheckBox that uses a custom control template</span></span>  
  
 <span data-ttu-id="918e6-136">Для в этом примере относительно сложный, поэтому в этом разделе используется <xref:System.Windows.Controls.ControlTemplate> более простой пример создания для <xref:System.Windows.Controls.Button>. <xref:System.Windows.Controls.ControlTemplate> <xref:System.Windows.Controls.CheckBox></span><span class="sxs-lookup"><span data-stu-id="918e6-136">The <xref:System.Windows.Controls.ControlTemplate> for the <xref:System.Windows.Controls.CheckBox> in this sample is relatively complex, so this topic uses a simpler example of creating a <xref:System.Windows.Controls.ControlTemplate> for a <xref:System.Windows.Controls.Button>.</span></span>  
  
<a name="changing_the_visual_structure_of_a_control"></a>   
## <a name="changing-the-visual-structure-of-a-control"></a><span data-ttu-id="918e6-137">Изменение визуальной структуры элемента управления</span><span class="sxs-lookup"><span data-stu-id="918e6-137">Changing the Visual Structure of a Control</span></span>  
 <span data-ttu-id="918e6-138">В [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]элемент управления часто представляет собой составные <xref:System.Windows.FrameworkElement> объекты.</span><span class="sxs-lookup"><span data-stu-id="918e6-138">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], a control is often a composite <xref:System.Windows.FrameworkElement> objects.</span></span> <span data-ttu-id="918e6-139">При создании <xref:System.Windows.Controls.ControlTemplate>вы объединяете <xref:System.Windows.FrameworkElement> объекты для создания одного элемента управления.</span><span class="sxs-lookup"><span data-stu-id="918e6-139">When you create a <xref:System.Windows.Controls.ControlTemplate>, you combine <xref:System.Windows.FrameworkElement> objects to build a single control.</span></span> <span data-ttu-id="918e6-140">Элемент должен иметь только один <xref:System.Windows.FrameworkElement> в качестве корневого элемента. <xref:System.Windows.Controls.ControlTemplate></span><span class="sxs-lookup"><span data-stu-id="918e6-140">A <xref:System.Windows.Controls.ControlTemplate> must have only one <xref:System.Windows.FrameworkElement> as its root element.</span></span> <span data-ttu-id="918e6-141">Корневой элемент обычно содержит другие <xref:System.Windows.FrameworkElement> объекты.</span><span class="sxs-lookup"><span data-stu-id="918e6-141">The root element usually contains other <xref:System.Windows.FrameworkElement> objects.</span></span> <span data-ttu-id="918e6-142">Комбинация объектов составляет визуальную структуру элемента управления.</span><span class="sxs-lookup"><span data-stu-id="918e6-142">The combination of objects makes up the control's visual structure.</span></span>  
  
 <span data-ttu-id="918e6-143">В следующем примере создается пользовательский <xref:System.Windows.Controls.ControlTemplate> объект <xref:System.Windows.Controls.Button>для.</span><span class="sxs-lookup"><span data-stu-id="918e6-143">The following example creates a custom <xref:System.Windows.Controls.ControlTemplate> for the <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="918e6-144">Создает визуальную структуру <xref:System.Windows.Controls.Button>. <xref:System.Windows.Controls.ControlTemplate></span><span class="sxs-lookup"><span data-stu-id="918e6-144">The <xref:System.Windows.Controls.ControlTemplate> creates the visual structure of the <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="918e6-145">В этом примере не меняется внешний вид кнопки при перемещении на нее указателя мыши или при ее нажатии.</span><span class="sxs-lookup"><span data-stu-id="918e6-145">This example does not change the button's appearance when you move the mouse pointer over it or click it.</span></span> <span data-ttu-id="918e6-146">Изменение внешнего вида кнопки при ее переходе в другое состояние рассматривается далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="918e6-146">Changing the button's appearance when it is in a different state is discussed later in this topic.</span></span>  
  
 <span data-ttu-id="918e6-147">В данном примере визуальная структура состоит из следующих частей:</span><span class="sxs-lookup"><span data-stu-id="918e6-147">In this example, the visual structure consists of the following parts:</span></span>  
  
- <span data-ttu-id="918e6-148">Имя, служащее корнем <xref:System.Windows.FrameworkElement>шаблона. <xref:System.Windows.Controls.Border> `RootElement`</span><span class="sxs-lookup"><span data-stu-id="918e6-148">A <xref:System.Windows.Controls.Border> named `RootElement` that serves as the template's root <xref:System.Windows.FrameworkElement>.</span></span>  
  
- <span data-ttu-id="918e6-149">Объект <xref:System.Windows.Controls.Grid> , являющийся `RootElement`дочерним элементом.</span><span class="sxs-lookup"><span data-stu-id="918e6-149">A <xref:System.Windows.Controls.Grid> that is a child of `RootElement`.</span></span>  
  
- <span data-ttu-id="918e6-150">Объект <xref:System.Windows.Controls.ContentPresenter> , отображающий содержимое кнопки.</span><span class="sxs-lookup"><span data-stu-id="918e6-150">A <xref:System.Windows.Controls.ContentPresenter> that displays the button's content.</span></span> <span data-ttu-id="918e6-151"><xref:System.Windows.Controls.ContentPresenter> Позволяет отображать любой тип объекта.</span><span class="sxs-lookup"><span data-stu-id="918e6-151">The <xref:System.Windows.Controls.ContentPresenter> enables any type of object to be displayed.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#BasicTemplate](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#basictemplate)]  
  
### <a name="preserving-the-functionality-of-a-controls-properties-by-using-templatebinding"></a><span data-ttu-id="918e6-152">Сохранение функциональности свойств элемента управления с помощью TemplateBinding</span><span class="sxs-lookup"><span data-stu-id="918e6-152">Preserving the Functionality of a Control's Properties by Using TemplateBinding</span></span>  
 <span data-ttu-id="918e6-153">При создании нового <xref:System.Windows.Controls.ControlTemplate>для изменения внешнего вида элемента управления может потребоваться использовать открытые свойства.</span><span class="sxs-lookup"><span data-stu-id="918e6-153">When you create a new <xref:System.Windows.Controls.ControlTemplate>, you still might want to use the public properties to change the control's appearance.</span></span> <span data-ttu-id="918e6-154">Расширение разметки [TemplateBinding](../advanced/templatebinding-markup-extension.md) привязывает свойство элемента, который находится в, <xref:System.Windows.Controls.ControlTemplate> к открытому свойству, определенному элементом управления.</span><span class="sxs-lookup"><span data-stu-id="918e6-154">The [TemplateBinding](../advanced/templatebinding-markup-extension.md) markup extension binds a property of an element that is in the <xref:System.Windows.Controls.ControlTemplate> to a public property that is defined by the control.</span></span> <span data-ttu-id="918e6-155">Использование расширения [TemplateBinding](../advanced/templatebinding-markup-extension.md) позволяет свойствам элемента управления действовать в качестве параметров шаблона.</span><span class="sxs-lookup"><span data-stu-id="918e6-155">When you use [TemplateBinding](../advanced/templatebinding-markup-extension.md), you enable properties on the control to act as parameters to the template.</span></span> <span data-ttu-id="918e6-156">Это означает, что при задании свойства элемента управления соответствующее значение передается в элемент, который содержит [TemplateBinding](../advanced/templatebinding-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="918e6-156">That is, when a property on a control is set, that value is passed on to the element that has the [TemplateBinding](../advanced/templatebinding-markup-extension.md) on it.</span></span>  
  
 <span data-ttu-id="918e6-157">В следующем примере повторяется часть предыдущего примера, в которой используется расширение разметки [TemplateBinding](../advanced/templatebinding-markup-extension.md) для привязки свойств элементов, которые находятся в, <xref:System.Windows.Controls.ControlTemplate> к общим свойствам, определенным кнопкой.</span><span class="sxs-lookup"><span data-stu-id="918e6-157">The following example repeats the part of the preceding example that uses the [TemplateBinding](../advanced/templatebinding-markup-extension.md) markup extension to bind properties of elements that are in the <xref:System.Windows.Controls.ControlTemplate> to public properties that are defined by the button.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#TemplateBinding](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#templatebinding)]  
  
 <span data-ttu-id="918e6-158">В этом примере <xref:System.Windows.Controls.Grid> шаблон <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=nameWithType> свойства имеет привязанный к <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="918e6-158">In this example, the <xref:System.Windows.Controls.Grid> has its <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=nameWithType> property template bound to <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="918e6-159">Так <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=nameWithType> как является привязанным шаблоном, можно создать несколько кнопок, которые <xref:System.Windows.Controls.ControlTemplate> используют один и <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> тот же параметр, и задать разные значения для каждой кнопки.</span><span class="sxs-lookup"><span data-stu-id="918e6-159">Because <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=nameWithType> is template bound, you can create multiple buttons that use the same <xref:System.Windows.Controls.ControlTemplate> and set the <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> to different values on each button.</span></span> <span data-ttu-id="918e6-160">Если <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> шаблон не привязан к свойству элемента <xref:System.Windows.Controls.ControlTemplate>в, установка <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> элемента кнопки не повлияет на внешний вид кнопки.</span><span class="sxs-lookup"><span data-stu-id="918e6-160">If <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> was not template bound to a property of an element in the <xref:System.Windows.Controls.ControlTemplate>, setting the <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> of a button would have no impact on the button's appearance.</span></span>  
  
 <span data-ttu-id="918e6-161">Следует отметить, что не требуется, чтобы имена этих двух свойств совпадали.</span><span class="sxs-lookup"><span data-stu-id="918e6-161">Note that the names of the two properties do not need to be identical.</span></span> <span data-ttu-id="918e6-162">В предыдущем примере <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=nameWithType> свойство <xref:System.Windows.Controls.Button> шаблона <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=nameWithType> имеет значение, привязанное <xref:System.Windows.Controls.ContentPresenter>к свойству объекта.</span><span class="sxs-lookup"><span data-stu-id="918e6-162">In the preceding example, the <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=nameWithType> property of the <xref:System.Windows.Controls.Button> is template bound to the <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=nameWithType> property of the <xref:System.Windows.Controls.ContentPresenter>.</span></span> <span data-ttu-id="918e6-163">Это позволяет располагать содержимое кнопки горизонтально.</span><span class="sxs-lookup"><span data-stu-id="918e6-163">This enables the content of the button to be positioned horizontally.</span></span> <span data-ttu-id="918e6-164"><xref:System.Windows.Controls.ContentPresenter>не имеет свойства с именем `HorizontalContentAlignment`, но <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=nameWithType> может быть привязано к <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="918e6-164"><xref:System.Windows.Controls.ContentPresenter> does not have a property named `HorizontalContentAlignment`, but <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=nameWithType> can be bound to <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="918e6-165">Перед привязкой свойства к шаблону следует убедиться, что целевое и исходное свойства имеют один и тот же тип.</span><span class="sxs-lookup"><span data-stu-id="918e6-165">When you template bind a property, be sure that the target and source properties are the same type.</span></span>  
  
 <span data-ttu-id="918e6-166"><xref:System.Windows.Controls.Control> Класс определяет несколько свойств, которые должны использоваться шаблоном элемента управления для получения влияния на элемент управления, когда они заданы.</span><span class="sxs-lookup"><span data-stu-id="918e6-166">The <xref:System.Windows.Controls.Control> class defines several properties that must be used by the control template to have an effect on the control when they are set.</span></span> <span data-ttu-id="918e6-167"><xref:System.Windows.Controls.ControlTemplate> Использование свойства зависит от свойства.</span><span class="sxs-lookup"><span data-stu-id="918e6-167">How the <xref:System.Windows.Controls.ControlTemplate> uses the property depends on the property.</span></span> <span data-ttu-id="918e6-168">Параметр <xref:System.Windows.Controls.ControlTemplate> должен использовать свойство одним из следующих способов:</span><span class="sxs-lookup"><span data-stu-id="918e6-168">The <xref:System.Windows.Controls.ControlTemplate> must use the property in one of the following ways:</span></span>  
  
- <span data-ttu-id="918e6-169">Элемент в <xref:System.Windows.Controls.ControlTemplate> шаблоне привязывается к свойству.</span><span class="sxs-lookup"><span data-stu-id="918e6-169">An element in the <xref:System.Windows.Controls.ControlTemplate> template binds to the property.</span></span>  
  
- <span data-ttu-id="918e6-170">Элемент в <xref:System.Windows.Controls.ControlTemplate> класса наследует свойство от родителя <xref:System.Windows.FrameworkElement>.</span><span class="sxs-lookup"><span data-stu-id="918e6-170">An element in the <xref:System.Windows.Controls.ControlTemplate> inherits the property from a parent <xref:System.Windows.FrameworkElement>.</span></span>  
  
 <span data-ttu-id="918e6-171">В следующей таблице перечислены визуальные свойства, наследуемые элементом управления <xref:System.Windows.Controls.Control> от класса.</span><span class="sxs-lookup"><span data-stu-id="918e6-171">The following table lists the visual properties inherited by a control from the <xref:System.Windows.Controls.Control> class.</span></span> <span data-ttu-id="918e6-172">В таблице также указывается, использует ли шаблон элемента управления по умолчанию значение наследуемого свойства или оно должно быть привязано к шаблону.</span><span class="sxs-lookup"><span data-stu-id="918e6-172">It also indicates whether the default control template of a control uses the inherited property value or if it must be template bound.</span></span>  
  
|<span data-ttu-id="918e6-173">Свойство.</span><span class="sxs-lookup"><span data-stu-id="918e6-173">Property</span></span>|<span data-ttu-id="918e6-174">Способ использования</span><span class="sxs-lookup"><span data-stu-id="918e6-174">Usage method</span></span>|  
|--------------|------------------|  
|<xref:System.Windows.Controls.Control.Background%2A>|<span data-ttu-id="918e6-175">Привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="918e6-175">Template binding</span></span>|  
|<xref:System.Windows.Controls.Control.BorderThickness%2A>|<span data-ttu-id="918e6-176">Привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="918e6-176">Template binding</span></span>|  
|<xref:System.Windows.Controls.Control.BorderBrush%2A>|<span data-ttu-id="918e6-177">Привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="918e6-177">Template binding</span></span>|  
|<xref:System.Windows.Controls.Control.FontFamily%2A>|<span data-ttu-id="918e6-178">Наследование свойства или привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="918e6-178">Property inheritance or template binding</span></span>|  
|<xref:System.Windows.Controls.Control.FontSize%2A>|<span data-ttu-id="918e6-179">Наследование свойства или привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="918e6-179">Property inheritance or template binding</span></span>|  
|<xref:System.Windows.Controls.Control.FontStretch%2A>|<span data-ttu-id="918e6-180">Наследование свойства или привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="918e6-180">Property inheritance or template binding</span></span>|  
|<xref:System.Windows.Controls.Control.FontWeight%2A>|<span data-ttu-id="918e6-181">Наследование свойства или привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="918e6-181">Property inheritance or template binding</span></span>|  
|<xref:System.Windows.Controls.Control.Foreground%2A>|<span data-ttu-id="918e6-182">Наследование свойства или привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="918e6-182">Property inheritance or template binding</span></span>|  
|<xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A>|<span data-ttu-id="918e6-183">Привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="918e6-183">Template binding</span></span>|  
|<xref:System.Windows.Controls.Control.Padding%2A>|<span data-ttu-id="918e6-184">Привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="918e6-184">Template binding</span></span>|  
|<xref:System.Windows.Controls.Control.VerticalContentAlignment%2A>|<span data-ttu-id="918e6-185">Привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="918e6-185">Template binding</span></span>|  
  
 <span data-ttu-id="918e6-186">В таблице перечислены только визуальные свойства, унаследованные <xref:System.Windows.Controls.Control> от класса.</span><span class="sxs-lookup"><span data-stu-id="918e6-186">The table lists only the visual properties inherited from the <xref:System.Windows.Controls.Control> class.</span></span> <span data-ttu-id="918e6-187">Помимо свойств, перечисленных в таблице, элемент управления может также наследовать <xref:System.Windows.FrameworkElement.DataContext%2A>свойства, <xref:System.Windows.FrameworkElement.Language%2A>и <xref:System.Windows.Controls.TextBlock.TextDecorations%2A> из родительского элемента Framework.</span><span class="sxs-lookup"><span data-stu-id="918e6-187">Apart from the properties listed in the table, a control may also inherit the <xref:System.Windows.FrameworkElement.DataContext%2A>, <xref:System.Windows.FrameworkElement.Language%2A>, and <xref:System.Windows.Controls.TextBlock.TextDecorations%2A> properties from the parent framework element.</span></span>  
  
 <span data-ttu-id="918e6-188">Кроме того, если <xref:System.Windows.Controls.ContentPresenter> находится <xref:System.Windows.Controls.ControlTemplate> в <xref:System.Windows.Controls.ContentControl>, то <xref:System.Windows.Controls.ContentPresenter> будет автоматически привязан к <xref:System.Windows.Controls.ContentControl.ContentTemplate%2A> свойствам и <xref:System.Windows.Controls.ContentControl.Content%2A> .</span><span class="sxs-lookup"><span data-stu-id="918e6-188">Also, if the <xref:System.Windows.Controls.ContentPresenter> is in the <xref:System.Windows.Controls.ControlTemplate> of a <xref:System.Windows.Controls.ContentControl>, the <xref:System.Windows.Controls.ContentPresenter> will automatically bind to the <xref:System.Windows.Controls.ContentControl.ContentTemplate%2A> and <xref:System.Windows.Controls.ContentControl.Content%2A> properties.</span></span> <span data-ttu-id="918e6-189">Аналогично, <xref:System.Windows.Controls.ItemsPresenter> , который находится в <xref:System.Windows.Controls.ControlTemplate> , <xref:System.Windows.Controls.ItemsControl> будет автоматически привязан к <xref:System.Windows.Controls.ItemsControl.Items%2A> свойствам и <xref:System.Windows.Controls.ItemsPresenter> .</span><span class="sxs-lookup"><span data-stu-id="918e6-189">Likewise, an <xref:System.Windows.Controls.ItemsPresenter> that is in the <xref:System.Windows.Controls.ControlTemplate> of an <xref:System.Windows.Controls.ItemsControl> will automatically bind to the <xref:System.Windows.Controls.ItemsControl.Items%2A> and <xref:System.Windows.Controls.ItemsPresenter> properties.</span></span>  
  
 <span data-ttu-id="918e6-190">В следующем примере создаются две кнопки, которые используют <xref:System.Windows.Controls.ControlTemplate> объект, определенный в предыдущем примере.</span><span class="sxs-lookup"><span data-stu-id="918e6-190">The following example creates two buttons that use the <xref:System.Windows.Controls.ControlTemplate> defined in the preceding example.</span></span> <span data-ttu-id="918e6-191">В примере <xref:System.Windows.Controls.Control.Background%2A>задаются <xref:System.Windows.Controls.Control.Foreground%2A>свойства, <xref:System.Windows.Controls.Control.FontSize%2A> и для каждой кнопки.</span><span class="sxs-lookup"><span data-stu-id="918e6-191">The example sets the <xref:System.Windows.Controls.Control.Background%2A>, <xref:System.Windows.Controls.Control.Foreground%2A>, and <xref:System.Windows.Controls.Control.FontSize%2A> properties on each button.</span></span> <span data-ttu-id="918e6-192">Установка свойства оказывает воздействие, <xref:System.Windows.Controls.ControlTemplate>так как оно привязано к шаблону в. <xref:System.Windows.Controls.Control.Background%2A></span><span class="sxs-lookup"><span data-stu-id="918e6-192">Setting the <xref:System.Windows.Controls.Control.Background%2A> property has an effect because it is template bound in the <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="918e6-193">Несмотря на то <xref:System.Windows.Controls.Control.Foreground%2A> , <xref:System.Windows.Controls.Control.FontSize%2A> что свойства и не привязаны к шаблону, их установка оказывает воздействие, поскольку их значения наследуются.</span><span class="sxs-lookup"><span data-stu-id="918e6-193">Even though the <xref:System.Windows.Controls.Control.Foreground%2A> and <xref:System.Windows.Controls.Control.FontSize%2A> properties are not template bound, setting them has an effect because their values are inherited.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#ButtonDeclaration](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#buttondeclaration)]  
  
 <span data-ttu-id="918e6-194">В предыдущем примере получался результат, аналогичный показанному на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="918e6-194">The preceding example produces output that is similar to the following illustration.</span></span>  
  
 <span data-ttu-id="918e6-195">![Две кнопки, одна синяя и одна фиолетовой.](./media/ndp-buttontwo.png "NDP_ButtonTwo")</span><span class="sxs-lookup"><span data-stu-id="918e6-195">![Two buttons, one blue and one purple.](./media/ndp-buttontwo.png "NDP_ButtonTwo")</span></span>  
<span data-ttu-id="918e6-196">Две кнопки с различными цветами фона</span><span class="sxs-lookup"><span data-stu-id="918e6-196">Two buttons with different background colors</span></span>  
  
<a name="changing_the_appearance_of_a_control_depending_on_its_state"></a>   
## <a name="changing-the-appearance-of-a-control-depending-on-its-state"></a><span data-ttu-id="918e6-197">Изменение внешнего вида элемента управления в зависимости от его состояния</span><span class="sxs-lookup"><span data-stu-id="918e6-197">Changing the Appearance of a Control Depending on Its State</span></span>  
 <span data-ttu-id="918e6-198">Разница между кнопкой с внешним видом по умолчанию и кнопкой из предыдущего примера состоит в том, что кнопка по умолчанию слегка изменяется при переходе в другое состояние.</span><span class="sxs-lookup"><span data-stu-id="918e6-198">The difference between a button with its default appearance and the button in the preceding example is that the default button subtly changes when it is in different states.</span></span> <span data-ttu-id="918e6-199">Например, внешний вид кнопки по умолчанию изменяется при нажатии этой кнопки или при наведении на нее указателя мыши.</span><span class="sxs-lookup"><span data-stu-id="918e6-199">For example, the default button's appearance changes when the button is pressed, or when the mouse pointer is over the button.</span></span> <span data-ttu-id="918e6-200"><xref:System.Windows.Controls.ControlTemplate> Хотя компонент не изменяет функциональные возможности элемента управления, он изменяет визуальное поведение элемента управления.</span><span class="sxs-lookup"><span data-stu-id="918e6-200">Although the <xref:System.Windows.Controls.ControlTemplate> does not change the functionality of a control, it does change the control's visual behavior.</span></span> <span data-ttu-id="918e6-201">Визуальное поведение описывает внешний вид элемента управления в определенных состояниях.</span><span class="sxs-lookup"><span data-stu-id="918e6-201">A visual behavior describes the control appearance when it is in a certain state.</span></span> <span data-ttu-id="918e6-202">Чтобы лучше понять разницу между функциональностью и визуальным поведением элемента управления, рассмотрим пример с кнопкой.</span><span class="sxs-lookup"><span data-stu-id="918e6-202">To understand the difference between the functionality and visual behavior of a control, consider the button example.</span></span> <span data-ttu-id="918e6-203">Функциональность кнопки заключается в вызове <xref:System.Windows.Controls.Primitives.ButtonBase.Click> события при его щелчке, но визуальное поведение кнопки заключается в том, чтобы изменить внешний вид, на который указывает или нажата кнопка.</span><span class="sxs-lookup"><span data-stu-id="918e6-203">The button's functionality is to raise the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event when it is clicked, but the button's visual behavior is to change its appearance when it is pointed to or pressed.</span></span>  
  
 <span data-ttu-id="918e6-204">Объекты используются <xref:System.Windows.VisualState> для задания внешнего вида элемента управления, если он находится в определенном состоянии.</span><span class="sxs-lookup"><span data-stu-id="918e6-204">You use <xref:System.Windows.VisualState> objects to specify the appearance of a control when it is in a certain state.</span></span> <span data-ttu-id="918e6-205">Объект <xref:System.Windows.VisualState> содержит объект <xref:System.Windows.Media.Animation.Storyboard> , который изменяет внешний вид <xref:System.Windows.Controls.ControlTemplate>элементов в.</span><span class="sxs-lookup"><span data-stu-id="918e6-205">A <xref:System.Windows.VisualState> contains a <xref:System.Windows.Media.Animation.Storyboard> that changes the appearance of the elements that are in the <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="918e6-206">Для этого не нужно писать код, так как логика элемента управления меняет состояние с помощью <xref:System.Windows.VisualStateManager>.</span><span class="sxs-lookup"><span data-stu-id="918e6-206">You do not have to write any code to make this occur because the control's logic changes state by using the <xref:System.Windows.VisualStateManager>.</span></span> <span data-ttu-id="918e6-207">Когда элемент управления переходит в состояние, заданное <xref:System.Windows.VisualState.Name%2A?displayProperty=nameWithType> свойством <xref:System.Windows.Media.Animation.Storyboard> , начинается.</span><span class="sxs-lookup"><span data-stu-id="918e6-207">When the control enters the state that is specified by the <xref:System.Windows.VisualState.Name%2A?displayProperty=nameWithType> property, the <xref:System.Windows.Media.Animation.Storyboard> begins.</span></span> <span data-ttu-id="918e6-208">Когда элемент управления выходит из состояния, <xref:System.Windows.Media.Animation.Storyboard> останавливается.</span><span class="sxs-lookup"><span data-stu-id="918e6-208">When the control exits the state, the <xref:System.Windows.Media.Animation.Storyboard> stops.</span></span>  
  
 <span data-ttu-id="918e6-209">В следующем примере показано <xref:System.Windows.VisualState> , что изменяет внешний вид <xref:System.Windows.Controls.Button> объекта при наведении на него указателя мыши.</span><span class="sxs-lookup"><span data-stu-id="918e6-209">The following example shows the <xref:System.Windows.VisualState> that changes the appearance of a <xref:System.Windows.Controls.Button> when the mouse pointer is over it.</span></span> <span data-ttu-id="918e6-210">Изменяет цвет границы кнопки, изменяя цвет `BorderBrush`. <xref:System.Windows.Media.Animation.Storyboard></span><span class="sxs-lookup"><span data-stu-id="918e6-210">The <xref:System.Windows.Media.Animation.Storyboard> changes the button's border color by changing the color of the `BorderBrush`.</span></span> <span data-ttu-id="918e6-211">Если вы ссылаетесь на <xref:System.Windows.Controls.ControlTemplate> пример в начале этого раздела, то помните, что `BorderBrush` <xref:System.Windows.Media.SolidColorBrush> это имя, назначенное для <xref:System.Windows.Controls.Border.Background%2A> объекта <xref:System.Windows.Controls.Border>.</span><span class="sxs-lookup"><span data-stu-id="918e6-211">If you refer to the <xref:System.Windows.Controls.ControlTemplate> example at the beginning of this topic, you will recall that `BorderBrush` is the name of the <xref:System.Windows.Media.SolidColorBrush> that is assigned to the <xref:System.Windows.Controls.Border.Background%2A> of the <xref:System.Windows.Controls.Border>.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#4](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#4)]  
  
 <span data-ttu-id="918e6-212">Элемент управления отвечает за определение состояний как часть своего контракта, что подробно рассматривается в подразделе [Настройка других элементов управления через понимание контракта элемента управления](#customizing_other_controls_by_understanding_the_control_contract) далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="918e6-212">The control is responsible for defining the states as part of its control contract, which is discussed in detail in [Customizing Other Controls by Understanding the Control Contract](#customizing_other_controls_by_understanding_the_control_contract) later in this topic.</span></span> <span data-ttu-id="918e6-213">В следующей таблице перечислены состояния, указанные для <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="918e6-213">The following table lists the states that are specified for the <xref:System.Windows.Controls.Button>.</span></span>  
  
|<span data-ttu-id="918e6-214">Имя VisualState</span><span class="sxs-lookup"><span data-stu-id="918e6-214">VisualState Name</span></span>|<span data-ttu-id="918e6-215">Имя VisualStateGroup</span><span class="sxs-lookup"><span data-stu-id="918e6-215">VisualStateGroup Name</span></span>|<span data-ttu-id="918e6-216">Описание</span><span class="sxs-lookup"><span data-stu-id="918e6-216">Description</span></span>|  
|----------------------|---------------------------|-----------------|  
|<span data-ttu-id="918e6-217">Обычный</span><span class="sxs-lookup"><span data-stu-id="918e6-217">Normal</span></span>|<span data-ttu-id="918e6-218">CommonStates</span><span class="sxs-lookup"><span data-stu-id="918e6-218">CommonStates</span></span>|<span data-ttu-id="918e6-219">Состояние по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="918e6-219">The default state.</span></span>|  
|<span data-ttu-id="918e6-220">MouseOver</span><span class="sxs-lookup"><span data-stu-id="918e6-220">MouseOver</span></span>|<span data-ttu-id="918e6-221">CommonStates</span><span class="sxs-lookup"><span data-stu-id="918e6-221">CommonStates</span></span>|<span data-ttu-id="918e6-222">Указатель мыши расположен в элементе управления.</span><span class="sxs-lookup"><span data-stu-id="918e6-222">The mouse pointer is positioned over the control.</span></span>|  
|<span data-ttu-id="918e6-223">Нажато</span><span class="sxs-lookup"><span data-stu-id="918e6-223">Pressed</span></span>|<span data-ttu-id="918e6-224">CommonStates</span><span class="sxs-lookup"><span data-stu-id="918e6-224">CommonStates</span></span>|<span data-ttu-id="918e6-225">Элемент управления нажат.</span><span class="sxs-lookup"><span data-stu-id="918e6-225">The control is pressed.</span></span>|  
|<span data-ttu-id="918e6-226">отключено</span><span class="sxs-lookup"><span data-stu-id="918e6-226">Disabled</span></span>|<span data-ttu-id="918e6-227">CommonStates</span><span class="sxs-lookup"><span data-stu-id="918e6-227">CommonStates</span></span>|<span data-ttu-id="918e6-228">Элемент управления отключен.</span><span class="sxs-lookup"><span data-stu-id="918e6-228">The control is disabled.</span></span>|  
|<span data-ttu-id="918e6-229">Focused</span><span class="sxs-lookup"><span data-stu-id="918e6-229">Focused</span></span>|<span data-ttu-id="918e6-230">FocusStates</span><span class="sxs-lookup"><span data-stu-id="918e6-230">FocusStates</span></span>|<span data-ttu-id="918e6-231">Элемент управления имеет фокус.</span><span class="sxs-lookup"><span data-stu-id="918e6-231">The control has focus.</span></span>|  
|<span data-ttu-id="918e6-232">Без фокуса ввода</span><span class="sxs-lookup"><span data-stu-id="918e6-232">Unfocused</span></span>|<span data-ttu-id="918e6-233">FocusStates</span><span class="sxs-lookup"><span data-stu-id="918e6-233">FocusStates</span></span>|<span data-ttu-id="918e6-234">Элемент управления не имеет фокуса.</span><span class="sxs-lookup"><span data-stu-id="918e6-234">The control does not have focus.</span></span>|  
  
 <span data-ttu-id="918e6-235">`CommonStates` `Normal` `MouseOver` `Pressed`Определяет две группы состояний: группа содержит состояния,, и `Disabled`. <xref:System.Windows.Controls.Button></span><span class="sxs-lookup"><span data-stu-id="918e6-235">The <xref:System.Windows.Controls.Button> defines two state groups: the `CommonStates` group contains the `Normal`, `MouseOver`, `Pressed`, and `Disabled` states.</span></span> <span data-ttu-id="918e6-236">Группа `FocusStates` содержит состояния `Focused` и `Unfocused`.</span><span class="sxs-lookup"><span data-stu-id="918e6-236">The `FocusStates` group contains the `Focused` and `Unfocused` states.</span></span> <span data-ttu-id="918e6-237">Состояния, входящие в одну группу, являются взаимоисключающими.</span><span class="sxs-lookup"><span data-stu-id="918e6-237">States in the same state group are mutually exclusive.</span></span> <span data-ttu-id="918e6-238">Элемент управления всегда находится строго в одном состоянии из каждой группы.</span><span class="sxs-lookup"><span data-stu-id="918e6-238">The control is always in exactly one state per group.</span></span> <span data-ttu-id="918e6-239"><xref:System.Windows.Controls.Button> Например, элемент может иметь фокус, даже если указатель мыши не находится над ним, <xref:System.Windows.Controls.Button> поэтому в `Focused` состоянии может находиться `MouseOver`состояние, `Pressed`или `Normal` .</span><span class="sxs-lookup"><span data-stu-id="918e6-239">For example, a <xref:System.Windows.Controls.Button> can have focus even when the mouse pointer is not over it, so a <xref:System.Windows.Controls.Button> in the `Focused` state can be in the `MouseOver`, `Pressed`, or `Normal` state.</span></span>  
  
 <span data-ttu-id="918e6-240">Объекты добавляются <xref:System.Windows.VisualState> в <xref:System.Windows.VisualStateGroup> объекты.</span><span class="sxs-lookup"><span data-stu-id="918e6-240">You add <xref:System.Windows.VisualState> objects to <xref:System.Windows.VisualStateGroup> objects.</span></span> <span data-ttu-id="918e6-241">Объекты добавляются <xref:System.Windows.VisualStateGroup> <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=nameWithType> в присоединенное свойство.</span><span class="sxs-lookup"><span data-stu-id="918e6-241">You add <xref:System.Windows.VisualStateGroup> objects to the <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=nameWithType> attached property.</span></span> <span data-ttu-id="918e6-242">В следующем примере определяются <xref:System.Windows.VisualState> объекты `Normal`для состояний, `MouseOver` `CommonStates` и `Pressed` , которые находятся в группе.</span><span class="sxs-lookup"><span data-stu-id="918e6-242">The following example defines the <xref:System.Windows.VisualState> objects for the `Normal`, `MouseOver`, and `Pressed` states, which are all in the `CommonStates` group.</span></span> <span data-ttu-id="918e6-243">Каждый из них <xref:System.Windows.VisualState> соответствует имени в предыдущей таблице. <xref:System.Windows.VisualState.Name%2A></span><span class="sxs-lookup"><span data-stu-id="918e6-243">The <xref:System.Windows.VisualState.Name%2A> of each <xref:System.Windows.VisualState> matches the name in the preceding table.</span></span> <span data-ttu-id="918e6-244">Состояние `Disabled` и состояния из группы `FocusStates` опущены для сохранения краткости примера, но они включены в полный пример, приведенный в конце этого раздела.</span><span class="sxs-lookup"><span data-stu-id="918e6-244">The `Disabled` state and the states in the `FocusStates` group are omitted to keep the example short, but they are included in the entire example at the end of this topic.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="918e6-245">Обязательно задайте <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=nameWithType> присоединенное свойство в корне <xref:System.Windows.FrameworkElement> <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="918e6-245">Be sure to set the <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=nameWithType> attached property on the root <xref:System.Windows.FrameworkElement> of the <xref:System.Windows.Controls.ControlTemplate>.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#VisualStates](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#visualstates)]  
  
 <span data-ttu-id="918e6-246">В предыдущем примере получался результат, аналогичный показанному на следующих рисунках.</span><span class="sxs-lookup"><span data-stu-id="918e6-246">The preceding example produces output that is similar to the following illustrations.</span></span>  
  
 <span data-ttu-id="918e6-247">![Кнопка с пользовательским шаблоном элемента управления.](./media/ndp-buttonnormal.png "NDP_ButtonNormal")</span><span class="sxs-lookup"><span data-stu-id="918e6-247">![A button with a custom control template.](./media/ndp-buttonnormal.png "NDP_ButtonNormal")</span></span>  
<span data-ttu-id="918e6-248">Кнопка, использующая пользовательский шаблон элемента управления в нормальном состоянии</span><span class="sxs-lookup"><span data-stu-id="918e6-248">A button that uses a custom control template in the normal state</span></span>  
  
 <span data-ttu-id="918e6-249">![Кнопка с красной границей.](./media/ndp-buttonmouseover.png "NDP_ButtonMouseOver")</span><span class="sxs-lookup"><span data-stu-id="918e6-249">![A button with a red border.](./media/ndp-buttonmouseover.png "NDP_ButtonMouseOver")</span></span>  
<span data-ttu-id="918e6-250">Кнопка, использующая пользовательский шаблон элемента управления в состоянии, когда указатель мыши находится над кнопкой</span><span class="sxs-lookup"><span data-stu-id="918e6-250">A button that uses a custom control template in the mouse over state</span></span>  
  
 <span data-ttu-id="918e6-251">![Граница прозрачна для нажатой кнопки.](./media/ndp-buttonpressed.png "NDP_ButtonPressed")</span><span class="sxs-lookup"><span data-stu-id="918e6-251">![The border is transparent on a pressed button.](./media/ndp-buttonpressed.png "NDP_ButtonPressed")</span></span>  
<span data-ttu-id="918e6-252">Кнопка, использующая пользовательский шаблон элемента управления в состоянии, когда она нажата</span><span class="sxs-lookup"><span data-stu-id="918e6-252">A button that uses a custom control template in the pressed state</span></span>  
  
 <span data-ttu-id="918e6-253">Визуальные состояния элементов управления, включенных в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], см. в разделе [Стили и шаблоны элемента Control](control-styles-and-templates.md).</span><span class="sxs-lookup"><span data-stu-id="918e6-253">To find the visual states for controls that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Control Styles and Templates](control-styles-and-templates.md).</span></span>  
  
<a name="specifying_the_behavior_of_a_control_when_it_transitions_between_states"></a>   
## <a name="specifying-the-behavior-of-a-control-when-it-transitions-between-states"></a><span data-ttu-id="918e6-254">Задание поведения элемента управления, когда он переходит между состояниями</span><span class="sxs-lookup"><span data-stu-id="918e6-254">Specifying the Behavior of a Control When It Transitions Between States</span></span>  
 <span data-ttu-id="918e6-255">В предыдущем примере внешний вид кнопки изменяется, когда пользователь нажимает ее, но если кнопка остается нажатой менее полной секунды, то пользователь не видит эффекта нажатия.</span><span class="sxs-lookup"><span data-stu-id="918e6-255">In the preceding example, the appearance of the button also changes when the user clicks it, but unless the button is pressed for a full second, the user does not see the effect.</span></span> <span data-ttu-id="918e6-256">По умолчанию для запуска анимации требуется одна секунда.</span><span class="sxs-lookup"><span data-stu-id="918e6-256">By default, the animation takes one second to occur.</span></span> <span data-ttu-id="918e6-257">Поскольку пользователи, скорее всего, щелкают и освобождают кнопку в гораздо меньше времени, визуальная обратная связь не будет действовать, если <xref:System.Windows.Controls.ControlTemplate> оставить ее в своем состоянии по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="918e6-257">Because users are likely to click and release a button in much less time, the visual feedback will not be effective if you leave the <xref:System.Windows.Controls.ControlTemplate> in its default state.</span></span>  
  
 <span data-ttu-id="918e6-258">Можно указать время, затрачиваемое на выполнение анимации для плавного переноса элемента управления из одного состояния в другое путем добавления <xref:System.Windows.VisualTransition> объектов <xref:System.Windows.Controls.ControlTemplate>в.</span><span class="sxs-lookup"><span data-stu-id="918e6-258">You can specify the amount of time that it takes an animation to occur to smoothly transition a control from one state to another by adding <xref:System.Windows.VisualTransition> objects to the <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="918e6-259">При создании <xref:System.Windows.VisualTransition>можно указать один или несколько из следующих элементов:</span><span class="sxs-lookup"><span data-stu-id="918e6-259">When you create a <xref:System.Windows.VisualTransition>, you specify one or more of the following:</span></span>  
  
- <span data-ttu-id="918e6-260">время, которое занимает переход между состояниями;</span><span class="sxs-lookup"><span data-stu-id="918e6-260">The time it takes for a transition between states to occur.</span></span>  
  
- <span data-ttu-id="918e6-261">дополнительные изменения внешнего вида элемента управления, возникающие во время перехода;</span><span class="sxs-lookup"><span data-stu-id="918e6-261">Additional changes in the control's appearance that occur at the time of the transition.</span></span>  
  
- <span data-ttu-id="918e6-262">Состояние, <xref:System.Windows.VisualTransition> к которому применяется.</span><span class="sxs-lookup"><span data-stu-id="918e6-262">Which states the <xref:System.Windows.VisualTransition> is applied to.</span></span>  
  
### <a name="specifying-the-duration-of-a-transition"></a><span data-ttu-id="918e6-263">Задание продолжительности перехода</span><span class="sxs-lookup"><span data-stu-id="918e6-263">Specifying the Duration of a Transition</span></span>  
 <span data-ttu-id="918e6-264">Можно указать, как долго выполняется переход, задав <xref:System.Windows.VisualTransition.GeneratedDuration%2A> свойство.</span><span class="sxs-lookup"><span data-stu-id="918e6-264">You can specify how long a transition takes by setting the <xref:System.Windows.VisualTransition.GeneratedDuration%2A> property.</span></span> <span data-ttu-id="918e6-265">В предыдущем примере имеется объект <xref:System.Windows.VisualState> , указывающий, что граница кнопки становится прозрачной при нажатии кнопки, но анимация занимает слишком много времени, чтобы быть заметной при быстром нажатии и отпускании кнопки.</span><span class="sxs-lookup"><span data-stu-id="918e6-265">The preceding example has a <xref:System.Windows.VisualState> that specifies that the button's border becomes transparent when the button is pressed, but the animation takes too long to be noticeable if the button is quickly pressed and released.</span></span> <span data-ttu-id="918e6-266">Можно использовать, <xref:System.Windows.VisualTransition> чтобы указать период времени, в течение которого элемент управления переходит в состояние нажатия.</span><span class="sxs-lookup"><span data-stu-id="918e6-266">You can use a <xref:System.Windows.VisualTransition> to specify the amount of time it takes the control to transition into the pressed state.</span></span> <span data-ttu-id="918e6-267">В следующем примере задается, что переход элемента управления в нажатое состояние занимает одну сотую секунды.</span><span class="sxs-lookup"><span data-stu-id="918e6-267">The following example specifies that the control takes one hundredth of a second to go into the pressed state.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#PressedTransition](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#pressedtransition)]  
  
### <a name="specifying-changes-to-the-controls-appearance-during-a-transition"></a><span data-ttu-id="918e6-268">Задание изменений внешнего вида элемента управления во время перехода</span><span class="sxs-lookup"><span data-stu-id="918e6-268">Specifying Changes to the Control's Appearance During a Transition</span></span>  
 <span data-ttu-id="918e6-269"><xref:System.Windows.VisualTransition> Содержит,которыйначинается,когдаэлементуправления<xref:System.Windows.Media.Animation.Storyboard> переходит между состояниями.</span><span class="sxs-lookup"><span data-stu-id="918e6-269">The <xref:System.Windows.VisualTransition> contains a <xref:System.Windows.Media.Animation.Storyboard> that begins when the control transitions between states.</span></span> <span data-ttu-id="918e6-270">Например, можно указать, что определенная анимация происходит при переходе элемента управления из состояния `MouseOver` в состояние `Normal`.</span><span class="sxs-lookup"><span data-stu-id="918e6-270">For example, you can specify that a certain animation occurs when the control transitions from the `MouseOver` state to the `Normal` State.</span></span> <span data-ttu-id="918e6-271">В следующем примере создается объект <xref:System.Windows.VisualTransition> , указывающий, что когда пользователь перемещает указатель мыши за пределы кнопки, граница кнопки меняется на синий, затем на желтый, затем на черный через 1,5 секунд.</span><span class="sxs-lookup"><span data-stu-id="918e6-271">The following example creates a <xref:System.Windows.VisualTransition> that specifies that when the user moves the mouse pointer away from the button, the button's border changes to blue, then to yellow, then to black in 1.5 seconds.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#8](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#8)]  
  
### <a name="specifying-when-a-visualtransition-is-applied"></a><span data-ttu-id="918e6-272">Указание места применения VisualTransition</span><span class="sxs-lookup"><span data-stu-id="918e6-272">Specifying When a VisualTransition Is Applied</span></span>  
 <span data-ttu-id="918e6-273"><xref:System.Windows.VisualTransition> Может быть ограничена только определенными состояниями или его можно применять при каждом переходе элемента управления между состояниями.</span><span class="sxs-lookup"><span data-stu-id="918e6-273">A <xref:System.Windows.VisualTransition> can be restricted to apply to only certain states, or it can be applied any time the control transitions between states.</span></span> <span data-ttu-id="918e6-274">В <xref:System.Windows.VisualTransition> предыдущем примере атрибут применяется, когда элемент управления переходит `Normal` `MouseOver` из состояния в состояние. в примере перед этим применяется, <xref:System.Windows.VisualTransition> когда элемент управления переходит `Pressed` в состояние.</span><span class="sxs-lookup"><span data-stu-id="918e6-274">In the preceding example, the <xref:System.Windows.VisualTransition> is applied when the control goes from the `MouseOver` state to the `Normal` state; in the example before that, the <xref:System.Windows.VisualTransition> is applied when the control goes into the `Pressed` state.</span></span> <span data-ttu-id="918e6-275">Вы ограничиваете <xref:System.Windows.VisualTransition> применение, <xref:System.Windows.VisualTransition.To%2A> устанавливая свойства и <xref:System.Windows.VisualTransition.From%2A> .</span><span class="sxs-lookup"><span data-stu-id="918e6-275">You restrict when a <xref:System.Windows.VisualTransition> is applied by setting the <xref:System.Windows.VisualTransition.To%2A> and <xref:System.Windows.VisualTransition.From%2A> properties.</span></span> <span data-ttu-id="918e6-276">В таблице ниже приведено описание уровней ограничений от наибольшего до наименьшего.</span><span class="sxs-lookup"><span data-stu-id="918e6-276">The following table describes the levels of restriction from most restrictive to least restrictive.</span></span>  
  
|<span data-ttu-id="918e6-277">Тип ограничения</span><span class="sxs-lookup"><span data-stu-id="918e6-277">Type of restriction</span></span>|<span data-ttu-id="918e6-278">Состояние, из которого выполняется переход</span><span class="sxs-lookup"><span data-stu-id="918e6-278">Value of From</span></span>|<span data-ttu-id="918e6-279">Состояние, в которое выполняется переход</span><span class="sxs-lookup"><span data-stu-id="918e6-279">Value of To</span></span>|  
|-------------------------|-------------------|-----------------|  
|<span data-ttu-id="918e6-280">Из указанного состояния в другое указанное состояние</span><span class="sxs-lookup"><span data-stu-id="918e6-280">From a specified state to another specified state</span></span>|<span data-ttu-id="918e6-281">Имя<xref:System.Windows.VisualState></span><span class="sxs-lookup"><span data-stu-id="918e6-281">The name of a <xref:System.Windows.VisualState></span></span>|<span data-ttu-id="918e6-282">Имя<xref:System.Windows.VisualState></span><span class="sxs-lookup"><span data-stu-id="918e6-282">The name of a <xref:System.Windows.VisualState></span></span>|  
|<span data-ttu-id="918e6-283">Из любого состояния в указанное состояние</span><span class="sxs-lookup"><span data-stu-id="918e6-283">From any state to a specified state</span></span>|<span data-ttu-id="918e6-284">Не задано</span><span class="sxs-lookup"><span data-stu-id="918e6-284">Not set</span></span>|<span data-ttu-id="918e6-285">Имя<xref:System.Windows.VisualState></span><span class="sxs-lookup"><span data-stu-id="918e6-285">The name of a <xref:System.Windows.VisualState></span></span>|  
|<span data-ttu-id="918e6-286">Из указанного состояния в любое состояние</span><span class="sxs-lookup"><span data-stu-id="918e6-286">From a specified state to any state</span></span>|<span data-ttu-id="918e6-287">Имя<xref:System.Windows.VisualState></span><span class="sxs-lookup"><span data-stu-id="918e6-287">The name of a <xref:System.Windows.VisualState></span></span>|<span data-ttu-id="918e6-288">Не задано</span><span class="sxs-lookup"><span data-stu-id="918e6-288">Not set</span></span>|  
|<span data-ttu-id="918e6-289">Из любого состояния в любое другое состояние</span><span class="sxs-lookup"><span data-stu-id="918e6-289">From any state to any other state</span></span>|<span data-ttu-id="918e6-290">Не задано</span><span class="sxs-lookup"><span data-stu-id="918e6-290">Not set</span></span>|<span data-ttu-id="918e6-291">Не задано</span><span class="sxs-lookup"><span data-stu-id="918e6-291">Not set</span></span>|  
  
 <span data-ttu-id="918e6-292">В можно иметь несколько <xref:System.Windows.VisualTransition> объектов ,ссылающихсянаодноитожесостояние,ноонибудутиспользоватьсявпорядке,указанномвпредыдущейтаблице.<xref:System.Windows.VisualStateGroup></span><span class="sxs-lookup"><span data-stu-id="918e6-292">You can have multiple <xref:System.Windows.VisualTransition> objects in a <xref:System.Windows.VisualStateGroup> that refer to the same state, but they will be used in the order that the previous table specifies.</span></span> <span data-ttu-id="918e6-293">В следующем примере есть два <xref:System.Windows.VisualTransition> объекта.</span><span class="sxs-lookup"><span data-stu-id="918e6-293">In the following example, there are two <xref:System.Windows.VisualTransition> objects.</span></span> <span data-ttu-id="918e6-294">Когда элемент управления переходит из `Pressed` состояния `MouseOver` в состояние, используется объект <xref:System.Windows.VisualTransition> , который имеет оба <xref:System.Windows.VisualTransition.From%2A> параметра <xref:System.Windows.VisualTransition.To%2A> и.</span><span class="sxs-lookup"><span data-stu-id="918e6-294">When the control transitions from the `Pressed` state to the `MouseOver` state, the <xref:System.Windows.VisualTransition> that has both <xref:System.Windows.VisualTransition.From%2A> and <xref:System.Windows.VisualTransition.To%2A> set is used.</span></span> <span data-ttu-id="918e6-295">Когда элемент управления переходит из состояния, отличного от `Pressed`, в состояние `MouseOver`, используется другой объект.</span><span class="sxs-lookup"><span data-stu-id="918e6-295">When the control transitions from a state that is not `Pressed` to the `MouseOver` state, the other state is used.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#7](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#7)]  
  
 <span data-ttu-id="918e6-296"><xref:System.Windows.VisualState> Содержитсвойство,<xref:System.Windows.VisualStateGroup>которое содержит <xref:System.Windows.VisualTransition> объекты, применяемые к объектам в. <xref:System.Windows.VisualStateGroup.Transitions%2A> <xref:System.Windows.VisualStateGroup></span><span class="sxs-lookup"><span data-stu-id="918e6-296">The <xref:System.Windows.VisualStateGroup> has a <xref:System.Windows.VisualStateGroup.Transitions%2A> property that contains the <xref:System.Windows.VisualTransition> objects that apply to the <xref:System.Windows.VisualState> objects in the <xref:System.Windows.VisualStateGroup>.</span></span> <span data-ttu-id="918e6-297">Как автор, вы можете включить все <xref:System.Windows.VisualTransition> необходимые. <xref:System.Windows.Controls.ControlTemplate></span><span class="sxs-lookup"><span data-stu-id="918e6-297">As the <xref:System.Windows.Controls.ControlTemplate> author, you are free to include any <xref:System.Windows.VisualTransition> you want.</span></span> <span data-ttu-id="918e6-298">Однако если <xref:System.Windows.VisualTransition.To%2A> для свойств и <xref:System.Windows.VisualTransition.From%2A> заданы имена состояний <xref:System.Windows.VisualStateGroup>, которых нет в, то <xref:System.Windows.VisualTransition> игнорируется.</span><span class="sxs-lookup"><span data-stu-id="918e6-298">However, if the <xref:System.Windows.VisualTransition.To%2A> and <xref:System.Windows.VisualTransition.From%2A> properties are set to state names that are not in the <xref:System.Windows.VisualStateGroup>, the <xref:System.Windows.VisualTransition> is ignored.</span></span>  
  
 <span data-ttu-id="918e6-299">В следующем примере показана <xref:System.Windows.VisualStateGroup> `CommonStates`для.</span><span class="sxs-lookup"><span data-stu-id="918e6-299">The following example shows the <xref:System.Windows.VisualStateGroup> for the `CommonStates`.</span></span> <span data-ttu-id="918e6-300">В примере определяется <xref:System.Windows.VisualTransition> для каждой из следующих переходов кнопки.</span><span class="sxs-lookup"><span data-stu-id="918e6-300">The example defines a <xref:System.Windows.VisualTransition> for each of the button's following transitions.</span></span>  
  
- <span data-ttu-id="918e6-301">в состояние `Pressed`;</span><span class="sxs-lookup"><span data-stu-id="918e6-301">To the `Pressed` state.</span></span>  
  
- <span data-ttu-id="918e6-302">в состояние `MouseOver`;</span><span class="sxs-lookup"><span data-stu-id="918e6-302">To the `MouseOver` state.</span></span>  
  
- <span data-ttu-id="918e6-303">из состояния `Pressed` в состояние `MouseOver`;</span><span class="sxs-lookup"><span data-stu-id="918e6-303">From the `Pressed` state to the `MouseOver` state.</span></span>  
  
- <span data-ttu-id="918e6-304">из состояния `MouseOver` в состояние `Normal`.</span><span class="sxs-lookup"><span data-stu-id="918e6-304">From the `MouseOver` state to the `Normal` state.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#VisualTransitions](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#visualtransitions)]  
  
<a name="customizing_other_controls_by_understanding_the_control_contract"></a>   
## <a name="customizing-other-controls-by-understanding-the-control-contract"></a><span data-ttu-id="918e6-305">Настройка других элементов управления через понимание контракта элемента управления</span><span class="sxs-lookup"><span data-stu-id="918e6-305">Customizing Other Controls by Understanding the Control Contract</span></span>  
 <span data-ttu-id="918e6-306">Элемент управления, использующий <xref:System.Windows.Controls.ControlTemplate> для указания его визуальной структуры (с помощью <xref:System.Windows.FrameworkElement> объектов) и визуального поведения <xref:System.Windows.VisualState> (с помощью объектов), использует модель элемента управления Parts.</span><span class="sxs-lookup"><span data-stu-id="918e6-306">A control that uses a <xref:System.Windows.Controls.ControlTemplate> to specify its visual structure (by using <xref:System.Windows.FrameworkElement> objects) and visual behavior (by using <xref:System.Windows.VisualState> objects) uses the parts control model.</span></span> <span data-ttu-id="918e6-307">Множество элементов управления, имеющихся в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 4, используют эту модель.</span><span class="sxs-lookup"><span data-stu-id="918e6-307">Many of the controls that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 4 use this model.</span></span> <span data-ttu-id="918e6-308">Части, которые <xref:System.Windows.Controls.ControlTemplate> необходимо учитывать автору, передаются через контракт управления.</span><span class="sxs-lookup"><span data-stu-id="918e6-308">The parts that a <xref:System.Windows.Controls.ControlTemplate> author needs to be aware of are communicated through the control contract.</span></span> <span data-ttu-id="918e6-309">Поняв части контракта элемента управления, можно настроить внешний вид любого элемента управления, использующего модель частей элемента управления.</span><span class="sxs-lookup"><span data-stu-id="918e6-309">When you understand the parts of a control contract, you can customize the appearance of any control that uses the parts control model.</span></span>  
  
 <span data-ttu-id="918e6-310">Контракт элемента управления имеет три элемента:</span><span class="sxs-lookup"><span data-stu-id="918e6-310">A control contract has three elements:</span></span>  
  
- <span data-ttu-id="918e6-311">визуальный элемент, используемый логикой элемента управления;</span><span class="sxs-lookup"><span data-stu-id="918e6-311">The visual elements that the control's logic uses.</span></span>  
  
- <span data-ttu-id="918e6-312">состояния элемента управления и группа, к которой принадлежит каждое состояние;</span><span class="sxs-lookup"><span data-stu-id="918e6-312">The states of the control and the group each state belongs to.</span></span>  
  
- <span data-ttu-id="918e6-313">общие свойства, визуально воздействующие на элемент управления.</span><span class="sxs-lookup"><span data-stu-id="918e6-313">The public properties that visually affect the control.</span></span>  
  
### <a name="visual-elements-in-the-control-contract"></a><span data-ttu-id="918e6-314">Визуальные элементы в контракте элемента управления</span><span class="sxs-lookup"><span data-stu-id="918e6-314">Visual Elements in the Control Contract</span></span>  
 <span data-ttu-id="918e6-315">Иногда логика элемента управления взаимодействует с элементом <xref:System.Windows.FrameworkElement> , который находится <xref:System.Windows.Controls.ControlTemplate>в.</span><span class="sxs-lookup"><span data-stu-id="918e6-315">Sometimes a control's logic interacts with a <xref:System.Windows.FrameworkElement> that is in the <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="918e6-316">Например, элемент управления может обрабатывать событие одного из своих элементов.</span><span class="sxs-lookup"><span data-stu-id="918e6-316">For example, the control might handle an event of one of its elements.</span></span> <span data-ttu-id="918e6-317">Когда элемент управления должен найти конкретный <xref:System.Windows.FrameworkElement> объект <xref:System.Windows.Controls.ControlTemplate>в, ему необходимо <xref:System.Windows.Controls.ControlTemplate> передать эту информацию автору.</span><span class="sxs-lookup"><span data-stu-id="918e6-317">When a control expects to find a particular <xref:System.Windows.FrameworkElement> in the <xref:System.Windows.Controls.ControlTemplate>, it must convey that information to the <xref:System.Windows.Controls.ControlTemplate> author.</span></span> <span data-ttu-id="918e6-318">Элемент управления использует объект <xref:System.Windows.TemplatePartAttribute> для передачи ожидаемого типа элемента и имя элемента.</span><span class="sxs-lookup"><span data-stu-id="918e6-318">The control uses the <xref:System.Windows.TemplatePartAttribute> to convey the type of element that is expected, and what the name of the element should be.</span></span> <span data-ttu-id="918e6-319">Не содержит <xref:System.Windows.FrameworkElement> частей в контракте элемента управления, но другие <xref:System.Windows.Controls.ComboBox>элементы управления, такие как, делают. <xref:System.Windows.Controls.Button></span><span class="sxs-lookup"><span data-stu-id="918e6-319">The <xref:System.Windows.Controls.Button> does not have <xref:System.Windows.FrameworkElement> parts in its control contract, but other controls, such as the <xref:System.Windows.Controls.ComboBox>, do.</span></span>  
  
 <span data-ttu-id="918e6-320">В следующем примере показаны <xref:System.Windows.TemplatePartAttribute> объекты, указанные <xref:System.Windows.Controls.ComboBox> в классе.</span><span class="sxs-lookup"><span data-stu-id="918e6-320">The following example shows the <xref:System.Windows.TemplatePartAttribute> objects that are specified on the <xref:System.Windows.Controls.ComboBox> class.</span></span> <span data-ttu-id="918e6-321"><xref:System.Windows.Controls.ComboBox> Логика <xref:System.Windows.Controls.ControlTemplate>, которой требуется `PART_EditableTextBox` <xref:System.Windows.Controls.TextBox> найти именованный объект и <xref:System.Windows.Controls.Primitives.Popup> имя `PART_Popup` в нем.</span><span class="sxs-lookup"><span data-stu-id="918e6-321">The logic of <xref:System.Windows.Controls.ComboBox> expects to find a <xref:System.Windows.Controls.TextBox> named `PART_EditableTextBox` and a <xref:System.Windows.Controls.Primitives.Popup> named `PART_Popup` in its <xref:System.Windows.Controls.ControlTemplate>.</span></span>  
  
 [!code-csharp[VSMButtonTemplate#ComboBoxContract](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/controlcontracts.cs#comboboxcontract)]
 [!code-vb[VSMButtonTemplate#ComboBoxContract](~/samples/snippets/visualbasic/VS_Snippets_Wpf/vsmbuttontemplate/visualbasic/window1.xaml.vb#comboboxcontract)]  
  
 <span data-ttu-id="918e6-322">В следующем примере <xref:System.Windows.Controls.ControlTemplate> показана упрощенная <xref:System.Windows.Controls.ComboBox> для, включающая элементы <xref:System.Windows.TemplatePartAttribute> , заданные объектами <xref:System.Windows.Controls.ComboBox> класса.</span><span class="sxs-lookup"><span data-stu-id="918e6-322">The following example shows a simplified <xref:System.Windows.Controls.ControlTemplate> for the <xref:System.Windows.Controls.ComboBox> that includes the elements that are specified by the <xref:System.Windows.TemplatePartAttribute> objects on the <xref:System.Windows.Controls.ComboBox> class.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#ComboBoxTemplate](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/window1.xaml#comboboxtemplate)]  
  
### <a name="states-in-the-control-contract"></a><span data-ttu-id="918e6-323">Состояния в контракте элемента управления</span><span class="sxs-lookup"><span data-stu-id="918e6-323">States in the Control Contract</span></span>  
 <span data-ttu-id="918e6-324">Состояния элемента управления также являются частью контракта элемента управления.</span><span class="sxs-lookup"><span data-stu-id="918e6-324">The states of a control are also a part of the control contract.</span></span> <span data-ttu-id="918e6-325">В примере создания <xref:System.Windows.Controls.ControlTemplate> для a <xref:System.Windows.Controls.Button> показано, как задать внешний вид объекта в <xref:System.Windows.Controls.Button> зависимости от его состояний.</span><span class="sxs-lookup"><span data-stu-id="918e6-325">The example of creating a <xref:System.Windows.Controls.ControlTemplate> for a <xref:System.Windows.Controls.Button> shows how to specify the appearance of a <xref:System.Windows.Controls.Button> depending on its states.</span></span> <span data-ttu-id="918e6-326">Вы создаете <xref:System.Windows.VisualState> для каждого заданного состояния и размещаете <xref:System.Windows.VisualState> все объекты, <xref:System.Windows.TemplateVisualStateAttribute.GroupName%2A> <xref:System.Windows.VisualStateGroup>которые совместно используют в, как описано в разделе [Изменение внешнего вида элемента управления в зависимости от его состояния](#changing_the_appearance_of_a_control_depending_on_its_state) ранее в этой статье.</span><span class="sxs-lookup"><span data-stu-id="918e6-326">You create a <xref:System.Windows.VisualState> for each specified state and put all <xref:System.Windows.VisualState> objects that share a <xref:System.Windows.TemplateVisualStateAttribute.GroupName%2A> in a <xref:System.Windows.VisualStateGroup>, as described in [Changing the Appearance of a Control Depending on Its State](#changing_the_appearance_of_a_control_depending_on_its_state) earlier in this topic.</span></span> <span data-ttu-id="918e6-327">Сторонние элементы управления должны указывать состояния с помощью <xref:System.Windows.TemplateVisualStateAttribute>, что позволяет средствам конструктора, таким как Expression Blend, предоставлять состояния элемента управления для создания шаблонов элементов управления.</span><span class="sxs-lookup"><span data-stu-id="918e6-327">Third-party controls should specify states by using the <xref:System.Windows.TemplateVisualStateAttribute>, which enables designer tools, such as Expression Blend, to expose the control's states for authoring control templates.</span></span>  
  
 <span data-ttu-id="918e6-328">Контракты элементов управления, включенных в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], в разделе [Стили и шаблоны элемента Control](control-styles-and-templates.md).</span><span class="sxs-lookup"><span data-stu-id="918e6-328">To find the control contract for controls that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Control Styles and Templates](control-styles-and-templates.md).</span></span>  
  
### <a name="properties-in-the-control-contract"></a><span data-ttu-id="918e6-329">Свойства в контракте элемента управления</span><span class="sxs-lookup"><span data-stu-id="918e6-329">Properties in the Control Contract</span></span>  
 <span data-ttu-id="918e6-330">Общие свойства, визуально влияющие на элемент управления, также включаются в контракт элемента управления.</span><span class="sxs-lookup"><span data-stu-id="918e6-330">The public properties that visually affect the control are also included in the control contract.</span></span> <span data-ttu-id="918e6-331">Эти свойства можно задать, чтобы изменить внешний вид элемента управления без создания нового <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="918e6-331">You can set these properties to change the appearance of the control without creating a new <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="918e6-332">Расширение разметки [TemplateBinding](../advanced/templatebinding-markup-extension.md) можно также использовать для привязки свойств элементов, которые находятся в, <xref:System.Windows.Controls.ControlTemplate> к общим свойствам, определенным <xref:System.Windows.Controls.Button>в.</span><span class="sxs-lookup"><span data-stu-id="918e6-332">You can also use the [TemplateBinding](../advanced/templatebinding-markup-extension.md) markup extension to bind properties of elements that are in the <xref:System.Windows.Controls.ControlTemplate> to public properties that are defined by the <xref:System.Windows.Controls.Button>.</span></span>  
  
 <span data-ttu-id="918e6-333">В следующем примере показан контракт элемента управления "Кнопка".</span><span class="sxs-lookup"><span data-stu-id="918e6-333">The following example shows the control contract for the button.</span></span>  
  
 [!code-csharp[VSMButtonTemplate#ButtonContract](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/controlcontracts.cs#buttoncontract)]
 [!code-vb[VSMButtonTemplate#ButtonContract](~/samples/snippets/visualbasic/VS_Snippets_Wpf/vsmbuttontemplate/visualbasic/window1.xaml.vb#buttoncontract)]  
  
 <span data-ttu-id="918e6-334">При создании объект <xref:System.Windows.Controls.ControlTemplate>, как правило, проще всего начать с существующего <xref:System.Windows.Controls.ControlTemplate> и внести в него изменения.</span><span class="sxs-lookup"><span data-stu-id="918e6-334">When creating a <xref:System.Windows.Controls.ControlTemplate>, it is often easiest to begin with an existing <xref:System.Windows.Controls.ControlTemplate> and make changes to it.</span></span> <span data-ttu-id="918e6-335">Можно выполнить одно из следующих действий, чтобы изменить существующий <xref:System.Windows.Controls.ControlTemplate>:</span><span class="sxs-lookup"><span data-stu-id="918e6-335">You can do one of the following to change an existing <xref:System.Windows.Controls.ControlTemplate>:</span></span>  
  
- <span data-ttu-id="918e6-336">Воспользоваться конструктором, таким как Expression Blend, который предоставляет графический пользовательский интерфейс для создания шаблонов элементов управления.</span><span class="sxs-lookup"><span data-stu-id="918e6-336">Use a designer, such as Expression Blend, which provides a graphical user interface for creating control templates.</span></span> <span data-ttu-id="918e6-337">Дополнительные сведения см. в статье [Настройка стиля элемента управления, поддерживающего шаблон](https://go.microsoft.com/fwlink/?LinkId=161153).</span><span class="sxs-lookup"><span data-stu-id="918e6-337">For more information, see [Styling a control that supports templates](https://go.microsoft.com/fwlink/?LinkId=161153).</span></span>  
  
- <span data-ttu-id="918e6-338">Получите значение по <xref:System.Windows.Controls.ControlTemplate> умолчанию и измените его.</span><span class="sxs-lookup"><span data-stu-id="918e6-338">Get the default <xref:System.Windows.Controls.ControlTemplate> and edit it.</span></span> <span data-ttu-id="918e6-339">Шаблоны элементов управления по умолчанию, включенных в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], см. в документе [Default WPF Themes](https://go.microsoft.com/fwlink/?LinkID=158252).</span><span class="sxs-lookup"><span data-stu-id="918e6-339">To find the default control templates that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Default WPF Themes](https://go.microsoft.com/fwlink/?LinkID=158252).</span></span>  
  
<a name="complete_example"></a>   
## <a name="complete-example"></a><span data-ttu-id="918e6-340">Полный пример</span><span class="sxs-lookup"><span data-stu-id="918e6-340">Complete Example</span></span>  
 <span data-ttu-id="918e6-341">В следующем примере показан полный <xref:System.Windows.Controls.Button> <xref:System.Windows.Controls.ControlTemplate> пример, рассмотренный в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="918e6-341">The following example shows the complete <xref:System.Windows.Controls.Button><xref:System.Windows.Controls.ControlTemplate> that is discussed in this topic.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#3](~/samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#3)]  
  
## <a name="see-also"></a><span data-ttu-id="918e6-342">См. также</span><span class="sxs-lookup"><span data-stu-id="918e6-342">See also</span></span>

- [<span data-ttu-id="918e6-343">Стилизация и использование шаблонов</span><span class="sxs-lookup"><span data-stu-id="918e6-343">Styling and Templating</span></span>](styling-and-templating.md)
