---
title: Пошаговое руководство. Создание кнопки с помощью Microsoft Expression Blend
ms.date: 03/30/2017
helpviewer_keywords:
- buttons [WPF]
- converting [WPF], shape to button
- Expression Blend [WPF Designer]
ms.assetid: ff5037c2-bba7-4cae-8abb-6475b686c48e
ms.openlocfilehash: 10342d97abc2e3c158f93171f5fe5cd560f9b7e4
ms.sourcegitcommit: 82f94a44ad5c64a399df2a03fa842db308185a76
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/25/2019
ms.locfileid: "72920259"
---
# <a name="walkthrough-create-a-button-by-using-microsoft-expression-blend"></a>Пошаговое руководство. Создание кнопки с помощью Microsoft Expression Blend

В этом пошаговом руководстве описывается процесс создания [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] настраиваемой кнопки с помощью Microsoft Expression Blend.

> [!IMPORTANT]
> Microsoft Expression Blend работает путем создания [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)], который затем компилируется для создания исполняемой программы. Если вы предпочитаете работать непосредственно с XAML, то есть еще одно пошаговое руководство, которое создает то же приложение с помощью XAML в Visual Studio, а не Blend. Дополнительные сведения см. в разделе [Создание кнопки с помощью XAML](walkthrough-create-a-button-by-using-xaml.md) .

На следующем рисунке показана настраиваемая кнопка, которую вы создадите.

![Настраиваемая кнопка, которая создается](./media/custom-button-blend-intro.jpg)

## <a name="convert-a-shape-to-a-button"></a>Преобразование фигуры в кнопку

В первой части этого пошагового руководства вы создадите пользовательский вид пользовательской кнопки. Для этого сначала преобразуйте прямоугольник в кнопку. Затем добавьте дополнительные фигуры в шаблон кнопки, чтобы создать более сложную кнопку поиска. Почему не стоит начинать с обычной кнопки и настраивать ее? Так как кнопка имеет встроенные функции, которые не нужны; для пользовательских кнопок проще начать с прямоугольника.

### <a name="to-create-a-new-project-in-expression-blend"></a>Создание нового проекта в Expression Blend

1. Начало выражения Blend. (Нажмите кнопку **Пуск**, наведите указатель на пункт **все программы**, затем на пункт **Microsoft Expression**и выберите пункт **Microsoft Expression Blend**.)

2. При необходимости разверните приложение.

3. В меню **Файл** выберите пункт **Создать проект**.

4. Выберите **стандартное приложение (. exe)** .

5. Присвойте проекту имя `CustomButton` и нажмите кнопку **ОК**.

На этом этапе у вас есть пустой проект [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]. Можно нажать клавишу F5, чтобы запустить приложение. Как вы можете ожидать, приложение состоит только из пустого окна. Затем создайте скругленный прямоугольник и преобразуйте его в кнопку.

### <a name="to-convert-a-rectangle-to-a-button"></a>Преобразование прямоугольника в кнопку

1. **Задайте для свойства фон окна значение черный:** Выберите окно, перейдите на **вкладку Свойства**и задайте для свойства <xref:System.Windows.Controls.Control.Background%2A> значение `Black`.

    ![Практическое руководство. Как сделать цвет фона кнопки черным](./media/custom-button-blend-changebackground.png)

2. **Нарисуйте прямоугольник приблизительно в размере кнопки в окне:** Выберите инструмент прямоугольник на панели инструментов слева и перетащите прямоугольник на окно.

    ![Практическое руководство. Рисование прямоугольника](./media/custom-button-blend-drawrect.png)

3. **Округлить углы прямоугольника:** Либо перетащите контрольные точки прямоугольника или напрямую задайте свойства <xref:System.Windows.Shapes.Rectangle.RadiusX%2A> и <xref:System.Windows.Shapes.Rectangle.RadiusY%2A>. Задайте значения <xref:System.Windows.Shapes.Rectangle.RadiusX%2A> и <xref:System.Windows.Shapes.Rectangle.RadiusY%2A> равными 20.

    ![Практическое руководство. Округление углов прямоугольника](./media/custom-button-blend-roundcorners.png)

4. **Замените прямоугольник на кнопку:** Выберите прямоугольник. В меню **Сервис** щелкните **создать**кнопку.

    ![Практическое руководство. Создание формы в кнопке](./media/custom-button-blend-makebutton.png)

5. **Укажите область стиля или шаблона:** Появится диалоговое окно, как показано ниже.

    ![Диалоговое окно “Создать ресурсы стиля”](./media/custom-button-blend-makebutton2.gif)

    Для параметра **имя ресурса (ключ)** выберите **Применить ко всем**.  При этом итоговый стиль и шаблон кнопки будут применяться ко всем объектам, которые являются кнопками. Для **определения в**выберите **приложение**. При этом итоговый стиль и шаблон кнопки будут иметь область действия для всего приложения. Если задать значения в этих двух полях, стиль и шаблон кнопки будут применяться ко всем кнопкам во всем приложении, а любая кнопка, созданная в приложении, будет использовать этот шаблон по умолчанию.

## <a name="edit-the-button-template"></a>Изменение шаблона кнопки

Теперь у вас есть прямоугольник, который был изменен на кнопку. В этом разделе вы измените шаблон кнопки и сможете настроить его внешний вид.

### <a name="to-edit-the-button-template-to-change-the-button-appearance"></a>Изменение шаблона кнопки для изменения внешнего вида кнопки

1. **Перейти в представление "изменение шаблона":** Для дальнейшей настройки вида кнопки необходимо изменить шаблон кнопки. Этот шаблон был создан при преобразовании прямоугольника в кнопку. Чтобы изменить шаблон кнопки, щелкните правой кнопкой мыши кнопку и выберите **изменить элементы управления (шаблон)** , а затем **измените шаблон**.

    ![Практическое руководство. Редактирование шаблона](./media/custom-button-blend-edittemplate.jpg)

    Обратите внимание, что в редакторе шаблонов кнопка теперь разделена на <xref:System.Windows.Shapes.Rectangle> и <xref:System.Windows.Controls.ContentPresenter>. <xref:System.Windows.Controls.ContentPresenter> используется для представления содержимого на кнопке (например, строка "Button"). Прямоугольник и <xref:System.Windows.Controls.ContentPresenter> размещаются внутри <xref:System.Windows.Controls.Grid>.

    ![Компоненты в представлении прямоугольника](./media/custom-button-blend-templatepanel.png)

2. **Измените имена компонентов шаблона:** Щелкните правой кнопкой мыши прямоугольник в описи шаблона, измените имя <xref:System.Windows.Shapes.Rectangle> с "[Rectangle]" на "Аутерректангле" и замените "[ContentPresenter]" на "Миконтентпресентер".

    ![Практическое руководство. Переименование компонента шаблона](./media/custom-button-blend-renamecomponents.png)

3. **Измените прямоугольник таким образом, чтобы он был пустым внутри (например, кольцо):** Выберите **аутерректангле** и задайте для <xref:System.Windows.Shapes.Shape.Fill%2A> значение "прозрачный", а <xref:System.Windows.Shapes.Shape.StrokeThickness%2A> — 5.

    ![Практическое руководство. Как сделать пустым прямоугольник](./media/custom-button-blend-changerectproperties.png)

    Затем задайте для <xref:System.Windows.Shapes.Shape.Stroke%2A> цвет, который будет использоваться в шаблоне. Для этого щелкните маленький белый прямоугольник рядом с **обводкой**, выберите **кустомекспрессион**и в диалоговом окне введите "{TemplateBinding фона}".

    ![Практическое руководство. Использование цвета шаблона](./media/custom-button-blend-templatestroke.png)

4. **Создайте внутренний прямоугольник:** Теперь создайте другой прямоугольник (назовите его "Иннерректангле") и разместите его симметрично внутри **аутерректангле** . Для такого рода работы вам, вероятно, потребуется увеличить масштаб, чтобы кнопка стала больше в области редактирования.

    > [!NOTE]
    > Прямоугольник может выглядеть иначе, чем на рисунке (например, у него могут быть скругленные углы).

    ![Практическое руководство. Создание прямоугольника в прямоугольнике](./media/custom-button-blend-innerrectangleproperties.png)

5. **Переместить ContentPresenter в начало:** На этом этапе текст "Кнопка" может не отображаться. Если это так, это связано с тем, что **иннерректангле** находится поверх **миконтентпресентер**. Чтобы устранить эту проблему, перетащите **миконтентпресентер** под **иннерректангле**. Переместите прямоугольники и **миконтентпресентер** , как показано ниже.

    > [!NOTE]
    > Кроме того, можно также разместить **миконтентпресентер** в верхней части окна, щелкнув его правой кнопкой мыши и выбрав команду **отправить вперед**.

    ![Практическое руководство. Перемещение одной кнопки на другую](./media/custom-button-blend-innerrectangle2.png)

6. **Измените вид иннерректангле:** Задайте значения <xref:System.Windows.Shapes.Rectangle.RadiusX%2A>, <xref:System.Windows.Shapes.Rectangle.RadiusY%2A>и <xref:System.Windows.Shapes.Shape.StrokeThickness%2A> равными 20. Кроме того, задайте для <xref:System.Windows.Shapes.Shape.Fill%2A> фон шаблона, используя пользовательское выражение "{TemplateBinding фона}") и задайте для <xref:System.Windows.Shapes.Shape.Stroke%2A> значение "Transparent". Обратите внимание, что параметры для <xref:System.Windows.Shapes.Shape.Fill%2A> и <xref:System.Windows.Shapes.Shape.Stroke%2A> **иннерректангле** являются противоположными для **аутерректангле**.

    ![Практическое руководство. Изменение внешнего вида прямоугольника](./media/custom-button-blend-glassrectangleproperties1.png)

7. **Добавить слой с эффектом стекла поверх:** Заключительная часть настройки внешнего вида кнопки заключается в том, чтобы добавить прозрачный слой поверх остальных. Этот прозрачный слой состоит из третьего прямоугольника. Так как прозрачный блок охватывает всю кнопку, прозрачный прямоугольник аналогичен в измерениях для **аутерректангле**. Поэтому создайте прямоугольник, просто создав копию **аутерректангле**. Выделите **аутерректангле** и используйте сочетание клавиш CTRL + C и CTRL + V для создания копии. Назовите этот новый прямоугольник "Гласскубе".

8. **При необходимости изменить расположение гласскубе:** Если **гласскубе** еще не размещается, так что он охватывает всю кнопку, перетащите его в нужное расположение.

9. **Присвойте гласскубе немного другой форме, чем аутерректангле:** Измените свойства **гласскубе**. Начните с изменения <xref:System.Windows.Shapes.Rectangle.RadiusX%2A> и <xref:System.Windows.Shapes.Rectangle.RadiusY%2A> свойств на 10, а <xref:System.Windows.Shapes.Shape.StrokeThickness%2A> — на 2.

    ![Параметры отображения для glassCube](./media/custom-button-blend-glasscubeappearance.gif)

10. **Сделать гласскубе похожим на стекло:** Задайте для <xref:System.Windows.Shapes.Shape.Fill%2A> внешний вид с помощью линейного градиента, который равен 75% непрозрачен, и между белым цветом и прозрачностью более 6 приблизительно с равными промежутками времени. Вот что нужно сделать для ограничителей градиента:

    - Точка градиента 1: белый с альфа-значением 75%

    - Градиентная точка 2: прозрачная

    - Позиция градиента 3: белый с альфа-значением 75%

    - Градиентная точка 4: прозрачная

    - Градиентная позиция 5: белый с альфа-значением 75%

    - Ограничитель градиента 6: прозрачный

    При этом создается «волнистое» стекло.

    ![Прямоугольник, выглядящий как стекло](./media/custom-button-blend-glassrectangleproperties2.png)

11. **Скрыть слой стекла:** Теперь, когда вы видите, как выглядит прозрачный слой, перейдите на **панель внешний вид** **панели свойства** и установите для параметра Opacity (прозрачность) значение 0%, чтобы скрыть его. В разделах дальше мы будем использовать триггеры и события свойств для отображения и управления уровнем стекла.

    ![Практическое руководство. Сокрытие прозрачного прямоугольника](./media/custom-button-glassrectangleproperties3.gif)

## <a name="customize-the-button-behavior"></a>Настройка поведения кнопки

На этом этапе вы настроили представление кнопки, отредактировав его шаблон, но кнопка не реагирует на действия пользователя, как обычные кнопки (например, изменение внешнего вида при переходе по щелчку мыши, получение фокуса и нажатие кнопки). В следующих двух процедурах показано, как построить подобные поведения в пользовательской кнопке. Начнем с простых триггеров свойств, а затем добавим триггеры событий и анимации.

### <a name="to-set-property-triggers"></a>Установка триггеров свойств

1. **Создать новый триггер свойства:** Выбрав **гласскубе** , щелкните **+ Property (+ свойство** ) на панели **триггеров** (см. рисунок, следующий за следующим шагом). При этом создается триггер свойства с триггером свойства по умолчанию.

2. **Сделайте свойство, используемое триггером:** Измените свойство на <xref:System.Windows.UIElement.IsMouseOver%2A>. Это приводит к активации триггера свойства, когда свойство <xref:System.Windows.UIElement.IsMouseOver%2A> `true` (когда пользователь наводит указатель мыши на кнопку).

    ![Практическое руководство. Задание триггера свойства](./media/custom-button-blend-ismousedoverpropertytrigger.png)

3. Параметр **onmouseover активирует непрозрачность 100% для гласскубе:** Обратите внимание, что **запись триггера включена** (см. предыдущий рисунок). Это означает, что любые изменения, вносимые в значения свойств **гласскубе** при записи, будут иметь действие, которое выполняется, когда <xref:System.Windows.UIElement.IsMouseOver%2A> `true`. Во время записи измените <xref:System.Windows.UIElement.Opacity%2A> **гласскубе** на 100%.

    ![Практическое руководство. Установка непрозрачности кнопки](./media/custom-button-blend-ismousedoverpropertytrigger2.gif)

    Теперь вы создали первый триггер свойства. Обратите внимание, что **панель триггеров** редактора записала <xref:System.Windows.UIElement.Opacity%2A> изменяется на 100%.

    ![Панель “Триггеры”](./media/custom-button-blend-propertytriggerinfo.png)

    Нажмите клавишу F5, чтобы запустить приложение, и наведите указатель мыши на кнопку. Вы увидите, что слой стекла появляется при наведении указателя мыши на кнопку и исчезает при появлении указателя.

4. **Параметр onmouseover инициирует изменение значения Stroke:** Давайте свяжите некоторые другие действия с триггером <xref:System.Windows.UIElement.IsMouseOver%2A>. Пока запись продолжится, переключите выбранный вариант с **гласскубе** на **аутерректангле**. Затем задайте <xref:System.Windows.Shapes.Shape.Stroke%2A> **аутерректангле** в пользовательском выражении {DynamicResource {x:Static SystemColors. хигхлигхтбрушкэй}}. Это устанавливает <xref:System.Windows.Shapes.Shape.Stroke%2A> на типичный цвет выделения, используемый кнопками. Нажмите клавишу F5, чтобы увидеть результат при наведении указателя мыши на кнопку.

    ![Практическое руководство. Установка штриха маркера](./media/custom-button-blend-ismousedoverpropertytrigger3.png)

5. **Onmouseover запускает Размытый текст:** Давайте соберем еще одно действие с триггером свойства <xref:System.Windows.UIElement.IsMouseOver%2A>. Сделать содержимое кнопки нечетким при появлении стекла над ним. Для этого можно применить <xref:System.Windows.Media.Effects.BitmapEffect> размытия к <xref:System.Windows.Controls.ContentPresenter> (**миконтентпресентер**).

    ![Практическое руководство. Размытие содержимого кнопки](./media/custom-button-blend-propertytriggerwithbitmapeffect.png)

    > [!NOTE]
    > Чтобы вернуть **панель «Свойства»** к той, которая была перед поиском <xref:System.Windows.Media.Effects.BitmapEffect>, очистите текст из **поля поиска**.

    На этом этапе мы использовали триггер свойства с несколькими связанными действиями для создания поведения выделения, когда указатель мыши попадает в область кнопки и выходит из нее. Другим типичным поведением кнопки является выделение при наличии фокуса (как после щелчка мышью). Это поведение можно добавить, добавив еще один триггер свойства для свойства <xref:System.Windows.UIElement.IsFocused%2A>.

6. **Создать триггер свойства для Focus:** Используя ту же процедуру, что и для <xref:System.Windows.UIElement.IsMouseOver%2A> (см. первый шаг этого раздела), создайте еще один триггер свойства для свойства <xref:System.Windows.UIElement.IsFocused%2A>. Пока **запись триггера включена**, добавьте в триггер следующие действия:

    - **гласскубе** получает <xref:System.Windows.UIElement.Opacity%2A> 100%.

    - **аутерректангле** получает <xref:System.Windows.Shapes.Shape.Stroke%2A> значение настраиваемого выражения "{DynamicResource {x:Static SystemColors. хигхлигхтбрушкэй}}".

В качестве последнего шага в этом пошаговом руководстве мы добавим анимацию к кнопке. Эти анимации будут вызываться событиями, а именно событиями <xref:System.Windows.UIElement.MouseEnter> и <xref:System.Windows.Controls.Primitives.ButtonBase.Click>.

### <a name="to-use-event-triggers-and-animations-to-add-interactivity"></a>Использование триггеров событий и анимации для добавления интерактивности

1. **Создайте триггер события MouseEnter:** Добавьте новый триггер события и выберите <xref:System.Windows.UIElement.MouseEnter> в качестве события, которое будет использоваться в триггере.

     ![Практическое руководство. Создание триггера события MouseEnter](./media/custom-button-blend-mouseovereventtrigger.png)

2. **Создать шкалу анимации:** Затем свяжите временную шкалу анимации с событием <xref:System.Windows.UIElement.MouseEnter>.

    ![Практическое руководство. Добавление график анимации для события](./media/custom-button-blend-mouseovereventtrigger2.png)

    После нажатия кнопки " **ОК** " для создания новой временной шкалы появляется **Панель временной шкалы** , а "запись временной шкалы" отображается на панели конструктора. Это означает, что мы можем начать запись изменений свойств на временной шкале (изменения свойств анимации).

    > [!NOTE]
    > Возможно, потребуется изменить размер окна и (или) панелей, чтобы увидеть отображение.

    ![Панель график](./media/custom-button-blend-mouseovereventtrigger3.png)

3. **Создайте опорный кадр:** Чтобы создать анимацию, выберите объект, который требуется анимировать, создайте на временной шкале два или более опорных кадра, а для этих опорных кадров задайте значения свойств, между которыми должна быть создана анимация анимации. На следующем рисунке описывается создание опорного кадра.

    ![Практическое руководство. Создание ключевого фрейма](./media/custom-button-blend-mouseovereventtrigger4.png)

4. **Сжать гласскубе в этом опорном кадре:** Выбрав второй ключевой кадр, уменьшите размер **гласскубе** до 90% от его полного размера с помощью **преобразования размера**.

    ![Практическое руководство. Уменьшение размеров кнопки](./media/custom-button-blend-sizetransform.png)

    Нажмите клавишу F5 для запуска приложения. Наведите указатель мыши на кнопку. Обратите внимание, что прозрачный слой сжимается поверх кнопки.

5. **Создайте другой триггер события и свяжите с ним другую анимацию:** Давайте добавим еще одну анимацию. Используйте аналогичную процедуру, которая использовалась для создания предыдущей анимации триггера событий.

    1. Создайте новый триггер события с помощью события <xref:System.Windows.Controls.Primitives.ButtonBase.Click>.

    2. Свяжите новую временную шкалу с событием <xref:System.Windows.Controls.Primitives.ButtonBase.Click>.

        ![Практическое руководство. Создание нового график](./media/custom-button-blend-clickeventtrigger1.png)

    3. Для этой временной шкалы создайте два опорных кадра, один из которых составляет 0,0 секунд, а второй — 0,3 секунд.

    4. Выделив опорный кадр в 0,3 секунд, установите для параметра **угол поворота** значение 360 градусов.

        ![Практическое руководство. Создание преобразования вращения](./media/custom-button-blend-rotatetransform.gif)

    5. Нажмите клавишу F5 для запуска приложения. Нажмите кнопку. Обратите внимание, что прозрачный слой вращается вокруг.

## <a name="conclusion"></a>Заключение

Вы завершили настраиваемую кнопку. Вы сделали это с помощью шаблона кнопки, который был применен ко всем кнопкам в приложении. Если выйти из режима редактирования шаблона (см. рисунок ниже) и создать дополнительные кнопки, вы увидите, что они выглядят и ведут себя как пользовательская кнопка, а не как кнопка по умолчанию.

![Шаблон настраиваемой кнопки](./media/custom-button-blend-scopeup.gif)

![Несколько кнопок, использующих общий шаблон](./media/custom-button-blend-createmultiplebuttons.png)

Нажмите клавишу F5 для запуска приложения. Нажмите кнопки и обратите внимание на то, как все они ведут себя одинаково.

Помните, что во время настройки шаблона вы задаете свойство <xref:System.Windows.Shapes.Shape.Fill%2A> **иннерректангле** , а <xref:System.Windows.Shapes.Shape.Stroke%2A> свойство **аутерректангле** — фон шаблона ({TemplateBinding Background}). Поэтому при задании цвета фона для отдельных кнопок заданный фон будет использоваться для соответствующих свойств. Попробуйте изменить фон сейчас. На следующем рисунке используются различные градиенты. Таким образом, хотя шаблон полезен для общей настройки элементов управления, таких как Button, элементы управления с шаблонами можно изменять, чтобы они отличались друг от друга.

![Кнопки с тем же шаблоном, который выглядит диферент](./media/custom-button-blend-blendconclusion.jpg "custom_button_blend_BlendConclusion")

В заключение, в процессе настройки шаблона кнопки вы узнали, как выполнять следующие действия в Microsoft Expression Blend:

- Настройка вида элемента управления.

- Задание триггеров свойств. Триггеры свойств очень полезны, так как их можно использовать для большинства объектов, а не только для элементов управления.

- Задайте триггеры событий. Триггеры событий очень полезны, так как их можно использовать для большинства объектов, а не только для элементов управления.

- Создание анимации.

- Разное: создание градиентов, добавление Битмапеффектс, использование преобразований и задание основных свойств объектов.

## <a name="see-also"></a>См. также

- [Создание кнопки с помощью XAML](walkthrough-create-a-button-by-using-xaml.md)
- [Стилизация и использование шаблонов](styling-and-templating.md)
- [Общие сведения об эффектах анимации](../graphics-multimedia/animation-overview.md)
- [Общие сведения о закраске сплошным цветом и градиентом](../graphics-multimedia/painting-with-solid-colors-and-gradients-overview.md)
- [Общие сведения об эффектах для точечных рисунков](../graphics-multimedia/bitmap-effects-overview.md)
