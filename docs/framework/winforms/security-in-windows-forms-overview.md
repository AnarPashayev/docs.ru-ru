---
title: Общие сведения о безопасности в Windows Forms
ms.date: 03/30/2017
helpviewer_keywords:
- code access security [Windows Forms], Windows Forms
- permissions [Windows Forms], Windows Forms
- Windows Forms, security
- security [Windows Forms], about security
- access control [Windows Forms], Windows Forms
ms.assetid: 4810dc9f-ea23-4ce1-8ea1-657f0ff1d820
ms.openlocfilehash: a2d0f5f740186d3dd7483408f88d612711f57575
ms.sourcegitcommit: 127343afce8422bfa944c8b0c4ecc8f79f653255
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/25/2019
ms.locfileid: "67348471"
---
# <a name="security-in-windows-forms-overview"></a><span data-ttu-id="f4a8c-102">Общие сведения о безопасности в Windows Forms</span><span class="sxs-lookup"><span data-stu-id="f4a8c-102">Security in Windows Forms Overview</span></span>

<span data-ttu-id="f4a8c-103">До выпуска платформы .NET Framework весь код, выполняемый на компьютере пользователя было те же права и разрешения для доступа к ресурсам, которыми обладал пользователь компьютера.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-103">Before the release of the .NET Framework, all code running on a user's computer had the same rights or permissions to access resources that a user of the computer had.</span></span> <span data-ttu-id="f4a8c-104">Например, если пользователю был разрешен доступ к файловой системе, то код также получал доступ к файловой системе Если пользователю был разрешен доступ к базе данных, то и коду предоставлялся доступ к ней.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-104">For example, if the user was allowed to access the file system, the code was allowed to access the file system; if the user was allowed to access a database, the code was allowed to access that database.</span></span> <span data-ttu-id="f4a8c-105">Наличие таких прав или разрешений может быть допустимо для кода в исполняемых файлах, которые пользователь собственноручно установил на локальном компьютере, но оно неприемлемо в тех случаях, когда речь идет о потенциально вредоносном коде, поступившем из Интернета или локальной интрасети.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-105">Although these rights or permissions may be acceptable for code in executables that the user has explicitly installed on the local computer, they may not be acceptable for potentially malicious code coming from the Internet or a local Intranet.</span></span> <span data-ttu-id="f4a8c-106">Такой код не должен получать доступ к ресурсам компьютера пользователя без его разрешения.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-106">This code should not be able to access the user's computer resources without permission.</span></span>

<span data-ttu-id="f4a8c-107">.NET Framework появилась инфраструктура, которая называется управлением доступом для кода, которая которых у пользователя есть права.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-107">The .NET Framework introduces an infrastructure called Code Access Security that lets you differentiate the permissions, or rights, that code has from the rights that the user has.</span></span> <span data-ttu-id="f4a8c-108">По умолчанию код, поступающий из Интернета или интрасети, может выполняться только в режиме частичного доверия.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-108">By default, code coming from the Internet and the Intranet can only run in what is known as partial trust.</span></span> <span data-ttu-id="f4a8c-109">В режиме частичного доверия приложение подвергается ряду ограничений: помимо всего прочего, приложению отказано в доступе к локальным жестким дискам, и оно не может запускать неуправляемый код.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-109">Partial trust subjects an application to a series of restrictions: among other things, an application is restricted from accessing the local hard disk, and cannot run unmanaged code.</span></span> <span data-ttu-id="f4a8c-110">.NET Framework управляет ресурсами, к которым код может получить доступ на основе идентификатора этого кода: его происхождения, имеет ли он [сборки со строгими именами](../app-domains/strong-named-assemblies.md), подписан ли он с помощью сертификата и т. д.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-110">The .NET Framework controls the resources that code is allowed to access based on the identity of that code: where it came from, whether it has a [Strong-Named Assemblies](../app-domains/strong-named-assemblies.md), whether it is signed with a certificate, and so on.</span></span>

<span data-ttu-id="f4a8c-111">Технология [!INCLUDE[ndptecclick](../../../includes/ndptecclick-md.md)], используемая для развертывания приложений Windows Forms, облегчает разработку приложений, которые запускаются с частичным доверием, с полным доверием или с частичным доверием и повышенным уровнем разрешений.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-111">[!INCLUDE[ndptecclick](../../../includes/ndptecclick-md.md)] technology, which you use to deploy Windows Forms applications, helps make it easier for you to develop applications that run in partial trust, in full trust, or in partial trust with elevated permissions.</span></span> [!INCLUDE[ndptecclick](../../../includes/ndptecclick-md.md)] <span data-ttu-id="f4a8c-112">предоставляет такие функции, как повышение уровня разрешений и развертывание доверенного приложения, чтобы приложение могло подобающим образом запрашивать полное доверие или повышенный уровень разрешений у локального пользователя.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-112">provides features such as Permission Elevation and Trusted Application Deployment so that your application can request full trust or elevated permissions from the local user in a responsible manner.</span></span>

## <a name="understanding-security-in-the-net-framework"></a><span data-ttu-id="f4a8c-113">Общее представление о безопасности в .NET Framework</span><span class="sxs-lookup"><span data-stu-id="f4a8c-113">Understanding Security in the .NET Framework</span></span>

<span data-ttu-id="f4a8c-114">Управление доступом для кода позволяет считать код надежным в той или иной степени в зависимости от происхождения кода и других аспектов его удостоверения.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-114">Code access security allows code to be trusted to varying degrees, depending on where the code originates and on other aspects of the code's identity.</span></span> <span data-ttu-id="f4a8c-115">Подробнее о данных, на основании которых среда CLR определяет политику безопасности, см. в разделе [Свидетельство](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/7y5x1hcd(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="f4a8c-115">For more information about the evidence the common language runtime uses to determine security policy, see [Evidence](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/7y5x1hcd(v=vs.100)).</span></span> <span data-ttu-id="f4a8c-116">Это помогает защитить компьютеры от вредоносного кода, а доверенный код — от умышленного или случайного нарушения безопасности.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-116">It helps protect computer systems from malicious code and helps protect trusted code from intentionally or accidentally compromising security.</span></span> <span data-ttu-id="f4a8c-117">Управление доступом для кода также позволяет лучше контролировать действия, которые может выполнять приложение, так как вы можете указать только те разрешения, которые необходимы для работы приложения.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-117">Code access security also gives you more control over what actions your application can perform, because you can specify only those permissions you need your application to have.</span></span> <span data-ttu-id="f4a8c-118">Управление доступом для кода влияет на весь управляемый код, который предназначен для среды CLR, даже если этот код не производит ни одной проверки разрешений, предоставленных посредством управления доступом для кода.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-118">Code access security affects all managed code that targets the common language runtime, even if that code does not make a single code-access-security permission check.</span></span> <span data-ttu-id="f4a8c-119">Дополнительные сведения о безопасности в .NET Framework, см. в разделе [основные понятия безопасности](../../standard/security/key-security-concepts.md) и [основы управления доступом для кода](../misc/code-access-security-basics.md).</span><span class="sxs-lookup"><span data-stu-id="f4a8c-119">For more information about security in the .NET Framework, see [Key Security Concepts](../../standard/security/key-security-concepts.md) and [Code Access Security Basics](../misc/code-access-security-basics.md).</span></span>

<span data-ttu-id="f4a8c-120">Если пользователь запускает исполняемый файл Windows Forms непосредственно с веб-сервера или из общей папки, то степень доверия, предоставляемая приложению, зависит от того, где размещается код и как он запущен.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-120">If the user run a Windows Forms executable file directly off of a Web server or a file share, the degree of trust granted to your application depends on where the code resides, and how it is started.</span></span> <span data-ttu-id="f4a8c-121">При запуске приложения происходит его автоматическая оценка, после которой приложение получает именованный набор разрешений от среды CLR.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-121">When an application runs, it is automatically evaluated and it receives a named permission set from the common language runtime.</span></span> <span data-ttu-id="f4a8c-122">По умолчанию код на локальном компьютере получает набор разрешений полного доверия, код из локальной сети — набор разрешений локальной интрасети, а код из Интернета — набор разрешений Интернета.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-122">By default, the code from the local computer is granted the Full Trust permission set, code from a local network is granted the Local Intranet permission set, and code from the Internet is granted the Internet permission set.</span></span>

> [!NOTE]
> <span data-ttu-id="f4a8c-123">В .NET Framework версии 1.0 с пакетом обновления 1 и службы пакетом обновления 2, Интернет зона кода группа получает Nothing набор разрешений.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-123">In the .NET Framework version 1.0 Service Pack 1 and Service Pack 2, the Internet zone code group receives the Nothing permission set.</span></span> <span data-ttu-id="f4a8c-124">Во всех остальных выпусках платформы .NET Framework группа кода зоны Интернета получает набор разрешений Интернета.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-124">In all other releases of the .NET Framework, the Internet zone code group receives the Internet permissions set.</span></span>
>
> <span data-ttu-id="f4a8c-125">Разрешения по умолчанию, которые содержатся в этих наборах, приведены в разделе [Политика безопасности по умолчанию](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/03kwzyfc(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="f4a8c-125">The default permissions granted in each of these permission sets are listed in the [Default Security Policy](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/03kwzyfc(v=vs.100)) topic.</span></span> <span data-ttu-id="f4a8c-126">В зависимости от разрешений, которые получает приложение, оно выполняется правильно либо вызывает исключение безопасности.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-126">Depending on the permissions that the application receives, it either runs correctly or generates a security exception.</span></span>
>
> <span data-ttu-id="f4a8c-127">Многие приложения Windows Forms развертываются с помощью [!INCLUDE[ndptecclick](../../../includes/ndptecclick-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f4a8c-127">Many Windows Forms applications will be deployed using [!INCLUDE[ndptecclick](../../../includes/ndptecclick-md.md)].</span></span> <span data-ttu-id="f4a8c-128">Уровни безопасности по умолчанию средств, используемых для реализации развертывания [!INCLUDE[ndptecclick](../../../includes/ndptecclick-md.md)], отличаются от тех, которые обсуждались ранее.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-128">The tools used for generating a [!INCLUDE[ndptecclick](../../../includes/ndptecclick-md.md)] deployment have different security defaults than what was discussed earlier.</span></span> <span data-ttu-id="f4a8c-129">Подробнее см. далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-129">For more information, see the following discussion.</span></span>

<span data-ttu-id="f4a8c-130">Разрешения, предоставленные приложению, могут отличаться от разрешений по умолчанию, потому что политика безопасности может быть изменена. Это означает, что приложение может иметь некоторые разрешения на одном компьютере, но не иметь их на другом.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-130">The actual permissions granted to your application can be different from the default values, because the security policy can be modified; this means that your application can have permission on one computer, but not on another.</span></span>

## <a name="developing-a-more-secure-windows-forms-application"></a><span data-ttu-id="f4a8c-131">Разработка более безопасных приложений Windows Forms</span><span class="sxs-lookup"><span data-stu-id="f4a8c-131">Developing a More Secure Windows Forms Application</span></span>

<span data-ttu-id="f4a8c-132">Безопасность важна на всех этапах разработки приложения.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-132">Security is important in all steps of application development.</span></span> <span data-ttu-id="f4a8c-133">Начните с анализа и выполнения [правил написания безопасного кода](../../standard/security/secure-coding-guidelines.md).</span><span class="sxs-lookup"><span data-stu-id="f4a8c-133">Start by reviewing and following the [Secure Coding Guidelines](../../standard/security/secure-coding-guidelines.md).</span></span>

<span data-ttu-id="f4a8c-134">Далее необходимо решить, будет ли приложение выполняться в режиме полного или частичного доверия.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-134">Next, decide whether your application must run in full trust, or whether it should run in partial trust.</span></span> <span data-ttu-id="f4a8c-135">Выполнение приложения в режиме полного доверия облегчает доступ к ресурсам на локальном компьютере, но подвергает приложение и его пользователей высокому риску нарушения безопасности, если приложение проектировалось и разрабатывалось без строгого соблюдения правил написания безопасного кода.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-135">Running your application in full trust makes it easier to access resources on the local computer, but exposes your application and its users to high security risks if you do not design and develop your application strictly according to the Secure Coding Guidelines topic.</span></span> <span data-ttu-id="f4a8c-136">Выполнение приложения в режиме частичного доверия облегчает разработку более безопасных приложений и сокращает риски, но требует более тщательного планирования реализации некоторых возможностей.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-136">Running your application in partial trust makes it easier to develop a more secure application and reduces much risk, but requires more planning in how to implement certain features.</span></span>

<span data-ttu-id="f4a8c-137">Если используется частичное доверие (т. е. наборы разрешений "Интернет" или "Локальная интрасеть"), определите, как должно вести себя приложение в этой среде.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-137">If you choose partial trust (that is, either the Internet or Local Intranet permission sets), decide how you want your application to behave in this environment.</span></span> <span data-ttu-id="f4a8c-138">Windows Forms предоставляет более безопасные альтернативные способы реализации возможностей приложения в среде с частичным доверием.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-138">Windows Forms provides alternative, more secure ways to implement features when in a semi-trusted environment.</span></span> <span data-ttu-id="f4a8c-139">Определенные части приложения, например отвечающие за доступ к данным, могут быть разработаны и написаны по-разному для среды с частичным доверием и среды с полным доверием.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-139">Certain parts of your application, such as data access, can be designed and written differently for both partial trust and full trust environments.</span></span> <span data-ttu-id="f4a8c-140">Некоторые возможности Windows Forms, такие как параметры приложения, предназначены для работы в среде с частичным доверием.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-140">Some Windows Forms features, such as application settings, are designed to work in partial trust.</span></span> <span data-ttu-id="f4a8c-141">Подробнее см. в разделе [Общие сведения о параметрах приложений](./advanced/application-settings-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f4a8c-141">For more information, see [Application Settings Overview](./advanced/application-settings-overview.md).</span></span>

<span data-ttu-id="f4a8c-142">Если приложению требуется больше разрешений, чем позволяет среда с частичным доверием, однако предоставлять ему разрешения полного доверия нежелательно, можно работать в режиме частичного доверия, запросив только необходимые дополнительные разрешения.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-142">If your application needs more permissions than partial trust allows, but you do not want to run in full trust, you can run in partial trust while asserting only those additional permissions you need.</span></span> <span data-ttu-id="f4a8c-143">Например, если требуется работать в режиме частичного доверия, но необходимо предоставить приложению доступ только для чтения к каталогу в файловой системе пользователя, можно запросить разрешение <xref:System.Security.Permissions.FileIOPermission> только для этого каталога.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-143">For example, if you want to run in partial trust, but must grant your application read-only access to a directory on the user's file system, you can request <xref:System.Security.Permissions.FileIOPermission> only for that directory.</span></span> <span data-ttu-id="f4a8c-144">При правильном применении этот подход может расширять функциональные возможности приложения и снижать угрозу безопасности для пользователей.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-144">Used correctly, this approach can give your application increased functionality and minimize security risks to your users.</span></span>

<span data-ttu-id="f4a8c-145">При разработке приложения, которое будет выполняться в среде с частичным доверием, отслеживайте, какие разрешения обязательны для его работы и какие могут использоваться им дополнительно.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-145">When you develop an application that will run in partial trust, keep track of what permissions your application must run and what permissions your application could optionally use.</span></span> <span data-ttu-id="f4a8c-146">Когда известны все разрешения, необходимо подать декларативный запрос на разрешения на уровне приложения.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-146">When all the permissions are known, you should make a declarative request for permission at the application level.</span></span> <span data-ttu-id="f4a8c-147">Запрос разрешений уведомляет среду выполнения о необходимых вашему приложению и какие разрешения не требуется .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-147">Requesting permissions informs the .NET Framework run time about which permissions your application needs and which permissions it specifically does not want.</span></span> <span data-ttu-id="f4a8c-148">Дополнительные сведения о запросе разрешений см. в разделе [Запрос разрешений](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/yd267cce(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="f4a8c-148">For more information about requesting permissions, see [Requesting Permissions](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/yd267cce(v=vs.100)).</span></span>

<span data-ttu-id="f4a8c-149">При запросе необязательных разрешений необходимо обработать исключения безопасности, которые могут возникнуть, если приложение выполнит действие, требующее разрешений, которые не были предоставлены.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-149">When you request optional permissions, you must handle security exceptions that will be generated if your application performs an action that requires permissions not granted to it.</span></span> <span data-ttu-id="f4a8c-150">Корректная обработка исключения <xref:System.Security.SecurityException> гарантирует, что приложение будет продолжать работать.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-150">Appropriate handling of the <xref:System.Security.SecurityException> will ensure that your application can continue to operate.</span></span> <span data-ttu-id="f4a8c-151">Приложение может использовать исключения для определения того, следует ли отключить ту или иную возможность для пользователя.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-151">Your application can use the exception to determine whether a feature should become disabled for the user.</span></span> <span data-ttu-id="f4a8c-152">Например, приложение может отключить команду меню **Сохранить**, если не предоставлено соответствующее разрешение.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-152">For example, an application can disable the **Save** menu option if the required file permission is not granted.</span></span>

<span data-ttu-id="f4a8c-153">Иногда трудно определить, запрошены ли все необходимые разрешения.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-153">Sometimes, it is difficult to know if you have asserted all the appropriate permissions.</span></span> <span data-ttu-id="f4a8c-154">Например, вызов метода, который на первый взгляд выглядит вполне безобидно, может во время выполнения в какой-то момент обращаться к файловой системе.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-154">A method call which looks innocuous on the surface, for example, may access the file system at some point during its execution.</span></span> <span data-ttu-id="f4a8c-155">Если не выполнить развертывание приложения со всеми требуемыми разрешениями, оно может работать корректно при отладке, но отказать при развертывании.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-155">If you do not deploy your application with all the required permissions, it may test fine when you debug it on your desktop, but fail when deployed.</span></span> <span data-ttu-id="f4a8c-156">Пакет SDK для .NET Framework 2.0 и Visual Studio 2005 имеются средства для определения разрешений, необходимых приложению: MT.exe командной строки и функция вычисления разрешений Visual Studio, соответственно.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-156">Both the .NET Framework 2.0 SDK and Visual Studio 2005 contain tools for calculating the permissions an application needs: the MT.exe command line tool and the Calculate Permissions feature of Visual Studio, respectively.</span></span>

<span data-ttu-id="f4a8c-157">Дополнительные функции обеспечения безопасности Windows Forms описаны в представленных ниже разделах.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-157">The following topics describe additional Windows Forms security features.</span></span>

|<span data-ttu-id="f4a8c-158">Раздел</span><span class="sxs-lookup"><span data-stu-id="f4a8c-158">Topic</span></span>|<span data-ttu-id="f4a8c-159">Описание</span><span class="sxs-lookup"><span data-stu-id="f4a8c-159">Description</span></span>|
|-----------|-----------------|
|<span data-ttu-id="f4a8c-160">- [Более безопасный доступ к файлам и данным в Windows Forms](more-secure-file-and-data-access-in-windows-forms.md)</span><span class="sxs-lookup"><span data-stu-id="f4a8c-160">- [More Secure File and Data Access in Windows Forms](more-secure-file-and-data-access-in-windows-forms.md)</span></span>|<span data-ttu-id="f4a8c-161">Описание доступа к файлам и данным в среде с частичным доверием.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-161">Describes how to access files and data in a partial trust environment.</span></span>|
|<span data-ttu-id="f4a8c-162">- [Более безопасная печать в Windows Forms](more-secure-printing-in-windows-forms.md)</span><span class="sxs-lookup"><span data-stu-id="f4a8c-162">- [More Secure Printing in Windows Forms](more-secure-printing-in-windows-forms.md)</span></span>|<span data-ttu-id="f4a8c-163">Описание доступа к возможностям печати в среде с частичным доверием.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-163">Describes how to access printing features in a partial trust environment.</span></span>|
|<span data-ttu-id="f4a8c-164">- [Дополнительные вопросы безопасности в формах Windows Forms](additional-security-considerations-in-windows-forms.md)</span><span class="sxs-lookup"><span data-stu-id="f4a8c-164">- [Additional Security Considerations in Windows Forms](additional-security-considerations-in-windows-forms.md)</span></span>|<span data-ttu-id="f4a8c-165">Описание способов работы с окнами с помощью буфера обмена и вызова неуправляемого кода в среде с частичным доверием.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-165">Describes performing window manipulation, using the Clipboard, and making calls to unmanaged code in a partial trust environment.</span></span>|

### <a name="deploying-an-application-with-the-appropriate-permissions"></a><span data-ttu-id="f4a8c-166">Развертывание приложения с соответствующими разрешениями</span><span class="sxs-lookup"><span data-stu-id="f4a8c-166">Deploying an Application with the Appropriate Permissions</span></span>

<span data-ttu-id="f4a8c-167">Чаще всего приложение Windows Forms развертывается на клиентском компьютере с использованием [!INCLUDE[ndptecclick](../../../includes/ndptecclick-md.md)] — технологии развертывания, которая описывает все компоненты, необходимые для запуска приложения.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-167">The most common means of deploying a Windows Forms application to a client computer is with [!INCLUDE[ndptecclick](../../../includes/ndptecclick-md.md)], a deployment technology that describes all of the components your application needs to run.</span></span> <span data-ttu-id="f4a8c-168">В [!INCLUDE[ndptecclick](../../../includes/ndptecclick-md.md)] для описания сборок и файлов, входящих в состав приложения, а также требуемых ему разрешений используются XML-файлы, называемые манифестами.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-168">[!INCLUDE[ndptecclick](../../../includes/ndptecclick-md.md)] uses XML files called manifests to describe the assemblies and files that make up your application, and also the permissions your application requires.</span></span>

<span data-ttu-id="f4a8c-169">В состав [!INCLUDE[ndptecclick](../../../includes/ndptecclick-md.md)] входят две технологии запроса повышенного уровня разрешений на клиентском компьютере.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-169">[!INCLUDE[ndptecclick](../../../includes/ndptecclick-md.md)] has two technologies for requesting elevated permissions on a client computer.</span></span> <span data-ttu-id="f4a8c-170">Обе технологии основаны на использовании сертификатов Authenticode.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-170">Both technologies rely on the use of Authenticode certificates.</span></span> <span data-ttu-id="f4a8c-171">Сертификаты предоставляют пользователям некоторые гарантии того, что приложение поступило из надежного источника.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-171">The certificates help provide some assurance to your users that the application has come from a trusted source.</span></span>

<span data-ttu-id="f4a8c-172">Эти технологии описаны в приведенной ниже таблице.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-172">The following table describes these technologies.</span></span>

|<span data-ttu-id="f4a8c-173">Технология повышения уровня разрешений</span><span class="sxs-lookup"><span data-stu-id="f4a8c-173">Elevated permission technology</span></span>|<span data-ttu-id="f4a8c-174">Описание</span><span class="sxs-lookup"><span data-stu-id="f4a8c-174">Description</span></span>|
|------------------------------------|-----------------|
|<span data-ttu-id="f4a8c-175">Повышение уровня разрешений</span><span class="sxs-lookup"><span data-stu-id="f4a8c-175">Permission Elevation</span></span>|<span data-ttu-id="f4a8c-176">Запрашивает пользователя с помощью диалогового окна безопасности при первом запуске приложения.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-176">Prompts the user with a security dialog box the first time your application runs.</span></span> <span data-ttu-id="f4a8c-177">Диалоговое окно **Повышение разрешений** информирует пользователя об издателе приложения, чтобы пользователь мог принять обоснованное решение в отношении того, следует ли предоставлять приложению дополнительное доверие.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-177">The **Permission Elevation** dialog box informs the user about who published the application, so that the user can make an informed decision about whether to grant it additional trust</span></span>|
|<span data-ttu-id="f4a8c-178">Развертывание надежных приложений</span><span class="sxs-lookup"><span data-stu-id="f4a8c-178">Trusted Application Deployment</span></span>|<span data-ttu-id="f4a8c-179">Предусматривает однократную установку сертификата Authenticode издателя на клиентском компьютере, выполняемую системным администратором.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-179">Involves a system administrator performing a one-time installation of a publisher's Authenticode certificate on a client computer.</span></span> <span data-ttu-id="f4a8c-180">С этого момента любые приложения, подписанные этим сертификатом, будут рассматриваться как надежные, и их можно будет запускать с полным доверием на локальном компьютере без дополнительных запросов.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-180">From that point on, any applications signed with the certificate are regarded as trusted, and can run at full trust on the local computer without additional prompting.</span></span>|

<span data-ttu-id="f4a8c-181">Выбор технологии зависит от среды развертывания.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-181">Which technology you choose will depend on your deployment environment.</span></span> <span data-ttu-id="f4a8c-182">Подробнее см. в разделе [Выбор стратегии развертывания ClickOnce](/visualstudio/deployment/choosing-a-clickonce-deployment-strategy).</span><span class="sxs-lookup"><span data-stu-id="f4a8c-182">For more information, see [Choosing a ClickOnce Deployment Strategy](/visualstudio/deployment/choosing-a-clickonce-deployment-strategy).</span></span>

<span data-ttu-id="f4a8c-183">По умолчанию [!INCLUDE[ndptecclick](../../../includes/ndptecclick-md.md)] приложения, развернутые с помощью Visual Studio или средства .NET Framework SDK (Mage.exe и MageUI.exe) настроены для запуска на клиентском компьютере с полным доверием.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-183">By default, [!INCLUDE[ndptecclick](../../../includes/ndptecclick-md.md)] applications deployed using either Visual Studio or the .NET Framework SDK tools (Mage.exe and MageUI.exe) are configured to run on a client computer that has Full Trust.</span></span> <span data-ttu-id="f4a8c-184">При развертывании приложения с помощью частичного доверия или с помощью только некоторых дополнительных разрешений необходимо изменить эту настройку по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-184">If you are deploying your application by using partial trust or by using only some additional permissions, you will have to change this default.</span></span> <span data-ttu-id="f4a8c-185">Это можно сделать с помощью Visual Studio или .NET Framework SDK средства MageUI.exe при настройке развертывания.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-185">You can do this with either Visual Studio or the .NET Framework SDK tool MageUI.exe when you configure your deployment.</span></span> <span data-ttu-id="f4a8c-186">Дополнительные сведения об использовании MageUI.exe см. пошаговое руководство: Развертывание приложения ClickOnce из командной строки.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-186">For more information about how to use MageUI.exe, see Walkthrough: Deploying a ClickOnce Application from the Command Line.</span></span>  <span data-ttu-id="f4a8c-187">Также см. раздел [Как Установка пользовательских разрешений для ClickOnce-приложения](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2012/hafybdaa(v=vs.110)) или [как: Установка пользовательских разрешений для ClickOnce-приложения](/visualstudio/deployment/how-to-set-custom-permissions-for-a-clickonce-application).</span><span class="sxs-lookup"><span data-stu-id="f4a8c-187">Also see [How to: Set Custom Permissions for a ClickOnce Application](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2012/hafybdaa(v=vs.110)) or [How to: Set Custom Permissions for a ClickOnce Application](/visualstudio/deployment/how-to-set-custom-permissions-for-a-clickonce-application).</span></span>

<span data-ttu-id="f4a8c-188">Подробнее об аспектах безопасности [!INCLUDE[ndptecclick](../../../includes/ndptecclick-md.md)] и повышении уровня разрешений см. в разделе [Развертывание и защита приложений ClickOnce](/visualstudio/deployment/securing-clickonce-applications).</span><span class="sxs-lookup"><span data-stu-id="f4a8c-188">For more information about the security aspects of [!INCLUDE[ndptecclick](../../../includes/ndptecclick-md.md)] and Permission Elevation, see [Securing ClickOnce Applications](/visualstudio/deployment/securing-clickonce-applications).</span></span> <span data-ttu-id="f4a8c-189">Подробнее о развертывании доверенных приложений см. в разделе [Общие сведения о развертывании доверенных приложений](/visualstudio/deployment/trusted-application-deployment-overview).</span><span class="sxs-lookup"><span data-stu-id="f4a8c-189">For more information about Trusted Application Deployment, see [Trusted Application Deployment Overview](/visualstudio/deployment/trusted-application-deployment-overview).</span></span>

### <a name="testing-the-application"></a><span data-ttu-id="f4a8c-190">Тестирование приложения</span><span class="sxs-lookup"><span data-stu-id="f4a8c-190">Testing the Application</span></span>

<span data-ttu-id="f4a8c-191">Если вы развернули приложение Windows Forms с помощью Visual Studio, вы можете включить отладку в режиме частичного доверия или с ограниченным набором разрешений из среды разработки.</span><span class="sxs-lookup"><span data-stu-id="f4a8c-191">If you have deployed your Windows Forms application by using Visual Studio, you can enable debugging in partial trust or a restricted permission set from the development environment.</span></span>  <span data-ttu-id="f4a8c-192">Также см. раздел [Как отладить приложение ClickOnce с ограниченными разрешениями](/visualstudio/deployment/how-to-debug-a-clickonce-application-with-restricted-permissions).</span><span class="sxs-lookup"><span data-stu-id="f4a8c-192">Also see [How to: Debug a ClickOnce Application with Restricted Permissions](/visualstudio/deployment/how-to-debug-a-clickonce-application-with-restricted-permissions).</span></span>

## <a name="see-also"></a><span data-ttu-id="f4a8c-193">См. также</span><span class="sxs-lookup"><span data-stu-id="f4a8c-193">See also</span></span>

- [<span data-ttu-id="f4a8c-194">Безопасность Windows Forms</span><span class="sxs-lookup"><span data-stu-id="f4a8c-194">Windows Forms Security</span></span>](windows-forms-security.md)
- [<span data-ttu-id="f4a8c-195">Основы управления доступом для кода</span><span class="sxs-lookup"><span data-stu-id="f4a8c-195">Code Access Security Basics</span></span>](../misc/code-access-security-basics.md)
- [<span data-ttu-id="f4a8c-196">Развертывание и безопасность технологии ClickOnce</span><span class="sxs-lookup"><span data-stu-id="f4a8c-196">ClickOnce Security and Deployment</span></span>](/visualstudio/deployment/clickonce-security-and-deployment)
- [<span data-ttu-id="f4a8c-197">Общие сведения о развертывании доверенных приложений</span><span class="sxs-lookup"><span data-stu-id="f4a8c-197">Trusted Application Deployment Overview</span></span>](/visualstudio/deployment/trusted-application-deployment-overview)
- [<span data-ttu-id="f4a8c-198">Mage.exe (средство создания и редактирования манифеста)</span><span class="sxs-lookup"><span data-stu-id="f4a8c-198">Mage.exe (Manifest Generation and Editing Tool)</span></span>](../tools/mage-exe-manifest-generation-and-editing-tool.md)
- [<span data-ttu-id="f4a8c-199">MageUI.exe (средство создания и редактирования манифестов, графический клиент)</span><span class="sxs-lookup"><span data-stu-id="f4a8c-199">MageUI.exe (Manifest Generation and Editing Tool, Graphical Client)</span></span>](../tools/mageui-exe-manifest-generation-and-editing-tool-graphical-client.md)
