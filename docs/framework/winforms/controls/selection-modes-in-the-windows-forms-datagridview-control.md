---
title: Режимы выбора в элементе управления DataGridView
ms.date: 03/30/2017
helpviewer_keywords:
- selection [Windows Forms], modes in DataGridView control
- DataGridView control [Windows Forms], selection mode
ms.assetid: a3ebfd3d-0525-479d-9d96-d9e017289b36
ms.openlocfilehash: e20bf6307d77bf189b698e847c6b855c249dc3c1
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2020
ms.locfileid: "76743036"
---
# <a name="selection-modes-in-the-windows-forms-datagridview-control"></a><span data-ttu-id="0e1b9-102">Режимы выделения содержимого элемента управления DataGridView в Windows Forms</span><span class="sxs-lookup"><span data-stu-id="0e1b9-102">Selection Modes in the Windows Forms DataGridView Control</span></span>

<span data-ttu-id="0e1b9-103">Иногда требуется, чтобы приложение выполняло действия на основе выбора пользователя в элементе управления <xref:System.Windows.Forms.DataGridView>.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-103">Sometimes you want your application to perform actions based on user selections within a <xref:System.Windows.Forms.DataGridView> control.</span></span> <span data-ttu-id="0e1b9-104">В зависимости от действий может потребоваться ограничить возможные виды выбора.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-104">Depending on the actions, you may want to restrict the kinds of selection that are possible.</span></span> <span data-ttu-id="0e1b9-105">Например, предположим, что приложение может напечатать отчет для выбранной в данный момент записи.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-105">For example, suppose your application can print a report for the currently selected record.</span></span> <span data-ttu-id="0e1b9-106">В этом случае может потребоваться настроить элемент управления <xref:System.Windows.Forms.DataGridView> таким образом, чтобы при щелчке в любом месте строки всегда выбиралась вся строка, и можно было выбрать только одну строку за раз.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-106">In this case, you may want to configure the <xref:System.Windows.Forms.DataGridView> control so that clicking anywhere within a row always selects the entire row, and so that only one row at a time can be selected.</span></span>

<span data-ttu-id="0e1b9-107">Можно указать допустимые значения, задав для свойства <xref:System.Windows.Forms.DataGridView.SelectionMode%2A?displayProperty=nameWithType> одно из следующих <xref:System.Windows.Forms.DataGridViewSelectionMode> значений перечисления.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-107">You can specify the selections allowed by setting the <xref:System.Windows.Forms.DataGridView.SelectionMode%2A?displayProperty=nameWithType> property to one of the following <xref:System.Windows.Forms.DataGridViewSelectionMode> enumeration values.</span></span>

|<span data-ttu-id="0e1b9-108">Значение Датагридвиевселектионмоде</span><span class="sxs-lookup"><span data-stu-id="0e1b9-108">DataGridViewSelectionMode value</span></span>|<span data-ttu-id="0e1b9-109">Description</span><span class="sxs-lookup"><span data-stu-id="0e1b9-109">Description</span></span>|
|-------------------------------------|-----------------|
|<xref:System.Windows.Forms.DataGridViewSelectionMode.CellSelect>|<span data-ttu-id="0e1b9-110">При щелчке ячейки она выделяется.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-110">Clicking a cell selects it.</span></span> <span data-ttu-id="0e1b9-111">Заголовки строк и столбцов нельзя использовать для выбора.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-111">Row and column headers cannot be used for selection.</span></span>|
|<xref:System.Windows.Forms.DataGridViewSelectionMode.ColumnHeaderSelect>|<span data-ttu-id="0e1b9-112">При щелчке ячейки она выделяется.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-112">Clicking a cell selects it.</span></span> <span data-ttu-id="0e1b9-113">При щелчке заголовка столбца выделяется весь столбец.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-113">Clicking a column header selects the entire column.</span></span> <span data-ttu-id="0e1b9-114">Заголовки столбцов нельзя использовать для сортировки.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-114">Column headers cannot be used for sorting.</span></span>|
|<xref:System.Windows.Forms.DataGridViewSelectionMode.FullColumnSelect>|<span data-ttu-id="0e1b9-115">При щелчке ячейки или заголовка столбца выделяется весь столбец.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-115">Clicking a cell or a column header selects the entire column.</span></span> <span data-ttu-id="0e1b9-116">Заголовки столбцов нельзя использовать для сортировки.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-116">Column headers cannot be used for sorting.</span></span>|
|<xref:System.Windows.Forms.DataGridViewSelectionMode.FullRowSelect>|<span data-ttu-id="0e1b9-117">При щелчке ячейки или заголовка строки выделяется вся строка.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-117">Clicking a cell or a row header selects the entire row.</span></span>|
|<xref:System.Windows.Forms.DataGridViewSelectionMode.RowHeaderSelect>|<span data-ttu-id="0e1b9-118">Режим выбора по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-118">Default selection mode.</span></span> <span data-ttu-id="0e1b9-119">При щелчке ячейки она выделяется.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-119">Clicking a cell selects it.</span></span> <span data-ttu-id="0e1b9-120">При щелчке заголовка строки выделяется вся строка.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-120">Clicking a row header selects the entire row.</span></span>|

> [!NOTE]
> <span data-ttu-id="0e1b9-121">Изменение режима выбора во время выполнения автоматически снимает текущее выделение.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-121">Changing the selection mode at run time automatically clears the current selection.</span></span>

<span data-ttu-id="0e1b9-122">По умолчанию пользователи могут выбирать несколько строк, столбцов или ячеек путем перетаскивания мышью, нажатием клавиш CTRL или SHIFT при выборе для расширения или изменения выделенного фрагмента или щелчка ячейки верхнего левого заголовка для выбора всех ячеек в элементе управления.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-122">By default, users can select multiple rows, columns, or cells by dragging with the mouse, pressing CTRL or SHIFT while selecting to extend or modify a selection, or clicking the top-left header cell to select all cells in the control.</span></span> <span data-ttu-id="0e1b9-123">Чтобы предотвратить такое поведение, задайте для свойства <xref:System.Windows.Forms.DataGridView.MultiSelect%2A> значение `false`.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-123">To prevent this behavior, set the <xref:System.Windows.Forms.DataGridView.MultiSelect%2A> property to `false`.</span></span>

<span data-ttu-id="0e1b9-124">Режимы <xref:System.Windows.Forms.DataGridViewSelectionMode.FullRowSelect> и <xref:System.Windows.Forms.DataGridViewSelectionMode.RowHeaderSelect> позволяют пользователям удалять строки, выбирая их и нажимая клавишу DELETE.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-124">The <xref:System.Windows.Forms.DataGridViewSelectionMode.FullRowSelect> and <xref:System.Windows.Forms.DataGridViewSelectionMode.RowHeaderSelect> modes allow users to delete rows by selecting them and pressing the DELETE key.</span></span> <span data-ttu-id="0e1b9-125">Пользователи могут удалять строки только в том случае, если текущая ячейка не находится в режиме редактирования, свойство <xref:System.Windows.Forms.DataGridView.AllowUserToDeleteRows%2A> имеет значение `true`, а базовый источник данных поддерживает удаленное пользователем удаление строк.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-125">Users can delete rows only when the current cell is not in edit mode, the <xref:System.Windows.Forms.DataGridView.AllowUserToDeleteRows%2A> property is set to `true`, and the underlying data source supports user-driven row deletion.</span></span> <span data-ttu-id="0e1b9-126">Обратите внимание, что эти параметры не предотвращают удаление программных строк.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-126">Note that these settings do not prevent programmatic row deletion.</span></span>

## <a name="programmatic-selection"></a><span data-ttu-id="0e1b9-127">Программный выбор</span><span class="sxs-lookup"><span data-stu-id="0e1b9-127">Programmatic Selection</span></span>

<span data-ttu-id="0e1b9-128">Текущий режим выделения ограничит поведение программного выделения, а также выбор пользователя.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-128">The current selection mode restricts the behavior of programmatic selection as well as user selection.</span></span> <span data-ttu-id="0e1b9-129">Текущий выбор можно изменить программным путем, установив свойство `Selected` любых ячеек, строк или столбцов, имеющихся в элементе управления <xref:System.Windows.Forms.DataGridView>.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-129">You can change the current selection programmatically by setting the `Selected` property of any cells, rows, or columns present in the <xref:System.Windows.Forms.DataGridView> control.</span></span> <span data-ttu-id="0e1b9-130">Можно также выбрать все ячейки в элементе управления с помощью метода <xref:System.Windows.Forms.DataGridView.SelectAll%2A>, в зависимости от режима выбора.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-130">You can also select all cells in the control through the <xref:System.Windows.Forms.DataGridView.SelectAll%2A> method, depending on the selection mode.</span></span> <span data-ttu-id="0e1b9-131">Чтобы очистить выбор, используйте метод <xref:System.Windows.Forms.DataGridView.ClearSelection%2A>.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-131">To clear the selection, use the <xref:System.Windows.Forms.DataGridView.ClearSelection%2A> method.</span></span>

<span data-ttu-id="0e1b9-132">Если свойство <xref:System.Windows.Forms.DataGridView.MultiSelect%2A> имеет значение `true`, можно добавить элементы <xref:System.Windows.Forms.DataGridView> или удалить их из выделения, изменив свойство `Selected` элемента.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-132">If the <xref:System.Windows.Forms.DataGridView.MultiSelect%2A> property is set to `true`, you can add <xref:System.Windows.Forms.DataGridView> elements to or remove them from the selection by changing the `Selected` property of the element.</span></span> <span data-ttu-id="0e1b9-133">В противном случае при установке свойства `Selected` в значение `true` для одного элемента автоматически удаляются другие элементы из выбора.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-133">Otherwise, setting the `Selected` property to `true` for one element automatically removes other elements from the selection.</span></span>

<span data-ttu-id="0e1b9-134">Обратите внимание, что изменение значения свойства <xref:System.Windows.Forms.DataGridView.CurrentCell%2A> не приводит к изменению текущего выделения.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-134">Note that changing the value of the <xref:System.Windows.Forms.DataGridView.CurrentCell%2A> property does not alter the current selection.</span></span>

<span data-ttu-id="0e1b9-135">Коллекцию выбранных в данный момент ячеек, строк или столбцов можно получить с помощью свойств <xref:System.Windows.Forms.DataGridView.SelectedCells%2A>, <xref:System.Windows.Forms.DataGridView.SelectedRows%2A>и <xref:System.Windows.Forms.DataGridView.SelectedColumns%2A> элемента управления <xref:System.Windows.Forms.DataGridView>.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-135">You can retrieve a collection of the currently selected cells, rows, or columns through the <xref:System.Windows.Forms.DataGridView.SelectedCells%2A>, <xref:System.Windows.Forms.DataGridView.SelectedRows%2A>, and <xref:System.Windows.Forms.DataGridView.SelectedColumns%2A> properties of the <xref:System.Windows.Forms.DataGridView> control.</span></span> <span data-ttu-id="0e1b9-136">Доступ к этим свойствам неэффективен, если выбрана каждая ячейка в элементе управления.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-136">Accessing these properties is inefficient when every cell in the control is selected.</span></span> <span data-ttu-id="0e1b9-137">Чтобы избежать снижения производительности в этом случае, сначала используйте метод <xref:System.Windows.Forms.DataGridView.AreAllCellsSelected%2A>.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-137">To avoid a performance penalty in this case, use the <xref:System.Windows.Forms.DataGridView.AreAllCellsSelected%2A> method first.</span></span> <span data-ttu-id="0e1b9-138">Кроме того, доступ к этим коллекциям для определения количества выбранных ячеек, строк или столбцов может быть неэффективным.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-138">Additionally, accessing these collections to determine the number of selected cells, rows, or columns can be inefficient.</span></span> <span data-ttu-id="0e1b9-139">Вместо этого следует использовать метод <xref:System.Windows.Forms.DataGridView.GetCellCount%2A>, <xref:System.Windows.Forms.DataGridViewRowCollection.GetRowCount%2A>или <xref:System.Windows.Forms.DataGridViewColumnCollection.GetColumnCount%2A>, передав значение <xref:System.Windows.Forms.DataGridViewElementStates.Selected>.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-139">Instead, you should use the <xref:System.Windows.Forms.DataGridView.GetCellCount%2A>, <xref:System.Windows.Forms.DataGridViewRowCollection.GetRowCount%2A>, or <xref:System.Windows.Forms.DataGridViewColumnCollection.GetColumnCount%2A> method, passing in the <xref:System.Windows.Forms.DataGridViewElementStates.Selected> value.</span></span>

> [!TIP]
> <span data-ttu-id="0e1b9-140">Пример кода, демонстрирующий программное использование выбранных ячеек, можно найти в обзоре класса <xref:System.Windows.Forms.DataGridView>.</span><span class="sxs-lookup"><span data-stu-id="0e1b9-140">Example code that demonstrates the programmatic use of selected cells can be found in the <xref:System.Windows.Forms.DataGridView> class overview.</span></span>

## <a name="see-also"></a><span data-ttu-id="0e1b9-141">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="0e1b9-141">See also</span></span>

- <xref:System.Windows.Forms.DataGridView>
- <xref:System.Windows.Forms.DataGridView.MultiSelect%2A>
- <xref:System.Windows.Forms.DataGridView.SelectionMode%2A>
- <xref:System.Windows.Forms.DataGridViewSelectionMode>
- [<span data-ttu-id="0e1b9-142">Выделение данных и операции с буфером обмена в элементе управления DataGridView в Windows Forms</span><span class="sxs-lookup"><span data-stu-id="0e1b9-142">Selection and Clipboard Use with the Windows Forms DataGridView Control</span></span>](selection-and-clipboard-use-with-the-windows-forms-datagridview-control.md)
- [<span data-ttu-id="0e1b9-143">Практическое руководство. Определение режима выделения для элемента управления DataGridView в Windows Forms</span><span class="sxs-lookup"><span data-stu-id="0e1b9-143">How to: Set the Selection Mode of the Windows Forms DataGridView Control</span></span>](how-to-set-the-selection-mode-of-the-windows-forms-datagridview-control.md)
