---
title: Пошаговое руководство. Отладка пользовательских элементов управления Windows Forms во время разработки
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- debugging [Visual Studio], walkthroughs
- custom controls [Windows Forms], walkthroughs
- visual editors
- debugging [Visual Studio], Windows Forms
- custom controls [Windows Forms], debugging
- designers
- controls [Windows Forms], debugging
- walkthroughs [Windows Forms], debugging
- design-time debugging
ms.assetid: 1fd83ccd-3798-42fc-85a3-6cba99467387
ms.openlocfilehash: 39adcbd6d915f8b086df7e425efbe08ae8680a45
ms.sourcegitcommit: c4e9d05644c9cb89de5ce6002723de107ea2e2c4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/19/2019
ms.locfileid: "65882464"
---
# <a name="walkthrough-debugging-custom-windows-forms-controls-at-design-time"></a>Пошаговое руководство. Отладка пользовательских элементов управления Windows Forms во время разработки

При создании пользовательского элемента управления, вам будет часто понадобиться для отладки его поведение во время разработки. Это особенно верно в случае, если вы создаете пользовательский конструктор для элемента управления. Дополнительные сведения см. в разделе [Пошаговое руководство: Создание Windows Forms элемент управления, который использует преимущества средств разработки Visual Studio](creating-a-wf-control-design-time-features.md).

Можно выполнять отладку пользовательских элементов управления с помощью Visual Studio, так же, как отладка любого других классов .NET Framework. Разница заключается в том, что необходимо отладить отдельный экземпляр Visual Studio, на котором выполняется код настраиваемого элемента управления

В данном пошаговом руководстве представлены следующие задачи.

- Создание проекта Windows Forms для размещения пользовательского элемента управления

- Создание проекта библиотеки элементов управления

- Добавление свойства в элемент управления

- Добавление элемента управления в форму

- Настройка проекта для отладки во время разработки

- Отладка пользовательского элемента управления во время разработки

Когда вы закончите, вы получите представление о задачи, необходимые для отладки поведения времени разработки пользовательского элемента управления.

## <a name="create-the-project"></a>Создание проекта

Первым шагом является создание проекта приложения. Этот проект будет использован для построения приложения, на котором размещается пользовательский элемент управления.

В Visual Studio создайте проект приложения Windows с именем «DebuggingExample» (**файл** > **New** > **проекта**  >  **Visual C#**  или **Visual Basic** > **классический рабочий стол** > **Windows Forms Application**).

## <a name="create-the-control-library-project"></a>Создание проекта библиотеки элементов управления

1. Добавить **Windows Control Library** проекта к решению.

2. Добавьте новый **UserControl** DebugControlLibrary проект. Подробную информацию см. в разделе [Практическое руководство. Добавление новых элементов проекта](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/w0572c5b(v=vs.100)). Предоставить новый исходный файл «DebugControl» базовым именем.

3. С помощью **обозревателе решений**, удалите элемент управления проекта по умолчанию путем удаления файла с базовым именем "`UserControl1`«. Подробную информацию см. в разделе [Практическое руководство. Удалить, удаление и исключить элементы](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/0ebzhwsk(v=vs.100)).

4. Постройте решение.

## <a name="checkpoint"></a>Контрольная точка

На этом этапе вы сможете для пользовательского элемента управления в см. в разделе **элементов**.

Чтобы проверить ход, найдите новый вкладку с именем **компоненты DebugControlLibrary** и установите его. Когда она откроется, вы увидите в списке управления **DebugControl** со значком по умолчанию.

## <a name="add-a-property-to-your-custom-control"></a>Добавление свойства в элемент управления

Чтобы продемонстрировать, выполнение кода пользовательского элемента управления во время разработки, будет добавить свойство и установите точку останова в коде, который реализует свойство.

1. Откройте **DebugControl** в **редактор кода**. Добавьте следующий код в определение класса:

    ```vb
    Private demoStringValue As String = Nothing
    <BrowsableAttribute(true)>
    Public Property DemoString() As String

        Get
            Return Me.demoStringValue
        End Get

        Set(ByVal value As String)
            Me.demoStringValue = value
        End Set

    End Property
    ```

    ```csharp
    private string demoStringValue = null;
    [Browsable(true)]
    public string DemoString
    {
        get
        {
            return this.demoStringValue;
        }
        set
        {
            demoStringValue = value;
        }
    }
    ```

2. Постройте решение.

## <a name="add-your-custom-control-to-the-host-form"></a>Добавление пользовательского элемента управления в форму

Для отладки поведения времени разработки пользовательского элемента управления, поместите экземпляр класса пользовательского элемента управления в форму.

1. В проекте «DebuggingExample», откройте форму Form1 в **конструктор Windows Forms**.

2. В **элементов**откройте **компоненты DebugControlLibrary** вкладку и перетащите **DebugControl** экземпляра на форму.

3. Найти `DemoString` пользовательское свойство в **свойства** окна. Обратите внимание на то, что его значение можно изменить, как любое другое свойство. Также Обратите внимание, что при `DemoString` было выбрано свойство, строка описания свойства отображается в нижней части **свойства** окна.

## <a name="set-up-the-project-for-design-time-debugging"></a>Настройка проекта для отладки во время разработки

Для отладки поведения пользовательского элемента управления во время разработки, необходимо отладить отдельный экземпляр Visual Studio, на котором выполняется код настраиваемого элемента управления.

1. Щелкните правой кнопкой мыши **DebugControlLibrary** в проекте **обозревателе решений** и выберите **свойства**.

2. В **DebugControlLibrary** свойств, выберите **Отладка** вкладки.

     В **действие при запуске** выберите **запуск внешней программы**. Вы будете отладка отдельного экземпляра Visual Studio, поэтому нажмите кнопку с многоточием (![кнопку с многоточием (...) в окне свойств Visual Studio.](./media/visual-studio-ellipsis-button.png)) чтобы перейти в интегрированной среде разработки Visual Studio. Имя исполняемого файла — **devenv.exe**, и если вы установили в расположение по умолчанию, его путь — 9.0\Common7\IDE\devenv.exe %programfiles%\Microsoft Visual Studio.

3. Нажмите кнопку **ОК**, чтобы закрыть диалоговое окно.

4. Щелкните правой кнопкой мыши **DebugControlLibrary** проекта и выберите **Назначить запускаемым проектом** включить конфигурацию отладки.

## <a name="debug-your-custom-control-at-design-time"></a>Отладка пользовательского элемента управления во время разработки

Теперь вы готовы к отладке пользовательского элемента управления в режиме конструктора. При запуске сеанса отладки, будет создан новый экземпляр Visual Studio, и он будет использоваться для загрузки решения «DebuggingExample». При открытии Form1 в **конструктор форм**, экземпляр пользовательского элемента управления будет создан и запущен.

1. Откройте **DebugControl** исходный файл в **редактор кода** и поместите точку останова на `Set` метод доступа `DemoString` свойство.

2. Нажмите клавишу F5, чтобы запустить сеанс отладки. Обратите внимание на то, что создается новый экземпляр Visual Studio. Может различать экземпляры двумя способами:

    - Экземпляр отладки имеет слово **под управлением** в заголовке окна

    - У экземпляра отладки **запустить** кнопку на его **Отладка** инструментов отключена

     Точка останова устанавливается в экземпляре отладки.

3. В новом экземпляре Visual Studio откройте решение «DebuggingExample». Решение можно легко найти, выбрав **последние проекты** из **файл** меню. Файл решения «DebuggingExample.sln» отображаются как последних использовавшихся файлов.

4. Откройте форму Form1 в **конструктор форм** и выберите **DebugControl** элемента управления.

5. Измените значение свойства `DemoString` . Обратите внимание, что при фиксации изменений, отладочный экземпляр Visual Studio получает фокус, и выполнение остановится в точке останова. Вы можете пошагово выполнить метод доступа к свойству так же, как к любой другой код.

6. Когда вы закончите с сеанс отладки, можно выйти из закрыв второй экземпляр Visual Studio или щелкнув **остановить отладку** кнопки в экземпляре отладки.

## <a name="next-steps"></a>Следующие шаги

Теперь, когда можно отлаживать пользовательские элементы управления во время разработки, существует множество возможностей для расширения взаимодействия элемента управления с помощью Visual Studio IDE.

- Можно использовать <xref:System.ComponentModel.Component.DesignMode%2A> свойство <xref:System.ComponentModel.Component> для написания кода, который будет выполняться только во время разработки. Дополнительные сведения см. в разделе <xref:System.ComponentModel.Component.DesignMode%2A>.

- Существует несколько атрибутов можно применить к свойствам элемента управления для управления взаимодействием элемента управления с помощью конструктора. Вы найдете эти атрибуты в <xref:System.ComponentModel?displayProperty=nameWithType> пространства имен.

- Можно написать пользовательский конструктор для элемента управления. Это дает полный контроль над разработкой с помощью расширяемой инфраструктуры конструкторов в Visual Studio. Дополнительные сведения см. в разделе [Пошаговое руководство: Создание Windows Forms элемент управления, который использует преимущества средств разработки Visual Studio](creating-a-wf-control-design-time-features.md).

## <a name="see-also"></a>См. также

- [Пошаговое руководство: Создание элемента управления Windows Forms, используются преимущества функций Visual Studio во время разработки](creating-a-wf-control-design-time-features.md)
- [Практическое руководство. Доступа к службам времени разработки](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/ms171822(v=vs.120))
- [Практическое руководство. Поддержка разработки доступа в Windows Forms](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/ms171827(v=vs.120))
