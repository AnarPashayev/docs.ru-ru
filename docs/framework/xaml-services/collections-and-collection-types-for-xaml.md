---
title: Коллекции и типы коллекций для XAML
ms.date: 03/30/2017
ms.assetid: 58f8e7c6-9a41-4f25-8551-c042f1315baa
ms.openlocfilehash: 63f6346837f77dbdbdcb4a90ec5af725be69ee02
ms.sourcegitcommit: 30a83efb57c468da74e9e218de26cf88d3254597
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/20/2019
ms.locfileid: "68364335"
---
# <a name="collections-and-collection-types-for-xaml"></a>Коллекции и типы коллекций для XAML

В этом разделе описывается определение свойств типов, предназначенных для поддержки коллекции, и поддержка синтаксиса XAML для создания экземпляров элементов сбора в виде дочерних элементов родительского элемента объекта или элемента свойства.

## <a name="xaml-collection-concepts"></a>Основные понятия коллекции XAML

По сути, любая связь в XAML, где существует несколько дочерних элементов в области объекта XAML или элемента свойства XAML, должна быть реализована как коллекция. Эта коллекция должна быть связана с определенным свойством XAML типа XAML, который является родительским в этой связи. Свойство должно быть коллекцией, так как обработчик XAML должен назначить каждый элемент в разметке только что добавленным элементом свойства резервной коллекции.

На уровне языка XAML точные требования к поддержке коллекций не определены полностью. Понятие, в котором коллекция может быть либо списком, либо словарем (но не обоими), определяется на уровне языка XAML, но типы резервных типов представляют либо списки, либо словари, не определенные языком XAML.

В .NET Framework службах XAML концепция поддержки коллекций XAML более четко определена с точки зрения .NET Framework типов резервных копий. В частности, поддержка XAML для коллекций основана на нескольких .NET Framework основных понятиях и интерфейсах API, которые используются для списков и словарей в общем .NET Framework программировании.

1. <xref:System.Collections.IList> Интерфейс указывает коллекцию списков.

2. <xref:System.Collections.IDictionary> Интерфейс указывает на коллекцию словарей.

3. <xref:System.Array>представляет массив, а массив поддерживает <xref:System.Collections.IList> методы.

В каждом из этих концепций коллекции .NET Framework обработчик XAML служб XAML должен вызвать `Add` метод для конкретного экземпляра типа свойства коллекции. Или в сценарии сериализации обработчик XAML создает дискретные экземпляры типа XAML для каждого элемента, найденного в списке, словаре или массиве, основываясь на конкретной концепции "Items" каждой коллекции. Это: <xref:System.Collections.IList.Item%2A>; <xref:System.Collections.IDictionary.Item%2A>; явно<xref:System.Array.System%23Collections%23IList%23Item%2A> для .<xref:System.Array>

## <a name="generic-collections"></a>Универсальные коллекции

Универсальные коллекции могут быть полезны для общего .NET Framework программирования и также могут использоваться для свойств коллекции XAML. Однако универсальные интерфейсы <xref:System.Collections.Generic.IList%601> и <xref:System.Collections.Generic.IDictionary%602> не определяются .NET Framework обработчики XAML служб XAML в качестве эквивалента неуниверсальному <xref:System.Collections.IList> типу или <xref:System.Collections.IDictionary>. Вместо реализации интерфейсов рекомендуемым подходом для универсальных типов свойств коллекции является наследование от классов <xref:System.Collections.Generic.List%601> или. <xref:System.Collections.Generic.Dictionary%602> Эти классы реализуют неуниверсальные интерфейсы и, таким образом, включают в себя ожидаемую поддержку коллекций XAML в базовой реализации.

## <a name="read-only-collections-and-initialization-logic"></a>Коллекции только для чтения и логика инициализации

В .NET Framework программировании это распространенный шаблон проектирования, позволяющий сделать любое свойство, содержащее значение коллекции, в качестве коллекции только для чтения. Этот шаблон позволяет экземпляру, владеющему свойством коллекции, лучше контролировать то, что происходит с коллекцией. В частности, шаблон предотвращает случайную замену всей уже существующей коллекции, задавая свойство. В этом шаблоне любой доступ к коллекции с помощью вызывающих объектов должен осуществляться вызовом методов или свойств, которые поддерживаются типом коллекции и (или) соответствующими интерфейсами коллекции, <xref:System.Collections.IList>такими как.

Использование этого шаблона означает, что любой класс, предоставляющий доступ к свойству коллекции только для чтения, должен сначала инициализировать это свойство для хранения пустой коллекции. Обычно инициализация выполняется как часть поведения построения для класса. Чтобы быть полезным для XAML, важно, чтобы на такую логику всегда ссылался конструктор без параметров, поскольку XAML обычно вызывает конструктор без параметров до обработки свойств (свойств коллекции или иным образом).

## <a name="xaml-type-system-support-and-collections"></a>Поддержка системы типов XAML и коллекции

Помимо базового механизма синтаксического анализа кода XAML и заполнения или сериализации свойств коллекции, система типов XAML, реализованная в .NET Framework служб XAML, включает в себя несколько функций проектирования, относящихся к коллекциям в XAML.

1. <xref:System.Xaml.XamlType.IsCollection%2A>Возвращает значение true, если тип XAML поддерживается типом, предоставляющим поддержку коллекции XAML.

2. <xref:System.Xaml.XamlType.IsDictionary%2A>Кроме <xref:System.Xaml.XamlType.IsArray%2A> того, может быть дополнительно определен режим сбора, поддерживаемый типом XAML. Для пользовательских обработчиков XAML, основанных на .NET Framework службах XAML и системе типов XAML, но не основанной на существующих <xref:System.Xaml.XamlWriter> реализациях, знание режима коллекции может быть необходимым для того, чтобы узнать, какой метод вызывать для обработка коллекции.

3. <xref:System.Xaml.XamlType.LookupCollectionKind%2A> На каждое из предыдущих значений свойств потенциально влияют переопределения типа XAML.
