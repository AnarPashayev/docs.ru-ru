---
title: Обработка пробелов в XAML
ms.date: 03/30/2017
helpviewer_keywords:
- East Asian characters [XAML Services]
- XAML [XAML Services], white-space processing
- white-space processing in XAML [XAML Services]
- characters [XAML Services], East Asian
ms.assetid: cc9cc377-7544-4fd0-b65b-117b90bb0b23
ms.openlocfilehash: 81d8cdb8d2dfc593d37322b70c070bc0b9f10b25
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "64659689"
---
# <a name="white-space-processing-in-xaml"></a>Обработка пробелов в XAML
Состояние согласно правилам языка XAML, значащим пробелом должны обрабатываться [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] реализации обработчика. В этом разделе описываются эти правила языка XAML. Здесь также описывается обработка дополнительных пробелов, определяемое [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] реализация обработчика XAML и записи XAML для сериализации.  
  
<a name="whitespace_definition"></a>   
## <a name="white-space-definition"></a>Определение пробела  
 Соответствует [!INCLUDE[TLA2#tla_xml](../../../includes/tla2sharptla-xml-md.md)], символы-разделители в [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] являются пространство, табуляции и перевода строки. Это значения [!INCLUDE[TLA#tla_unicode](../../../includes/tlasharptla-unicode-md.md)] 0020, 000A и 0009 соответственно.  
  
<a name="whitespace_normalization"></a>   
## <a name="white-space-normalization"></a>Нормализация пробелов  
 По умолчанию выполняется следующая нормализации пробелов при [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] процессора процессы [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] файла:  
  
1. Символы перевода строки между восточно-азиатскими символами удаляются. Определение этого термина см. в разделе "Символы восточно-азиатских языков" далее.  
  
2. Все символы пробелов (пробел, перевод строки, вкладке) преобразуются в пробелы.  
  
3. Все последовательные пробелы удаляются и заменяется одним пробелом.  
  
4. Пробел после открывающего тега удаляется.  
  
5. Пробел перед закрывающим тегом удаляется.  
  
 "Default" соответствует состоянию, обозначаемому значением атрибута [XML: space](xml-space-handling-in-xaml.md) по умолчанию.  
  
<a name="whitespace_in_inner_text_and_string_primitives"></a>   
## <a name="white-space-in-inner-text-and-string-primitives"></a>Пустое пространство в внутреннем тексте и строковые примитивы  
 Приведенные выше правила нормализации применяются к тексту внутри элементов XAML. После нормализации обработчик XAML преобразует любой внутренний текст в соответствующий тип следующим образом.  
  
- Если тип свойства не является коллекцией и типом <xref:System.Object> , обработчик XAML попытается преобразовать его в этот тип, используя преобразователь типов. Неудачное преобразование приводит к ошибке во время компиляции.  
  
- Если тип свойства — это коллекция, а внутренний текст не прерывается (не содержит промежуточных тегов элементов), внутренний текст анализируется как один <xref:System.String>. Если тип коллекции не может принять <xref:System.String>, это также приводит к ошибке во время компиляции.  
  
- Если тип свойства — <xref:System.Object>, внутренний текст анализируется как один <xref:System.String>. Если существуют промежуточные теги элементов, это приводит к ошибке во время компиляции, поскольку <xref:System.Object> подразумевает один объект (<xref:System.String> или другой).  
  
- Если тип свойства — коллекция, а внутренний текст прерывается, первая подстрока преобразуется в <xref:System.String> и добавляется как элемент коллекции, затем промежуточный элемент добавляется как элемент коллекции, и, наконец, конечная подстрока (если таковая имеется) добавляется в коллекцию как третий элемент <xref:System.String> .  
  
<a name="preserving_whitespace"></a>   
## <a name="preserving-white-space"></a>Сохранения пробелов  
 Существует несколько методов для сохранения пробелов в источнике [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] окончательное представление, не затрагиваются [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] нормализации пробелов обработчиком.  
  
 **xml:space="preserve"**: Укажите этот атрибут на уровне элемента, где требуется сохранение пробелов. При этом сохраняются все пробелы, включая те, что могут быть добавлены приложениями редактирования кода для выравнивания элементов и улучшения визуального восприятия. Однако то, отображаются ли эти пробелы, определяется моделью контента элемента. Старайтесь не использовать `xml:space="preserve"` на корневом уровне, так как большинство объектных моделей не рассматривает белый пространство как существенные, независимо от значения атрибута. Глобальная установка `xml:space` может отрицательно повлиять на производительность обработки XAML (в частности, на сериализацию) в некоторых реализациях. Это лучше все-таки только установить атрибут на уровне элементов, отображения пробелы внутри строки или представляющих коллекции значащих пробелов.  
  
 **Сущности и неразрывные пробелы**: [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] поддерживает размещение любой сущности [!INCLUDE[TLA#tla_unicode](../../../includes/tlasharptla-unicode-md.md)] в модели объектов текста. Вы можете использовать выделенные сущности, такие как неразрывный пробел (&\#160; в кодировке UTF-8). Можно также использовать элементы управления форматированным текстом, поддерживающие неразрывные пробелы. Следует соблюдать осторожность при использовании сущностей для имитации характеристики разметки, таких как отступы, поскольку выходные данные сущностей во время выполнения зависят от множества факторов, при этом возможности формирования получения отступов в типичной системе разметки, например правильное использование панелей и полей, ограничены. Например, сущности сопоставляются со шрифтами и могут изменять размер после выбора шрифта пользователем.  
  
<a name="east_asian_characters"></a>   
## <a name="east-asian-characters"></a>Символы восточно-азиатских языков  
 "Символы восточно-азиатских языков" определяется как набор символов [!INCLUDE[TLA2#tla_unicode](../../../includes/tla2sharptla-unicode-md.md)] в диапазоне от U+20000 до U+2FFFD и от U+30000 до U+3FFFD. Это подмножество также иногда называют "CJK-иероглифами". Дополнительные сведения см. в разделе <https://www.unicode.org>.  
  
<a name="whitespace_and_text_content_models"></a>   
## <a name="white-space-and-text-content-models"></a>Пробелы и модели текстового содержимого  
 На практике оставляя пустое пространство возникает только для подмножества всех возможных модели содержимого. Это подмножество состоит из моделей содержимого, которые могут принимать одноэлементный тип <xref:System.String> в определенной форме, выделенную коллекцию <xref:System.String> или сочетание <xref:System.String> и других типов в коллекции <xref:System.Collections.IList> или <xref:System.Collections.Generic.ICollection%601> .  
  
### <a name="white-space-and-text-content-models-in-wpf"></a>Пробелы и модели текстового содержимого в WPF  
 Для наглядности оставшаяся часть этого подраздела ссылается на конкретные типы, определенные в WPF. Функции обработки пробелов, описанные в этом разделе, обычно относятся к службами XAML .NET Framework и WPF. Чтобы увидеть это в действии, можно поэкспериментировать с некоторой разметкой WPF XAML, просмотреть результаты в графе объектов и снова сериализовать их в разметку.  
  
 Даже для моделей содержимого, которые могут принимать строки, поведение по умолчанию в этих моделях содержимого — это любой пробел, который остается, не рассматривается как значащий. Например <xref:System.Windows.Controls.ListBox> принимает <xref:System.Collections.IList>, но пробелы (такие как символ перевода строки между каждым <xref:System.Windows.Controls.ListBoxItem>) не сохраняются и не отображаются. Попытка использовать символ перевода строки в качестве разделителей между строками для элементов <xref:System.Windows.Controls.ListBoxItem> вообще не даст результатов. Строки, разделенные символами перевода строки, считаются одной строкой и одним элементом.  
  
 Коллекции, которые обрабатывают пробелы как значащие, обычно являются частью модели потокового документа. Основная коллекция, поддерживающая Сохранение пробелов поведение является <xref:System.Windows.Documents.InlineCollection>. Этот класс коллекции объявлен с <xref:System.Windows.Markup.WhitespaceSignificantCollectionAttribute>; при обнаружении этого атрибута, [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] процессор обрабатывает пробелы в коллекции как значащие. Сочетание `xml:space="preserve"` и пробелы в <xref:System.Windows.Markup.WhitespaceSignificantCollectionAttribute> обозначается коллекция доступна, что все пробелы сохраняются и отображаются. Сочетание `xml:space="default"` и пробелы в <xref:System.Windows.Markup.WhitespaceSignificantCollectionAttribute> приводит к начальной нормализации пробелов, как описано ранее, которой один пробел в определенных позициях, после чего эти пробелы будут сохранены и показаны. Предпочтительное для вас поведение выбираете вы. Следует выборочно использовать `xml:space` , чтобы включить желаемое поведение.  
  
 Кроме того некоторые встроенные элементы, которые разрыву строки в модели потокового документа намеренно не должны отображать лишние пробелы даже в коллекции значительных пробелов. Например <xref:System.Windows.Documents.LineBreak> элемент имеет ту же функцию, что \<BR / > тегом [!INCLUDE[TLA2#tla_html](../../../includes/tla2sharptla-html-md.md)]и для удобства чтения в разметке, обычно <xref:System.Windows.Documents.LineBreak> отделяется от любого последующего текста созданные перевода строки. Этот символ не следует нормализовать, чтобы он не стал начальным пробелом в следующей строке. Чтобы включить это поведение, в определении класса для <xref:System.Windows.Documents.LineBreak> элемент применяется <xref:System.Windows.Markup.TrimSurroundingWhitespaceAttribute>, который затем интерпретируется [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] процессора, чтобы пробелы вокруг <xref:System.Windows.Documents.LineBreak> всегда отсекались.  
  
## <a name="see-also"></a>См. также

- [Обзор XAML (WPF)](../wpf/advanced/xaml-overview-wpf.md)
- [Сущности знаков XML и XAML](xml-character-entities-and-xaml.md)
- [XML: space в XAML](xml-space-handling-in-xaml.md)
