---
title: Атрибут x:Shared
ms.date: 03/30/2017
helpviewer_keywords:
- XAML [XAML Services], x:Shared attribute
- x:Shared attribute [XAML Services]
- Shared attribute in XAML [XAML Services]
ms.assetid: c8cff434-2785-405f-9f95-16deb34c9e64
ms.openlocfilehash: c820a9b1d9708e24b1460378199a6addc1e20899
ms.sourcegitcommit: 944ddc52b7f2632f30c668815f92b378efd38eea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/03/2019
ms.locfileid: "73459925"
---
# <a name="xshared-attribute"></a><span data-ttu-id="b4c0e-102">Атрибут x:Shared</span><span class="sxs-lookup"><span data-stu-id="b4c0e-102">x:Shared Attribute</span></span>
<span data-ttu-id="b4c0e-103">Если задано значение `false`, изменяет поведение извлечения ресурсов WPF, чтобы запросы к ресурсу с атрибутами создали новый экземпляр для каждого запроса вместо того, чтобы совместно использовать один и тот же экземпляр для всех запросов.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-103">When set to `false`, modifies WPF resource-retrieval behavior so that requests for the attributed resource create a new instance for each request instead of sharing the same instance for all requests.</span></span>  
  
## <a name="xaml-attribute-usage"></a><span data-ttu-id="b4c0e-104">Использование атрибута XAML</span><span class="sxs-lookup"><span data-stu-id="b4c0e-104">XAML Attribute Usage</span></span>  
  
```xaml  
<ResourceDictionary>  
  <object x:Shared="false".../>  
</ResourceDictionary>  
```  
  
## <a name="remarks"></a><span data-ttu-id="b4c0e-105">Заметки</span><span class="sxs-lookup"><span data-stu-id="b4c0e-105">Remarks</span></span>  
 <span data-ttu-id="b4c0e-106">`x:Shared` сопоставляется с пространством имен XAML языка XAML и распознается как допустимый элемент языка XAML путем .NET Framework служб XAML и его средств чтения XAML.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-106">`x:Shared` is mapped to the XAML language XAML namespace and is recognized as a valid XAML language element by .NET Framework XAML Services and its XAML readers.</span></span> <span data-ttu-id="b4c0e-107">Однако указанные возможности `x:Shared` применимы только для приложений WPF и средства синтаксического анализа XAML WPF.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-107">However, the stated capabilities of `x:Shared` are only relevant for WPF applications and for the WPF XAML parser.</span></span> <span data-ttu-id="b4c0e-108">В WPF `x:Shared` используется только в качестве атрибута, если он применяется к объекту, существующему в <xref:System.Windows.ResourceDictionary>WPF.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-108">In WPF, `x:Shared` is only useful as an attribute when it is applied to an object that exists within a WPF <xref:System.Windows.ResourceDictionary>.</span></span> <span data-ttu-id="b4c0e-109">Другие случаи использования не вызывают исключений синтаксического анализа или других ошибок, но не оказывают никакого влияния.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-109">Other usages do not throw parse exceptions or other errors, but they have no effect.</span></span>  
  
 <span data-ttu-id="b4c0e-110">Значение `x:Shared` не указано в спецификации языка XAML.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-110">The meaning of `x:Shared` is not specified in the XAML language specification.</span></span> <span data-ttu-id="b4c0e-111">Другие реализации XAML, например сборки, основанные на .NET Framework службах XAML, не обязательно предоставляют поддержку общего доступа к ресурсам.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-111">Other XAML implementations, such as those that build on .NET Framework XAML Services, do not necessarily provide resource-sharing support.</span></span> <span data-ttu-id="b4c0e-112">Такие реализации XAML могут обеспечить аналогичное поведение в поддерживающей платформе, которая также используется `x:Shared` значений.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-112">Such XAML implementations could provide similar behavior in the supporting framework that also used `x:Shared` values.</span></span>  
  
 <span data-ttu-id="b4c0e-113">В WPF условием `x:Shared` по умолчанию для ресурсов является `true`.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-113">In WPF, the default `x:Shared` condition for resources is `true`.</span></span> <span data-ttu-id="b4c0e-114">Это условие означает, что любой заданный запрос ресурса всегда возвращает один и тот же экземпляр.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-114">This condition means that any given resource request always returns the same instance.</span></span>  
  
 <span data-ttu-id="b4c0e-115">Изменение объекта, возвращаемого через API ресурсов, например <xref:System.Windows.FrameworkElement.FindResource%2A>или изменение объекта непосредственно в <xref:System.Windows.ResourceDictionary>, изменяет исходный ресурс.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-115">Modifying an object that is returned through a resource API, such as <xref:System.Windows.FrameworkElement.FindResource%2A>, or modifying an object directly within a <xref:System.Windows.ResourceDictionary>, changes the original resource.</span></span> <span data-ttu-id="b4c0e-116">Если ссылки на этот ресурс были динамическими ссылками на ресурсы, потребители этого ресурса получают измененный ресурс.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-116">If references to that resource were dynamic resource references, the consumers of that resource get the changed resource.</span></span>  
  
 <span data-ttu-id="b4c0e-117">Если ссылки на ресурс были ссылками на статические ресурсы, изменения ресурса после [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] времени обработки несущественны.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-117">If references to the resource were static resource references, changes to the resource after [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] processing time are irrelevant.</span></span> <span data-ttu-id="b4c0e-118">Дополнительные сведения о статических и динамических ссылках на ресурс см. в разделе [ресурсы XAML](../../desktop-wpf/fundamentals/xaml-resources-define.md).</span><span class="sxs-lookup"><span data-stu-id="b4c0e-118">For more information about static versus dynamic resource references, see [XAML Resources](../../desktop-wpf/fundamentals/xaml-resources-define.md).</span></span>  
  
 <span data-ttu-id="b4c0e-119">Явное указание `x:Shared="true"` выполняется редко, так как это значение уже используется по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-119">Explicitly specifying `x:Shared="true"` is rarely done, because that is already the default.</span></span> <span data-ttu-id="b4c0e-120">Прямой эквивалент кода для `x:Shared` в объектной модели WPF отсутствует. Он может быть указан только в использовании XAML и должен обрабатываться либо поведением WPF по умолчанию, либо в промежуточном потоке узлов XAML по пути загрузки, если он обрабатывается с помощью .NET Framework служб XAML и его средств чтения XAML.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-120">There is no direct code equivalent for `x:Shared` in the WPF object model; it can only be specified in a XAML usage and must be processed either by the default WPF behavior or in an intermediate XAML node stream on the load path if processed using .NET Framework XAML Services and its XAML readers.</span></span>  
  
 <span data-ttu-id="b4c0e-121">Сценарий для `x:Shared="false"` заключается в том, что в качестве ресурса определяется <xref:System.Windows.FrameworkElement> или <xref:System.Windows.FrameworkContentElement> производный класс, а затем в модель содержимого вводится ресурс элемента.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-121">A scenario for `x:Shared="false"` is if you define a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement> derived class as a resource and then you introduce the element resource into a content model.</span></span> <span data-ttu-id="b4c0e-122">`x:Shared="false"` позволяет вводить ресурс элемента несколько раз в одной коллекции (например, <xref:System.Windows.Controls.UIElementCollection>).</span><span class="sxs-lookup"><span data-stu-id="b4c0e-122">`x:Shared="false"` enables an element resource to be introduced multiple times in the same collection (such as a <xref:System.Windows.Controls.UIElementCollection>).</span></span> <span data-ttu-id="b4c0e-123">Без `x:Shared="false"` это недопустимо, так как коллекция обеспечивает уникальность ее содержимого.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-123">Without `x:Shared="false"` this is invalid because the collection enforces uniqueness of its contents.</span></span> <span data-ttu-id="b4c0e-124">Однако `x:Shared="false"` поведение создает еще один идентичный экземпляр ресурса вместо того, чтобы возвращать тот же экземпляр.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-124">However, the `x:Shared="false"` behavior creates another identical instance of the resource instead of returning the same instance.</span></span>  
  
 <span data-ttu-id="b4c0e-125">Другой сценарий для `x:Shared="false"` — если для значений анимации используется ресурс <xref:System.Windows.Freezable>, но требуется изменить ресурс на основе анимации.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-125">Another scenario for `x:Shared="false"` is if you use a <xref:System.Windows.Freezable> resource for animation values but want to modify the resource on a per animation basis.</span></span>  
  
 <span data-ttu-id="b4c0e-126">Обработка строк `false` не учитывает регистр.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-126">The string handling of `false` is not case sensitive.</span></span>  
  
 <span data-ttu-id="b4c0e-127">В WPF `x:Shared` допустимы только при следующих условиях:</span><span class="sxs-lookup"><span data-stu-id="b4c0e-127">In WPF, `x:Shared` is only valid under the following conditions:</span></span>  
  
- <span data-ttu-id="b4c0e-128"><xref:System.Windows.ResourceDictionary>, содержащий элементы с `x:Shared`, должны быть скомпилированы.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-128">The <xref:System.Windows.ResourceDictionary> that contains the items with `x:Shared` must be compiled.</span></span> <span data-ttu-id="b4c0e-129"><xref:System.Windows.ResourceDictionary> не может находиться в свободном XAML или использоваться для тем.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-129">The <xref:System.Windows.ResourceDictionary> cannot be within loose XAML or used for themes.</span></span>  
  
- <span data-ttu-id="b4c0e-130"><xref:System.Windows.ResourceDictionary>, содержащие элементы, не должны быть вложены в другой <xref:System.Windows.ResourceDictionary>.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-130">The <xref:System.Windows.ResourceDictionary> that contains the items must not be nested within another <xref:System.Windows.ResourceDictionary>.</span></span> <span data-ttu-id="b4c0e-131">Например, нельзя использовать `x:Shared` для элементов в <xref:System.Windows.ResourceDictionary>, находящихся в <xref:System.Windows.Style>, который уже является элементом <xref:System.Windows.ResourceDictionary>.</span><span class="sxs-lookup"><span data-stu-id="b4c0e-131">For example, you cannot use `x:Shared` for items in a <xref:System.Windows.ResourceDictionary> that is within a <xref:System.Windows.Style> that is already a <xref:System.Windows.ResourceDictionary> item.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b4c0e-132">См. также</span><span class="sxs-lookup"><span data-stu-id="b4c0e-132">See also</span></span>

- <xref:System.Windows.ResourceDictionary>
- [<span data-ttu-id="b4c0e-133">Ресурсы XAML</span><span class="sxs-lookup"><span data-stu-id="b4c0e-133">XAML Resources</span></span>](../../desktop-wpf/fundamentals/xaml-resources-define.md)
- [<span data-ttu-id="b4c0e-134">Базовые элементы</span><span class="sxs-lookup"><span data-stu-id="b4c0e-134">Base Elements</span></span>](../wpf/advanced/base-elements.md)
