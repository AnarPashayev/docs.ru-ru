---
title: Соображения безопасности XAML
ms.date: 03/30/2017
helpviewer_keywords:
- security [XAML Services], .NET XAML services
- XAML security [XAML Services]
ms.assetid: 544296d4-f38e-4498-af49-c9f4dad28964
ms.openlocfilehash: 124310497cc2a8e8a816ba90b2c68a16ed342ae6
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61938792"
---
# <a name="xaml-security-considerations"></a><span data-ttu-id="d4f72-102">Соображения безопасности XAML</span><span class="sxs-lookup"><span data-stu-id="d4f72-102">XAML Security Considerations</span></span>
<span data-ttu-id="d4f72-103">В этом разделе описываются рекомендации по обеспечению безопасности в приложениях, при использовании XAML и API служб XAML .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="d4f72-103">This topic describes best practices for security in applications when you use XAML and .NET Framework XAML Services API.</span></span>  
  
## <a name="untrusted-xaml-in-applications"></a><span data-ttu-id="d4f72-104">Недоверенные XAML в приложениях</span><span class="sxs-lookup"><span data-stu-id="d4f72-104">Untrusted XAML in Applications</span></span>  
 <span data-ttu-id="d4f72-105">В самом общем смысле недоверенных XAML является любой источник XAML, который специально не включают и создавать приложения.</span><span class="sxs-lookup"><span data-stu-id="d4f72-105">In the most general sense, untrusted XAML is any XAML source that your application did not specifically include or emit.</span></span>  
  
 <span data-ttu-id="d4f72-106">XAML, который компилируется в или хранятся в виде `resx`-тип ресурса в доверенной и подписанной сборки не является по своей природе без доверия.</span><span class="sxs-lookup"><span data-stu-id="d4f72-106">XAML that is compiled into or stored as a `resx`-type resource within a trusted and signed assembly is not inherently untrusted.</span></span> <span data-ttu-id="d4f72-107">XAML можно доверять настолько, насколько можно доверять сборке в целом.</span><span class="sxs-lookup"><span data-stu-id="d4f72-107">You can trust the XAML as much as you trust the assembly as a whole.</span></span> <span data-ttu-id="d4f72-108">В большинстве случаев вы беспокоитесь только с аспектами управления безопасностью Свободный XAML, который является источником XAML, которые можно загрузить из потока или других операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="d4f72-108">In most cases, you are only concerned with the trust aspects of loose XAML, which is a XAML source that you load from a stream or other I/O.</span></span> <span data-ttu-id="d4f72-109">Свободный XAML не является отдельным компонентом или функцией модели приложения с инфраструктурой развертывания и упаковки.</span><span class="sxs-lookup"><span data-stu-id="d4f72-109">Loose XAML is not a specific component or feature of an application model with a deployment and packaging infrastructure.</span></span> <span data-ttu-id="d4f72-110">Тем не менее сборка может реализовывать поведение, которое включает в себя загрузки свободного XAML.</span><span class="sxs-lookup"><span data-stu-id="d4f72-110">However, an assembly might implement a behavior that involves loading loose XAML.</span></span>  
  
 <span data-ttu-id="d4f72-111">Для ненадежного XAML необходимо рассматривать его обычно же, как если бы он был ненадежного кода.</span><span class="sxs-lookup"><span data-stu-id="d4f72-111">For untrusted XAML, you should treat it generally the same as if it were untrusted code.</span></span> <span data-ttu-id="d4f72-112">Используйте "песочницы" или другие метафоры для предотвращения доступа доверенный код ненадежному XAML.</span><span class="sxs-lookup"><span data-stu-id="d4f72-112">Use sandboxing or other metaphors to prevent possibly untrusted XAML from accessing your trusted code.</span></span>  
  
 <span data-ttu-id="d4f72-113">Характер возможности XAML предоставляет XAML право создавать объекты и задавать их свойства.</span><span class="sxs-lookup"><span data-stu-id="d4f72-113">The nature of XAML capabilities gives the XAML the right to construct objects and set their properties.</span></span> <span data-ttu-id="d4f72-114">Эти возможности также включают доступ к преобразователям типов, сопоставление и доступ к сборкам в домене приложения, с помощью расширения разметки, `x:Code` блоков и т. д.</span><span class="sxs-lookup"><span data-stu-id="d4f72-114">These capabilities also include accessing type converters, mapping and accessing assemblies in the application domain, using markup extensions, `x:Code` blocks, and so on.</span></span>  
  
 <span data-ttu-id="d4f72-115">В дополнение к его возможности языка XAML используется для определения пользовательского интерфейса во многих технологиях.</span><span class="sxs-lookup"><span data-stu-id="d4f72-115">In addition to its language-level capabilities, XAML is used for UI definition in many technologies.</span></span> <span data-ttu-id="d4f72-116">Загрузка ненадежного XAML может означать загрузку вредоносного поддельного пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="d4f72-116">Loading untrusted XAML might mean loading a malicious spoofing UI.</span></span>  
  
## <a name="sharing-context-between-readers-and-writers"></a><span data-ttu-id="d4f72-117">Совместное использование контекста между модулями чтения и записи</span><span class="sxs-lookup"><span data-stu-id="d4f72-117">Sharing Context Between Readers and Writers</span></span>  
 <span data-ttu-id="d4f72-118">Архитектура служб XAML .NET Framework для средства чтения XAML и записи XAML часто требуется предоставление средство чтения XAML в средство записи XAML или общий контекст схемы XAML.</span><span class="sxs-lookup"><span data-stu-id="d4f72-118">The .NET Framework XAML Services architecture for XAML readers and XAML writers often requires sharing a XAML reader to a XAML writer, or a shared XAML schema context.</span></span> <span data-ttu-id="d4f72-119">Совместное использование объектов или контекстов могут быть необходимы, если при написании логики цикла узлов XAML, или предоставление пользовательского путь сохранения.</span><span class="sxs-lookup"><span data-stu-id="d4f72-119">Sharing objects or contexts might be required if you are writing XAML node loop logic, or providing a custom save path.</span></span> <span data-ttu-id="d4f72-120">Его не следует передавать экземпляры средства чтения XAML, контекст схемы XAML не по умолчанию или параметры для классов потоков чтения/записи XAML между кодом недоверенных и доверенных.</span><span class="sxs-lookup"><span data-stu-id="d4f72-120">You should not share XAML reader instances, nondefault XAML schema context, or settings for XAML reader/writer classes between trusted and untrusted code.</span></span>  
  
 <span data-ttu-id="d4f72-121">Для большинства сценариев и операций, включающих объект XAML, написание для резервирования типов на основе CLR можно просто использовать контекст схемы XAML по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="d4f72-121">Most scenarios and operations involving XAML object writing for a CLR-based type backing can just use default XAML schema context.</span></span> <span data-ttu-id="d4f72-122">Контекст схемы XAML по умолчанию явно не содержит параметры, которые может поставить под угрозу полного доверия.</span><span class="sxs-lookup"><span data-stu-id="d4f72-122">The default XAML schema context does not explicitly include settings that could compromise full trust.</span></span> <span data-ttu-id="d4f72-123">Таким образом можно использовать в контексте между надежными и ненадежными компонентами потоков чтения/записи XAML.</span><span class="sxs-lookup"><span data-stu-id="d4f72-123">It is thus safe to share context between trusted and untrusted XAML reader/writer components.</span></span> <span data-ttu-id="d4f72-124">Тем не менее, если это сделать, это по-прежнему рекомендуется помещать такие средства чтения и записи в отдельных <xref:System.AppDomain> областей, одно из них специально назначая/выделяя для частичного доверия.</span><span class="sxs-lookup"><span data-stu-id="d4f72-124">However, if you do this, it is still a best practice to keep such readers and writers in separate <xref:System.AppDomain> scopes, with one of them specifically intended/sandboxed for partial trust.</span></span>  
  
## <a name="xaml-namespaces-and-assembly-trust"></a><span data-ttu-id="d4f72-125">Пространства имен XAML и доверие сборке</span><span class="sxs-lookup"><span data-stu-id="d4f72-125">XAML Namespaces and Assembly Trust</span></span>  
 <span data-ttu-id="d4f72-126">Базовый синтаксис неполное и определение для интерпретации пользовательских сопоставление пространства имен XAML для сборки XAML не различает доверенные и недоверенные сборки, загруженные в домен приложения.</span><span class="sxs-lookup"><span data-stu-id="d4f72-126">The basic unqualified syntax and definition for how XAML interprets a custom XAML namespace mapping to an assembly does not distinguish between a trusted and untrusted assembly as loaded into the application domain.</span></span> <span data-ttu-id="d4f72-127">Таким образом это технически возможно, для ненадежных сборки подделать доверенная сборка предполагаемое сопоставление пространства имен XAML и записать объявленному объекту источник XAML и сведения о свойстве.</span><span class="sxs-lookup"><span data-stu-id="d4f72-127">Thus, it is technically possible for an untrusted assembly to spoof a trusted assembly's intended XAML namespace mapping and capture a XAML source's declared object and property information.</span></span> <span data-ttu-id="d4f72-128">Если у вас есть требования к безопасности, чтобы избежать такой ситуации, предполагаемой сопоставлении пространства имен XAML необходимо создать с помощью одного из следующих способов.</span><span class="sxs-lookup"><span data-stu-id="d4f72-128">If you have security requirements to avoid this situation, your intended XAML namespace mapping should be made using one of the following techniques:</span></span>  
  
- <span data-ttu-id="d4f72-129">Используйте полное имя сборки со строгим именем в любой сопоставлении пространства имен XAML, сделанных приложения XAML.</span><span class="sxs-lookup"><span data-stu-id="d4f72-129">Use a fully qualified assembly name with strong name in any XAML namespace mapping made by your application's XAML.</span></span>  
  
- <span data-ttu-id="d4f72-130">Ограничьте сопоставление фиксированный набор ссылочных сборок, создавая конкретный сборки <xref:System.Xaml.XamlSchemaContext> для вашей XAML читателей и XAML записи объектов.</span><span class="sxs-lookup"><span data-stu-id="d4f72-130">Restrict assembly mapping to a fixed set of reference assemblies, by constructing a specific <xref:System.Xaml.XamlSchemaContext> for your XAML readers and XAML object writers.</span></span> <span data-ttu-id="d4f72-131">См. раздел <xref:System.Xaml.XamlSchemaContext.%23ctor%28System.Collections.Generic.IEnumerable%7BSystem.Reflection.Assembly%7D%29>.</span><span class="sxs-lookup"><span data-stu-id="d4f72-131">See <xref:System.Xaml.XamlSchemaContext.%23ctor%28System.Collections.Generic.IEnumerable%7BSystem.Reflection.Assembly%7D%29>.</span></span>  
  
## <a name="xaml-type-mapping-and-type-system-access"></a><span data-ttu-id="d4f72-132">Сопоставление типов XAML и доступ к системе типов</span><span class="sxs-lookup"><span data-stu-id="d4f72-132">XAML Type Mapping and Type System Access</span></span>  
 <span data-ttu-id="d4f72-133">XAML поддерживает свою собственную систему типов, который во многом похожа на том, как среда CLR реализует базовую систему типов CLR.</span><span class="sxs-lookup"><span data-stu-id="d4f72-133">XAML supports its own type system, which in many ways is a peer to how CLR implements the basic CLR type system.</span></span> <span data-ttu-id="d4f72-134">Тем не менее для определенных аспектов распознавания типов, принимая решения о доверии, о типе, в зависимости от сведений о ее типе, следует обратиться к сведения о типах в CLR резервных типов.</span><span class="sxs-lookup"><span data-stu-id="d4f72-134">However, for certain aspects of type awareness where you are making trust decisions about a type based on its type information, you should defer to the type information in the CLR backing types.</span></span> <span data-ttu-id="d4f72-135">Это обусловлено тем, некоторые специальные возможности создания отчетов системы типов XAML, остаются открытыми виртуальными методами и, следовательно, не полностью в системе управления исходными реализациями служб XAML .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="d4f72-135">This is because some of the specific reporting capabilities of the XAML type system are left open as virtual methods and are therefore, not fully under the control of the original .NET Framework XAML Services implementations.</span></span> <span data-ttu-id="d4f72-136">Эти точки расширения существуют, поскольку система типов XAML является расширяемой, в соответствии с расширяемость сам XAML и его возможных альтернативных стратегий сопоставления типов и поддержкой CLR реализация по умолчанию и контекст схемы XAML по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="d4f72-136">These extensibility points exist because the XAML type system is extensible, to match the extensibility of XAML itself and its possible alternative type-mapping strategies versus the default CLR-backed implementation and default XAML schema context.</span></span> <span data-ttu-id="d4f72-137">Дополнительные сведения см. в разделе заметки, относящиеся к на нескольких свойств <xref:System.Xaml.XamlType> и <xref:System.Xaml.XamlMember>.</span><span class="sxs-lookup"><span data-stu-id="d4f72-137">For more information, see the specific notes on several of the properties of <xref:System.Xaml.XamlType> and <xref:System.Xaml.XamlMember>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d4f72-138">См. также</span><span class="sxs-lookup"><span data-stu-id="d4f72-138">See also</span></span>

- <xref:System.Xaml.Permissions.XamlAccessLevel>
