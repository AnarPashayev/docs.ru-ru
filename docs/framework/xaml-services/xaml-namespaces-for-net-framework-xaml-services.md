---
title: Пространства имен языка XAML для служб .NET Framework XAML
ms.date: 03/30/2017
ms.assetid: e4f15f13-c420-4c1e-aeab-9b6f50212047
ms.openlocfilehash: 11bf5d112c64fb0b942decf7635f02b90a98bdeb
ms.sourcegitcommit: a4f9b754059f0210e29ae0578363a27b9ba84b64
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/05/2019
ms.locfileid: "74837172"
---
# <a name="xaml-namespaces-for-net-framework-xaml-services"></a>Пространства имен языка XAML для служб .NET Framework XAML
Пространство имен XAML — это концепция, которая расширяет определение пространства имен XML. Аналогично пространству имен XML, можно определить пространство имен XAML с помощью атрибута `xmlns` в разметке. Пространства имен XAML также представлены в потоке узлов XAML и других API-интерфейсах служб XAML. В этом разделе определяется понятие пространства имен XAML и описываются способы определения пространств имен XAML и использования контекстов схемы XAML и других аспектов .NET Framework служб XAML.  
  
## <a name="xml-namespace-and-xaml-namespace"></a>Пространство имен XML и пространство имен XAML  
 Пространство имен XAML — это специализированное пространство имен XML, так же как XAML является специализированной формой XML и использует базовую форму XML для его разметки. В разметке пространство имен XAML и его сопоставление объявляются с помощью атрибута `xmlns`, применяемого к элементу. Объявление `xmlns` может быть выполнено с тем же элементом, что и пространство имен XAML. Объявление пространства имен XAML, выполненное для элемента, допустимо для этого элемента, всех атрибутов этого элемента и всех дочерних элементов этого элемента. Атрибуты могут использовать пространства имен XAML, которые не совпадают с элементом, содержащим атрибут, при условии, что само имя атрибута ссылается на префикс как часть имени атрибута в разметке.  
  
 Различие между пространством имен XAML и пространством имен XML заключается в том, что пространство имен XML может использоваться для ссылки на схему или может использоваться для простого различения сущностей. Для XAML типы и члены, используемые в XAML, в конечном итоге должны быть разрешены для резервных типов, а понятия схемы XML не применимы к этой возможности. Пространство имен XAML содержит сведения, которые должны быть доступны контексту схемы XAML для выполнения этого сопоставления типов.  
  
## <a name="xaml-namespace-components"></a>Компоненты пространства имен XAML  
 Определение пространства имен XAML содержит два компонента: префикс и идентификатор. Каждый из этих компонентов имеется в том случае, если пространство имен XAML объявлено в разметке или определено в системе типов XAML.  
  
 Префикс может быть любой строкой, как это разрешено [пространствами имен W3C в спецификации XML 1,0](https://www.w3.org/TR/REC-xml-names/) . По соглашению префиксы обычно являются короткими строками, так как префикс повторяется много раз в обычном файле разметки. Некоторые пространства имен XAML, предназначенные для использования в нескольких реализациях XAML, используют определенные традиционные префиксы. Например, пространство имен XAML языка XAML обычно сопоставляется с префиксом `x`. Можно определить пространство имен XAML по умолчанию, где префикс не задан в определении, но представлен как пустая строка, если определен или запрашивался API служб XAML by.NET Framework. Как правило, пространство имен XAML по умолчанию намеренно выбирается для повышения развернутого в префиксе разметки с помощью технологии, реализующей XAML, и ее сценариев и словари.  
  
 Идентификатор может быть любой строкой, как это разрешено [пространствами имен W3C в спецификации XML 1,0](https://www.w3.org/TR/REC-xml-names/). По соглашению идентификаторы для пространств имен XML или пространств имен XAML часто задаются в виде URI, обычно в виде абсолютного URI с указанием протокола. Часто сведения о версии, определяющие конкретный словарь XAML, подразумеваются как часть строки пути. Пространства имен XAML добавляют дополнительное соглашение об идентификаторах после соглашения об URI XML. Для пространств имен XAML идентификатор передает сведения, необходимые контексту схемы XAML, для разрешения типов, указанных в качестве элементов в этом пространстве имен XAML, или для разрешения атрибутов для членов.  
  
 В целях передачи информации в контекст схемы XAML идентификатор пространства имен XAML может по-прежнему быть в формате URI. Однако в этом случае URI также объявляется как соответствующий идентификатор в определенной сборке или списке сборок. Это делается в сборках путем присвоения сборке <xref:System.Windows.Markup.XmlnsDefinitionAttribute>. Этот метод определения пространства имен XAML и поддержки поведения разрешения типов на основе среды CLR в сборке с атрибутами поддерживается контекстом схемы XAML по умолчанию в .NET Framework службах XAML. В общем случае это соглашение можно использовать в случаях, когда контекст схемы XAML включает среду CLR или основан на контексте схемы XAML по умолчанию, который необходим для чтения атрибутов CLR из сборок CLR.  
  
 Пространства имен XAML также можно идентифицировать по соглашению, которое передает пространство имен CLR и сборку, определяющую тип. Это соглашение используется в случаях, когда в сборках, содержащих типы, не существует <xref:System.Windows.Markup.XmlnsDefinitionAttribute> соотнесений. Это соглашение потенциально сложнее, чем соглашение об универсальном коде ресурса (URI), а также может привести к неоднозначности и дублированию, поскольку существует несколько способов обращения к сборке.  
  
 Самая простая форма идентификатора, использующего пространство имен CLR и соглашение о сборке, выглядит следующим образом:  
  
 `clr-namespace:` *клрнснаме* `; assembly=` *ассемблишортнаме*  
  
 `clr-namespace:` и `; assembly=` являются литеральными компонентами синтаксиса.  
  
 *клрнснаме* — это строковое имя, идентифицирующее пространство имен CLR. Это имя строки включает все внутренние символы-точки (.), которые предоставляют указания о пространстве имен CLR и его связи с другими пространствами имен CLR.  
  
 *ассемблишортнаме* — это строковое имя сборки, определяющей типы, которые ПОЛЕЗНЫ в XAML. Типы, к которым осуществляется доступ через объявленное пространство имен XAML, должны быть определены сборкой и должны быть объявлены в пространстве имен CLR, заданном параметром *клрнснаме*. Это строковое имя обычно параллельно с данными, сообщаемыми <xref:System.Reflection.AssemblyName.Name%2A?displayProperty=nameWithType>.  
  
 Более полное определение соглашения о пространстве имен CLR и сборке выглядит следующим образом:  
  
 `clr-namespace:` *клрнснаме* `; assembly=` *AssemblyName*  
  
 *AssemblyName* представляет любую строку, которая является допустимой <xref:System.Reflection.Assembly.Load%28System.String%29?displayProperty=nameWithType> входными данными. Эта строка может включать сведения о культуре, открытом ключе или версии (определения этих концепций определены в справочном разделе по <xref:System.Reflection.Assembly>). Формат COFF и свидетельство (используемые другими перегрузками <xref:System.Reflection.Assembly.Load%2A>) не применимы для загрузки сборок XAML. все сведения о нагрузке должны быть представлены в виде строки.  
  
 Указание открытого ключа для сборки является полезным методом для безопасности XAML или для удаления возможной неоднозначности, которая может существовать, если сборки загружаются простым именем или уже существуют в кэше или домене приложения. Дополнительные сведения см. в разделе [вопросы безопасности XAML](xaml-security-considerations.md).  
  
## <a name="xaml-namespace-declarations-in-the-xaml-services-api"></a>Объявления пространств имен XAML в API служб XAML  
 В API служб XAML объявление пространства имен XAML представлено <xref:System.Xaml.NamespaceDeclaration> объектом. При объявлении пространства имен XAML в коде вызывается конструктор <xref:System.Xaml.NamespaceDeclaration.%23ctor%28System.String%2CSystem.String%29>. Параметры `ns` и `prefix` указываются как строки, а входные данные для этих параметров соответствуют определению идентификатора пространства имен XAML и префиксу пространства имен XAML, как указано выше в этом разделе.  
  
 При проверке сведений о пространстве имен XAML в виде части потока узлов XAML или при помощи другого доступа к системе типов XAML <xref:System.Xaml.NamespaceDeclaration.Namespace%2A?displayProperty=nameWithType> сообщает идентификатор пространства имен XAML, а <xref:System.Xaml.NamespaceDeclaration.Prefix%2A?displayProperty=nameWithType> сообщает префикс пространства имен XAML.  
  
 В потоке узлов XAML сведения о пространстве имен XAML могут отображаться в виде узла XAML, который предшествует сущности, к которой он применяется. Сюда входят случаи, когда сведения о пространстве имен XAML предшествуют `StartObject` корневого элемента XAML. Для получения дополнительной информации см. [Understanding XAML Node Stream Structures and Concepts](understanding-xaml-node-stream-structures-and-concepts.md).  
  
 Во многих сценариях, использующих API служб .NET Framework XAML, ожидается существование хотя бы одного объявления пространства имен XAML, и объявление должно либо содержать, либо ссылаться на сведения, необходимые контексту схемы XAML. Пространства имен XAML должны указывать сборки для загрузки или обрабатывать определенные типы в пространствах имен и сборках, которые уже загружены или известны контексту схемы XAML.  
  
 Чтобы создать поток узлов XAML, необходимо получить сведения о типе XAML с помощью контекста схемы XAML. Не удается определить сведения о типе XAML без предварительного определения соответствующего пространства имен XAML для каждого создаваемого узла. На этом этапе экземпляры типов еще не созданы, но контексту схемы XAML может потребоваться выполнить поиск информации из определяющей сборки и резервного типа. Например, чтобы обработать разметку `<Party><PartyFavor/></Party>`, контекст схемы XAML должен иметь возможность определить имя и тип `ContentProperty` `Party`и, таким образом, также должен узнать сведения о пространстве имен XAML для `Party` и `PartyFavor`. В случае контекста схемы XAML по умолчанию статическое отражение сообщает большую часть сведений о системе типов XAML, необходимых для создания узлов типов XAML в потоке узлов.  
  
 Чтобы создать граф объекта из потока узлов XAML, должны существовать объявления пространств имен XAML для каждого префикса XAML, используемого в исходной разметке и записанного в потоке узлов XAML. На этом этапе создаются экземпляры, и происходит истинное поведение сопоставления типов.  
  
 Если необходимо предварительно заполнить сведения о пространстве имен XAML, то в тех случаях, когда пространство имен XAML, которое предполагается использовать для контекста схемы XAML, не определено в разметке, один из методов, которые можно использовать, — объявить объявления пространств имен XML в <xref:System.Xml.XmlParserContext> для <xref:System.Xml.XmlReader>. Затем используйте этот <xref:System.Xml.XmlReader> в качестве входных данных для конструктора средства чтения XAML или <xref:System.Xaml.XamlServices.Load%28System.Xml.XmlReader%29?displayProperty=nameWithType>.  
  
 Еще два других API, относящиеся к обработке пространства имен XAML в .NET Framework службах XAML, являются атрибутами <xref:System.Windows.Markup.XmlnsDefinitionAttribute> и <xref:System.Windows.Markup.XmlnsPrefixAttribute>. Эти атрибуты применяются к сборкам. <xref:System.Windows.Markup.XmlnsDefinitionAttribute> используется контекстом схемы XAML для интерпретации любого объявления пространства имен XAML, включающего универсальный код ресурса (URI). <xref:System.Windows.Markup.XmlnsPrefixAttribute> используется средствами, которые создают XAML, чтобы конкретное пространство имен XAML можно было сериализовать с помощью прогнозируемого префикса. Дополнительные сведения см. в разделе [АТРИБУТЫ CLR, связанные с XAML, для пользовательских типов и библиотек](xaml-related-clr-attributes-for-custom-types-and-libraries.md).  
  
## <a name="see-also"></a>См. также:

- [Общее представление о понятиях и структурах потока узлов XAML](understanding-xaml-node-stream-structures-and-concepts.md)
