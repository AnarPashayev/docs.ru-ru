---
title: Контекст схемы языка XAML по умолчанию и контекст схемы языка XAML WPF
ms.date: 03/30/2017
ms.assetid: 04e06a15-09b3-4210-9bdf-9a64c2eccb83
ms.openlocfilehash: f29d9eb481903b06ee1f35424baeb055a396b7c1
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "64663277"
---
# <a name="default-xaml-schema-context-and-wpf-xaml-schema-context"></a>Контекст схемы языка XAML по умолчанию и контекст схемы языка XAML WPF
Контекст схемы XAML представляет собой концептуальную сущность, которая определяет, как производство XAML, использующий определенные языковые XAML взаимодействует с поведением записи объектов, включая порядок разрешения сопоставлений типов, как сборки загружаются, определенных модулей чтения и записи параметры интерпретируются. В этом разделе описываются функции служб XAML .NET Framework и контекст схемы XAML по умолчанию, который основан на системе типов CLR. Кроме того, описывается контекст схемы XAML, который используется для WPF.  
  
## <a name="default-xaml-schema-context"></a>Контекст схемы XAML по умолчанию  
 Службы XAML .NET framework реализует и использует контекст схемы XAML по умолчанию. Поведение контекста схемы XAML по умолчанию не всегда является полностью видимым в API-Интерфейс <xref:System.Xaml.XamlSchemaContext> класса. Тем не менее, во многих случаях поведение, которое влияет контекст схемы XAML по умолчанию, можно наблюдать через общий API системы типов XAML, такие как члены <xref:System.Xaml.XamlMember> или <xref:System.Xaml.XamlType>, или через API-интерфейсы, предоставляемые в средства чтения XAML и средства записи XAML, при использовании контекст схемы XAML по умолчанию.  
  
 Можно создать <xref:System.Xaml.XamlSchemaContext> путем вызова, который инкапсулирует поведение по умолчанию <xref:System.Xaml.XamlSchemaContext> конструктор. Это явно создает контекст схемы XAML по умолчанию. Этот же контекст схемы XAML по умолчанию создается неявно, если средство чтения XAML или модуль записи XAML, используя интерфейсы API, которые не принимают явно инициализировать <xref:System.Xaml.XamlSchemaContext> входного параметра.  
  
 Контекст схемы XAML по умолчанию использует отражение среды CLR для поведение сопоставления типов. Сюда входит рассмотрение определение CLR <xref:System.Type>, а также связанные <xref:System.Reflection.PropertyInfo> или <xref:System.Reflection.MethodInfo>. Кроме того однозначного соответствия примитивов CLR в типы и члены используются для заполнения в особенности для типа XAML или XAML информация об элементе, использующий резервного типа CLR. Контекст схемы XAML по умолчанию не требует методик расширения системы типов, таких как `Invoker` шаблона, так как необходимую информацию можно получить из системы типов среды CLR.  
  
 Для загрузки логики сборки контекст схемы XAML по умолчанию зависит главным образом любые значения сборки, указанные в сопоставления пространства имен XAML. Кроме того <xref:System.Xaml.XamlReaderSettings.LocalAssembly%2A> можно указание сборки для загрузки для сценариев, таких как загрузка внутренних типов.  
  
## <a name="wpf-xaml-schema-context"></a>Контекст схемы XAML WPF  
 Контекст схемы XAML WPF описывается в этом разделе, так как WPF-реализацию приведена иллюстрация интересных возможностей, которые можно получить путем реализации контекст схемы XAML не по умолчанию. Кроме того концепции контекста схемы XAML не рассматривается убедительно в документации по WPF, адресующий XAML WPF; поведения, позволяющего контекст схемы XAML может быть только полностью понимания обсуждение того, как работает контекст схемы XAML по умолчанию. Контекст схемы XAML WPF реализует следующее поведение.  
  
 **Переопределяет подстановки:** WPF имеется несколько модели содержимого для XAML при наличии свойства содержимого XAML, которые работают не являясь <xref:System.Windows.Markup.ContentPropertyAttribute> с атрибутами. <xref:System.Xaml.XamlType.LookupContentProperty%2A> переопределения для WPF реализации такого поведения.  
  
 **Отсрочки для выражений WPF:** WPF включает несколько классов выражение, значение отложить, пока не будет доступен контекст среды выполнения. Кроме того расширение шаблона — поведение во время выполнения, который основывается на методиках отсрочки.  
  
 **Введите Оптимизация поиска в системе:** WPF имеет обширные XAML словаря и объектной моделью, включая определения членов базового класса, которые наследуют для буквально сотни классов, определенное в WPF. Кроме того WPF, сам распределены между несколькими сборками. WPF оптимизирует поиск типов использованию таблиц подстановки и других методов. Это обеспечивает повышение производительности через контекст схемы XAML по умолчанию и поиск типов, основанных на среде CLR. В случаях, где типы не существуют в таблице подстановок поведение использует методики контекста схемы XAML, которые похожи на контекст схемы XAML по умолчанию.  
  
 **Расширение XamlType и XamlMember:** Возможности понятия свойств со свойствами зависимости и основные понятия событий с помощью перенаправленных событий. Чтобы предоставить эти концепции дополнительную прозрачность для операций обработки XAML, расширяет WPF <xref:System.Xaml.XamlType> и <xref:System.Xaml.XamlMember>и добавляет внутренние свойства, свойство зависимостей отчета и перенаправленные события характеристики.  
  
### <a name="accessing-the-wpf-xaml-schema-context"></a>Доступ к контексту схемы XAML WPF  
 Если вы используете методы XAML, которые основаны на WPF <xref:System.Windows.Markup.XamlReader?displayProperty=nameWithType> или <xref:System.Windows.Markup.XamlWriter?displayProperty=nameWithType>, контекст схемы XAML WPF уже используется в этих средства чтения XAML и реализаций модулей записи XAML.  
  
 Если вы используете другие средства чтения XAML или реализаций модулей записи XAML, которые не инициализируются с контекстом схемы XAML WPF, можно получить работающий WPF XAML, контекст схемы из <xref:System.Windows.Markup.XamlReader.GetWpfSchemaContext%2A?displayProperty=nameWithType>. Это значение можно затем использовать для других API, который использовать инициализации <xref:System.Xaml.XamlSchemaContext>. Например, можно вызвать <xref:System.Xaml.XamlXmlReader.%23ctor%2A> для инициализации и передать контекст схемы XAML WPF. Также можно использовать контекст схемы XAML WPF для операций системы типов XAML. Они включают в себя инициализацию конструктором <xref:System.Xaml.XamlType> или <xref:System.Xaml.XamlMember>, или вызова <xref:System.Xaml.XamlSchemaContext.GetXamlType%2A?displayProperty=nameWithType>.  
  
 Обратите внимание, что если для доступа к определенные аспекты XAML WPF из чисто зрения потока узлов XAML, некоторые возможности платформы WPF могут не еще не задействованы. Например шаблоны WPF для элементов управления еще не применяются. Таким образом при доступе к свойство, которое может быть указано полное визуального дерева во время выполнения, может видеть только значение свойства, которое ссылается на шаблон. Контекст службы для расширения разметки WPF может также быть неточной, если предоставленный не во время выполнения и может привести к исключениям при попытке записи графа объектов.  
  
## <a name="xaml-and-assembly-loading"></a>XAML и загрузка сборок  
 Загрузка сборок для XAML и служб XAML .NET Framework интегрируется с определенное в среде CLR понятие <xref:System.AppDomain>. Контекст схемы XAML интерпретирует либо порядок загрузки сборок либо поиска типов во время выполнения или во время разработки, основываясь на использование <xref:System.AppDomain> и других факторов. Логика немного отличается в зависимости от того, является ли XAML Свободный XAML для средства чтения XAML, является XAML компилируется в библиотеку DLL с помощью `XamlBuildTask`, или BAML формируется WPF `PresentationBuildTask`.  
  
 Контекст схемы XAML для WPF интегрируется с моделью приложения WPF, которая в свою очередь использует <xref:System.AppDomain> а также других факторов, которые являются подробностями реализации WPF.  
  
#### <a name="xaml-reader-input-loose-xaml"></a>Входные данные средства чтения XAML (Свободный XAML)  
  
1. Контекст схемы XAML проходит по <xref:System.AppDomain> приложения с целью поиска уже загруженной сборки, соответствующей всем аспектам имени, начиная с наиболее недавно загруженной сборки. Если соответствие найдено, эта сборка используется для разрешения.  
  
2. В противном случае — один из следующих способов на основе CLR <xref:System.Reflection.Assembly> API используются для загрузки сборки:  
  
    - Если в сопоставлении определено полное имя, вызовите <xref:System.Reflection.Assembly.Load%28System.String%29?displayProperty=nameWithType> для полного имени.  
  
    - Если предыдущее действие завершится сбоем, используйте короткое имя (и токен открытого ключа при его наличии) для вызова <xref:System.Reflection.Assembly.Load%28System.String%29?displayProperty=nameWithType>.  
  
    - Если имя не определено в сопоставлении, вызвать <xref:System.Reflection.Assembly.LoadWithPartialName%2A?displayProperty=nameWithType>.  
  
#### <a name="xamlbuildtask"></a>XamlBuildTask  
 `XamlBuildTask` используется для Windows Communication Foundation (WCF) и Windows Workflow Foundation.  
  
 Обратите внимание, что сборка ссылается на через `XamlBuildTask` всегда являются полными.  
  
1. Вызовите <xref:System.Reflection.Assembly.Load%28System.String%29?displayProperty=nameWithType> для полного имени.  
  
2. Если предыдущее действие завершится сбоем, используйте короткое имя (и токен открытого ключа при его наличии) для вызова <xref:System.Reflection.Assembly.Load%28System.String%29?displayProperty=nameWithType>.  
  
#### <a name="baml-presentationbuildtask"></a>BAML (PresentationBuildTask)  
 Существует два аспекта загрузки сборок для BAML: загрузка первоначальной сборки, содержащей BAML в виде компонента и загрузки сборок резервирования типов для любых типов, который ссылается производство BAML.  
  
##### <a name="assembly-load-for-initial-markup"></a>Загрузка сборки для первоначальной разметки:  
 Ссылку на сборку, подлежащую загрузке разметки из всегда является неполным.  
  
1. Контекст схемы XAML WPF перебор <xref:System.AppDomain> приложения WPF, с целью поиска уже загруженной сборки, соответствующей всем аспектам имени, начиная с наиболее недавно загруженной сборки. Если соответствие найдено, эта сборка используется для разрешения.  
  
2. Если предыдущее действие завершится сбоем, используйте короткое имя (и токен открытого ключа при его наличии) для вызова <xref:System.Reflection.Assembly.Load%28System.String%29?displayProperty=nameWithType>.  
  
##### <a name="assembly-references-by-baml-types"></a>Ссылки на сборку BAML типами:  
 Ссылки на сборки для типов, используемых в производстве BAML, всегда полностью определены, как выходные данные задачи сборки.  
  
1. Контекст схемы XAML WPF перебор <xref:System.AppDomain> приложения WPF, с целью поиска уже загруженной сборки, соответствующей всем аспектам имени, начиная с наиболее недавно загруженной сборки. Если соответствие найдено, эта сборка используется для разрешения.  
  
2. В противном случае один из следующих способов используется для загрузки сборки:  
  
    - Вызовите <xref:System.Reflection.Assembly.Load%28System.String%29?displayProperty=nameWithType> для полного имени.  
  
    - Если короткое имя + открытый маркера сочетание клавиш соответствовать сборке, загруженной из BAML, используйте эту сборку.  
  
    - Использовать короткое имя + токен открытого ключа для вызова <xref:System.Reflection.Assembly.Load%28System.String%29?displayProperty=nameWithType>.  
  
## <a name="see-also"></a>См. также

- [Общее представление о понятиях и структурах потока узлов XAML](understanding-xaml-node-stream-structures-and-concepts.md)
