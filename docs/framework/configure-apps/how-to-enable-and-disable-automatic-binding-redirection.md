---
title: Включение или отключение автоматически создаваемых перенаправлений привязок
ms.date: 10/30/2018
helpviewer_keywords:
- side-by-side execution, assembly binding redirection
- assemblies [.NET Framework], binding redirection
ms.assetid: 5fca42f3-bdce-4b81-a704-61e42c89d3ba
ms.openlocfilehash: 178d5070dd7018bbc0fce474cdd0b31ba3d17f77
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/22/2019
ms.locfileid: "69913035"
---
# <a name="how-to-enable-and-disable-automatic-binding-redirection"></a>Практическое руководство. Включение и отключение автоматического перенаправления привязки

При компиляции приложений в Visual Studio, предназначенных для .NET Framework 4.5.1 и более поздних версий, перенаправления привязок могут быть автоматически добавлены в файл конфигурации приложения для переопределения унификации сборок. Переадресации привязок добавляются, если приложение или его компоненты ссылаются на несколько версий одной сборки, даже если вручную указать переадресации привязок в файле конфигурации приложения. Функция автоматического перенаправления привязок влияет на классические приложения и веб-приложения, предназначенные для .NET Framework 4.5.1 или более поздней версии, хотя поведение немного отличается для веб-приложения. Можно включить автоматическое перенаправление привязки, если у вас есть приложения, предназначенные для предыдущих версий .NET Framework, или отключить эту функцию, если необходимо вручную создать перенаправления привязок.

## <a name="disable-automatic-binding-redirects-in-desktop-apps"></a>Отключение автоматического перенаправления привязок в классических приложениях

Автоматические перенаправления привязок включены по умолчанию для классических приложений Windows, предназначенных для .NET Framework 4.5.1 и более поздних версий. Перенаправления привязки добавляются в файл конфигурации вывода (**app. config**) при компиляции приложения и переопределяют унификацию сборок, которая в противном случае может быть выполнена. Исходный файл **app. config** не изменяется. Эту функцию можно отключить, изменив файл проекта для приложения или сняв флажок в свойствах проекта в Visual Studio.

### <a name="disable-through-project-properties"></a>Отключить через свойства проекта

При наличии Visual Studio 2017 версии 15,7 или более поздней можно легко отключить автоматически создаваемые перенаправления привязок на страницах свойств проекта.

1. В **обозревателе решений** щелкните проект правой кнопкой мыши и выберите пункт **Свойства**.

2. На странице **приложение** снимите флажок **Автоматическое создание перенаправлений привязки** .

3. Нажмите клавиши **CTRL**+**S** , чтобы сохранить изменения.

### <a name="disable-manually-in-the-project-file"></a>Отключение вручную в файле проекта

1. Откройте файл проекта для редактирования с помощью одного из следующих методов:

   - В Visual Studio выберите проект в **Обозреватель решений**, а затем в контекстном меню выберите **Открыть папку в проводнике** . В проводнике найдите файл проекта (с расширением CSPROJ или VBPROJ) и откройте его в блокноте.
   - В **Обозреватель решений**щелкните правой кнопкой мыши проект в Visual Studio и выберите команду Выгрузить **проект**. Снова щелкните правой кнопкой мыши выгруженный проект и выберите пункт **изменить [имя_проекта. csproj]** .

2. Найдите в файле проекта следующую запись свойства:

   ```xml
   <AutoGenerateBindingRedirects>true</AutoGenerateBindingRedirects>
   ```

3. Измените `true` на `false`:

   ```xml
   <AutoGenerateBindingRedirects>false</AutoGenerateBindingRedirects>
   ```

## <a name="enable-automatic-binding-redirects-manually"></a>Включение автоматического перенаправления привязок вручную

Можно включить автоматическое перенаправление привязок в существующих приложениях, предназначенных для более ранних версий .NET Framework, или в случаях, когда не будет автоматически предложено добавить перенаправление. Если вы нацелены на более новую версию платформы, но не получаете автоматически запрос на Добавление перенаправления, скорее всего, будут получены выходные данные сборки, предлагающие повторное сопоставление сборок.

1. Откройте файл проекта для редактирования с помощью одного из следующих методов:

   - В Visual Studio выберите проект в **Обозреватель решений**, а затем в контекстном меню выберите **Открыть папку в проводнике** . В проводнике найдите файл проекта (с расширением CSPROJ или VBPROJ) и откройте его в блокноте.
   - В **Обозреватель решений**щелкните правой кнопкой мыши проект в Visual Studio и выберите команду Выгрузить **проект**. Снова щелкните правой кнопкой мыши выгруженный проект и выберите пункт **изменить [имя_проекта. csproj]** .

2. Добавьте следующий элемент в первую группу свойств конфигурации (в \<теге PropertyGroup > тег):

   ```xml
   <AutoGenerateBindingRedirects>true</AutoGenerateBindingRedirects>
   ```

   Ниже приведен пример файла проекта с вставленным элементом:

   ```xml
   <?xml version="1.0" encoding="utf-8"?>
   <Project ToolsVersion="12.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
     <Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />
     <PropertyGroup>
       <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
       <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
       <ProjectGuid>{123334}</ProjectGuid>
       ...
       <AutoGenerateBindingRedirects>true</AutoGenerateBindingRedirects>
     </PropertyGroup>
     ...
   </Project>
   ```

3. Скомпилируйте приложение.

## <a name="enable-automatic-binding-redirects-in-web-apps"></a>Включение автоматического перенаправления привязок в веб-приложениях

Для веб-приложений автоматические переадресации привязок реализованы иным образом. Поскольку файл конфигурации источника (**Web. config**) необходимо изменить для веб-приложений, перенаправления привязки не добавляются автоматически в файл конфигурации. Однако Visual Studio уведомляет вас о конфликтах привязки, и вы можете добавлять переадресации привязок для разрешения конфликтов. Поскольку вам всегда предлагается добавить перенаправления привязок, вам не нужно явно отключать эту функцию для веб-приложения.

Добавление перенаправлений привязок в файл **Web. config** :

1. В Visual Studio скомпилируйте приложение и проверьте его на наличие предупреждений сборки.

   ![Предупреждение сборки для конфликтов ссылок на сборки](./media/clr-assemblyrefwarning.png "CLR_AssemblyRefWarning")

2. При наличии конфликтов привязки сборок выводится предупреждение. Дважды щелкните предупреждение или выберите предупреждение и нажмите клавишу **Ввод**.

   Откроется диалоговое окно, которое позволяет автоматически добавлять необходимые перенаправления привязок в исходный файл **Web. config** .

   ![Диалоговое окно разрешения перенаправления привязки](./media/clr-addbindingredirect.png "CLR_AddBindingRedirect")

## <a name="see-also"></a>См. также

- [\<Элемент bindingRedirect >](./file-schema/runtime/bindingredirect-element.md)
- [Перенаправление версий сборки](redirect-assembly-versions.md)
