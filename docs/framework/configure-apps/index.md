---
title: Настройка приложений с использованием файлов конфигурации
description: Настройка приложений с помощью файлов конфигурации в .NET. Файлы конфигурации имеют формат XML, и при необходимости их можно изменять.
ms.date: 03/30/2017
f1_keywords:
- AutoGeneratedOrientationPage
helpviewer_keywords:
- security configuration files
- end tags
- configuration files [.NET Framework], application
- machine configuration files
- .NET Framework application configuration, configuration files
- applications [.NET Framework], configuration files
- application configuration files, security
- application configuration files, format
- configuration files [.NET Framework]
- hosts, application
- application configuration files, machine
- ASP.NET, configuring
- configuration files [.NET Framework], security
- application configuration files, about
- application configuration files
- <runtime> element
- start tags
- configuration files [.NET Framework], machine
- configuration files [.NET Framework], format
ms.assetid: 86bd26d3-737e-4484-9782-19b17f34cd1f
ms.openlocfilehash: e40744c9c73e02fe96864d6b1320eb3dde4d1144
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2020
ms.locfileid: "91183459"
---
# <a name="configuring-apps-by-using-configuration-files"></a>Настройка приложений с использованием файлов конфигурации

Среда .NET Framework предоставляет разработчикам и администраторам возможность управления и гибкой настройки способа выполнения приложений с помощью файлов конфигурации. Файлы конфигурации имеют формат XML, и при необходимости их можно изменять. Администратор может контролировать, к каким из защищенных ресурсов может осуществлять доступ приложение, какие оно будет использовать версии сборок и где расположены удаленные объекты и приложения. Разработчики могут задавать параметры в файлах конфигурации, устраняя необходимость в перекомпиляции приложения при каждом изменении той или иной установки. В этом разделе рассказывается, какие параметры могут быть настроены и для чего может потребоваться настройка приложения.  
  
> [!NOTE]
> С помощью классов из пространства имен <xref:System.Configuration> управляемый код может считывать установки из конфигурационных файлов, но не записывать их в эти файлы.  
  
 В этом разделе описан синтаксис файлов конфигурации и приведены сведения о трех типах таких файлов: конфигурации компьютера, приложения и безопасности.  
  
## <a name="configuration-file-format"></a>Формат файлов конфигурации  

 Файлы конфигурации состоят из элементов, которые являются логическими структурами данных, задающими сведения о конфигурации. Начало и конец каждого элемента в файле конфигурации отмечены специальными тегами. Например, `<runtime>` элемент состоит из `<runtime>` *дочерних элементов* `</runtime>` . Пустой элемент будет записан как `<runtime/>` или `<runtime></runtime>`.  
  
 Как и во всех XML-файлах, в файлах конфигурации учитывается регистр.  
  
 Параметры конфигурации задаются с помощью предварительно определенных атрибутов (пар имя-значение) в открывающем теге элемента. В следующем примере заданы два атрибута (`version` и `href`) элемента `<codeBase>`, определяющие для среды выполнения расположение сборок (дополнительные сведения см. в разделе [Указание расположения сборки](specify-assembly-location.md)).  
  
```xml  
<codeBase version="2.0.0.0"  
          href="http://www.litwareinc.com/myAssembly.dll"/>  
```  
  
## <a name="machine-configuration-files"></a>Файлы конфигурации компьютеров  

 В файле конфигурации компьютера, Machine.config, задаются параметры, влияющие на работу компьютера в целом. Этот файл находится в каталоге %*путь установки среды выполнения*%\Config. В файле Machine.config задаются параметры конфигурации для привязки сборок компьютера, встроенных [каналов удаленного взаимодействия](/previous-versions/dotnet/netframework-4.0/dkfd3wha(v=vs.100)) и ASP.NET.  
  
 Система конфигурации сначала просматривает файл конфигурации компьютера для [ **\<appSettings>** элемента](./file-schema/appsettings/index.md) и других разделов конфигурации, которые может определить разработчик. Затем поиск выполняется в файле конфигурации приложения. Для облегчения управления файлом конфигурации компьютера рекомендуется переместить эти параметры в файл конфигурации приложения. Однако размещение параметров в файле конфигурации компьютера упрощает управление системой. Например, при наличии компонентов сторонних производителей, используемых сервером и клиентами, рекомендуется разместить параметры этих компонентов в одном файле. В этом случае следует задавать параметры в файле конфигурации компьютера, чтобы не дублировать параметры в разных файлах.  
  
> [!NOTE]
> При развертывании приложения с помощью команды XCOPY файл конфигурации компьютера не копируется.  
  
 Дополнительные сведения об использовании файла конфигурации компьютера средой CLR для привязки сборок см. в разделе [Обнаружение сборок в среде выполнения](../deployment/how-the-runtime-locates-assemblies.md).  
  
## <a name="application-configuration-files"></a>Файлы конфигурации приложений  

 В файле конфигурации приложения находятся параметры приложения. В этом файле содержатся параметры конфигурации, считываемые средой CLR (например, политика привязки сборок, удаленные объекты и т. д.) и приложением.  
  
 Имя и расположение файла конфигурации приложения зависят от места размещения приложения, которым может быть одно из указанных ниже.  
  
- Приложение, размещенное в исполняемом файле.  
  
     Такие приложения имеют два файла конфигурации: исходный файл конфигурации, который изменяется разработчиком во время разработки, и выходной файл, распространяемый с приложением.  
  
     При разработке в Visual Studio разместите исходный файл конфигурации приложения в каталоге проекта и установите для его свойства **Копировать в выходной каталог** значение **Всегда копировать** или **Копировать, если новее**. Имя файла конфигурации — это имя приложения с расширением CONFIG. Например, исходный файл конфигурации приложения myApp.exe должен называться myApp.exe.config.  
  
     Visual Studio автоматически копирует исходный файл конфигурации в каталог, где находится скомпилированная сборка, чтобы создать выходной файл конфигурации, развертываемый вместе с приложением. В некоторых случаях Visual Studio может изменить выходной файл конфигурации; дополнительные сведения см. в разделе [Перенаправление версий сборки на уровне приложения](redirect-assembly-versions.md#BKMK_Redirectingassemblyversionsattheapplevel) статьи [Перенаправление версий сборки](redirect-assembly-versions.md).  
  
- Приложение, размещенное в ASP.NET.  
  
     Дополнительные сведения о файлах конфигурации ASP.NET см. в разделе [Параметры конфигурации ASP.NET](/previous-versions/dotnet/netframework-4.0/b5ysx397(v=vs.100)).
  
- Приложение, размещенное в Internet Explorer.  
  
     Если для приложения, размещенного в Internet Explorer, определен файл конфигурации, его расположение задается в теге `<link>` следующим образом:  
  
     \<link rel="*ConfigurationFileName*" href="*location*">  
  
     В этом теге `location` — это URL-адрес файла конфигурации. Таким образом задается базовая папка приложения. Файл конфигурации должен находиться на том же веб-сайте, что и приложение.  
  
## <a name="security-configuration-files"></a>Файлы конфигурации безопасности  

 В файлах конфигурации безопасности содержатся сведения об иерархии групп кода и наборах разрешений, связанных с уровнем политики. Для изменения политики безопасности настоятельно рекомендуется использовать [средство политики безопасности доступа кода (Caspol.exe)](../tools/caspol-exe-code-access-security-policy-tool.md), что гарантирует целостность файлов конфигурации безопасности.  
  
> [!NOTE]
> Начиная с .NET Framework 4, файлы конфигурации безопасности существуют только в том случае, если изменилась политика безопасности.  
  
 Ниже приведено расположение файлов конфигурации безопасности.  
  
- Файл конфигурации политики предприятия: %*путь-установки-среды-выполнения*%\Config\Enterprisesec.config  
  
- Файл конфигурации политики компьютера: %*путь-установки-среды-выполнения*%\Config\Security.config  
  
- Файл конфигурации политики пользователя: %USERPROFILE%\Application data\Microsoft\CLR security config\v*xx.xx*\Security.config  
  
## <a name="in-this-section"></a>в этом разделе  

 [Практическое руководство. Поиск сборок с помощью DEVPATH](how-to-locate-assemblies-by-using-devpath.md)  
 Описание процесса настройки среды выполнения для использования переменной среды DEVPATH при поиске сборок.  
  
 [Перенаправление версий сборки](redirect-assembly-versions.md)  
 Инструкции по указанию местоположения и версии сборки, которая должна использоваться приложением.  
  
 [Указание расположения сборки](specify-assembly-location.md)  
 Сведения о том, как указать среде выполнения, где она должна осуществлять поиск сборки.  
  
 [Настройка криптографических классов](configure-cryptography-classes.md)  
 Описание процесса сопоставления имени алгоритма криптографическому классу и идентификатора объекта в криптографическому алгоритму.  
  
 [Практическое руководство. Создание политики издателя](how-to-create-a-publisher-policy.md)  
 Сведения о том, куда и каким образом нужно добавить файл политики издателя, чтобы задать перенаправление сборки и параметры базового каталога кода.  
  
 [Схема файла конфигурации](./file-schema/index.md)  
 Описывается иерархия схемы для запуска, среды выполнения, сети и других типов параметров конфигурации.  
  
## <a name="see-also"></a>См. также

- [Схема файла конфигурации](./file-schema/index.md)
- [Указание расположения сборки](specify-assembly-location.md)
- [Перенаправление версий сборки](redirect-assembly-versions.md)
- [Администрирование веб-сайта ASP.NET](/previous-versions/visualstudio/visual-studio-2008/6hy1xzbw(v=vs.90))
- [Управление политиками безопасности](/previous-versions/dotnet/netframework-4.0/c1k0eed6(v=vs.100))
- [Caspol.exe (средство настройки политики управления доступом для кода)](../tools/caspol-exe-code-access-security-policy-tool.md)
- [Сборки в .NET](../../standard/assembly/index.md)
