---
title: Элемент <forcePerformanceCounterUniqueSharedMemoryReads>
ms.date: 03/30/2017
helpviewer_keywords:
- forcePerformanceCounterUniqueSharedMemoryReads element
- <forcePerformanceCounterUniqueSharedMemoryReads> element
ms.assetid: 91149858-4810-4f65-9b48-468488172c9b
ms.openlocfilehash: 742b444c445ba67d6977b622e615a6a8f591826e
ms.sourcegitcommit: b16c00371ea06398859ecd157defc81301c9070f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/06/2020
ms.locfileid: "79154144"
---
# <a name="forceperformancecounteruniquesharedmemoryreads-element"></a>Элемент \<forcePerformanceCounterUniqueSharedMemoryReads>
Указывает, использует ли файл PerfCounter.dll параметр реестра CategoryOptions в приложении .NET Framework версии 1.1, чтобы определить, следует ли загружать данные счетчиков производительности из общей памяти конкретной категории или глобальной памяти.  
  
[**\<configuration>**](../configuration-element.md)\
&nbsp;&nbsp;[**\<runtime>**](runtime-element.md)\
&nbsp;&nbsp;&nbsp;&nbsp;**\<forcePerformanceCounterUniqueSharedMemoryReads>**  
  
## <a name="syntax"></a>Синтаксис  
  
```xml  
<forcePerformanceCounterUniqueSharedMemoryReads
enabled="true|false"/>  
```  
  
## <a name="attributes-and-elements"></a>Атрибуты и элементы  
 В следующих разделах описаны атрибуты, дочерние и родительские элементы.  
  
### <a name="attributes"></a>Атрибуты  
  
|Атрибут|Описание|  
|---------------|-----------------|  
|`enabled`|Обязательный атрибут.<br /><br /> Указывает, использует ли Перфкаунтер. dll параметр реестра Категорйоптионс, чтобы определить, следует ли загружать данные счетчиков производительности из общей памяти конкретной категории или глобальной памяти.|  
  
## <a name="enabled-attribute"></a>Атрибут enabled  
  
|Значение|Описание|  
|-----------|-----------------|  
|`false`|Перфкаунтер. dll не использует параметр реестра Категорйоптионс. это значение по умолчанию.|  
|`true`|Перфкаунтер. dll использует параметр реестра Категорйоптионс.|  
  
### <a name="child-elements"></a>Дочерние элементы  
 Отсутствует.  
  
### <a name="parent-elements"></a>Родительские элементы  
  
|Элемент|Описание|  
|-------------|-----------------|  
|`configuration`|Корневой элемент в любом файле конфигурации, используемом средой CLR и приложениями .NET Framework.|  
|`runtime`|Содержит сведения о привязке сборок и сборке мусора.|  
  
## <a name="remarks"></a>Примечания  
 В версиях .NET Framework до .NET Framework 4 версия Перфкаунтер. dll, которая была загружена, соответствует среде выполнения, загруженной в процессе. Если на компьютере установлены как .NET Framework версии 1,1, так и .NET Framework 2,0, то приложение .NET Framework 1,1 загрузит .NET Framework 1,1 версии Перфкаунтер. dll. Начиная с .NET Framework 4, загружается последняя установленная версия Перфкаунтер. dll. Это означает, что приложение .NET Framework 1,1 будет загружать версию Перфкаунтер. dll .NET Framework 4, если на компьютере установлен .NET Framework 4.  
  
 Начиная с .NET Framework 4, при использовании счетчиков производительности Перфкаунтер. dll проверяет запись реестра Категорйоптионс для каждого поставщика, чтобы определить, должен ли он выполнять чтение из общей памяти конкретной категории или глобальной общей памяти. .NET Framework 1,1 Перфкаунтер. dll не считывает эту запись реестра, так как она не поддерживает общую память, относящуюся к категории. Он всегда считывает данные из глобальной общей памяти.  
  
 Для обеспечения обратной совместимости .NET Framework 4 Перфкаунтер. dll не проверяет запись реестра Категорйоптионс при запуске в приложении .NET Framework 1,1. Он просто использует глобальную общую память так же, как .NET Framework 1,1 Перфкаунтер. dll. Однако можно указать .NET Framework 4 Перфкаунтер. dll, чтобы проверить параметр реестра, включив `<forcePerformanceCounterUniqueSharedMemoryReads>` элемент.  
  
> [!NOTE]
> Включение `<forcePerformanceCounterUniqueSharedMemoryReads>` элемента не гарантирует, что будет использоваться общая память, относящаяся к категории. Если параметр включен, `true` то перфкаунтер. dll будет ссылаться на параметр реестра категорйоптионс. Значение по умолчанию для Категорйоптионс — использовать общую память, относящуюся к категории; Однако можно изменить Категорйоптионс, чтобы указать, что следует использовать глобальную общую память.  
  
 Раздел реестра, содержащий параметр Категорйоптионс, — HKEY_LOCAL_MACHINE \Систем\куррентконтролсет\сервицес \\<CategoryName \> \перформанце. По умолчанию Категорйоптионс имеет значение 3, что указывает Перфкаунтер. dll на использование общей памяти, относящейся к определенной категории. Если Категорйоптионс имеет значение 0, Перфкаунтер. dll использует глобальную общую память. Данные экземпляра будут использоваться повторно только в том случае, если имя создаваемого экземпляра идентично повторно используемому экземпляру. Все версии будут иметь возможность записи в категорию. Если для Категорйоптионс задано значение 1, используется глобальная общая память, но данные экземпляра могут использоваться повторно, если длина имени категории совпадает с длиной повторно используемого категории.  
  
 Параметры 0 и 1 могут привести к утечке памяти и заполнению памяти счетчика производительности.  
  
## <a name="example"></a>Пример  
 В следующем примере показано, как указать, что Перфкаунтер. dll должна ссылаться на запись реестра Категорйоптионс, чтобы определить, следует ли использовать общую память конкретной категории.  
  
```xml  
<configuration>  
  <runtime>  
    <forcePerformanceCounterUniqueSharedMemoryReads enabled="true"/>  
  </runtime>  
</configuration>  
```  
  
## <a name="see-also"></a>См. также

- [Схема параметров среды выполнения](index.md)
- [Схема файла конфигурации](../index.md)
