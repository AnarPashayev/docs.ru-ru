---
title: <sqlWorkflowInstanceStore>
ms.date: 03/30/2017
ms.topic: reference
ms.assetid: 8a4e4214-fc51-4f4d-b968-0427c37a9520
ms.openlocfilehash: 7a6f9fb5b2b98d2951343b5a529507b3fcd88dc8
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/22/2019
ms.locfileid: "69947524"
---
# <a name="sqlworkflowinstancestore"></a><span data-ttu-id="ae55e-101">\<sqlWorkflowInstanceStore ></span><span class="sxs-lookup"><span data-stu-id="ae55e-101">\<sqlWorkflowInstanceStore></span></span>
<span data-ttu-id="ae55e-102">Поведение службы, которое позволяет настроить <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> функцию, которая поддерживает сохранение сведений о состоянии для экземпляров службы рабочего процесса в базе данных SQL Server 2005 или SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="ae55e-102">A service behavior that allows you to configure the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> feature, which supports persisting state information for workflow service instances into an SQL Server 2005 or SQL Server 2008 database.</span></span> <span data-ttu-id="ae55e-103">Дополнительные сведения об этой функции см. в разделе [хранилище экземпляров рабочих процессов SQL](../../../windows-workflow-foundation/sql-workflow-instance-store.md).</span><span class="sxs-lookup"><span data-stu-id="ae55e-103">For more information on this feature, see [SQL Workflow Instance Store](../../../windows-workflow-foundation/sql-workflow-instance-store.md).</span></span>  
  
<span data-ttu-id="ae55e-104">\<системой. > ServiceModel</span><span class="sxs-lookup"><span data-stu-id="ae55e-104">\<system.ServiceModel></span></span>  
<span data-ttu-id="ae55e-105">\<> поведения</span><span class="sxs-lookup"><span data-stu-id="ae55e-105">\<behaviors></span></span>  
<span data-ttu-id="ae55e-106">\<serviceBehaviors ></span><span class="sxs-lookup"><span data-stu-id="ae55e-106">\<serviceBehaviors></span></span>  
<span data-ttu-id="ae55e-107">\<> поведения</span><span class="sxs-lookup"><span data-stu-id="ae55e-107">\<behavior></span></span>  
<span data-ttu-id="ae55e-108">\<sqlWorkflowInstanceStore ></span><span class="sxs-lookup"><span data-stu-id="ae55e-108">\<sqlWorkflowInstanceStore></span></span>  
  
## <a name="syntax"></a><span data-ttu-id="ae55e-109">Синтаксис</span><span class="sxs-lookup"><span data-stu-id="ae55e-109">Syntax</span></span>  
  
```xml  
<behaviors>
  <serviceBehaviors>
    <behavior name="String">
      <sqlWorkflowInstanceStore connectionStringName="String" 
                                hostLockRenewalPeriod="TimeSpan" 
                                instanceCompletionAction="DeleteNothing/DeleteAll" 
                                instanceEncodingAction="None/GZip" 
                                instanceLockedExceptionAction="NoRetry/BasicRetry/AggressiveRetry" 
                                runnableInstancesDetectionPeriod="TimeSpan" />
    </behavior>
  </serviceBehaviors>
</behaviors>  
```  
  
## <a name="attributes-and-elements"></a><span data-ttu-id="ae55e-110">Атрибуты и элементы</span><span class="sxs-lookup"><span data-stu-id="ae55e-110">Attributes and Elements</span></span>  
 <span data-ttu-id="ae55e-111">В следующих разделах описаны атрибуты, дочерние и родительские элементы.</span><span class="sxs-lookup"><span data-stu-id="ae55e-111">The following sections describe attributes, child elements, and parent elements.</span></span>  
  
### <a name="attributes"></a><span data-ttu-id="ae55e-112">Атрибуты</span><span class="sxs-lookup"><span data-stu-id="ae55e-112">Attributes</span></span>  
  
|<span data-ttu-id="ae55e-113">Атрибут</span><span class="sxs-lookup"><span data-stu-id="ae55e-113">Attribute</span></span>|<span data-ttu-id="ae55e-114">Описание</span><span class="sxs-lookup"><span data-stu-id="ae55e-114">Description</span></span>|  
|---------------|-----------------|  
|<span data-ttu-id="ae55e-115">connectionString</span><span class="sxs-lookup"><span data-stu-id="ae55e-115">connectionString</span></span>|<span data-ttu-id="ae55e-116">Строка, содержащая строку подключения, используемую для подключения к базовой базе данных сохраняемости.</span><span class="sxs-lookup"><span data-stu-id="ae55e-116">A string that contains a connection string used to connect to an underlying persistence database.</span></span>|  
|<span data-ttu-id="ae55e-117">connectionStringName</span><span class="sxs-lookup"><span data-stu-id="ae55e-117">connectionStringName</span></span>|<span data-ttu-id="ae55e-118">Строка, содержащая именованную строку соединения с сервером базы данных.</span><span class="sxs-lookup"><span data-stu-id="ae55e-118">A string that contains a named connection string to the database server.</span></span> <span data-ttu-id="ae55e-119">Примером именованной строки подключения является "DefaultConnectionString".</span><span class="sxs-lookup"><span data-stu-id="ae55e-119">An example of a named connection string is "DefaultConnectionString".</span></span>|  
|<span data-ttu-id="ae55e-120">хостлоккреневалпериод</span><span class="sxs-lookup"><span data-stu-id="ae55e-120">hostLockRenewalPeriod</span></span>|<span data-ttu-id="ae55e-121">Значение Timespan, определяющее время, в течение которого узел должен обновить блокировку на экземпляре.</span><span class="sxs-lookup"><span data-stu-id="ae55e-121">A Timespan value that specifies the time period in which the host must renew the lock on an instance.</span></span> <span data-ttu-id="ae55e-122">Если узел не возобновит блокировку в указанный период времени, то экземпляр будет разблокирован и может быть принят другим узлом.</span><span class="sxs-lookup"><span data-stu-id="ae55e-122">If the host does not renew the lock in the specified time period, the instance is unlocked and may be picked up by another host.</span></span><br /><br /> <span data-ttu-id="ae55e-123">При выгрузке рабочего процесса подразумевается, что было произведено его сохранение.</span><span class="sxs-lookup"><span data-stu-id="ae55e-123">Unloading a workflow implies that it is also persisted.</span></span> <span data-ttu-id="ae55e-124">Если этот атрибут имеет значение 0, экземпляр рабочего процесса сохраняется и выгружается сразу же после того, как рабочий процесс переходит в состояние бездействия.</span><span class="sxs-lookup"><span data-stu-id="ae55e-124">If this attribute is set to zero the workflow instance is persisted and unloaded immediately after the workflow becomes idle.</span></span> <span data-ttu-id="ae55e-125">Установка для этого атрибута значения TimeSpan. MaxValue фактически отключает операцию выгрузки.</span><span class="sxs-lookup"><span data-stu-id="ae55e-125">Setting this attribute to TimeSpan.MaxValue effectively disables the unload operation.</span></span> <span data-ttu-id="ae55e-126">Простаивающие экземпляры рабочего процесса не выгружаются.</span><span class="sxs-lookup"><span data-stu-id="ae55e-126">Idle workflow instances are never unloaded.</span></span>|  
|<span data-ttu-id="ae55e-127">instanceCompletionAction</span><span class="sxs-lookup"><span data-stu-id="ae55e-127">instanceCompletionAction</span></span>|<span data-ttu-id="ae55e-128">Значение, которое указывает, будут сохранены данные экземпляра рабочего процесса в хранилище сохраняемости после завершения работы экземпляра рабочего процесса или удалены на этом этапе.</span><span class="sxs-lookup"><span data-stu-id="ae55e-128">A value that specifies whether workflow instance data is kept in the persistence store after the workflow instance completes or if it is deleted at that point.</span></span> <span data-ttu-id="ae55e-129">Это значение имеет тип <xref:System.Activities.DurableInstancing.InstanceCompletionAction>.</span><span class="sxs-lookup"><span data-stu-id="ae55e-129">This value is of type <xref:System.Activities.DurableInstancing.InstanceCompletionAction>.</span></span><br /><br /> <span data-ttu-id="ae55e-130">Перечисленные действия состоят из удаления данных экземпляра из хранилища сохраняемости или отказа от удаления данных после завершения операции экземпляром.</span><span class="sxs-lookup"><span data-stu-id="ae55e-130">The enumerated actions consist of deleting the instance data from the persistence store or not deleting the instance data from the persistence store, when the instance has completed its operation.</span></span><br /><br /> <span data-ttu-id="ae55e-131">Если экземпляры сохраняются после завершения, то это вызывает быстрый рост базы данных постоянного хранения, что влияет на производительность базы данных.</span><span class="sxs-lookup"><span data-stu-id="ae55e-131">Keeping instances after completion causes the persistence database to grow rapidly and this affects the performance of the database.</span></span> <span data-ttu-id="ae55e-132">Следует настроить политику очищения базы данных для периодического удаления этих записей, чтобы гарантировать уровень производительности базы данных, удовлетворяющий требованиям пользователя.</span><span class="sxs-lookup"><span data-stu-id="ae55e-132">You should configure a database purge policy to delete these records periodically to ensure that the performance of the database is at the level that satisfy your performance requirements.</span></span>|  
|<span data-ttu-id="ae55e-133">instanceEncodingOption</span><span class="sxs-lookup"><span data-stu-id="ae55e-133">instanceEncodingOption</span></span>|<span data-ttu-id="ae55e-134">Необязательное значение, которое указывает, производится ли сжатие информации о состоянии экземпляра при использовании алгоритма GZip, прежде чем она будет сохранена в хранилище сохраняемости.</span><span class="sxs-lookup"><span data-stu-id="ae55e-134">An optional value that specifies  whether the instance state information is compressed using the GZip algorithm before the information is saved in the persistence store..</span></span> <span data-ttu-id="ae55e-135">Это значение имеет тип <xref:System.Activities.DurableInstancing.InstanceEncodingOption>.</span><span class="sxs-lookup"><span data-stu-id="ae55e-135">This value is of type <xref:System.Activities.DurableInstancing.InstanceEncodingOption>.</span></span> <span data-ttu-id="ae55e-136">Для этого свойства <xref:System.Activities.DurableInstancing.InstanceEncodingOption.None>возможны значения, которые не задают сжатие, <xref:System.Activities.DurableInstancing.InstanceEncodingOption.GZip>и, которое указывает, что данные экземпляра сжимаются и используют алгоритм gzip.</span><span class="sxs-lookup"><span data-stu-id="ae55e-136">Possible values for this property are <xref:System.Activities.DurableInstancing.InstanceEncodingOption.None>, which specifies no compression, and <xref:System.Activities.DurableInstancing.InstanceEncodingOption.GZip>, which specifies that instance data is compressed and uses the gzip algorithm.</span></span>|  
|<span data-ttu-id="ae55e-137">instanceLockedExceptionAction</span><span class="sxs-lookup"><span data-stu-id="ae55e-137">instanceLockedExceptionAction</span></span>|<span data-ttu-id="ae55e-138">Значение, определяющее действие, которое возникает в ответ на исключение, если узел пытается заблокировать экземпляр, который в настоящий момент заблокирован другим узлом.</span><span class="sxs-lookup"><span data-stu-id="ae55e-138">A value that specifies the action that occurs in response to an exception that is thrown when the host tries to lock an instance because the instance is currently locked by another host.</span></span> <span data-ttu-id="ae55e-139">Это значение имеет тип <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction>.</span><span class="sxs-lookup"><span data-stu-id="ae55e-139">This value is of type <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction>.</span></span><br /><br /> <span data-ttu-id="ae55e-140">Для этого поля допустимы следующие параметры: Нет, обычная повторная попытка и агрессивная повторная попытка.</span><span class="sxs-lookup"><span data-stu-id="ae55e-140">The options allowed for this field are: None, Basic Retry, and Aggressive Retry.</span></span> <span data-ttu-id="ae55e-141">По умолчанию используется значение None.</span><span class="sxs-lookup"><span data-stu-id="ae55e-141">The default value is None.</span></span> <span data-ttu-id="ae55e-142">В следующем списке приводятся описания этих трех вариантов.</span><span class="sxs-lookup"><span data-stu-id="ae55e-142">The following list provides you with the descriptions for these three options:</span></span><br /><br /> <span data-ttu-id="ae55e-143">— Нет.</span><span class="sxs-lookup"><span data-stu-id="ae55e-143">-   None.</span></span> <span data-ttu-id="ae55e-144">Узел службы не пытается заблокировать экземпляр и передает исключение <xref:System.Runtime.DurableInstancing.InstanceLockedException> вызывающему.</span><span class="sxs-lookup"><span data-stu-id="ae55e-144">The service host does not attempt to lock the instance and passes the <xref:System.Runtime.DurableInstancing.InstanceLockedException> to the caller.</span></span><br /><span data-ttu-id="ae55e-145">— Обычная повторная попытка.</span><span class="sxs-lookup"><span data-stu-id="ae55e-145">-   Basic Retry.</span></span> <span data-ttu-id="ae55e-146">Узел службы повторно пытается заблокировать экземпляр с линейным интервалом повторений и передает исключение вызывающему в конце последовательности.</span><span class="sxs-lookup"><span data-stu-id="ae55e-146">The service host reattempts to lock the instance with a linear retry interval and passes the exception to the caller at the end of the sequence.</span></span><br /><span data-ttu-id="ae55e-147">-Агрессивное повторение.</span><span class="sxs-lookup"><span data-stu-id="ae55e-147">-   Aggressive Retry.</span></span> <span data-ttu-id="ae55e-148">Узел службы повторно пытается заблокировать экземпляр (с экспоненциально увеличивающейся задержкой) и передает исключение <xref:System.Runtime.DurableInstancing.InstanceLockedException> вызывающему в конце последовательности.</span><span class="sxs-lookup"><span data-stu-id="ae55e-148">The service host reattempts to lock the instance with an exponentially increasing delay and passes the <xref:System.Runtime.DurableInstancing.InstanceLockedException> to the caller at the end of the sequence.</span></span>|  
|<span data-ttu-id="ae55e-149">runnableInstancesDetectionPeriod</span><span class="sxs-lookup"><span data-stu-id="ae55e-149">runnableInstancesDetectionPeriod</span></span>||  
  
### <a name="child-elements"></a><span data-ttu-id="ae55e-150">Дочерние элементы</span><span class="sxs-lookup"><span data-stu-id="ae55e-150">Child Elements</span></span>  
 <span data-ttu-id="ae55e-151">Нет.</span><span class="sxs-lookup"><span data-stu-id="ae55e-151">None.</span></span>  
  
### <a name="parent-elements"></a><span data-ttu-id="ae55e-152">Родительские элементы</span><span class="sxs-lookup"><span data-stu-id="ae55e-152">Parent Elements</span></span>  
  
|<span data-ttu-id="ae55e-153">Элемент</span><span class="sxs-lookup"><span data-stu-id="ae55e-153">Element</span></span>|<span data-ttu-id="ae55e-154">Описание</span><span class="sxs-lookup"><span data-stu-id="ae55e-154">Description</span></span>|  
|-------------|-----------------|  
|[<span data-ttu-id="ae55e-155">\<> поведения > \<serviceBehaviors</span><span class="sxs-lookup"><span data-stu-id="ae55e-155">\<behavior> of \<serviceBehaviors></span></span>](behavior-of-servicebehaviors-of-workflow.md)|<span data-ttu-id="ae55e-156">Указывает элемент поведения.</span><span class="sxs-lookup"><span data-stu-id="ae55e-156">Specifies a behavior element.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="ae55e-157">См. также</span><span class="sxs-lookup"><span data-stu-id="ae55e-157">See also</span></span>

- <xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior>
- <xref:System.ServiceModel.Activities.Configuration.SqlWorkflowInstanceStoreElement>
- <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>
- [<span data-ttu-id="ae55e-158">Хранилище экземпляров рабочих процессов SQL</span><span class="sxs-lookup"><span data-stu-id="ae55e-158">SQL Workflow Instance Store</span></span>](../../../windows-workflow-foundation/sql-workflow-instance-store.md)
