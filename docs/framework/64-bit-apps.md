---
title: 64-разрядные приложения
ms.date: 03/30/2017
helpviewer_keywords:
- applications [C++], 64-bit
- 64-bit applications [C++]
- 64-bit programming [C++]
ms.assetid: fd4026bc-2c3d-4b27-86dc-ec5e96018181
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 8aaa74eee5372dd7ba1ed145632f718d9ecce8ed
ms.sourcegitcommit: 559259da2738a7b33a46c0130e51d336091c2097
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/22/2019
ms.locfileid: "72773980"
---
# <a name="64-bit-applications"></a><span data-ttu-id="750f5-102">64-разрядные приложения</span><span class="sxs-lookup"><span data-stu-id="750f5-102">64-bit Applications</span></span>
<span data-ttu-id="750f5-103">При компиляции приложения можно указать, должно ли оно запускаться в 64-разрядной операционной системе Windows в качестве собственного приложения или в эмуляторе WOW64 (в 32- или 64-разрядной ОС Windows).</span><span class="sxs-lookup"><span data-stu-id="750f5-103">When you compile an application, you can specify that it should run on a Windows 64-bit operating system either as a native application or under WOW64 (Windows 32-bit on Windows 64-bit).</span></span> <span data-ttu-id="750f5-104">WOW64 — это среда совместимости, которая позволяет выполнять 32-разрядное приложение в 64-разрядной системе.</span><span class="sxs-lookup"><span data-stu-id="750f5-104">WOW64 is a compatibility environment that enables a 32-bit application to run on a 64-bit system.</span></span> <span data-ttu-id="750f5-105">Эмулятор WOW64 входит в состав всех 64-разрядных версий операционной системы Windows.</span><span class="sxs-lookup"><span data-stu-id="750f5-105">WOW64 is included in all 64-bit versions of the Windows operating system.</span></span>  
  
## <a name="running-32-bit-vs-64-bit-applications-on-windows"></a><span data-ttu-id="750f5-106">Запуск 32- и 64-разрядных приложений в Windows</span><span class="sxs-lookup"><span data-stu-id="750f5-106">Running 32-bit vs. 64-bit Applications on Windows</span></span>  
 <span data-ttu-id="750f5-107">Все приложения, построенные на платформе .NET Framework версий 1.0 и 1.1, обрабатываются в 64-разрядной операционной системе как 32-разрядные приложения и всегда запускаются в эмуляторе WOW64 и в 32-разрядной среде CLR.</span><span class="sxs-lookup"><span data-stu-id="750f5-107">All applications that are built on the .NET Framework 1.0 or 1.1 are treated as 32-bit applications on a 64-bit operating system and are always executed under WOW64 and the 32-bit common language runtime (CLR).</span></span> <span data-ttu-id="750f5-108">32-разрядные приложения, созданные на платформе .NET Framework 4 или более поздних версий, также выполняются в эмуляторе WOW64 в 64-разрядных системах.</span><span class="sxs-lookup"><span data-stu-id="750f5-108">32-bit applications that are built on the .NET Framework 4 or later versions also run under WOW64 on 64-bit systems.</span></span>  
  
 <span data-ttu-id="750f5-109">Visual Studio устанавливает на компьютер с архитектурой x86 32-разрядную версию среды CLR, а на компьютер с 64-разрядной ОС Windows — 32-разрядную и соответствующую 64-разрядную версию среды CLR.</span><span class="sxs-lookup"><span data-stu-id="750f5-109">Visual Studio installs the 32-bit version of the CLR on an x86 computer, and both the 32-bit version and the appropriate 64-bit version of the CLR on a 64-bit Windows computer.</span></span> <span data-ttu-id="750f5-110">(Так как среда Visual Studio является 32-разрядным приложением, то при установке в 64-разрядной системе она выполняется в эмуляторе WOW64.)</span><span class="sxs-lookup"><span data-stu-id="750f5-110">(Because Visual Studio is a 32-bit application, when it is installed on a 64-bit system, it runs under WOW64.)</span></span>  
  
> [!NOTE]
> <span data-ttu-id="750f5-111">Из-за особенностей эмуляции x86 и подсистемы WOW64 для процессоров семейства Itanium выполнение приложений ограничено одним процессором.</span><span class="sxs-lookup"><span data-stu-id="750f5-111">Because of the design of x86 emulation and the WOW64 subsystem for the Itanium processor family, applications are restricted to execution on one processor.</span></span> <span data-ttu-id="750f5-112">Эти факторы снижают производительность и масштабируемость 32-разрядных приложений .NET Framework, выполняемых в системах на базе Itanium.</span><span class="sxs-lookup"><span data-stu-id="750f5-112">These factors reduce the performance and scalability of 32-bit .NET Framework applications that run on Itanium-based systems.</span></span> <span data-ttu-id="750f5-113">Для повышения производительности и масштабируемости рекомендуем использовать версию .NET Framework 4 со встроенной поддержкой 64-разрядных систем на базе Itanium.</span><span class="sxs-lookup"><span data-stu-id="750f5-113">We recommend that you use the .NET Framework 4, which includes native 64-bit support for Itanium-based systems, for increased performance and scalability.</span></span>  
  
 <span data-ttu-id="750f5-114">При запуске 64-разрядного управляемого приложения в 64-разрядной операционной системе Windows по умолчанию можно создавать объекты размером не более 2 гигабайт (ГБ).</span><span class="sxs-lookup"><span data-stu-id="750f5-114">By default, when you run a 64-bit managed application on a 64-bit Windows operating system, you can create an object of no more than 2 gigabytes (GB).</span></span> <span data-ttu-id="750f5-115">Однако в .NET Framework 4.5 это ограничение можно повысить.</span><span class="sxs-lookup"><span data-stu-id="750f5-115">However, in the .NET Framework 4.5, you can increase this limit.</span></span>  <span data-ttu-id="750f5-116">Дополнительные сведения см. в разделе [\<Элемент gcAllowVeryLargeObjects>](./configure-apps/file-schema/runtime/gcallowverylargeobjects-element.md).</span><span class="sxs-lookup"><span data-stu-id="750f5-116">For more information, see the [\<gcAllowVeryLargeObjects> element](./configure-apps/file-schema/runtime/gcallowverylargeobjects-element.md).</span></span>  
  
 <span data-ttu-id="750f5-117">Многие сборки выполняются в 32- и 64-разрядной среде CLR одинаково.</span><span class="sxs-lookup"><span data-stu-id="750f5-117">Many assemblies run identically on both the 32-bit CLR and the 64-bit CLR.</span></span> <span data-ttu-id="750f5-118">Однако в зависимости от версии среды CLR работа некоторых программ может отличаться по одной из следующих причин:</span><span class="sxs-lookup"><span data-stu-id="750f5-118">However, some programs may behave differently, depending on the CLR, if they contain one or more of the following:</span></span>  
  
- <span data-ttu-id="750f5-119">структуры, содержащие члены, размер которых меняется в зависимости от платформы (например, любой тип указателя);</span><span class="sxs-lookup"><span data-stu-id="750f5-119">Structures that contain members that change size depending on the platform (for example, any pointer type).</span></span>  
  
- <span data-ttu-id="750f5-120">Арифметика указателя, содержащая постоянные размеры.</span><span class="sxs-lookup"><span data-stu-id="750f5-120">Pointer arithmetic that includes constant sizes.</span></span>  
  
- <span data-ttu-id="750f5-121">Неверный вызов платформ или объявления СОМ, использующие дескрипторы `Int32` вместо `IntPtr`.</span><span class="sxs-lookup"><span data-stu-id="750f5-121">Incorrect platform invoke or COM declarations that use `Int32` for handles instead of `IntPtr`.</span></span>  
  
- <span data-ttu-id="750f5-122">приведение `IntPtr` к `Int32`.</span><span class="sxs-lookup"><span data-stu-id="750f5-122">Code that casts `IntPtr` to `Int32`.</span></span>  
  
 <span data-ttu-id="750f5-123">Дополнительные сведения о переносе 32-разрядного приложения в 64-разрядную среду CLR см. на странице [Миграция 32-разрядного управляемого кода в 64-разрядную систему](https://docs.microsoft.com/previous-versions/dotnet/articles/ms973190(v=msdn.10)).</span><span class="sxs-lookup"><span data-stu-id="750f5-123">For more information about how to port a 32-bit application to run on the 64-bit CLR, see [Migrating 32-bit Managed Code to 64-bit](https://docs.microsoft.com/previous-versions/dotnet/articles/ms973190(v=msdn.10)).</span></span>  
  
## <a name="general-64-bit-programming-information"></a><span data-ttu-id="750f5-124">Общие сведения о 64-разрядном программировании</span><span class="sxs-lookup"><span data-stu-id="750f5-124">General 64-Bit Programming Information</span></span>  
 <span data-ttu-id="750f5-125">Общие сведения о 64-разрядном программировании см. в перечисленных ниже материалах.</span><span class="sxs-lookup"><span data-stu-id="750f5-125">For general information about 64-bit programming, see the following documents:</span></span>  
  
- <span data-ttu-id="750f5-126">Дополнительные сведения о 64-разрядной версии среды CLR на компьютере с 64-разрядной ОС Windows см. на странице [Центр разработчиков .NET Framework](https://go.microsoft.com/fwlink/?LinkId=37079) на веб-сайте MSDN.</span><span class="sxs-lookup"><span data-stu-id="750f5-126">For more information about the 64-bit version of the CLR on a 64-bit Windows computer, see the [.NET Framework Developer Center](https://go.microsoft.com/fwlink/?LinkId=37079) on the MSDN website.</span></span>  
  
- <span data-ttu-id="750f5-127">В документации по Windows SDK см. статью [Programming Guide for 64-bit Windows](https://go.microsoft.com/fwlink/p/?LinkId=253512) (Руководство по программированию для 64-разрядных версий Windows).</span><span class="sxs-lookup"><span data-stu-id="750f5-127">In the Windows SDK documentation, see [Programming Guide for 64-bit Windows](https://go.microsoft.com/fwlink/p/?LinkId=253512).</span></span>  
  
- <span data-ttu-id="750f5-128">Дополнительные сведения о загрузке 64-разрядной версии среды CLR см. на странице [Загрузки в центре разработчиков .NET Framework](https://go.microsoft.com/fwlink/?LinkId=50953) на веб-сайте MSDN.</span><span class="sxs-lookup"><span data-stu-id="750f5-128">For information about how to download a 64-bit version of the CLR, see [.NET Framework Developer Center Downloads](https://go.microsoft.com/fwlink/?LinkId=50953) on the MSDN website.</span></span>  
  
- <span data-ttu-id="750f5-129">Сведения о поддержке создания 64-разрядных приложений в Visual Studio см. в разделе [Поддержка 64-разрядной среды разработки Visual Studio](/visualstudio/ide/visual-studio-ide-64-bit-support).</span><span class="sxs-lookup"><span data-stu-id="750f5-129">For information about Visual Studio support for creating 64-bit applications, see [Visual Studio IDE 64-Bit Support](/visualstudio/ide/visual-studio-ide-64-bit-support).</span></span>  
  
## <a name="compiler-support-for-creating-64-bit-applications"></a><span data-ttu-id="750f5-130">Поддержка создания 64-разрядных приложений компилятором</span><span class="sxs-lookup"><span data-stu-id="750f5-130">Compiler Support for Creating 64-Bit Applications</span></span>  
 <span data-ttu-id="750f5-131">Приложение, построенное с помощью .NET Framework на 32- или 64-разрядном компьютере, на 64-разрядном компьютере по умолчанию выполняется как собственное приложение (не в эмуляторе WOW64).</span><span class="sxs-lookup"><span data-stu-id="750f5-131">By default, when you use the .NET Framework to build an application on either a 32-bit or a 64-bit computer, the application will run on a 64-bit computer as a native application (that is, not under WOW64).</span></span> <span data-ttu-id="750f5-132">В таблице ниже перечислены материалы, в которых описывается использование компиляторов Visual Studio для создания 64-разрядных приложений, выполняемых как собственные, в эмуляторе WOW64 или обоими способами.</span><span class="sxs-lookup"><span data-stu-id="750f5-132">The following table lists documents that explain how to use Visual Studio compilers to create 64-bit applications that will run as native, under WOW64, or both.</span></span>  
  
|<span data-ttu-id="750f5-133">Компилятор</span><span class="sxs-lookup"><span data-stu-id="750f5-133">Compiler</span></span>|<span data-ttu-id="750f5-134">Параметр компилятора</span><span class="sxs-lookup"><span data-stu-id="750f5-134">Compiler option</span></span>|  
|--------------|---------------------|  
|<span data-ttu-id="750f5-135">Visual Basic</span><span class="sxs-lookup"><span data-stu-id="750f5-135">Visual Basic</span></span>|[<span data-ttu-id="750f5-136">-platform (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="750f5-136">-platform (Visual Basic)</span></span>](../visual-basic/reference/command-line-compiler/platform.md)|  
|<span data-ttu-id="750f5-137">Visual C#</span><span class="sxs-lookup"><span data-stu-id="750f5-137">Visual C#</span></span>|[<span data-ttu-id="750f5-138">-platform (параметры компилятора C#)</span><span class="sxs-lookup"><span data-stu-id="750f5-138">-platform (C# Compiler Options)</span></span>](../csharp/language-reference/compiler-options/platform-compiler-option.md)|  
|<span data-ttu-id="750f5-139">Visual C++</span><span class="sxs-lookup"><span data-stu-id="750f5-139">Visual C++</span></span>|<span data-ttu-id="750f5-140">Вы можете создавать платформенно-независимые приложения MSIL с помощью **/clr:safe**.</span><span class="sxs-lookup"><span data-stu-id="750f5-140">You can create platform-agnostic, Microsoft intermediate language (MSIL) applications by using **/clr:safe**.</span></span> <span data-ttu-id="750f5-141">Дополнительные сведения см. в разделе [-clr (компиляция среды CLR)](/cpp/build/reference/clr-common-language-runtime-compilation).</span><span class="sxs-lookup"><span data-stu-id="750f5-141">For more information, see [-clr (Common Language Runtime Compilation)](/cpp/build/reference/clr-common-language-runtime-compilation).</span></span><br /><br /> <span data-ttu-id="750f5-142">Visual C++ содержит отдельные компиляторы для каждой 64-разрядной операционной системы.</span><span class="sxs-lookup"><span data-stu-id="750f5-142">Visual C++ includes a separate compiler for each 64-bit operating system.</span></span> <span data-ttu-id="750f5-143">Дополнительные сведения об использовании Visual C++ для создания приложений, выполняемых как собственные в 64-разрядной операционной системе Windows, см. в разделе [64-разрядное программирование](/cpp/build/configuring-programs-for-64-bit-visual-cpp).</span><span class="sxs-lookup"><span data-stu-id="750f5-143">For more information about how to use Visual C++ to create native applications that run on a 64-bit Windows operating system, see [64-bit Programming](/cpp/build/configuring-programs-for-64-bit-visual-cpp).</span></span>|  
  
## <a name="determining-the-status-of-an-exe-file-or-dll-file"></a><span data-ttu-id="750f5-144">Определение состояния EXE- или DLL-файлов</span><span class="sxs-lookup"><span data-stu-id="750f5-144">Determining the Status of an .exe File or .dll File</span></span>  
 <span data-ttu-id="750f5-145">Чтобы определить, будет ли EXE- или DLL-файл выполняться только на определенной платформе или в эмуляторе WOW64, воспользуйтесь [средством преобразования CorFlags (CorFlags.exe)](./tools/corflags-exe-corflags-conversion-tool.md).</span><span class="sxs-lookup"><span data-stu-id="750f5-145">To determine whether an .exe file or .dll file is meant to run only on a specific platform or under WOW64, use [CorFlags.exe (CorFlags Conversion Tool)](./tools/corflags-exe-corflags-conversion-tool.md) with no options.</span></span> <span data-ttu-id="750f5-146">Кроме того, программа CorFlags.exe используется для изменения состояния платформы EXE- или DLL-файла.</span><span class="sxs-lookup"><span data-stu-id="750f5-146">You can also use CorFlags.exe to change the platform status of an .exe file or .dll file.</span></span> <span data-ttu-id="750f5-147">В заголовке среды CLR сборки Visual Studio основной номер версии среды выполнения имеет значение 2, а дополнительный номер версии среды выполнения — значение 5.</span><span class="sxs-lookup"><span data-stu-id="750f5-147">The CLR header of a Visual Studio assembly has the major runtime version number set to 2 and the minor runtime version number set to 5.</span></span> <span data-ttu-id="750f5-148">Приложения, у которых дополнительный номер версии среды выполнения имеет значение 0, обрабатываются как приложения прежних версий и всегда запускаются в эмуляторе WOW64.</span><span class="sxs-lookup"><span data-stu-id="750f5-148">Applications that have the minor runtime version set to 0 are treated as legacy applications and are always executed under WOW64.</span></span>  
  
 <span data-ttu-id="750f5-149">Метод <xref:System.Reflection.Module.GetPEKind%2A?displayProperty=nameWithType> используется для программного определения того, будет ли EXE- или DLL-файл выполняться на определенной платформе или в эмуляторе WOW64.</span><span class="sxs-lookup"><span data-stu-id="750f5-149">To programmatically query an .exe or .dll to see whether it is meant to run only on a specific platform or under WOW64, use the <xref:System.Reflection.Module.GetPEKind%2A?displayProperty=nameWithType> method.</span></span>
