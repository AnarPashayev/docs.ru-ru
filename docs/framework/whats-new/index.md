---
title: Новые возможности .NET Framework
ms.custom: updateeachrelease
ms.date: 04/10/2018
dev_langs:
- csharp
- vb
helpviewer_keywords:
- what's new [.NET Framework]
ms.assetid: 1d971dd7-10fc-4692-8dac-30ca308fc0fa
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 22f6c6827b2574ba887839f749df8fc7ae6605ea
ms.sourcegitcommit: 558d78d2a68acd4c95ef23231c8b4e4c7bac3902
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2019
ms.locfileid: "59328638"
---
# <a name="whats-new-in-the-net-framework"></a><span data-ttu-id="640c3-102">Новые возможности .NET Framework</span><span class="sxs-lookup"><span data-stu-id="640c3-102">What's new in the .NET Framework</span></span>

<span data-ttu-id="640c3-103">В этой статье кратко рассматриваются основные новые возможности и усовершенствования в следующих версиях .NET Framework:</span><span class="sxs-lookup"><span data-stu-id="640c3-103">This article summarizes key new features and improvements in the following versions of the .NET Framework:</span></span>

- [<span data-ttu-id="640c3-104">.NET Framework 4.7.2</span><span class="sxs-lookup"><span data-stu-id="640c3-104">.NET Framework 4.7.2</span></span>](#v472)
- [<span data-ttu-id="640c3-105">.NET Framework 4.7.1</span><span class="sxs-lookup"><span data-stu-id="640c3-105">.NET Framework 4.7.1</span></span>](#v471)
- [<span data-ttu-id="640c3-106">.NET Framework 4.7</span><span class="sxs-lookup"><span data-stu-id="640c3-106">.NET Framework 4.7</span></span>](#v47)
- [<span data-ttu-id="640c3-107">.NET Framework 4.6.2</span><span class="sxs-lookup"><span data-stu-id="640c3-107">.NET Framework 4.6.2</span></span>](#v462)
- [<span data-ttu-id="640c3-108">.NET Framework 4.6.1</span><span class="sxs-lookup"><span data-stu-id="640c3-108">.NET Framework 4.6.1</span></span>](#v461)
- [<span data-ttu-id="640c3-109">.NET 2015 и .NET Framework 4.6</span><span class="sxs-lookup"><span data-stu-id="640c3-109">.NET 2015 and .NET Framework 4.6</span></span>](#v46)
- [<span data-ttu-id="640c3-110">.NET Framework 4.5.2</span><span class="sxs-lookup"><span data-stu-id="640c3-110">.NET Framework 4.5.2</span></span>](#v452)
- [<span data-ttu-id="640c3-111">.NET Framework 4.5.1</span><span class="sxs-lookup"><span data-stu-id="640c3-111">.NET Framework 4.5.1</span></span>](#v451)
- [<span data-ttu-id="640c3-112">.NET Framework 4,5</span><span class="sxs-lookup"><span data-stu-id="640c3-112">.NET Framework 4.5</span></span>](#v45)

<span data-ttu-id="640c3-113">Данная статья не содержит исчерпывающей информации обо всех новых возможностях и может быть изменена.</span><span class="sxs-lookup"><span data-stu-id="640c3-113">This article does not provide comprehensive information about each new feature and is subject to change.</span></span> <span data-ttu-id="640c3-114">Общие сведения о .NET Framework см. в разделе [Начало работы с .NET Framework](../get-started/index.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-114">For general information about the .NET Framework, see [Getting Started](../get-started/index.md).</span></span> <span data-ttu-id="640c3-115">Поддерживаемые платформы см. в разделе [Требования к системе](~/docs/framework/get-started/system-requirements.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-115">For supported platforms, see [System Requirements](~/docs/framework/get-started/system-requirements.md).</span></span> <span data-ttu-id="640c3-116">Ссылки для загрузки и инструкции по установке см. в разделе [Руководство по установке](../install/guide-for-developers.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-116">For download links and installation instructions, see [Installation Guide](../install/guide-for-developers.md).</span></span>

> [!NOTE]
> <span data-ttu-id="640c3-117">Команда .NET Framework также выпускает компоненты в виде внештатных выпусков совместно с NuGet для расширения поддержки и введения новых возможностей (таких как неизменяемые коллекции и векторные типы с поддержкой SIMD).</span><span class="sxs-lookup"><span data-stu-id="640c3-117">The .NET Framework team also releases features out of band with NuGet to expand platform support and to introduce new functionality, such as immutable collections and SIMD-enabled vector types.</span></span> <span data-ttu-id="640c3-118">Дополнительные сведения см. в разделах [Дополнительные библиотеки классов и интерфейсы API](../additional-apis/index.md) и [.NET Framework и внештатные выпуски](~/docs/framework/get-started/the-net-framework-and-out-of-band-releases.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-118">For more information, see [Additional Class Libraries and APIs](../additional-apis/index.md) and [The .NET Framework and Out-of-Band Releases](~/docs/framework/get-started/the-net-framework-and-out-of-band-releases.md).</span></span> <span data-ttu-id="640c3-119">См. [полный список пакетов NuGet](https://blogs.msdn.microsoft.com/dotnet/p/nugetpackages/) для .NET Framework или подпишитесь на [наш веб-канал](https://nuget.org/api/v2/curated-feeds/dotnetframework/Packages/).</span><span class="sxs-lookup"><span data-stu-id="640c3-119">See a [complete list of NuGet packages](https://blogs.msdn.microsoft.com/dotnet/p/nugetpackages/) for the .NET Framework, or subscribe to [our feed](https://nuget.org/api/v2/curated-feeds/dotnetframework/Packages/).</span></span>

<a name="v472" />

## <a name="introducing-the-net-framework-472"></a><span data-ttu-id="640c3-120">Знакомство с платформой .NET Framework 4.7.2</span><span class="sxs-lookup"><span data-stu-id="640c3-120">Introducing the .NET Framework 4.7.2</span></span>

<span data-ttu-id="640c3-121">Версия .NET Framework 4.7.2 является следующим шагом развития версий .NET Framework 4.x. Она включает много исправлений и несколько новых возможностей, сохраняя при этом высокую стабильность работы.</span><span class="sxs-lookup"><span data-stu-id="640c3-121">The .NET Framework 4.7.2 builds on previous versions of the .NET Framework 4.x by adding many new fixes and several new features while remaining a very stable product.</span></span>

### <a name="downloading-and-installing-the-net-framework-472"></a><span data-ttu-id="640c3-122">Скачивание и установка .NET Framework 4.7.2</span><span class="sxs-lookup"><span data-stu-id="640c3-122">Downloading and installing the .NET Framework 4.7.2</span></span>

<span data-ttu-id="640c3-123">.NET Framework 4.7.2 можно скачать здесь:</span><span class="sxs-lookup"><span data-stu-id="640c3-123">You can download the .NET Framework 4.7.2  from the following locations:</span></span>

- [<span data-ttu-id="640c3-124">Веб-установщик .NET Framework 4.7.2</span><span class="sxs-lookup"><span data-stu-id="640c3-124">.NET Framework 4.7.2 Web Installer</span></span>](https://go.microsoft.com/fwlink/?LinkId=863262)

- [<span data-ttu-id="640c3-125">Автономный установщик .NET Framework 4.7.2</span><span class="sxs-lookup"><span data-stu-id="640c3-125">NET Framework 4.7.2 Offline Installer</span></span>](https://go.microsoft.com/fwlink/?LinkId=863265)

<span data-ttu-id="640c3-126">.NET Framework 4.7.2 можно установить на платформах Windows 10, Windows 8.1 и Windows 7 с пакетом обновления 1 (SP1), а также на соответствующих серверных платформах, начиная с Windows Server 2008 R2 с пакетом обновления 1 (SP1).</span><span class="sxs-lookup"><span data-stu-id="640c3-126">The .NET Framework 4.7.2 can be installed on Windows 10, Windows 8.1, Windows 7 SP1, and the corresponding server platforms starting with Windows Server 2008 R2 SP1.</span></span> <span data-ttu-id="640c3-127">.NET Framework 4.7.2 можно установить с помощью веб-установщика или автономного установщика.</span><span class="sxs-lookup"><span data-stu-id="640c3-127">You can install the .NET Framework 4.7.2 by using either the web installer or the offline installer.</span></span> <span data-ttu-id="640c3-128">Для большинства пользователей рекомендуется использовать веб-установщик.</span><span class="sxs-lookup"><span data-stu-id="640c3-128">The recommended way for most users is to use the web installer.</span></span>

<span data-ttu-id="640c3-129">Вы можете назначить .NET Framework 4.7.2 в качестве целевой платформы в Visual Studio 2012 (или более поздних версиях), установив [.NET Framework 4.7.2 Developer Pack](https://go.microsoft.com/fwlink/?LinkId=874338).</span><span class="sxs-lookup"><span data-stu-id="640c3-129">You can target the .NET Framework 4.7.2 in Visual Studio 2012 or later by installing the [.NET Framework 4.7.2 Developer Pack](https://go.microsoft.com/fwlink/?LinkId=874338).</span></span>

### <a name="whats-new-in-the-net-framework-472"></a><span data-ttu-id="640c3-130">Новые возможности .NET Framework 4.7.2</span><span class="sxs-lookup"><span data-stu-id="640c3-130">What's new in the .NET Framework 4.7.2</span></span>

<span data-ttu-id="640c3-131">.NET Framework 4.7.2 включает новые функции в следующих областях:</span><span class="sxs-lookup"><span data-stu-id="640c3-131">The .NET Framework 4.7.2 includes new features in the following areas:</span></span>

- [<span data-ttu-id="640c3-132">Ядро</span><span class="sxs-lookup"><span data-stu-id="640c3-132">Core</span></span>](#core-472)
- [<span data-ttu-id="640c3-133">ASP.NET</span><span class="sxs-lookup"><span data-stu-id="640c3-133">ASP.NET</span></span>](#asp-net472)
- [<span data-ttu-id="640c3-134">Сетевое взаимодействие</span><span class="sxs-lookup"><span data-stu-id="640c3-134">Networking</span></span>](#net472)
- [<span data-ttu-id="640c3-135">SQL-код</span><span class="sxs-lookup"><span data-stu-id="640c3-135">SQL</span></span>](#sql472)
- [<span data-ttu-id="640c3-136">WPF</span><span class="sxs-lookup"><span data-stu-id="640c3-136">WPF</span></span>](#wpf472)
- [<span data-ttu-id="640c3-137">ClickOnce</span><span class="sxs-lookup"><span data-stu-id="640c3-137">ClickOnce</span></span>](#clickonce)

<span data-ttu-id="640c3-138">Основной акцент в .NET Framework 4.7.2 по-прежнему сделан на улучшение специальных возможностей, что позволяет приложению предоставлять соответствующую функциональность пользователям технологий с поддержкой специальных возможностей.</span><span class="sxs-lookup"><span data-stu-id="640c3-138">A continuing focus in the .NET Framework 4.7.2 is improved accessibility, which allows an application to provide an appropriate experience for users of Assistive Technology.</span></span> <span data-ttu-id="640c3-139">Сведения об улучшениях специальных возможностей в .NET Framework 4.7.2 см. в разделе [Улучшения специальных возможностей в .NET Framework](whats-new-in-accessibility.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-139">For information on accessibility improvement in the .NET Framework 4.7.2, see [What's new in accessibility in the .NET Framework](whats-new-in-accessibility.md).</span></span>

<a name="core-472" />

#### <a name="core"></a><span data-ttu-id="640c3-140">Ядро</span><span class="sxs-lookup"><span data-stu-id="640c3-140">Core</span></span>

<span data-ttu-id="640c3-141">В .NET Framework 4.7.2 значительно усовершенствовано шифрование, улучшена поддержка распаковки ZIP-архивов и содержится дополнительная коллекция API-интерфейсов.</span><span class="sxs-lookup"><span data-stu-id="640c3-141">The .NET Framework 4.7.2 features a large number of cryptographic enhancements, better decompression support for ZIP archives, and additional collection APIs.</span></span>

**<span data-ttu-id="640c3-142">Новые перегрузки RSA.Create и DSA.Create</span><span class="sxs-lookup"><span data-stu-id="640c3-142">New overloads of RSA.Create and DSA.Create</span></span>**

<span data-ttu-id="640c3-143">С помощью методов <xref:System.Security.Cryptography.DSA.Create(System.Security.Cryptography.DSAParameters)?displayProperty=nameWithType> и <xref:System.Security.Cryptography.RSA.Create(System.Security.Cryptography.RSAParameters)?displayProperty=nameWithType> вы можете указывать параметры ключа при создании экземпляра ключа <xref:System.Security.Cryptography.DSA> или <xref:System.Security.Cryptography.RSA>.</span><span class="sxs-lookup"><span data-stu-id="640c3-143">The <xref:System.Security.Cryptography.DSA.Create(System.Security.Cryptography.DSAParameters)?displayProperty=nameWithType> and <xref:System.Security.Cryptography.RSA.Create(System.Security.Cryptography.RSAParameters)?displayProperty=nameWithType> methods let you supply key parameters when instantiating a new <xref:System.Security.Cryptography.DSA> or <xref:System.Security.Cryptography.RSA> key.</span></span> <span data-ttu-id="640c3-144">Они позволяют заменить код, подобный этому:</span><span class="sxs-lookup"><span data-stu-id="640c3-144">They allow you to replace code like the following:</span></span>

```csharp
// Before .NET Framework 4.7.2
using (RSA rsa = RSA.Create())
{
   rsa.ImportParameters(rsaParameters);
   // Other code to execute using the RSA instance.
}
```

```vb
' Before .NET Framework 4.7.2
Using rsa = RSA.Create()
   rsa.ImportParameters(rsaParameters)
   ' Other code to execute using the rsa instance.
End Using
```
<span data-ttu-id="640c3-145">на код, подобный этому:</span><span class="sxs-lookup"><span data-stu-id="640c3-145">with code like this:</span></span>
```csharp
// Starting with .NET Framework 4.7.2
using (RSA rsa = RSA.Create(rsaParameters))
{
   // Other code to execute using the rsa instance.
}
```
```vb
' Starting with .NET Framework 4.7.2
Using rsa = RSA.Create(rsaParameters)
   ' Other code to execute using the rsa instance.
End Using
```

<span data-ttu-id="640c3-146">Методы <xref:System.Security.Cryptography.DSA.Create(System.Int32)?displayProperty=nameWithType> и <xref:System.Security.Cryptography.RSA.Create(System.Int32)?displayProperty=nameWithType> позволяют создавать новые ключи <xref:System.Security.Cryptography.DSA> или <xref:System.Security.Cryptography.RSA> с указанным размером.</span><span class="sxs-lookup"><span data-stu-id="640c3-146">The <xref:System.Security.Cryptography.DSA.Create(System.Int32)?displayProperty=nameWithType> and <xref:System.Security.Cryptography.RSA.Create(System.Int32)?displayProperty=nameWithType> methods let you generate new <xref:System.Security.Cryptography.DSA> or <xref:System.Security.Cryptography.RSA> keys with a specific key size.</span></span> <span data-ttu-id="640c3-147">Например:</span><span class="sxs-lookup"><span data-stu-id="640c3-147">For example:</span></span>

```csharp
using (DSA dsa = DSA.Create(2048))
{
   // Other code to execute using the dsa instance.
}
```

```vb
Using dsa = DSA.Create(2048)
   ' Other code to execute using the dsa instance.
End Using
```

**<span data-ttu-id="640c3-148">Конструкторы Rfc2898DeriveBytes принимают имя хэш-алгоритма</span><span class="sxs-lookup"><span data-stu-id="640c3-148">Rfc2898DeriveBytes constructors accept a hash algorithm name</span></span>**

<span data-ttu-id="640c3-149">Класс <xref:System.Security.Cryptography.Rfc2898DeriveBytes> содержит три новых конструктора с параметром <xref:System.Security.Cryptography.HashAlgorithmName>, который определяет алгоритм HMAC для использования при создании производных ключей.</span><span class="sxs-lookup"><span data-stu-id="640c3-149">The <xref:System.Security.Cryptography.Rfc2898DeriveBytes> class has three new constructors with a <xref:System.Security.Cryptography.HashAlgorithmName> parameter that identifies the HMAC algorithm to use when deriving keys.</span></span> <span data-ttu-id="640c3-150">Вместо SHA-1 разработчикам следует использовать HMAC на основе SHA-2, например SHA-256, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="640c3-150">Instead of using SHA-1, developers should use a SHA-2-based HMAC like SHA-256, as shown in the following example:</span></span>

```csharp
private static byte[] DeriveKey(string password, out int iterations, out byte[] salt,
                                out HashAlgorithmName algorithm)
{
   iterations = 100000;
   algorithm = HashAlgorithmName.SHA256;

   const int SaltSize = 32;
   const int DerivedValueSize = 32;

   using (Rfc2898DeriveBytes pbkdf2 = new Rfc2898DeriveBytes(password, SaltSize,
                                                             iterations, algorithm))
   {
      salt = pbkdf2.Salt;
      return pbkdf2.GetBytes(DerivedValueSize);
   }
}
```

```vb
Private Shared Function DeriveKey(password As String, ByRef iterations As Integer,
                                  ByRef salt AS Byte(), ByRef algorithm As HashAlgorithmName) As Byte()
   iterations = 100000
   algorithm = HashAlgorithmName.SHA256

   Const SaltSize As Integer = 32
   Const  DerivedValueSize As Integer = 32

   Using pbkdf2 = New Rfc2898DeriveBytes(password, SaltSize, iterations, algorithm)
      salt = pbkdf2.Salt
      Return pbkdf2.GetBytes(DerivedValueSize)
   End Using
End Function
```

**<span data-ttu-id="640c3-151">Поддержка временных ключей</span><span class="sxs-lookup"><span data-stu-id="640c3-151">Support for ephemeral keys</span></span>**

<span data-ttu-id="640c3-152">При импорте PFX-файла можно загрузить закрытые ключи непосредственно из памяти, минуя жесткий диск.</span><span class="sxs-lookup"><span data-stu-id="640c3-152">PFX import can optionally load private keys directly from memory, bypassing the hard drive.</span></span><span data-ttu-id="640c3-153"> Если в конструкторе <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> или в одной из перегрузок метода <xref:System.Security.Cryptography.X509Certificates.X509Certificate2.Import%2A?displayProperty=nameWithType> указан новый флаг <xref:System.Security.Cryptography.X509Certificates.X509KeyStorageFlags.EphemeralKeySet?displayProperty=nameWithType>, закрытые ключи будут загружены в качестве временных ключей.</span><span class="sxs-lookup"><span data-stu-id="640c3-153"> When the new <xref:System.Security.Cryptography.X509Certificates.X509KeyStorageFlags.EphemeralKeySet?displayProperty=nameWithType> flag is specified in an <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> constructor or one of the overloads of the <xref:System.Security.Cryptography.X509Certificates.X509Certificate2.Import%2A?displayProperty=nameWithType> method, the private keys will be loaded as ephemeral keys.</span></span> <span data-ttu-id="640c3-154">Благодаря этому ключи невидимы на диске.</span><span class="sxs-lookup"><span data-stu-id="640c3-154">This prevents the keys from being visible on the disk.</span></span> <span data-ttu-id="640c3-155">Но:</span><span class="sxs-lookup"><span data-stu-id="640c3-155">However:</span></span>

- <span data-ttu-id="640c3-156">поскольку ключи не сохраняются на диске, сертификаты, загруженные с этим флагом, не являются подходящими кандидатами для добавления в X509Store.</span><span class="sxs-lookup"><span data-stu-id="640c3-156">Since the keys are not persisted to disk, certificates loaded with this flag are not good candidates to add to an X509Store.</span></span>

- <span data-ttu-id="640c3-157">Ключи, загруженные таким образом, почти всегда загружаются через Windows CNG.</span><span class="sxs-lookup"><span data-stu-id="640c3-157">Keys loaded in this manner are almost always loaded via Windows CNG.</span></span> <span data-ttu-id="640c3-158">Поэтому вызывающие объекты должны получить закрытый ключ путем вызова методов расширения, таких как [cert.GetRSAPrivateKey()](xref:System.Security.Cryptography.X509Certificates.RSACertificateExtensions.GetRSAPrivateKey%2A).</span><span class="sxs-lookup"><span data-stu-id="640c3-158">Therefore, callers must access the private key by calling extension methods, such as [cert.GetRSAPrivateKey()](xref:System.Security.Cryptography.X509Certificates.RSACertificateExtensions.GetRSAPrivateKey%2A).</span></span> <span data-ttu-id="640c3-159">Свойство <xref:System.Security.Cryptography.X509Certificates.X509Certificate2.PrivateKey?displayProperty=nameWithType> не работает.</span><span class="sxs-lookup"><span data-stu-id="640c3-159">The <xref:System.Security.Cryptography.X509Certificates.X509Certificate2.PrivateKey?displayProperty=nameWithType> property does not function.</span></span>

- <span data-ttu-id="640c3-160">Поскольку свойство <xref:System.Security.Cryptography.X509Certificates.X509Certificate2.PrivateKey?displayProperty=nameWithType> из прежних версий не работает с сертификатами, разработчики должны выполнить тщательное тестирование перед переключением на временные ключи.</span><span class="sxs-lookup"><span data-stu-id="640c3-160">Since the legacy <xref:System.Security.Cryptography.X509Certificates.X509Certificate2.PrivateKey?displayProperty=nameWithType> property does not work with certificates, developers should perform rigorous testing before switching to ephemeral keys.</span></span>

**<span data-ttu-id="640c3-161">Программное создание запросов подписи сертификата PKCS#10 и сертификатов открытого ключа X.509</span><span class="sxs-lookup"><span data-stu-id="640c3-161">Programmatic creation of PKCS#10 certification signing requests and X.509 public key certificates</span></span>**

<span data-ttu-id="640c3-162">Начиная с .NET Framework 4.7.2 рабочие нагрузки могут создавать запросы подписи сертификата (CSR), что позволяет размещать создание запросов на сертификат в существующих средствах.</span><span class="sxs-lookup"><span data-stu-id="640c3-162">Starting with the .NET Framework 4.7.2, workloads can generate certificate signing requests (CSRs), which allows certificate request generation to be staged into existing tooling.</span></span> <span data-ttu-id="640c3-163">Это бывает удобно при тестировании.</span><span class="sxs-lookup"><span data-stu-id="640c3-163">This is frequently useful in test scenarios.</span></span>

<span data-ttu-id="640c3-164">Дополнительные сведения и примеры кода см. в разделе "Программное создание запросов подписи сертификата PKCS#10 и сертификатов открытого ключа X.509" в [блоге .NET](https://devblogs.microsoft.com/dotnet/net-framework-4-7-2-developer-pack-early-access-build-3056-is-available/).</span><span class="sxs-lookup"><span data-stu-id="640c3-164">For more information and code examples, see "Programmatic creation of PKCS#10 certification signing requests and X.509 public key certificates" in the [.NET Blog](https://devblogs.microsoft.com/dotnet/net-framework-4-7-2-developer-pack-early-access-build-3056-is-available/).</span></span>

**<span data-ttu-id="640c3-165">Новые элементы SignerInfo</span><span class="sxs-lookup"><span data-stu-id="640c3-165">New SignerInfo members</span></span>**

<span data-ttu-id="640c3-166">Начиная с .NET Framework 4.7.2 класс <xref:System.Security.Cryptography.Pkcs.SignerInfo> предоставляет дополнительные сведения о подписи.</span><span class="sxs-lookup"><span data-stu-id="640c3-166">Starting with the .NET Framework 4.7.2, the <xref:System.Security.Cryptography.Pkcs.SignerInfo> class exposes more information about the signature.</span></span> <span data-ttu-id="640c3-167">Вы можете извлечь значение свойства <xref:System.Security.Cryptography.Pkcs.SignerInfo.SignatureAlgorithm?displayProperty=fullName>, чтобы определить алгоритм подписи, который использовался подписывающим объектом.</span><span class="sxs-lookup"><span data-stu-id="640c3-167">You can retrieve the value of the <xref:System.Security.Cryptography.Pkcs.SignerInfo.SignatureAlgorithm?displayProperty=fullName> property to determine the signature algorithm used by the signer.</span></span> <xref:System.Security.Cryptography.Pkcs.SignerInfo.GetSignature%2A?displayProperty=nameWithType> <span data-ttu-id="640c3-168">позволит получить копию криптографической подписи для этого подписывающего объекта.</span><span class="sxs-lookup"><span data-stu-id="640c3-168">can be called to get a copy of the cryptographic signature for this signer.</span></span>

**<span data-ttu-id="640c3-169">Упакованный поток остается открытым после удаления CryptoStream</span><span class="sxs-lookup"><span data-stu-id="640c3-169">Leaving a wrapped stream open after CryptoStream is disposed</span></span>**

<span data-ttu-id="640c3-170">Начиная с .NET Framework 4.7.2 класс <xref:System.Security.Cryptography.CryptoStream> имеет дополнительный конструктор, благодаря которому <xref:System.Security.Cryptography.CryptoStream.Dispose%2A> не закрывает упакованный поток.</span><span class="sxs-lookup"><span data-stu-id="640c3-170">Starting with the .NET Framework 4.7.2, the <xref:System.Security.Cryptography.CryptoStream> class has an additional constructor that allows <xref:System.Security.Cryptography.CryptoStream.Dispose%2A> to not close the wrapped stream.</span></span><span data-ttu-id="640c3-171"> Чтобы оставить упакованный поток открытым после удаления экземпляра <xref:System.Security.Cryptography.CryptoStream>, вызовите новый конструктор <xref:System.Security.Cryptography.CryptoStream> следующим образом:</span><span class="sxs-lookup"><span data-stu-id="640c3-171"> To leave the wrapped stream open after the <xref:System.Security.Cryptography.CryptoStream> instance is disposed, call the new <xref:System.Security.Cryptography.CryptoStream> constructor as follows:</span></span>

```csharp
var cStream = new CryptoStream(stream, transform, mode, leaveOpen: true);
```

```vb
Dim cStream = New CryptoStream(stream, transform, mode, leaveOpen:=true)
```

**<span data-ttu-id="640c3-172">Изменения распаковки в DeflateStream</span><span class="sxs-lookup"><span data-stu-id="640c3-172">Decompression changes in DeflateStream</span></span>**

<span data-ttu-id="640c3-173">Начиная с .NET Framework 4.7.2 реализация операций распаковки в классе <xref:System.IO.Compression.DeflateStream> была изменена и теперь использует собственные API Windows по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="640c3-173">Starting with the .NET Framework 4.7.2, the implementation of decompression operations in the <xref:System.IO.Compression.DeflateStream> class has changed to use native Windows APIs by default.</span></span> <span data-ttu-id="640c3-174">Как правило, это приводит к значительному повышению производительности.</span><span class="sxs-lookup"><span data-stu-id="640c3-174">Typically, this results in a substantial performance improvement.</span></span>

<span data-ttu-id="640c3-175">Поддержка распаковки с помощью API Windows включена по умолчанию для приложений, нацеленных на .NET Framework 4.7.2.</span><span class="sxs-lookup"><span data-stu-id="640c3-175">Support for decompression by using Windows APIs is enabled by default for applications that target .NET Framework 4.7.2.</span></span> <span data-ttu-id="640c3-176">Для приложений, которые предназначены для более ранних версий .NET Framework, но выполняются в .NET Framework 4.7.2, новое поведение можно активировать отдельно, добавив следующий [переключатель AppContext](../configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) в файл конфигурации приложений:</span><span class="sxs-lookup"><span data-stu-id="640c3-176">Applications that target earlier versions of .NET Framework but are running under .NET Framework 4.7.2 can opt into this behavior by adding the following [AppContext switch](../configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) to the application configuration file:</span></span>

```xml
<AppContextSwitchOverrides value="Switch.System.IO.Compression.DoNotUseNativeZipLibraryForDecompression=false" />
```

**<span data-ttu-id="640c3-177">Дополнительные коллекции API</span><span class="sxs-lookup"><span data-stu-id="640c3-177">Additional collection APIs</span></span>**

<span data-ttu-id="640c3-178">В .NET Framework 4.7.2 добавлено несколько новых API для типов <xref:System.Collections.Generic.SortedSet%601> и <xref:System.Collections.Generic.HashSet%601>.</span><span class="sxs-lookup"><span data-stu-id="640c3-178">The .NET Framework 4.7.2 adds a number of new APIs to the <xref:System.Collections.Generic.SortedSet%601> and <xref:System.Collections.Generic.HashSet%601> types.</span></span> <span data-ttu-id="640c3-179">Сюда входит следующее.</span><span class="sxs-lookup"><span data-stu-id="640c3-179">These include:</span></span>

- `TryGetValue` <span data-ttu-id="640c3-180">— методы, которые делают шаблон try, используемый в других типах коллекций, доступным для этих двух типов.</span><span class="sxs-lookup"><span data-stu-id="640c3-180">methods, which extend the try pattern used in other collection types to these two types.</span></span> <span data-ttu-id="640c3-181">Вот эти методы:</span><span class="sxs-lookup"><span data-stu-id="640c3-181">The methods are:</span></span>

   - [<span data-ttu-id="640c3-182">public bool HashSet\<T>.TryGetValue(T equalValue, out T actualValue);</span><span class="sxs-lookup"><span data-stu-id="640c3-182">public bool HashSet\<T>.TryGetValue(T equalValue, out T actualValue)</span></span>](xref:System.Collections.Generic.SortedSet%601.TryGetValue%2A)
   - [<span data-ttu-id="640c3-183">public bool SortedSet\<T>.TryGetValue(T equalValue, out T actualValue).</span><span class="sxs-lookup"><span data-stu-id="640c3-183">public bool SortedSet\<T>.TryGetValue(T equalValue, out T actualValue)</span></span>](xref:System.Collections.Generic.SortedSet%601.TryGetValue%2A)

- `Enumerable.To*` <span data-ttu-id="640c3-184">— методы расширения, которые преобразуют коллекцию в <xref:System.Collections.Generic.HashSet%601>:</span><span class="sxs-lookup"><span data-stu-id="640c3-184">extension methods, which convert a collection to a <xref:System.Collections.Generic.HashSet%601>:</span></span>

   - [<span data-ttu-id="640c3-185">public static HashSet\<TSource> ToHashSet\<TSource>(this IEnumerable\<TSource> source);</span><span class="sxs-lookup"><span data-stu-id="640c3-185">public static HashSet\<TSource> ToHashSet\<TSource>(this IEnumerable\<TSource> source)</span></span>](xref:System.Linq.Enumerable.ToHashSet%2A)
   - [<span data-ttu-id="640c3-186">public static HashSet\<TSource> ToHashSet\<TSource>(this IEnumerable\<TSource> source, IEqualityComparer\<TSource> comparer).</span><span class="sxs-lookup"><span data-stu-id="640c3-186">public static HashSet\<TSource> ToHashSet\<TSource>(this IEnumerable\<TSource> source, IEqualityComparer\<TSource> comparer)</span></span>](xref:System.Linq.Enumerable.ToHashSet%2A)

- <span data-ttu-id="640c3-187">Новые конструкторы <xref:System.Collections.Generic.HashSet%601>, которые позволяют задать емкость коллекции и повысить производительность, если размер <xref:System.Collections.Generic.HashSet%601> известен заранее:</span><span class="sxs-lookup"><span data-stu-id="640c3-187">New <xref:System.Collections.Generic.HashSet%601> constructors that let you set the collection's capacity, which yields a performance benefit when you know the size of the <xref:System.Collections.Generic.HashSet%601> in advance:</span></span>

   - [<span data-ttu-id="640c3-188">public HashSet(int capacity);</span><span class="sxs-lookup"><span data-stu-id="640c3-188">public HashSet(int capacity)</span></span>](xref:System.Collections.Generic.HashSet%601.%23ctor(System.Int32))
   - [<span data-ttu-id="640c3-189">public HashSet(int capacity, IEqualityComparer\<T> comparer).</span><span class="sxs-lookup"><span data-stu-id="640c3-189">public HashSet(int capacity, IEqualityComparer\<T> comparer)</span></span>](xref:System.Collections.Generic.HashSet%601.%23ctor(System.Int32,System.Collections.Generic.IEqualityComparer%7B%600%7D))

<span data-ttu-id="640c3-190">Класс <xref:System.Collections.Concurrent.ConcurrentDictionary%602> включает новые перегрузки методов <xref:System.Collections.Concurrent.ConcurrentDictionary%602.AddOrUpdate%2A> и <xref:System.Collections.Concurrent.ConcurrentDictionary%602.GetOrAdd%2A>, чтобы извлечь значение из словаря или добавить его, если оно не найдено, а также добавить значение в словарь или обновить его, если оно уже существует.</span><span class="sxs-lookup"><span data-stu-id="640c3-190">The <xref:System.Collections.Concurrent.ConcurrentDictionary%602> class includes new overloads of the <xref:System.Collections.Concurrent.ConcurrentDictionary%602.AddOrUpdate%2A> and <xref:System.Collections.Concurrent.ConcurrentDictionary%602.GetOrAdd%2A> methods to retrieve a value from the dictionary or to add it if it is not found, and to add a value to the dictionary or to update it if it already exists.</span></span>

```csharp
public TValue AddOrUpdate<TArg>(TKey key, Func<TKey, TArg, TValue> addValueFactory, Func<TKey, TValue, TArg, TValue> updateValueFactory, TArg factoryArgument)

public TValue GetOrAdd<TArg>(TKey key, Func<TKey, TArg, TValue> valueFactory, TArg factoryArgument)
```

```vb
Public AddOrUpdate(Of TArg)(key As TKey, addValueFactory As Func(Of TKey, TArg, TValue), updateValueFactory As Func(Of TKey, TValue, TArg, TValue), factoryArgument As TArg) As TValue

Public GetOrAdd(Of TArg)(key As TKey, valueFactory As Func(Of TKey, TArg, TValue), factoryArgument As TArg) As TValue
```

<a name="asp-net472" />

#### <a name="aspnet"></a><span data-ttu-id="640c3-191">ASP.NET</span><span class="sxs-lookup"><span data-stu-id="640c3-191">ASP.NET</span></span>

**<span data-ttu-id="640c3-192">Поддержка внедрения зависимостей в веб-формах</span><span class="sxs-lookup"><span data-stu-id="640c3-192">Support for dependency injection in Web Forms</span></span>**

<span data-ttu-id="640c3-193">[Внедрение зависимостей (DI)](/aspnet/core/fundamentals/dependency-injection#overview-of-dependency-injection) разрывает связь объектов и их зависимостей, чтобы код объекта не пришлось менять только потому, что изменилась зависимость.</span><span class="sxs-lookup"><span data-stu-id="640c3-193">[Dependency injection (DI)](/aspnet/core/fundamentals/dependency-injection#overview-of-dependency-injection) decouples objects and their dependencies so that an object's code no longer needs to be changed just because a dependency has changed.</span></span> <span data-ttu-id="640c3-194">При разработке приложений ASP.NET, ориентированных на .NET Framework 4.7.2, вы можете:</span><span class="sxs-lookup"><span data-stu-id="640c3-194">When developing ASP.NET applications that target the .NET Framework 4.7.2, you can:</span></span>

- <span data-ttu-id="640c3-195">Использовать внедрение на базе метода задания, интерфейса или конструктора в [обработчиках и модулях](https://docs.microsoft.com/previous-versions/aspnet/bb398986(v=vs.100)), [экземплярах страницы](xref:System.Web.UI.Page) и [пользовательских элементах управления](https://docs.microsoft.com/previous-versions/aspnet/y6wb1a0e(v=vs.100)) из проектов веб-приложений ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="640c3-195">Use setter-based, interface-based, and constructor-based injection in [handlers and modules](https://docs.microsoft.com/previous-versions/aspnet/bb398986(v=vs.100)), [Page instances](xref:System.Web.UI.Page), and [user controls](https://docs.microsoft.com/previous-versions/aspnet/y6wb1a0e(v=vs.100)) of ASP.NET web application projects.</span></span>

- <span data-ttu-id="640c3-196">Использовать внедрение на базе метода задания и интерфейса в [обработчиках и модулях](https://docs.microsoft.com/previous-versions/aspnet/bb398986(v=vs.100)), [экземплярах страницы](xref:System.Web.UI.Page) и [пользовательских элементах управления](https://docs.microsoft.com/previous-versions/aspnet/y6wb1a0e(v=vs.100)) из проектов веб-сайтов ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="640c3-196">Use setter-based and interface-based injection in [handlers and modules](https://docs.microsoft.com/previous-versions/aspnet/bb398986(v=vs.100)), [Page instances](xref:System.Web.UI.Page), and [user controls](https://docs.microsoft.com/previous-versions/aspnet/y6wb1a0e(v=vs.100)) of ASP.NET web site projects.</span></span>

- <span data-ttu-id="640c3-197">Подключать другие платформы внедрения зависимостей.</span><span class="sxs-lookup"><span data-stu-id="640c3-197">Plug in different dependency injection frameworks.</span></span>

**<span data-ttu-id="640c3-198">Поддержка файлов cookie SameSite</span><span class="sxs-lookup"><span data-stu-id="640c3-198">Support for same-site cookies</span></span>**

<span data-ttu-id="640c3-199">[SameSite](https://tools.ietf.org/html/draft-west-first-party-cookies-07) запрещает браузеру отправлять файл cookie вместе с межсайтовым запросом.</span><span class="sxs-lookup"><span data-stu-id="640c3-199">[SameSite](https://tools.ietf.org/html/draft-west-first-party-cookies-07) prevents a browser from sending a cookie along with a cross-site request.</span></span> <span data-ttu-id="640c3-200">В .NET Framework 4.7.2 добавлено свойство <xref:System.Web.HttpCookie.SameSite?displayProperty=nameWithType>, значение которого является членом перечисления <xref:System.Web.SameSiteMode?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-200">The .NET Framework 4.7.2 adds a <xref:System.Web.HttpCookie.SameSite?displayProperty=nameWithType> property whose value is a <xref:System.Web.SameSiteMode?displayProperty=nameWithType> enumeration member.</span></span> <span data-ttu-id="640c3-201">Если его значение равно <xref:System.Web.SameSiteMode.Strict?displayProperty=nameWithType> или <xref:System.Web.SameSiteMode.Lax?displayProperty=nameWithType>, ASP.NET добавляет атрибут `SameSite` в заголовок set-cookie.</span><span class="sxs-lookup"><span data-stu-id="640c3-201">If its value is <xref:System.Web.SameSiteMode.Strict?displayProperty=nameWithType> or <xref:System.Web.SameSiteMode.Lax?displayProperty=nameWithType>, ASP.NET adds the `SameSite` attribute to the set-cookie header.</span></span> <span data-ttu-id="640c3-202">Поддержка SameSite действует для объектов <xref:System.Web.HttpCookie>, а также для файлов cookie <xref:System.Web.Security.FormsAuthentication> и <xref:System.Web.SessionState>.</span><span class="sxs-lookup"><span data-stu-id="640c3-202">SameSite support applies to <xref:System.Web.HttpCookie> objects, as well as to <xref:System.Web.Security.FormsAuthentication> and <xref:System.Web.SessionState> cookies.</span></span>

<span data-ttu-id="640c3-203">Вы можете задать SameSite для объекта <xref:System.Web.HttpCookie> следующим образом:</span><span class="sxs-lookup"><span data-stu-id="640c3-203">You can set SameSite for an <xref:System.Web.HttpCookie> object as follows:</span></span>

```csharp
var c = new HttpCookie("secureCookie", "same origin");
c.SameSite = SameSiteMode.Lax;
```

```vb
Dim c As New HttpCookie("secureCookie", "same origin")
c.SameSite = SameSiteMode.Lax
```
<span data-ttu-id="640c3-204">Файлы cookie SameSite также можно настроить на уровне приложения, изменив файл web.config:</span><span class="sxs-lookup"><span data-stu-id="640c3-204">You can also configure SameSite cookies at the application level by modifying the web.config file:</span></span>

```xml
<system.web>
   <httpCookies sameSite="Strict" />
</system.web>
```
<span data-ttu-id="640c3-205">Вы можете добавить SameSite для файлов cookie <xref:System.Web.Security.FormsAuthentication> и <xref:System.Web.SessionState>, изменив файл веб-конфигурации:</span><span class="sxs-lookup"><span data-stu-id="640c3-205">You can add SameSite for <xref:System.Web.Security.FormsAuthentication> and <xref:System.Web.SessionState> cookies by modifying the web config file:</span></span>

```xml
<system.web>
   <authentication mode="Forms">
      <forms cookieSameSite="Lax">
         <!-- ...   -->
      </forms>
   <authentication />
   <sessionSate cookieSameSite="Lax"></sessionState>
</system.web>
```

<a name="net472" />

#### <a name="networking"></a><span data-ttu-id="640c3-206">Сетевое взаимодействие</span><span class="sxs-lookup"><span data-stu-id="640c3-206">Networking</span></span>

**<span data-ttu-id="640c3-207">Реализация свойств HttpClientHandler</span><span class="sxs-lookup"><span data-stu-id="640c3-207">Implementation of HttpClientHandler properties</span></span>**

<span data-ttu-id="640c3-208">В .NET Framework 4.7.1 добавлено восемь свойств класса <xref:System.Net.Http.HttpClientHandler?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-208">The .NET Framework 4.7.1 added eight properties to the <xref:System.Net.Http.HttpClientHandler?displayProperty=nameWithType> class.</span></span> <span data-ttu-id="640c3-209">Но два из них вызывали исключение <xref:System.PlatformNotSupportedException>.</span><span class="sxs-lookup"><span data-stu-id="640c3-209">However, two threw a <xref:System.PlatformNotSupportedException>.</span></span> <span data-ttu-id="640c3-210">Платформа .NET Framework 4.7.2 теперь предоставляет реализацию этих свойств.</span><span class="sxs-lookup"><span data-stu-id="640c3-210">The .NET Framework 4.7.2 now provides an implementation for these properties.</span></span> <span data-ttu-id="640c3-211">Это следующие свойства:</span><span class="sxs-lookup"><span data-stu-id="640c3-211">The properties are:</span></span>

- <xref:System.Net.Http.HttpClientHandler.CheckCertificateRevocationList>
- <xref:System.Net.Http.HttpClientHandler.SslProtocols>

<a name="sql472" />

#### <a name="sqlclient"></a><span data-ttu-id="640c3-212">SQLClient</span><span class="sxs-lookup"><span data-stu-id="640c3-212">SQLClient</span></span>

**<span data-ttu-id="640c3-213">Поддержка универсальной и многофакторной проверки подлинности Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="640c3-213">Support for Azure Active Directory Universal Authentication and Multi-Factor authentication</span></span>**

<span data-ttu-id="640c3-214">В соответствии с более строгими требованиями к безопасности и соблюдению норм многим клиентам приходится использовать многофакторную проверку подлинности (MFA).</span><span class="sxs-lookup"><span data-stu-id="640c3-214">Growing compliance and security demands require that many customers use multi-factor authentication (MFA).</span></span> <span data-ttu-id="640c3-215">Кроме того, в настоящее время не рекомендуется включать пароли пользователей непосредственно в строки подключения.</span><span class="sxs-lookup"><span data-stu-id="640c3-215">In addition, current best practices discourage including user passwords directly in connection strings.</span></span> <span data-ttu-id="640c3-216">В связи с этими изменениями в .NET Framework 4.7.2 [строки подключения SQLClient](xref:System.Data.SqlClient.SqlConnection.ConnectionString) теперь имеют новое значение "Active Directory Interactive" для существующего ключевого слова "Проверка подлинности", чтобы обеспечить многофакторную проверку подлинности и [проверку подлинности Azure AD](/azure/sql-database/sql-database-aad-authentication-configure).</span><span class="sxs-lookup"><span data-stu-id="640c3-216">To support these changes, the .NET Framework 4.7.2 extends [SQLClient connection strings](xref:System.Data.SqlClient.SqlConnection.ConnectionString) by adding a new value, "Active Directory Interactive", for the existing "Authentication" keyword to support MFA and [Azure AD Authentication](/azure/sql-database/sql-database-aad-authentication-configure).</span></span> <span data-ttu-id="640c3-217">Новый интерактивный метод поддерживает собственных и федеративных пользователей Azure AD, а также гостевых пользователей Azure AD.</span><span class="sxs-lookup"><span data-stu-id="640c3-217">The new interactive method supports native and federated Azure AD users as well as Azure AD guest users.</span></span> <span data-ttu-id="640c3-218">При использовании этого метода многофакторная проверка подлинности, требуемая Azure AD, поддерживается для баз данных SQL.</span><span class="sxs-lookup"><span data-stu-id="640c3-218">When this method is used, the MFA authentication imposed by Azure AD is supported for SQL databases.</span></span> <span data-ttu-id="640c3-219">Кроме того, процесс проверки подлинности запрашивает у пользователя пароль в соответствии с рекомендациями по обеспечению безопасности.</span><span class="sxs-lookup"><span data-stu-id="640c3-219">In addition, the authentication process requests a user password to adhere to security best practices.</span></span>

<span data-ttu-id="640c3-220">В предыдущих версиях платформы .NET Framework подключение SQL поддерживало только параметры <xref:System.Data.SqlClient.SqlAuthenticationMethod.ActiveDirectoryPassword?displayProperty=nameWithType> и <xref:System.Data.SqlClient.SqlAuthenticationMethod.ActiveDirectoryIntegrated?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-220">In previous versions of the .NET Framework, SQL connectivity supported only the <xref:System.Data.SqlClient.SqlAuthenticationMethod.ActiveDirectoryPassword?displayProperty=nameWithType> and <xref:System.Data.SqlClient.SqlAuthenticationMethod.ActiveDirectoryIntegrated?displayProperty=nameWithType> options.</span></span> <span data-ttu-id="640c3-221">Оба параметра входят в неинтерактивный [протокол ADAL](/azure/active-directory/develop/active-directory-authentication-libraries), который не поддерживает многофакторную проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="640c3-221">Both of these are part of the non-interactive [ADAL protocol](/azure/active-directory/develop/active-directory-authentication-libraries), which does not support MFA.</span></span> <span data-ttu-id="640c3-222">С новым параметром <xref:System.Data.SqlClient.SqlAuthenticationMethod.ActiveDirectoryInteractive?displayProperty=nameWithType> подключение SQL поддерживает многофакторную проверку подлинности, а также существующие методы проверки подлинности (пароль и встроенная проверка подлинности), что позволяет пользователям вводить пароли в интерактивном режиме без их сохранения в строке подключения.</span><span class="sxs-lookup"><span data-stu-id="640c3-222">With the new <xref:System.Data.SqlClient.SqlAuthenticationMethod.ActiveDirectoryInteractive?displayProperty=nameWithType> option, SQL connectivity supports MFA as well as existing authentication methods (password and integrated authentication), which allows users to enter user passwords interactively without persisting passwords in the connection string.</span></span>

<span data-ttu-id="640c3-223">Дополнительные сведения и пример см. в разделе "Поддержка универсальной и многофакторной проверки подлинности SQL — Azure AD" в [блоге о .NET](https://devblogs.microsoft.com/dotnet/net-framework-4-7-2-developer-pack-early-access-build-3056-is-available/).</span><span class="sxs-lookup"><span data-stu-id="640c3-223">For more information and an example, see "SQL -- Azure AD Universal and Multi-factor Authentication Support" in the [.NET Blog](https://devblogs.microsoft.com/dotnet/net-framework-4-7-2-developer-pack-early-access-build-3056-is-available/).</span></span>

**<span data-ttu-id="640c3-224">Поддержка Always Encrypted версии 2</span><span class="sxs-lookup"><span data-stu-id="640c3-224">Support for Always Encrypted version 2</span></span>**

<span data-ttu-id="640c3-225">В NET Framework 4.7.2 добавлена поддержка Always Encrypted на основе анклава.</span><span class="sxs-lookup"><span data-stu-id="640c3-225">NET Framework 4.7.2 adds supports for enclave-based Always Encrypted.</span></span> <span data-ttu-id="640c3-226">Исходная версия Always Encrypted — это технология шифрования на стороне клиента, в рамках которой ключи шифрования никогда не покидали клиента.</span><span class="sxs-lookup"><span data-stu-id="640c3-226">The original version of Always Encrypted is a client-side encryption technology in which encryption keys never leave the client.</span></span> <span data-ttu-id="640c3-227">В Always Encrypted на основе анклава клиент может при необходимости отправлять ключи шифрования в безопасный анклав, который является защищенным вычислительным объектом и может считаться частью SQL Server, но код SQL Server не может его изменить.</span><span class="sxs-lookup"><span data-stu-id="640c3-227">In enclave-based Always Encrypted, the client can optionally send the encryption keys to a secure enclave, which is a secure computational entity that can be considered part of SQL Server but that SQL Server code cannot tamper with.</span></span> <span data-ttu-id="640c3-228">Чтобы обеспечить поддержку Always Encrypted на основе анклава в .NET Framework 4.7.2 добавлены следующие типы и члены для пространства имен <xref:System.Data.SqlClient>:</span><span class="sxs-lookup"><span data-stu-id="640c3-228">To support enclave-based Always Encrypted, the .NET Framework 4.7.2 adds the following types and members to the <xref:System.Data.SqlClient> namespace:</span></span>

- <xref:System.Data.SqlClient.SqlConnectionStringBuilder.EnclaveAttestationUrl?displayProperty=nameWithType><span data-ttu-id="640c3-229">— указывает URI для Always Encrypted на основе анклава.</span><span class="sxs-lookup"><span data-stu-id="640c3-229">, which specifies the Uri for enclave-based Always Encrypted.</span></span>

- <xref:System.Data.SqlClient.SqlColumnEncryptionEnclaveProvider><span data-ttu-id="640c3-230">— абстрактный класс, из которого происходят все поставщики анклавов.</span><span class="sxs-lookup"><span data-stu-id="640c3-230">, which is an abstract class from which all enclave providers are derived.</span></span>

- <xref:System.Data.SqlClient.SqlEnclaveSession><span data-ttu-id="640c3-231">— инкапсулирует состояние определенного сеанса анклава.</span><span class="sxs-lookup"><span data-stu-id="640c3-231">, which encapsulates the state for a given enclave session.</span></span>

- <xref:System.Data.SqlClient.SqlEnclaveAttestationParameters><span data-ttu-id="640c3-232">— предоставляет параметры подтверждения, используемые SQL Server для получения сведений, необходимых для выполнения определенного протокола подтверждения.</span><span class="sxs-lookup"><span data-stu-id="640c3-232">, which provides the attestation parameters used by SQL Server to get information required to execute a particular Attestation Protocol.</span></span>

<span data-ttu-id="640c3-233">Файл конфигурации приложения указывает конкретную реализацию абстрактного класса <xref:System.Data.SqlClient.SqlColumnEncryptionEnclaveProvider?displayProperty=nameWithType>, который предоставляет функциональные возможности для поставщика анклава.</span><span class="sxs-lookup"><span data-stu-id="640c3-233">The application configuration file then specifies a concrete implementation of the abstract <xref:System.Data.SqlClient.SqlColumnEncryptionEnclaveProvider?displayProperty=nameWithType> class that provides the functionality for the enclave provider.</span></span> <span data-ttu-id="640c3-234">Например:</span><span class="sxs-lookup"><span data-stu-id="640c3-234">For example:</span></span>

```xml
<configuration>
  <configSections>
    <section name="SqlColumnEncryptionEnclaveProviders" type="System.Data.SqlClient.SqlColumnEncryptionEnclaveProviderConfigurationSection,System.Data,Version=4.0.0.0,Culture=neutral,PublicKeyToken=b77a5c561934e089"/> 
  </configSections>
  <SqlColumnEncryptionEnclaveProviders>
    <providers>
      <add name="Azure" type="Microsoft.SqlServer.Management.AlwaysEncrypted.AzureEnclaveProvider,MyApp"/>
      <add name="HGS" type="Microsoft.SqlServer.Management.AlwaysEncrypted.HGSEnclaveProvider,MyApp" />
    </providers>
  </SqlColumnEncryptionEnclaveProviders >
</configuration>
```

<span data-ttu-id="640c3-235">Базовый поток Always Encrypted на основе анклава:</span><span class="sxs-lookup"><span data-stu-id="640c3-235">The basic flow of enclave-based Always Encrypted is:</span></span>

1. <span data-ttu-id="640c3-236">Пользователь создает подключение AlwaysEncrypted к SQL Server с поддержкой Always Encrypted на основе анклава.</span><span class="sxs-lookup"><span data-stu-id="640c3-236">The user creates an AlwaysEncrypted connection to SQL Server that supported enclave-based Always Encrypted.</span></span> <span data-ttu-id="640c3-237">Драйвер обращается в службу аттестации, чтобы обеспечить подключение к нужному анклаву.</span><span class="sxs-lookup"><span data-stu-id="640c3-237">The driver contacts the attestation service to ensure that it is connecting to right enclave.</span></span>

1. <span data-ttu-id="640c3-238">После аттестации анклава драйвер устанавливает защищенный канал с безопасным анклавом, размещенным на SQL Server.</span><span class="sxs-lookup"><span data-stu-id="640c3-238">Once the enclave has been attested, the driver establishes a secure channel with the secure enclave hosted on SQL Server.</span></span>

1. <span data-ttu-id="640c3-239">Драйвер использует ключи шифрования, авторизованные клиентом, совместно с безопасным анклавом в течение всего соединения SQL.</span><span class="sxs-lookup"><span data-stu-id="640c3-239">The driver shares encryption keys authorized by the client with the secure enclave for the duration of the SQL connection.</span></span>

<a name="wpf472" />

#### <a name="windows-presentation-foundation"></a><span data-ttu-id="640c3-240">Windows Presentation Foundation</span><span class="sxs-lookup"><span data-stu-id="640c3-240">Windows Presentation Foundation</span></span>

**<span data-ttu-id="640c3-241">Поиск ResourceDictionary по источнику</span><span class="sxs-lookup"><span data-stu-id="640c3-241">Finding ResourceDictionaries by Source</span></span>**

<span data-ttu-id="640c3-242">Начиная с .NET Framework 4.7.2 помощник по диагностике может находить словари  <xref:System.Windows.Xps.Packaging.IXpsFixedPageReader.ResourceDictionaries>, созданные из указанного URI источника.</span><span class="sxs-lookup"><span data-stu-id="640c3-242">Starting with the .NET Framework 4.7.2, a diagnostic assistant can locate the <xref:System.Windows.Xps.Packaging.IXpsFixedPageReader.ResourceDictionaries> that have been created from a given source Uri.</span></span><span data-ttu-id="640c3-243"> (Эта функция предназначена для использования помощником по диагностике, а не приложением в производственной среде.) Помощник по диагностике, например средство "Изменить и продолжить" в Visual Studio, позволяет пользователям редактировать ResourceDictionary с целью применить изменения к запущенному приложению.</span><span class="sxs-lookup"><span data-stu-id="640c3-243"> (This feature is for use by diagnostic assistants, not by production applications.) A diagnostic assistant such as Visual Studio’s “Edit-and-Continue” facility lets its user edit a ResourceDictionary with the intent that the changes be applied to the running application.</span></span> <span data-ttu-id="640c3-244">Шагом к достижению этого является поиск всех ResourceDictionary, созданных запущенным приложением из редактируемого словаря.</span><span class="sxs-lookup"><span data-stu-id="640c3-244">One step in achieving this is finding all the ResourceDictionaries that the running application has created from the dictionary that’s being edited.</span></span> <span data-ttu-id="640c3-245">Например, приложение может объявить ResourceDictionary, содержимое которого копируется из определенного источника URI:</span><span class="sxs-lookup"><span data-stu-id="640c3-245">For example, an application can declare a ResourceDictionary whose content is copied from a given source URI:</span></span>

```xml
<ResourceDictionary Source="MyRD.xaml">
```

<span data-ttu-id="640c3-246">Помощник по диагностике, который изменяет исходную разметку в *MyRD.xaml* , может использовать новую функцию для поиска словаря.</span><span class="sxs-lookup"><span data-stu-id="640c3-246">A diagnostic assistant that edits the original markup in *MyRD.xaml* can use the new feature to locate the dictionary.</span></span><span data-ttu-id="640c3-247"> Эта функция реализуется новым статическим методом <xref:System.Windows.Diagnostics.ResourceDictionaryDiagnostics.GetResourceDictionariesForSource%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-247"> The feature is implemented by a new static method, <xref:System.Windows.Diagnostics.ResourceDictionaryDiagnostics.GetResourceDictionariesForSource%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="640c3-248">Помощник по диагностике вызывает новый метод с помощью абсолютного URI, который определяет исходную разметку, как показано в следующем примере кода:</span><span class="sxs-lookup"><span data-stu-id="640c3-248">The diagnostic assistant calls the new method using an absolute Uri that identifies the original markup, as illustrated by the following code:</span></span>

```csharp
IEnumerable<ResourceDictionary> dictionaries = ResourceDictionaryDiagnostics.GetResourceDictionariesForSource(new Uri("pack://application:,,,/MyApp;component/MyRD.xaml"));
```

```vb
Dim dictionaries As IEnumerable(Of ResourceDictionary) = ResourceDictionaryDiagnostics.GetResourceDictionariesForSource(New Uri("pack://application:,,,/MyApp;component/MyRD.xaml"))
```

<span data-ttu-id="640c3-249">Метод возвращает пустое перечисляемое значение, если не включен класс <xref:System.Windows.Diagnostics.VisualDiagnostics> и не указана переменная среды [`ENABLE_XAML_DIAGNOSTICS_SOURCE_INFO`](xref:System.Windows.Diagnostics.VisualDiagnostics.GetXamlSourceInfo%2A) .</span><span class="sxs-lookup"><span data-stu-id="640c3-249">The method returns an empty enumerable unless <xref:System.Windows.Diagnostics.VisualDiagnostics> is enabled and the [`ENABLE_XAML_DIAGNOSTICS_SOURCE_INFO`](xref:System.Windows.Diagnostics.VisualDiagnostics.GetXamlSourceInfo%2A) environment variable is set.</span></span>

**<span data-ttu-id="640c3-250">Поиск владельцев ResourceDictionary</span><span class="sxs-lookup"><span data-stu-id="640c3-250">Finding ResourceDictionary owners</span></span>**

<span data-ttu-id="640c3-251">Начиная с .NET Framework 4.7.2 помощник по диагностике может находить владельцев определенного словаря <xref:Windows.UI.Xaml.ResourceDictionary>.</span><span class="sxs-lookup"><span data-stu-id="640c3-251">Starting with the .NET Framework 4.7.2, a diagnostic assistant can locate the owners of a given <xref:Windows.UI.Xaml.ResourceDictionary>.</span></span><span data-ttu-id="640c3-252"> (Эта функция предназначена для помощников по диагностике, а не приложений в производственной среде.) При каждом изменении <xref:Windows.UI.Xaml.ResourceDictionary> WPF автоматически обнаруживает все ссылки [DynamicResource](../wpf/advanced/dynamicresource-markup-extension.md), на которые может повлиять изменение.</span><span class="sxs-lookup"><span data-stu-id="640c3-252"> (The feature is for use by diagnostic assistants and not by production applications.) Whenever a change is made to a <xref:Windows.UI.Xaml.ResourceDictionary>, WPF automatically finds all [DynamicResource](../wpf/advanced/dynamicresource-markup-extension.md) references that might be affected by the change.</span></span>

<span data-ttu-id="640c3-253">Помощник по диагностике, например средство "Изменить и продолжить" в Visual Studio, может в том числе обрабатывать ссылки [StaticResource](../wpf/advanced/staticresource-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-253">A diagnostic assistant such as Visual Studio’s “Edit-and-Continue” facility may want extend this to handle [StaticResource](../wpf/advanced/staticresource-markup-extension.md) references.</span></span> <span data-ttu-id="640c3-254">Первым этапом этого процесса является поиск владельцев словаря; то есть поиск всех объектов, свойство `Resources` которых ссылается на словарь (напрямую или косвенно через свойство <xref:System.Windows.ResourceDictionary.MergedDictionaries?displayProperty=nameWithType>).</span><span class="sxs-lookup"><span data-stu-id="640c3-254">The first step in this process is to find the owners of the dictionary; that is, to find all the objects whose `Resources` property refers to the dictionary (either directly, or indirectly via the <xref:System.Windows.ResourceDictionary.MergedDictionaries?displayProperty=nameWithType> property).</span></span> <span data-ttu-id="640c3-255">В поддержку этого этапа в классе <xref:System.Windows.Diagnostics.ResourceDictionaryDiagnostics?displayProperty=nameWithType> реализовано три новых статических метода, по одному для каждого базового типа со свойством `Resources`:</span><span class="sxs-lookup"><span data-stu-id="640c3-255">Three new static methods implemented on the <xref:System.Windows.Diagnostics.ResourceDictionaryDiagnostics?displayProperty=nameWithType> class, one for each of the base types that has a `Resources` property, support this step:</span></span>

- [`public static IEnumerable<FrameworkElement> GetFrameworkElementOwners(ResourceDictionary dictionary);`](xref:System.Windows.Diagnostics.ResourceDictionaryDiagnostics.GetFrameworkElementOwners%2A)

- [`public static IEnumerable<FrameworkContentElement> GetFrameworkContentElementOwners(ResourceDictionary dictionary);`](xref:System.Windows.Diagnostics.ResourceDictionaryDiagnostics.GetFrameworkContentElementOwners%2A)

- [`public static IEnumerable<Application> GetApplicationOwners(ResourceDictionary dictionary);`](xref:System.Windows.Diagnostics.ResourceDictionaryDiagnostics.GetApplicationOwners%2A)

<span data-ttu-id="640c3-256">Эти методы возвращают пустое перечисляемое значение, если не включен класс <xref:System.Windows.Diagnostics.VisualDiagnostics> и не указана переменная среды [`ENABLE_XAML_DIAGNOSTICS_SOURCE_INFO`](xref:System.Windows.Diagnostics.VisualDiagnostics.GetXamlSourceInfo%2A) .</span><span class="sxs-lookup"><span data-stu-id="640c3-256">These methods return an empty enumerable unless <xref:System.Windows.Diagnostics.VisualDiagnostics> is enabled and the [`ENABLE_XAML_DIAGNOSTICS_SOURCE_INFO`](xref:System.Windows.Diagnostics.VisualDiagnostics.GetXamlSourceInfo%2A) environment variable is set.</span></span>

**<span data-ttu-id="640c3-257">Поиск ссылок StaticResource</span><span class="sxs-lookup"><span data-stu-id="640c3-257">Finding StaticResource references</span></span>**

<span data-ttu-id="640c3-258">Помощник по диагностике теперь может получать уведомление при разрешении ссылки [StaticResource](../wpf/advanced/staticresource-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-258">A diagnostic assistant can now receive a notification whenever a [StaticResource](../wpf/advanced/staticresource-markup-extension.md) reference is resolved.</span></span><span data-ttu-id="640c3-259"> (Эта функция предназначена для помощников по диагностике, а не приложений в производственной среде.) Помощник по диагностике, например средство "Изменить и продолжить" в Visual Studio, может обновить все случаи использования ресурса, когда его значение в <xref:Windows.UI.Xaml.ResourceDictionary> меняется.</span><span class="sxs-lookup"><span data-stu-id="640c3-259"> (The feature is for use by diagnostic assistants, not by production applications.) A diagnostic assistant such as Visual Studio’s “Edit-and-Continue” facility may want to update all uses of a resource when its value in a <xref:Windows.UI.Xaml.ResourceDictionary> changes.</span></span> <span data-ttu-id="640c3-260">WPF выполняет это автоматически для ссылок [DynamicResource](../wpf/advanced/dynamicresource-markup-extension.md), но специально не делает этого для ссылок [StaticResource](../wpf/advanced/staticresource-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-260">WPF does this automatically for [DynamicResource](../wpf/advanced/dynamicresource-markup-extension.md) references, but it intentionally does not do so for [StaticResource](../wpf/advanced/staticresource-markup-extension.md) references.</span></span> <span data-ttu-id="640c3-261">Начиная с .NET Framework 4.7.2 помощник по диагностике может использовать эти уведомления для поиска случаев использования статического ресурса.</span><span class="sxs-lookup"><span data-stu-id="640c3-261">Starting with the .NET Framework 4.7.2, the diagnostic assistant can use these notifications to locate those uses of the static resource.</span></span>

<span data-ttu-id="640c3-262">Уведомление реализуется новым событием <xref:System.Windows.Diagnostics.ResourceDictionaryDiagnostics.StaticResourceResolved?displayProperty=nameWithType>:</span><span class="sxs-lookup"><span data-stu-id="640c3-262">The notification is implemented by the new <xref:System.Windows.Diagnostics.ResourceDictionaryDiagnostics.StaticResourceResolved?displayProperty=nameWithType> event:</span></span>

```csharp
public static event EventHandler<StaticResourceResolvedEventArgs> StaticResourceResolved;
```

```vb
Public Shared Event StaticResourceResolved As EventHandler(Of StaticResourceResolvedEventArgs)
```

<span data-ttu-id="640c3-263">Это событие возникает каждый раз, когда среда выполнения разрешает ссылку [StaticResource](../wpf/advanced/staticresource-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-263">This event is raised whenever the runtime resolves a [StaticResource](../wpf/advanced/staticresource-markup-extension.md) reference.</span></span><span data-ttu-id="640c3-264"> Аргументы <xref:System.Windows.Diagnostics.StaticResourceResolvedEventArgs> описывают разрешение и ключ, используемый для разрешения, а также указывают объект и свойство, в котором указаны ссылка [StaticResource](../wpf/advanced/staticresource-markup-extension.md) и словарь <xref:Windows.UI.Xaml.ResourceDictionary>:</span><span class="sxs-lookup"><span data-stu-id="640c3-264"> The <xref:System.Windows.Diagnostics.StaticResourceResolvedEventArgs> arguments describe the resolution, and indicate the object and property that host the [StaticResource](../wpf/advanced/staticresource-markup-extension.md) reference and the <xref:Windows.UI.Xaml.ResourceDictionary> and key used for the resolution:</span></span>

```csharp
public class StaticResourceResolvedEventArgs : EventArgs
{
   public Object TargetObject { get; }

   public Object TargetProperty { get; }

   public ResourceDictionary ResourceDictionary { get; }

   public object ResourceKey { get; }
}
```

<span data-ttu-id="640c3-265">Событие не происходит (и метод доступа `add` игнорируется), если не включен класс  <xref:System.Windows.Diagnostics.VisualDiagnostics> и не задана переменная среды [`ENABLE_XAML_DIAGNOSTICS_SOURCE_INFO`](xref:System.Windows.Diagnostics.VisualDiagnostics.GetXamlSourceInfo%2A) .</span><span class="sxs-lookup"><span data-stu-id="640c3-265">The event is not raised (and its `add` accessor is ignored) unless <xref:System.Windows.Diagnostics.VisualDiagnostics> is enabled and the [`ENABLE_XAML_DIAGNOSTICS_SOURCE_INFO`](xref:System.Windows.Diagnostics.VisualDiagnostics.GetXamlSourceInfo%2A) environment variable is set.</span></span>

#### <a name="clickonce"></a><span data-ttu-id="640c3-266">ClickOnce</span><span class="sxs-lookup"><span data-stu-id="640c3-266">ClickOnce</span></span>

<span data-ttu-id="640c3-267">Приложения, совместимые с HDPI, для Windows Forms, Windows Presentation Foundation (WPF) и Visual Studio Tools для Office (VSTO) можно развернуть с помощью ClickOnce.</span><span class="sxs-lookup"><span data-stu-id="640c3-267">HDPI-aware applications for Windows Forms, Windows Presentation Foundation (WPF), and Visual Studio Tools for Office (VSTO) can all be deployed by using ClickOnce.</span></span> <span data-ttu-id="640c3-268">Если в манифесте приложения обнаружена следующая запись, развертывание в .NET Framework 4.7.2 будет успешным:</span><span class="sxs-lookup"><span data-stu-id="640c3-268">If the following entry is found in the application manifest, deployment will succeed under .NET Framework 4.7.2:</span></span>

```xml
<windowsSettings>
   <dpiAware xmlns="http://schemas.microsoft.com/SMI/2005/WindowsSettings">true</dpiAware>
</windowsSettings>
```

<span data-ttu-id="640c3-269">Для приложения Windows Forms использовавшийся ранее обходной путь установки поддержки определения DPI в файле конфигурации приложения вместо манифеста приложения больше не требуется для успешного развертывания ClickOnce.</span><span class="sxs-lookup"><span data-stu-id="640c3-269">For Windows Forms application, the previous workaround of setting DPI awareness in the application configuration file rather than the application manifest is no longer necessary for ClickOnce deployment to succeed.</span></span>

<a name="v471" />

## <a name="whats-new-in-the-net-framework-471"></a><span data-ttu-id="640c3-270">Новые возможности .NET Framework 4.7.1</span><span class="sxs-lookup"><span data-stu-id="640c3-270">What's new in the .NET Framework 4.7.1</span></span>

<span data-ttu-id="640c3-271">.NET Framework 4.7.1 включает новые функции в следующих областях:</span><span class="sxs-lookup"><span data-stu-id="640c3-271">The .NET Framework 4.7.1 includes new features in the following areas:</span></span>

- [<span data-ttu-id="640c3-272">Ядро</span><span class="sxs-lookup"><span data-stu-id="640c3-272">Core</span></span>](#core471)
- [<span data-ttu-id="640c3-273">Среда CLR</span><span class="sxs-lookup"><span data-stu-id="640c3-273">Common language runtime (CLR)</span></span>](#clr)
- [<span data-ttu-id="640c3-274">Сетевое взаимодействие</span><span class="sxs-lookup"><span data-stu-id="640c3-274">Networking</span></span>](#net471)
- [<span data-ttu-id="640c3-275">ASP.NET</span><span class="sxs-lookup"><span data-stu-id="640c3-275">ASP.NET</span></span>](#asp-net471)

<span data-ttu-id="640c3-276">Кроме того, основной акцент в .NET Framework 4.7.1 сделан на улучшении специальных возможностей, что позволяет приложению предоставлять соответствующую функциональность пользователям технологий с поддержкой специальных возможностей.</span><span class="sxs-lookup"><span data-stu-id="640c3-276">In addition, a major focus in the .NET Framework 4.7.1 is improved accessibility, which allows an application to provide an appropriate experience for users of Assistive Technology.</span></span> <span data-ttu-id="640c3-277">Сведения об улучшениях специальных возможностей в .NET Framework 4.7.1 см. в разделе [Улучшения специальных возможностей в .NET Framework](whats-new-in-accessibility.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-277">For information on accessibility improvements in the .NET Framework 4.7.1, see [What's new in accessibility in the .NET Framework](whats-new-in-accessibility.md).</span></span>

<a name="core471" />

#### <a name="core"></a><span data-ttu-id="640c3-278">Ядро</span><span class="sxs-lookup"><span data-stu-id="640c3-278">Core</span></span>

**<span data-ttu-id="640c3-279">Поддержка .NET Standard 2.0</span><span class="sxs-lookup"><span data-stu-id="640c3-279">Support for .NET Standard 2.0</span></span>**

<span data-ttu-id="640c3-280">[.NET Standard](~/docs/standard/net-standard.md) определяет набор интерфейсов API, которые должны быть доступны в каждой реализации .NET, поддерживающей эту версию стандарта.</span><span class="sxs-lookup"><span data-stu-id="640c3-280">[.NET Standard](~/docs/standard/net-standard.md) defines a set of APIs that must be available on each .NET implementation that supports that version of the standard.</span></span> <span data-ttu-id="640c3-281">.NET Framework 4.7.1 полностью поддерживает .NET Standard 2.0 и предлагает [около 200 API-интерфейсов](https://github.com/dotnet/standard/blob/master/netstandard/src/ApiCompatBaseline.net461.txt), которые определены в .NET Standard 2.0 и отсутствуют в .NET Framework 4.6.1 4.6.2 и 4.7.</span><span class="sxs-lookup"><span data-stu-id="640c3-281">The .NET Framework 4.7.1 fully supports .NET Standard 2.0 and adds [about 200 APIs](https://github.com/dotnet/standard/blob/master/netstandard/src/ApiCompatBaseline.net461.txt) that are defined in .NET Standard 2.0 and are missing from the .NET Framework 4.6.1, 4.6.2, and 4.7.</span></span> <span data-ttu-id="640c3-282">(Обратите внимание, что эти версии .NET Framework поддерживают .NET Standard 2.0 только в том случае, если дополнительные файлы поддержки .NET Standard также развертываются в целевой системе.) Дополнительные сведения см. в разделе о поддержке .NET Standard 2.0 в записи блога [.NET Framework 4.7.1 Runtime and Compiler Features](https://devblogs.microsoft.com/dotnet/net-framework-4-7-1-runtime-and-compiler-features/) (Возможности среды выполнения .NET Framework 4.7.1 и компилятора).</span><span class="sxs-lookup"><span data-stu-id="640c3-282">(Note that these versions of the .NET Framework support .NET Standard 2.0 only if additional .NET Standard support files are also deployed on the target system.) For more information, see "BCL - .NET Standard 2.0 Support" in the [.NET Framework 4.7.1 Runtime and Compiler Features](https://devblogs.microsoft.com/dotnet/net-framework-4-7-1-runtime-and-compiler-features/) blog post.</span></span>

**<span data-ttu-id="640c3-283">Поддержка построителей конфигурации</span><span class="sxs-lookup"><span data-stu-id="640c3-283">Support for configuration builders</span></span>**

<span data-ttu-id="640c3-284">Построители конфигурации позволяют разработчикам внедрять и динамически создавать параметры конфигурации для приложения во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="640c3-284">Configuration builders allow developers to inject and build configuration settings for applications dynamically at run time.</span></span> <span data-ttu-id="640c3-285">Пользовательские построители конфигурации можно использовать для изменения существующих данных в разделе конфигурации или для создания раздела конфигурации с нуля.</span><span class="sxs-lookup"><span data-stu-id="640c3-285">Custom configuration builders can be used to modify existing data in a configuration section or to build a configuration section entirely from scratch.</span></span> <span data-ttu-id="640c3-286">Без построителей конфигурации файлы .config являются статическими, а их параметры определяются за некоторое время до запуска приложения.</span><span class="sxs-lookup"><span data-stu-id="640c3-286">Without configuration builders, .config files are static, and their settings are defined some time before an application is launched.</span></span>

<span data-ttu-id="640c3-287">Чтобы создать пользовательский построитель конфигурации, следует наследовать построитель от абстрактного класса <xref:System.Configuration.ConfigurationBuilder> и переопределить его <xref:System.Configuration.ConfigurationBuilder.ProcessConfigurationSection%2A?displayProperty=nameWithType> и <xref:System.Configuration.ConfigurationBuilder.ProcessRawXml%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-287">To create a custom configuration builder, you derive your builder from the abstract <xref:System.Configuration.ConfigurationBuilder> class and override its <xref:System.Configuration.ConfigurationBuilder.ProcessConfigurationSection%2A?displayProperty=nameWithType> and <xref:System.Configuration.ConfigurationBuilder.ProcessRawXml%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="640c3-288">Кроме того, построители можно определить в файле конфигурации.</span><span class="sxs-lookup"><span data-stu-id="640c3-288">You also define your builders in your .config file.</span></span> <span data-ttu-id="640c3-289">Дополнительные сведения см. в разделе о построителях конфигурации в записи блога [.NET Framework 4.7.1 ASP.NET and Configuration Features](https://devblogs.microsoft.com/dotnet/net-framework-4-7-1-asp-net-and-configuration-features/) (Возможности .NET Framework 4.7.1 ASP.NET и конфигурации).</span><span class="sxs-lookup"><span data-stu-id="640c3-289">For more information, see the "Configuration Builders" section in the [.NET Framework 4.7.1 ASP.NET and Configuration Features](https://devblogs.microsoft.com/dotnet/net-framework-4-7-1-asp-net-and-configuration-features/) blog post.</span></span>

**<span data-ttu-id="640c3-290">Обнаружение функций во время выполнения</span><span class="sxs-lookup"><span data-stu-id="640c3-290">Run-time feature detection</span></span>**

<span data-ttu-id="640c3-291">Класс <xref:System.Runtime.CompilerServices.RuntimeFeature?displayProperty=nameWithType> предоставляет механизм, позволяющий определить, поддерживается ли предопределенная функция в данной реализации .NET во время компиляции или во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="640c3-291">The <xref:System.Runtime.CompilerServices.RuntimeFeature?displayProperty=nameWithType> class provides a mechanism for determine whether a predefined feature is supported on a given .NET implementation at compile time or run time.</span></span> <span data-ttu-id="640c3-292">Во время компиляции компилятор может проверить наличие указанного поля, чтобы определить, поддерживается ли эта функция. Если да, он может вывести код, использующий эту функцию.</span><span class="sxs-lookup"><span data-stu-id="640c3-292">At compile time, a compiler can check whether a specified field exists to determine whether the feature is supported; if so, it can emit code that takes advantage of that feature.</span></span> <span data-ttu-id="640c3-293">Во время выполнения приложение может вызвать метод <xref:System.Runtime.CompilerServices.RuntimeFeature.IsSupported%2A?displayProperty=nameWithType> до создания кода.</span><span class="sxs-lookup"><span data-stu-id="640c3-293">At run time, an application can call the <xref:System.Runtime.CompilerServices.RuntimeFeature.IsSupported%2A?displayProperty=nameWithType> method before emitting code at runtime.</span></span> <span data-ttu-id="640c3-294">Дополнительные сведения см. в статье [Добавление вспомогательного метода для описания функций, поддерживаемых средой выполнения](https://github.com/dotnet/corefx/issues/17116).</span><span class="sxs-lookup"><span data-stu-id="640c3-294">For more information, see [Add helper method to describe features supported by the runtime](https://github.com/dotnet/corefx/issues/17116).</span></span>

**<span data-ttu-id="640c3-295">Типы кортежей значений являются сериализуемыми</span><span class="sxs-lookup"><span data-stu-id="640c3-295">Value tuple types are serializable</span></span>**

<span data-ttu-id="640c3-296">Начиная с .NET Framework 4.7.1, <xref:System.ValueTuple?displayProperty=nameWithType> и связанные универсальные типы помечаются как [Сериализуемые](xref:System.SerializableAttribute), что обеспечивает двоичную сериализацию.</span><span class="sxs-lookup"><span data-stu-id="640c3-296">Starting with the .NET Framework 4.7.1, <xref:System.ValueTuple?displayProperty=nameWithType> and its associated generic types are marked as [Serializable](xref:System.SerializableAttribute), which allows binary serialization.</span></span> <span data-ttu-id="640c3-297">Эта возможность должна упростить миграцию типов кортежей, таких как <xref:System.Tuple%603> и <xref:System.Tuple%604>, в типы кортежей значений.</span><span class="sxs-lookup"><span data-stu-id="640c3-297">This should make migrating Tuple types, such as <xref:System.Tuple%603> and <xref:System.Tuple%604>, to value tuple types easier.</span></span> <span data-ttu-id="640c3-298">Дополнительные сведения см. в разделе о сериализации ValueTuple в записи блога [.NET Framework 4.7.1 Runtime and Compiler Features](https://devblogs.microsoft.com/dotnet/net-framework-4-7-1-runtime-and-compiler-features/) (Возможности среды выполнения .NET Framework 4.7.1 и компилятора).</span><span class="sxs-lookup"><span data-stu-id="640c3-298">For more information, see "Compiler -- ValueTuple is Serializable" in the [.NET Framework 4.7.1 Runtime and Compiler Features](https://devblogs.microsoft.com/dotnet/net-framework-4-7-1-runtime-and-compiler-features/) blog post.</span></span>

**<span data-ttu-id="640c3-299">Поддержка ссылок только для чтения</span><span class="sxs-lookup"><span data-stu-id="640c3-299">Support for read-only references</span></span>**

<span data-ttu-id="640c3-300">В .NET Framework 4.7.1 добавлен <xref:System.Runtime.CompilerServices.IsReadOnlyAttribute?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-300">The .NET Framework 4.7.1 adds the <xref:System.Runtime.CompilerServices.IsReadOnlyAttribute?displayProperty=nameWithType>.</span></span> <span data-ttu-id="640c3-301">Этот атрибут используется компиляторами языка для пометки членов, имеющих типы возвращаемые ссылочные значения (или параметры) только для чтения.</span><span class="sxs-lookup"><span data-stu-id="640c3-301">This attribute is used by language compilers to mark members that have read-only ref return types or parameters.</span></span> <span data-ttu-id="640c3-302">Дополнительные сведения см. в разделе о поддержке ReadOnlyReferences в записи блога [.NET Framework 4.7.1 Runtime and Compiler Features](https://devblogs.microsoft.com/dotnet/net-framework-4-7-1-runtime-and-compiler-features/) (Возможности среды выполнения .NET Framework 4.7.1 и компилятора).</span><span class="sxs-lookup"><span data-stu-id="640c3-302">For more information, see "Compiler -- Support for ReadOnlyReferences" in the [.NET Framework 4.7.1 Runtime and Compiler Features](https://devblogs.microsoft.com/dotnet/net-framework-4-7-1-runtime-and-compiler-features/) blog post.</span></span> <span data-ttu-id="640c3-303">Сведения о возвращаемых ссылочных значениях см. в разделах [Возвращаемые ссылочные значения и ссылочные локальные переменные (справочник по C#)](~/docs/csharp/programming-guide/classes-and-structs/ref-returns.md) и [Возвращаемые ссылочные значения (Visual Basic)](../../visual-basic/programming-guide/language-features/procedures/ref-return-values.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-303">For information on ref return values, see [Ref return values and ref locals (C# Guide)](~/docs/csharp/programming-guide/classes-and-structs/ref-returns.md) and [Ref return values (Visual Basic)](../../visual-basic/programming-guide/language-features/procedures/ref-return-values.md).</span></span>

<a name="clr" />

#### <a name="common-language-runtime-clr"></a><span data-ttu-id="640c3-304">Среда CLR</span><span class="sxs-lookup"><span data-stu-id="640c3-304">Common language runtime (CLR)</span></span>

**<span data-ttu-id="640c3-305">Повышение производительности сборки мусора</span><span class="sxs-lookup"><span data-stu-id="640c3-305">Garbage collection performance improvements</span></span>**

<span data-ttu-id="640c3-306">Изменения функции сборки мусора (GC) в .NET Framework 4.7.1 повышают общую производительность, особенно для выделений кучи больших объектов (LOH).</span><span class="sxs-lookup"><span data-stu-id="640c3-306">Changes to garbage collection (GC) in the .NET Framework 4.7.1 improve overall performance, especially for Large Object Heap (LOH) allocations.</span></span> <span data-ttu-id="640c3-307">В .NET Framework 4.7.1 для выделений SOH и LOH используются отдельные блокировки, что позволяет выполнять выделения LOH в случае, когда фоновый сборщик мусора очищает SOH.</span><span class="sxs-lookup"><span data-stu-id="640c3-307">In the .NET Framework 4.7.1, separate locks are used for Small Object Heap (SOH) and LOH allocations, which allows LOH allocations to occur when Background GC (BGC) is sweeping the SOH.</span></span> <span data-ttu-id="640c3-308">В результате в приложениях с большим количеством операций выделения LOH сократится число конфликтов при блокировках выделений и улучшится производительность.</span><span class="sxs-lookup"><span data-stu-id="640c3-308">As a result, applications that make a large number of LOH allocations should see a reduction in allocation lock contention and improved performance.</span></span> <span data-ttu-id="640c3-309">Дополнительные сведения см. в разделе о повышении производительности сборки мусора в записи блога [.NET Framework 4.7.1 Runtime and Compiler Features](https://devblogs.microsoft.com/dotnet/net-framework-4-7-1-runtime-and-compiler-features/) (Возможности среды выполнения .NET Framework 4.7.1 и компилятора).</span><span class="sxs-lookup"><span data-stu-id="640c3-309">For more information, see the "Runtime -- GC Performance Improvements" section in the [.NET Framework 4.7.1 Runtime and Compiler Features](https://devblogs.microsoft.com/dotnet/net-framework-4-7-1-runtime-and-compiler-features/) blog post.</span></span>

<a name="net471"/>

#### <a name="networking"></a><span data-ttu-id="640c3-310">Сетевое взаимодействие</span><span class="sxs-lookup"><span data-stu-id="640c3-310">Networking</span></span>

**<span data-ttu-id="640c3-311">Поддержка SHA-2 Message.HashAlgorithm</span><span class="sxs-lookup"><span data-stu-id="640c3-311">SHA-2 support for Message.HashAlgorithm</span></span>**

<span data-ttu-id="640c3-312">В .NET Framework 4.7 и более ранних версиях свойство <xref:System.Messaging.Message.HashAlgorithm%2A?displayProperty=nameWithType> поддерживало только значения <xref:System.Messaging.HashAlgorithm.Md5?displayProperty=nameWithType> и <xref:System.Messaging.HashAlgorithm.Sha?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-312">In the .NET Framework 4.7 and earlier versions, the <xref:System.Messaging.Message.HashAlgorithm%2A?displayProperty=nameWithType> property supported values of <xref:System.Messaging.HashAlgorithm.Md5?displayProperty=nameWithType> and <xref:System.Messaging.HashAlgorithm.Sha?displayProperty=nameWithType> only.</span></span> <span data-ttu-id="640c3-313">Начиная с .NET Framework 4.7.1, также поддерживаются значения <xref:System.Messaging.HashAlgorithm.Sha256?displayProperty=nameWithType>, <xref:System.Messaging.HashAlgorithm.Sha384?displayProperty=nameWithType> и <xref:System.Messaging.HashAlgorithm.Sha512?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-313">Starting with the .NET Framework 4.7.1, <xref:System.Messaging.HashAlgorithm.Sha256?displayProperty=nameWithType>, <xref:System.Messaging.HashAlgorithm.Sha384?displayProperty=nameWithType>, and <xref:System.Messaging.HashAlgorithm.Sha512?displayProperty=nameWithType> are also supported.</span></span> <span data-ttu-id="640c3-314">Будет ли это значение использоваться на самом деле, зависит от MSMQ, поскольку сам экземпляр <xref:System.Messaging.Message> не выполняет хэширование, а просто передает значения в MSMQ.</span><span class="sxs-lookup"><span data-stu-id="640c3-314">Whether this value is actually used depends on MSMQ, since the <xref:System.Messaging.Message> instance itself does no hashing but simply passes on values to MSMQ.</span></span> <span data-ttu-id="640c3-315">Дополнительные сведения см. в разделе поддержке о SHA-2 для Message.HashAlgorithm в записи блога [.NET Framework 4.7.1 ASP.NET and Configuration features](https://devblogs.microsoft.com/dotnet/net-framework-4-7-1-asp-net-and-configuration-features/) (Возможности .NET Framework 4.7.1 ASP.NET и конфигурации).</span><span class="sxs-lookup"><span data-stu-id="640c3-315">For more information, see the "SHA-2 support for Message.HashAlgorithm" section in the [.NET Framework 4.7.1 ASP.NET and Configuration features](https://devblogs.microsoft.com/dotnet/net-framework-4-7-1-asp-net-and-configuration-features/) blog post.</span></span>

<a name="asp-net471" />

#### <a name="aspnet"></a><span data-ttu-id="640c3-316">ASP.NET</span><span class="sxs-lookup"><span data-stu-id="640c3-316">ASP.NET</span></span>

**<span data-ttu-id="640c3-317">Действия выполнения в приложениях ASP.NET</span><span class="sxs-lookup"><span data-stu-id="640c3-317">Execution steps in ASP.NET applications</span></span>**

<span data-ttu-id="640c3-318">ASP.NET обрабатывает запросы в предопределенном конвейере, который содержит 23 события.</span><span class="sxs-lookup"><span data-stu-id="640c3-318">ASP.NET processes requests in a predefined pipeline that includes 23 events.</span></span> <span data-ttu-id="640c3-319">ASP.NET выполняет каждый обработчик событий как действие выполнения.</span><span class="sxs-lookup"><span data-stu-id="640c3-319">ASP.NET executes each event handler as an execution step.</span></span> <span data-ttu-id="640c3-320">В версиях ASP.NET до .NET Framework 4.7 платформа ASP.NET не может следовать контексту выполнения из-за переключений между машинным и управляемым потоками.</span><span class="sxs-lookup"><span data-stu-id="640c3-320">In versions of ASP.NET up to the .NET Framework 4.7, ASP.NET can't flow the execution context due to switching between native and managed threads.</span></span> <span data-ttu-id="640c3-321">Вместо этого ASP.NET выборочно выполняет только <xref:System.Web.HttpContext>.</span><span class="sxs-lookup"><span data-stu-id="640c3-321">Instead, ASP.NET selectively flows only the <xref:System.Web.HttpContext>.</span></span> <span data-ttu-id="640c3-322">Начиная с .NET Framework 4.7.1, метод <xref:System.Web.HttpApplication.OnExecuteRequestStep(System.Action{System.Web.HttpContextBase,System.Action})?displayProperty=nameWithType> также позволяет использовать модули для восстановления внешних данных.</span><span class="sxs-lookup"><span data-stu-id="640c3-322">Starting with the .NET Framework 4.7.1, the <xref:System.Web.HttpApplication.OnExecuteRequestStep(System.Action{System.Web.HttpContextBase,System.Action})?displayProperty=nameWithType> method also allows modules to restore ambient data.</span></span> <span data-ttu-id="640c3-323">Эта функция предназначена для библиотек, связанных с трассировкой, профилированием, диагностикой или транзакциями, например для тех, которые учитывают поток работы приложения.</span><span class="sxs-lookup"><span data-stu-id="640c3-323">This feature is targeted at libraries concerned with tracing, profiling, diagnostics, or transactions, for example, that care about the execution flow of the application.</span></span> <span data-ttu-id="640c3-324">Дополнительные сведения см. в разделе о действии выполнения ASP.NET в записи блога [.NET Framework 4.7.1 ASP.NET and Configuration Features](https://devblogs.microsoft.com/dotnet/net-framework-4-7-1-asp-net-and-configuration-features/) (Возможности .NET Framework 4.7.1 ASP.NET и конфигурации).</span><span class="sxs-lookup"><span data-stu-id="640c3-324">For more information, see the "ASP.NET Execution Step Feature" in the [.NET Framework 4.7.1 ASP.NET and Configuration Features](https://devblogs.microsoft.com/dotnet/net-framework-4-7-1-asp-net-and-configuration-features/) blog post.</span></span>

**<span data-ttu-id="640c3-325">Синтаксический анализ HttpCookie ASP.NET</span><span class="sxs-lookup"><span data-stu-id="640c3-325">ASP.NET HttpCookie parsing</span></span>**

<span data-ttu-id="640c3-326">.NET Framework 4.7.1 содержит новый метод <xref:System.Web.HttpCookie.TryParse%2A?displayProperty=nameWithType>, который предоставляет стандартный способ создания объекта <xref:System.Web.HttpCookie> из строки и позволяет точно назначать значения cookie, такие как дата окончания срока действия и путь.</span><span class="sxs-lookup"><span data-stu-id="640c3-326">The .NET Framework 4.7.1 includes a new method, <xref:System.Web.HttpCookie.TryParse%2A?displayProperty=nameWithType>, that provides a standardized way to create an <xref:System.Web.HttpCookie> object from a string and accurately assign cookie values such as expiration date and path.</span></span> <span data-ttu-id="640c3-327">Дополнительные сведения см. в разделе о синтаксическом анализе HttpCookie ASP.NET в записи блога [.NET Framework 4.7.1 ASP.NET and Configuration Features](https://devblogs.microsoft.com/dotnet/net-framework-4-7-1-asp-net-and-configuration-features/) (Возможности .NET Framework 4.7.1 ASP.NET и конфигурации).</span><span class="sxs-lookup"><span data-stu-id="640c3-327">For more information, see "ASP.NET HttpCookie parsing" in the [.NET Framework 4.7.1 ASP.NET and Configuration Features](https://devblogs.microsoft.com/dotnet/net-framework-4-7-1-asp-net-and-configuration-features/) blog post.</span></span>

**<span data-ttu-id="640c3-328">Функции хэширования SHA-2 для учетных данных проверки подлинности форм ASP.NET</span><span class="sxs-lookup"><span data-stu-id="640c3-328">SHA-2 hash options for ASP.NET forms authentication credentials</span></span>**

<span data-ttu-id="640c3-329">В .NET Framework 4.7 и более ранних версиях разработчики на платформе ASP.NET могли хранить учетные данные пользователей с паролями, хэшированными с помощью MD5 или SHA1, в файлах конфигурации.</span><span class="sxs-lookup"><span data-stu-id="640c3-329">In the .NET Framework 4.7 and earlier versions, ASP.NET allowed developers to store user credentials with hashed passwords in configuration files using either MD5 or SHA1.</span></span> <span data-ttu-id="640c3-330">Начиная с .NET Framework 4.7.1, ASP.NET также поддерживает новые безопасные функции алгоритма SHA-2, такие как SHA256, SHA384 и SHA512.</span><span class="sxs-lookup"><span data-stu-id="640c3-330">Starting with the .NET Framework 4.7.1, ASP.NET also supports new secure SHA-2 hash options such as SHA256, SHA384, and SHA512.</span></span> <span data-ttu-id="640c3-331">SHA1 остается алгоритмом по умолчанию, а нестандартный хэш-алгоритм можно определить в файле веб-конфигурации.</span><span class="sxs-lookup"><span data-stu-id="640c3-331">SHA1 remains the default, and a non-default hash algorithm can be defined in the web configuration file.</span></span> <span data-ttu-id="640c3-332">Например:</span><span class="sxs-lookup"><span data-stu-id="640c3-332">For example:</span></span>

```xml
<system.web>
    <authentication mode="Forms">
        <forms loginUrl="~/login.aspx">
          <credentials passwordFormat="SHA512">
            <user name="jdoe" password="6D003E98EA1C7F04ABF8FCB375388907B7F3EE06F278DB966BE960E7CBBD103DF30CA6D61F7E7FD981B2E4E3A64D43C836A4BEDCA165C33B163E6BCDC538A664" />
          </credentials>
        </forms>
    </authentication>
</system.web>
```

<a name="v47" />

## <a name="whats-new-in-the-net-framework-47"></a><span data-ttu-id="640c3-333">Новые возможности .NET Framework 4.7</span><span class="sxs-lookup"><span data-stu-id="640c3-333">What's new in the .NET Framework 4.7</span></span>

<span data-ttu-id="640c3-334">.NET Framework 4.7 включает новые функции в следующих областях:</span><span class="sxs-lookup"><span data-stu-id="640c3-334">The .NET Framework 4.7 includes new features in the following areas:</span></span>

- [<span data-ttu-id="640c3-335">Ядро</span><span class="sxs-lookup"><span data-stu-id="640c3-335">Core</span></span>](#Core47)
- [<span data-ttu-id="640c3-336">Сетевое взаимодействие</span><span class="sxs-lookup"><span data-stu-id="640c3-336">Networking</span></span>](#net47)
- [<span data-ttu-id="640c3-337">ASP.NET</span><span class="sxs-lookup"><span data-stu-id="640c3-337">ASP.NET</span></span>](#ASP-NET47)
- [<span data-ttu-id="640c3-338">Windows Communication Foundation (WCF)</span><span class="sxs-lookup"><span data-stu-id="640c3-338">Windows Communication Foundation (WCF)</span></span>](#wcf47)
- [<span data-ttu-id="640c3-339">Windows Forms</span><span class="sxs-lookup"><span data-stu-id="640c3-339">Windows Forms</span></span>](#wf47)
- [<span data-ttu-id="640c3-340">Windows Presentation Foundation (WPF)</span><span class="sxs-lookup"><span data-stu-id="640c3-340">Windows Presentation Foundation (WPF)</span></span>](#WPF47)

<span data-ttu-id="640c3-341">Список новых API-интерфейсов, добавленных в .NET Framework 4.7, см. в статье [об изменениях API-интерфейсов в .NET Framework 4.7](https://github.com/Microsoft/dotnet/blob/master/releases/net47/dotnet47-api-changes.md) на сайте GitHub.</span><span class="sxs-lookup"><span data-stu-id="640c3-341">For a list of new APIs added to the .NET Framework 4.7, see [.NET Framework 4.7 API Changes](https://github.com/Microsoft/dotnet/blob/master/releases/net47/dotnet47-api-changes.md) on GitHub.</span></span> <span data-ttu-id="640c3-342">Список улучшенных функций и исправленных ошибок в .NET Framework 4.7 см. в статье [об изменениях в .NET Framework 4.7](https://github.com/Microsoft/dotnet/blob/master/releases/net47/dotnet47-changes.md) на сайте GitHub.</span><span class="sxs-lookup"><span data-stu-id="640c3-342">For a list of feature improvements and bug fixes in the .NET Framework 4.7, see [.NET Framework 4.7 List of Changes](https://github.com/Microsoft/dotnet/blob/master/releases/net47/dotnet47-changes.md) on GitHub.</span></span>  <span data-ttu-id="640c3-343">Дополнительные сведения см. в записи блога .NET, посвященной [объявлению о выпуске .NET Framework 4.7](https://devblogs.microsoft.com/dotnet/announcing-the-net-framework-4-7/).</span><span class="sxs-lookup"><span data-stu-id="640c3-343">For additional information, see [Announcing the .NET Framework 4.7](https://devblogs.microsoft.com/dotnet/announcing-the-net-framework-4-7/) in the .NET blog.</span></span>

<a name="Core47" />

#### <a name="core"></a><span data-ttu-id="640c3-344">Ядро</span><span class="sxs-lookup"><span data-stu-id="640c3-344">Core</span></span>

<span data-ttu-id="640c3-345">.NET Framework 4.7 улучшает сериализацию, используя <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer>:</span><span class="sxs-lookup"><span data-stu-id="640c3-345">The .NET Framework 4.7 improves serialization by the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer>:</span></span>

<span data-ttu-id="640c3-346">**Дополнительные функциональные возможности на основе эллиптической криптографии (ECC)**\*</span><span class="sxs-lookup"><span data-stu-id="640c3-346">**Enhanced functionality with Elliptic Curve Cryptography (ECC)**\*</span></span>

<span data-ttu-id="640c3-347">В .NET Framework 4.7 были добавлены методы `ImportParameters(ECParameters)` в классы <xref:System.Security.Cryptography.ECDsa> и <xref:System.Security.Cryptography.ECDiffieHellman>, которые позволяют объекту представлять уже установленный ключ.</span><span class="sxs-lookup"><span data-stu-id="640c3-347">In the .NET Framework 4.7, `ImportParameters(ECParameters)` methods were added to the <xref:System.Security.Cryptography.ECDsa> and <xref:System.Security.Cryptography.ECDiffieHellman> classes to allow for an object to represent an already-established key.</span></span> <span data-ttu-id="640c3-348">Также добавлен метод `ExportParameters(Boolean)` для экспорта ключа с явными параметрами кривой.</span><span class="sxs-lookup"><span data-stu-id="640c3-348">An `ExportParameters(Boolean)` method was also added for exporting the key using explicit curve parameters.</span></span>

<span data-ttu-id="640c3-349">В .NET Framework 4.7 также добавлена поддержка дополнительных кривых (включая пакет кривых Brainpool) и стандартные определения для упрощения создания при помощи новых фабричных методов <xref:System.Security.Cryptography.ECDsa.Create%2A> и <xref:System.Security.Cryptography.ECDiffieHellman.Create%2A>.</span><span class="sxs-lookup"><span data-stu-id="640c3-349">The .NET Framework 4.7 also adds support for additional curves (including the Brainpool curve suite), and has added predefined definitions for ease-of-creation through the new <xref:System.Security.Cryptography.ECDsa.Create%2A> and <xref:System.Security.Cryptography.ECDiffieHellman.Create%2A> factory methods.</span></span>

<span data-ttu-id="640c3-350">На GitHub вы найдете [пример криптографических улучшений в .NET Framework 4.7](https://gist.github.com/richlander/5a182899895a87a296c21ada97f7a54e).</span><span class="sxs-lookup"><span data-stu-id="640c3-350">You can see an [example of .NET Framework 4.7 cryptography improvements](https://gist.github.com/richlander/5a182899895a87a296c21ada97f7a54e) on GitHub.</span></span>

**<span data-ttu-id="640c3-351">Улучшенная поддержка управляющих символов для DataContractJsonSerializer</span><span class="sxs-lookup"><span data-stu-id="640c3-351">Better support for control characters by the DataContractJsonSerializer</span></span>**

<span data-ttu-id="640c3-352">В .NET Framework 4.7 <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> сериализует управляющие символы в соответствии со стандартом ECMAScript 6.</span><span class="sxs-lookup"><span data-stu-id="640c3-352">In the .NET Framework 4.7, the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> serializes control characters in conformity with the ECMAScript 6 standard.</span></span> <span data-ttu-id="640c3-353">Это поведение включено по умолчанию для приложений, предназначенных для .NET Framework 4.7, и предлагается в качестве дополнительной функции для приложений, которые выполняются в среде .NET Framework 4.7, но предназначены для предыдущих версий платформы .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="640c3-353">This behavior is enabled by default for applications that target the .NET Framework 4.7, and is an opt-in feature for applications that are running under the .NET Framework 4.7 but target a previous version of the .NET Framework.</span></span> <span data-ttu-id="640c3-354">Дополнительные сведения см. в статье [Изменения целевой платформы в .NET Framework 4.7](../migration-guide/retargeting-changes-in-the-net-framework-4-7.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-354">For more information, see [Retargeting Changes in the .NET Framework 4.7](../migration-guide/retargeting-changes-in-the-net-framework-4-7.md).</span></span>

<a name="net47" />

#### <a name="networking"></a><span data-ttu-id="640c3-355">Сетевое взаимодействие</span><span class="sxs-lookup"><span data-stu-id="640c3-355">Networking</span></span>

<span data-ttu-id="640c3-356">В .NET Framework 4.7 добавлена следующая сетевая возможность.</span><span class="sxs-lookup"><span data-stu-id="640c3-356">The .NET Framework 4.7 adds the following network-related feature:</span></span>

<span data-ttu-id="640c3-357">**Поддержка операционной системы по умолчанию для протоколов TLS**\*</span><span class="sxs-lookup"><span data-stu-id="640c3-357">**Default operating system support for TLS protocols**\*</span></span>

<span data-ttu-id="640c3-358">Стек TLS, который используется в <xref:System.Net.Security.SslStream?displayProperty=nameWithType> и других компонентах, расположенных в стеке над ним (например, HTTP, FTP и SMTP), позволяет разработчикам использовать протоколы TLS по умолчанию, поддерживаемые операционной системой.</span><span class="sxs-lookup"><span data-stu-id="640c3-358">The TLS stack, which is used by <xref:System.Net.Security.SslStream?displayProperty=nameWithType> and up-stack components such as HTTP, FTP, and SMTP, allows developers to use the default TLS protocols supported by the operating system.</span></span> <span data-ttu-id="640c3-359">Разработчики теперь не обязаны жестко указывать версию TLS.</span><span class="sxs-lookup"><span data-stu-id="640c3-359">Developers need no longer hard-code a TLS version.</span></span>

<a name="ASP-NET47" />

#### <a name="aspnet"></a><span data-ttu-id="640c3-360">ASP.NET</span><span class="sxs-lookup"><span data-stu-id="640c3-360">ASP.NET</span></span>

<span data-ttu-id="640c3-361">ASP.NET в .NET Framework 4.7 включает следующие новые функции:</span><span class="sxs-lookup"><span data-stu-id="640c3-361">In the .NET Framework 4.7, ASP.NET includes the following new features:</span></span>

**<span data-ttu-id="640c3-362">Расширяемость кэша объектов</span><span class="sxs-lookup"><span data-stu-id="640c3-362">Object Cache Extensibility</span></span>**

<span data-ttu-id="640c3-363">Начиная с .NET Framework 4.7 в ASP.NET добавляется новый набор интерфейсов API, которые позволяют разработчикам заменить стандартные механизмы кэширования объектов в памяти и мониторинга за использованием памяти в ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="640c3-363">Starting with the .NET Framework 4.7, ASP.NET adds a new set of APIs that allow developers to replace the default ASP.NET implementations for in-memory object caching and memory monitoring.</span></span> <span data-ttu-id="640c3-364">Разработчики могут переопределить любой из следующих трех компонентов, если их не устраивает стандартная реализация ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="640c3-364">Developers can now replace any of the following three components if the ASP.NET implementation is not adequate:</span></span>

- <span data-ttu-id="640c3-365">**Хранилище кэша объектов**.</span><span class="sxs-lookup"><span data-stu-id="640c3-365">**Object Cache Store**.</span></span> <span data-ttu-id="640c3-366">В новом разделе конфигурации поставщиков кэша разработчик может подключить новую реализацию кэша объектов для приложения ASP.NET с помощью нового интерфейса **ICacheStoreProvider**.</span><span class="sxs-lookup"><span data-stu-id="640c3-366">By using the new cache providers configuration section, developers can plug in new implementations of an object cache for an ASP.NET application by using the new **ICacheStoreProvider** interface.</span></span>

- <span data-ttu-id="640c3-367">**Мониторинг памяти**.</span><span class="sxs-lookup"><span data-stu-id="640c3-367">**Memory monitoring**.</span></span> <span data-ttu-id="640c3-368">Стандартный монитор памяти ASP.NET уведомляет приложения о том, что они приближаются к настроенному для процесса лимиту байтов исключительного пользования, а также о нехватке общей доступной физической памяти на компьютере.</span><span class="sxs-lookup"><span data-stu-id="640c3-368">The default memory monitor in ASP.NET notifies applications when they are running close to the configured private bytes limit for the process, or when the machine is low on total available physical RAM.</span></span> <span data-ttu-id="640c3-369">Уведомление срабатывает незадолго до достижения ограничения.</span><span class="sxs-lookup"><span data-stu-id="640c3-369">When these limits are near, notifications are fired.</span></span> <span data-ttu-id="640c3-370">Для некоторых приложений эти уведомления поступают слишком поздно и не позволяют предпринять никаких разумных действий.</span><span class="sxs-lookup"><span data-stu-id="640c3-370">For some applications, notifications are fired too close to the configured limits to allow for useful reactions.</span></span> <span data-ttu-id="640c3-371">Разработчики могут использовать собственные мониторы памяти, чтобы заменить значение по умолчанию с помощью свойства <xref:System.Web.Hosting.ApplicationMonitors.MemoryMonitor%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-371">Developers can now write their own memory monitors to replace the default by using the <xref:System.Web.Hosting.ApplicationMonitors.MemoryMonitor%2A?displayProperty=nameWithType> property.</span></span>

- <span data-ttu-id="640c3-372">**Реакции на достижение лимита памяти**.</span><span class="sxs-lookup"><span data-stu-id="640c3-372">**Memory Limit Reactions**.</span></span> <span data-ttu-id="640c3-373">По умолчанию ASP.NET пытается обрезать кэш объектов, периодически вызывая функцию <xref:System.GC.Collect%2A?displayProperty=nameWithType> при приближении к лимиту байтов исключительного пользования для процесса.</span><span class="sxs-lookup"><span data-stu-id="640c3-373">By default, ASP.NET attempts to trim the object cache and periodically call <xref:System.GC.Collect%2A?displayProperty=nameWithType> when the private byte process limit is near.</span></span> <span data-ttu-id="640c3-374">Для некоторых приложений частота вызовов <xref:System.GC.Collect%2A?displayProperty=nameWithType> или размер кэша после обрезки не позволяют обеспечить эффективность работы.</span><span class="sxs-lookup"><span data-stu-id="640c3-374">For some applications, the frequency of calls to <xref:System.GC.Collect%2A?displayProperty=nameWithType> or the amount of cache that is trimmed are inefficient.</span></span> <span data-ttu-id="640c3-375">Теперь разработчик может изменить или дополнить поведение по умолчанию, назначив собственную реализацию **IObserver** в качестве монитора памяти для приложения.</span><span class="sxs-lookup"><span data-stu-id="640c3-375">Developers can now replace or supplement the default behavior by subscribing **IObserver** implementations to the application's memory monitor.</span></span>

<a name="wcf47" />

#### <a name="windows-communication-foundation-wcf"></a><span data-ttu-id="640c3-376">Windows Communication Foundation (WCF)</span><span class="sxs-lookup"><span data-stu-id="640c3-376">Windows Communication Foundation (WCF)</span></span>

<span data-ttu-id="640c3-377">В Windows Communication Foundation (WCF) добавлены следующие функции и изменения:</span><span class="sxs-lookup"><span data-stu-id="640c3-377">Windows Communication Foundation (WCF) adds the following features and changes:</span></span>

**<span data-ttu-id="640c3-378">Возможность настраивать параметры безопасности сообщений по умолчанию для TLS 1.1 или TLS 1.2</span><span class="sxs-lookup"><span data-stu-id="640c3-378">Ability to configure the default message security settings to TLS 1.1 or TLS 1.2</span></span>**

<span data-ttu-id="640c3-379">Начиная с .NET Framework 4.7 WCF позволяет настраивать в качестве протокола безопасности сообщений по умолчанию протоколы TSL 1.1 и TLS 1.2, а не только SSL 3.0 и TSL 1.0.</span><span class="sxs-lookup"><span data-stu-id="640c3-379">Starting with the .NET Framework 4.7, WCF allows you to configure TSL 1.1 or TLS 1.2 in addition to SSL 3.0 and TSL 1.0 as the default message security protocol.</span></span> <span data-ttu-id="640c3-380">Эту возможность нужно дополнительно активировать, добавив следующую запись в файл конфигурации приложения:</span><span class="sxs-lookup"><span data-stu-id="640c3-380">This is an opt-in setting; to enable it, you must add the following entry to your application configuration file:</span></span>

```xml
<runtime>
   <AppContextSwitchOverrides value="Switch.System.ServiceModel.DisableUsingServicePointManagerSecurityProtocols=false;Switch.System.Net.DontEnableSchUseStrongCrypto=false" />
</runtime>
```

**<span data-ttu-id="640c3-381">Повышенная надежность приложений WCF и сериализации WCF</span><span class="sxs-lookup"><span data-stu-id="640c3-381">Improved reliability of WCF applications and WCF serialization</span></span>**

<span data-ttu-id="640c3-382">Для WCF внесены несколько изменений кода, которые позволяют избежать состояний гонки, повышая таким образом производительность и надежность методов сериализации.</span><span class="sxs-lookup"><span data-stu-id="640c3-382">WCF includes a number of code changes that eliminate race conditions, thereby improving performance and the reliability of serialization options.</span></span> <span data-ttu-id="640c3-383">Сюда входит следующее.</span><span class="sxs-lookup"><span data-stu-id="640c3-383">These include:</span></span>

- <span data-ttu-id="640c3-384">Улучшение поддержки для совместного использования асинхронного и синхронного кода в вызовах **SocketConnection.BeginRead** и **SocketConnection.Read**.</span><span class="sxs-lookup"><span data-stu-id="640c3-384">Better support for mixing asynchronous and synchronous code in calls to **SocketConnection.BeginRead** and **SocketConnection.Read**.</span></span>
- <span data-ttu-id="640c3-385">Повышение надежности при разрыве подключения с **SharedConnectionListener** и **DuplexChannelBinder**.</span><span class="sxs-lookup"><span data-stu-id="640c3-385">Improved reliability when aborting a connection with **SharedConnectionListener** and **DuplexChannelBinder**.</span></span>
- <span data-ttu-id="640c3-386">Повышение надежности операций сериализации при вызове метода <xref:System.Runtime.Serialization.FormatterServices.GetSerializableMembers%28System.Type%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-386">Improved reliability of serialization operations when calling the <xref:System.Runtime.Serialization.FormatterServices.GetSerializableMembers%28System.Type%29?displayProperty=nameWithType> method.</span></span>
- <span data-ttu-id="640c3-387">Повышение надежности при удалении обслуживающего потока путем вызова метода **ChannelSynchronizer.RemoveWaiter**.</span><span class="sxs-lookup"><span data-stu-id="640c3-387">Improved reliability when removing a waiter by calling the **ChannelSynchronizer.RemoveWaiter** method.</span></span>

<a name="wf47" />

#### <a name="windows-forms"></a><span data-ttu-id="640c3-388">Windows Forms</span><span class="sxs-lookup"><span data-stu-id="640c3-388">Windows Forms</span></span>

<span data-ttu-id="640c3-389">В .NET Framework 4.7 для Windows Forms улучшена поддержка мониторов высоким разрешением.</span><span class="sxs-lookup"><span data-stu-id="640c3-389">In the .NET Framework 4.7, Windows Forms improves support for high DPI monitors.</span></span>

**<span data-ttu-id="640c3-390">Поддержка высокого разрешения</span><span class="sxs-lookup"><span data-stu-id="640c3-390">High DPI support</span></span>**

<span data-ttu-id="640c3-391">Начиная с приложений, ориентированных на .NET Framework 4.7, в .NET Framework поддерживается высокое разрешение и динамическое разрешение для приложений Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="640c3-391">Starting with applications that target the .NET Framework 4.7, the .NET Framework features high DPI and dynamic DPI support for Windows Forms applications.</span></span> <span data-ttu-id="640c3-392">Поддержка высокого разрешения улучшает расположение и внешний вид форм и элементов управления на мониторах с высокой плотностью точек на дюйм.</span><span class="sxs-lookup"><span data-stu-id="640c3-392">High DPI support improves the layout and appearance of forms and controls on high DPI monitors.</span></span> <span data-ttu-id="640c3-393">Функция динамического разрешения изменяет расположение и внешний вид формы и элементов управления, когда пользователь изменяет разрешение монитора или масштаб отображения при запущенном приложении.</span><span class="sxs-lookup"><span data-stu-id="640c3-393">Dynamic DPI changes the layout and appearance of forms and controls when the user changes the DPI or display scale factor of a running application.</span></span>

<span data-ttu-id="640c3-394">Поддержку высокого разрешения нужно активировать дополнительно, определив раздел [\<System.Windows.Forms.ConfigurationSection>](../configure-apps/file-schema/winforms/index.md) в файле конфигурации приложения.</span><span class="sxs-lookup"><span data-stu-id="640c3-394">High DPI support is an opt-in feature that you configure by defining a [\<System.Windows.Forms.ConfigurationSection>](../configure-apps/file-schema/winforms/index.md) section in your application configuration file.</span></span> <span data-ttu-id="640c3-395">Дополнительные сведения об активации поддержки высокого разрешения и динамического разрешения для приложений Windows Forms вы можете найти в статье [Поддержка высокого DPI в Windows Forms](../winforms/high-dpi-support-in-windows-forms.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-395">For more information on adding high DPI support and dynamic DPI support to your Windows Forms application, see [High DPI Support in Windows Forms](../winforms/high-dpi-support-in-windows-forms.md).</span></span>

<a name="WPF47" />

#### <a name="windows-presentation-foundation-wpf"></a><span data-ttu-id="640c3-396">Windows Presentation Foundation (WPF)</span><span class="sxs-lookup"><span data-stu-id="640c3-396">Windows Presentation Foundation (WPF)</span></span>

<span data-ttu-id="640c3-397">В .NET Framework 4.7 добавлены следующие улучшения для WPF.</span><span class="sxs-lookup"><span data-stu-id="640c3-397">In the .NET Framework 4.7, WPF includes the following enhancements:</span></span>

**<span data-ttu-id="640c3-398">Поддержка стека для управления касанием или пером, основанного на сообщениях Windows WM_POINTER</span><span class="sxs-lookup"><span data-stu-id="640c3-398">Support for a touch/stylus stack based on Windows WM_POINTER messages</span></span>**

<span data-ttu-id="640c3-399">Теперь вы можете использовать стек управления касанием или пером на основе сообщений [WM_POINTER](https://docs.microsoft.com/previous-versions/windows/desktop/InputMsg/messages) вместо платформы служб рукописного ввода Windows (WISP).</span><span class="sxs-lookup"><span data-stu-id="640c3-399">You now have the option of using a touch/stylus stack based on [WM_POINTER messages](https://docs.microsoft.com/previous-versions/windows/desktop/InputMsg/messages) instead of the Windows Ink Services Platform (WISP).</span></span> <span data-ttu-id="640c3-400">Эту функцию нужно отдельно активировать в .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="640c3-400">This is an opt-in feature in the .NET Framework.</span></span> <span data-ttu-id="640c3-401">Дополнительные сведения см. в статье [Изменения целевой платформы в .NET Framework 4.7](../migration-guide/retargeting-changes-in-the-net-framework-4-7.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-401">For more information, see [Retargeting Changes in the .NET Framework 4.7](../migration-guide/retargeting-changes-in-the-net-framework-4-7.md).</span></span>

**<span data-ttu-id="640c3-402">Новая реализация интерфейсов API WPF для печати</span><span class="sxs-lookup"><span data-stu-id="640c3-402">New implementation for WPF printing APIs</span></span>**

<span data-ttu-id="640c3-403">API-интерфейсы WPF для печати в классе <xref:System.Printing.PrintQueue?displayProperty=nameWithType> вызывают [API пакета печати документа](/windows/desktop/printdocs/tailored-app-printing-api) Windows вместо устаревших [API печати XPS](/windows/desktop/printdocs/xps-printing).</span><span class="sxs-lookup"><span data-stu-id="640c3-403">WPF's printing APIs in the <xref:System.Printing.PrintQueue?displayProperty=nameWithType> class call the Windows [Print Document Package API](/windows/desktop/printdocs/tailored-app-printing-api) instead of the deprecated [XPS Print API](/windows/desktop/printdocs/xps-printing).</span></span> <span data-ttu-id="640c3-404">Влияние этого изменения на совместимость приложений можно изучить в статье [Изменения целевой платформы в .NET Framework 4.7](../migration-guide/retargeting-changes-in-the-net-framework-4-7.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-404">For the impact of this change on application compatibility, see [Retargeting Changes in the .NET Framework 4.7](../migration-guide/retargeting-changes-in-the-net-framework-4-7.md).</span></span>

<a name="v462" />

## <a name="whats-new-in-the-net-framework-462"></a><span data-ttu-id="640c3-405">Новые возможности .NET Framework 4.6.2</span><span class="sxs-lookup"><span data-stu-id="640c3-405">What's new in the .NET Framework 4.6.2</span></span>

<span data-ttu-id="640c3-406">В [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] появились новые возможности в следующих областях.</span><span class="sxs-lookup"><span data-stu-id="640c3-406">The [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] includes new features in the following areas:</span></span>

- [<span data-ttu-id="640c3-407">ASP.NET</span><span class="sxs-lookup"><span data-stu-id="640c3-407">ASP.NET</span></span>](#ASPNET462)

- [<span data-ttu-id="640c3-408">Категории символов</span><span class="sxs-lookup"><span data-stu-id="640c3-408">Character categories</span></span>](#Strings)

- [<span data-ttu-id="640c3-409">Шифрование</span><span class="sxs-lookup"><span data-stu-id="640c3-409">Cryptography</span></span>](#Crypto462)

- [<span data-ttu-id="640c3-410">SqlClient</span><span class="sxs-lookup"><span data-stu-id="640c3-410">SqlClient</span></span>](#SQLClient)

- [<span data-ttu-id="640c3-411">Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="640c3-411">Windows Communication Foundation</span></span>](#WCF)

- [<span data-ttu-id="640c3-412">Windows Presentation Foundation (WPF)</span><span class="sxs-lookup"><span data-stu-id="640c3-412">Windows Presentation Foundation (WPF)</span></span>](#WPF462)

- [<span data-ttu-id="640c3-413">Windows Workflow Foundation (WF)</span><span class="sxs-lookup"><span data-stu-id="640c3-413">Windows Workflow Foundation (WF)</span></span>](#WF462)

- [<span data-ttu-id="640c3-414">ClickOnce</span><span class="sxs-lookup"><span data-stu-id="640c3-414">ClickOnce</span></span>](#clickonce-1)

- [<span data-ttu-id="640c3-415">Преобразование приложений Windows Forms и приложений WPF в приложения UWP</span><span class="sxs-lookup"><span data-stu-id="640c3-415">Converting Windows Forms and WPF apps to UWP apps</span></span>](#UWPConvert)

- [<span data-ttu-id="640c3-416">Усовершенствования отладки</span><span class="sxs-lookup"><span data-stu-id="640c3-416">Debugging improvements</span></span>](#Debug462)

<span data-ttu-id="640c3-417">Список новых интерфейсов API, добавленных в .NET Framework 4.6.2, см. в статье [об изменениях API в .NET Framework 4.6.2](https://github.com/Microsoft/dotnet/blob/master/releases/net462/dotnet462-api-changes.md) на сайте GitHub.</span><span class="sxs-lookup"><span data-stu-id="640c3-417">For a list of new APIs added to the .NET Framework 4.6.2, see [.NET Framework 4.6.2 API Changes](https://github.com/Microsoft/dotnet/blob/master/releases/net462/dotnet462-api-changes.md) on GitHub.</span></span> <span data-ttu-id="640c3-418">Список улучшенных функций и исправленных ошибок в .NET Framework 4.6.2 см. в статье [об изменениях в .NET Framework 4.6.2](https://go.microsoft.com/fwlink/?LinkId=708778) на сайте GitHub.</span><span class="sxs-lookup"><span data-stu-id="640c3-418">For a list of feature improvements and bug fixes in the .NET Framework 4.6.2, see [.NET Framework 4.6.2 List of Changes](https://go.microsoft.com/fwlink/?LinkId=708778) on GitHub.</span></span>  <span data-ttu-id="640c3-419">Дополнительные сведения см. в разделе [Объявление о выпуске .NET Framework 4.6.2](https://devblogs.microsoft.com/dotnet/announcing-net-framework-4-6-2/) в блоге .NET.</span><span class="sxs-lookup"><span data-stu-id="640c3-419">For additional information, see [Announcing .NET Framework 4.6.2](https://devblogs.microsoft.com/dotnet/announcing-net-framework-4-6-2/) in the .NET blog.</span></span>

<a name="ASPNET462" />

### <a name="aspnet"></a><span data-ttu-id="640c3-420">ASP.NET</span><span class="sxs-lookup"><span data-stu-id="640c3-420">ASP.NET</span></span>

<span data-ttu-id="640c3-421">В [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] в ASP.NET представлены следующие улучшения.</span><span class="sxs-lookup"><span data-stu-id="640c3-421">In the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], ASP.NET includes the following enhancements:</span></span>

**<span data-ttu-id="640c3-422">Улучшена поддержка локализованных сообщений об ошибках в модулях проверки заметок к данным.</span><span class="sxs-lookup"><span data-stu-id="640c3-422">Improved support for localized error messages in data annotation validators</span></span>**

<span data-ttu-id="640c3-423">Модули проверки заметок к данным позволяют выполнять проверки путем добавления одного или нескольких атрибутов к свойству класса.</span><span class="sxs-lookup"><span data-stu-id="640c3-423">Data annotation validators enable you to perform validation by adding one or more attributes to a class property.</span></span> <span data-ttu-id="640c3-424">Элемент <xref:System.ComponentModel.DataAnnotations.ValidationAttribute.ErrorMessage%2A?displayProperty=nameWithType> атрибута определяет текст сообщения об ошибке, если проверка не пройдена.</span><span class="sxs-lookup"><span data-stu-id="640c3-424">The attribute's <xref:System.ComponentModel.DataAnnotations.ValidationAttribute.ErrorMessage%2A?displayProperty=nameWithType> element defines the text of the error message if validation fails.</span></span> <span data-ttu-id="640c3-425">Начиная с [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], в ASP.NET упрощена локализация сообщений об ошибках.</span><span class="sxs-lookup"><span data-stu-id="640c3-425">Starting with the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], ASP.NET makes it easy to localize error messages.</span></span> <span data-ttu-id="640c3-426">Локализация сообщений об ошибках происходит в указанных далее случаях.</span><span class="sxs-lookup"><span data-stu-id="640c3-426">Error messages will be localized if:</span></span>

1. <span data-ttu-id="640c3-427">В атрибуте проверки указан <xref:System.ComponentModel.DataAnnotations.ValidationAttribute.ErrorMessage%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-427">The <xref:System.ComponentModel.DataAnnotations.ValidationAttribute.ErrorMessage%2A?displayProperty=nameWithType> is provided in the validation attribute.</span></span>

2. <span data-ttu-id="640c3-428">Файл ресурсов хранится в папке App_LocalResources.</span><span class="sxs-lookup"><span data-stu-id="640c3-428">The resource file is stored in the App_LocalResources folder.</span></span>

3. <span data-ttu-id="640c3-429">Имя локализованного файла ресурсов имеет форму `DataAnnotation.Localization.{`*имя*`}.resx`, где *имя* — это имя языка и региональных параметров в формате *languageCode*`-`*country/regionCode* или *languageCode*.</span><span class="sxs-lookup"><span data-stu-id="640c3-429">The name of the localized resources file has the form `DataAnnotation.Localization.{`*name*`}.resx`, where *name* is a culture name in the format *languageCode*`-`*country/regionCode* or *languageCode*.</span></span>

4. <span data-ttu-id="640c3-430">Имя ключа ресурса является строкой, назначенной атрибуту <xref:System.ComponentModel.DataAnnotations.ValidationAttribute.ErrorMessage%2A?displayProperty=nameWithType>, а его значением является локализованное сообщение об ошибке.</span><span class="sxs-lookup"><span data-stu-id="640c3-430">The key name of the resource is the string assigned to the <xref:System.ComponentModel.DataAnnotations.ValidationAttribute.ErrorMessage%2A?displayProperty=nameWithType> attribute,  and its value is the localized error message.</span></span>

<span data-ttu-id="640c3-431">Например, следующий атрибут заметки к данным задает сообщение об ошибке для неверной оценки в рамках языка и региональных параметров по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="640c3-431">For example, the following data annotation attribute defines the default culture's error message for an invalid rating.</span></span>

```csharp
public class RatingInfo
{
   [Required(ErrorMessage = "The rating must be between 1 and 10.")]
   [Display(Name = "Your Rating")]
   public int Rating { get; set; }
}
```

```vb
Public Class RatingInfo
   <Required(ErrorMessage = "The rating must be between 1 and 10.")>
   <Display(Name = "Your Rating")>
   Public Property Rating As Integer = 1
End Class
```

<span data-ttu-id="640c3-432">Затем можно создать файл ресурсов DataAnnotation.Localization.fr.resx, ключом в котором является строка сообщения об ошибке, а значением — локализованное сообщение об ошибке.</span><span class="sxs-lookup"><span data-stu-id="640c3-432">You can then create a resource file, DataAnnotation.Localization.fr.resx, whose key is the error message string and whose value is the localized error message.</span></span> <span data-ttu-id="640c3-433">Этот файл должен находиться в папке `App.LocalResources`.</span><span class="sxs-lookup"><span data-stu-id="640c3-433">The file must be found in the `App.LocalResources` folder.</span></span> <span data-ttu-id="640c3-434">Например, ниже приведен ключ и его значение в сообщении об ошибке, локализованном в рамках французского языка и региональных параметров (French (fr)).</span><span class="sxs-lookup"><span data-stu-id="640c3-434">For example, the following is the key and its value in a localized French (fr) language error message:</span></span>

| <span data-ttu-id="640c3-435">name</span><span class="sxs-lookup"><span data-stu-id="640c3-435">Name</span></span>                                 | <span data-ttu-id="640c3-436">Значение</span><span class="sxs-lookup"><span data-stu-id="640c3-436">Value</span></span>                                     |
| ------------------------------------ | ----------------------------------------- |
| <span data-ttu-id="640c3-437">The rating must be between 1 and 10.</span><span class="sxs-lookup"><span data-stu-id="640c3-437">The rating must be between 1 and 10.</span></span> | <span data-ttu-id="640c3-438">La note doit être comprise entre 1 et 10.</span><span class="sxs-lookup"><span data-stu-id="640c3-438">La note doit être comprise entre 1 et 10.</span></span> |

 <span data-ttu-id="640c3-439">Кроме того, локализация заметок к данным является расширяемой.</span><span class="sxs-lookup"><span data-stu-id="640c3-439">In addition, data annotation localization is extensible.</span></span> <span data-ttu-id="640c3-440">Разработчики могут подключить собственный поставщик локализатора строк путем реализации интерфейса <xref:System.Web.Globalization.IStringLocalizerProvider> для хранения строки локализации в месте, отличном от файла ресурсов.</span><span class="sxs-lookup"><span data-stu-id="640c3-440">Developers can plug in their own string localizer provider by implementing the <xref:System.Web.Globalization.IStringLocalizerProvider> interface to store localization string somewhere other than in a resource file.</span></span>

 **<span data-ttu-id="640c3-441">Поддержка асинхронного выполнения с поставщиками хранилищ состояния сеансов</span><span class="sxs-lookup"><span data-stu-id="640c3-441">Async support with session-state store providers</span></span>**

 <span data-ttu-id="640c3-442">Теперь ASP.NET позволяет использовать методы, возвращающие задачи, с поставщиками хранилища состояния сеанса, тем самым разрешая приложениям ASP.NET реализовывать преимущества масштабируемости асинхронных операций.</span><span class="sxs-lookup"><span data-stu-id="640c3-442">ASP.NET now allows task-returning methods to be used with session-state store providers, thereby allowing ASP.NET apps to get the scalability benefits of async.</span></span> <span data-ttu-id="640c3-443">Для поддержки асинхронных операций с поставщиками хранилищ состояния сеансов ASP.NET предлагает новый интерфейс <xref:System.Web.SessionState.ISessionStateModule?displayProperty=nameWithType>, который наследует от <xref:System.Web.IHttpModule> и позволяет разработчикам реализовывать их собственные модули состояния сеансов и асинхронные поставщики хранилищ сеансов.</span><span class="sxs-lookup"><span data-stu-id="640c3-443">To supports asynchronous operations with session state store providers, ASP.NET includes  a new interface, <xref:System.Web.SessionState.ISessionStateModule?displayProperty=nameWithType>, which inherits from <xref:System.Web.IHttpModule> and allows developers to implement their own session-state module and async session store providers.</span></span> <span data-ttu-id="640c3-444">Интерфейс определяется следующим образом:</span><span class="sxs-lookup"><span data-stu-id="640c3-444">The interface is defined as follows:</span></span>

```csharp
public interface ISessionStateModule : IHttpModule {
    void ReleaseSessionState(HttpContext context);
    Task ReleaseSessionStateAsync(HttpContext context);
}
```

 <span data-ttu-id="640c3-445">Кроме того, класс <xref:System.Web.SessionState.SessionStateUtility> включает два новых метода (<xref:System.Web.SessionState.SessionStateUtility.IsSessionStateReadOnly%2A> и <xref:System.Web.SessionState.SessionStateUtility.IsSessionStateRequired%2A>), которые можно использоваться для поддержки асинхронных операций.</span><span class="sxs-lookup"><span data-stu-id="640c3-445">In addition, the <xref:System.Web.SessionState.SessionStateUtility> class includes two new methods, <xref:System.Web.SessionState.SessionStateUtility.IsSessionStateReadOnly%2A> and <xref:System.Web.SessionState.SessionStateUtility.IsSessionStateRequired%2A>, that can be used to support asynchronous operations.</span></span>

 **<span data-ttu-id="640c3-446">Поддержка асинхронного выполнения поставщиков кэша вывода</span><span class="sxs-lookup"><span data-stu-id="640c3-446">Async support for output-cache providers</span></span>**

 <span data-ttu-id="640c3-447">Начиная с [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], возвращающие задачи методы могут использоваться с поставщиками кэша вывода для реализации преимуществ масштабируемости асинхронных операций.</span><span class="sxs-lookup"><span data-stu-id="640c3-447">Starting with the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], task-returning methods can be used with output-cache providers to provide the scalability benefits of async.</span></span>  <span data-ttu-id="640c3-448">Поставщики, реализующие эти методы, сокращают вероятность блокировок потоков на веб-сервере и улучшают масштабируемость службы ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="640c3-448">Providers that implement these methods reduce thread-blocking on a web server and improve the scalability of an ASP.NET service.</span></span>

 <span data-ttu-id="640c3-449">Для поддержки поставщиков кэша асинхронного вывода были добавлены следующие API:</span><span class="sxs-lookup"><span data-stu-id="640c3-449">The following APIs have been added to support asynchronous output-cache providers:</span></span>

- <span data-ttu-id="640c3-450">Класс <xref:System.Web.Caching.OutputCacheProviderAsync?displayProperty=nameWithType>, который наследует от <xref:System.Web.Caching.OutputCacheProvider?displayProperty=nameWithType> и позволяет разработчикам реализовать поставщик кэша асинхронного вывода.</span><span class="sxs-lookup"><span data-stu-id="640c3-450">The <xref:System.Web.Caching.OutputCacheProviderAsync?displayProperty=nameWithType> class, which inherits from <xref:System.Web.Caching.OutputCacheProvider?displayProperty=nameWithType> and allows developers to implement an asynchronous output-cache provider.</span></span>

- <span data-ttu-id="640c3-451">Класс <xref:System.Web.Caching.OutputCacheUtility>, который предоставляет вспомогательные методы для настройки кэша вывода.</span><span class="sxs-lookup"><span data-stu-id="640c3-451">The <xref:System.Web.Caching.OutputCacheUtility> class, which provides helper methods for configuring the output cache.</span></span>

- <span data-ttu-id="640c3-452">18 новых методов в классе <xref:System.Web.HttpCachePolicy?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-452">18 new methods in the <xref:System.Web.HttpCachePolicy?displayProperty=nameWithType> class.</span></span> <span data-ttu-id="640c3-453">К ним относятся <xref:System.Web.HttpCachePolicy.GetCacheability%2A>, <xref:System.Web.HttpCachePolicy.GetCacheExtensions%2A>, <xref:System.Web.HttpCachePolicy.GetETag%2A>, <xref:System.Web.HttpCachePolicy.GetETagFromFileDependencies%2A>, <xref:System.Web.HttpCachePolicy.GetMaxAge%2A>, <xref:System.Web.HttpCachePolicy.GetMaxAge%2A>, <xref:System.Web.HttpCachePolicy.GetNoStore%2A>, <xref:System.Web.HttpCachePolicy.GetNoTransforms%2A>, <xref:System.Web.HttpCachePolicy.GetOmitVaryStar%2A>, <xref:System.Web.HttpCachePolicy.GetProxyMaxAge%2A>, <xref:System.Web.HttpCachePolicy.GetRevalidation%2A>, <xref:System.Web.HttpCachePolicy.GetUtcLastModified%2A>, <xref:System.Web.HttpCachePolicy.GetVaryByCustom%2A>, <xref:System.Web.HttpCachePolicy.HasSlidingExpiration%2A> и <xref:System.Web.HttpCachePolicy.IsValidUntilExpires%2A>.</span><span class="sxs-lookup"><span data-stu-id="640c3-453">These include <xref:System.Web.HttpCachePolicy.GetCacheability%2A>, <xref:System.Web.HttpCachePolicy.GetCacheExtensions%2A>, <xref:System.Web.HttpCachePolicy.GetETag%2A>, <xref:System.Web.HttpCachePolicy.GetETagFromFileDependencies%2A>, <xref:System.Web.HttpCachePolicy.GetMaxAge%2A>, <xref:System.Web.HttpCachePolicy.GetMaxAge%2A>, <xref:System.Web.HttpCachePolicy.GetNoStore%2A>, <xref:System.Web.HttpCachePolicy.GetNoTransforms%2A>, <xref:System.Web.HttpCachePolicy.GetOmitVaryStar%2A>, <xref:System.Web.HttpCachePolicy.GetProxyMaxAge%2A>, <xref:System.Web.HttpCachePolicy.GetRevalidation%2A>, <xref:System.Web.HttpCachePolicy.GetUtcLastModified%2A>, <xref:System.Web.HttpCachePolicy.GetVaryByCustom%2A>, <xref:System.Web.HttpCachePolicy.HasSlidingExpiration%2A>, and <xref:System.Web.HttpCachePolicy.IsValidUntilExpires%2A>.</span></span>

- <span data-ttu-id="640c3-454">2 новых метода в классе <xref:System.Web.HttpCacheVaryByContentEncodings?displayProperty=nameWithType>: <xref:System.Web.HttpCacheVaryByContentEncodings.GetContentEncodings%2A> и <xref:System.Web.HttpCacheVaryByContentEncodings.SetContentEncodings%2A>.</span><span class="sxs-lookup"><span data-stu-id="640c3-454">2 new methods in the <xref:System.Web.HttpCacheVaryByContentEncodings?displayProperty=nameWithType> class:  <xref:System.Web.HttpCacheVaryByContentEncodings.GetContentEncodings%2A> and <xref:System.Web.HttpCacheVaryByContentEncodings.SetContentEncodings%2A>.</span></span>

- <span data-ttu-id="640c3-455">2 новых метода в классе <xref:System.Web.HttpCacheVaryByHeaders?displayProperty=nameWithType>: <xref:System.Web.HttpCacheVaryByHeaders.GetHeaders%2A> и <xref:System.Web.HttpCacheVaryByHeaders.SetHeaders%2A>.</span><span class="sxs-lookup"><span data-stu-id="640c3-455">2 new methods in the <xref:System.Web.HttpCacheVaryByHeaders?displayProperty=nameWithType> class: <xref:System.Web.HttpCacheVaryByHeaders.GetHeaders%2A> and <xref:System.Web.HttpCacheVaryByHeaders.SetHeaders%2A>.</span></span>

- <span data-ttu-id="640c3-456">2 новых метода в классе <xref:System.Web.HttpCacheVaryByParams?displayProperty=nameWithType>: <xref:System.Web.HttpCacheVaryByParams.GetParams%2A> и <xref:System.Web.HttpCacheVaryByParams.SetParams%2A>.</span><span class="sxs-lookup"><span data-stu-id="640c3-456">2 new methods in the <xref:System.Web.HttpCacheVaryByParams?displayProperty=nameWithType> class: <xref:System.Web.HttpCacheVaryByParams.GetParams%2A> and <xref:System.Web.HttpCacheVaryByParams.SetParams%2A>.</span></span>

- <span data-ttu-id="640c3-457">В классе <xref:System.Web.Caching.AggregateCacheDependency?displayProperty=nameWithType> метод <xref:System.Web.Caching.AggregateCacheDependency.GetFileDependencies%2A>.</span><span class="sxs-lookup"><span data-stu-id="640c3-457">In the <xref:System.Web.Caching.AggregateCacheDependency?displayProperty=nameWithType> class, the <xref:System.Web.Caching.AggregateCacheDependency.GetFileDependencies%2A> method.</span></span>

- <span data-ttu-id="640c3-458">В классе <xref:System.Web.Caching.CacheDependency> метод <xref:System.Web.Caching.CacheDependency.GetFileDependencies%2A>.</span><span class="sxs-lookup"><span data-stu-id="640c3-458">In the <xref:System.Web.Caching.CacheDependency>, the <xref:System.Web.Caching.CacheDependency.GetFileDependencies%2A> method.</span></span>

<a name="Strings" />

### <a name="character-categories"></a><span data-ttu-id="640c3-459">Категории символов</span><span class="sxs-lookup"><span data-stu-id="640c3-459">Character categories</span></span>

<span data-ttu-id="640c3-460">Символы в [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] классифицируются на основе [стандарта Юникод версии 8.0.0](https://www.unicode.org/versions/Unicode8.0.0/).</span><span class="sxs-lookup"><span data-stu-id="640c3-460">Characters in the  [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] are classified based on the [Unicode Standard, Version 8.0.0](https://www.unicode.org/versions/Unicode8.0.0/).</span></span> <span data-ttu-id="640c3-461">В [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] и [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] символы классифицировались на основе категорий символов Юникода 6.3.</span><span class="sxs-lookup"><span data-stu-id="640c3-461">In [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] and [!INCLUDE[net_v461](../../../includes/net-v461-md.md)], characters were classified based on Unicode 6.3 character categories.</span></span>

<span data-ttu-id="640c3-462">Поддержка Юникода 8.0 ограничена классификацией символов по классу <xref:System.Globalization.CharUnicodeInfo> и связанными типами и методами.</span><span class="sxs-lookup"><span data-stu-id="640c3-462">Support for Unicode 8.0 is limited to the classification of characters by the <xref:System.Globalization.CharUnicodeInfo> class and to types and methods that rely on it.</span></span> <span data-ttu-id="640c3-463">К ним относятся класс <xref:System.Globalization.StringInfo>, перегруженный метод <xref:System.Char.GetUnicodeCategory%2A?displayProperty=nameWithType> и [классы символов](../../standard/base-types/character-classes-in-regular-expressions.md), распознаваемые обработчиком регулярных выражений .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="640c3-463">These include the <xref:System.Globalization.StringInfo> class, the overloaded <xref:System.Char.GetUnicodeCategory%2A?displayProperty=nameWithType> method, and the [character classes](../../standard/base-types/character-classes-in-regular-expressions.md) recognized by the .NET Framework regular expression engine.</span></span>  <span data-ttu-id="640c3-464">Это изменение не влияет на сравнение и сортировку символов и строк. Они по-прежнему зависят от базовой операционной системы или в системах Windows 7 от символьных данных, предоставляемых .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="640c3-464">Character and string comparison and sorting is unaffected by this change and continues to rely on the underlying operating system or, on Windows 7 systems, on character data provided by the .NET Framework.</span></span>

<span data-ttu-id="640c3-465">Сведения об изменениях в категориях символов Юникода 6.0–7.0 см. в статье [The Unicode Standard, Version 7.0.0](https://www.unicode.org/versions/Unicode7.0.0/) на веб-сайте консорциума Юникода.</span><span class="sxs-lookup"><span data-stu-id="640c3-465">For changes in character categories from Unicode 6.0 to Unicode 7.0, see [The Unicode Standard, Version 7.0.0](https://www.unicode.org/versions/Unicode7.0.0/) at The Unicode Consortium website.</span></span> <span data-ttu-id="640c3-466">Сведения об изменениях в категориях символов Юникода 7.0–8.0 см. в статье [The Unicode Standard, Version 8.0.0](https://www.unicode.org/versions/Unicode8.0.0/) на веб-сайте Консорциума Юникода.</span><span class="sxs-lookup"><span data-stu-id="640c3-466">For changes from Unicode 7.0 to Unicode 8.0, see [The Unicode Standard, Version 8.0.0](https://www.unicode.org/versions/Unicode8.0.0/) at The Unicode Consortium website.</span></span>

<a name="Crypto462" />

### <a name="cryptography"></a><span data-ttu-id="640c3-467">Шифрование</span><span class="sxs-lookup"><span data-stu-id="640c3-467">Cryptography</span></span>

**<span data-ttu-id="640c3-468">Поддержка сертификатов X509, содержащих FIPS 186-3 DSA</span><span class="sxs-lookup"><span data-stu-id="640c3-468">Support for X509 certificates containing FIPS 186-3 DSA</span></span>**

<span data-ttu-id="640c3-469">В [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] добавлена поддержка DSA сертификатов X509 сертификатов, ключи которых превышают 1024-разрядное ограничение FIPS 186-2.</span><span class="sxs-lookup"><span data-stu-id="640c3-469">The [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] adds support for DSA (Digital Signature Algorithm) X509 certificates whose keys exceed the FIPS 186-2 1024-bit limit.</span></span>

<span data-ttu-id="640c3-470">В дополнение к поддержке больших размеров ключей FIPS 186-3 [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] позволяет использовать вычисление подписей с семейством алгоритмов хэширования SHA-2 (SHA256, SHA384 и SHA512).</span><span class="sxs-lookup"><span data-stu-id="640c3-470">In addition to supporting the larger key sizes of FIPS 186-3, the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] allows computing signatures with the SHA-2 family of hash algorithms (SHA256, SHA384, and SHA512).</span></span> <span data-ttu-id="640c3-471">Поддержка FIPS 186 3 осуществляется с помощью нового класса <xref:System.Security.Cryptography.DSACng?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-471">FIPS 186-3 support is provided by the new <xref:System.Security.Cryptography.DSACng?displayProperty=nameWithType> class.</span></span>

<span data-ttu-id="640c3-472">Для соответствия последним изменениям в классе <xref:System.Security.Cryptography.RSA> на платформе в .NET Framework 4.6 и классе <xref:System.Security.Cryptography.ECDsa> на платформе .NET Framework 4.6.1 абстрактный базовый класс <xref:System.Security.Cryptography.DSA> в [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] имеет дополнительные методы, позволяющие вызывающим сторонам использовать эту возможность без приведения.</span><span class="sxs-lookup"><span data-stu-id="640c3-472">In keeping with recent changes to the <xref:System.Security.Cryptography.RSA> class in the .NET Framework 4.6 and the <xref:System.Security.Cryptography.ECDsa> class in the .NET Framework 4.6.1, the <xref:System.Security.Cryptography.DSA> abstract base class in [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] has additional methods to allow callers to use this functionality without casting.</span></span> <span data-ttu-id="640c3-473">Можно вызвать метод расширения <xref:System.Security.Cryptography.X509Certificates.DSACertificateExtensions.GetDSAPrivateKey%2A?displayProperty=nameWithType> для подписывания данных, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="640c3-473">You can call the <xref:System.Security.Cryptography.X509Certificates.DSACertificateExtensions.GetDSAPrivateKey%2A?displayProperty=nameWithType> extension method to sign data, as the following example shows.</span></span>

```csharp
public static byte[] SignDataDsaSha384(byte[] data, X509Certificate2 cert)
{
    using (DSA dsa = cert.GetDSAPrivateKey())
    {
        return dsa.SignData(data, HashAlgorithmName.SHA384);
    }
}
```

```vb
Public Shared Function SignDataDsaSha384(data As Byte(), cert As X509Certificate2) As Byte()
    Using DSA As DSA = cert.GetDSAPrivateKey()
        Return DSA.SignData(data, HashAlgorithmName.SHA384)
    End Using
End Function
```

<span data-ttu-id="640c3-474">Можно также вызвать метод расширения <xref:System.Security.Cryptography.X509Certificates.DSACertificateExtensions.GetDSAPublicKey%2A?displayProperty=nameWithType> для проверки подписанных данных, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="640c3-474">And you can call the <xref:System.Security.Cryptography.X509Certificates.DSACertificateExtensions.GetDSAPublicKey%2A?displayProperty=nameWithType> extension method to verify signed data, as the following example shows.</span></span>

```csharp
public static bool VerifyDataDsaSha384(byte[] data, byte[] signature, X509Certificate2 cert)
{
    using (DSA dsa = cert.GetDSAPublicKey())
    {
        return dsa.VerifyData(data, signature, HashAlgorithmName.SHA384);
    }
}
```

```vb
 Public Shared Function VerifyDataDsaSha384(data As Byte(), signature As Byte(), cert As X509Certificate2) As Boolean
    Using dsa As DSA = cert.GetDSAPublicKey()
        Return dsa.VerifyData(data, signature, HashAlgorithmName.SHA384)
    End Using
End Function
```

**<span data-ttu-id="640c3-475">Повышенная четкость входных данных для процедур формирования ключа ECDiffieHellman</span><span class="sxs-lookup"><span data-stu-id="640c3-475">Increased clarity for inputs to ECDiffieHellman key derivation routines</span></span>**

<span data-ttu-id="640c3-476">В .NET Framework 3.5 добавлена поддержка соглашения о ключах Диффи-Хелмана на эллиптических кривых с тремя разными процедурами формирования ключа.</span><span class="sxs-lookup"><span data-stu-id="640c3-476">The .NET Framework 3.5 added support for Elliptic Curve Diffie-Hellman Key Agreement with three different Key Derivation Function (KDF) routines.</span></span> <span data-ttu-id="640c3-477">Входные данные для процедур и сами процедуры настраивались с помощью свойств объекта <xref:System.Security.Cryptography.ECDiffieHellmanCng>.</span><span class="sxs-lookup"><span data-stu-id="640c3-477">The inputs to the routines, and the routines themselves, were configured via properties on the <xref:System.Security.Cryptography.ECDiffieHellmanCng> object.</span></span> <span data-ttu-id="640c3-478">Однако поскольку не все процедуры правильно считывали каждое входное свойство, часто возникала путаница.</span><span class="sxs-lookup"><span data-stu-id="640c3-478">But since not every routine read every input property, there was ample room for confusion on the past of the developer.</span></span>

<span data-ttu-id="640c3-479">Для решения этой проблемы в [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] в базовый класс <xref:System.Security.Cryptography.ECDiffieHellman> были добавлены следующие три метода, предназначенные для более четкого представления этих процедур формирования ключа и их входных данных.</span><span class="sxs-lookup"><span data-stu-id="640c3-479">To address this in the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], the following three methods have been added to the  <xref:System.Security.Cryptography.ECDiffieHellman> base class to more clearly represent these KDF routines and their inputs:</span></span>

|<span data-ttu-id="640c3-480">Метод ECDiffieHellman</span><span class="sxs-lookup"><span data-stu-id="640c3-480">ECDiffieHellman method</span></span>|<span data-ttu-id="640c3-481">Описание</span><span class="sxs-lookup"><span data-stu-id="640c3-481">Description</span></span>|
|----------------------------|-----------------|
|<xref:System.Security.Cryptography.ECDiffieHellman.DeriveKeyFromHash%28System.Security.Cryptography.ECDiffieHellmanPublicKey%2CSystem.Security.Cryptography.HashAlgorithmName%2CSystem.Byte%5B%5D%2CSystem.Byte%5B%5D%29>|<span data-ttu-id="640c3-482">Получает материал ключа с помощью формулы</span><span class="sxs-lookup"><span data-stu-id="640c3-482">Derives key material using the formula</span></span><br /><br /> <span data-ttu-id="640c3-483">HASH(secretPrepend &#124;&#124; *x* &#124;&#124; secretAppend)</span><span class="sxs-lookup"><span data-stu-id="640c3-483">HASH(secretPrepend &#124;&#124; *x* &#124;&#124; secretAppend)</span></span><br /><br /> <span data-ttu-id="640c3-484">HASH(secretPrepend OrElse *x* OrElse secretAppend)</span><span class="sxs-lookup"><span data-stu-id="640c3-484">HASH(secretPrepend OrElse *x* OrElse secretAppend)</span></span><br /><br /> <span data-ttu-id="640c3-485">здесь *x* является вычисляемым результатом алгоритма Диффи-Хелмана на эллиптических кривых.</span><span class="sxs-lookup"><span data-stu-id="640c3-485">where *x* is the computed result of the EC Diffie-Hellman algorithm.</span></span>|
|<xref:System.Security.Cryptography.ECDiffieHellman.DeriveKeyFromHmac%28System.Security.Cryptography.ECDiffieHellmanPublicKey%2CSystem.Security.Cryptography.HashAlgorithmName%2CSystem.Byte%5B%5D%2CSystem.Byte%5B%5D%2CSystem.Byte%5B%5D%29>|<span data-ttu-id="640c3-486">Получает материал ключа с помощью формулы</span><span class="sxs-lookup"><span data-stu-id="640c3-486">Derives key material using the formula</span></span><br /><br /> <span data-ttu-id="640c3-487">HMAC(hmacKey, secretPrepend &#124;&#124; *x* &#124;&#124; secretAppend)</span><span class="sxs-lookup"><span data-stu-id="640c3-487">HMAC(hmacKey, secretPrepend &#124;&#124; *x* &#124;&#124; secretAppend)</span></span><br /><br /> <span data-ttu-id="640c3-488">HMAC(hmacKey, secretPrepend OrElse *x* OrElse secretAppend)</span><span class="sxs-lookup"><span data-stu-id="640c3-488">HMAC(hmacKey, secretPrepend OrElse *x* OrElse secretAppend)</span></span><br /><br /> <span data-ttu-id="640c3-489">здесь *x* является вычисляемым результатом алгоритма Диффи-Хелмана на эллиптических кривых.</span><span class="sxs-lookup"><span data-stu-id="640c3-489">where *x* is the computed result of the EC Diffie-Hellman algorithm.</span></span>|
|<xref:System.Security.Cryptography.ECDiffieHellman.DeriveKeyTls%28System.Security.Cryptography.ECDiffieHellmanPublicKey%2CSystem.Byte%5B%5D%2CSystem.Byte%5B%5D%29>|<span data-ttu-id="640c3-490">Получает материал ключа с помощью алгоритма наследования псевдослучайной функции (PRF) TLS.</span><span class="sxs-lookup"><span data-stu-id="640c3-490">Derives key material using the TLS pseudo-random function (PRF) derivation algorithm.</span></span>|

**<span data-ttu-id="640c3-491">Поддержка симметричного шифрования с помощью постоянного ключа</span><span class="sxs-lookup"><span data-stu-id="640c3-491">Support for persisted-key symmetric encryption</span></span>**

<span data-ttu-id="640c3-492">В библиотеку шифрования Windows (CNG) добавлена поддержка для хранения постоянных симметричных ключей и использования хранящихся в оборудовании симметричных ключей. Разработчики могут применять эти возможности благодаря [!INCLUDE[net_v462](../../../includes/net-v462-md.md)].</span><span class="sxs-lookup"><span data-stu-id="640c3-492">The Windows cryptography library (CNG) added support for storing persisted symmetric keys and using hardware-stored symmetric keys, and the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] made it possible for developers to make use of this feature.</span></span>  <span data-ttu-id="640c3-493">Поскольку понятие имен ключей и поставщиков ключей зависит от реализации, для применения этой функции требуется использовать конструктор конкретных типов реализации, а не предпочтительный метод (например, вызов `Aes.Create`).</span><span class="sxs-lookup"><span data-stu-id="640c3-493">Since the notion of key names and key providers is implementation-specific, using this feature requires utilizing the constructor of the concrete implementation types instead of the preferred factory approach (such as calling `Aes.Create`).</span></span>

<span data-ttu-id="640c3-494">Поддержка симметричного шифрования с помощью постоянных ключей доступна для алгоритмов AES (<xref:System.Security.Cryptography.AesCng>) и 3DES (<xref:System.Security.Cryptography.TripleDESCng>).</span><span class="sxs-lookup"><span data-stu-id="640c3-494">Persisted-key symmetric encryption support exists for the AES (<xref:System.Security.Cryptography.AesCng>) and 3DES (<xref:System.Security.Cryptography.TripleDESCng>) algorithms.</span></span> <span data-ttu-id="640c3-495">Например:</span><span class="sxs-lookup"><span data-stu-id="640c3-495">For example:</span></span>

```csharp
public static byte[] EncryptDataWithPersistedKey(byte[] data, byte[] iv)
{
    using (Aes aes = new AesCng("AesDemoKey", CngProvider.MicrosoftSoftwareKeyStorageProvider))
    {
        aes.IV = iv;

        // Using the zero-argument overload is required to make use of the persisted key
        using (ICryptoTransform encryptor = aes.CreateEncryptor())
        {
            if (!encryptor.CanTransformMultipleBlocks)
            {
                throw new InvalidOperationException("This is a sample, this case wasn’t handled...");
            }

            return encryptor.TransformFinalBlock(data, 0, data.Length);
        }
    }
}
```

```vb
Public Shared Function EncryptDataWithPersistedKey(data As Byte(), iv As Byte()) As Byte()
    Using Aes As Aes = New AesCng("AesDemoKey", CngProvider.MicrosoftSoftwareKeyStorageProvider)
        Aes.IV = iv

        ' Using the zero-argument overload Is required to make use of the persisted key
        Using encryptor As ICryptoTransform = Aes.CreateEncryptor()
            If Not encryptor.CanTransformMultipleBlocks Then
                Throw New InvalidOperationException("This is a sample, this case wasn’t handled...")
            End If
            Return encryptor.TransformFinalBlock(data, 0, data.Length)
        End Using
    End Using
End Function
```

**<span data-ttu-id="640c3-496">Поддержка SignedXml для хэширования SHA-2</span><span class="sxs-lookup"><span data-stu-id="640c3-496">SignedXml support for SHA-2 hashing</span></span>**

<span data-ttu-id="640c3-497">В [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] добавлена поддержка класса <xref:System.Security.Cryptography.Xml.SignedXml> для методов подписи RSA-SHA256, RSA-SHA384 и RSA-SHA512 PKCS#1 и алгоритмов выборки SHA256, SHA384 и SHA512.</span><span class="sxs-lookup"><span data-stu-id="640c3-497">The [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] adds support to  the <xref:System.Security.Cryptography.Xml.SignedXml> class for RSA-SHA256, RSA-SHA384, and RSA-SHA512 PKCS#1 signature methods, and SHA256, SHA384, and SHA512 reference digest algorithms.</span></span>

<span data-ttu-id="640c3-498">Константы URI представлены в <xref:System.Security.Cryptography.Xml.SignedXml>:</span><span class="sxs-lookup"><span data-stu-id="640c3-498">The URI constants are all exposed on <xref:System.Security.Cryptography.Xml.SignedXml>:</span></span>

|<span data-ttu-id="640c3-499">Поле SignedXml</span><span class="sxs-lookup"><span data-stu-id="640c3-499">SignedXml field</span></span>|<span data-ttu-id="640c3-500">Константа</span><span class="sxs-lookup"><span data-stu-id="640c3-500">Constant</span></span>|
|---------------------|--------------|
|<xref:System.Security.Cryptography.Xml.SignedXml.XmlDsigSHA256Url>|<span data-ttu-id="640c3-501">"http://www.w3.org/2001/04/xmlenc#sha256"</span><span class="sxs-lookup"><span data-stu-id="640c3-501">"http://www.w3.org/2001/04/xmlenc#sha256"</span></span>|
|<xref:System.Security.Cryptography.Xml.SignedXml.XmlDsigRSASHA256Url>|<span data-ttu-id="640c3-502">"http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"</span><span class="sxs-lookup"><span data-stu-id="640c3-502">"http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"</span></span>|
|<xref:System.Security.Cryptography.Xml.SignedXml.XmlDsigSHA384Url>|<span data-ttu-id="640c3-503">"http://www.w3.org/2001/04/xmldsig-more#sha384"</span><span class="sxs-lookup"><span data-stu-id="640c3-503">"http://www.w3.org/2001/04/xmldsig-more#sha384"</span></span>|
|<xref:System.Security.Cryptography.Xml.SignedXml.XmlDsigRSASHA384Url>|<span data-ttu-id="640c3-504">"http://www.w3.org/2001/04/xmldsig-more#rsa-sha384"</span><span class="sxs-lookup"><span data-stu-id="640c3-504">"http://www.w3.org/2001/04/xmldsig-more#rsa-sha384"</span></span>|
|<xref:System.Security.Cryptography.Xml.SignedXml.XmlDsigSHA512Url>|<span data-ttu-id="640c3-505">"http://www.w3.org/2001/04/xmlenc#sha512"</span><span class="sxs-lookup"><span data-stu-id="640c3-505">"http://www.w3.org/2001/04/xmlenc#sha512"</span></span>|
|<xref:System.Security.Cryptography.Xml.SignedXml.XmlDsigRSASHA512Url>|<span data-ttu-id="640c3-506">"http://www.w3.org/2001/04/xmldsig-more#rsa-sha512"</span><span class="sxs-lookup"><span data-stu-id="640c3-506">"http://www.w3.org/2001/04/xmldsig-more#rsa-sha512"</span></span>|

 <span data-ttu-id="640c3-507">Программы, которые зарегистрировали пользовательский обработчик <xref:System.Security.Cryptography.SignatureDescription> в <xref:System.Security.Cryptography.CryptoConfig> для дополнительной поддержки этих алгоритмов, будут работать, как и раньше, однако поскольку теперь существуют платформы по умолчанию, регистрировать <xref:System.Security.Cryptography.CryptoConfig> больше не требуется.</span><span class="sxs-lookup"><span data-stu-id="640c3-507">Any programs that have registered a custom <xref:System.Security.Cryptography.SignatureDescription> handler into <xref:System.Security.Cryptography.CryptoConfig> to add support for these algorithms will continue to function as they did in the past, but since there are now platform defaults, the <xref:System.Security.Cryptography.CryptoConfig> registration is no longer necessary.</span></span>

<a name="SQLClient" />

### <a name="sqlclient"></a><span data-ttu-id="640c3-508">SqlClient</span><span class="sxs-lookup"><span data-stu-id="640c3-508">SqlClient</span></span>

<span data-ttu-id="640c3-509">Поставщик данных .NET framework для SQL Server (<xref:System.Data.SqlClient?displayProperty=nameWithType>) предлагает следующие новые возможности в [!INCLUDE[net_v462](../../../includes/net-v462-md.md)].</span><span class="sxs-lookup"><span data-stu-id="640c3-509">.NET Framework Data Provider for SQL Server (<xref:System.Data.SqlClient?displayProperty=nameWithType>) includes the following new features in the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)]:</span></span>

**<span data-ttu-id="640c3-510">Объединение подключений в пул и использование времени ожидания в базах данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="640c3-510">Connection pooling and timeouts with Azure SQL databases</span></span>**

<span data-ttu-id="640c3-511">Если включено объединение подключений в пул и наступает время ожидания или возникает другая ошибка входа, происходит кэширование исключения. При последующих попытках подключения для следующих 5 секунд на 1 минуту создается кэшированное исключение.</span><span class="sxs-lookup"><span data-stu-id="640c3-511">When connection pooling is enabled and a timeout or other login error occurs, an exception is cached, and the cached exception is thrown on any subsequent connection attempt for the next 5 seconds  to 1 minute.</span></span>  <span data-ttu-id="640c3-512">Дополнительные сведения см. в разделе [Объединение подключений в пул (ADO.NET)](../data/adonet/sql-server-connection-pooling.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-512">For more details, see [SQL Server Connection Pooling (ADO.NET)](../data/adonet/sql-server-connection-pooling.md).</span></span>

<span data-ttu-id="640c3-513">Это поведение является нежелательным при подключении к базам данных SQL Azure, поскольку попытки соединения могут завершиться временными ошибками, которые обычно быстро исправляются.</span><span class="sxs-lookup"><span data-stu-id="640c3-513">This behavior is not desirable when connecting to Azure SQL Databases, since connection attempts can fail with transient errors that are typically recovered quickly.</span></span> <span data-ttu-id="640c3-514">В целях максимальной оптимизации процедуры повторных попыток подключения поведение периода блокировки пула подключений удаляется при сбое соединений с базами данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="640c3-514">To better optimize the connection retry experience, the connection pool blocking period behavior is removed when connections to Azure SQL Databases fail.</span></span>

<span data-ttu-id="640c3-515">За счет добавленного нового ключевого слова `PoolBlockingPeriod` вы можете выбирать период времени блокировки, лучше всего подходящий для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="640c3-515">The addition of the new `PoolBlockingPeriod` keyword lets you to select the blocking period best suited for your app.</span></span> <span data-ttu-id="640c3-516">К этим значениям относятся следующие.</span><span class="sxs-lookup"><span data-stu-id="640c3-516">Values include:</span></span>

<xref:System.Data.SqlClient.PoolBlockingPeriod.Auto>

<span data-ttu-id="640c3-517">Период блокировки пула подключений для приложения, которое подключается к базе данных SQL Azure, отключается, а период блокировки пула подключений для приложения, которое подключается к другому экземпляру SQL Server, включается.</span><span class="sxs-lookup"><span data-stu-id="640c3-517">The connection pool blocking period for an application that connects to an Azure SQL Database is disabled, and the connection pool blocking period for an application that connects to any other SQL Server instance is enabled.</span></span> <span data-ttu-id="640c3-518">Это значение по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="640c3-518">This is the default value.</span></span> <span data-ttu-id="640c3-519">Если имя конечной точки сервера заканчивается любой из приведенных ниже строк, она считается базой данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="640c3-519">If the Server endpoint name ends with any of the following, they are considered Azure SQL Databases:</span></span>

- <span data-ttu-id="640c3-520">.database.windows.net</span><span class="sxs-lookup"><span data-stu-id="640c3-520">.database.windows.net</span></span>

- <span data-ttu-id="640c3-521">.database.chinacloudapi.cn</span><span class="sxs-lookup"><span data-stu-id="640c3-521">.database.chinacloudapi.cn</span></span>

- <span data-ttu-id="640c3-522">.database.usgovcloudapi.net</span><span class="sxs-lookup"><span data-stu-id="640c3-522">.database.usgovcloudapi.net</span></span>

- <span data-ttu-id="640c3-523">.database.cloudapi.de</span><span class="sxs-lookup"><span data-stu-id="640c3-523">.database.cloudapi.de</span></span>

<xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock>

<span data-ttu-id="640c3-524">Период блокировки пула подключений всегда включен.</span><span class="sxs-lookup"><span data-stu-id="640c3-524">The connection pool blocking period is always enabled.</span></span>

<xref:System.Data.SqlClient.PoolBlockingPeriod.NeverBlock>

<span data-ttu-id="640c3-525">Период блокировки пула подключений всегда отключен.</span><span class="sxs-lookup"><span data-stu-id="640c3-525">The connection pool blocking period is always disabled.</span></span>

**<span data-ttu-id="640c3-526">Усовершенствования функции Always Encrypted</span><span class="sxs-lookup"><span data-stu-id="640c3-526">Enhancements for Always Encrypted</span></span>**

<span data-ttu-id="640c3-527">В SQLClient представлены два усовершенствования для функции Always Encrypted.</span><span class="sxs-lookup"><span data-stu-id="640c3-527">SQLClient introduces two enhancements for Always Encrypted:</span></span>

- <span data-ttu-id="640c3-528">Для повышения производительности параметризованных запросов к зашифрованным столбцам базы данных выполняется кэширование метаданных шифрования для параметров запроса.</span><span class="sxs-lookup"><span data-stu-id="640c3-528">To improve performance of parameterized queries against encrypted database columns, encryption metadata for query parameters is now cached.</span></span> <span data-ttu-id="640c3-529">Если свойству <xref:System.Data.SqlClient.SqlConnection.ColumnEncryptionQueryMetadataCacheEnabled%2A?displayProperty=nameWithType> задано значение `true` (это значение по умолчанию) и один и тот же запрос вызывается несколько раз, клиент получает метаданные параметров с сервера только один раз.</span><span class="sxs-lookup"><span data-stu-id="640c3-529">With the <xref:System.Data.SqlClient.SqlConnection.ColumnEncryptionQueryMetadataCacheEnabled%2A?displayProperty=nameWithType> property set to `true` (which is the default value), if the same query is called multiple times, the client retrieves parameter metadata from the server only once.</span></span>

- <span data-ttu-id="640c3-530">Теперь записи ключей шифрования столбцов в кэше ключа вытесняются по истечении интервала времени, настроенного с помощью свойства <xref:System.Data.SqlClient.SqlConnection.ColumnEncryptionKeyCacheTtl%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-530">Column encryption key entries in the key cache are now evicted after a configurable time interval, set using the <xref:System.Data.SqlClient.SqlConnection.ColumnEncryptionKeyCacheTtl%2A?displayProperty=nameWithType> property.</span></span>

<a name="WCF" />

### <a name="windows-communication-foundation"></a><span data-ttu-id="640c3-531">Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="640c3-531">Windows Communication Foundation</span></span>

<span data-ttu-id="640c3-532">В [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] Windows Communication Foundation содержит ряд улучшений в следующих областях.</span><span class="sxs-lookup"><span data-stu-id="640c3-532">In the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], Windows Communication Foundation has been enhanced in the following areas:</span></span>

**<span data-ttu-id="640c3-533">Поддержка безопасности транспорта WCF для сертификатов, сохраненных с помощью CNG</span><span class="sxs-lookup"><span data-stu-id="640c3-533">WCF transport security support for certificates stored using CNG</span></span>**

<span data-ttu-id="640c3-534">Безопасность транспорта WCF поддерживает сертификаты, сохраненные с использованием библиотеки шифрования Windows (CNG).</span><span class="sxs-lookup"><span data-stu-id="640c3-534">WCF transport security supports certificates stored using the Windows cryptography library (CNG).</span></span> <span data-ttu-id="640c3-535">В [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] эта поддержка ограничивается использованием сертификатов с открытым ключом, длина экспоненты которого не превышает 32 бита.</span><span class="sxs-lookup"><span data-stu-id="640c3-535">In the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], this support is limited to using certificates with a public key that has an exponent no more than 32 bits in length.</span></span> <span data-ttu-id="640c3-536">Если приложение предназначено для [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], эта функция включена по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="640c3-536">When an application targets the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], this feature is on by default.</span></span>

<span data-ttu-id="640c3-537">Для приложений, которые предназначены для [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] и более ранних версий, но работают в [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], эту функцию можно включить путем добавления следующей строки в раздел [\<runtime>](../configure-apps/file-schema/runtime/runtime-element.md) файла app.config или web.config.</span><span class="sxs-lookup"><span data-stu-id="640c3-537">For applications that target the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] and earlier but are running on the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], this feature can be enabled by adding the following line to the [\<runtime>](../configure-apps/file-schema/runtime/runtime-element.md) section of the app.config or web.config file.</span></span>

```xml
<AppContextSwitchOverrides
    value="Switch.System.ServiceModel.DisableCngCertificates=false"
/>
```

<span data-ttu-id="640c3-538">Это также можно сделать программно с помощью следующего кода:</span><span class="sxs-lookup"><span data-stu-id="640c3-538">This can also be done programmatically with code like the following:</span></span>

```csharp
private const string DisableCngCertificates = @"Switch.System.ServiceModel.DisableCngCertificates";
AppContext.SetSwitch(disableCngCertificates, false);
```

```vb
Const DisableCngCertificates As String = "Switch.System.ServiceModel.DisableCngCertificates"
AppContext.SetSwitch(disableCngCertificates, False)
```

**<span data-ttu-id="640c3-539">Улучшенная поддержка нескольких правил коррекции летнего времени с помощью класса DataContractJsonSerializer</span><span class="sxs-lookup"><span data-stu-id="640c3-539">Better support for multiple daylight saving time adjustment rules by the DataContractJsonSerializer class</span></span>**

<span data-ttu-id="640c3-540">Клиенты могут использовать параметр конфигурации приложения для определения того, поддерживает ли класс <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> несколько правил коррекции для одного часового пояса.</span><span class="sxs-lookup"><span data-stu-id="640c3-540">Customers can use an application configuration setting to determine whether the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> class supports multiple adjustment rules for a single time zone.</span></span> <span data-ttu-id="640c3-541">Это функция, включаемая пользователем.</span><span class="sxs-lookup"><span data-stu-id="640c3-541">This is an opt-in feature.</span></span> <span data-ttu-id="640c3-542">Чтобы ее включить, добавьте следующий параметр в файл app.config:</span><span class="sxs-lookup"><span data-stu-id="640c3-542">To enable it, add the following setting to your app.config file:</span></span>

```xml
<runtime>
     <AppContextSwitchOverrides value="Switch.System.Runtime.Serialization.DoNotUseTimeZoneInfo=false" />
</runtime>
```

<span data-ttu-id="640c3-543">Если эта возможность включена, объект <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> использует тип <xref:System.TimeZoneInfo> вместо типа <xref:System.TimeZone> для десериализации данных даты и времени.</span><span class="sxs-lookup"><span data-stu-id="640c3-543">When this feature is enabled, a <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> object uses the <xref:System.TimeZoneInfo> type instead of the <xref:System.TimeZone> type to deserialize date and time data.</span></span> <xref:System.TimeZoneInfo> <span data-ttu-id="640c3-544">поддерживает несколько правил коррекции, что позволяет работать с историческими данными часового пояса; <xref:System.TimeZone> не поддерживает такие правила.</span><span class="sxs-lookup"><span data-stu-id="640c3-544">supports multiple adjustment rules, which makes it possible to work with historic time zone data;   <xref:System.TimeZone> does not.</span></span>

<span data-ttu-id="640c3-545">Дополнительные сведения о структуре <xref:System.TimeZoneInfo> и коррекциях часового пояса см. в статье [Общие сведения о часовых поясах](../../standard/datetime/time-zone-overview.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-545">For more information on the <xref:System.TimeZoneInfo> structure and time zone adjustments, see [Time Zone Overview](../../standard/datetime/time-zone-overview.md).</span></span>

**<span data-ttu-id="640c3-546">Оптимальное подключение с помощью класса NetNamedPipeBinding</span><span class="sxs-lookup"><span data-stu-id="640c3-546">NetNamedPipeBinding best match</span></span>**

<span data-ttu-id="640c3-547">В WCF представлен новый параметр приложения, который может быть задан в клиентских приложениях для их постоянного подключения к службе, прослушивающей URI, наилучшим образом соответствующий запрошенному.</span><span class="sxs-lookup"><span data-stu-id="640c3-547">WCF has a new app setting that can be set on client applications to ensure they always connect to the service listening on the URI that best matches the one that they request.</span></span> <span data-ttu-id="640c3-548">Если этот параметр приложения имеет значение `false` (по умолчанию), клиенты могут использовать <xref:System.ServiceModel.NetNamedPipeBinding> для подключения к службе, прослушивающей URI, который является подстрокой запрошенного URI.</span><span class="sxs-lookup"><span data-stu-id="640c3-548">With this app setting set to `false` (the default), it is possible for clients using <xref:System.ServiceModel.NetNamedPipeBinding> to attempt to connect to a service listening on a URI that is a substring of the requested URI.</span></span>

<span data-ttu-id="640c3-549">Например, клиент пытается подключиться к службе, прослушивающей `net.pipe://localhost/Service1`, но другая служба на этом компьютере, запущенная с правами администратора, прослушивает `net.pipe://localhost`.</span><span class="sxs-lookup"><span data-stu-id="640c3-549">For example, a client tries to connect to a service listening at `net.pipe://localhost/Service1`, but a different service on that machine running with administrator privilege is listening at `net.pipe://localhost`.</span></span> <span data-ttu-id="640c3-550">Если этому параметру приложения задать значение `false`, клиент будет пытаться подключиться не к той службе.</span><span class="sxs-lookup"><span data-stu-id="640c3-550">With this app setting set to `false`, the client would attempt to connect to the wrong service.</span></span> <span data-ttu-id="640c3-551">После установки значения `true` для параметра приложения клиент будет всегда подключаться к наиболее подходящей службе.</span><span class="sxs-lookup"><span data-stu-id="640c3-551">After setting the app setting to `true`, the client will always connect to the best matching service.</span></span>

> [!NOTE]
> <span data-ttu-id="640c3-552">Клиенты, использующие <xref:System.ServiceModel.NetNamedPipeBinding>, находят службы на основе их базового адреса (если он существует), а не на основе полного адреса конечной точки.</span><span class="sxs-lookup"><span data-stu-id="640c3-552">Clients using <xref:System.ServiceModel.NetNamedPipeBinding> find services based on the service's base address (if it exists) rather than the full endpoint address.</span></span> <span data-ttu-id="640c3-553">Чтобы обеспечить постоянную работу этого параметра, служба должна использовать уникальный базовый адрес.</span><span class="sxs-lookup"><span data-stu-id="640c3-553">To ensure this setting always works the service should use a unique base address.</span></span>

<span data-ttu-id="640c3-554">Для активации этого изменения добавьте следующий параметр в файл App.config или Web.config клиентского приложения:</span><span class="sxs-lookup"><span data-stu-id="640c3-554">To enable this change, add the following app setting to your client application's App.config or Web.config file:</span></span>

```xml
<configuration>
    <appSettings>
        <add key="wcf:useBestMatchNamedPipeUri" value="true" />
    </appSettings>
</configuration>
```

**<span data-ttu-id="640c3-555">SSL 3.0 не является протоколом по умолчанию</span><span class="sxs-lookup"><span data-stu-id="640c3-555">SSL 3.0 is not a default protocol</span></span>**

<span data-ttu-id="640c3-556">При использовании NetTcp для обеспечения безопасности транспорта и применении типа учетных данных сертификата SSL 3.0 больше не является протоколом по умолчанию для согласования безопасного соединения.</span><span class="sxs-lookup"><span data-stu-id="640c3-556">When using NetTcp with transport security and a credential type of certificate, SSL 3.0 is no longer a default protocol used for negotiating a secure connection.</span></span> <span data-ttu-id="640c3-557">В большинстве случаев существующие приложения не должны затрагиваться, поскольку TLS 1.0 входит в список протоколов для NetTcp.</span><span class="sxs-lookup"><span data-stu-id="640c3-557">In most cases, there should be no impact to existing apps, because TLS 1.0 is included in the protocol list for NetTcp.</span></span> <span data-ttu-id="640c3-558">Все существующие клиенты должны иметь возможность согласовывать подключение с помощью хотя бы TLS 1.0.</span><span class="sxs-lookup"><span data-stu-id="640c3-558">All existing clients should be able to negotiate a connection using at least TLS 1.0.</span></span> <span data-ttu-id="640c3-559">Если требуется Ssl3, воспользуйтесь одним из указанных ниже механизмов конфигурации и добавьте его в список установленных протоколов.</span><span class="sxs-lookup"><span data-stu-id="640c3-559">If Ssl3 is required, use one of the following configuration mechanisms to add it to the list of negotiated protocols.</span></span>

- <span data-ttu-id="640c3-560">Свойство <xref:System.ServiceModel.Channels.SslStreamSecurityBindingElement.SslProtocols%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-560">The <xref:System.ServiceModel.Channels.SslStreamSecurityBindingElement.SslProtocols%2A?displayProperty=nameWithType> property</span></span>

- <span data-ttu-id="640c3-561">Свойство <xref:System.ServiceModel.TcpTransportSecurity.SslProtocols%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-561">The <xref:System.ServiceModel.TcpTransportSecurity.SslProtocols%2A?displayProperty=nameWithType> property</span></span>

- <span data-ttu-id="640c3-562">Раздел [\<transport>](../configure-apps/file-schema/wcf/transport-of-nettcpbinding.md) раздела [\<netTcpBinding>](../configure-apps/file-schema/wcf/nettcpbinding.md)</span><span class="sxs-lookup"><span data-stu-id="640c3-562">The [\<transport>](../configure-apps/file-schema/wcf/transport-of-nettcpbinding.md) section of the [\<netTcpBinding>](../configure-apps/file-schema/wcf/nettcpbinding.md) section</span></span>

- <span data-ttu-id="640c3-563">Раздел [\<sslStreamSecurity>](../configure-apps/file-schema/wcf/sslstreamsecurity.md) раздела [\<customBinding>](../configure-apps/file-schema/wcf/custombinding.md)</span><span class="sxs-lookup"><span data-stu-id="640c3-563">The [\<sslStreamSecurity>](../configure-apps/file-schema/wcf/sslstreamsecurity.md) section of the [\<customBinding>](../configure-apps/file-schema/wcf/custombinding.md) section</span></span>

<a name="WPF462" />

### <a name="windows-presentation-foundation-wpf"></a><span data-ttu-id="640c3-564">Windows Presentation Foundation (WPF)</span><span class="sxs-lookup"><span data-stu-id="640c3-564">Windows Presentation Foundation (WPF)</span></span>

<span data-ttu-id="640c3-565">В [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] Windows Presentation Foundation содержит ряд улучшений в следующих областях.</span><span class="sxs-lookup"><span data-stu-id="640c3-565">In the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], Windows Presentation Foundation has been enhanced in the following areas:</span></span>

**<span data-ttu-id="640c3-566">Сортировка групп</span><span class="sxs-lookup"><span data-stu-id="640c3-566">Group sorting</span></span>**

<span data-ttu-id="640c3-567">Приложение, использующее объект <xref:System.Windows.Data.CollectionView> для группирования данных, теперь может явно объявлять порядок сортировки групп.</span><span class="sxs-lookup"><span data-stu-id="640c3-567">An application that uses a <xref:System.Windows.Data.CollectionView> object to group data can now explicitly declare how to  sort the groups.</span></span> <span data-ttu-id="640c3-568">Явная сортировка позволяет решить проблему неочевидного упорядочивания, которая возникает, когда приложение динамически добавляет или удаляет группы или когда оно изменяет значения свойств элементов, участвующих в группировании.</span><span class="sxs-lookup"><span data-stu-id="640c3-568">Explicit sorting addresses the problem of non-intuitive ordering that occurs when an app dynamically adds or removes groups, or when it changes the value of item properties involved in grouping.</span></span> <span data-ttu-id="640c3-569">Она также может повысить производительность процесса создания группы путем перемещения сравнений свойств группирования из сортировки полной коллекции в сортировку групп.</span><span class="sxs-lookup"><span data-stu-id="640c3-569">It can also improve the performance of the group creation process by moving comparisons of the grouping properties from the sort of the full collection to the sort of the groups.</span></span>

<span data-ttu-id="640c3-570">Для поддержки сортировки групп новые свойства <xref:System.ComponentModel.GroupDescription.SortDescriptions%2A?displayProperty=nameWithType> и <xref:System.ComponentModel.GroupDescription.CustomSort%2A?displayProperty=nameWithType> описывают способ сортировки коллекции групп, созданной объектом <xref:System.ComponentModel.GroupDescription>.</span><span class="sxs-lookup"><span data-stu-id="640c3-570">To support group sorting, the new <xref:System.ComponentModel.GroupDescription.SortDescriptions%2A?displayProperty=nameWithType> and <xref:System.ComponentModel.GroupDescription.CustomSort%2A?displayProperty=nameWithType> properties describe how to sort the collection of groups produced by the <xref:System.ComponentModel.GroupDescription> object.</span></span> <span data-ttu-id="640c3-571">Эта процедура аналогична способу, которым свойства <xref:System.Windows.Data.ListCollectionView> с аналогичными именами описывают принцип сортировки элементов данных.</span><span class="sxs-lookup"><span data-stu-id="640c3-571">This is analogous to the way the identically named <xref:System.Windows.Data.ListCollectionView> properties describe how to sort the data items.</span></span>

<span data-ttu-id="640c3-572">В наиболее распространенных случаях можно использовать два новых статических свойства класса <xref:System.Windows.Data.PropertyGroupDescription> — <xref:System.Windows.Data.PropertyGroupDescription.CompareNameAscending%2A> и <xref:System.Windows.Data.PropertyGroupDescription.CompareNameDescending%2A>.</span><span class="sxs-lookup"><span data-stu-id="640c3-572">Two new static properties of the <xref:System.Windows.Data.PropertyGroupDescription> class,  <xref:System.Windows.Data.PropertyGroupDescription.CompareNameAscending%2A> and <xref:System.Windows.Data.PropertyGroupDescription.CompareNameDescending%2A>, can be used for the most common cases.</span></span>

<span data-ttu-id="640c3-573">Например, следующий XAML группирует данные по возрасту, сортирует возрастные группы в порядке возрастания и группирует элементы в каждой возрастной группе по фамилии.</span><span class="sxs-lookup"><span data-stu-id="640c3-573">For example, the following XAML groups data by age, sort the age groups in ascending order, and group the items within each age group by last name.</span></span>

```xaml
<GroupDescriptions>
     <PropertyGroupDescription
         PropertyName="Age"
         CustomSort=
              "{x:Static PropertyGroupDescription.CompareNamesAscending}"/>
     </PropertyGroupDescription>
</GroupDescriptions>

<SortDescriptions>
     <SortDescription PropertyName="LastName"/>
</SortDescriptions>
```

**<span data-ttu-id="640c3-574">Поддержка программируемой клавиатуры</span><span class="sxs-lookup"><span data-stu-id="640c3-574">Soft keyboard support</span></span>**

<span data-ttu-id="640c3-575">Поддержка программируемой клавиатуры позволяет отслеживать фокус в приложениях WPF путем автоматического вызова и отклонения новой программируемой клавиатуры в Windows 10 при получении элементом управления, который может принимать текстовые входные данные, сигнала о сенсорном вводе.</span><span class="sxs-lookup"><span data-stu-id="640c3-575">Soft Keyboard support enables focus tracking in a WPF applications by automatically invoking and dismissing the new Soft Keyboard in Windows 10 when the touch input is received by a control that can take textual input.</span></span>

<span data-ttu-id="640c3-576">В предыдущих версиях платформы .NET Framework приложения WPF не использовали отслеживание фокуса без отключения поддержки пера и сенсорного ввода WPF.</span><span class="sxs-lookup"><span data-stu-id="640c3-576">In previous versions of the .NET Framework, WPF applications cannot opt into the focus tracking without disabling WPF pen/touch gesture support.</span></span>  <span data-ttu-id="640c3-577">В результате приложения WPF должны выбрать между полной поддержкой сенсорного ввода WPF или использованием мыши Windows.</span><span class="sxs-lookup"><span data-stu-id="640c3-577">As a result, WPF applications must choose between full WPF touch support or rely on Windows mouse promotion.</span></span>

**<span data-ttu-id="640c3-578">DPI для каждого монитора</span><span class="sxs-lookup"><span data-stu-id="640c3-578">Per-monitor DPI</span></span>**

<span data-ttu-id="640c3-579">В целях эксплуатации во множестве сред с высоким и смешанным разрешением для приложений WPF платформа WPF в [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] включает поддержку DPI для каждого монитора.</span><span class="sxs-lookup"><span data-stu-id="640c3-579">To support the recent proliferation of high-DPI and hybrid-DPI environments for WPF apps, WPF in the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] enables per-monitor awareness.</span></span> <span data-ttu-id="640c3-580">Дополнительные сведения о включении в приложении WPF поддержки DPI для каждого монитора см. в [примерах и в руководстве разработчика](https://github.com/Microsoft/WPF-Samples/tree/master/PerMonitorDPI) на сайте GitHub.</span><span class="sxs-lookup"><span data-stu-id="640c3-580">See the [samples and developer guide](https://github.com/Microsoft/WPF-Samples/tree/master/PerMonitorDPI) on GitHub for more information about how to enable your WPF app to become per-monitor DPI aware.</span></span>

<span data-ttu-id="640c3-581">В предыдущих версиях платформы .NET Framework приложения WPF поддерживают DPI на уровне системы.</span><span class="sxs-lookup"><span data-stu-id="640c3-581">In previous versions of the .NET Framework, WPF apps are system-DPI aware.</span></span> <span data-ttu-id="640c3-582">Другими словами, ОС соответствующим образом масштабирует пользовательский интерфейс приложения в зависимости от разрешения экрана монитора, на котором отображается приложение.</span><span class="sxs-lookup"><span data-stu-id="640c3-582">In other words, the application's UI is scaled by the OS as appropriate, depending on the DPI of the monitor on which the app is rendered.</span></span> <span data-ttu-id="640c3-583">,</span><span class="sxs-lookup"><span data-stu-id="640c3-583">,</span></span>

<span data-ttu-id="640c3-584">Для приложений, работающих под управлением [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], можно отключить изменения DPI для каждого монитора в приложениях WPF путем добавления инструкции конфигурации в раздел [\<runtime>](../configure-apps/file-schema/runtime/runtime-element.md) файла конфигурации приложения, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="640c3-584">For apps running under the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], you can disable per-monitor DPI changes in WPF apps by adding a configuration statement to the [\<runtime>](../configure-apps/file-schema/runtime/runtime-element.md) section of your application configuration file, as follows:</span></span>

```xml
<runtime>
   <AppContextSwitchOverrides value="Switch.System.Windows.DoNotScaleForDpiChanges=false"/>
</runtime>
```

<a name="WF462" />

### <a name="windows-workflow-foundation-wf"></a><span data-ttu-id="640c3-585">Windows Workflow Foundation (WF)</span><span class="sxs-lookup"><span data-stu-id="640c3-585">Windows Workflow Foundation (WF)</span></span>

<span data-ttu-id="640c3-586">В [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] Windows Workflow Foundation содержит ряд улучшений в следующих областях.</span><span class="sxs-lookup"><span data-stu-id="640c3-586">In the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], Windows Workflow Foundation has been enhanced in the following area:</span></span>

**<span data-ttu-id="640c3-587">Поддержка выражений C# и IntelliSense в повторно размещаемом конструкторе WF</span><span class="sxs-lookup"><span data-stu-id="640c3-587">Support for C# expressions and IntelliSense in the Re-hosted WF Designer</span></span>**

<span data-ttu-id="640c3-588">Начиная с [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], WF поддерживает выражения C# в конструкторе Visual Studio и рабочих процессах кода.</span><span class="sxs-lookup"><span data-stu-id="640c3-588">Starting with the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], WF supports C# expressions in both the Visual Studio Designer and in code workflows.</span></span> <span data-ttu-id="640c3-589">Повторно размещаемый конструктор рабочих процессов является ключевой возможностью WF, позволяющей размещать конструкторы рабочих процессов в приложении вне среды Visual Studio (например, в WPF).</span><span class="sxs-lookup"><span data-stu-id="640c3-589">The Re-hosted Workflow Designer is a key feature of WF that allows for the Workflow Designer to be in an application outside Visual Studio (for example, in WPF).</span></span>  <span data-ttu-id="640c3-590">Windows Workflow Foundation поддерживает выражения C# и IntelliSense в повторно размещаемом конструкторе рабочих процессов.</span><span class="sxs-lookup"><span data-stu-id="640c3-590">Windows Workflow Foundation provides the ability to support C# expressions and IntelliSense in the Re-hosted Workflow Designer.</span></span> <span data-ttu-id="640c3-591">Дополнительные сведения см. в [блоге по Windows Workflow Foundation](https://go.microsoft.com/fwlink/?LinkID=809042&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="640c3-591">For more information, see the [Windows Workflow Foundation blog](https://go.microsoft.com/fwlink/?LinkID=809042&clcid=0x409).</span></span>

`Availability of IntelliSense when a customer rebuilds a workflow project from Visual Studio`
<span data-ttu-id="640c3-592">В версиях .NET Framework, более ранних, чем [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], в случае перестроения проекта рабочего процесса из Visual Studio происходит нарушение работы IntelliSense конструктора WF.</span><span class="sxs-lookup"><span data-stu-id="640c3-592">In versions of the .NET Framework prior to the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], WF Designer IntelliSense is broken when a customer rebuilds a workflow project from Visual Studio.</span></span> <span data-ttu-id="640c3-593">Несмотря на успешное построение проекта, типы рабочих процессов отсутствуют в конструкторе, и в окне **Список ошибок** отображаются предупреждения из IntelliSense о недостающих типах рабочего процесса.</span><span class="sxs-lookup"><span data-stu-id="640c3-593">While the project build is successful, the workflow types are not found on the designer, and warnings from IntelliSense for the missing workflow types appear in the **Error List** window.</span></span> <span data-ttu-id="640c3-594">В [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] эта проблема решена и IntelliSense работает.</span><span class="sxs-lookup"><span data-stu-id="640c3-594">The [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] addresses this issue and makes IntelliSense available.</span></span>

**<span data-ttu-id="640c3-595">Приложения Workflow версии 1 с функцией отслеживания рабочего процесса теперь работают в режиме FIPS</span><span class="sxs-lookup"><span data-stu-id="640c3-595">Workflow V1 applications with Workflow Tracking on now run under FIPS-mode</span></span>**

<span data-ttu-id="640c3-596">Теперь на компьютерах с включенным режимом поддержки стандарта FIPS можно успешно запускать приложение Workflow версии 1 с функцией отслеживания рабочих процессов.</span><span class="sxs-lookup"><span data-stu-id="640c3-596">Machines with FIPS Compliance Mode enabled can now successfully run a workflow Version 1-style application with Workflow tracking on.</span></span> <span data-ttu-id="640c3-597">Чтобы реализовать этот сценарий, необходимо внести следующее изменение в файл app.config:</span><span class="sxs-lookup"><span data-stu-id="640c3-597">To enable this scenario, you must make the following change to your app.config file:</span></span>

```xml
<add key="microsoft:WorkflowRuntime:FIPSRequired" value="true" />
```

<span data-ttu-id="640c3-598">Если этот сценарий не реализован, запущенное приложение продолжает создавать исключение с сообщением "Данная реализация не является частью протестированных криптографических алгоритмов Windows Platform FIPS".</span><span class="sxs-lookup"><span data-stu-id="640c3-598">If this scenario is not enabled, running the application continues to generate an exception with the message, "This implementation is not part of the Windows Platform FIPS validated cryptographic algorithms."</span></span>

**<span data-ttu-id="640c3-599">Усовершенствования рабочего процесса при использовании динамического обновления с конструктором рабочих процессов Visual Studio</span><span class="sxs-lookup"><span data-stu-id="640c3-599">Workflow Improvements when using Dynamic Update with Visual Studio Workflow Designer</span></span>**

<span data-ttu-id="640c3-600">Теперь конструктор рабочих процессов, конструктор действия FlowChart и другие конструкторы действий успешно загружают и отображают рабочие процессы, которые были сохранены после вызова метода <xref:System.Activities.DynamicUpdate.DynamicUpdateServices.PrepareForUpdate%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-600">The Workflow Designer, FlowChart Activity Designer, and other Workflow Activity Designers now successfully load and display workflows that have been saved after calling  the <xref:System.Activities.DynamicUpdate.DynamicUpdateServices.PrepareForUpdate%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="640c3-601">В версиях .NET Framework, предшествующих [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], загрузка XAML-файла в Visual Studio для рабочего процесса, который был сохранен после вызова метода <xref:System.Activities.DynamicUpdate.DynamicUpdateServices.PrepareForUpdate%2A?displayProperty=nameWithType>, может привести к возникновению следующих проблем.</span><span class="sxs-lookup"><span data-stu-id="640c3-601">In versions of the .NET Framework before the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], loading a XAML file in Visual Studio for a workflow that has been saved after calling <xref:System.Activities.DynamicUpdate.DynamicUpdateServices.PrepareForUpdate%2A?displayProperty=nameWithType> can result in the following issues:</span></span>

- <span data-ttu-id="640c3-602">Конструктор рабочих процессов не может правильно загрузить XAML-файл (если <xref:System.Activities.Presentation.ViewState.ViewStateData.Id%2A?displayProperty=nameWithType> находится в конце строки).</span><span class="sxs-lookup"><span data-stu-id="640c3-602">The Workflow Designer can't load the XAML file correctly (when the <xref:System.Activities.Presentation.ViewState.ViewStateData.Id%2A?displayProperty=nameWithType> is at the end of the line).</span></span>

- <span data-ttu-id="640c3-603">Конструктор действия FlowChart или другие конструкторы действий рабочих процессов могут отображать все объекты в их расположениях по умолчанию в отличие от значений вложенных свойств.</span><span class="sxs-lookup"><span data-stu-id="640c3-603">Flowchart Activity Designer or other Workflow Activity Designers may display all objects in their default locations as opposed to attached property values.</span></span>

<a name="clickonce-1" />

### <a name="clickonce"></a><span data-ttu-id="640c3-604">ClickOnce</span><span class="sxs-lookup"><span data-stu-id="640c3-604">ClickOnce</span></span>

<span data-ttu-id="640c3-605">Технология ClickOnce была обновлена для поддержки протоколов TLS 1.1 и TLS 1.2 наряду с уже поддерживаемой версией 1.0.</span><span class="sxs-lookup"><span data-stu-id="640c3-605">ClickOnce has been updated to support TLS 1.1 and TLS 1.2 in addition to the 1.0 protocol, which it already supports.</span></span> <span data-ttu-id="640c3-606">ClickOnce автоматически определяет необходимый протокол. Для включения поддержки протоколов TLS 1.1 и 1.2 в приложении ClickOnce не требуется выполнять дополнительные действия.</span><span class="sxs-lookup"><span data-stu-id="640c3-606">ClickOnce automatically detects which protocol is required; no extra steps within the ClickOnce application are required to enable TLS 1.1 and 1.2 support.</span></span>

<a name="UWPConvert" />

### <a name="converting-windows-forms-and-wpf-apps-to--uwp-apps"></a><span data-ttu-id="640c3-607">Преобразование приложений Windows Forms и приложений WPF в приложения UWP</span><span class="sxs-lookup"><span data-stu-id="640c3-607">Converting Windows Forms and WPF apps to  UWP apps</span></span>

<span data-ttu-id="640c3-608">Теперь Windows предоставляет возможности переноса существующих классических приложений Windows, включая приложения WPF и Windows Forms, на универсальную платформу Windows (UWP).</span><span class="sxs-lookup"><span data-stu-id="640c3-608">Windows now offers capabilities to bring existing Windows desktop apps, including WPF and Windows Forms apps, to the Universal Windows Platform (UWP).</span></span> <span data-ttu-id="640c3-609">Эта технология играет роль моста, позволяя постепенно переносить существующую базу кода на платформу UWP, переводя, тем самым, приложения на все устройства Windows 10.</span><span class="sxs-lookup"><span data-stu-id="640c3-609">This technology acts as a bridge by enabling you to gradually migrate your existing code base to UWP, thereby bringing your app to all Windows 10 devices.</span></span>

<span data-ttu-id="640c3-610">Преобразованное классическое приложение получает удостоверение, аналогичное удостоверению приложения платформы UWP, которое делает доступными интерфейсы API UWP для включения функций, таких как динамические плитки и уведомления.</span><span class="sxs-lookup"><span data-stu-id="640c3-610">Converted desktop apps gain an app identity similar to the app identity of UWP apps, which makes UWP APIs accessible to enable features such as Live Tiles and notifications.</span></span> <span data-ttu-id="640c3-611">Приложение продолжает работать как раньше и функционирует как приложение полного доверия.</span><span class="sxs-lookup"><span data-stu-id="640c3-611">The app continues to behave as before and runs as a full trust app.</span></span> <span data-ttu-id="640c3-612">После преобразования приложения к существующему процессу полного доверия можно добавить процесс контейнера приложения для подключения адаптивного пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="640c3-612">Once the app is converted, an app container process can be added to the existing full trust process to add an adaptive user interface.</span></span> <span data-ttu-id="640c3-613">При перемещении всех функциональных возможностей в процесс контейнера приложения можно удалить процесс полного доверия и сделать новое приложение UWP доступным для всех устройств Windows 10.</span><span class="sxs-lookup"><span data-stu-id="640c3-613">When all functionality is moved to the app container process, the full trust process can be removed and the new UWP app can be made available to all Windows 10 devices.</span></span>

<a name="Debug462" />

### <a name="debugging-improvements"></a><span data-ttu-id="640c3-614">Усовершенствования отладки</span><span class="sxs-lookup"><span data-stu-id="640c3-614">Debugging improvements</span></span>

<span data-ttu-id="640c3-615">*API неуправляемой отладки* был усовершенствован в [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] для выполнения дополнительного анализа при возникновении <xref:System.NullReferenceException>, чтобы определить, какая переменная в одной строке исходного кода является `null`.</span><span class="sxs-lookup"><span data-stu-id="640c3-615">The *unmanaged debugging API* has been enhanced in the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] to perform additional analysis when a <xref:System.NullReferenceException> is thrown so that it is possible to determine which variable in a single line of source code is `null`.</span></span>   <span data-ttu-id="640c3-616">Для поддержки этого сценария в неуправляемый API отладки были добавлены следующие API.</span><span class="sxs-lookup"><span data-stu-id="640c3-616">To support this scenario, the following APIs have been added to the unmanaged debugging API.</span></span>

- <span data-ttu-id="640c3-617">Интерфейсы [ICorDebugCode4](../unmanaged-api/debugging/icordebugcode4-interface.md), [ICorDebugVariableHome](../unmanaged-api/debugging/icordebugvariablehome-interface.md) и [ICorDebugVariableHomeEnum](../unmanaged-api/debugging/icordebugvariablehomeenum-interface.md), предоставляющие собственные начальные расположения управляемых переменных.</span><span class="sxs-lookup"><span data-stu-id="640c3-617">The [ICorDebugCode4](../unmanaged-api/debugging/icordebugcode4-interface.md), [ICorDebugVariableHome](../unmanaged-api/debugging/icordebugvariablehome-interface.md), and [ICorDebugVariableHomeEnum](../unmanaged-api/debugging/icordebugvariablehomeenum-interface.md) interfaces, which expose the native homes of managed variables.</span></span> <span data-ttu-id="640c3-618">Это позволяет отладчикам выполнять анализ потока кода при возникновении <xref:System.NullReferenceException> и работать в обратном порядке для определения управляемой переменной, соответствующей собственному расположению, которым был `null`.</span><span class="sxs-lookup"><span data-stu-id="640c3-618">This enables debuggers to do some code flow analysis when a  <xref:System.NullReferenceException> occurs and to work backwards to determine the managed variable that corresponds to the native location that was `null`.</span></span>

- <span data-ttu-id="640c3-619">Метод [ICorDebugType2::GetTypeID](../unmanaged-api/debugging/icordebugtype2-gettypeid-method.md) обеспечивает сопоставление ICorDebugType с [COR_TYPEID](../unmanaged-api/debugging/cor-typeid-structure.md), что позволяет отладчику получить [COR_TYPEID](../unmanaged-api/debugging/cor-typeid-structure.md) без экземпляра ICorDebugType.</span><span class="sxs-lookup"><span data-stu-id="640c3-619">The [ICorDebugType2::GetTypeID](../unmanaged-api/debugging/icordebugtype2-gettypeid-method.md) method provides a mapping for ICorDebugType to [COR_TYPEID](../unmanaged-api/debugging/cor-typeid-structure.md), which allows the debugger to obtain a [COR_TYPEID](../unmanaged-api/debugging/cor-typeid-structure.md) without an instance of the ICorDebugType.</span></span> <span data-ttu-id="640c3-620">Существующие API в [COR_TYPEID](../unmanaged-api/debugging/cor-typeid-structure.md) можно использовать для определения макета класса типа.</span><span class="sxs-lookup"><span data-stu-id="640c3-620">Existing APIs on [COR_TYPEID](../unmanaged-api/debugging/cor-typeid-structure.md) can then be used to determine the class layout of the type.</span></span>

<a name="v461" />

## <a name="whats-new-in-the-net-framework-461"></a><span data-ttu-id="640c3-621">Новые возможности .NET Framework 4.6.1</span><span class="sxs-lookup"><span data-stu-id="640c3-621">What's new in the .NET Framework 4.6.1</span></span>

<span data-ttu-id="640c3-622">В [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] появились новые возможности в следующих областях.</span><span class="sxs-lookup"><span data-stu-id="640c3-622">The [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] includes new features in the following areas:</span></span>

- [<span data-ttu-id="640c3-623">Шифрование</span><span class="sxs-lookup"><span data-stu-id="640c3-623">Cryptography</span></span>](#Crypto)

- [<span data-ttu-id="640c3-624">ADO.NET</span><span class="sxs-lookup"><span data-stu-id="640c3-624">ADO.NET</span></span>](#ADO.NET461)

- [<span data-ttu-id="640c3-625">Windows Presentation Foundation (WPF)</span><span class="sxs-lookup"><span data-stu-id="640c3-625">Windows Presentation Foundation (WPF)</span></span>](#WPF461)

- [<span data-ttu-id="640c3-626">Windows Workflow Foundation</span><span class="sxs-lookup"><span data-stu-id="640c3-626">Windows Workflow Foundation</span></span>](#WWF461)

- [<span data-ttu-id="640c3-627">Профилирование</span><span class="sxs-lookup"><span data-stu-id="640c3-627">Profiling</span></span>](#Profile461)

- [<span data-ttu-id="640c3-628">NGen</span><span class="sxs-lookup"><span data-stu-id="640c3-628">NGen</span></span>](#NGEN461)

<span data-ttu-id="640c3-629">Дополнительные сведения о [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] см. в следующих разделах.</span><span class="sxs-lookup"><span data-stu-id="640c3-629">For more information on the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)], see the following topics:</span></span>

- <span data-ttu-id="640c3-630">[Список изменений в .NET Framework 4.6.1](https://go.microsoft.com/fwlink/?LinkId=622964)</span><span class="sxs-lookup"><span data-stu-id="640c3-630">The [.NET Framework 4.6.1 list of changes](https://go.microsoft.com/fwlink/?LinkId=622964)</span></span>

- [<span data-ttu-id="640c3-631">Совместимость приложений в 4.6.1</span><span class="sxs-lookup"><span data-stu-id="640c3-631">Application Compatibility in 4.6.1</span></span>](../migration-guide/application-compatibility-in-the-net-framework-4-6-1.md)

- <span data-ttu-id="640c3-632">[Различия интерфейсов API .NET Framework](https://go.microsoft.com/fwlink/?LinkId=622989) (на GitHub)</span><span class="sxs-lookup"><span data-stu-id="640c3-632">[The .NET Framework API diff](https://go.microsoft.com/fwlink/?LinkId=622989) (on GitHub)</span></span>

<a name="Crypto" />

### <a name="cryptography-support-for-x509-certificates-containing-ecdsa"></a><span data-ttu-id="640c3-633">Криптография: Поддержка сертификатов X509, содержащих ECDSA</span><span class="sxs-lookup"><span data-stu-id="640c3-633">Cryptography: Support for X509 certificates containing ECDSA</span></span>

<span data-ttu-id="640c3-634">В .NET Framework 4.6 добавлена поддержка RSACng сертификатов X509.</span><span class="sxs-lookup"><span data-stu-id="640c3-634">The .NET Framework 4.6 added RSACng support for X509 certificates.</span></span> <span data-ttu-id="640c3-635">В [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] добавляется поддержка ECDSA (алгоритма цифровых подписей на основе эллиптических кривых) сертификатов X509.</span><span class="sxs-lookup"><span data-stu-id="640c3-635">The [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] adds support for ECDSA (Elliptic Curve Digital Signature Algorithm) X509 certificates.</span></span>

<span data-ttu-id="640c3-636">ECDSA обеспечивает более высокую производительность и является более безопасным алгоритмом шифрования, чем RSA, предоставляя лучший выбор, когда производительность и масштабируемость TLS представляет собой проблему.</span><span class="sxs-lookup"><span data-stu-id="640c3-636">ECDSA offers better performance and is a more secure cryptography algorithm than RSA, providing an excellent choice where Transport Layer Security (TLS) performance and scalability is a concern.</span></span> <span data-ttu-id="640c3-637">Реализация .NET Framework создает оболочку для вызовов существующих функциональных возможностей Windows.</span><span class="sxs-lookup"><span data-stu-id="640c3-637">The .NET Framework implementation wraps calls into existing Windows functionality.</span></span>

<span data-ttu-id="640c3-638">В следующем примере кода показано, как легко можно создать подпись для байтового потока, используя новую поддержку сертификатов X 509 ECDSA, включенную в [!INCLUDE[net_v461](../../../includes/net-v461-md.md)].</span><span class="sxs-lookup"><span data-stu-id="640c3-638">The following example code shows how easy it is to generate a signature for a byte stream by using the new  support for ECDSA  X509 certificates included in the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)].</span></span>

[!code-csharp[whatsnew.461.crypto#1](~/samples/snippets/csharp/VS_Snippets_CLR/whatsnew.461.crypto/cs/Code46.cs#1)]
[!code-vb[whatsnew.461.crypto#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/whatsnew.461.crypto/vb/Code461.vb#1)]

<span data-ttu-id="640c3-639">Это обеспечивает заметное отличие от кода, необходимого для создания подписи в .NET Framework 4.6.</span><span class="sxs-lookup"><span data-stu-id="640c3-639">This offers a marked contrast to the code needed to generate a signature in the .NET Framework 4.6.</span></span>

[!code-csharp[whatsnew.461.crypto#2](~/samples/snippets/csharp/VS_Snippets_CLR/whatsnew.461.crypto/cs/Code46.cs#2)]
[!code-vb[whatsnew.461.crypto#2](~/samples/snippets/visualbasic/VS_Snippets_CLR/whatsnew.461.crypto/vb/Code46.vb#2)]

<a name="ADO.NET461" />

### <a name="adonet"></a><span data-ttu-id="640c3-640">ADO.NET</span><span class="sxs-lookup"><span data-stu-id="640c3-640">ADO.NET</span></span>

<span data-ttu-id="640c3-641">В ADO.NET добавлены следующие возможности.</span><span class="sxs-lookup"><span data-stu-id="640c3-641">The following have been added to ADO.NET:</span></span>

**<span data-ttu-id="640c3-642">Поддержка Always Encrypted (постоянного шифрования) для аппаратно защищенных ключей.</span><span class="sxs-lookup"><span data-stu-id="640c3-642">Always Encrypted support for hardware protected keys</span></span>**

<span data-ttu-id="640c3-643">Теперь ADO.NET поддерживает хранение главных ключей столбца Always Encrypted непосредственно в аппаратных модулях безопасности (HSM).</span><span class="sxs-lookup"><span data-stu-id="640c3-643">ADO.NET now supports storing Always Encrypted column master keys natively in Hardware Security Modules (HSMs).</span></span> <span data-ttu-id="640c3-644">Благодаря этому клиенты могут использовать асимметричные ключи, хранящиеся в аппаратных модулях безопасности, без необходимости написания специальных поставщиков хранилища главных ключей и их регистрации в приложениях.</span><span class="sxs-lookup"><span data-stu-id="640c3-644">With this support, customers can leverage asymmetric keys stored in HSMs without having to write custom column master key store providers and registering them in applications.</span></span>

<span data-ttu-id="640c3-645">Для доступа к постоянно зашифрованным данным, защищенным с помощью главных ключей столбца, хранящихся в аппаратном модуле безопасности, клиенты должны установить на серверах приложений или клиентских компьютерах предоставленный производителем аппаратного модуля безопасности поставщик служб шифрования или поставщики хранилища ключей CNG.</span><span class="sxs-lookup"><span data-stu-id="640c3-645">Customers need to install the HSM vendor-provided CSP provider or CNG key store providers on the app servers or client computers in order to access Always Encrypted data protected with column master keys stored in a HSM.</span></span>

**<span data-ttu-id="640c3-646">Улучшенное поведение при подключении <xref:System.Data.SqlClient.SqlConnectionStringBuilder.MultiSubnetFailover%2A> для Always On</span><span class="sxs-lookup"><span data-stu-id="640c3-646">Improved <xref:System.Data.SqlClient.SqlConnectionStringBuilder.MultiSubnetFailover%2A> connection behavior for AlwaysOn</span></span>**

<span data-ttu-id="640c3-647">SqlClient теперь автоматически обеспечивает более быстрое подключение к группе доступности (AG) AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="640c3-647">SqlClient now automatically provides faster connections to an AlwaysOn Availability Group (AG).</span></span> <span data-ttu-id="640c3-648">Он прозрачно определяет, подключается ли ваше приложение к группе доступности AlwaysOn в другой подсети, и быстро обнаруживает текущий активный сервер и обеспечивает подключение к этому серверу.</span><span class="sxs-lookup"><span data-stu-id="640c3-648">It transparently detects whether your application is connecting to an AlwaysOn availability group (AG) on a different subnet and quickly discovers the current active server and provides a connection to the server.</span></span> <span data-ttu-id="640c3-649">В предыдущих версиях строка подключения приложения должна была включать `"MultisubnetFailover=true"` для указания, что это приложение подключается к группе доступности AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="640c3-649">Prior to this release, an application had to set the connection string to include `"MultisubnetFailover=true"` to indicate that it was connecting to an AlwaysOn Availability Group.</span></span> <span data-ttu-id="640c3-650">При подключении приложения к группе доступности AlwaysOn без установки значения `true` для этого ключевого слова подключения время ожидания может быть превышено.</span><span class="sxs-lookup"><span data-stu-id="640c3-650">Without setting the connection keyword to `true`, an application might experience a timeout while connecting to an AlwaysOn Availability Group.</span></span> <span data-ttu-id="640c3-651">В этом выпуске больше *не* требуется, чтобы приложение устанавливало <xref:System.Data.SqlClient.SqlConnectionStringBuilder.MultiSubnetFailover%2A> в значение `true`.</span><span class="sxs-lookup"><span data-stu-id="640c3-651">With this release, an application does *not* need to set <xref:System.Data.SqlClient.SqlConnectionStringBuilder.MultiSubnetFailover%2A> to `true` anymore.</span></span> <span data-ttu-id="640c3-652">Дополнительные сведения о поддержке SqlClient для групп доступности Always On см. в разделе [Поддержка SqlClient для высокого уровня доступности и аварийного восстановления](../data/adonet/sql/sqlclient-support-for-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-652">For more information about SqlClient support for Always On Availability Groups, see [SqlClient Support for High Availability, Disaster Recovery](../data/adonet/sql/sqlclient-support-for-high-availability-disaster-recovery.md).</span></span>

<a name="WPF461" />

### <a name="windows-presentation-foundation-wpf"></a><span data-ttu-id="640c3-653">Windows Presentation Foundation (WPF)</span><span class="sxs-lookup"><span data-stu-id="640c3-653">Windows Presentation Foundation (WPF)</span></span>

<span data-ttu-id="640c3-654">Windows Presentation Foundation содержит ряд улучшений и изменений.</span><span class="sxs-lookup"><span data-stu-id="640c3-654">Windows Presentation Foundation includes a number of improvements and changes.</span></span>

**<span data-ttu-id="640c3-655">Повышение производительности</span><span class="sxs-lookup"><span data-stu-id="640c3-655">Improved performance</span></span>**

<span data-ttu-id="640c3-656">В [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] была исправлена задержка при срабатывании событий касания.</span><span class="sxs-lookup"><span data-stu-id="640c3-656">The delay in firing touch events has been fixed in the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)].</span></span> <span data-ttu-id="640c3-657">Кроме того, ввод в элементе управления <xref:System.Windows.Controls.RichTextBox> больше не препятствует обрабатывающему потоку при быстром вводе данных.</span><span class="sxs-lookup"><span data-stu-id="640c3-657">In addition, typing in a <xref:System.Windows.Controls.RichTextBox> control no longer ties up the render thread during fast input.</span></span>

**<span data-ttu-id="640c3-658">Улучшения проверки орфографии</span><span class="sxs-lookup"><span data-stu-id="640c3-658">Spell checking improvements</span></span>**

<span data-ttu-id="640c3-659">В Windows 8.1 и последующих версиях проверка орфографии в WPF была обновлена, чтобы для проверки орфографии в дополнительных языках использовалась поддержка операционной системы.</span><span class="sxs-lookup"><span data-stu-id="640c3-659">The spell checker in WPF has been updated on Windows 8.1 and later versions to leverage operating system support for spell-checking additional languages.</span></span>  <span data-ttu-id="640c3-660">В версиях Windows, предшествующих Windows 8.1, изменения этой функциональности отсутствуют.</span><span class="sxs-lookup"><span data-stu-id="640c3-660">There is no change in functionality on Windows versions prior to Windows 8.1.</span></span>

<span data-ttu-id="640c3-661">Как и в предыдущих версиях .NET Framework, язык для блока <xref:System.Windows.Controls.RichTextBox> элемента управления <xref:System.Windows.Controls.TextBox> определяется путем поиска информации в следующем порядке:</span><span class="sxs-lookup"><span data-stu-id="640c3-661">As in previous versions of the .NET Framework, the language for a <xref:System.Windows.Controls.TextBox> control ora <xref:System.Windows.Controls.RichTextBox> block is detected by looking for information in the following order:</span></span>

- `xml:lang`<span data-ttu-id="640c3-662">(при наличии);</span><span class="sxs-lookup"><span data-stu-id="640c3-662">, if it is present.</span></span>

- <span data-ttu-id="640c3-663">текущий язык ввода;</span><span class="sxs-lookup"><span data-stu-id="640c3-663">Current input language.</span></span>

- <span data-ttu-id="640c3-664">язык и региональные параметры текущего потока.</span><span class="sxs-lookup"><span data-stu-id="640c3-664">Current thread culture.</span></span>

<span data-ttu-id="640c3-665">Дополнительные сведения о языковой поддержке в WPF см. в [публикации в блоге WPF, посвященной компонентам .NET Framework 4.6.1](https://go.microsoft.com/fwlink/?LinkID=691819).</span><span class="sxs-lookup"><span data-stu-id="640c3-665">For additional information on language support in WPF, see the [WPF blog post on .NET Framework 4.6.1 features](https://go.microsoft.com/fwlink/?LinkID=691819).</span></span>

**<span data-ttu-id="640c3-666">Дополнительная поддержка индивидуально настраиваемых словарей</span><span class="sxs-lookup"><span data-stu-id="640c3-666">Additional support for per-user custom dictionaries</span></span>**

<span data-ttu-id="640c3-667">В [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] WPF распознает настраиваемые словари, зарегистрированные глобально.</span><span class="sxs-lookup"><span data-stu-id="640c3-667">In [!INCLUDE[net_v461](../../../includes/net-v461-md.md)], WPF recognizes custom dictionaries that are registered globally.</span></span> <span data-ttu-id="640c3-668">Эта возможность доступна наряду с возможностью их регистрации на уровне элемента управления.</span><span class="sxs-lookup"><span data-stu-id="640c3-668">This capability is available in addition to the ability to register them per-control.</span></span>

<span data-ttu-id="640c3-669">В предыдущих версиях WPF настраиваемые словари не распознавали исключенные слова и списки автозамены.</span><span class="sxs-lookup"><span data-stu-id="640c3-669">In previous versions of WPF, custom dictionaries did not recognize Excluded Words and AutoCorrect lists.</span></span> <span data-ttu-id="640c3-670">Эти возможности поддерживаются в Windows 8.1 и Windows 10 благодаря использованию файлов, которые могут быть помещены в каталог `%AppData%\Microsoft\Spelling\<language tag>`.</span><span class="sxs-lookup"><span data-stu-id="640c3-670">They are supported on Windows 8.1 and Windows 10 through the use of files that can be placed under the `%AppData%\Microsoft\Spelling\<language tag>` directory.</span></span>  <span data-ttu-id="640c3-671">К этим файлам применяются следующие правила.</span><span class="sxs-lookup"><span data-stu-id="640c3-671">The following rules apply to these files:</span></span>

- <span data-ttu-id="640c3-672">Файлы должны иметь расширения DIC (для добавленных слов), EXC (для исключенных слов) или ACL (для автозамены).</span><span class="sxs-lookup"><span data-stu-id="640c3-672">The files should have extensions of .dic (for added words), .exc (for excluded words), or .acl (for AutoCorrect).</span></span>

- <span data-ttu-id="640c3-673">Файлы должны представлять собой открытый текст в кодировке UTF-16 LE, который начинается с метки порядка байтов (BOM).</span><span class="sxs-lookup"><span data-stu-id="640c3-673">The files should be UTF-16 LE plaintext that starts with the Byte Order Mark (BOM).</span></span>

- <span data-ttu-id="640c3-674">Каждая строка должна состоять из слова (в списках добавленных или исключенных слов) или пары автозамены, в которой слова разделены вертикальной чертой ("&#124;") (в списке автозамены).</span><span class="sxs-lookup"><span data-stu-id="640c3-674">Each line should consist of a word (in the added and excluded word lists), or an autocorrect pair with the words separated by a vertical bar ("&#124;") (in the AutoCorrect word list).</span></span>

- <span data-ttu-id="640c3-675">Эти файлы считаются доступными только для чтения и не изменяются системой.</span><span class="sxs-lookup"><span data-stu-id="640c3-675">These files are considered read-only and are not modified by the system.</span></span>

> [!NOTE]
> <span data-ttu-id="640c3-676">Эти новые форматы файлов не поддерживаются непосредственно API-интерфейсами проверки орфографии WPF, и настраиваемые словари, передаваемые в WPF в приложениях, должны продолжать использовать LEX-файлы.</span><span class="sxs-lookup"><span data-stu-id="640c3-676">These new file-formats are not directly supported by the WPF spell checking APIs, and the custom dictionaries supplied to WPF in applications should continue to use .lex files.</span></span>

**<span data-ttu-id="640c3-677">Примеры</span><span class="sxs-lookup"><span data-stu-id="640c3-677">Samples</span></span>**

<span data-ttu-id="640c3-678">Ряд примеров для WPF доступен в GitHub-репозитории [Microsoft/WPF-Samples](https://github.com/Microsoft/WPF-Samples).</span><span class="sxs-lookup"><span data-stu-id="640c3-678">There are a number of WPF samples on the [Microsoft/WPF-Samples](https://github.com/Microsoft/WPF-Samples) GitHub repository.</span></span> <span data-ttu-id="640c3-679">Помогите нам улучшить наши примеры, отправив нам запрос на включение внесенных изменений или открыв [вопрос GitHub](https://github.com/Microsoft/WPF-Samples/issues).</span><span class="sxs-lookup"><span data-stu-id="640c3-679">Help us improve our samples by sending us a pull-request or opening a [GitHub issue](https://github.com/Microsoft/WPF-Samples/issues).</span></span>

**<span data-ttu-id="640c3-680">Расширения DirectX</span><span class="sxs-lookup"><span data-stu-id="640c3-680">DirectX extensions</span></span>**

<span data-ttu-id="640c3-681">WPF включает [пакет NuGet](https://go.microsoft.com/fwlink/?LinkID=691342), предоставляющий новые реализации <xref:System.Windows.Interop.D3DImage>, которые упрощают взаимодействие с содержимым DX10 и Dx11.</span><span class="sxs-lookup"><span data-stu-id="640c3-681">WPF includes a [NuGet package](https://go.microsoft.com/fwlink/?LinkID=691342) that provides new implementations of <xref:System.Windows.Interop.D3DImage> that make it easy for you to interoperate with DX10 and Dx11 content.</span></span> <span data-ttu-id="640c3-682">Код для этого пакета открыт и доступен [на GitHub](https://github.com/Microsoft/WPFDXInterop).</span><span class="sxs-lookup"><span data-stu-id="640c3-682">The code for this package has been open sourced and is available [on GitHub](https://github.com/Microsoft/WPFDXInterop).</span></span>

<a name="WWF461" />

### <a name="windows-workflow-foundation-transactions"></a><span data-ttu-id="640c3-683">Windows Workflow Foundation: Транзакции</span><span class="sxs-lookup"><span data-stu-id="640c3-683">Windows Workflow Foundation: Transactions</span></span>

<span data-ttu-id="640c3-684">Метод <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A?displayProperty=nameWithType> теперь может использовать для повышения уровня транзакции диспетчер распределенных транзакций, отличный от MSDTC.</span><span class="sxs-lookup"><span data-stu-id="640c3-684">The <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A?displayProperty=nameWithType> method can now use a distributed transaction manager other than MSDTC to promote the transaction.</span></span> <span data-ttu-id="640c3-685">Это делается путем указания идентификатора GUID диспетчера транзакций в новую перегрузку <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%28System.Transactions.IPromotableSinglePhaseNotification%2CSystem.Guid%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-685">You do this by specifying a GUID transaction promoter identifier to the  new <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%28System.Transactions.IPromotableSinglePhaseNotification%2CSystem.Guid%29?displayProperty=nameWithType> overload .</span></span> <span data-ttu-id="640c3-686">В случае успешного выполнения операции на возможности транзакции накладываются определенные ограничения.</span><span class="sxs-lookup"><span data-stu-id="640c3-686">If this operation is successful, there are limitations placed on the capabilities of the transaction.</span></span> <span data-ttu-id="640c3-687">После прикрепления отличного от MSDTC диспетчера транзакций следующие методы вызывают исключение <xref:System.Transactions.TransactionPromotionException>, так как эти методы требуют повышения до MSDTC.</span><span class="sxs-lookup"><span data-stu-id="640c3-687">Once a non-MSDTC transaction promoter is enlisted, the following methods throw a <xref:System.Transactions.TransactionPromotionException> because these methods require promotion to MSDTC:</span></span>

- <xref:System.Transactions.Transaction.EnlistDurable%2A?displayProperty=nameWithType>

- <xref:System.Transactions.TransactionInterop.GetDtcTransaction%2A?displayProperty=nameWithType>

- <xref:System.Transactions.TransactionInterop.GetExportCookie%2A?displayProperty=nameWithType>

- <xref:System.Transactions.TransactionInterop.GetTransmitterPropagationToken%2A?displayProperty=nameWithType>

<span data-ttu-id="640c3-688">После прикрепления отличного от MSDTC диспетчера транзакций он должен использоваться для будущих долговременных прикреплений с использованием протоколов, которые он задает.</span><span class="sxs-lookup"><span data-stu-id="640c3-688">Once a non-MSDTC transaction promoter is enlisted, it must be used for future durable enlistments by using protocols that it defines.</span></span> <span data-ttu-id="640c3-689">Идентификатор <xref:System.Guid> диспетчера транзакций можно получить с помощью свойства <xref:System.Transactions.Transaction.PromoterType%2A>.</span><span class="sxs-lookup"><span data-stu-id="640c3-689">The <xref:System.Guid> of the transaction promoter can be obtained by using the <xref:System.Transactions.Transaction.PromoterType%2A> property.</span></span> <span data-ttu-id="640c3-690">Когда выполняется повышение уровня транзакции, диспетчер транзакций предоставляет массив <xref:System.Byte>, представляющий токен повышенного уровня.</span><span class="sxs-lookup"><span data-stu-id="640c3-690">When the transaction promotes, the transaction promoter provides a <xref:System.Byte> array that represents the promoted token.</span></span> <span data-ttu-id="640c3-691">Приложение может получить этот токен повышенного уровня для транзакции, уровень которой повышается отличным от MSDTC диспетчером транзакций, с помощью метода <xref:System.Transactions.Transaction.GetPromotedToken%2A>.</span><span class="sxs-lookup"><span data-stu-id="640c3-691">An application can obtain the promoted token for a non-MSDTC promoted transaction with the <xref:System.Transactions.Transaction.GetPromotedToken%2A> method.</span></span>

<span data-ttu-id="640c3-692">Пользователи новой перегрузки <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%28System.Transactions.IPromotableSinglePhaseNotification%2CSystem.Guid%29?displayProperty=nameWithType> должны придерживаться определенной последовательности вызовов для успешного завершения операции повышения уровня.</span><span class="sxs-lookup"><span data-stu-id="640c3-692">Users of the new <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%28System.Transactions.IPromotableSinglePhaseNotification%2CSystem.Guid%29?displayProperty=nameWithType> overload must follow a specific call sequence in order for the promotion operation to complete successfully.</span></span> <span data-ttu-id="640c3-693">Эти правила описаны в документации по данному методу.</span><span class="sxs-lookup"><span data-stu-id="640c3-693">These rules are documented in the method's documentation.</span></span>

<a name="Profile461" />

### <a name="profiling"></a><span data-ttu-id="640c3-694">Профилирование</span><span class="sxs-lookup"><span data-stu-id="640c3-694">Profiling</span></span>

<span data-ttu-id="640c3-695">В API-интерфейс неуправляемого профилирования внесены следующие изменения.</span><span class="sxs-lookup"><span data-stu-id="640c3-695">The unmanaged profiling API has been enhanced as follows:</span></span>

- <span data-ttu-id="640c3-696">Улучшена поддержка доступа к PDB-файлам в интерфейсе [ICorProfilerInfo7](../unmanaged-api/profiling/icorprofilerinfo7-interface.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-696">Better support for accessing PDBs in the [ICorProfilerInfo7](../unmanaged-api/profiling/icorprofilerinfo7-interface.md) interface.</span></span>

   <span data-ttu-id="640c3-697">В ASP.NET Core сборки все чаще компилируются в памяти с использованием Roslyn.</span><span class="sxs-lookup"><span data-stu-id="640c3-697">In ASP.NET Core, it is becoming much more common for assemblies to be compiled in-memory by Roslyn.</span></span> <span data-ttu-id="640c3-698">Для разработчиков средств профилирования это означает, что PDB-файлы, которые ранее были сериализованы на диске, могут больше не присутствовать.</span><span class="sxs-lookup"><span data-stu-id="640c3-698">For developers making profiling tools, this means that PDBs that historically were serialized on disk may no longer be present.</span></span> <span data-ttu-id="640c3-699">Средства профилирования часто используют PDB-файлы для сопоставления кода с исходными строками для таких задач, как анализ покрытия кода или построковый анализ производительности.</span><span class="sxs-lookup"><span data-stu-id="640c3-699">Profiler tools often use PDBs to map code back to source lines for tasks such as code coverage or line-by-line performance analysis.</span></span> <span data-ttu-id="640c3-700">Интерфейс [ICorProfilerInfo7](../unmanaged-api/profiling/icorprofilerinfo7-interface.md) теперь включает два новых метода, [ICorProfilerInfo7::GetInMemorySymbolsLength](../unmanaged-api/profiling/icorprofilerinfo7-getinmemorysymbolslength-method.md) и [ICorProfilerInfo7::ReadInMemorySymbols](../unmanaged-api/profiling/icorprofilerinfo7-readinmemorysymbols.md), для предоставления этим средствам профилирования доступа к данным PDB-файлов в памяти. С помощью новых API профилировщик может получить содержимое PDB-файлов в памяти в виде массива байтов, а затем обработать его или сериализовать на диск.</span><span class="sxs-lookup"><span data-stu-id="640c3-700">The [ICorProfilerInfo7](../unmanaged-api/profiling/icorprofilerinfo7-interface.md) interface now includes two new methods, [ICorProfilerInfo7::GetInMemorySymbolsLength](../unmanaged-api/profiling/icorprofilerinfo7-getinmemorysymbolslength-method.md) and [ICorProfilerInfo7::ReadInMemorySymbols](../unmanaged-api/profiling/icorprofilerinfo7-readinmemorysymbols.md), to provide these profiler tools with access to the in-memory PDB data, By using the new APIs, a profiler can obtain the contents of an in-memory PDB as a byte array and then process it or serialize it to disk.</span></span>

- <span data-ttu-id="640c3-701">Улучшено инструментирование с использованием интерфейса ICorProfiler.</span><span class="sxs-lookup"><span data-stu-id="640c3-701">Better instrumentation with the ICorProfiler interface.</span></span>

   <span data-ttu-id="640c3-702">Профилировщики, использующие функциональность ReJit API `ICorProfiler` для динамического инструментирования, теперь могут изменять некоторые метаданные.</span><span class="sxs-lookup"><span data-stu-id="640c3-702">Profilers that are using the `ICorProfiler` APIs ReJit functionality for dynamic instrumentation can now modify some metadata.</span></span> <span data-ttu-id="640c3-703">Ранее такие средства могли инструментировать IL в любое время, но метаданные могли изменяться только во время загрузки модуля.</span><span class="sxs-lookup"><span data-stu-id="640c3-703">Previously such tools could instrument IL at any time, but metadata could only be modified at module load time.</span></span> <span data-ttu-id="640c3-704">Поскольку IL ссылается на метаданные, это ограничивает типы инструментирования, которое может выполняться.</span><span class="sxs-lookup"><span data-stu-id="640c3-704">Because IL refers to metadata, this limited the kinds of instrumentation that could be done.</span></span> <span data-ttu-id="640c3-705">Мы отменили некоторые из этих ограничений, добавив метод [ICorProfilerInfo7::ApplyMetaData](../unmanaged-api/profiling/icorprofilerinfo7-applymetadata-method.md) для поддержки подмножества правок метаданных после загрузки модуля, в частности путем добавления новых записей `AssemblyRef`, `TypeRef`, `TypeSpec`, `MemberRef`, `MemberSpec` и `UserString`.</span><span class="sxs-lookup"><span data-stu-id="640c3-705">We have lifted some of those limits by adding the [ICorProfilerInfo7::ApplyMetaData](../unmanaged-api/profiling/icorprofilerinfo7-applymetadata-method.md) method to support a subset of metadata edits after the module loads, in particular by adding new `AssemblyRef`, `TypeRef`, `TypeSpec`, `MemberRef`, `MemberSpec`, and `UserString` records.</span></span> <span data-ttu-id="640c3-706">Это изменение существенно расширяет спектр возможного динамического инструментирования.</span><span class="sxs-lookup"><span data-stu-id="640c3-706">This change makes a much broader range of on-the-fly instrumentation possible.</span></span>

<a name="NGEN461" />

### <a name="native-image-generator-ngen-pdbs"></a><span data-ttu-id="640c3-707">PDB-файлы генератора образов в машинном коде (NGEN)</span><span class="sxs-lookup"><span data-stu-id="640c3-707">Native Image Generator (NGEN) PDBs</span></span>

<span data-ttu-id="640c3-708">Трассировка событий между компьютерами позволяет клиентам профилировать программу на компьютере А и просматривать данные профилирования с сопоставлением исходных строк на компьютере Б. Используя предыдущие версии .NET Framework, пользователь может копировать все модули и образы в машинном коде из профилируемого компьютера на компьютер анализа, содержащий PDB-файл IL, для создания сопоставления "источник-машинный код".</span><span class="sxs-lookup"><span data-stu-id="640c3-708">Cross-machine event tracing allows customers to profile a program on Machine A and look at the profiling data with source line mapping on Machine B. Using previous versions of the .NET Framework, the user would copy all the modules and native images from the profiled machine to the analysis machine that contains the IL PDB to create the source-to-native mapping.</span></span> <span data-ttu-id="640c3-709">Хотя этот процесс может хорошо работать в том случае, если файлы относительно невелики, например для телефонных приложений, на настольных системах эти файлы могут быть очень большими, и на их копирование потребуется значительное время.</span><span class="sxs-lookup"><span data-stu-id="640c3-709">While this process may work well when the files are relatively small, such as for phone applications, the files can be very large on desktop systems and require significant time to copy.</span></span>

<span data-ttu-id="640c3-710">С помощью PDB-файлов Ngen NGen может создать PDB-файл, содержащий сопоставления "IL-машинный код" без зависимости от PDB-файла IL.</span><span class="sxs-lookup"><span data-stu-id="640c3-710">With Ngen PDBs, NGen can create a PDB that contains the IL-to-native mapping without a dependency on the IL PDB.</span></span> <span data-ttu-id="640c3-711">В нашем сценарии трассировки событий между компьютерами все, что требуется, — это скопировать PDB-файл образа в машинном коде, созданный на компьютере А, на компьютер Б, а затем использовать [API доступа к интерфейсу отладки](/visualstudio/debugger/debug-interface-access/debug-interface-access-sdk-reference) для чтения сопоставления "машинный код-IL" PDB-файла IL и сопоставления "IL-машинный код" PDB-файла образа в машинном коде.</span><span class="sxs-lookup"><span data-stu-id="640c3-711">In our cross-machine event tracing scenario, all that is needed is to copy the native image PDB that is generated by Machine A to Machine B and to use [Debug Interface Access APIs](/visualstudio/debugger/debug-interface-access/debug-interface-access-sdk-reference) to read the IL PDB's source-to-IL mapping and the native image PDB's IL-to-native mapping.</span></span> <span data-ttu-id="640c3-712">Объединение обоих сопоставлений обеспечивает сопоставление "источник-машинный код".</span><span class="sxs-lookup"><span data-stu-id="640c3-712">Combining both mappings provides a source-to-native mapping.</span></span> <span data-ttu-id="640c3-713">Поскольку PDB-файл образа в машинном коде PDB намного меньше, чем все модули и образы в машинном коде, процесс копирования с компьютера А на компьютер Б выполняется гораздо быстрее.</span><span class="sxs-lookup"><span data-stu-id="640c3-713">Since the native image PDB is much smaller than all the modules and native images, the process of copying from Machine A to Machine B is much faster.</span></span>

<a name="v46" />

## <a name="whats-new-in-net-2015"></a><span data-ttu-id="640c3-714">Новые возможности .NET 2015</span><span class="sxs-lookup"><span data-stu-id="640c3-714">What's new in .NET 2015</span></span>

<span data-ttu-id="640c3-715">В .NET 2015 представлены [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] и .NET Core.</span><span class="sxs-lookup"><span data-stu-id="640c3-715">.NET 2015 introduces the [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] and .NET Core.</span></span> <span data-ttu-id="640c3-716">Некоторые функции применяются к обеим версиям, а другие — только к [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] или только к [!INCLUDE[net_core](../../../includes/net-core-md.md)].</span><span class="sxs-lookup"><span data-stu-id="640c3-716">Some new features apply to both, and other features are specific to [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] or [!INCLUDE[net_core](../../../includes/net-core-md.md)].</span></span>

- **<span data-ttu-id="640c3-717">ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="640c3-717">ASP.NET Core</span></span>**

     <span data-ttu-id="640c3-718">.NET 2015 включает ASP.NET Core — экономичную реализацию .NET для создания современных облачных приложений.</span><span class="sxs-lookup"><span data-stu-id="640c3-718">.NET 2015 includes ASP.NET Core, which is a lean .NET implementation for building modern cloud-based apps.</span></span> <span data-ttu-id="640c3-719">Платформа ASP.NET Core является модульной, поэтому вы можете включить только те функции, которые нужны в вашем приложении.</span><span class="sxs-lookup"><span data-stu-id="640c3-719">ASP.NET Core is modular so you can include only those features that are needed in your application.</span></span> <span data-ttu-id="640c3-720">Она может быть размещена в IIS или резидентно в пользовательском процессе, и вы можете запустить приложения с разными версиями .NET Framework на одном сервере.</span><span class="sxs-lookup"><span data-stu-id="640c3-720">It can be hosted on IIS or self-hosted in a custom process, and you can run apps with different versions of the .NET Framework on the same server.</span></span> <span data-ttu-id="640c3-721">В нее входит новая система конфигурации среды, предназначенная для развертывания облака.</span><span class="sxs-lookup"><span data-stu-id="640c3-721">It includes a new environment configuration system that is designed for cloud deployment.</span></span>

     <span data-ttu-id="640c3-722">MVC, веб-API и веб-страницы объединены в одну платформу, которая называется MVC 6.</span><span class="sxs-lookup"><span data-stu-id="640c3-722">MVC, Web API, and Web Pages are unified into a single framework called MVC 6.</span></span> <span data-ttu-id="640c3-723">Сборка приложений ASP.NET Core выполняется с помощью инструментов Visual Studio 2015 или более поздних версий.</span><span class="sxs-lookup"><span data-stu-id="640c3-723">You build ASP.NET Core apps through tools in Visual Studio 2015 or later.</span></span> <span data-ttu-id="640c3-724">Уже существующие приложения будут работать на новой платформе .NET Framework, однако для сборки приложения, использующего MVC 6 или SignalR 3, необходима система проектов Visual Studio 2015 и последующих выпусков.</span><span class="sxs-lookup"><span data-stu-id="640c3-724">Your existing applications will work on the new .NET Framework; however to build an app that uses MVC 6 or SignalR 3, you must use the project system in Visual Studio 2015 or later.</span></span>

     <span data-ttu-id="640c3-725">См. дополнительные сведения об [ASP.NET Core](/aspnet/core/).</span><span class="sxs-lookup"><span data-stu-id="640c3-725">For information, see [ASP.NET Core](/aspnet/core/).</span></span>

- **<span data-ttu-id="640c3-726">Обновления ASP.NET</span><span class="sxs-lookup"><span data-stu-id="640c3-726">ASP.NET Updates</span></span>**

    - **<span data-ttu-id="640c3-727">API на основе задач для асинхронной очистки ответов</span><span class="sxs-lookup"><span data-stu-id="640c3-727">Task-based API for Asynchronous Response Flushing</span></span>**

         <span data-ttu-id="640c3-728">ASP.NET теперь предоставляет простой API на основе задач для асинхронной очистки ответов, <xref:System.Web.HttpResponse.FlushAsync%2A?displayProperty=nameWithType>, который позволяет асинхронно сбрасывать ответы, используя поддержку операторов `async/await` языка программирования.</span><span class="sxs-lookup"><span data-stu-id="640c3-728">ASP.NET now provides a simple task-based API for asynchronous response flushing, <xref:System.Web.HttpResponse.FlushAsync%2A?displayProperty=nameWithType>, that allows responses to be flushed asynchronously by using your language's `async/await` support.</span></span>

    - **<span data-ttu-id="640c3-729">Привязка модели поддерживает методы, возвращающие задачи</span><span class="sxs-lookup"><span data-stu-id="640c3-729">Model binding supports task-returning methods</span></span>**

         <span data-ttu-id="640c3-730">В [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] в ASP.NET добавлена функция привязки модели, которая обеспечивает расширяемый, ориентированный на код подход к операциям с данными CRUD на страницах веб-форм и пользовательских элементов управления.</span><span class="sxs-lookup"><span data-stu-id="640c3-730">In the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], ASP.NET added the Model Binding feature that enabled an extensible, code-focused approach to CRUD-based data operations in Web Forms pages and user controls.</span></span> <span data-ttu-id="640c3-731">Система привязки модели теперь поддерживает возвращающие <xref:System.Threading.Tasks.Task> методы привязки модели.</span><span class="sxs-lookup"><span data-stu-id="640c3-731">The Model Binding system now supports <xref:System.Threading.Tasks.Task>-returning model binding methods.</span></span> <span data-ttu-id="640c3-732">Эта функция позволяет разработчикам веб-форм сочетать преимущества масштабируемости асинхронного программирования с простотой системы привязки данных при использовании более новых версий моделей ORM, включая Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="640c3-732">This feature allows Web Forms developers to get the scalability benefits of async with the ease of the data-binding system when using newer versions of ORMs, including the Entity Framework.</span></span>

         <span data-ttu-id="640c3-733">Асинхронная привязка модели управляется параметром конфигурации `aspnet:EnableAsyncModelBinding`.</span><span class="sxs-lookup"><span data-stu-id="640c3-733">Async model binding is controlled by the `aspnet:EnableAsyncModelBinding` configuration setting.</span></span>

        ```xml
        <appSettings>
           <add key=" aspnet:EnableAsyncModelBinding" value="true|false" />
        </appSettings>
        ```

         <span data-ttu-id="640c3-734">Для приложений, предназначенных для [!INCLUDE[net_v46](../../../includes/net-v46-md.md)], по умолчанию установлено значение `true`.</span><span class="sxs-lookup"><span data-stu-id="640c3-734">On apps the target the [!INCLUDE[net_v46](../../../includes/net-v46-md.md)], it defaults to `true`.</span></span> <span data-ttu-id="640c3-735">Для приложений, выполняющихся в [!INCLUDE[net_v46](../../../includes/net-v46-md.md)], предназначенных для более ранних версий .NET Framework, значение по умолчанию — `false`.</span><span class="sxs-lookup"><span data-stu-id="640c3-735">On apps running on the [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] that target an earlier version of the .NET Framework, it is `false` by default.</span></span> <span data-ttu-id="640c3-736">Включить этот режим можно, задав для параметра конфигурации значение `true`.</span><span class="sxs-lookup"><span data-stu-id="640c3-736">It can be enabled by setting the configuration setting to `true`.</span></span>

    - **<span data-ttu-id="640c3-737">Поддержка HTTP/2 (Windows 10)</span><span class="sxs-lookup"><span data-stu-id="640c3-737">HTTP/2 Support (Windows 10)</span></span>**

         <span data-ttu-id="640c3-738">[HTTP/2](https://www.wikipedia.org/wiki/HTTP/2) — это новая версия протокола HTTP, которая обеспечивает более эффективное подключение (меньшее число круговых путей между клиентом и сервером) и уменьшение задержки при загрузке веб-страницы для пользователей.</span><span class="sxs-lookup"><span data-stu-id="640c3-738">[HTTP/2](https://www.wikipedia.org/wiki/HTTP/2) is a new version of the HTTP protocol that provides much better connection utilization (fewer round-trips between client and server), resulting in lower latency web page loading for users.</span></span>  <span data-ttu-id="640c3-739">HTTP/2 обеспечивает максимальное преимущество для веб-страниц (по сравнению со службами), так как оптимизирует запрос различных артефактов в ходе одной операции.</span><span class="sxs-lookup"><span data-stu-id="640c3-739">Web pages (as opposed to services) benefit the most from HTTP/2, since the protocol optimizes for multiple artifacts being requested as part of a single experience.</span></span> <span data-ttu-id="640c3-740">Поддержка HTTP/2 добавлена в ASP.NET в .NET Framework 4.6.</span><span class="sxs-lookup"><span data-stu-id="640c3-740">HTTP/2 support has been added to ASP.NET in the .NET Framework 4.6.</span></span> <span data-ttu-id="640c3-741">Так как сетевые функции существуют на нескольких уровнях, для новых компонентов в Windows, IIS и ASP.NET потребовалось включить HTTP/2.</span><span class="sxs-lookup"><span data-stu-id="640c3-741">Because networking functionality exists at multiple layers, new features were required in Windows, in IIS, and in ASP.NET to enable HTTP/2.</span></span> <span data-ttu-id="640c3-742">Для использования HTTP/2 с ASP.NET приложение должно выполняться в Windows 10.</span><span class="sxs-lookup"><span data-stu-id="640c3-742">You must be running on Windows 10 to use HTTP/2 with ASP.NET.</span></span>

         <span data-ttu-id="640c3-743">Протокол HTTP/2 также поддерживается и включен по умолчанию для приложений универсальной платформы Windows (UWP) для Windows 10, использующих API <xref:System.Net.Http.HttpClient?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-743">HTTP/2 is also supported and on by default for Windows 10 Universal Windows Platform (UWP) apps that use the <xref:System.Net.Http.HttpClient?displayProperty=nameWithType> API.</span></span>

         <span data-ttu-id="640c3-744">Чтобы обеспечить способ использования компонента [PUSH_PROMISE](https://http2.github.io/http2-spec/#PUSH_PROMISE) в приложениях ASP.NET, в класс <xref:System.Web.HttpResponse> добавлен новый метод с двумя перегрузками, <xref:System.Web.HttpResponse.PushPromise%28System.String%29> и <xref:System.Web.HttpResponse.PushPromise%28System.String%2CSystem.String%2CSystem.Collections.Specialized.NameValueCollection%29>.</span><span class="sxs-lookup"><span data-stu-id="640c3-744">In order to provide a way to use the [PUSH_PROMISE](https://http2.github.io/http2-spec/#PUSH_PROMISE) feature in ASP.NET applications, a new method with two overloads, <xref:System.Web.HttpResponse.PushPromise%28System.String%29> and <xref:System.Web.HttpResponse.PushPromise%28System.String%2CSystem.String%2CSystem.Collections.Specialized.NameValueCollection%29>, has been added to the <xref:System.Web.HttpResponse> class.</span></span>

        > [!NOTE]
        > <span data-ttu-id="640c3-745">Хотя ASP.NET Core поддерживает HTTP/2, поддержка функции PUSH PROMISE пока не добавлена.</span><span class="sxs-lookup"><span data-stu-id="640c3-745">While ASP.NET Core supports HTTP/2, support for the PUSH PROMISE feature has not yet been added.</span></span>

         <span data-ttu-id="640c3-746">Всю работу выполняют браузер и веб-сервер (IIS в Windows).</span><span class="sxs-lookup"><span data-stu-id="640c3-746">The browser and the web server (IIS on Windows) do all the work.</span></span> <span data-ttu-id="640c3-747">Нет необходимости перекладывать нагрузку на пользователей.</span><span class="sxs-lookup"><span data-stu-id="640c3-747">You don't have to do any heavy-lifting for your users.</span></span>

         <span data-ttu-id="640c3-748">Большинство [основных браузеров поддерживает HTTP/2](https://www.wikipedia.org/wiki/HTTP/2), поэтому вполне вероятно, что пользователи смогут воспользоваться преимуществами протокола HTTP/2, если его поддерживает ваш сервер.</span><span class="sxs-lookup"><span data-stu-id="640c3-748">Most of the [major browsers support HTTP/2](https://www.wikipedia.org/wiki/HTTP/2), so it's likely that your users will benefit from HTTP/2 support if your server supports it.</span></span>

    - **<span data-ttu-id="640c3-749">Поддержка протокола привязки токенов</span><span class="sxs-lookup"><span data-stu-id="640c3-749">Support for the Token Binding Protocol</span></span>**

         <span data-ttu-id="640c3-750">Корпорация Майкрософт и Google совместно работают над созданием нового подхода к проверке подлинности, называемого протоколом привязки токенов, или [Token Binding Protocol](https://github.com/TokenBinding/Internet-Drafts).</span><span class="sxs-lookup"><span data-stu-id="640c3-750">Microsoft and Google have been collaborating on a new approach to authentication, called the [Token Binding Protocol](https://github.com/TokenBinding/Internet-Drafts).</span></span> <span data-ttu-id="640c3-751">Предполагается, что токены проверки подлинности (в кэше браузера) могут быть украдены и использованы злоумышленниками для получения доступа к защищенным в иных обстоятельствах ресурсам (например, к вашему банковскому счету) без помощи пароля или других конфиденциальных сведений.</span><span class="sxs-lookup"><span data-stu-id="640c3-751">The premise is that authentication tokens (in your browser cache) can be stolen and used by criminals to access otherwise secure resources (e.g. your bank account) without requiring your password or any other privileged knowledge.</span></span> <span data-ttu-id="640c3-752">Новый протокол предназначен для устранения этой проблемы.</span><span class="sxs-lookup"><span data-stu-id="640c3-752">The new protocol aims to mitigate this problem.</span></span>

         <span data-ttu-id="640c3-753">Протокол привязки токенов будет реализован в Windows 10 в качестве компонента браузера.</span><span class="sxs-lookup"><span data-stu-id="640c3-753">The Token Binding Protocol will be implemented in Windows 10 as a browser feature.</span></span> <span data-ttu-id="640c3-754">Приложения ASP.NET будут участвовать в протоколе для подтверждения действительности токенов проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="640c3-754">ASP.NET apps will participate in the protocol, so that authentication tokens are validated to be legitimate.</span></span> <span data-ttu-id="640c3-755">Реализации клиента и сервера будут обеспечивать комплексную защиту, заданную этим протоколом.</span><span class="sxs-lookup"><span data-stu-id="640c3-755">The client and the server implementations establish the end-to-end protection specified by the protocol.</span></span>

    - **<span data-ttu-id="640c3-756">Алгоритм случайного хэширования строк</span><span class="sxs-lookup"><span data-stu-id="640c3-756">Randomized string hash algorithms</span></span>**

         <span data-ttu-id="640c3-757">В .NET Framework 4.5 появился [алгоритм случайного хэширования строк](../configure-apps/file-schema/runtime/userandomizedstringhashalgorithm-element.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-757">The .NET Framework 4.5 introduced a [randomized string hash algorithm](../configure-apps/file-schema/runtime/userandomizedstringhashalgorithm-element.md).</span></span> <span data-ttu-id="640c3-758">Однако он не поддерживается ASP.NET, так как некоторые компоненты ASP.NET зависят от стабильного хэш-кода.</span><span class="sxs-lookup"><span data-stu-id="640c3-758">However, it was not supported by ASP.NET because of some ASP.NET features depended on a stable hash code.</span></span> <span data-ttu-id="640c3-759">В [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] алгоритмы случайного хэширования строк теперь поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="640c3-759">In [!INCLUDE[net_v46](../../../includes/net-v46-md.md)], randomized string hash algorithms are now supported.</span></span> <span data-ttu-id="640c3-760">Чтобы включить эту функцию, используйте параметр конфигурации `aspnet:UseRandomizedStringHashAlgorithm`.</span><span class="sxs-lookup"><span data-stu-id="640c3-760">To enable this feature, use the `aspnet:UseRandomizedStringHashAlgorithm` config setting.</span></span>

        ```xml
        <appSettings>
           <add key="aspnet:UseRandomizedStringHashAlgorithm" value="true|false" />
        </appSettings>
        ```

- **<span data-ttu-id="640c3-761">ADO.NET</span><span class="sxs-lookup"><span data-stu-id="640c3-761">ADO.NET</span></span>**

     <span data-ttu-id="640c3-762">ADO .NET теперь поддерживает функцию «Всегда зашифровано», которая доступна в CTP-версии 2 SQL Server 2016.</span><span class="sxs-lookup"><span data-stu-id="640c3-762">ADO .NET now supports the Always Encrypted feature available in SQL Server 2016 Community Technology Preview 2 (CTP2).</span></span> <span data-ttu-id="640c3-763">Благодаря функции «Всегда зашифровано» SQL Server может выполнять операции с зашифрованными данными, и, что важнее всего, ключ шифрования хранится в самом приложении в доверенной среде клиента, а не на сервере.</span><span class="sxs-lookup"><span data-stu-id="640c3-763">With Always Encrypted, SQL Server can perform operations on encrypted data, and best of all the encryption key resides with the application inside the customer’s trusted environment and not on the server.</span></span> <span data-ttu-id="640c3-764">Функция «Всегда зашифровано» защищает данные клиента, поэтому администраторы базы данных не имеют доступа к данным в формате обычного текста.</span><span class="sxs-lookup"><span data-stu-id="640c3-764">Always Encrypted secures customer data so DBAs do not have access to plain text data.</span></span> <span data-ttu-id="640c3-765">Шифрование и расшифровка данных происходит прозрачно на уровне драйвера, что сводит к минимуму изменения, которые должны быть выполнены для существующих приложений.</span><span class="sxs-lookup"><span data-stu-id="640c3-765">Encryption and decryption of data happens transparently at the driver level, minimizing changes that have to be made to existing applications.</span></span> <span data-ttu-id="640c3-766">Дополнительные сведения см. в разделах [Always Encrypted (ядро СУБД)](/sql/relational-databases/security/encryption/always-encrypted-database-engine) и [Постоянное шифрование (разработка клиентских приложений)](/sql/relational-databases/security/encryption/always-encrypted-client-development).</span><span class="sxs-lookup"><span data-stu-id="640c3-766">For details, see [Always Encrypted (Database Engine)](/sql/relational-databases/security/encryption/always-encrypted-database-engine) and [Always Encrypted (client development)](/sql/relational-databases/security/encryption/always-encrypted-client-development).</span></span>

- **<span data-ttu-id="640c3-767">64-разрядный компилятор JIT для управляемого кода</span><span class="sxs-lookup"><span data-stu-id="640c3-767">64-bit JIT Compiler for managed code</span></span>**

     <span data-ttu-id="640c3-768">В .NET Framework 4.6 представлена новая версия 64-разрядного JIT-компилятора (первоначальное кодовое имя RyuJIT).</span><span class="sxs-lookup"><span data-stu-id="640c3-768">The .NET Framework 4.6 features a new version of the 64-bit JIT compiler (originally code-named RyuJIT).</span></span> <span data-ttu-id="640c3-769">Новый 64-разрядный компилятор имеет значительно большую производительность, чем предыдущий 64-разрядный JIT-компилятор.</span><span class="sxs-lookup"><span data-stu-id="640c3-769">The new 64-bit compiler provides significant performance improvements over the older 64-bit JIT compiler.</span></span> <span data-ttu-id="640c3-770">Новый 64-разрядный компилятор включен для 64-разрядных процессов, выполняющихся на основе .NET Framework 4.6.</span><span class="sxs-lookup"><span data-stu-id="640c3-770">The new 64-bit compiler is enabled for 64-bit processes running on top of the .NET Framework 4.6.</span></span> <span data-ttu-id="640c3-771">Приложение будет работать в 64-разрядном процессе, если оно скомпилировано как 64-разрядное или AnyCPU и выполняется в 64-разрядной операционной системе.</span><span class="sxs-lookup"><span data-stu-id="640c3-771">Your app will run in a 64-bit process if it is compiled as 64-bit or AnyCPU and is running on a 64-bit operating system.</span></span> <span data-ttu-id="640c3-772">Хотя приняты все необходимые меры, чтобы обеспечить как можно более прозрачный переход на новый компилятор, возможны изменения в поведении.</span><span class="sxs-lookup"><span data-stu-id="640c3-772">While care has been taken to make the transition to the new compiler as transparent as possible, changes in behavior are possible.</span></span> <span data-ttu-id="640c3-773">Мы будем благодарны за любые отзывы о проблемах, возникших при использовании нового JIT-компилятора.</span><span class="sxs-lookup"><span data-stu-id="640c3-773">We would like to hear directly about any issues encountered when using the new JIT compiler.</span></span> <span data-ttu-id="640c3-774">Свяжитесь с нами через сайт [Microsoft Connect](https://connect.microsoft.com/) в случае возникновения проблемы, которая может быть связана с новым 64-разрядным JIT-компилятором.</span><span class="sxs-lookup"><span data-stu-id="640c3-774">Please contact us through [Microsoft Connect](https://connect.microsoft.com/) if you encounter an issue that may be related to the new 64-bit JIT compiler.</span></span>

     <span data-ttu-id="640c3-775">Новый 64-разрядный JIT-компилятор также включает функции аппаратного ускорения SIMD при работе с типами с поддержкой SIMD в пространстве имен <xref:System.Numerics>, что может обеспечить неплохое повышение производительности.</span><span class="sxs-lookup"><span data-stu-id="640c3-775">The new 64-bit JIT compiler also includes hardware SIMD acceleration features when coupled with SIMD-enabled types in the <xref:System.Numerics> namespace, which can yield good performance improvements.</span></span>

- **<span data-ttu-id="640c3-776">Усовершенствования загрузчика сборок</span><span class="sxs-lookup"><span data-stu-id="640c3-776">Assembly loader improvements</span></span>**

     <span data-ttu-id="640c3-777">Загрузчик сборок теперь более эффективно использует память благодаря выгрузке сборок IL после загрузки соответствующего образа NGEN.</span><span class="sxs-lookup"><span data-stu-id="640c3-777">The assembly loader now uses memory more efficiently by unloading IL assemblies after a corresponding NGEN image is loaded.</span></span> <span data-ttu-id="640c3-778">Это изменение снижает использование виртуальной памяти, что особенно полезно для больших 32-разрядных приложений (например, Visual Studio); кроме того, оно обеспечивает экономию физической памяти.</span><span class="sxs-lookup"><span data-stu-id="640c3-778">This change decreases virtual memory, which is particularly beneficial for large 32-bit apps (such as Visual Studio), and also saves physical memory.</span></span>

- **<span data-ttu-id="640c3-779">Изменения библиотеки с базовым классом</span><span class="sxs-lookup"><span data-stu-id="640c3-779">Base class library changes</span></span>**

     <span data-ttu-id="640c3-780">В [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] были добавлены многие новые API, расширив число важных сценариев.</span><span class="sxs-lookup"><span data-stu-id="640c3-780">Many new APIs have been added around to [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] to enable key scenarios.</span></span> <span data-ttu-id="640c3-781">Внесены следующие изменения и дополнения.</span><span class="sxs-lookup"><span data-stu-id="640c3-781">These include the following changes and additions:</span></span>

    - **<span data-ttu-id="640c3-782">Реализации IReadOnlyCollection\<T></span><span class="sxs-lookup"><span data-stu-id="640c3-782">IReadOnlyCollection\<T> implementations</span></span>**

         <span data-ttu-id="640c3-783">Дополнительные коллекции реализуют <xref:System.Collections.Generic.IReadOnlyCollection%601>, например <xref:System.Collections.Generic.Queue%601> и <xref:System.Collections.Generic.Stack%601>.</span><span class="sxs-lookup"><span data-stu-id="640c3-783">Additional collections implement <xref:System.Collections.Generic.IReadOnlyCollection%601> such as <xref:System.Collections.Generic.Queue%601> and <xref:System.Collections.Generic.Stack%601>.</span></span>

    - **<span data-ttu-id="640c3-784">CultureInfo.CurrentCulture и CultureInfo.CurrentUICulture</span><span class="sxs-lookup"><span data-stu-id="640c3-784">CultureInfo.CurrentCulture and CultureInfo.CurrentUICulture</span></span>**

         <span data-ttu-id="640c3-785">Свойства <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> и <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType> теперь доступны для чтения и записи, а не только для чтения.</span><span class="sxs-lookup"><span data-stu-id="640c3-785">The <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> and <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType> properties are now read-write rather than read-only.</span></span> <span data-ttu-id="640c3-786">При назначении нового объекта <xref:System.Globalization.CultureInfo> этим свойствам язык и региональные параметры текущего потока, определенные свойством `Thread.CurrentThread.CurrentCulture`, и язык и региональные параметры текущего потока пользовательского интерфейса, определенные свойствами `Thread.CurrentThread.CurrentUICulture`, также изменяются.</span><span class="sxs-lookup"><span data-stu-id="640c3-786">If you assign a new <xref:System.Globalization.CultureInfo> object to these properties, the current thread culture defined by the `Thread.CurrentThread.CurrentCulture` property and the current UI thread culture defined by the `Thread.CurrentThread.CurrentUICulture` properties also change.</span></span>

    - **<span data-ttu-id="640c3-787">Усовершенствования сборки мусора</span><span class="sxs-lookup"><span data-stu-id="640c3-787">Enhancements to garbage collection (GC)</span></span>**

         <span data-ttu-id="640c3-788">Класс <xref:System.GC> теперь включает методы <xref:System.GC.TryStartNoGCRegion%2A> и <xref:System.GC.EndNoGCRegion%2A>, которые позволяют запретить сбор мусора во время выполнения критического пути.</span><span class="sxs-lookup"><span data-stu-id="640c3-788">The <xref:System.GC> class now includes <xref:System.GC.TryStartNoGCRegion%2A> and <xref:System.GC.EndNoGCRegion%2A> methods that allow you to disallow garbage collection during the execution of a critical path.</span></span>

         <span data-ttu-id="640c3-789">Новая перегрузка метода <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%2CSystem.Boolean%29?displayProperty=nameWithType> позволяет контролировать, выполняется ли очистка и сжатие кучи мелких объектов и кучи больших объектов или только очистка.</span><span class="sxs-lookup"><span data-stu-id="640c3-789">A new overload of the <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%2CSystem.Boolean%29?displayProperty=nameWithType> method allows you to control whether both the small object heap and the large object heap are swept and compacted or swept only.</span></span>

    - **<span data-ttu-id="640c3-790">Типы с поддержкой SIMD</span><span class="sxs-lookup"><span data-stu-id="640c3-790">SIMD-enabled types</span></span>**

         <span data-ttu-id="640c3-791">Пространство имен <xref:System.Numerics> теперь включает различные типы с поддержкой SIMD, например <xref:System.Numerics.Matrix3x2>, <xref:System.Numerics.Matrix4x4>, <xref:System.Numerics.Plane>, <xref:System.Numerics.Quaternion>, <xref:System.Numerics.Vector2>, <xref:System.Numerics.Vector3> и <xref:System.Numerics.Vector4>.</span><span class="sxs-lookup"><span data-stu-id="640c3-791">The <xref:System.Numerics> namespace now includes a number of SIMD-enabled types, such as <xref:System.Numerics.Matrix3x2>, <xref:System.Numerics.Matrix4x4>, <xref:System.Numerics.Plane>, <xref:System.Numerics.Quaternion>, <xref:System.Numerics.Vector2>, <xref:System.Numerics.Vector3>, and <xref:System.Numerics.Vector4>.</span></span>

         <span data-ttu-id="640c3-792">Поскольку новый 64-разрядный JIT-компилятор также включает функции аппаратного ускорения SIMD, особенно значительное повышение производительности обеспечивается при использовании типов с поддержкой SIMD с новым 64-разрядным JIT-компилятором.</span><span class="sxs-lookup"><span data-stu-id="640c3-792">Because the new 64-bit JIT compiler also includes hardware SIMD acceleration features, there are especially significant performance improvements when using the SIMD-enabled types with the new 64-bit JIT compiler.</span></span>

    - **<span data-ttu-id="640c3-793">Обновления шифрования</span><span class="sxs-lookup"><span data-stu-id="640c3-793">Cryptography updates</span></span>**

         <span data-ttu-id="640c3-794">API <xref:System.Security.Cryptography?displayProperty=nameWithType> обновляется для поддержки [API шифрования CNG Windows](/windows/desktop/SecCNG/cng-reference).</span><span class="sxs-lookup"><span data-stu-id="640c3-794">The <xref:System.Security.Cryptography?displayProperty=nameWithType> API is being updated to support the [Windows CNG cryptography APIs](/windows/desktop/SecCNG/cng-reference).</span></span> <span data-ttu-id="640c3-795">Предыдущие версии .NET Framework полностью зависели от [более ранних версий API шифрования Windows](/windows/desktop/SecCrypto/cryptography-portal) для реализации <xref:System.Security.Cryptography?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-795">Previous versions of the .NET Framework have relied entirely on an [earlier version of the Windows Cryptography APIs](/windows/desktop/SecCrypto/cryptography-portal) as the basis for the <xref:System.Security.Cryptography?displayProperty=nameWithType> implementation.</span></span> <span data-ttu-id="640c3-796">Мы получали много запросов на реализацию поддержки API CNG, так как он поддерживает [современные алгоритмы шифрования](/windows/desktop/SecCNG/cng-features#suite-b-support), что очень важно для некоторых категорий приложений.</span><span class="sxs-lookup"><span data-stu-id="640c3-796">We have had requests to support the CNG API, since it supports [modern cryptography algorithms](/windows/desktop/SecCNG/cng-features#suite-b-support), which are important for certain categories of apps.</span></span>

         <span data-ttu-id="640c3-797">Платформа .NET Framework 4.6 включает следующие новые усовершенствования для поддержки API-интерфейсов шифрования CNG Windows.</span><span class="sxs-lookup"><span data-stu-id="640c3-797">The .NET Framework 4.6 includes the following new enhancements to support the Windows CNG cryptography APIs:</span></span>

        - <span data-ttu-id="640c3-798">Набор методов расширения для сертификатов X509, `System.Security.Cryptography.X509Certificates.RSACertificateExtensions.GetRSAPublicKey(System.Security.Cryptography.X509Certificates.X509Certificate2)` и `System.Security.Cryptography.X509Certificates.RSACertificateExtensions.GetRSAPrivateKey(System.Security.Cryptography.X509Certificates.X509Certificate2)`, которые возвращают реализацию на основе CNG, а не реализацию на основе CAPI (по возможности).</span><span class="sxs-lookup"><span data-stu-id="640c3-798">A set of extension methods for X509 Certificates, `System.Security.Cryptography.X509Certificates.RSACertificateExtensions.GetRSAPublicKey(System.Security.Cryptography.X509Certificates.X509Certificate2)` and `System.Security.Cryptography.X509Certificates.RSACertificateExtensions.GetRSAPrivateKey(System.Security.Cryptography.X509Certificates.X509Certificate2)`, that return a CNG-based implementation rather than a CAPI-based implementation when possible.</span></span> <span data-ttu-id="640c3-799">(Некоторые смарт-карты и т. д. по-прежнему требуют CAPI, и API-интерфейсы обрабатывают резервный вариант.)</span><span class="sxs-lookup"><span data-stu-id="640c3-799">(Some smartcards, etc., still require CAPI, and the APIs handle the fallback).</span></span>

        - <span data-ttu-id="640c3-800">Класс <xref:System.Security.Cryptography.RSACng?displayProperty=nameWithType>, который обеспечивает реализацию CNG алгоритма RSA.</span><span class="sxs-lookup"><span data-stu-id="640c3-800">The <xref:System.Security.Cryptography.RSACng?displayProperty=nameWithType> class, which provides a CNG implementation of the RSA algorithm.</span></span>

        - <span data-ttu-id="640c3-801">Улучшения API RSA, позволяющие отказаться от обязательного приведения общих действий.</span><span class="sxs-lookup"><span data-stu-id="640c3-801">Enhancements to the RSA API so that common actions no longer require casting.</span></span> <span data-ttu-id="640c3-802">Например, для шифрования данных с помощью объекта <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> в предыдущих версиях платформы .NET Framework требуется код, аналогичный следующему.</span><span class="sxs-lookup"><span data-stu-id="640c3-802">For example, encrypting data using an <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> object requires code like the following in previous versions of the .NET Framework.</span></span>

             [!code-csharp[WhatsNew.Casting#1](~/samples/snippets/csharp/VS_Snippets_CLR/whatsnew.casting/cs/program.cs#1)]
             [!code-vb[WhatsNew.Casting#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/whatsnew.casting/vb/module1.vb#1)]

             <span data-ttu-id="640c3-803">Код, использующий новые API-интерфейсы шифрования в .NET Framework 4.6, можно переписать следующим образом, чтобы избежать приведения.</span><span class="sxs-lookup"><span data-stu-id="640c3-803">Code that uses the new cryptography APIs in the .NET Framework 4.6 can be rewritten as follows to avoid the cast.</span></span>

             [!code-csharp[WhatsNew.Casting#2](~/samples/snippets/csharp/VS_Snippets_CLR/whatsnew.casting/cs/program.cs#2)]
             [!code-vb[WhatsNew.Casting#2](~/samples/snippets/visualbasic/VS_Snippets_CLR/whatsnew.casting/vb/module1.vb#2)]

    - **<span data-ttu-id="640c3-804">Поддержка преобразования даты и времени в формат времени Unix и из него</span><span class="sxs-lookup"><span data-stu-id="640c3-804">Support for converting dates and times to or from Unix time</span></span>**

         <span data-ttu-id="640c3-805">Следующие новые методы были добавлены в структуру <xref:System.DateTimeOffset> для поддержки преобразования значений даты и времени в формат Unix или из него.</span><span class="sxs-lookup"><span data-stu-id="640c3-805">The following new methods have been added to the <xref:System.DateTimeOffset> structure to support converting date and time values to or from Unix time:</span></span>

        - <xref:System.DateTimeOffset.FromUnixTimeSeconds%2A?displayProperty=nameWithType>

        - <xref:System.DateTimeOffset.FromUnixTimeMilliseconds%2A?displayProperty=nameWithType>

        - <xref:System.DateTimeOffset.ToUnixTimeSeconds%2A?displayProperty=nameWithType>

        - <xref:System.DateTimeOffset.ToUnixTimeMilliseconds%2A?displayProperty=nameWithType>

    - **<span data-ttu-id="640c3-806">Параметры совместимости</span><span class="sxs-lookup"><span data-stu-id="640c3-806">Compatibility switches</span></span>**

         <span data-ttu-id="640c3-807">Новый класс <xref:System.AppContext> добавляет новый компонент совместимости, который позволяет авторам библиотек предоставлять согласованный механизм явного отказа для новых функциональных возможностей.</span><span class="sxs-lookup"><span data-stu-id="640c3-807">The new <xref:System.AppContext> class adds a new compatibility feature that enables library writers to provide a uniform opt-out mechanism for new functionality for their users.</span></span> <span data-ttu-id="640c3-808">Он устанавливает слабо связанный контракт между компонентами для передачи запроса на явный отказ.</span><span class="sxs-lookup"><span data-stu-id="640c3-808">It establishes a loosely-coupled contract between components in order to communicate an opt-out request.</span></span> <span data-ttu-id="640c3-809">Эта возможность обычно важна при внесении изменений в существующие функции.</span><span class="sxs-lookup"><span data-stu-id="640c3-809">This capability is typically important when a change is made to existing functionality.</span></span> <span data-ttu-id="640c3-810">В свою очередь, режим неявного согласия для новых функциональных возможностей уже существует.</span><span class="sxs-lookup"><span data-stu-id="640c3-810">Conversely, there is already an implicit opt-in for new functionality.</span></span>

         <span data-ttu-id="640c3-811">В <xref:System.AppContext> библиотеки определяют и предоставляют параметры совместимости, а код, который от них зависит, может устанавливать эти параметры для влияния на поведение библиотек.</span><span class="sxs-lookup"><span data-stu-id="640c3-811">With <xref:System.AppContext>, libraries define and expose compatibility switches, while code that depends on them can set those switches to affect the library behavior.</span></span> <span data-ttu-id="640c3-812">По умолчанию библиотеки предоставляют новые функции и изменяют их (то есть предоставляют прежние функции) только в том случае, если установлен параметр.</span><span class="sxs-lookup"><span data-stu-id="640c3-812">By default, libraries provide the new functionality, and they only alter it (that is, they provide the previous functionality) if the switch is set.</span></span>

         <span data-ttu-id="640c3-813">Приложение (или библиотека) может объявить значение параметра (который всегда имеет значение <xref:System.Boolean>), определяемое зависимой библиотекой.</span><span class="sxs-lookup"><span data-stu-id="640c3-813">An application (or a library) can declare the value of a switch (which is always a <xref:System.Boolean> value) that a dependent library defines.</span></span> <span data-ttu-id="640c3-814">Параметр всегда имеет неявное значение `false`.</span><span class="sxs-lookup"><span data-stu-id="640c3-814">The switch is always implicitly `false`.</span></span> <span data-ttu-id="640c3-815">Установка значения `true` для параметра включает его.</span><span class="sxs-lookup"><span data-stu-id="640c3-815">Setting the switch to `true` enables it.</span></span> <span data-ttu-id="640c3-816">Явно задание значения `false` для параметра определяет новое поведение.</span><span class="sxs-lookup"><span data-stu-id="640c3-816">Explicitly setting the switch to `false` provides the new behavior.</span></span>

        ```csharp
        AppContext.SetSwitch("Switch.AmazingLib.ThrowOnException", true);
        ```

         <span data-ttu-id="640c3-817">Библиотека должна проверить, объявил ли потребитель значение параметра, а затем выполнить соответствующие действия.</span><span class="sxs-lookup"><span data-stu-id="640c3-817">The library must check if a consumer has declared the value of the switch and then appropriately act on it.</span></span>

        ```csharp
        if (!AppContext.TryGetSwitch("Switch.AmazingLib.ThrowOnException", out shouldThrow))
        {
           // This is the case where the switch value was not set by the application.
           // The library can choose to get the value of shouldThrow by other means.
           // If no overrides nor default values are specified, the value should be 'false'.
           // A false value implies the latest behavior.
        }

           // The library can use the value of shouldThrow to throw exceptions or not.
           if (shouldThrow)
           {
              // old code
           }
           else {
              // new code
           }
        }
        ```

         <span data-ttu-id="640c3-818">Рекомендуется использовать согласованный формат параметров, так как они представляют собой формальный контракт, предоставляемый библиотекой.</span><span class="sxs-lookup"><span data-stu-id="640c3-818">It's beneficial to use a consistent format for switches, since they are a formal contract exposed by a library.</span></span> <span data-ttu-id="640c3-819">Ниже приведены два очевидных формата:</span><span class="sxs-lookup"><span data-stu-id="640c3-819">The following are two obvious formats.</span></span>

        - <span data-ttu-id="640c3-820">*параметр*.*пространство_имен* *имя_параметра*</span><span class="sxs-lookup"><span data-stu-id="640c3-820">*Switch*.*namespace*.*switchname*</span></span>

        - <span data-ttu-id="640c3-821">*параметр*.*библиотека*.*имя_параметра*</span><span class="sxs-lookup"><span data-stu-id="640c3-821">*Switch*.*library*.*switchname*</span></span>

    - **<span data-ttu-id="640c3-822">Изменения асинхронной модели на основе задач (TAP)</span><span class="sxs-lookup"><span data-stu-id="640c3-822">Changes to the task-based asynchronous pattern (TAP)</span></span>**

         <span data-ttu-id="640c3-823">Для приложений, предназначенных для [!INCLUDE[net_v46](../../../includes/net-v46-md.md)], объекты <xref:System.Threading.Tasks.Task> и <xref:System.Threading.Tasks.Task%601> наследуют язык и региональные параметры, а также язык и региональные параметры интерфейса пользователя вызывающего потока.</span><span class="sxs-lookup"><span data-stu-id="640c3-823">For apps that target the [!INCLUDE[net_v46](../../../includes/net-v46-md.md)], <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> objects inherit the culture and UI culture of the calling thread.</span></span> <span data-ttu-id="640c3-824">Поведение приложений на предыдущих версиях платформы .NET Framework или без определенной версии .NET Framework не затрагивается.</span><span class="sxs-lookup"><span data-stu-id="640c3-824">The behavior of apps that target previous versions of the .NET Framework, or that do not target a specific version of the .NET Framework, is unaffected.</span></span> <span data-ttu-id="640c3-825">Дополнительные сведения см. в подразделе "Язык и региональные параметры в асинхронных операциях на основе задач" раздела, посвященного классу <xref:System.Globalization.CultureInfo>.</span><span class="sxs-lookup"><span data-stu-id="640c3-825">For more information, see the "Culture and task-based asynchronous operations" section of the <xref:System.Globalization.CultureInfo> class topic.</span></span>

         <span data-ttu-id="640c3-826">Класс <xref:System.Threading.AsyncLocal%601?displayProperty=nameWithType> позволяет представлять внешние данные, локальные для данного асинхронного потока управления, такие как метод `async`.</span><span class="sxs-lookup"><span data-stu-id="640c3-826">The <xref:System.Threading.AsyncLocal%601?displayProperty=nameWithType> class allows you to represent ambient data that is local to a given asynchronous control flow, such as an `async` method.</span></span> <span data-ttu-id="640c3-827">Его можно использовать для сохранения данных в разных потоках.</span><span class="sxs-lookup"><span data-stu-id="640c3-827">It can be used to persist data across threads.</span></span> <span data-ttu-id="640c3-828">Кроме того, можно определить метод обратного вызова, который получает уведомление при каждом изменении внешних данных из-за явного изменения свойства <xref:System.Threading.AsyncLocal%601.Value%2A?displayProperty=nameWithType> или из-за перехода контекста в потоке.</span><span class="sxs-lookup"><span data-stu-id="640c3-828">You can also define a callback method that is notified whenever the ambient data changes either because the <xref:System.Threading.AsyncLocal%601.Value%2A?displayProperty=nameWithType> property was explicitly changed, or because the thread encountered a context transition.</span></span>

         <span data-ttu-id="640c3-829">Три удобных метода, <xref:System.Threading.Tasks.Task.CompletedTask%2A?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Task.FromCanceled%2A?displayProperty=nameWithType> и <xref:System.Threading.Tasks.Task.FromException%2A?displayProperty=nameWithType>, добавлены в асинхронную модель на основе задач (TAP) для возврата завершенных задач в определенном состоянии.</span><span class="sxs-lookup"><span data-stu-id="640c3-829">Three convenience methods, <xref:System.Threading.Tasks.Task.CompletedTask%2A?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Task.FromCanceled%2A?displayProperty=nameWithType>, and <xref:System.Threading.Tasks.Task.FromException%2A?displayProperty=nameWithType>, have been added to the task-based asynchronous pattern (TAP) to return completed tasks in a particular state.</span></span>

         <span data-ttu-id="640c3-830">Теперь класс <xref:System.IO.Pipes.NamedPipeClientStream> поддерживает асинхронное взаимодействие с новым методом <xref:System.IO.Pipes.NamedPipeClientStream.ConnectAsync%2A>.</span><span class="sxs-lookup"><span data-stu-id="640c3-830">The <xref:System.IO.Pipes.NamedPipeClientStream> class now supports asynchronous communication with its new <xref:System.IO.Pipes.NamedPipeClientStream.ConnectAsync%2A>.</span></span> <span data-ttu-id="640c3-831">метод.</span><span class="sxs-lookup"><span data-stu-id="640c3-831">method.</span></span>

    - **<span data-ttu-id="640c3-832">EventSource теперь поддерживает запись в журнал событий</span><span class="sxs-lookup"><span data-stu-id="640c3-832">EventSource now supports writing to the Event log</span></span>**

         <span data-ttu-id="640c3-833">Теперь класс <xref:System.Diagnostics.Tracing.EventSource> можно использовать для регистрации в журнале событий административных сообщений или рабочих сообщений в дополнение ко всем существующим сеансам трассировки событий Windows, созданным на компьютере.</span><span class="sxs-lookup"><span data-stu-id="640c3-833">You now can use the <xref:System.Diagnostics.Tracing.EventSource> class to log administrative or operational messages to the event log, in addition to any existing ETW sessions created on the machine.</span></span> <span data-ttu-id="640c3-834">Раньше для обеспечения этих функций приходилось использовать пакет Microsoft.Diagnostics.Tracing.EventSource NuGet.</span><span class="sxs-lookup"><span data-stu-id="640c3-834">In the past, you had to use the Microsoft.Diagnostics.Tracing.EventSource NuGet package for this functionality.</span></span> <span data-ttu-id="640c3-835">Эти функции теперь встроены в .NET Framework 4.6.</span><span class="sxs-lookup"><span data-stu-id="640c3-835">This functionality is now built-into the .NET Framework 4.6.</span></span>

         <span data-ttu-id="640c3-836">Обновления пакета NuGet и .NET Framework 4.6 включают следующие функции.</span><span class="sxs-lookup"><span data-stu-id="640c3-836">Both the NuGet package and the .NET Framework 4.6 have been updated with the following features:</span></span>

        - **<span data-ttu-id="640c3-837">Динамические события</span><span class="sxs-lookup"><span data-stu-id="640c3-837">Dynamic events</span></span>**

             <span data-ttu-id="640c3-838">Возможность определения событий "на лету" без создания методов событий.</span><span class="sxs-lookup"><span data-stu-id="640c3-838">Allows events defined "on the fly" without creating event methods.</span></span>

        - **<span data-ttu-id="640c3-839">Разнородные полезные данные</span><span class="sxs-lookup"><span data-stu-id="640c3-839">Rich payloads</span></span>**

             <span data-ttu-id="640c3-840">Возможность передавать массивы и классы со специальными атрибутами, а также типы-примитивы в качестве полезных данных.</span><span class="sxs-lookup"><span data-stu-id="640c3-840">Allows specially attributed classes and arrays as well as primitive types to be passed as a payload</span></span>

        - **<span data-ttu-id="640c3-841">Отслеживание действий</span><span class="sxs-lookup"><span data-stu-id="640c3-841">Activity tracking</span></span>**

             <span data-ttu-id="640c3-842">События Start и Stop помечают возникающие между ними события идентификатором, который представляет все текущие активные действия.</span><span class="sxs-lookup"><span data-stu-id="640c3-842">Causes Start and Stop events to tag events between them with an ID that represents all currently active activities.</span></span>

         <span data-ttu-id="640c3-843">Для поддержки этих функций перегруженный метод <xref:System.Diagnostics.Tracing.EventSource.Write%2A> был добавлен в класс <xref:System.Diagnostics.Tracing.EventSource>.</span><span class="sxs-lookup"><span data-stu-id="640c3-843">To support these features, the overloaded <xref:System.Diagnostics.Tracing.EventSource.Write%2A> method has been added to the <xref:System.Diagnostics.Tracing.EventSource> class.</span></span>

- **<span data-ttu-id="640c3-844">Windows Presentation Foundation (WPF)</span><span class="sxs-lookup"><span data-stu-id="640c3-844">Windows Presentation Foundation (WPF)</span></span>**

    - **<span data-ttu-id="640c3-845">Усовершенствования HDPI</span><span class="sxs-lookup"><span data-stu-id="640c3-845">HDPI improvements</span></span>**

         <span data-ttu-id="640c3-846">Более эффективная поддержка HDPI в WPF в [!INCLUDE[net_v46](../../../includes/net-v46-md.md)].</span><span class="sxs-lookup"><span data-stu-id="640c3-846">HDPI support in WPF is now better in the [!INCLUDE[net_v46](../../../includes/net-v46-md.md)].</span></span> <span data-ttu-id="640c3-847">В округление макетов внесены изменения для снижения числа вхождений обрезки в элементах управления с границами.</span><span class="sxs-lookup"><span data-stu-id="640c3-847">Changes have been made to layout rounding to reduce instances of clipping in controls with borders.</span></span> <span data-ttu-id="640c3-848">По умолчанию эта функция включена, только если для атрибута <xref:System.Runtime.Versioning.TargetFrameworkAttribute> задано значение .NET 4.6.</span><span class="sxs-lookup"><span data-stu-id="640c3-848">By default, this feature is enabled only if your <xref:System.Runtime.Versioning.TargetFrameworkAttribute> is set to .NET 4.6.</span></span>  <span data-ttu-id="640c3-849">Для приложений, которые предназначены для более ранних версий платформы, но выполняются в [!INCLUDE[net_v46](../../../includes/net-v46-md.md)], можно выбрать новое поведение, добавив следующую строку в раздел [\<runtime>](../configure-apps/file-schema/runtime/runtime-element.md) файла app.config:</span><span class="sxs-lookup"><span data-stu-id="640c3-849">Applications that target earlier versions of the framework but are running on the [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] can opt in to the new behavior by adding the following line to the [\<runtime>](../configure-apps/file-schema/runtime/runtime-element.md) section of the app.config file:</span></span>

        ```xml
        <AppContextSwitchOverrides
        value="Switch.MS.Internal.DoNotApplyLayoutRoundingToMarginsAndBorderThickness=false"
        />
        ```

         <span data-ttu-id="640c3-850">Окна WPF, разнесенные на несколько мониторов с разными параметрами DPI (настройка нескольких параметров разрешения), теперь отображаются полностью, без черных областей.</span><span class="sxs-lookup"><span data-stu-id="640c3-850">WPF windows straddling multiple monitors with different DPI settings (Multi-DPI setup) are now completely rendered without blacked-out regions.</span></span> <span data-ttu-id="640c3-851">Можно отключить это новое поведение, добавив следующую строку в раздел `<appSettings>` файла app.config.</span><span class="sxs-lookup"><span data-stu-id="640c3-851">You can opt out of this behavior by adding the following line to the `<appSettings>` section of the app.config file to disable this new behavior:</span></span>

        ```xml
        <add key="EnableMultiMonitorDisplayClipping" value="true"/>
        ```

         <span data-ttu-id="640c3-852">Поддержка автоматической загрузки правого курсора в зависимости от параметров DPI добавлена в <xref:System.Windows.Input.Cursor?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-852">Support for automatically loading the right cursor based on DPI setting has been added to  <xref:System.Windows.Input.Cursor?displayProperty=nameWithType>.</span></span>

    - **<span data-ttu-id="640c3-853">Улучшены возможности сенсорного управления</span><span class="sxs-lookup"><span data-stu-id="640c3-853">Touch is better</span></span>**

         <span data-ttu-id="640c3-854">Проблема с касанием, приводившим к непредсказуемому поведению, о которой сообщает клиент на веб-сайте [Connect](https://connect.microsoft.com/VisualStudio/feedback/details/903760/), была разрешена в [!INCLUDE[net_v46](../../../includes/net-v46-md.md)].</span><span class="sxs-lookup"><span data-stu-id="640c3-854">Customer reports on [Connect](https://connect.microsoft.com/VisualStudio/feedback/details/903760/) that touch produces unpredictable behavior have been addressed in the [!INCLUDE[net_v46](../../../includes/net-v46-md.md)].</span></span> <span data-ttu-id="640c3-855">Пороговое значение двойного касания для приложений Магазина Windows и приложений WPF теперь одинаково в Windows 8.1 и более поздних версий.</span><span class="sxs-lookup"><span data-stu-id="640c3-855">The double tap threshold for Windows Store applications and WPF applications is now the same in Windows 8.1 and above.</span></span>

    - **<span data-ttu-id="640c3-856">Поддержка прозрачных дочерних окон</span><span class="sxs-lookup"><span data-stu-id="640c3-856">Transparent child window support</span></span>**

         <span data-ttu-id="640c3-857">WPF в [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] поддерживает прозрачные дочерние окна в Windows 8.1 и более поздних версий.</span><span class="sxs-lookup"><span data-stu-id="640c3-857">WPF in the [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] supports transparent child windows in Windows 8.1 and above.</span></span> <span data-ttu-id="640c3-858">Это позволяет создавать непрямоугольные и прозрачные дочерние окна в окнах верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="640c3-858">This allows you to create non-rectangular and transparent child windows in your top-level windows.</span></span> <span data-ttu-id="640c3-859">Чтобы включить эту функцию, необходимо задать для свойства <xref:System.Windows.Interop.HwndSourceParameters.UsesPerPixelTransparency%2A?displayProperty=nameWithType> значение `true`.</span><span class="sxs-lookup"><span data-stu-id="640c3-859">You can enable this feature by setting the <xref:System.Windows.Interop.HwndSourceParameters.UsesPerPixelTransparency%2A?displayProperty=nameWithType> property to `true`.</span></span>

- **<span data-ttu-id="640c3-860">Windows Communication Foundation (WCF)</span><span class="sxs-lookup"><span data-stu-id="640c3-860">Windows Communication Foundation (WCF)</span></span>**

    - **<span data-ttu-id="640c3-861">Поддержка SSL</span><span class="sxs-lookup"><span data-stu-id="640c3-861">SSL support</span></span>**

         <span data-ttu-id="640c3-862">Теперь WCF помимо SSL 3.0 и TLS 1.0 поддерживает SSL-версии TLS 1.1 и TLS 1.2 при использовании NetTcp с безопасностью транспорта и проверкой подлинности клиента.</span><span class="sxs-lookup"><span data-stu-id="640c3-862">WCF now supports SSL version TLS 1.1 and TLS 1.2, in addition to SSL 3.0 and TLS 1.0, when using NetTcp with transport security and client authentication.</span></span> <span data-ttu-id="640c3-863">Теперь можно выбрать, какой протокол использовать, или отключить старые менее безопасные протоколы.</span><span class="sxs-lookup"><span data-stu-id="640c3-863">It is now possible to select which protocol to use, or to disable old lesser secure protocols.</span></span> <span data-ttu-id="640c3-864">Это можно сделать, задав свойство <xref:System.ServiceModel.TcpTransportSecurity.SslProtocols%2A> или добавив следующие данные в файл конфигурации.</span><span class="sxs-lookup"><span data-stu-id="640c3-864">This can be done either by setting the <xref:System.ServiceModel.TcpTransportSecurity.SslProtocols%2A> property or by adding the following to a configuration file.</span></span>

        ```xml
        <netTcpBinding>
           <binding>
              <security mode= "None|Transport|Message|TransportWithMessageCredential" >
                 <transport clientCredentialType="None|Windows|Certificate"
                            protectionLevel="None|Sign|EncryptAndSign"
                            sslProtocols="Ssl3|Tls1|Tls11|Tls12">
                    </transport>
              </security>
           </binding>
        </netTcpBinding>
        ```

    - **<span data-ttu-id="640c3-865">Отправка сообщений с помощью разных подключений HTTP</span><span class="sxs-lookup"><span data-stu-id="640c3-865">Sending messages using different HTTP connections</span></span>**

         <span data-ttu-id="640c3-866">WCF теперь позволяет пользователям отправлять некоторые сообщения с помощью разных базовых HTTP-подключений.</span><span class="sxs-lookup"><span data-stu-id="640c3-866">WCF now allows users to ensure certain messages are sent using different underlying HTTP connections.</span></span> <span data-ttu-id="640c3-867">Это можно сделать двумя способами.</span><span class="sxs-lookup"><span data-stu-id="640c3-867">There are two ways to do this:</span></span>

        - **<span data-ttu-id="640c3-868">С помощью префикса имени группы подключений</span><span class="sxs-lookup"><span data-stu-id="640c3-868">Using a connection group name prefix</span></span>**

             <span data-ttu-id="640c3-869">Пользователи могут указать строку, которую WCF будет использовать как префикс для имени группы подключений.</span><span class="sxs-lookup"><span data-stu-id="640c3-869">Users can specify a string that WCF will use as a prefix for the connection group name.</span></span> <span data-ttu-id="640c3-870">Два сообщения с разными префиксами отправляются с помощью разных базовых HTTP-подключений.</span><span class="sxs-lookup"><span data-stu-id="640c3-870">Two messages with different prefixes are sent using different underlying HTTP connections.</span></span> <span data-ttu-id="640c3-871">Префикс задается путем добавления пары "ключ-значение" в свойство <xref:System.ServiceModel.Channels.Message.Properties%2A?displayProperty=nameWithType> сообщения.</span><span class="sxs-lookup"><span data-stu-id="640c3-871">You set the prefix by adding a key/value pair to the message's <xref:System.ServiceModel.Channels.Message.Properties%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="640c3-872">Ключ — это "HttpTransportConnectionGroupNamePrefix"; значение — желаемый префикс.</span><span class="sxs-lookup"><span data-stu-id="640c3-872">The key is "HttpTransportConnectionGroupNamePrefix"; the value is the desired prefix.</span></span>

        - **<span data-ttu-id="640c3-873">С помощью разных фабрик каналов</span><span class="sxs-lookup"><span data-stu-id="640c3-873">Using different channel factories</span></span>**

             <span data-ttu-id="640c3-874">Пользователи могут также включить функцию, которая гарантирует, что сообщения, отправляемые по каналам, созданным разными фабриками каналов, будут отправляться с помощью разных базовых HTTP-подключений.</span><span class="sxs-lookup"><span data-stu-id="640c3-874">Users can also enable a feature that ensures that messages sent using channels created by different channel factories will use different underlying HTTP connections.</span></span> <span data-ttu-id="640c3-875">Чтобы включить эту функцию, пользователи должны самостоятельно задать для следующего параметра `appSetting` значение `true`.</span><span class="sxs-lookup"><span data-stu-id="640c3-875">To enable this feature, users must set the following `appSetting` to `true`:</span></span>

            ```xml
            <appSettings>
               <add key="wcf:httpTransportBinding:useUniqueConnectionPoolPerFactory" value="true" />
            </appSettings>
            ```

- **<span data-ttu-id="640c3-876">Windows Workflow Foundation (WWF)</span><span class="sxs-lookup"><span data-stu-id="640c3-876">Windows Workflow Foundation (WWF)</span></span>**

     <span data-ttu-id="640c3-877">Теперь можно указать интервал (в секундах) удержания службой рабочего процесса внеочередного запроса операции при наличии незавершенной закладки "без протокола" до истечения времени ожидания запроса.</span><span class="sxs-lookup"><span data-stu-id="640c3-877">You can now specify the number of seconds a workflow service will hold on to an out-of-order operation request when there is an outstanding "non-protocol" bookmark before timing out the request.</span></span> <span data-ttu-id="640c3-878">Закладка "без протокола" — это закладка, которая не связана с незавершенными действиями получения.</span><span class="sxs-lookup"><span data-stu-id="640c3-878">A "non-protocol" bookmark is a bookmark that is not related to outstanding Receive activities.</span></span> <span data-ttu-id="640c3-879">Некоторые действия создают закладки без протокола в собственной реализации, поэтому не всегда очевидно, что закладка без протокола существует.</span><span class="sxs-lookup"><span data-stu-id="640c3-879">Some activities create non-protocol bookmarks within their implementation, so it may not be obvious that a non-protocol bookmark exists.</span></span> <span data-ttu-id="640c3-880">К таким действиям относятся State и Pick.</span><span class="sxs-lookup"><span data-stu-id="640c3-880">These include State and Pick.</span></span> <span data-ttu-id="640c3-881">Соответственно, при наличии службы рабочего процесса, реализованной с помощью конечного автомата или содержащей действие Pick, вероятнее всего, имеются закладки без протокола.</span><span class="sxs-lookup"><span data-stu-id="640c3-881">So if you have a workflow service implemented with a state machine or containing a Pick activity, you will most likely have non-protocol bookmarks.</span></span> <span data-ttu-id="640c3-882">Укажите интервал, добавив строку следующего вида в раздел `appSettings` файла app.config.</span><span class="sxs-lookup"><span data-stu-id="640c3-882">You specify the interval by adding a line like the following to the `appSettings` section of your app.config file:</span></span>

    ```xml
    <add key="microsoft:WorkflowServices:FilterResumeTimeoutInSeconds" value="60"/>
    ```

     <span data-ttu-id="640c3-883">Значение по умолчанию — 60 секунд.</span><span class="sxs-lookup"><span data-stu-id="640c3-883">The default value is 60 seconds.</span></span> <span data-ttu-id="640c3-884">Если `value` имеет значение 0, внеочередные запросы немедленно отклоняются с созданием ошибки с текстом, который выглядит следующим образом.</span><span class="sxs-lookup"><span data-stu-id="640c3-884">If `value` is set to 0, out-of-order requests are immediately rejected with a fault with text that looks like this:</span></span>

    ```
    Operation 'Request3|{http://tempuri.org/}IService' on service instance with identifier '2b0667b6-09c8-4093-9d02-f6c67d534292' cannot be performed at this time. Please ensure that the operations are performed in the correct order and that the binding in use provides ordered delivery guarantees.
    ```

     <span data-ttu-id="640c3-885">Это же сообщение отображается при получении сообщения о внеочередной операции в отсутствии закладок без протокола.</span><span class="sxs-lookup"><span data-stu-id="640c3-885">This is the same message that you receive if an out-of-order operation message is received and there are no non-protocol bookmarks.</span></span>

     <span data-ttu-id="640c3-886">Если элемент `FilterResumeTimeoutInSeconds` имеет ненулевое значение, существуют закладки без протокола и истекает интервал времени ожидания, то происходит сбой операции с сообщением об истечении времени ожидания.</span><span class="sxs-lookup"><span data-stu-id="640c3-886">If the value of the `FilterResumeTimeoutInSeconds` element is non-zero, there are non-protocol bookmarks, and the timeout interval expires, the operation fails with a timeout message.</span></span>

- **<span data-ttu-id="640c3-887">Транзакции</span><span class="sxs-lookup"><span data-stu-id="640c3-887">Transactions</span></span>**

     <span data-ttu-id="640c3-888">Теперь можно включить идентификатор распределенной транзакции для транзакций, вызвавших создание исключения, производного от <xref:System.Transactions.TransactionException>.</span><span class="sxs-lookup"><span data-stu-id="640c3-888">You can now include the distributed transaction identifier for the transaction that has caused an exception derived from <xref:System.Transactions.TransactionException> to be thrown.</span></span> <span data-ttu-id="640c3-889">Это можно сделать, добавив следующий ключ в раздел `appSettings` файла app.config:</span><span class="sxs-lookup"><span data-stu-id="640c3-889">You do this by adding the following key to the `appSettings` section of your app.config file:</span></span>

    ```xml
    <add key="Transactions:IncludeDistributedTransactionIdInExceptionMessage" value="true"/>
    ```

     <span data-ttu-id="640c3-890">Значение по умолчанию — `false`.</span><span class="sxs-lookup"><span data-stu-id="640c3-890">The default value is `false`.</span></span>

- **<span data-ttu-id="640c3-891">Сетевое взаимодействие</span><span class="sxs-lookup"><span data-stu-id="640c3-891">Networking</span></span>**

    - **<span data-ttu-id="640c3-892">Повторное использование сокета</span><span class="sxs-lookup"><span data-stu-id="640c3-892">Socket reuse</span></span>**

         <span data-ttu-id="640c3-893">Windows 10 включает новый алгоритм сетевых подключений с высокой масштабируемостью, который повышает эффективность использования ресурсов компьютера путем повторного использования локальных портов для исходящих TCP-подключений.</span><span class="sxs-lookup"><span data-stu-id="640c3-893">Windows 10 includes a new high-scalability networking algorithm that makes better use of machine resources by reusing local ports for outbound TCP connections.</span></span> <span data-ttu-id="640c3-894">.NET Framework 4.6 поддерживает новый алгоритм, который позволяет приложениям .NET воспользоваться преимуществами нового режима работы.</span><span class="sxs-lookup"><span data-stu-id="640c3-894">The .NET Framework 4.6 supports the new algorithm, enabling .NET apps to take advantage of the new behavior.</span></span> <span data-ttu-id="640c3-895">В предыдущих версиях Windows существовало искусственно заданное ограничение числа параллельных подключений (обычно 16 384, размер динамического диапазона портов по умолчанию), которое могло ограничивать масштабируемость службы, вызывая нехватку портов при высокой загрузке.</span><span class="sxs-lookup"><span data-stu-id="640c3-895">In previous versions of Windows, there was an artificial concurrent connection limit (typically 16,384, the default size of the dynamic port range), which could limit the scalability of a service by causing port exhaustion when under load.</span></span>

         <span data-ttu-id="640c3-896">В [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] добавлены два новых API, которые обеспечивают повторное использование портов и эффективно снимают ограничение параллельных подключений в 64 000.</span><span class="sxs-lookup"><span data-stu-id="640c3-896">In the [!INCLUDE[net_v46](../../../includes/net-v46-md.md)], two new APIs have been added to enable port reuse, which effectively removes the 64K limit on concurrent connections:</span></span>

        - <span data-ttu-id="640c3-897">Значение перечисления <xref:System.Net.Sockets.SocketOptionName?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-897">The <xref:System.Net.Sockets.SocketOptionName?displayProperty=nameWithType> enumeration value.</span></span>

        - <span data-ttu-id="640c3-898">Свойство <xref:System.Net.ServicePointManager.ReusePort%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-898">The <xref:System.Net.ServicePointManager.ReusePort%2A?displayProperty=nameWithType> property.</span></span>

         <span data-ttu-id="640c3-899">По умолчанию свойство <xref:System.Net.ServicePointManager.ReusePort%2A?displayProperty=nameWithType> имеет значение `false`, если в качестве значения `HWRPortReuseOnSocketBind` раздела реестра `HKLM\SOFTWARE\Microsoft\.NETFramework\v4.0.30319` не задано 0x1.</span><span class="sxs-lookup"><span data-stu-id="640c3-899">By default, the <xref:System.Net.ServicePointManager.ReusePort%2A?displayProperty=nameWithType> property is `false` unless the `HWRPortReuseOnSocketBind` value of the `HKLM\SOFTWARE\Microsoft\.NETFramework\v4.0.30319` registry key is set to 0x1.</span></span> <span data-ttu-id="640c3-900">Чтобы включить повторное использование локальных портов для HTTP-подключений, задайте для свойства <xref:System.Net.ServicePointManager.ReusePort%2A?displayProperty=nameWithType> значение `true`.</span><span class="sxs-lookup"><span data-stu-id="640c3-900">To enable local port reuse on HTTP connections, set the <xref:System.Net.ServicePointManager.ReusePort%2A?displayProperty=nameWithType> property to `true`.</span></span> <span data-ttu-id="640c3-901">В результате все исходящие подключения сокета TCP от <xref:System.Net.Http.HttpClient> и <xref:System.Net.HttpWebRequest> будут использовать новый параметр сокета Windows 10, [SO_REUSE_UNICASTPORT](/windows/desktop/WinSock/sol-socket-socket-options), который обеспечивает повторное использование локальных портов.</span><span class="sxs-lookup"><span data-stu-id="640c3-901">This causes all outgoing TCP socket connections from <xref:System.Net.Http.HttpClient> and <xref:System.Net.HttpWebRequest> to use a new Windows 10 socket option, [SO_REUSE_UNICASTPORT](/windows/desktop/WinSock/sol-socket-socket-options), that enables local port reuse.</span></span>

         <span data-ttu-id="640c3-902">Разработчики, создающие приложения, работающие только с сокетами, могут указать параметр <xref:System.Net.Sockets.SocketOptionName?displayProperty=nameWithType> при вызове такого метода, как <xref:System.Net.Sockets.Socket.SetSocketOption%2A?displayProperty=nameWithType>, чтобы исходящие сокеты повторно использовали локальные порты во время привязки.</span><span class="sxs-lookup"><span data-stu-id="640c3-902">Developers writing a sockets-only application can specify the <xref:System.Net.Sockets.SocketOptionName?displayProperty=nameWithType> option when calling a method such as <xref:System.Net.Sockets.Socket.SetSocketOption%2A?displayProperty=nameWithType> so that outbound sockets reuse local ports during binding.</span></span>

    - **<span data-ttu-id="640c3-903">Поддержка международных доменных имен и PunyCode</span><span class="sxs-lookup"><span data-stu-id="640c3-903">Support for international domain names and PunyCode</span></span>**

         <span data-ttu-id="640c3-904">В класс <xref:System.Uri> добавлено новое свойство <xref:System.Uri.IdnHost%2A>, обеспечивающее более эффективную поддержку международных доменных имен и PunyCode.</span><span class="sxs-lookup"><span data-stu-id="640c3-904">A new property, <xref:System.Uri.IdnHost%2A>, has been added to the <xref:System.Uri> class to better support international domain names and PunyCode.</span></span>

- **<span data-ttu-id="640c3-905">Изменение размеров элементов управления Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="640c3-905">Resizing in Windows Forms controls.</span></span>**

     <span data-ttu-id="640c3-906">Эта функция была расширена в [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] и включает типы <xref:System.Windows.Forms.DomainUpDown>, <xref:System.Windows.Forms.NumericUpDown>, <xref:System.Windows.Forms.DataGridViewComboBoxColumn>, <xref:System.Windows.Forms.DataGridViewColumn> и <xref:System.Windows.Forms.ToolStripSplitButton>, а также прямоугольник, указанный свойством <xref:System.Drawing.Design.PaintValueEventArgs.Bounds%2A>, используемым при рисовании <xref:System.Drawing.Design.UITypeEditor>.</span><span class="sxs-lookup"><span data-stu-id="640c3-906">This feature has been expanded in [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] to include the <xref:System.Windows.Forms.DomainUpDown>, <xref:System.Windows.Forms.NumericUpDown>, <xref:System.Windows.Forms.DataGridViewComboBoxColumn>, <xref:System.Windows.Forms.DataGridViewColumn> and <xref:System.Windows.Forms.ToolStripSplitButton> types and the rectangle specified by the <xref:System.Drawing.Design.PaintValueEventArgs.Bounds%2A> property used when drawing a <xref:System.Drawing.Design.UITypeEditor>.</span></span>

     <span data-ttu-id="640c3-907">Это функция, включаемая пользователем.</span><span class="sxs-lookup"><span data-stu-id="640c3-907">This is an opt-in feature.</span></span> <span data-ttu-id="640c3-908">Чтобы ее включить, задайте для элемента `EnableWindowsFormsHighDpiAutoResizing` в файле конфигурации приложения (app.config) значение `true`:</span><span class="sxs-lookup"><span data-stu-id="640c3-908">To enable it, set the `EnableWindowsFormsHighDpiAutoResizing` element to `true` in the application configuration (app.config) file:</span></span>

    ```xml
    <appSettings>
       <add key="EnableWindowsFormsHighDpiAutoResizing" value="true" />
    </appSettings>
    ```

- **<span data-ttu-id="640c3-909">Поддержка кодировок кодовых страниц</span><span class="sxs-lookup"><span data-stu-id="640c3-909">Support for code page encodings</span></span>**

     [!INCLUDE[net_core](../../../includes/net-core-md.md)] <span data-ttu-id="640c3-910">в первую очередь поддерживает кодировки Юникод и по умолчанию предоставляет ограниченную поддержку для кодировок кодовых страниц.</span><span class="sxs-lookup"><span data-stu-id="640c3-910">primarily supports the Unicode encodings and by default provides limited support for code page encodings.</span></span> <span data-ttu-id="640c3-911">Вы можете добавить поддержку для кодировок кодовых страниц, доступных в .NET Framework, но не поддерживаемых в [!INCLUDE[net_core](../../../includes/net-core-md.md)], путем регистрации кодировок кодовых страниц в методе <xref:System.Text.Encoding.RegisterProvider%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-911">You can add support for code page encodings available in the .NET Framework but unsupported in [!INCLUDE[net_core](../../../includes/net-core-md.md)] by registering code page encodings with the <xref:System.Text.Encoding.RegisterProvider%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="640c3-912">Для получения дополнительной информации см. <xref:System.Text.CodePagesEncodingProvider?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-912">For more information, see <xref:System.Text.CodePagesEncodingProvider?displayProperty=nameWithType>.</span></span>

- **<span data-ttu-id="640c3-913">.NET Native</span><span class="sxs-lookup"><span data-stu-id="640c3-913">.NET Native</span></span>**

     <span data-ttu-id="640c3-914">Приложения Windows для Windows 10, ориентированные на [!INCLUDE[net_core](../../../includes/net-core-md.md)] и написанные на языке C# или Visual Basic, могут воспользоваться преимуществами новой технологии, компилирующей приложения в машинный код, а не в IL-код.</span><span class="sxs-lookup"><span data-stu-id="640c3-914">Windows apps for Windows 10 that target [!INCLUDE[net_core](../../../includes/net-core-md.md)] and are written in C# or Visual Basic can take advantage of a new technology that compiles apps to native code rather than IL.</span></span> <span data-ttu-id="640c3-915">Они создают приложения, которым присуща более быстрая загрузка и время выполнения.</span><span class="sxs-lookup"><span data-stu-id="640c3-915">They produce apps characterized by faster startup and execution times.</span></span> <span data-ttu-id="640c3-916">Дополнительные сведения см. в разделе [Компиляция приложений с помощью .NET Native](../net-native/index.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-916">For more information, see [Compiling Apps with .NET Native](../net-native/index.md).</span></span> <span data-ttu-id="640c3-917">Общие сведения о .NET Native и рассмотрение отличий такой компиляции от компиляции JIT и NGEN, а также ее влияние на код см. в разделе [.NET Native и компиляция](../net-native/net-native-and-compilation.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-917">For an overview of .NET Native that examines how it differs from both JIT compilation and NGEN and what that means for your code, see [.NET Native and Compilation](../net-native/net-native-and-compilation.md).</span></span>

     <span data-ttu-id="640c3-918">Приложения по умолчанию компилируются в машинный код при компиляции в Visual Studio 2015 и более поздних версиях.</span><span class="sxs-lookup"><span data-stu-id="640c3-918">Your apps are compiled to native code by default when you compile them with Visual Studio 2015 or later.</span></span> <span data-ttu-id="640c3-919">Дополнительные сведения см. в разделе [Начало работы с .NET Native](../net-native/getting-started-with-net-native.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-919">For more information, see [Getting Started with .NET Native](../net-native/getting-started-with-net-native.md).</span></span>

     <span data-ttu-id="640c3-920">Для поддержки отладки приложений .NET Native в  интерфейс API отладки неуправляемого кода добавлено несколько новых интерфейсов и перечислений.</span><span class="sxs-lookup"><span data-stu-id="640c3-920">To support debugging .NET Native apps, a number of new interfaces and enumerations have been added to the unmanaged debugging API.</span></span> <span data-ttu-id="640c3-921">Дополнительные сведения см. в разделе [Отладка (справочник по неуправляемым API)](../unmanaged-api/debugging/index.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-921">For more information, see the [Debugging (Unmanaged API Reference)](../unmanaged-api/debugging/index.md) topic.</span></span>

- **<span data-ttu-id="640c3-922">Пакеты .NET Framework с открытым исходным кодом</span><span class="sxs-lookup"><span data-stu-id="640c3-922">Open-source .NET Framework packages</span></span>**

     <span data-ttu-id="640c3-923">Пакеты .NET Core, такие как неизменяемые коллекции, [API SIMD](https://go.microsoft.com/fwlink/?LinkID=518639) и API-интерфейсы сетевых подключений, например из пространства имен <xref:System.Net.Http>, теперь доступны в виде пакетов с открытым исходным кодом на сайте [GitHub](https://github.com/).</span><span class="sxs-lookup"><span data-stu-id="640c3-923">.NET Core packages such as the immutable collections, [SIMD APIs](https://go.microsoft.com/fwlink/?LinkID=518639), and networking APIs such as those found in the <xref:System.Net.Http> namespace are now available as open source packages on [GitHub](https://github.com/).</span></span> <span data-ttu-id="640c3-924">Сведения о доступе к этому коду см. в разделе [CoreFx на GitHub](https://github.com/dotnet/corefx).</span><span class="sxs-lookup"><span data-stu-id="640c3-924">To access the code, see [CoreFx on GitHub](https://github.com/dotnet/corefx).</span></span> <span data-ttu-id="640c3-925">Дополнительные сведения и инструкции, как принять участие в этих пакетах, см. в разделе [Ядро .NET и открытый исходный код](../get-started/net-core-and-open-source.md)[домашней странице .NET на GitHub](https://github.com/dotnet/home).</span><span class="sxs-lookup"><span data-stu-id="640c3-925">For more information and how to contribute to these packages, see [.NET Core and Open-Source](../get-started/net-core-and-open-source.md), [.NET Home Page on GitHub](https://github.com/dotnet/home).</span></span>

<a name="v452" />

## <a name="whats-new-in-the-net-framework-452"></a><span data-ttu-id="640c3-926">Новые возможности .NET Framework 4.5.2</span><span class="sxs-lookup"><span data-stu-id="640c3-926">What's new in the .NET Framework 4.5.2</span></span>

- **<span data-ttu-id="640c3-927">Новые API для приложений ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="640c3-927">New APIs for ASP.NET apps.</span></span>** <span data-ttu-id="640c3-928">Новые методы <xref:System.Web.HttpResponse.AddOnSendingHeaders%2A?displayProperty=nameWithType> и <xref:System.Web.HttpResponseBase.AddOnSendingHeaders%2A?displayProperty=nameWithType> позволяют проверять и изменять коды состояния и заголовки ответов при передаче ответа в клиентское приложение.</span><span class="sxs-lookup"><span data-stu-id="640c3-928">The new <xref:System.Web.HttpResponse.AddOnSendingHeaders%2A?displayProperty=nameWithType> and <xref:System.Web.HttpResponseBase.AddOnSendingHeaders%2A?displayProperty=nameWithType> methods let you inspect and modify response headers and status code as the response is being flushed to the client app.</span></span> <span data-ttu-id="640c3-929">Эти методы можно использовать вместо событий <xref:System.Web.HttpApplication.PreSendRequestHeaders> и <xref:System.Web.HttpApplication.PreSendRequestContent>; они более эффективны и надежны.</span><span class="sxs-lookup"><span data-stu-id="640c3-929">Consider using these methods instead of the <xref:System.Web.HttpApplication.PreSendRequestHeaders> and <xref:System.Web.HttpApplication.PreSendRequestContent> events; they are more efficient and reliable.</span></span>

     <span data-ttu-id="640c3-930">Метод <xref:System.Web.Hosting.HostingEnvironment.QueueBackgroundWorkItem%2A?displayProperty=nameWithType> позволяет планировать небольшие фоновые рабочие элементы.</span><span class="sxs-lookup"><span data-stu-id="640c3-930">The <xref:System.Web.Hosting.HostingEnvironment.QueueBackgroundWorkItem%2A?displayProperty=nameWithType> method lets you schedule small background work items.</span></span> <span data-ttu-id="640c3-931">ASP.NET отслеживает эти элементы и блокирует резкое прерывание службами IIS рабочего процесса до выполнения всех фоновых рабочих элементов.</span><span class="sxs-lookup"><span data-stu-id="640c3-931">ASP.NET tracks these items and prevents IIS from abruptly terminating the worker process until all background work items have completed.</span></span> <span data-ttu-id="640c3-932">Этот метод нельзя вызвать за пределами управляемого домена приложений ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="640c3-932">This method can't be called outside an ASP.NET managed app domain.</span></span>

     <span data-ttu-id="640c3-933">Новые свойства <xref:System.Web.HttpResponse.HeadersWritten?displayProperty=nameWithType> и <xref:System.Web.HttpResponseBase.HeadersWritten?displayProperty=nameWithType> возвращают логические значения, которые указывают, были ли записаны заголовки ответов.</span><span class="sxs-lookup"><span data-stu-id="640c3-933">The new <xref:System.Web.HttpResponse.HeadersWritten?displayProperty=nameWithType> and <xref:System.Web.HttpResponseBase.HeadersWritten?displayProperty=nameWithType> properties return Boolean values that indicate whether the response headers have been written.</span></span> <span data-ttu-id="640c3-934">Эти свойства можно использовать, чтобы гарантировать, что вызовы API, например <xref:System.Web.HttpResponse.StatusCode%2A?displayProperty=nameWithType> (создает исключения, если заголовки записаны), будут выполняться успешно.</span><span class="sxs-lookup"><span data-stu-id="640c3-934">You can use these properties to make sure that calls to APIs such as <xref:System.Web.HttpResponse.StatusCode%2A?displayProperty=nameWithType> (which throw exceptions if the headers have been written) will succeed.</span></span>

- **<span data-ttu-id="640c3-935">Изменение размеров элементов управления Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="640c3-935">Resizing in Windows Forms controls.</span></span>** <span data-ttu-id="640c3-936">Эта функция была расширена.</span><span class="sxs-lookup"><span data-stu-id="640c3-936">This feature has been expanded.</span></span> <span data-ttu-id="640c3-937">Теперь системный параметр DPI можно использовать для изменения размера компонентов следующих дополнительных элементов управления (например, стрелки, раскрывающей поле со списком):</span><span class="sxs-lookup"><span data-stu-id="640c3-937">You can now use the system DPI setting to resize components of the following additional controls (for example, the drop-down arrow in combo boxes):</span></span>

    - <xref:System.Windows.Forms.ComboBox>
    - <xref:System.Windows.Forms.ToolStripComboBox>
    - <xref:System.Windows.Forms.ToolStripMenuItem>
    - <xref:System.Windows.Forms.Cursor>
    - <xref:System.Windows.Forms.DataGridView>
    - <xref:System.Windows.Forms.DataGridViewComboBoxColumn>

     <span data-ttu-id="640c3-938">Это функция, включаемая пользователем.</span><span class="sxs-lookup"><span data-stu-id="640c3-938">This is an opt-in feature.</span></span> <span data-ttu-id="640c3-939">Чтобы ее включить, задайте для элемента `EnableWindowsFormsHighDpiAutoResizing` в файле конфигурации приложения (app.config) значение `true`:</span><span class="sxs-lookup"><span data-stu-id="640c3-939">To enable it, set the `EnableWindowsFormsHighDpiAutoResizing` element to `true` in the application configuration (app.config) file:</span></span>

    ```xml
    <appSettings>
       <add key="EnableWindowsFormsHighDpiAutoResizing" value="true" />
    </appSettings>
    ```

- **<span data-ttu-id="640c3-940">Новая функция рабочего процесса.</span><span class="sxs-lookup"><span data-stu-id="640c3-940">New workflow feature.</span></span>** <span data-ttu-id="640c3-941">Диспетчер ресурсов, использующий метод <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A> (и, следовательно, реализующий интерфейс <xref:System.Transactions.IPromotableSinglePhaseNotification>), может использовать новый метод <xref:System.Transactions.Transaction.PromoteAndEnlistDurable%2A?displayProperty=nameWithType> для запроса следующих операций:</span><span class="sxs-lookup"><span data-stu-id="640c3-941">A resource manager that's using the <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A> method (and therefore implementing the <xref:System.Transactions.IPromotableSinglePhaseNotification> interface) can use the new <xref:System.Transactions.Transaction.PromoteAndEnlistDurable%2A?displayProperty=nameWithType> method to request the following:</span></span>

    - <span data-ttu-id="640c3-942">повышение транзакции до уровня "координатор распределенных транзакций (Майкрософт)" (MSDTC);</span><span class="sxs-lookup"><span data-stu-id="640c3-942">Promote the transaction to a Microsoft Distributed Transaction Coordinator (MSDTC) transaction.</span></span>

    - <span data-ttu-id="640c3-943">замена <xref:System.Transactions.IPromotableSinglePhaseNotification> перечислением<xref:System.Transactions.ISinglePhaseNotification>, которое является устойчивым перечислением, поддерживающим одноэтапные фиксации.</span><span class="sxs-lookup"><span data-stu-id="640c3-943">Replace <xref:System.Transactions.IPromotableSinglePhaseNotification> with an <xref:System.Transactions.ISinglePhaseNotification>, which is a durable enlistment that supports single phase commits.</span></span>

     <span data-ttu-id="640c3-944">Эту операцию можно выполнить в том же домене приложения; для повышения уровня не требуется написание дополнительного неуправляемого кода для взаимодействия с MSDTC.</span><span class="sxs-lookup"><span data-stu-id="640c3-944">This can be done within the same app domain, and doesn't require any extra unmanaged code to interact with MSDTC to perform the promotion.</span></span> <span data-ttu-id="640c3-945">Новый метод можно вызвать только при наличии ожидающего выполнения вызова из <xref:System.Transactions?displayProperty=nameWithType> к методу <xref:System.Transactions.IPromotableSinglePhaseNotification>`Promote`, который реализуется перечислением, поддерживающим повышение уровня.</span><span class="sxs-lookup"><span data-stu-id="640c3-945">The new method can be called only when there's an outstanding call from <xref:System.Transactions?displayProperty=nameWithType> to the <xref:System.Transactions.IPromotableSinglePhaseNotification>`Promote` method that's implemented by the promotable enlistment.</span></span>

- **<span data-ttu-id="640c3-946">Усовершенствования профилирования.</span><span class="sxs-lookup"><span data-stu-id="640c3-946">Profiling improvements.</span></span>** <span data-ttu-id="640c3-947">Следующие новые неуправляемые API профилирования обеспечивают более надежное профилирование:</span><span class="sxs-lookup"><span data-stu-id="640c3-947">The following new unmanaged profiling APIs provide more robust profiling:</span></span>

    - [<span data-ttu-id="640c3-948">Структура COR_PRF_ASSEMBLY_REFERENCE_INFO</span><span class="sxs-lookup"><span data-stu-id="640c3-948">COR_PRF_ASSEMBLY_REFERENCE_INFO Structure</span></span>](../unmanaged-api/profiling/cor-prf-assembly-reference-info-structure.md)
    - [<span data-ttu-id="640c3-949">Перечисление COR_PRF_HIGH_MONITOR</span><span class="sxs-lookup"><span data-stu-id="640c3-949">COR_PRF_HIGH_MONITOR Enumeration</span></span>](../unmanaged-api/profiling/cor-prf-high-monitor-enumeration.md)
    - [<span data-ttu-id="640c3-950">Метод GetAssemblyReferences</span><span class="sxs-lookup"><span data-stu-id="640c3-950">GetAssemblyReferences Method</span></span>](../unmanaged-api/profiling/icorprofilercallback6-getassemblyreferences-method.md)
    - [<span data-ttu-id="640c3-951">Метод GetEventMask2</span><span class="sxs-lookup"><span data-stu-id="640c3-951">GetEventMask2 Method</span></span>](../unmanaged-api/profiling/icorprofilerinfo5-geteventmask2-method.md)
    - [<span data-ttu-id="640c3-952">Метод SetEventMask2</span><span class="sxs-lookup"><span data-stu-id="640c3-952">SetEventMask2 Method</span></span>](../unmanaged-api/profiling/icorprofilerinfo5-seteventmask2-method.md)
    - [<span data-ttu-id="640c3-953">Метод AddAssemblyReference</span><span class="sxs-lookup"><span data-stu-id="640c3-953">AddAssemblyReference Method</span></span>](../unmanaged-api/profiling/icorprofilerassemblyreferenceprovider-addassemblyreference-method.md)

     <span data-ttu-id="640c3-954">Предыдущие реализации `ICorProfiler` поддерживали отложенную загрузку зависимых сборок.</span><span class="sxs-lookup"><span data-stu-id="640c3-954">Previous `ICorProfiler` implementations supported lazy loading of dependent assemblies.</span></span> <span data-ttu-id="640c3-955">Новые API профилирования требуют немедленной доступности для загрузки вставляемых профилировщиком зависимых сборок вместо их загрузки после полной инициализации приложения.</span><span class="sxs-lookup"><span data-stu-id="640c3-955">The new profiling APIs require dependent assemblies that are injected by the profiler to be loadable immediately, instead of being loaded after the app is fully initialized.</span></span> <span data-ttu-id="640c3-956">Это изменение не влияет на пользователей существующих API `ICorProfiler`.</span><span class="sxs-lookup"><span data-stu-id="640c3-956">This change doesn't affect users of the existing `ICorProfiler` APIs.</span></span>

- **<span data-ttu-id="640c3-957">Усовершенствования отладки.</span><span class="sxs-lookup"><span data-stu-id="640c3-957">Debugging improvements.</span></span>** <span data-ttu-id="640c3-958">Следующие новые интерфейсы API отладки неуправляемого кода обеспечивают более эффективную интеграцию с профилировщиком.</span><span class="sxs-lookup"><span data-stu-id="640c3-958">The following new unmanaged debugging APIs provide better integration with a profiler.</span></span> <span data-ttu-id="640c3-959">Теперь можно получить доступ к метаданным, вставленным профилировщиком, а также к локальным переменным и коду, созданным запросами компилировщика ReJIT во время отладки дампа.</span><span class="sxs-lookup"><span data-stu-id="640c3-959">You can now access metadata inserted by the profiler as well as local variables and code produced by compiler ReJIT requests when dump debugging.</span></span>

    - [<span data-ttu-id="640c3-960">Метод SetWriteableMetadataUpdateMode</span><span class="sxs-lookup"><span data-stu-id="640c3-960">SetWriteableMetadataUpdateMode Method</span></span>](../unmanaged-api/debugging/icordebugprocess7-setwriteablemetadataupdatemode-method.md)
    - [<span data-ttu-id="640c3-961">Метод EnumerateLocalVariablesEx</span><span class="sxs-lookup"><span data-stu-id="640c3-961">EnumerateLocalVariablesEx Method</span></span>](../unmanaged-api/debugging/icordebugilframe4-enumeratelocalvariablesex-method.md)
    - [<span data-ttu-id="640c3-962">Метод GetLocalVariableEx</span><span class="sxs-lookup"><span data-stu-id="640c3-962">GetLocalVariableEx Method</span></span>](../unmanaged-api/debugging/icordebugilframe4-getlocalvariableex-method.md)
    - [<span data-ttu-id="640c3-963">Метод GetCodeEx</span><span class="sxs-lookup"><span data-stu-id="640c3-963">GetCodeEx Method</span></span>](../unmanaged-api/debugging/icordebugilframe4-getcodeex-method.md)
    - [<span data-ttu-id="640c3-964">Метод GetActiveReJitRequestILCode</span><span class="sxs-lookup"><span data-stu-id="640c3-964">GetActiveReJitRequestILCode Method</span></span>](../unmanaged-api/debugging/icordebugfunction3-getactiverejitrequestilcode-method.md)
    - [<span data-ttu-id="640c3-965">Метод GetInstrumentedILMap</span><span class="sxs-lookup"><span data-stu-id="640c3-965">GetInstrumentedILMap Method</span></span>](../unmanaged-api/debugging/icordebugilcode2-getinstrumentedilmap-method.md)

- **<span data-ttu-id="640c3-966">Изменения трассировки событий.</span><span class="sxs-lookup"><span data-stu-id="640c3-966">Event tracing changes.</span></span>** <span data-ttu-id="640c3-967">Платформа .NET Framework 4.5.2 поддерживает внепроцессную трассировку действий, основанную на трассировке событий Windows (ETW), для более крупных контактных зон.</span><span class="sxs-lookup"><span data-stu-id="640c3-967">The .NET Framework 4.5.2 enables out-of-process, Event Tracing for Windows (ETW)-based activity tracing for a larger surface area.</span></span> <span data-ttu-id="640c3-968">Это позволяет поставщикам решений автоматического управления питанием (АРМ) предлагать облегченные средства, точно отслеживающие стоимость отдельных запросов и действий в разных потоках.</span><span class="sxs-lookup"><span data-stu-id="640c3-968">This enables Advanced Power Management (APM) vendors to provide lightweight tools that accurately track the costs of individual requests and activities that cross threads.</span></span>  <span data-ttu-id="640c3-969">Эти события вызываются только при включении их контроллерами ETW. Таким образом, изменения не влияют на ранее написанный код ETW или код, который выполняется при отключенной трассировке ETW.</span><span class="sxs-lookup"><span data-stu-id="640c3-969">These events are raised only when ETW controllers enable them; therefore, the changes don't affect previously written ETW code or code that runs with ETW disabled.</span></span>

- **<span data-ttu-id="640c3-970">Повышение уровня транзакции и преобразование ее в устойчивое зачисление</span><span class="sxs-lookup"><span data-stu-id="640c3-970">Promoting a transaction and converting it to a durable enlistment</span></span>**

     <xref:System.Transactions.Transaction.PromoteAndEnlistDurable%2A?displayProperty=nameWithType> <span data-ttu-id="640c3-971">— это новый API, добавленный в .NET Framework 4.5.2 и 4.6.</span><span class="sxs-lookup"><span data-stu-id="640c3-971">is a new API added to the .NET Framework 4.5.2 and 4.6:</span></span>

    ```csharp
    [System.Security.Permissions.PermissionSetAttribute(System.Security.Permissions.SecurityAction.LinkDemand, Name = "FullTrust")]
    public Enlistment PromoteAndEnlistDurable(Guid resourceManagerIdentifier,
                                              IPromotableSinglePhaseNotification promotableNotification,
                                              ISinglePhaseNotification enlistmentNotification,
                                              EnlistmentOptions enlistmentOptions)
    ```

     <span data-ttu-id="640c3-972">Метод может использоваться зачислением, ранее созданным <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A?displayProperty=nameWithType> в ответ на метод <xref:System.Transactions.ITransactionPromoter.Promote%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-972">The method may be used by an enlistment that was previously created by <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A?displayProperty=nameWithType> in response to the <xref:System.Transactions.ITransactionPromoter.Promote%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="640c3-973">Он запрашивает у `System.Transactions` повышение уровня транзакции до транзакции MSDTC и "преобразование" зачисления, допускающего повышение уровня, в зачисление устойчивых ресурсов.</span><span class="sxs-lookup"><span data-stu-id="640c3-973">It asks `System.Transactions` to promote the transaction to an MSDTC transaction and to "convert" the promotable enlistment to a durable enlistment.</span></span> <span data-ttu-id="640c3-974">После успешного завершения этого метода `System.Transactions` больше не будет ссылаться на интерфейс <xref:System.Transactions.IPromotableSinglePhaseNotification>, и все будущие уведомления будут поступать в предоставленном интерфейсе <xref:System.Transactions.ISinglePhaseNotification>.</span><span class="sxs-lookup"><span data-stu-id="640c3-974">After this method completes successfully, the <xref:System.Transactions.IPromotableSinglePhaseNotification> interface will no longer be referenced by `System.Transactions`, and any future notifications will arrive on the provided <xref:System.Transactions.ISinglePhaseNotification> interface.</span></span> <span data-ttu-id="640c3-975">Рассматриваемое зачисление должно работать как зачисление устойчивых ресурсов, поддерживая ведение журнала транзакций и восстановления.</span><span class="sxs-lookup"><span data-stu-id="640c3-975">The enlistment in question must act as a durable enlistment, supporting transaction logging and recovery.</span></span> <span data-ttu-id="640c3-976">Подробные сведения см. в разделе <xref:System.Transactions.Transaction.EnlistDurable%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-976">Refer to <xref:System.Transactions.Transaction.EnlistDurable%2A?displayProperty=nameWithType> for details.</span></span> <span data-ttu-id="640c3-977">Кроме того, зачисление должно поддерживать <xref:System.Transactions.ISinglePhaseNotification>.</span><span class="sxs-lookup"><span data-stu-id="640c3-977">In addition, the enlistment must support <xref:System.Transactions.ISinglePhaseNotification>.</span></span>  <span data-ttu-id="640c3-978">Этот метод может вызываться *только* во время обработки вызова <xref:System.Transactions.ITransactionPromoter.Promote%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-978">This method can *only* be called while processing an <xref:System.Transactions.ITransactionPromoter.Promote%2A?displayProperty=nameWithType> call.</span></span> <span data-ttu-id="640c3-979">Если это не так, создается исключение <xref:System.Transactions.TransactionException>.</span><span class="sxs-lookup"><span data-stu-id="640c3-979">If that is not the case, a <xref:System.Transactions.TransactionException> exception is thrown.</span></span>

<a name="v451" />

## <a name="whats-new-in-the-net-framework-451"></a><span data-ttu-id="640c3-980">Новые возможности .NET Framework 4.5.1</span><span class="sxs-lookup"><span data-stu-id="640c3-980">What's new in the .NET Framework 4.5.1</span></span>

<span data-ttu-id="640c3-981">**Обновления апреля 2014 г.**:</span><span class="sxs-lookup"><span data-stu-id="640c3-981">**April 2014 updates**:</span></span>

- <span data-ttu-id="640c3-982">[Обновление 2 для Visual Studio 2013](https://go.microsoft.com/fwlink/p/?LinkId=393658) включает обновления для шаблонов переносимой библиотеки классов для поддержки следующих сценариев:</span><span class="sxs-lookup"><span data-stu-id="640c3-982">[Visual Studio 2013 Update 2](https://go.microsoft.com/fwlink/p/?LinkId=393658) includes updates to the Portable Class Library templates to support these scenarios:</span></span>

    - <span data-ttu-id="640c3-983">Возможность использовать API среды выполнения Windows в переносимых библиотеках, предназначенных для Windows 8.1, Windows Phone 8.1 и Windows Phone Silverlight 8.1.</span><span class="sxs-lookup"><span data-stu-id="640c3-983">You can use Windows Runtime APIs in portable libraries that target Windows 8.1, Windows Phone 8.1, and Windows Phone Silverlight 8.1.</span></span>

    - <span data-ttu-id="640c3-984">возможность включить XAML-код (типы Windows.UI.XAML) в переносимые библиотеки, предназначенные для Windows 8.1 или Windows Phone 8.1.</span><span class="sxs-lookup"><span data-stu-id="640c3-984">You can include XAML (Windows.UI.XAML types) in portable libraries when you target Windows 8.1 or Windows Phone 8.1.</span></span> <span data-ttu-id="640c3-985">Поддерживаются следующие шаблоны XAML:  "Пустая страница", "Словарь ресурсов", "Элемент управления-шаблон" и "Пользовательский элемент управления".</span><span class="sxs-lookup"><span data-stu-id="640c3-985">The following XAML templates are supported:  Blank Page, Resource Dictionary, Templated Control, and User Control.</span></span>

    - <span data-ttu-id="640c3-986">Можно создать переносной компонент среды выполнения Windows (WINMD-файл) для использования в приложениях магазинов, предназначенных для Windows 8.1 и Windows Phone 8.1.</span><span class="sxs-lookup"><span data-stu-id="640c3-986">You can create a portable Windows Runtime component (.winmd file) for use in Store apps that target Windows 8.1 and Windows Phone 8.1.</span></span>

    - <span data-ttu-id="640c3-987">Можно изменить целевую платформу библиотеки классов Магазина Windows или Магазина Windows Phone, такой как переносимая библиотека классов.</span><span class="sxs-lookup"><span data-stu-id="640c3-987">You can retarget a Windows Store or Windows Phone Store class library like a Portable Class Library.</span></span>

     <span data-ttu-id="640c3-988">Дополнительные сведения об этих изменениях см. в разделе [Переносимая библиотека классов](../../standard/cross-platform/cross-platform-development-with-the-portable-class-library.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-988">For more information about these changes, see [Portable Class Library](../../standard/cross-platform/cross-platform-development-with-the-portable-class-library.md).</span></span>

- <span data-ttu-id="640c3-989">Набор содержимого .NET Framework теперь включает документацию для [!INCLUDE[net_native](../../../includes/net-native-md.md)], технологии предварительной компиляции для сборки и развертывания приложений Windows.</span><span class="sxs-lookup"><span data-stu-id="640c3-989">The .NET Framework content set now includes documentation for [!INCLUDE[net_native](../../../includes/net-native-md.md)], which is a precompilation technology for building and deploying Windows apps.</span></span> [!INCLUDE[net_native](../../../includes/net-native-md.md)] <span data-ttu-id="640c3-990">компилирует приложения напрямую в машинный код, а не в промежуточный язык (IL), что повышает производительность.</span><span class="sxs-lookup"><span data-stu-id="640c3-990">compiles your apps directly to native code, rather than to intermediate language (IL), for better performance.</span></span> <span data-ttu-id="640c3-991">Подробные сведения см. в разделе [Компиляция приложений с помощью .NET Native](../net-native/index.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-991">For details, see [Compiling Apps with .NET Native](../net-native/index.md).</span></span>

- <span data-ttu-id="640c3-992">На странице [.NET Framework Reference Source](https://referencesource.microsoft.com/) предоставляются новые возможности навигации и расширенные функции.</span><span class="sxs-lookup"><span data-stu-id="640c3-992">The [.NET Framework Reference Source](https://referencesource.microsoft.com/) provides a new browsing experience and enhanced functionality.</span></span> <span data-ttu-id="640c3-993">Теперь можно искать исходный код .NET Framework в Интернете, [загрузить справочник](https://referencesource.microsoft.com/download.html) для автономной работы и пошагово просматривать источники (включая исправления и обновления) во время отладки.</span><span class="sxs-lookup"><span data-stu-id="640c3-993">You can now browse through the .NET Framework source code online, [download the reference](https://referencesource.microsoft.com/download.html) for offline viewing, and step through the sources (including patches and updates) during debugging.</span></span> <span data-ttu-id="640c3-994">Дополнительные сведения см. в записи блога [Новый облик .NET Reference Source](https://devblogs.microsoft.com/dotnet/a-new-look-for-net-reference-source/).</span><span class="sxs-lookup"><span data-stu-id="640c3-994">For more information, see the blog entry [A new look for .NET Reference Source](https://devblogs.microsoft.com/dotnet/a-new-look-for-net-reference-source/).</span></span>

<span data-ttu-id="640c3-995">Основные новые функции и улучшения в .NET Framework 4.5.1 включают следующие:</span><span class="sxs-lookup"><span data-stu-id="640c3-995">Core new features and enhancements in the .NET Framework 4.5.1 include:</span></span>

- <span data-ttu-id="640c3-996">Автоматическая переадресация привязки для сборок.</span><span class="sxs-lookup"><span data-stu-id="640c3-996">Automatic binding redirection for assemblies.</span></span> <span data-ttu-id="640c3-997">Начиная с Visual Studio 2013 при компиляции приложения для [!INCLUDE[net_v451](../../../includes/net-v451-md.md)] в файл конфигурации приложения может добавляться переадресация привязок, если приложение или его компоненты ссылаются на несколько версий одной сборки.</span><span class="sxs-lookup"><span data-stu-id="640c3-997">Starting with Visual Studio 2013, when you compile an app that targets the [!INCLUDE[net_v451](../../../includes/net-v451-md.md)], binding redirects may be added to the app configuration file if your app or its components reference multiple versions of the same assembly.</span></span> <span data-ttu-id="640c3-998">Включить эту функцию также можно для проектов, предназначенных для более ранних версий платформы .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="640c3-998">You can also enable this feature for projects that target older versions of the .NET Framework.</span></span> <span data-ttu-id="640c3-999">Дополнительные сведения см. в разделе [Как Включение и отключение автоматического перенаправления привязки](../configure-apps/how-to-enable-and-disable-automatic-binding-redirection.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-999">For more information, see [How to: Enable and Disable Automatic Binding Redirection](../configure-apps/how-to-enable-and-disable-automatic-binding-redirection.md).</span></span>

- <span data-ttu-id="640c3-1000">Возможность сбора диагностической информации, чтобы помочь разработчикам повысить производительность серверных и облачных приложений.</span><span class="sxs-lookup"><span data-stu-id="640c3-1000">Ability to collect diagnostics information to help developers improve the performance of server and cloud applications.</span></span> <span data-ttu-id="640c3-1001">Дополнительные сведения см. в описании методов <xref:System.Diagnostics.Tracing.EventSource.WriteEventWithRelatedActivityId%2A> и <xref:System.Diagnostics.Tracing.EventSource.WriteEventWithRelatedActivityIdCore%2A> класса <xref:System.Diagnostics.Tracing.EventSource>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1001">For more information, see the <xref:System.Diagnostics.Tracing.EventSource.WriteEventWithRelatedActivityId%2A> and <xref:System.Diagnostics.Tracing.EventSource.WriteEventWithRelatedActivityIdCore%2A> methods in the <xref:System.Diagnostics.Tracing.EventSource> class.</span></span>

- <span data-ttu-id="640c3-1002">Возможность явно уплотнять кучу больших объектов во время сборки мусора.</span><span class="sxs-lookup"><span data-stu-id="640c3-1002">Ability to explicitly compact the large object heap (LOH) during garbage collection.</span></span> <span data-ttu-id="640c3-1003">Дополнительные сведения см. в описании свойства <xref:System.Runtime.GCSettings.LargeObjectHeapCompactionMode%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1003">For more information, see the <xref:System.Runtime.GCSettings.LargeObjectHeapCompactionMode%2A?displayProperty=nameWithType> property.</span></span>

- <span data-ttu-id="640c3-1004">Дополнительные улучшения производительности, например приостановка приложений ASP.NET, усовершенствования многоядерного JIT и более быстрый запуск приложений после обновления платформы .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="640c3-1004">Additional performance improvements such as ASP.NET app suspension, multi-core JIT improvements, and faster app startup after a .NET Framework update.</span></span> <span data-ttu-id="640c3-1005">Дополнительные сведения см. в [объявлении о выходе .NET Framework 4.5.1](https://devblogs.microsoft.com/dotnet/announcing-the-net-framework-4-5-1-preview/) и в публикации в блоге [о приостановке приложения ASP.NET](https://devblogs.microsoft.com/dotnet/asp-net-app-suspend-responsive-shared-net-web-hosting/).</span><span class="sxs-lookup"><span data-stu-id="640c3-1005">For details, see the [.NET Framework 4.5.1 announcement](https://devblogs.microsoft.com/dotnet/announcing-the-net-framework-4-5-1-preview/) and the [ASP.NET app suspend](https://devblogs.microsoft.com/dotnet/asp-net-app-suspend-responsive-shared-net-web-hosting/) blog post.</span></span>

<span data-ttu-id="640c3-1006">Усовершенствования в Windows Forms включают следующие:</span><span class="sxs-lookup"><span data-stu-id="640c3-1006">Improvements to Windows Forms include:</span></span>

- <span data-ttu-id="640c3-1007">Изменение размеров элементов управления Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="640c3-1007">Resizing in Windows Forms controls.</span></span> <span data-ttu-id="640c3-1008">Системный параметр DPI можно использовать для изменения размера компонентов элементов управления (например, значков, которые отображаются в сетке свойств) путем явного включения с помощью записи в файле конфигурации приложения (app.config) нужного приложения.</span><span class="sxs-lookup"><span data-stu-id="640c3-1008">You can use the system DPI setting to resize components of controls (for example, the icons that appear in a property grid) by opting in with an entry in the application configuration file (app.config) for your app.</span></span> <span data-ttu-id="640c3-1009">Эта функция в настоящее время поддерживается для следующих элементов управления Windows Forms:</span><span class="sxs-lookup"><span data-stu-id="640c3-1009">This feature is currently supported in the following Windows Forms controls:</span></span>

    - <xref:System.Windows.Forms.PropertyGrid>
    - <xref:System.Windows.Forms.TreeView>
    - <span data-ttu-id="640c3-1010">Поддерживаются некоторые аспекты <xref:System.Windows.Forms.DataGridView> (дополнительные поддерживаемые элементы управления см. в разделе о [новых возможностях в версии 4.5.2](#v452))</span><span class="sxs-lookup"><span data-stu-id="640c3-1010">Some aspects of the <xref:System.Windows.Forms.DataGridView> (see [new features in 4.5.2](#v452) for additional controls supported)</span></span>

     <span data-ttu-id="640c3-1011">Чтобы включить эту функцию, добавьте новый элемент \<appSettings> в файл конфигурации (app.config) и задайте для элемента `EnableWindowsFormsHighDpiAutoResizing` значение `true`:</span><span class="sxs-lookup"><span data-stu-id="640c3-1011">To enable this feature, add a new \<appSettings> element to the configuration file (app.config) and set the `EnableWindowsFormsHighDpiAutoResizing` element to `true`:</span></span>

    ```xml
    <appSettings>
       <add key="EnableWindowsFormsHighDpiAutoResizing" value="true" />
    </appSettings>
    ```

<span data-ttu-id="640c3-1012">В процесс отладки приложений .NET Framework в Visual Studio 2013 внесены следующие улучшения.</span><span class="sxs-lookup"><span data-stu-id="640c3-1012">Improvements when debugging your .NET Framework apps in Visual Studio 2013 include:</span></span>

- <span data-ttu-id="640c3-1013">Возвращаемые значения в отладчике Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="640c3-1013">Return values in the Visual Studio debugger.</span></span> <span data-ttu-id="640c3-1014">При отладке управляемого приложения в Visual Studio 2013 в окне "Видимые" отображаются возвращаемые типы и значения для методов.</span><span class="sxs-lookup"><span data-stu-id="640c3-1014">When you debug a managed app in Visual Studio 2013, the Autos window displays return types and values for methods.</span></span> <span data-ttu-id="640c3-1015">Эти сведения доступны для приложений для настольных систем, приложений для Магазина Windows и приложений Windows Phone.</span><span class="sxs-lookup"><span data-stu-id="640c3-1015">This information is available for desktop, Windows Store, and Windows Phone apps.</span></span> <span data-ttu-id="640c3-1016">Дополнительные сведения см. в статье [Анализ значений, возвращаемых из вызовов методов](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/dn323257(v=vs.120)).</span><span class="sxs-lookup"><span data-stu-id="640c3-1016">For more information, see [Examine return values of method calls](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/dn323257(v=vs.120)).</span></span>

- <span data-ttu-id="640c3-1017">"Изменить и продолжить" для 64-разрядных приложений.</span><span class="sxs-lookup"><span data-stu-id="640c3-1017">Edit and Continue for 64-bit apps.</span></span> <span data-ttu-id="640c3-1018">Visual Studio 2013 поддерживает действие "Изменить и продолжить" для 64-разрядных управляемых приложений для настольных систем, приложений для Магазина Windows и приложений для Windows Phone.</span><span class="sxs-lookup"><span data-stu-id="640c3-1018">Visual Studio 2013 supports the Edit and Continue feature for 64-bit managed apps for desktop, Windows Store, and Windows Phone.</span></span> <span data-ttu-id="640c3-1019">Существующие ограничения остаются действующими и для 32-разрядных, и для 64-разрядных приложений (см. последний раздел статьи [Поддерживаемые изменения кода (C#)](/visualstudio/debugger/supported-code-changes-csharp)).</span><span class="sxs-lookup"><span data-stu-id="640c3-1019">The existing limitations remain in effect for both 32-bit and 64-bit apps (see the last section of the [Supported Code Changes (C#)](/visualstudio/debugger/supported-code-changes-csharp) article).</span></span>

- <span data-ttu-id="640c3-1020">Отладка с поддержкой асинхронности.</span><span class="sxs-lookup"><span data-stu-id="640c3-1020">Async-aware debugging.</span></span> <span data-ttu-id="640c3-1021">Чтобы упростить отладку асинхронных приложений в Visual Studio 2013, стеке вызовов скрывает код инфраструктуры, предоставляемый компиляторами для поддержки асинхронного программирования, а также цепочки логических родительских кадров, что упрощает прослеживание логики выполнения программы.</span><span class="sxs-lookup"><span data-stu-id="640c3-1021">To make it easier to debug asynchronous apps in Visual Studio 2013, the call stack hides the infrastructure code provided by compilers to support asynchronous programming, and also chains in logical parent frames so you can follow logical program execution more clearly.</span></span> <span data-ttu-id="640c3-1022">В окне "Задачи", которое заменяет собой окно "Параллельные задачи", отображаются задачи, относящиеся к определенной точке останова, а также все другие задачи, которые в данный момент активны или запланированы в приложении.</span><span class="sxs-lookup"><span data-stu-id="640c3-1022">A Tasks window replaces the Parallel Tasks window and displays tasks that relate to a particular breakpoint, and also displays any other tasks that are currently active or scheduled in the app.</span></span> <span data-ttu-id="640c3-1023">Вы можете прочесть об этой возможности в разделе "Отладка с поддержкой асинхронности" [объявления о выходе .NET Framework 4.5.1](https://devblogs.microsoft.com/dotnet/announcing-the-net-framework-4-5-1-preview/).</span><span class="sxs-lookup"><span data-stu-id="640c3-1023">You can read about this feature in the "Async-aware debugging" section of the [.NET Framework 4.5.1 announcement](https://devblogs.microsoft.com/dotnet/announcing-the-net-framework-4-5-1-preview/).</span></span>

- <span data-ttu-id="640c3-1024">Усовершенствованная поддержка исключений для компонентов среды выполнения Windows.</span><span class="sxs-lookup"><span data-stu-id="640c3-1024">Better exception support for Windows Runtime components.</span></span> <span data-ttu-id="640c3-1025">В [!INCLUDE[win81](../../../includes/win81-md.md)] исключения, возникающие в приложениях для Магазина Windows, сохраняют сведения об ошибке, которая вызвала исключение, даже при переходе через границу языка.</span><span class="sxs-lookup"><span data-stu-id="640c3-1025">In [!INCLUDE[win81](../../../includes/win81-md.md)], exceptions that arise from Windows Store apps preserve information about the error that caused the exception, even across language boundaries.</span></span> <span data-ttu-id="640c3-1026">Вы можете прочесть об этой возможности в разделе "Разработка приложений для Магазина Windows" [объявления о выходе .NET Framework 4.5.1](https://devblogs.microsoft.com/dotnet/announcing-the-net-framework-4-5-1-preview/).</span><span class="sxs-lookup"><span data-stu-id="640c3-1026">You can read about this feature in the "Windows Store app development" section of the [.NET Framework 4.5.1 announcement](https://devblogs.microsoft.com/dotnet/announcing-the-net-framework-4-5-1-preview/).</span></span>

<span data-ttu-id="640c3-1027">Начиная с Visual Studio 2013 вы можете использовать [Управляемое средство профильной оптимизации (Mpgo.exe)](../tools/mpgo-exe-managed-profile-guided-optimization-tool.md) для оптимизации классических приложений и приложений [!INCLUDE[win8_appname_long](../../../includes/win8-appname-long-md.md)].</span><span class="sxs-lookup"><span data-stu-id="640c3-1027">Starting with Visual Studio 2013, you can use the [Managed Profile Guided Optimization Tool (Mpgo.exe)](../tools/mpgo-exe-managed-profile-guided-optimization-tool.md) to optimize [!INCLUDE[win8_appname_long](../../../includes/win8-appname-long-md.md)] apps as well as desktop apps.</span></span>

<span data-ttu-id="640c3-1028">См. новые возможности ASP.NET 4.5.1 в статье [Заметки о выпуске ASP.NET and Web Tools для Visual Studio 2013](/aspnet/visual-studio/overview/2013/release-notes).</span><span class="sxs-lookup"><span data-stu-id="640c3-1028">For new features in ASP.NET 4.5.1, see [ASP.NET and Web Tools for Visual Studio 2013 Release Notes](/aspnet/visual-studio/overview/2013/release-notes).</span></span>

<a name="v45" />

## <a name="whats-new-in-the-net-framework-45"></a><span data-ttu-id="640c3-1029">Новые возможности .NET Framework 4.5</span><span class="sxs-lookup"><span data-stu-id="640c3-1029">What's new in the .NET Framework 4.5</span></span>

### <a name="core-new-features-and-improvements"></a><span data-ttu-id="640c3-1030">Основные новые функции и усовершенствования</span><span class="sxs-lookup"><span data-stu-id="640c3-1030">Core new features and improvements</span></span>

- <span data-ttu-id="640c3-1031">Возможность уменьшения количества перезапусков системы путем обнаружения и закрытия приложений .NET Framework 4 во время развертывания.</span><span class="sxs-lookup"><span data-stu-id="640c3-1031">Ability to reduce system restarts by detecting and closing .NET Framework 4 applications during deployment.</span></span> <span data-ttu-id="640c3-1032">См. раздел [Уменьшение числа перезагрузок при установке платформы .NET Framework 4.5](../deployment/reducing-system-restarts.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-1032">See [Reducing System Restarts During .NET Framework 4.5 Installations](../deployment/reducing-system-restarts.md).</span></span>

- <span data-ttu-id="640c3-1033">Поддержка массивов, размер которых превышает 2 ГБ, на 64-разрядных платформах.</span><span class="sxs-lookup"><span data-stu-id="640c3-1033">Support for arrays that are larger than 2 gigabytes (GB) on 64-bit platforms.</span></span> <span data-ttu-id="640c3-1034">Эту функцию можно включить в файле конфигурации приложения.</span><span class="sxs-lookup"><span data-stu-id="640c3-1034">This feature can be enabled in the application configuration file.</span></span> <span data-ttu-id="640c3-1035">См. описание [элемента \<gcAllowVeryLargeObjects>](../configure-apps/file-schema/runtime/gcallowverylargeobjects-element.md), в котором также перечислены другие ограничения на размер объекта и размер массива.</span><span class="sxs-lookup"><span data-stu-id="640c3-1035">See the [\<gcAllowVeryLargeObjects> element](../configure-apps/file-schema/runtime/gcallowverylargeobjects-element.md), which also lists other restrictions on object size and array size.</span></span>

- <span data-ttu-id="640c3-1036">Улучшенная производительность благодаря фоновой сборке мусора для серверов.</span><span class="sxs-lookup"><span data-stu-id="640c3-1036">Better performance through background garbage collection for servers.</span></span> <span data-ttu-id="640c3-1037">При использовании серверной сборки мусора в [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] фоновая сборка мусора включается автоматически.</span><span class="sxs-lookup"><span data-stu-id="640c3-1037">When you use server garbage collection in the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], background garbage collection is automatically enabled.</span></span> <span data-ttu-id="640c3-1038">Сведения см. в разделе "Фоновая сборка мусора сервера" статьи [Основы сборки мусора](../../standard/garbage-collection/fundamentals.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-1038">See the Background Server Garbage Collection section of the [Fundamentals of Garbage Collection](../../standard/garbage-collection/fundamentals.md) topic.</span></span>

- <span data-ttu-id="640c3-1039">Фоновая компиляция по требованию (JIT), которая доступна по выбору на многоядерных процессорах для повышения производительности приложения.</span><span class="sxs-lookup"><span data-stu-id="640c3-1039">Background just-in-time (JIT) compilation, which is optionally available on multi-core processors to improve application performance.</span></span> <span data-ttu-id="640c3-1040">См. раздел <xref:System.Runtime.ProfileOptimization>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1040">See <xref:System.Runtime.ProfileOptimization>.</span></span>

- <span data-ttu-id="640c3-1041">Возможность ограничения времени, в течение которого обработчик регулярных выражений будет пытаться разрешить регулярное выражение до истечения срока действия выражения. См. свойство <xref:System.Text.RegularExpressions.Regex.MatchTimeout%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1041">Ability to limit how long the regular expression engine will attempt to resolve a regular expression before it times out. See the <xref:System.Text.RegularExpressions.Regex.MatchTimeout%2A?displayProperty=nameWithType> property.</span></span>

- <span data-ttu-id="640c3-1042">Возможность определить язык и региональные параметры по умолчанию для домена приложения.</span><span class="sxs-lookup"><span data-stu-id="640c3-1042">Ability to define the default culture for an application domain.</span></span> <span data-ttu-id="640c3-1043">См. класс <xref:System.Globalization.CultureInfo>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1043">See the <xref:System.Globalization.CultureInfo> class.</span></span>

- <span data-ttu-id="640c3-1044">Консольная поддержка кодировки Юникод (UTF-16).</span><span class="sxs-lookup"><span data-stu-id="640c3-1044">Console support for Unicode (UTF-16) encoding.</span></span> <span data-ttu-id="640c3-1045">См. класс <xref:System.Console>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1045">See the <xref:System.Console> class.</span></span>

- <span data-ttu-id="640c3-1046">Поддержка управления версиями данных сортировки и сравнения строк, зависящих от языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="640c3-1046">Support for versioning of cultural string ordering and comparison data.</span></span> <span data-ttu-id="640c3-1047">См. класс <xref:System.Globalization.SortVersion>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1047">See the <xref:System.Globalization.SortVersion> class.</span></span>

- <span data-ttu-id="640c3-1048">Улучшенная производительность при извлечении ресурсов.</span><span class="sxs-lookup"><span data-stu-id="640c3-1048">Better performance when retrieving resources.</span></span> <span data-ttu-id="640c3-1049">См. раздел [Упаковка и развертывание ресурсов](../resources/packaging-and-deploying-resources-in-desktop-apps.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-1049">See [Packaging and Deploying Resources](../resources/packaging-and-deploying-resources-in-desktop-apps.md).</span></span>

- <span data-ttu-id="640c3-1050">Усовершенствования в области сжатия ZIP, позволяющие уменьшить размер сжатого файла.</span><span class="sxs-lookup"><span data-stu-id="640c3-1050">Zip compression improvements to reduce the size of a compressed file.</span></span> <span data-ttu-id="640c3-1051">См. пространство имен <xref:System.IO.Compression?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1051">See the <xref:System.IO.Compression?displayProperty=nameWithType> namespace.</span></span>

- <span data-ttu-id="640c3-1052">Возможность настраивать контекст отражения для переопределения поведения отражения по умолчанию с помощью класса <xref:System.Reflection.Context.CustomReflectionContext>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1052">Ability to customize a reflection context to override default reflection behavior through the <xref:System.Reflection.Context.CustomReflectionContext> class.</span></span>

- <span data-ttu-id="640c3-1053">Поддержка версии 2008 стандарта интернационализированных доменных имен в приложениях (Internationalized Domain Names in Applications, IDNA) при использовании класса <xref:System.Globalization.IdnMapping?displayProperty=nameWithType> в [!INCLUDE[win8](../../../includes/win8-md.md)].</span><span class="sxs-lookup"><span data-stu-id="640c3-1053">Support for the 2008 version of the Internationalized Domain Names in Applications (IDNA) standard when the <xref:System.Globalization.IdnMapping?displayProperty=nameWithType> class is used  on [!INCLUDE[win8](../../../includes/win8-md.md)].</span></span>

- <span data-ttu-id="640c3-1054">Делегирование сравнения строк операционной системе, которая реализует Юникод 6.0, при использовании .NET Framework в [!INCLUDE[win8](../../../includes/win8-md.md)].</span><span class="sxs-lookup"><span data-stu-id="640c3-1054">Delegation of string comparison to the operating system, which implements Unicode 6.0, when the .NET Framework is used on [!INCLUDE[win8](../../../includes/win8-md.md)].</span></span> <span data-ttu-id="640c3-1055">При работе на других платформах .NET Framework включает собственные данные сравнения строк, которые реализуют Юникод 5.x.</span><span class="sxs-lookup"><span data-stu-id="640c3-1055">When running on other platforms, the .NET Framework includes its own string comparison data, which implements Unicode 5.x.</span></span> <span data-ttu-id="640c3-1056">См. класс <xref:System.String> и раздел "Примечания" в описании класса <xref:System.Globalization.SortVersion>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1056">See the <xref:System.String> class and the Remarks section of the <xref:System.Globalization.SortVersion> class.</span></span>

- <span data-ttu-id="640c3-1057">Возможность вычисления хэш-кодов для строк для каждого домена приложения.</span><span class="sxs-lookup"><span data-stu-id="640c3-1057">Ability to compute the hash codes for strings on a per application domain basis.</span></span> <span data-ttu-id="640c3-1058">См. раздел [Элемент \<UseRandomizedStringHashAlgorithm>](../configure-apps/file-schema/runtime/userandomizedstringhashalgorithm-element.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-1058">See [\<UseRandomizedStringHashAlgorithm> Element](../configure-apps/file-schema/runtime/userandomizedstringhashalgorithm-element.md).</span></span>

- <span data-ttu-id="640c3-1059">Поддержка отражения типов, разделенная между классами <xref:System.Type> и <xref:System.Reflection.TypeInfo>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1059">Type reflection support split between <xref:System.Type> and <xref:System.Reflection.TypeInfo> classes.</span></span> <span data-ttu-id="640c3-1060">См. раздел [Отражение в .NET Framework для приложений Магазина Windows](../reflection-and-codedom/reflection-for-windows-store-apps.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-1060">See [Reflection in the .NET Framework for Windows Store Apps](../reflection-and-codedom/reflection-for-windows-store-apps.md).</span></span>

### <a name="managed-extensibility-framework-mef"></a><span data-ttu-id="640c3-1061">Managed Extensibility Framework (MEF)</span><span class="sxs-lookup"><span data-stu-id="640c3-1061">Managed Extensibility Framework (MEF)</span></span>

<span data-ttu-id="640c3-1062">В [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] в Managed Extensibility Framework (MEF) предусмотрены следующие новые возможности:</span><span class="sxs-lookup"><span data-stu-id="640c3-1062">In the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], the Managed Extensibility Framework (MEF) provides the following new features:</span></span>

- <span data-ttu-id="640c3-1063">Поддержка универсальных типов.</span><span class="sxs-lookup"><span data-stu-id="640c3-1063">Support for generic types.</span></span>

- <span data-ttu-id="640c3-1064">Модель программирования на основе соглашений, позволяющая создавать части на основе соглашений об именах, а не на основе атрибутов.</span><span class="sxs-lookup"><span data-stu-id="640c3-1064">Convention-based programming model that enables you to create parts based on naming conventions rather than attributes.</span></span>

- <span data-ttu-id="640c3-1065">Множественные области действия.</span><span class="sxs-lookup"><span data-stu-id="640c3-1065">Multiple scopes.</span></span>

- <span data-ttu-id="640c3-1066">Подмножество MEF, которое можно использовать при создании приложений [!INCLUDE[win8_appname_long](../../../includes/win8-appname-long-md.md)].</span><span class="sxs-lookup"><span data-stu-id="640c3-1066">A subset of MEF that you can use when you create [!INCLUDE[win8_appname_long](../../../includes/win8-appname-long-md.md)] apps.</span></span> <span data-ttu-id="640c3-1067">Это подмножество доступно как [загружаемый пакет](https://go.microsoft.com/fwlink/?LinkId=256238) из коллекции NuGet.</span><span class="sxs-lookup"><span data-stu-id="640c3-1067">This subset is available as a [downloadable package](https://go.microsoft.com/fwlink/?LinkId=256238) from the NuGet Gallery.</span></span> <span data-ttu-id="640c3-1068">Чтобы установить пакет, откройте проект в Visual Studio, выберите **Управление пакетами NuGet** в меню **Проект** и выполните поиск пакета `Microsoft.Composition` в Интернете.</span><span class="sxs-lookup"><span data-stu-id="640c3-1068">To install the package, open your project in Visual Studio, choose **Manage NuGet Packages** from the **Project** menu, and search online for the `Microsoft.Composition` package.</span></span>

<span data-ttu-id="640c3-1069">Дополнительные сведения см. в разделе [Managed Extensibility Framework](../mef/index.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-1069">For more information, see [Managed Extensibility Framework (MEF)](../mef/index.md).</span></span>

### <a name="asynchronous-file-operations"></a><span data-ttu-id="640c3-1070">Асинхронные операции с файлами</span><span class="sxs-lookup"><span data-stu-id="640c3-1070">Asynchronous file operations</span></span>

<span data-ttu-id="640c3-1071">В [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] в языки C# и Visual Basic были добавлены новые асинхронные возможности.</span><span class="sxs-lookup"><span data-stu-id="640c3-1071">In the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], new asynchronous features were added to the C# and Visual Basic languages.</span></span> <span data-ttu-id="640c3-1072">Эти возможности представляют собой модель на основе задач для выполнения асинхронных операций.</span><span class="sxs-lookup"><span data-stu-id="640c3-1072">These features add a task-based model for performing asynchronous operations.</span></span> <span data-ttu-id="640c3-1073">Для использования этой новой модели используйте асинхронные методы в классах ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="640c3-1073">To use this new model, use the asynchronous methods in the I/O classes.</span></span> <span data-ttu-id="640c3-1074">См. раздел [Асинхронные операции файлового ввода-вывода](../../standard/io/asynchronous-file-i-o.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-1074">See [Asynchronous File I/O](../../standard/io/asynchronous-file-i-o.md).</span></span>

<a name="tools" />

### <a name="tools"></a><span data-ttu-id="640c3-1075">Инструменты</span><span class="sxs-lookup"><span data-stu-id="640c3-1075">Tools</span></span>

<span data-ttu-id="640c3-1076">В [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] генератор файлов ресурсов (Resgen.exe) позволяет создать RESW-файл для использования в приложениях [!INCLUDE[win8_appname_long](../../../includes/win8-appname-long-md.md)] из RESOURCES-файла, внедренного в сборку .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="640c3-1076">In the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], Resource File Generator (Resgen.exe) enables you to create a .resw file for use in [!INCLUDE[win8_appname_long](../../../includes/win8-appname-long-md.md)] apps from a .resources file embedded in a .NET Framework assembly.</span></span> <span data-ttu-id="640c3-1077">Дополнительные сведения см. в разделе [Resgen.exe (генератор файлов ресурсов)](../tools/resgen-exe-resource-file-generator.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-1077">For more information, see [Resgen.exe (Resource File Generator)](../tools/resgen-exe-resource-file-generator.md).</span></span>

<span data-ttu-id="640c3-1078">Средство управляемой оптимизации с использованием профиля (Mpgo.exe) позволяет сократить время запуска приложения, улучшить использование памяти (размер рабочего множества) и пропускную способность путем оптимизации сборок машинных образов.</span><span class="sxs-lookup"><span data-stu-id="640c3-1078">Managed Profile Guided Optimization (Mpgo.exe) enables you to improve application startup time, memory utilization (working set size), and throughput by optimizing native image assemblies.</span></span> <span data-ttu-id="640c3-1079">Этот инструмент командной строки формирует данные профилирования для сборок машинного образа приложения.</span><span class="sxs-lookup"><span data-stu-id="640c3-1079">The command-line tool generates profile data for native image application assemblies.</span></span> <span data-ttu-id="640c3-1080">См. раздел [Mpgo.exe (инструмент управляемой оптимизации с использованием профиля)](../tools/mpgo-exe-managed-profile-guided-optimization-tool.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-1080">See [Mpgo.exe (Managed Profile Guided Optimization Tool)](../tools/mpgo-exe-managed-profile-guided-optimization-tool.md).</span></span> <span data-ttu-id="640c3-1081">Начиная с Visual Studio 2013 вы можете использовать Mpgo.exe для оптимизации классических приложений и приложений [!INCLUDE[win8_appname_long](../../../includes/win8-appname-long-md.md)].</span><span class="sxs-lookup"><span data-stu-id="640c3-1081">Starting with Visual Studio 2013, you can use Mpgo.exe to optimize [!INCLUDE[win8_appname_long](../../../includes/win8-appname-long-md.md)] apps as well as desktop apps.</span></span>

<a name="parallel" />

### <a name="parallel-computing"></a><span data-ttu-id="640c3-1082">Параллельные вычисления</span><span class="sxs-lookup"><span data-stu-id="640c3-1082">Parallel computing</span></span>

<span data-ttu-id="640c3-1083">В [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] предусмотрено несколько новых возможностей и усовершенствований для параллельных вычислений.</span><span class="sxs-lookup"><span data-stu-id="640c3-1083">The [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] provides several new features and improvements for parallel computing.</span></span> <span data-ttu-id="640c3-1084">К ним относятся повышение производительности, повышение управляемости, улучшенная поддержка асинхронного программирования, новая библиотека потоков данных и улучшенная поддержка параллельной отладки и анализа производительности.</span><span class="sxs-lookup"><span data-stu-id="640c3-1084">These include improved performance, increased control, improved support for asynchronous programming, a new dataflow library, and improved support for parallel debugging and performance analysis.</span></span> <span data-ttu-id="640c3-1085">См. запись [Новые возможности параллелизма в .NET 4.5](https://go.microsoft.com/fwlink/?LinkId=235061) в блоге, посвященном параллельному программированию в .NET.</span><span class="sxs-lookup"><span data-stu-id="640c3-1085">See the entry [What’s New for Parallelism in .NET 4.5](https://go.microsoft.com/fwlink/?LinkId=235061) in the Parallel Programming with .NET blog.</span></span>

<a name="web" />

### <a name="web"></a><span data-ttu-id="640c3-1086">Интернет</span><span class="sxs-lookup"><span data-stu-id="640c3-1086">Web</span></span>

<span data-ttu-id="640c3-1087">В ASP.NET 4.5 и 4.5.1 добавилась привязка модели для Web Forms, поддержка WebSocket, асинхронные обработчики, усовершенствования для повышения производительности и многие другие возможности.</span><span class="sxs-lookup"><span data-stu-id="640c3-1087">ASP.NET 4.5 and 4.5.1 add model binding for Web Forms, WebSocket support, asynchronous handlers, performance enhancements, and many other features.</span></span> <span data-ttu-id="640c3-1088">Дополнительные сведения см. в следующих ресурсах:</span><span class="sxs-lookup"><span data-stu-id="640c3-1088">For more information, see the following resources:</span></span>

- [<span data-ttu-id="640c3-1089">ASP.NET 4.5 и Visual Studio 2012</span><span class="sxs-lookup"><span data-stu-id="640c3-1089">ASP.NET 4.5 and Visual Studio 2012</span></span>](https://docs.microsoft.com/previous-versions/aspnet/hh420390(v=vs.110))

- [<span data-ttu-id="640c3-1090">Заметки о выпуске ASP.NET and Web Tools для Visual Studio 2013</span><span class="sxs-lookup"><span data-stu-id="640c3-1090">ASP.NET and Web Tools for Visual Studio 2013 Release Notes</span></span>](/aspnet/visual-studio/overview/2013/release-notes)

### <a name="networking-a-namenetworking-"></a><span data-ttu-id="640c3-1091">Сеть <a name="networking" /></span><span class="sxs-lookup"><span data-stu-id="640c3-1091">Networking <a name="networking" /></span></span>

<span data-ttu-id="640c3-1092">[!INCLUDE[net_v45](../../../includes/net-v45-md.md)] предоставляет новый интерфейс программирования для приложений HTTP.</span><span class="sxs-lookup"><span data-stu-id="640c3-1092">The [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] provides a new programming interface for HTTP applications.</span></span> <span data-ttu-id="640c3-1093">Дополнительные сведения см. в описании новых пространств имен <xref:System.Net.Http?displayProperty=nameWithType> и <xref:System.Net.Http.Headers?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1093">For more information, see the new <xref:System.Net.Http?displayProperty=nameWithType> and <xref:System.Net.Http.Headers?displayProperty=nameWithType> namespaces.</span></span>

<span data-ttu-id="640c3-1094">Также предусмотрена поддержка нового интерфейса программирования для приема и взаимодействия с соединением WebSocket с помощью существующего класса <xref:System.Net.HttpListener> и связанных с ним классов.</span><span class="sxs-lookup"><span data-stu-id="640c3-1094">Support is also included for a new programming interface for accepting and interacting with a WebSocket connection by using the existing <xref:System.Net.HttpListener> and related classes.</span></span> <span data-ttu-id="640c3-1095">Дополнительные сведения см. в описании нового пространства имен <xref:System.Net.WebSockets> и класса <xref:System.Net.HttpListener>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1095">For more information, see the new <xref:System.Net.WebSockets> namespace and the <xref:System.Net.HttpListener> class.</span></span>

<span data-ttu-id="640c3-1096">Кроме того, в [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] предусмотрены следующие усовершенствования в плане сетевого взаимодействия:</span><span class="sxs-lookup"><span data-stu-id="640c3-1096">In addition, the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] includes the following networking improvements:</span></span>

- <span data-ttu-id="640c3-1097">RFC-совместимая поддержка URI.</span><span class="sxs-lookup"><span data-stu-id="640c3-1097">RFC-compliant URI support.</span></span> <span data-ttu-id="640c3-1098">Дополнительные сведения см. в описании <xref:System.Uri> и соответствующих классов.</span><span class="sxs-lookup"><span data-stu-id="640c3-1098">For more information, see <xref:System.Uri> and related classes.</span></span>

- <span data-ttu-id="640c3-1099">Поддержка синтаксического анализа интернационализированных доменных имен (Internationalized Domain Name, IDN).</span><span class="sxs-lookup"><span data-stu-id="640c3-1099">Support for Internationalized Domain Name (IDN) parsing.</span></span> <span data-ttu-id="640c3-1100">Дополнительные сведения см. в описании <xref:System.Uri> и соответствующих классов.</span><span class="sxs-lookup"><span data-stu-id="640c3-1100">For more information, see <xref:System.Uri> and related classes.</span></span>

- <span data-ttu-id="640c3-1101">Поддержка интернационализации адресов электронной почты (Email Address Internationalization, EAI).</span><span class="sxs-lookup"><span data-stu-id="640c3-1101">Support for Email Address Internationalization (EAI).</span></span> <span data-ttu-id="640c3-1102">Дополнительные сведения см. в описании пространства имен <xref:System.Net.Mail>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1102">For more information, see the <xref:System.Net.Mail> namespace.</span></span>

- <span data-ttu-id="640c3-1103">Улучшенная поддержка протокола IPv6.</span><span class="sxs-lookup"><span data-stu-id="640c3-1103">Improved IPv6 support.</span></span> <span data-ttu-id="640c3-1104">Дополнительные сведения см. в описании пространства имен <xref:System.Net.NetworkInformation>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1104">For more information, see the <xref:System.Net.NetworkInformation> namespace.</span></span>

- <span data-ttu-id="640c3-1105">Поддержка сокета с двойным режимом.</span><span class="sxs-lookup"><span data-stu-id="640c3-1105">Dual-mode socket support.</span></span> <span data-ttu-id="640c3-1106">Дополнительные сведения см. в описаниях классов <xref:System.Net.Sockets.Socket> и <xref:System.Net.Sockets.TcpListener>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1106">For more information, see the <xref:System.Net.Sockets.Socket> and <xref:System.Net.Sockets.TcpListener> classes.</span></span>

<a name="client" />

### <a name="windows-presentation-foundation-wpf"></a><span data-ttu-id="640c3-1107">Windows Presentation Foundation (WPF)</span><span class="sxs-lookup"><span data-stu-id="640c3-1107">Windows Presentation Foundation (WPF)</span></span>

<span data-ttu-id="640c3-1108">В [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] Windows Presentation Foundation (WPF) содержит изменения и усовершенствования в следующих областях:</span><span class="sxs-lookup"><span data-stu-id="640c3-1108">In the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], Windows Presentation Foundation (WPF) contains changes and improvements in the following areas:</span></span>

- <span data-ttu-id="640c3-1109">Новый элемент управления <xref:System.Windows.Controls.Ribbon.Ribbon>, позволяющий реализовать пользовательский интерфейс в виде ленты, на которой размещаются панель быстрого доступа, меню приложения и вкладки.</span><span class="sxs-lookup"><span data-stu-id="640c3-1109">The new <xref:System.Windows.Controls.Ribbon.Ribbon> control, which enables you to implement a ribbon user interface that hosts a Quick Access Toolbar, Application Menu, and tabs.</span></span>

- <span data-ttu-id="640c3-1110">Новый интерфейс <xref:System.ComponentModel.INotifyDataErrorInfo>, который поддерживает синхронную и асинхронную проверку данных.</span><span class="sxs-lookup"><span data-stu-id="640c3-1110">The new <xref:System.ComponentModel.INotifyDataErrorInfo> interface, which supports synchronous and asynchronous data validation.</span></span>

- <span data-ttu-id="640c3-1111">Новые возможности для классов <xref:System.Windows.Controls.VirtualizingPanel> и <xref:System.Windows.Threading.Dispatcher>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1111">New features for the <xref:System.Windows.Controls.VirtualizingPanel> and <xref:System.Windows.Threading.Dispatcher> classes.</span></span>

- <span data-ttu-id="640c3-1112">Повышение производительности при отображении больших наборов сгруппированных данных, а также за счет доступа к коллекциям в потоках вне пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="640c3-1112">Improved performance when displaying large sets of grouped data, and by accessing collections on non-UI threads.</span></span>

- <span data-ttu-id="640c3-1113">Привязка данных к статическим свойствам, привязка данных к пользовательским типам, реализующим интерфейс <xref:System.Reflection.ICustomTypeProvider>, а также извлечение сведений о привязке данных из выражения привязки.</span><span class="sxs-lookup"><span data-stu-id="640c3-1113">Data binding to static properties, data binding to custom types that implement the <xref:System.Reflection.ICustomTypeProvider> interface, and retrieval of data binding information from a binding expression.</span></span>

- <span data-ttu-id="640c3-1114">Изменение расположения данных по мере изменение значений (формирование данных в реальном времени).</span><span class="sxs-lookup"><span data-stu-id="640c3-1114">Repositioning of data as the values change (live shaping).</span></span>

- <span data-ttu-id="640c3-1115">Возможность проверить, отсоединен ли контекст данных для контейнера элемента.</span><span class="sxs-lookup"><span data-stu-id="640c3-1115">Ability to check whether the data context for an item container is disconnected.</span></span>

- <span data-ttu-id="640c3-1116">Возможность задать количество времени, которое должно пройти между операциями изменения свойств и обновления источника данных.</span><span class="sxs-lookup"><span data-stu-id="640c3-1116">Ability to set the amount of time that should elapse between property changes and data source updates.</span></span>

- <span data-ttu-id="640c3-1117">Улучшенная поддержка реализации шаблонов слабых событий.</span><span class="sxs-lookup"><span data-stu-id="640c3-1117">Improved support for implementing weak event patterns.</span></span> <span data-ttu-id="640c3-1118">Кроме того, события теперь могут принимать расширения разметки.</span><span class="sxs-lookup"><span data-stu-id="640c3-1118">Also, events can now accept markup extensions.</span></span>

<a name="windows_communication_foundation" />

### <a name="windows-communication-foundation-wcf"></a><span data-ttu-id="640c3-1119">Windows Communication Foundation (WCF)</span><span class="sxs-lookup"><span data-stu-id="640c3-1119">Windows Communication Foundation (WCF)</span></span>

<span data-ttu-id="640c3-1120">В [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] были добавлены следующие возможности, чтобы упростить создание и обслуживание приложений Windows Communication Foundation (WCF):</span><span class="sxs-lookup"><span data-stu-id="640c3-1120">In the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], the following features have been added to make it simpler to write and maintain Windows Communication Foundation (WCF) applications:</span></span>

- <span data-ttu-id="640c3-1121">Упрощение создаваемых файлов конфигурации.</span><span class="sxs-lookup"><span data-stu-id="640c3-1121">Simplification of generated configuration files.</span></span>

- <span data-ttu-id="640c3-1122">Поддержка разработки в соответствии с парадигмой "сначала контракт".</span><span class="sxs-lookup"><span data-stu-id="640c3-1122">Support for contract-first development.</span></span>

- <span data-ttu-id="640c3-1123">Упрощение настройки режима совместимости ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="640c3-1123">Ability to configure ASP.NET compatibility mode more easily.</span></span>

- <span data-ttu-id="640c3-1124">Изменения значений свойств транспорта по умолчанию для уменьшения вероятности необходимости их настройки.</span><span class="sxs-lookup"><span data-stu-id="640c3-1124">Changes in default transport property values to reduce the likelihood that you will have to set them.</span></span>

- <span data-ttu-id="640c3-1125">Обновления класса <xref:System.Xml.XmlDictionaryReaderQuotas> для уменьшения вероятности того, что потребуется вручную настраивать квоты для читателей словаря XML.</span><span class="sxs-lookup"><span data-stu-id="640c3-1125">Updates to the <xref:System.Xml.XmlDictionaryReaderQuotas> class to reduce the likelihood that you will have to manually configure quotas for XML dictionary readers.</span></span>

- <span data-ttu-id="640c3-1126">Проверка файлов конфигурации WCF силами Visual Studio в рамках процесса сборки, позволяющая выявить ошибки в конфигурации до запуска приложения.</span><span class="sxs-lookup"><span data-stu-id="640c3-1126">Validation of WCF configuration files by Visual Studio as part of the build process, so you can detect configuration errors before you run your application.</span></span>

- <span data-ttu-id="640c3-1127">Новая поддержка асинхронной потоковой передачи.</span><span class="sxs-lookup"><span data-stu-id="640c3-1127">New asynchronous streaming support.</span></span>

- <span data-ttu-id="640c3-1128">Новое сопоставление протокола HTTPS, облегчающее предоставление конечной точки по HTTPS с помощью служб IIS.</span><span class="sxs-lookup"><span data-stu-id="640c3-1128">New HTTPS protocol mapping to make it easier to expose an endpoint over HTTPS with Internet Information Services (IIS).</span></span>

- <span data-ttu-id="640c3-1129">Возможность создавать метаданные в одном документе WSDL путем добавления `?singleWSDL` к URL-адресу службы.</span><span class="sxs-lookup"><span data-stu-id="640c3-1129">Ability to generate metadata in a single WSDL document by appending `?singleWSDL` to the service URL.</span></span>

- <span data-ttu-id="640c3-1130">Поддержка Websockets, обеспечивающая истинно двунаправленный обмен данными через порты 80 и 443 с показателями производительности, схожими с характеристиками TCP-транспорта.</span><span class="sxs-lookup"><span data-stu-id="640c3-1130">Websockets support to enable true bidirectional communication over ports 80 and 443 with performance characteristics similar to the TCP transport.</span></span>

- <span data-ttu-id="640c3-1131">Поддержка настройки служб в коде.</span><span class="sxs-lookup"><span data-stu-id="640c3-1131">Support for configuring services in code.</span></span>

- <span data-ttu-id="640c3-1132">Всплывающие подсказки в редакторе XML.</span><span class="sxs-lookup"><span data-stu-id="640c3-1132">XML Editor tooltips.</span></span>

- <xref:System.ServiceModel.ChannelFactory> <span data-ttu-id="640c3-1133">— поддержка кэширования.</span><span class="sxs-lookup"><span data-stu-id="640c3-1133">caching support.</span></span>

- <span data-ttu-id="640c3-1134">Поддержка сжатия двоичного кодировщика.</span><span class="sxs-lookup"><span data-stu-id="640c3-1134">Binary encoder compression support.</span></span>

- <span data-ttu-id="640c3-1135">Поддержка UDP-транспорта, которая позволяет разработчикам писать службы, использующие обмен сообщениями по принципу "отправить и забыть".</span><span class="sxs-lookup"><span data-stu-id="640c3-1135">Support for a UDP transport that enables developers to write services that use "fire and forget" messaging.</span></span> <span data-ttu-id="640c3-1136">Клиент отправляет сообщение службе, но не ожидает от нее ответа.</span><span class="sxs-lookup"><span data-stu-id="640c3-1136">A client sends a message to a service and expects no response from the service.</span></span>

- <span data-ttu-id="640c3-1137">Возможность поддерживать несколько режимов аутентификации в одной конечной точке WCF при использовании HTTP-транспорта и безопасности транспорта.</span><span class="sxs-lookup"><span data-stu-id="640c3-1137">Ability to support multiple authentication modes on a single WCF endpoint when using the HTTP transport and transport security.</span></span>

- <span data-ttu-id="640c3-1138">Поддержка служб WCF, использующих интернационализированные доменные имена (IDN).</span><span class="sxs-lookup"><span data-stu-id="640c3-1138">Support for WCF services that use internationalized domain names (IDNs).</span></span>

<span data-ttu-id="640c3-1139">Дополнительные сведения см. в разделе [Новые возможности в Windows Communication Foundation](https://go.microsoft.com/fwlink/?LinkId=228173).</span><span class="sxs-lookup"><span data-stu-id="640c3-1139">For more information, see [What's New in Windows Communication Foundation](https://go.microsoft.com/fwlink/?LinkId=228173).</span></span>

<a name="windows_workflow_foundation" />

### <a name="windows-workflow-foundation-wf"></a><span data-ttu-id="640c3-1140">Windows Workflow Foundation (WF)</span><span class="sxs-lookup"><span data-stu-id="640c3-1140">Windows Workflow Foundation (WF)</span></span>

<span data-ttu-id="640c3-1141">В Windows Workflow Foundation (WF) в [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] было добавлено несколько новых возможностей, в том числе следующие:</span><span class="sxs-lookup"><span data-stu-id="640c3-1141">In the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], several new features were added to Windows Workflow Foundation (WF), including:</span></span>

- <span data-ttu-id="640c3-1142">Рабочие процессы конечного автомата, которые впервые появились в составе .NET Framework 4.0.1 ([обновление 1 платформы .NET Framework 4](https://go.microsoft.com/fwlink/?LinkID=215092)).</span><span class="sxs-lookup"><span data-stu-id="640c3-1142">State machine workflows, which were first introduced as part of the .NET Framework 4.0.1 ([.NET Framework 4 Platform Update 1](https://go.microsoft.com/fwlink/?LinkID=215092)).</span></span> <span data-ttu-id="640c3-1143">В это обновление вошло несколько новых классов и действий, позволивших разработчикам создавать рабочие процессы конечного автомата.</span><span class="sxs-lookup"><span data-stu-id="640c3-1143">This update included several new classes and activities that enabled developers to create state machine workflows.</span></span> <span data-ttu-id="640c3-1144">В [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] эти классы и действия были обновлены и теперь включают в себя следующие возможности:</span><span class="sxs-lookup"><span data-stu-id="640c3-1144">These classes and activities were updated for the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] to include:</span></span>

    - <span data-ttu-id="640c3-1145">Возможность установки точек останова на состояниях.</span><span class="sxs-lookup"><span data-stu-id="640c3-1145">The ability to set breakpoints on states.</span></span>

    - <span data-ttu-id="640c3-1146">Возможность копирования и вставки переходов в конструкторе рабочих процессов.</span><span class="sxs-lookup"><span data-stu-id="640c3-1146">The ability to copy and paste transitions in the workflow designer.</span></span>

    - <span data-ttu-id="640c3-1147">Поддержка создания в конструкторе переходов с общим триггером.</span><span class="sxs-lookup"><span data-stu-id="640c3-1147">Designer support for shared trigger transition creation.</span></span>

    - <span data-ttu-id="640c3-1148">Действия для создания рабочих процессов конечного автомата, в том числе <xref:System.Activities.Statements.StateMachine>, <xref:System.Activities.Statements.State> и <xref:System.Activities.Statements.Transition>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1148">Activities for creating state machine workflows, including: <xref:System.Activities.Statements.StateMachine>, <xref:System.Activities.Statements.State>, and <xref:System.Activities.Statements.Transition>.</span></span>

- <span data-ttu-id="640c3-1149">Расширенные возможности конструктора рабочих процессов, например следующие:</span><span class="sxs-lookup"><span data-stu-id="640c3-1149">Enhanced Workflow Designer features such as the following:</span></span>

    - <span data-ttu-id="640c3-1150">Расширенные возможности поиска рабочих процессов в Visual Studio, включая **быстрый поиск** и **поиск в файлах**.</span><span class="sxs-lookup"><span data-stu-id="640c3-1150">Enhanced workflow search capabilities in Visual Studio, including **Quick Find** and **Find in Files**.</span></span>

    - <span data-ttu-id="640c3-1151">Возможность автоматически создавать действие Sequence, когда к действию-контейнеру добавляется второе действие — дочерний элемент, и включать оба действия в действие Sequence.</span><span class="sxs-lookup"><span data-stu-id="640c3-1151">Ability to automatically create a Sequence activity when a second child activity is added to a container activity, and to include both activities in the Sequence activity.</span></span>

    - <span data-ttu-id="640c3-1152">Поддержка панорамирования, которая позволяет изменять видимую часть рабочего процесса без использования полос прокрутки.</span><span class="sxs-lookup"><span data-stu-id="640c3-1152">Panning support, which enables the visible portion of a workflow to be changed without using the scroll bars.</span></span>

    - <span data-ttu-id="640c3-1153">Новое представление **Структура документа**, в котором компоненты рабочего процесса отображаются в виде древовидной структуры с возможностью выбора компонента в представлении **Структура документа**.</span><span class="sxs-lookup"><span data-stu-id="640c3-1153">A new **Document Outline** view that shows the components of a workflow in a tree-style outline view and lets you select a component in the **Document Outline** view.</span></span>

    - <span data-ttu-id="640c3-1154">Возможность добавлять примечаний к действиям.</span><span class="sxs-lookup"><span data-stu-id="640c3-1154">Ability to add annotations to activities.</span></span>

    - <span data-ttu-id="640c3-1155">Возможность определять и использовать делегаты действий с помощью конструктора рабочих процессов.</span><span class="sxs-lookup"><span data-stu-id="640c3-1155">Ability to define and consume activity delegates by using the workflow designer.</span></span>

    - <span data-ttu-id="640c3-1156">Автоматическое соединение и автоматическая вставка для действий и переходов в рабочих процессах блок-схемы и конечного автомата.</span><span class="sxs-lookup"><span data-stu-id="640c3-1156">Auto-connect and auto-insert for activities and transitions in state machine and flowchart workflows.</span></span>

- <span data-ttu-id="640c3-1157">Хранение данных о состоянии представления для рабочего процесса в одном элементе в XAML-файле, чтобы данные о состоянии представления можно было легко находить и редактировать.</span><span class="sxs-lookup"><span data-stu-id="640c3-1157">Storage of the view state information for a workflow in a single element in the XAML file, so you can easily locate and edit the view state information.</span></span>

- <span data-ttu-id="640c3-1158">Действие-контейнер NoPersistScope для предотвращения сохранения дочерних действий.</span><span class="sxs-lookup"><span data-stu-id="640c3-1158">A NoPersistScope container activity to prevent child activities from persisting.</span></span>

- <span data-ttu-id="640c3-1159">Поддержка выражений C#:</span><span class="sxs-lookup"><span data-stu-id="640c3-1159">Support for C# expressions:</span></span>

    - <span data-ttu-id="640c3-1160">Проекты рабочих процессов, в которых используется Visual Basic, будут использовать выражения Visual Basic, а проекты рабочих процессов C# будут использовать выражения C#.</span><span class="sxs-lookup"><span data-stu-id="640c3-1160">Workflow projects that use Visual Basic will use Visual Basic expressions, and C# workflow projects will use C# expressions.</span></span>

    - <span data-ttu-id="640c3-1161">Проекты рабочих процессов C#, созданные в Visual Studio 2010 и содержащие выражения Visual Basic, совместимы с проектами рабочих процессов C#, в которых используются выражения C#.</span><span class="sxs-lookup"><span data-stu-id="640c3-1161">C# workflow projects that were created in Visual Studio 2010 and that have Visual Basic expressions are compatible with C# workflow projects that use C# expressions.</span></span>

- <span data-ttu-id="640c3-1162">Усовершенствования управления версиями:</span><span class="sxs-lookup"><span data-stu-id="640c3-1162">Versioning enhancements:</span></span>

    - <span data-ttu-id="640c3-1163">Новый класс <xref:System.Activities.WorkflowIdentity>, который обеспечивает сопоставление между хранимым экземпляром рабочего процесса и его определением рабочего процесса.</span><span class="sxs-lookup"><span data-stu-id="640c3-1163">The new  <xref:System.Activities.WorkflowIdentity> class, which provides a mapping between a persisted workflow instance and its workflow definition.</span></span>

    - <span data-ttu-id="640c3-1164">Параллельное выполнение нескольких версий рабочего процесса в одном и том же узле, в том числе <xref:System.ServiceModel.Activities.WorkflowServiceHost>.</span><span class="sxs-lookup"><span data-stu-id="640c3-1164">Side-by-side execution of multiple workflow versions in the same host, including <xref:System.ServiceModel.Activities.WorkflowServiceHost>.</span></span>

    - <span data-ttu-id="640c3-1165">В динамическом обновлении это возможность изменять определение сохраненного экземпляра рабочего процесса.</span><span class="sxs-lookup"><span data-stu-id="640c3-1165">In Dynamic Update, the ability to modify the definition of a persisted workflow instance.</span></span>

- <span data-ttu-id="640c3-1166">Разработка служб рабочего процесса в соответствии с парадигмой "сначала контракт", что обеспечивает поддержку автоматического создания действий в соответствии с существующим контрактом службы.</span><span class="sxs-lookup"><span data-stu-id="640c3-1166">Contract-first workflow service development, which provides support for automatically generating activities to match an existing service contract.</span></span>

 <span data-ttu-id="640c3-1167">Дополнительные сведения см. в разделе [Новые возможности Windows Workflow Foundation](https://go.microsoft.com/fwlink/?LinkId=228176).</span><span class="sxs-lookup"><span data-stu-id="640c3-1167">For more information, see [What's New in Windows Workflow Foundation](https://go.microsoft.com/fwlink/?LinkId=228176).</span></span>

<a name="tailored" />

### [!INCLUDE[net_win8_profile](../../../includes/net-win8-profile-md.md)]

[!INCLUDE[win8_appname_long](../../../includes/win8-appname-long-md.md)] <span data-ttu-id="640c3-1168">Приложения разрабатываются для конкретных форм-факторов и в полной мере используют возможности операционной системы Windows.</span><span class="sxs-lookup"><span data-stu-id="640c3-1168">apps are designed for specific form factors and leverage the power of the Windows operating system.</span></span> <span data-ttu-id="640c3-1169">Подмножество [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] или 4.5.1 доступно для разработки приложений [!INCLUDE[win8_appname_long](../../../includes/win8-appname-long-md.md)] для Windows с использованием C# или Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="640c3-1169">A subset of the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] or 4.5.1 is available for building [!INCLUDE[win8_appname_long](../../../includes/win8-appname-long-md.md)] apps for Windows by using C# or Visual Basic.</span></span> <span data-ttu-id="640c3-1170">Это подмножество называется [!INCLUDE[net_win8_profile](../../../includes/net-win8-profile-md.md)] и рассматривается в [обзорной статье](https://go.microsoft.com/fwlink/?LinkId=228491) в Центре разработки для Windows.</span><span class="sxs-lookup"><span data-stu-id="640c3-1170">This subset is called [!INCLUDE[net_win8_profile](../../../includes/net-win8-profile-md.md)] and is discussed in an [overview](https://go.microsoft.com/fwlink/?LinkId=228491) in the Windows Dev Center.</span></span>

### <a name="portable-class-libraries-a-nameportable-"></a><span data-ttu-id="640c3-1171">Переносимые библиотеки классов <a name="portable" /></span><span class="sxs-lookup"><span data-stu-id="640c3-1171">Portable Class Libraries <a name="portable" /></span></span>

<span data-ttu-id="640c3-1172">Проект "Переносимая библиотека классов" для Visual Studio 2012 (и более поздних версий) позволяет писать и собирать управляемые сборки, работающие на нескольких платформах .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="640c3-1172">The Portable Class Library project in Visual Studio 2012 (and later versions) enables you to write and build managed assemblies that work on multiple .NET Framework platforms.</span></span> <span data-ttu-id="640c3-1173">Используя проект "Переносимая библиотека классов", можно выбирать платформы для ориентирования (например, Windows Phone и [!INCLUDE[net_win8_profile](../../../includes/net-win8-profile-md.md)]).</span><span class="sxs-lookup"><span data-stu-id="640c3-1173">Using a Portable Class Library project, you choose the platforms (such as Windows Phone and [!INCLUDE[net_win8_profile](../../../includes/net-win8-profile-md.md)]) to target.</span></span> <span data-ttu-id="640c3-1174">Доступные типы и члены в проекте автоматически ограничиваются типами и членами, общими для этих платформ.</span><span class="sxs-lookup"><span data-stu-id="640c3-1174">The available types and members in your project are automatically restricted to the common types and members across these platforms.</span></span> <span data-ttu-id="640c3-1175">Дополнительные сведения см. в статье [Переносимая библиотека классов](../../standard/cross-platform/cross-platform-development-with-the-portable-class-library.md).</span><span class="sxs-lookup"><span data-stu-id="640c3-1175">For more information, see [Portable Class Library](../../standard/cross-platform/cross-platform-development-with-the-portable-class-library.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="640c3-1176">См. также</span><span class="sxs-lookup"><span data-stu-id="640c3-1176">See also</span></span>

- [<span data-ttu-id="640c3-1177">.NET Framework и внештатные выпуски</span><span class="sxs-lookup"><span data-stu-id="640c3-1177">The .NET Framework and Out-of-Band Releases</span></span>](../get-started/the-net-framework-and-out-of-band-releases.md)
- [<span data-ttu-id="640c3-1178">Улучшения специальных возможностей в .NET Framework</span><span class="sxs-lookup"><span data-stu-id="640c3-1178">What's new in accessibility in the .NET Framework</span></span>](whats-new-in-accessibility.md)
- [<span data-ttu-id="640c3-1179">Новые возможности Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="640c3-1179">What's New in Visual Studio 2017</span></span>](/visualstudio/ide/whats-new-in-visual-studio)
- [<span data-ttu-id="640c3-1180">ASP.NET</span><span class="sxs-lookup"><span data-stu-id="640c3-1180">ASP.NET</span></span>](/aspnet)
- [<span data-ttu-id="640c3-1181">Новые возможности Visual C++</span><span class="sxs-lookup"><span data-stu-id="640c3-1181">What’s New in Visual C++</span></span>](/cpp/what-s-new-for-visual-cpp-in-visual-studio)
