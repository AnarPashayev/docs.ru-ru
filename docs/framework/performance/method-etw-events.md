---
title: События методов (трассировка событий Windows)
ms.date: 03/30/2017
helpviewer_keywords:
- ETW, method events (CLR)
- method events [.NET Framework]
ms.assetid: 167a4459-bb6e-476c-9046-7920880f2bb5
author: mairaw
ms.author: mairaw
ms.openlocfilehash: c7969c0a3f5f828f1a1c0d4f33b82881130c6e15
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61949257"
---
# <a name="method-etw-events"></a>События методов (трассировка событий Windows)

<a name="top"></a> Эти события собирают сведения, связанные с методами. Полезные данные этих событий необходимы для разрешения символов. Кроме того, эти события содержат полезные сведения, например сколько раз вызывался метод.

Все события методов имеют уровень «Информационный (4)». Все подробные события методов имеют уровень «Подробный (5)».

Все события методов вызываются ключевыми словами `JITKeyword` (0x10) или `NGenKeyword` (0x20) при использовании поставщика среды выполнения или ключевыми словами `JitRundownKeyword` (0x10) или `NGENRundownKeyword` (0x20) при использовании поставщика очистки.

События методов среды CLR делятся на следующие категории:

- [События методов среды CLR](#clr_method_events)

- [События маркеров методов среды CLR](#clr_method_marker_events)

- [Подробные события методов среды CLR](#clr_method_verbose_events)

- [Событие MethodJittingStarted](#methodjittingstarted_event)

<a name="clr_method_events"></a>

## <a name="clr-method-events"></a>События методов среды CLR

В таблице ниже показаны ключевое слово и уровень. (Дополнительные сведения см. в разделе [CLR ETW Keywords and Levels](../../../docs/framework/performance/clr-etw-keywords-and-levels.md).)

|Ключевое слово для вызова события|Уровень|
|-----------------------------------|-----------|
|`JITKeyword` (0x10)|Информационный (4)|
|`NGenKeyword` (0x20)|Информационный (4)|
|`JitRundownKeyword` (0x10)|Информационный (4)|
|`NGENRundownKeyword` (0x20)|Информационный (4)|

В таблице ниже представлены сведения о событии.

|событие|Идентификатор события|Описание|
|-----------|--------------|-----------------|
|`MethodLoad_V1`|136|Вызывается, когда метод является JIT-загружаемым или загружается образ NGEN. Динамические и универсальные методы не используют эту версию для загрузки методов. Вспомогательные методы JIT никогда не используют эту версию.|
|`MethodUnLoad_V1`|137|Вызывается, когда выгружается модуль или уничтожается домен приложения. Динамические методы никогда не используют эту версию для выгрузки методов.|
|`MethodDCStart_V1`|137|Перечисляет методы во время очистки запуска.|
|`MethodDCEnd_V1`|138|Перечисляет методы во время очистки завершения.|

В таблице ниже представлены данные события.

|Имя поля|Тип данных|Описание|
|----------------|---------------|-----------------|
|MethodID|win:UInt64|Уникальный идентификатор метода. Для вспомогательных методов JIT устанавливается равным начальному адресу метода.|
|ModuleID|win:UInt64|Идентификатор модуля, к которому относится этот метод (0 для вспомогательных методов JIT).|
|MethodStartAddress|win:UInt64|Начальный адрес метода.|
|MethodSize|win:UInt32|Размер метода.|
|MethodToken|win:UInt32|0 для динамических методов и вспомогательных методов JIT.|
|MethodFlags|win:UInt32|0x1: Динамический метод.<br /><br /> 0x2: Универсальный метод.<br /><br /> 0x4: Метод JIT-скомпилированный код (в противном случае машинный код образа NGEN).<br /><br /> 0x8: Вспомогательный метод.|
|ClrInstanceID|win:UInt16|Уникальный идентификатор экземпляра CLR или CoreCLR.|

[К началу](#top)

<a name="clr_method_marker_events"></a>

## <a name="clr-method-marker-events"></a>События маркеров методов среды CLR

Эти события создаются только при использовании поставщика очистки. Они обозначают окончание перечисления методов во время очистки запуска или завершения. (То есть они вызываются при включении ключевого слова `NGENRundownKeyword`, `JitRundownKeyword`, `LoaderRundownKeyword`или `AppDomainResourceManagementRundownKeyword` .)

В таблице ниже показаны ключевое слово и уровень.

|Ключевое слово для вызова события|Уровень|
|-----------------------------------|-----------|
|`AppDomainResourceManagementRundownKeyword` (0x800)|Информационный (4)|
|`JitRundownKeyword` (0x10)|Информационный (4)|
|`NGENRundownKeyword` (0x20)|Информационный (4)|

В таблице ниже представлены сведения о событии.

|событие|Идентификатор события|Описание|
|-----------|--------------|----------------|
|`DCStartInit_V1`|147|Отправляется перед началом перечисления во время очистки запуска.|
|`DCStartComplete_V1`|145|Отправляется по окончании перечисления во время очистки запуска.|
|`DCEndInit_V1`|148|Отправляется перед началом перечисления во время очистки завершения.|
|`DCEndComplete_V1`|146|Отправляется по окончании перечисления во время очистки завершения.|

В таблице ниже представлены данные события.

|Имя поля|Тип данных|Описание|
|----------------|---------------|-----------------|
|ClrInstanceID|win:UInt16|Уникальный идентификатор экземпляра CLR или CoreCLR.|

[К началу](#top)

<a name="clr_method_verbose_events"></a>

## <a name="clr-method-verbose-events"></a>Подробные события методов среды CLR

В таблице ниже показаны ключевое слово и уровень.

|Ключевое слово для вызова события|Уровень|
|-----------------------------------|-----------|
|`JITKeyword` (0x10)|Подробный (5)|
|`NGenKeyword` (0x20)|Подробный (5)|
|`JitRundownKeyword` (0x10)|Подробный (5)|
|`NGENRundownKeyword` (0x20)|Подробный (5)|

В таблице ниже представлены сведения о событии.

|событие|Идентификатор события|Описание|
|-----------|--------------|-----------------|
|`MethodLoadVerbose_V1`|143|Вызывается, когда метод является JIT-загружаемым или загружается образ NGEN. Динамические и универсальные методы всегда используют эту версию для загрузки методов. Вспомогательные методы JIT всегда используют эту версию.|
|`MethodUnLoadVerbose_V1`|144|Вызывается, когда уничтожается динамический метод, выгружается модуль или разрушается домен приложения. Динамические методы всегда используют эту версию для выгрузки методов.|
|`MethodDCStartVerbose_V1`|141|Перечисляет методы во время очистки запуска.|
|`MethodDCEndVerbose_V1`|142|Перечисляет методы во время очистки завершения.|

В таблице ниже представлены данные события.

|Имя поля|Тип данных|Описание|
|----------------|---------------|-----------------|
|MethodID|win:UInt64|Уникальный идентификатор метода. Для вспомогательных методов JIT устанавливается равным начальному адресу метода.|
|ModuleID|win:UInt64|Идентификатор модуля, к которому относится этот метод (0 для вспомогательных методов JIT).|
|MethodStartAddress|win:UInt64|Начальный адрес.|
|MethodSize|win:UInt32|Длина метода.|
|MethodToken|win:UInt32|0 для динамических методов и вспомогательных методов JIT.|
|MethodFlags|win:UInt32|0x1: Динамический метод.<br /><br /> 0x2: Универсальный метод.<br /><br /> 0x4: Метод, JIT-компиляции (в противном случае созданный программой NGen.exe)<br /><br /> 0x8: Вспомогательный метод.|
|MethodNameSpace|win:UnicodeString|Полное имя пространства имен, связанного с методом.|
|MethodName|win:UnicodeString|Полное имя класса, связанного с методом.|
|MethodSignature|win:UnicodeString|Сигнатура метода (разделенный запятыми список имен типов).|
|ClrInstanceID|win:UInt16|Уникальный идентификатор экземпляра CLR или CoreCLR.|

[К началу](#top)

<a name="methodjittingstarted_event"></a>

## <a name="methodjittingstarted-event"></a>Событие MethodJittingStarted

В таблице ниже показаны ключевое слово и уровень.

|Ключевое слово для вызова события|Уровень|
|-----------------------------------|-----------|
|`JITKeyword` (0x10)|Подробный (5)|
|`NGenKeyword` (0x20)|Подробный (5)|
|`JitRundownKeyword` (0x10)|Подробный (5)|
|`NGENRundownKeyword` (0x20)|Подробный (5)|

В таблице ниже представлены сведения о событии.

|событие|Идентификатор события|Описание|
|-----------|--------------|-----------------|
|`MethodJittingStarted`|145|Вызывается, когда метод компилируется JIT-компилятором.|

В таблице ниже представлены данные события.

|Имя поля|Тип данных|Описание|
|----------------|---------------|-----------------|
|MethodID|win:UInt64|Уникальный идентификатор метода.|
|ModuleID|win:UInt64|Идентификатор модуля, к которому относится этот метод.|
|MethodToken|win:UInt32|0 для динамических методов и вспомогательных методов JIT.|
|MethodILSize|win:UInt32|Размер MSIL для JIT-компилируемого метода.|
|MethodNameSpace|win:UnicodeString|Полное имя класса, связанного с методом.|
|MethodName|win:UnicodeString|Имя метода.|
|MethodSignature|win:UnicodeString|Сигнатура метода (разделенный запятыми список имен типов).|
|ClrInstanceID|win:UInt16|Уникальный идентификатор экземпляра CLR или CoreCLR.|

## <a name="see-also"></a>См. также

- [События трассировки событий Windows в среде CLR](../../../docs/framework/performance/clr-etw-events.md)
