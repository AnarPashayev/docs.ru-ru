---
title: События методов (трассировка событий Windows)
ms.date: 03/30/2017
helpviewer_keywords:
- ETW, method events (CLR)
- method events [.NET Framework]
ms.assetid: 167a4459-bb6e-476c-9046-7920880f2bb5
ms.openlocfilehash: 4937afe8bb23be58b72d082cd5ba200b4948ab4d
ms.sourcegitcommit: 5f236cd78cf09593c8945a7d753e0850e96a0b80
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2020
ms.locfileid: "75715986"
---
# <a name="method-etw-events"></a>События методов (трассировка событий Windows)

Эти события собирают сведения, связанные с методами. Полезные данные этих событий необходимы для разрешения символов. Кроме того, эти события содержат полезные сведения, например сколько раз вызывался метод.

Все события методов имеют уровень «Информационный (4)». Все подробные события методов имеют уровень «Подробный (5)».

Все события методов вызываются ключевыми словами `JITKeyword` (0x10) или `NGenKeyword` (0x20) при использовании поставщика среды выполнения или ключевыми словами `JitRundownKeyword` (0x10) или `NGENRundownKeyword` (0x20) при использовании поставщика очистки.

## <a name="clr-method-events"></a>События методов среды CLR

В таблице ниже показаны ключевое слово и уровень. Дополнительные сведения см. в разделе [Ключевые слова и уровни ETW среды CLR](clr-etw-keywords-and-levels.md).

|Ключевое слово для вызова события|Уровень|
|-----------------------------------|-----------|
|`JITKeyword` (0x10)|Информационный (4)|
|`NGenKeyword` (0x20)|Информационный (4)|
|`JitRundownKeyword` (0x10)|Информационный (4)|
|`NGENRundownKeyword` (0x20)|Информационный (4)|

В таблице ниже представлены сведения о событии.

|Event|Код события|Описание|
|-----------|--------------|-----------------|
|`MethodLoad_V1`|136|Вызывается, когда метод является JIT-загружаемым или загружается образ NGEN. Динамические и универсальные методы не используют эту версию для загрузки методов. Вспомогательные методы JIT никогда не используют эту версию.|
|`MethodUnLoad_V1`|137|Вызывается, когда выгружается модуль или уничтожается домен приложения. Динамические методы никогда не используют эту версию для выгрузки методов.|
|`MethodDCStart_V1`|137|Перечисляет методы во время очистки запуска.|
|`MethodDCEnd_V1`|138|Перечисляет методы во время очистки завершения.|

В таблице ниже представлены данные события.

|Имя поля|Тип данных|Описание|
|----------------|---------------|-----------------|
|MethodID|win:UInt64|Уникальный идентификатор метода. Для вспомогательных методов JIT устанавливается равным начальному адресу метода.|
|ModuleID|win:UInt64|Идентификатор модуля, к которому относится этот метод (0 для вспомогательных методов JIT).|
|MethodStartAddress|win:UInt64|Начальный адрес метода.|
|MethodSize|win:UInt32|Размер метода.|
|MethodToken|win:UInt32|0 для динамических методов и вспомогательных методов JIT.|
|MethodFlags|win:UInt32|0x1: динамический метод.<br /><br /> 0x2: универсальный метод.<br /><br /> 0x4: метод с кодом, скомпилированным JIT-компилятором (в противном случае машинный код образа NGEN).<br /><br /> 0x8: вспомогательный метод.|
|ClrInstanceID|win:UInt16|Уникальный идентификатор экземпляра CLR или CoreCLR.|

## <a name="clr-method-marker-events"></a>События маркеров методов среды CLR

Эти события создаются только при использовании поставщика очистки. Они обозначают окончание перечисления методов во время очистки запуска или завершения. (То есть они вызываются при включении ключевого слова `NGENRundownKeyword`, `JitRundownKeyword`, `LoaderRundownKeyword`или `AppDomainResourceManagementRundownKeyword` .)

В таблице ниже показаны ключевое слово и уровень.

|Ключевое слово для вызова события|Уровень|
|-----------------------------------|-----------|
|`AppDomainResourceManagementRundownKeyword` (0x800)|Информационный (4)|
|`JitRundownKeyword` (0x10)|Информационный (4)|
|`NGENRundownKeyword` (0x20)|Информационный (4)|

В таблице ниже представлены сведения о событии.

|Event|Код события|Описание|
|-----------|--------------|----------------|
|`DCStartInit_V1`|147|Отправляется перед началом перечисления во время очистки запуска.|
|`DCStartComplete_V1`|145|Отправляется по окончании перечисления во время очистки запуска.|
|`DCEndInit_V1`|148|Отправляется перед началом перечисления во время очистки завершения.|
|`DCEndComplete_V1`|146|Отправляется по окончании перечисления во время очистки завершения.|

В таблице ниже представлены данные события.

|Имя поля|Тип данных|Описание|
|----------------|---------------|-----------------|
|ClrInstanceID|win:UInt16|Уникальный идентификатор экземпляра CLR или CoreCLR.|

## <a name="clr-method-verbose-events"></a>Подробные события методов среды CLR

В таблице ниже показаны ключевое слово и уровень.

|Ключевое слово для вызова события|Уровень|
|-----------------------------------|-----------|
|`JITKeyword` (0x10)|Подробный (5)|
|`NGenKeyword` (0x20)|Подробный (5)|
|`JitRundownKeyword` (0x10)|Подробный (5)|
|`NGENRundownKeyword` (0x20)|Подробный (5)|

В таблице ниже представлены сведения о событии.

|Event|Код события|Описание|
|-----------|--------------|-----------------|
|`MethodLoadVerbose_V1`|143|Вызывается, когда метод является JIT-загружаемым или загружается образ NGEN. Динамические и универсальные методы всегда используют эту версию для загрузки методов. Вспомогательные методы JIT всегда используют эту версию.|
|`MethodUnLoadVerbose_V1`|144|Вызывается, когда уничтожается динамический метод, выгружается модуль или разрушается домен приложения. Динамические методы всегда используют эту версию для выгрузки методов.|
|`MethodDCStartVerbose_V1`|141|Перечисляет методы во время очистки запуска.|
|`MethodDCEndVerbose_V1`|142|Перечисляет методы во время очистки завершения.|

В таблице ниже представлены данные события.

|Имя поля|Тип данных|Описание|
|----------------|---------------|-----------------|
|MethodID|win:UInt64|Уникальный идентификатор метода. Для вспомогательных методов JIT устанавливается равным начальному адресу метода.|
|ModuleID|win:UInt64|Идентификатор модуля, к которому относится этот метод (0 для вспомогательных методов JIT).|
|MethodStartAddress|win:UInt64|Начальный адрес.|
|MethodSize|win:UInt32|Длина метода.|
|MethodToken|win:UInt32|0 для динамических методов и вспомогательных методов JIT.|
|MethodFlags|win:UInt32|0x1: динамический метод.<br /><br /> 0x2: универсальный метод.<br /><br /> 0x4: метод, скомпилированный JIT-компилятором (в противном случае созданный программой NGen.exe).<br /><br /> 0x8: вспомогательный метод.|
|MethodNameSpace|win:UnicodeString|Полное имя пространства имен, связанного с методом.|
|MethodName|win:UnicodeString|Полное имя класса, связанного с методом.|
|MethodSignature|win:UnicodeString|Сигнатура метода (разделенный запятыми список имен типов).|
|ClrInstanceID|win:UInt16|Уникальный идентификатор экземпляра CLR или CoreCLR.|

## <a name="methodjittingstarted-event"></a>Событие MethodJittingStarted

В таблице ниже показаны ключевое слово и уровень.

|Ключевое слово для вызова события|Уровень|
|-----------------------------------|-----------|
|`JITKeyword` (0x10)|Подробный (5)|
|`NGenKeyword` (0x20)|Подробный (5)|
|`JitRundownKeyword` (0x10)|Подробный (5)|
|`NGENRundownKeyword` (0x20)|Подробный (5)|

В таблице ниже представлены сведения о событии.

|Event|Код события|Описание|
|-----------|--------------|-----------------|
|`MethodJittingStarted`|145|Вызывается, когда метод компилируется JIT-компилятором.|

В таблице ниже представлены данные события.

|Имя поля|Тип данных|Описание|
|----------------|---------------|-----------------|
|MethodID|win:UInt64|Уникальный идентификатор метода.|
|ModuleID|win:UInt64|Идентификатор модуля, к которому относится этот метод.|
|MethodToken|win:UInt32|0 для динамических методов и вспомогательных методов JIT.|
|MethodILSize|win:UInt32|Размер MSIL для JIT-компилируемого метода.|
|MethodNameSpace|win:UnicodeString|Полное имя класса, связанного с методом.|
|MethodName|win:UnicodeString|Имя метода.|
|MethodSignature|win:UnicodeString|Сигнатура метода (разделенный запятыми список имен типов).|
|ClrInstanceID|win:UInt16|Уникальный идентификатор экземпляра CLR или CoreCLR.|

## <a name="see-also"></a>См. также:

- [События трассировки событий Windows в среде CLR](clr-etw-events.md)
