---
title: События трассировки событий Windows в библиотеке параллельных задач и PLINQ
ms.date: 03/30/2017
helpviewer_keywords:
- tasks, ETW events
ms.assetid: 87a9cff5-d86f-4e44-a06e-d12764d0dce2
ms.openlocfilehash: 61429babf7378b9d271ffd60a6228ae4bfe7a5e5
ms.sourcegitcommit: 62285ec11fa8e8424bab00511a90760c60e63c95
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/20/2020
ms.locfileid: "81644251"
---
# <a name="etw-events-in-task-parallel-library-and-plinq"></a><span data-ttu-id="641a2-102">События трассировки событий Windows в библиотеке параллельных задач и PLINQ</span><span class="sxs-lookup"><span data-stu-id="641a2-102">ETW Events in Task Parallel Library and PLINQ</span></span>

<span data-ttu-id="641a2-103">Библиотека параллельных задач и PLINQ создают события трассировки событий Windows (ETW), которые можно использовать для профилирования и устранения неполадок в приложениях с помощью таких средств, как Windows Performance Analyzer.</span><span class="sxs-lookup"><span data-stu-id="641a2-103">Both the Task Parallel Library and PLINQ generate Event Trace for Windows (ETW) events that you can use to profile and troubleshoot applications by using tools such as the Windows Performance Analyzer.</span></span> <span data-ttu-id="641a2-104">Однако в большинстве сценариев лучший способ профилировать параллельный код приложения — использовать в [изобразительный параллелизм](/visualstudio/profiling/concurrency-visualizer) в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="641a2-104">However, in most scenarios, the best way to profile parallel application code is to use the [Concurrency Visualizer](/visualstudio/profiling/concurrency-visualizer) in Visual Studio.</span></span>

## <a name="task-parallel-library-etw-events"></a><span data-ttu-id="641a2-105">События трассировки событий Windows в библиотеке параллельных задач (TPL)</span><span class="sxs-lookup"><span data-stu-id="641a2-105">Task Parallel Library ETW Events</span></span>

<span data-ttu-id="641a2-106">В структуре EVENT_HEADER используется следующий идентификатор GUID ProviderId для событий, создаваемых <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> и <xref:System.Threading.Tasks.Parallel.Invoke%2A?displayProperty=nameWithType>:</span><span class="sxs-lookup"><span data-stu-id="641a2-106">In the EVENT_HEADER structure, the ProviderId GUID for events generated by <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Parallel.Invoke%2A?displayProperty=nameWithType> is:</span></span>

`0x2e5dba47, 0xa3d2, 0x4d16, 0x8e, 0xe0, 0x66, 0x71, 0xff, 0xdc, 0xd7, 0xb5`

### <a name="parallel-loop-begin"></a><span data-ttu-id="641a2-107">Начало параллельного цикла</span><span class="sxs-lookup"><span data-stu-id="641a2-107">Parallel Loop Begin</span></span>

<span data-ttu-id="641a2-108">EVENT_DESCRIPTOR.Task = 1</span><span class="sxs-lookup"><span data-stu-id="641a2-108">EVENT_DESCRIPTOR.Task = 1</span></span>

<span data-ttu-id="641a2-109">EVENT_DESCRIPTOR.Id = 1</span><span class="sxs-lookup"><span data-stu-id="641a2-109">EVENT_DESCRIPTOR.Id = 1</span></span>

#### <a name="user-data"></a><span data-ttu-id="641a2-110">Данные пользователя</span><span class="sxs-lookup"><span data-stu-id="641a2-110">User Data</span></span>

|<span data-ttu-id="641a2-111">**имя**;</span><span class="sxs-lookup"><span data-stu-id="641a2-111">**Name**</span></span>|<span data-ttu-id="641a2-112">**Тип**</span><span class="sxs-lookup"><span data-stu-id="641a2-112">**Type**</span></span>|<span data-ttu-id="641a2-113">**Описание**</span><span class="sxs-lookup"><span data-stu-id="641a2-113">**Description**</span></span>|
|--------------|--------------|---------------------|
|<span data-ttu-id="641a2-114">OriginatingTaskSchedulerID</span><span class="sxs-lookup"><span data-stu-id="641a2-114">OriginatingTaskSchedulerID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-115">Идентификатор объекта TaskScheduler, который начал цикл.</span><span class="sxs-lookup"><span data-stu-id="641a2-115">The ID of the TaskScheduler that started the loop.</span></span>|
|<span data-ttu-id="641a2-116">OriginatingTaskID</span><span class="sxs-lookup"><span data-stu-id="641a2-116">OriginatingTaskID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-117">Идентификатор задачи, которая начала цикл.</span><span class="sxs-lookup"><span data-stu-id="641a2-117">The ID of the task that started the loop.</span></span>|
|<span data-ttu-id="641a2-118">ForkJoinContextID</span><span class="sxs-lookup"><span data-stu-id="641a2-118">ForkJoinContextID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-119">Уникальный идентификатор, используемый для обозначения вложений и пар для событий с семантикой ветвления и соединения.</span><span class="sxs-lookup"><span data-stu-id="641a2-119">A unique identifier used to indicate nesting and pairs for events with fork/join semantics.</span></span>|
|<span data-ttu-id="641a2-120">OperationType</span><span class="sxs-lookup"><span data-stu-id="641a2-120">OperationType</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-121">Указывает тип цикла:</span><span class="sxs-lookup"><span data-stu-id="641a2-121">Indicates the type of loop:</span></span><br /><br /> <span data-ttu-id="641a2-122">1 = ParallelInvoke</span><span class="sxs-lookup"><span data-stu-id="641a2-122">1 = ParallelInvoke</span></span><br /><br /> <span data-ttu-id="641a2-123">2 = ParallelFor</span><span class="sxs-lookup"><span data-stu-id="641a2-123">2 = ParallelFor</span></span><br /><br /> <span data-ttu-id="641a2-124">3 = ParallelForEach</span><span class="sxs-lookup"><span data-stu-id="641a2-124">3 = ParallelForEach</span></span>|
|<span data-ttu-id="641a2-125">InclusiveFrom</span><span class="sxs-lookup"><span data-stu-id="641a2-125">InclusiveFrom</span></span>|<xref:System.Int64?displayProperty=nameWithType>|<span data-ttu-id="641a2-126">Начальное значение счетчика цикла</span><span class="sxs-lookup"><span data-stu-id="641a2-126">The starting value of the loop counter</span></span>|
|<span data-ttu-id="641a2-127">ExclusiveTo</span><span class="sxs-lookup"><span data-stu-id="641a2-127">ExclusiveTo</span></span>|<xref:System.Int64?displayProperty=nameWithType>|<span data-ttu-id="641a2-128">Конечное значение счетчика цикла</span><span class="sxs-lookup"><span data-stu-id="641a2-128">The ending value of the loop counter</span></span>|

### <a name="parallel-loop-end"></a><span data-ttu-id="641a2-129">Конец параллельного цикла</span><span class="sxs-lookup"><span data-stu-id="641a2-129">Parallel Loop End</span></span>
 <span data-ttu-id="641a2-130">EVENT_DESCRIPTOR.Task = 2</span><span class="sxs-lookup"><span data-stu-id="641a2-130">EVENT_DESCRIPTOR.Task = 2</span></span>

 <span data-ttu-id="641a2-131">EVENT_DESCRIPTOR.Id = 2</span><span class="sxs-lookup"><span data-stu-id="641a2-131">EVENT_DESCRIPTOR.Id = 2</span></span>

#### <a name="user-data"></a><span data-ttu-id="641a2-132">Данные пользователя</span><span class="sxs-lookup"><span data-stu-id="641a2-132">User Data</span></span>

|<span data-ttu-id="641a2-133">**имя**;</span><span class="sxs-lookup"><span data-stu-id="641a2-133">**Name**</span></span>|<span data-ttu-id="641a2-134">**Тип**</span><span class="sxs-lookup"><span data-stu-id="641a2-134">**Type**</span></span>|<span data-ttu-id="641a2-135">**Описание**</span><span class="sxs-lookup"><span data-stu-id="641a2-135">**Description**</span></span>|
|--------------|--------------|---------------------|
|<span data-ttu-id="641a2-136">OriginatingTaskSchedulerID</span><span class="sxs-lookup"><span data-stu-id="641a2-136">OriginatingTaskSchedulerID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-137">Идентификатор объекта TaskScheduler, который начал цикл.</span><span class="sxs-lookup"><span data-stu-id="641a2-137">The ID of the TaskScheduler that started the loop.</span></span>|
|<span data-ttu-id="641a2-138">OriginatingTaskID</span><span class="sxs-lookup"><span data-stu-id="641a2-138">OriginatingTaskID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-139">Идентификатор задачи, которая начала цикл.</span><span class="sxs-lookup"><span data-stu-id="641a2-139">The ID of the task that started the loop.</span></span>|
|<span data-ttu-id="641a2-140">ForkJoinContextID</span><span class="sxs-lookup"><span data-stu-id="641a2-140">ForkJoinContextID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-141">Уникальный идентификатор, используемый для обозначения вложений и пар для событий с семантикой ветвления и соединения.</span><span class="sxs-lookup"><span data-stu-id="641a2-141">A unique identifier used to indicate nesting and pairs for events with fork/join semantics.</span></span>|
|<span data-ttu-id="641a2-142">totalIterations</span><span class="sxs-lookup"><span data-stu-id="641a2-142">totalIterations</span></span>|<xref:System.Int64?displayProperty=nameWithType>|<span data-ttu-id="641a2-143">Общее количество итераций</span><span class="sxs-lookup"><span data-stu-id="641a2-143">The total number of iterations</span></span>|

### <a name="parallel-invoke-begin"></a><span data-ttu-id="641a2-144">Начало параллельного вызова</span><span class="sxs-lookup"><span data-stu-id="641a2-144">Parallel Invoke Begin</span></span>
 <span data-ttu-id="641a2-145">EVENT_DESCRIPTOR.Task = 3</span><span class="sxs-lookup"><span data-stu-id="641a2-145">EVENT_DESCRIPTOR.Task = 3</span></span>

 <span data-ttu-id="641a2-146">EVENT_DESCRIPTOR.Id = 3</span><span class="sxs-lookup"><span data-stu-id="641a2-146">EVENT_DESCRIPTOR.Id = 3</span></span>

#### <a name="user-data"></a><span data-ttu-id="641a2-147">Данные пользователя</span><span class="sxs-lookup"><span data-stu-id="641a2-147">User Data</span></span>

|<span data-ttu-id="641a2-148">**имя**;</span><span class="sxs-lookup"><span data-stu-id="641a2-148">**Name**</span></span>|<span data-ttu-id="641a2-149">**Тип**</span><span class="sxs-lookup"><span data-stu-id="641a2-149">**Type**</span></span>|<span data-ttu-id="641a2-150">**Описание**</span><span class="sxs-lookup"><span data-stu-id="641a2-150">**Description**</span></span>|
|--------------|--------------|---------------------|
|<span data-ttu-id="641a2-151">OriginatingTaskSchedulerID</span><span class="sxs-lookup"><span data-stu-id="641a2-151">OriginatingTaskSchedulerID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-152">Идентификатор объекта TaskScheduler, который начал цикл.</span><span class="sxs-lookup"><span data-stu-id="641a2-152">The ID of the TaskScheduler that started the loop.</span></span>|
|<span data-ttu-id="641a2-153">OriginatingTaskID</span><span class="sxs-lookup"><span data-stu-id="641a2-153">OriginatingTaskID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-154">Идентификатор задачи, которая начала цикл.</span><span class="sxs-lookup"><span data-stu-id="641a2-154">The ID of the task that started the loop.</span></span>|
|<span data-ttu-id="641a2-155">ForkJoinContextID</span><span class="sxs-lookup"><span data-stu-id="641a2-155">ForkJoinContextID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-156">Уникальный идентификатор, используемый для обозначения вложений и пар для событий с семантикой ветвления и соединения.</span><span class="sxs-lookup"><span data-stu-id="641a2-156">A unique identifier used to indicate nesting and pairs for events with fork/join semantics.</span></span>|
|<span data-ttu-id="641a2-157">totalIterations</span><span class="sxs-lookup"><span data-stu-id="641a2-157">totalIterations</span></span>|<xref:System.Int64?displayProperty=nameWithType>|<span data-ttu-id="641a2-158">Общее количество итераций</span><span class="sxs-lookup"><span data-stu-id="641a2-158">The total number of iterations</span></span>|
|<span data-ttu-id="641a2-159">"тип_операции"</span><span class="sxs-lookup"><span data-stu-id="641a2-159">operationType</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-160">Указывает тип цикла:</span><span class="sxs-lookup"><span data-stu-id="641a2-160">Indicates the type of loop:</span></span><br /><br /> <span data-ttu-id="641a2-161">1 = ParallelInvoke</span><span class="sxs-lookup"><span data-stu-id="641a2-161">1 = ParallelInvoke</span></span><br /><br /> <span data-ttu-id="641a2-162">2 = ParallelFor</span><span class="sxs-lookup"><span data-stu-id="641a2-162">2 = ParallelFor</span></span><br /><br /> <span data-ttu-id="641a2-163">3 = ParallelForEach</span><span class="sxs-lookup"><span data-stu-id="641a2-163">3 = ParallelForEach</span></span>|
|<span data-ttu-id="641a2-164">ActionCount</span><span class="sxs-lookup"><span data-stu-id="641a2-164">ActionCount</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-165">Количество действий, которые будут выполнены при параллельном вызове.</span><span class="sxs-lookup"><span data-stu-id="641a2-165">The number of actions that will be executed in the parallel invoke.</span></span>|

### <a name="parallel-invoke-end"></a><span data-ttu-id="641a2-166">Конец параллельного вызова</span><span class="sxs-lookup"><span data-stu-id="641a2-166">Parallel Invoke End</span></span>
 <span data-ttu-id="641a2-167">EVENT_DESCRIPTOR.Task = 4</span><span class="sxs-lookup"><span data-stu-id="641a2-167">EVENT_DESCRIPTOR.Task = 4</span></span>

 <span data-ttu-id="641a2-168">EVENT_DESCRIPTOR.Id = 4</span><span class="sxs-lookup"><span data-stu-id="641a2-168">EVENT_DESCRIPTOR.Id = 4</span></span>

#### <a name="user-data"></a><span data-ttu-id="641a2-169">Данные пользователя</span><span class="sxs-lookup"><span data-stu-id="641a2-169">User Data</span></span>

|<span data-ttu-id="641a2-170">**имя**;</span><span class="sxs-lookup"><span data-stu-id="641a2-170">**Name**</span></span>|<span data-ttu-id="641a2-171">**Тип**</span><span class="sxs-lookup"><span data-stu-id="641a2-171">**Type**</span></span>|<span data-ttu-id="641a2-172">**Описание**</span><span class="sxs-lookup"><span data-stu-id="641a2-172">**Description**</span></span>|
|--------------|--------------|---------------------|
|<span data-ttu-id="641a2-173">OriginatingTaskSchedulerID</span><span class="sxs-lookup"><span data-stu-id="641a2-173">OriginatingTaskSchedulerID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-174">Идентификатор объекта TaskScheduler, который начал цикл.</span><span class="sxs-lookup"><span data-stu-id="641a2-174">The ID of the TaskScheduler that started the loop.</span></span>|
|<span data-ttu-id="641a2-175">OriginatingTaskID</span><span class="sxs-lookup"><span data-stu-id="641a2-175">OriginatingTaskID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-176">Идентификатор задачи, которая начала цикл.</span><span class="sxs-lookup"><span data-stu-id="641a2-176">The ID of the task that started the loop.</span></span>|
|<span data-ttu-id="641a2-177">ForkJoinContextID</span><span class="sxs-lookup"><span data-stu-id="641a2-177">ForkJoinContextID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-178">Уникальный идентификатор, используемый для обозначения вложений и пар для событий с семантикой ветвления и соединения.</span><span class="sxs-lookup"><span data-stu-id="641a2-178">A unique identifier used to indicate nesting and pairs for events with fork/join semantics.</span></span>|

## <a name="plinq-etw-events"></a><span data-ttu-id="641a2-179">События трассировки событий Windows в PLINQ</span><span class="sxs-lookup"><span data-stu-id="641a2-179">PLINQ ETW Events</span></span>
 <span data-ttu-id="641a2-180">GUID EVENT_HEADER.ProviderId для PLINQ:</span><span class="sxs-lookup"><span data-stu-id="641a2-180">The EVENT_HEADER.ProviderId GUID for PLINQ is:</span></span>

`0x159eeeec, 0x4a14, 0x4418, 0xa8, 0xfe, 0xfa, 0xab, 0xcd, 0x98, 0x78, 0x87`

### <a name="parallel-query-begin"></a><span data-ttu-id="641a2-181">Начало параллельного запроса</span><span class="sxs-lookup"><span data-stu-id="641a2-181">Parallel Query Begin</span></span>
 <span data-ttu-id="641a2-182">EVENT_DESCRIPTOR.Task = 1</span><span class="sxs-lookup"><span data-stu-id="641a2-182">EVENT_DESCRIPTOR.Task = 1</span></span>

 <span data-ttu-id="641a2-183">EVENT_DESCRIPTOR.Id = 1</span><span class="sxs-lookup"><span data-stu-id="641a2-183">EVENT_DESCRIPTOR.Id = 1</span></span>

#### <a name="user-data"></a><span data-ttu-id="641a2-184">Данные пользователя</span><span class="sxs-lookup"><span data-stu-id="641a2-184">User Data</span></span>

|<span data-ttu-id="641a2-185">**имя**;</span><span class="sxs-lookup"><span data-stu-id="641a2-185">**Name**</span></span>|<span data-ttu-id="641a2-186">**Тип**</span><span class="sxs-lookup"><span data-stu-id="641a2-186">**Type**</span></span>|<span data-ttu-id="641a2-187">**Описание**</span><span class="sxs-lookup"><span data-stu-id="641a2-187">**Description**</span></span>|
|--------------|--------------|---------------------|
|<span data-ttu-id="641a2-188">OriginatingTaskSchedulerID</span><span class="sxs-lookup"><span data-stu-id="641a2-188">OriginatingTaskSchedulerID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-189">Идентификатор объекта TaskScheduler, который начал цикл.</span><span class="sxs-lookup"><span data-stu-id="641a2-189">The ID of the TaskScheduler that started the loop.</span></span>|
|<span data-ttu-id="641a2-190">OriginatingTaskID</span><span class="sxs-lookup"><span data-stu-id="641a2-190">OriginatingTaskID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-191">Идентификатор задачи, которая начала цикл.</span><span class="sxs-lookup"><span data-stu-id="641a2-191">The ID of the task that started the loop.</span></span>|
|<span data-ttu-id="641a2-192">QueryID</span><span class="sxs-lookup"><span data-stu-id="641a2-192">QueryID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-193">Уникальный идентификатор запроса.</span><span class="sxs-lookup"><span data-stu-id="641a2-193">A unique query identifier.</span></span>|

### <a name="parallel-query-end"></a><span data-ttu-id="641a2-194">Конец параллельного запроса</span><span class="sxs-lookup"><span data-stu-id="641a2-194">Parallel Query End</span></span>
 <span data-ttu-id="641a2-195">EVENT_DESCRIPTOR.Task = 2</span><span class="sxs-lookup"><span data-stu-id="641a2-195">EVENT_DESCRIPTOR.Task = 2</span></span>

 <span data-ttu-id="641a2-196">EVENT_DESCRIPTOR.Id = 2</span><span class="sxs-lookup"><span data-stu-id="641a2-196">EVENT_DESCRIPTOR.Id = 2</span></span>

#### <a name="user-data"></a><span data-ttu-id="641a2-197">Данные пользователя</span><span class="sxs-lookup"><span data-stu-id="641a2-197">User Data</span></span>

|<span data-ttu-id="641a2-198">**имя**;</span><span class="sxs-lookup"><span data-stu-id="641a2-198">**Name**</span></span>|<span data-ttu-id="641a2-199">**Тип**</span><span class="sxs-lookup"><span data-stu-id="641a2-199">**Type**</span></span>|<span data-ttu-id="641a2-200">**Описание**</span><span class="sxs-lookup"><span data-stu-id="641a2-200">**Description**</span></span>|
|--------------|--------------|---------------------|
|<span data-ttu-id="641a2-201">OriginatingTaskSchedulerID</span><span class="sxs-lookup"><span data-stu-id="641a2-201">OriginatingTaskSchedulerID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-202">Идентификатор объекта TaskScheduler, который начал цикл.</span><span class="sxs-lookup"><span data-stu-id="641a2-202">The ID of the TaskScheduler that started the loop.</span></span>|
|<span data-ttu-id="641a2-203">OriginatingTaskID</span><span class="sxs-lookup"><span data-stu-id="641a2-203">OriginatingTaskID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-204">Идентификатор задачи, которая начала цикл.</span><span class="sxs-lookup"><span data-stu-id="641a2-204">The ID of the task that started the loop.</span></span>|
|<span data-ttu-id="641a2-205">QueryID</span><span class="sxs-lookup"><span data-stu-id="641a2-205">QueryID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="641a2-206">Уникальный идентификатор запроса.</span><span class="sxs-lookup"><span data-stu-id="641a2-206">A unique query identifier.</span></span>|

## <a name="see-also"></a><span data-ttu-id="641a2-207">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="641a2-207">See also</span></span>

- [<span data-ttu-id="641a2-208">ETW Events in the .NET Framework</span><span class="sxs-lookup"><span data-stu-id="641a2-208">ETW Events in the .NET Framework</span></span>](etw-events.md)
- [<span data-ttu-id="641a2-209">Библиотека параллельных задач (TPL)</span><span class="sxs-lookup"><span data-stu-id="641a2-209">Task Parallel Library (TPL)</span></span>](../../standard/parallel-programming/task-parallel-library-tpl.md)
- [<span data-ttu-id="641a2-210">Parallel LINQ (PLINQ)</span><span class="sxs-lookup"><span data-stu-id="641a2-210">Parallel LINQ (PLINQ)</span></span>](../../standard/parallel-programming/introduction-to-plinq.md)
