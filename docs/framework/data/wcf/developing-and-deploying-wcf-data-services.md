---
title: Разработка и развертывание служб WCF Data Services
ms.date: 03/30/2017
helpviewer_keywords:
- WCF Data Services, developing
- WCF Data Services, deploying
- deploying [WCF Data Services
- developing applications [WCF Data Services]
ms.assetid: 6557c0e3-5aea-4f6e-bc14-77ad317a168b
ms.openlocfilehash: 61527e51ea4d28cfe4589f6bed32b3c505443c22
ms.sourcegitcommit: 43cbde34970f5f38f30c43cd63b9c7e2e83717ae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/11/2020
ms.locfileid: "81121169"
---
# <a name="develop-and-deploy-wcf-data-services"></a>Разработка и развертывание служб данных WCF

В этой статье содержится информация о разработке и развертывании Служб данных WCF. Для получения дополнительной базовой информации об [Overview](wcf-data-services-overview.md)услугах данных WCF [см.](getting-started-with-wcf-data-services.md)

## <a name="develop-wcf-data-services"></a>Разработка служб данных WCF

При использовании WCF Data Services для создания службы данных, поддерживающей протокол открытых данных (OData), необходимо выполнить следующие основные задачи во время разработки:

1. **Определение модели данных**

     WCF Data Services поддерживает множество поставщиков услуг передачи данных, которые позволяют определить модель данных на основе данных из различных источников данных, от реляционных баз данных до поздних типов данных. Для получения дополнительной [информации см.](data-services-providers-wcf-data-services.md)

2. **Создание службы данных**

     Самая базовая служба данных предоставляет класс, производный от класса <xref:System.Data.Services.DataService%601> , с типом `T` , представляющим имя контейнера сущностей, квалифицированное пространством имен. Дополнительные сведения см. в разделе [Defining WCF Data Services](defining-wcf-data-services.md).

3. **Настройка службы данных**

     По умолчанию WCF Data Services отселяет доступ к ресурсам, которые подвергаются воздействию контейнера сущности. Интерфейс <xref:System.Data.Services.DataServiceConfiguration> позволяет настроить доступ к ресурсам и службам операций, указать поддерживаемую версию OData, а также определить другие поведения в масштабах всей службы, такие как поведение пакетирования или максимальное количество сущностей, которые могут быть возвращены в одном канале ответов. Для получения дополнительной информации [см.](configuring-the-data-service-wcf-data-services.md)

Эта статья в первую очередь охватывает разработку и развертывание служб передачи данных с помощью Visual Studio. Для получения информации о гибкости, предоставляемой WCF Data Services для раскрытия ваших данных в виде каналов OData, [см.](defining-wcf-data-services.md)

### <a name="choose-a-development-web-server"></a>Выберите веб-сервер разработки

При разработке службы данных WCF в качестве ASP.NET приложения или ASP.NET веб-сайта с помощью Visual Studio 2015, у вас есть выбор веб-серверов, на которых можно запустить службу данных во время разработки. Следующие веб-серверы интегрируются с Visual Studio, чтобы облегчить тестирование и отладку служб передачи данных на локальном компьютере.

1. **Локальный сервер служб IIS**

     При создании службы данных, которая является ASP.NET приложением или веб-сайтом ASP.NET, который работает на Информационных службах Интернета (IIS), мы рекомендуем вам разработать и протестировать службу данных с помощью IIS на локальном компьютере. Запуск службы данных в IIS упрощает трассировку HTTP-запросов во время отладки. Это также позволяет заранее определить необходимые права, которые требуются службам IIS для доступа к файлам, базам данных и другим ресурсам для службы данных. Для запуска службы данных на IIS необходимо убедиться, что IIS и Windows Communication Foundation (WCF) установлены и настроены правильно, и предоставить доступ к учетным записям IIS в файловой системе и базах данных. Для получения дополнительной информации см. [How to: Develop a WCF Data Service Running on IIS](how-to-develop-a-wcf-data-service-running-on-iis.md).

    > [!NOTE]
    > Необходимо запустить Visual Studio с правами администратора, чтобы создать среду для настройки локального сервера IIS.

2. **Сервер разработки Visual Studio**

     Visual Studio включает в себя встроенный веб-сервер Visual Studio Development Server, который является веб-сервером по умолчанию для ASP.NET проектов. Этот веб-сервер предназначен для запуска ASP.NET проектов на локальном компьютере во время разработки. [Быстрый запуск WCF Data Services](quickstart-wcf-data-services.md) показывает, как создать службу данных, которая работает в сервере разработки Visual Studio.

     Вы должны знать о следующих ограничениях при использовании сервера разработки визуальных студий для разработки службы данных:

    - Доступ к этому серверу возможен только с локального компьютера.

    - Этот сервер прослушивает `localhost` и указанный порт, отличный от порта 80, который по умолчанию настроен для HTTP-сообщений. Дополнительные сведения см. в разделе [Веб-серверы в Visual Studio для веб-проектов ASP.NET](https://docs.microsoft.com/previous-versions/aspnet/58wxa9w5(v=vs.120)).

    - На этом сервере служба данных работает в контексте текущей учетной записи пользователя. Например, если вы работаете в качестве пользователя уровня администратора, служба данных, работаевная в Visual Studio Development Server, будет иметь привилегии уровня администратора. Это может обеспечить службе данных доступ к ресурсам, для которых у нее не будет прав после развертывания на сервере служб IIS.

    - На этом сервере отсутствуют дополнительные возможности служб IIS, такие как проверка подлинности.

    - Этот сервер не может обрабатывать фрагментированные потоки HTTP, которые отправляются по умолчанию клиентом WCF Data Services при доступе к большим бинарным данным из службы данных. Для получения дополнительной [Streaming Provider](streaming-provider-wcf-data-services.md)информации см.

    - Этот сервер имеет проблемы`.`с обработкой периода () символ в URL, даже если этот символ поддерживается WCF Data Services в ключевых значениях.

    > [!TIP]
    > Даже если вы можете использовать Visual Studio Development Server для тестирования служб данных во время разработки, следует проверить их снова после развертывания на веб-сервере, который работает IIS.

3. **Среда разработки Microsoft Azure**

     Windows Azure Tools for Visual Studio включает в себя интегрированный набор инструментов для разработки служб Windows Azure в Visual Studio. С помощью этих средств можно разрабатывать службы данных, которые могут развертываться на Microsoft Azure, а также тестировать службу данных на локальном компьютере перед развертыванием. Используйте эти инструменты при использовании Visual Studio для разработки службы данных, которая работает на платформе Windows Azure. Для получения информации об [Azure tools for Visual Studio 2015](../../../azure/sdk/vs2015-install.md)установке инструментов, см. Для получения дополнительной информации о разработке службы данных, которая работает на Windows Azure, см. [Deploying an OData Service in Windows Azure](https://docs.microsoft.com/archive/blogs/astoriateam/deploying-an-odata-service-in-windows-azure)

### <a name="development-tips"></a>Советы по разработке

При разработке службы данных необходимо учитывать следующее:

- Определите требования по безопасности к службе данных, если планируется проверять подлинность пользователей или ограничивать доступ определенным пользователям. Дополнительные сведения см. в разделе [Securing WCF Data Services](securing-wcf-data-services.md).

- Программа проверки HTTP может быть очень полезной при развертывании службы данных, позволяя проверять содержимое сообщений запросов и ответов. Любой планировщик сетевых пакетов, способный отображать необработанные пакеты, можно использовать для проверки HTTP-запросов к службе данных и ответов от нее.

- При отладке службы передачи данных может потребоваться получить больше информации об ошибке из службы данных, чем во время обычной работы. Дополнительные сведения об ошибках можно получить из службы данных, установив свойство <xref:System.Data.Services.DataServiceConfiguration.UseVerboseErrors%2A> в <xref:System.Data.Services.DataServiceConfiguration> значение `true` , а свойство <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A> атрибута <xref:System.ServiceModel.Description.ServiceDebugBehavior> класса службы данных — в значение `true`. Для получения дополнительной информации смотрите сообщение [Оботражка WCF Data Services](https://docs.microsoft.com/archive/blogs/phaniraj/debugging-wcf-data-services). Можно также включить отслеживание в WCF для просмотра исключений, поднятых в слое обмена сообщениями HTTP. Для получения дополнительной информации см. [Configuring Tracing](../../wcf/diagnostics/tracing/configuring-tracing.md).

- Служба данных обычно разрабатывается как проект приложения ASP.NET, но вы также можете создать службу данных в качестве проекта веб-сайта ASP.NET в Visual Studio. Для получения информации о различиях между двумя типами проектов см. [Веб-проекты приложений по сравнению с проектами веб-сайтов в Visual Studio](https://docs.microsoft.com/previous-versions/aspnet/dd547590(v=vs.110)).

- При создании службы данных с помощью диалогового окна **Add New Item** в Visual Studio служба данных размещается ASP.NET в IIS. В то время как ASP.NET и IIS является хостом по умолчанию для службы передачи данных, другие варианты хостинга поддерживаются. Для получения дополнительной [информации](hosting-the-data-service-wcf-data-services.md)см.

## <a name="deploy-wcf-data-services"></a>Развертывание служб данных WCF

Службы данных WCF обеспечивают гибкость в выборе процесса, в котором будет размещаться служба данных. Visual Studio можно развернуть службу данных на следующих платформах:

- **Веб-сервер, размещенный в службах IIS**

    Когда служба данных разрабатывается как ASP.NET проект, она может быть развернута на веб-сервере IIS с помощью стандартных процессов развертывания ASP.NET.  Visual Studio предоставляет следующие технологии развертывания для ASP.NET, в зависимости от вида ASP.NET проекта, в котором размещается развернутая служба данных.

  - **Технологии развертывания для веб-приложений ASP.NET**

    - [Как создать пакет веб-развертывания в Visual Studio](https://docs.microsoft.com/previous-versions/aspnet/dd465323(v=vs.110))

    - [Как: Развертывание веб-проекта с помощью одного клика Опубликовать в визуальной студии](https://docs.microsoft.com/previous-versions/aspnet/dd465337(v=vs.110))

  - **Технологии развертывания для веб-узлов ASP.NET**

    - [Как: Копирование файлов веб-сайта с помощью инструмента копирования веб-сайта](https://docs.microsoft.com/previous-versions/aspnet/c95809c0(v=vs.100))

    - [Как: Публиковать веб-сайты](https://docs.microsoft.com/previous-versions/aspnet/20yh9f1b(v=vs.100))

    - [Пошаговая версия: Развертывание ASP.NET веб-приложения с использованием XCOPY](https://docs.microsoft.com/previous-versions/aspnet/f735abw9(v=vs.100))

     Для получения дополнительной информации о вариантах развертывания ASP.NET приложения см. [Веб-обзор развертывания для Visual Studio и ASP.NET.](https://docs.microsoft.com/previous-versions/aspnet/dd394698(v=vs.110))

    > [!TIP]
    > Прежде чем пытаться выполнить развертывание службы данных в IIS, обязательно протестируйте развертывание на веб-сервере, где работают службы IIS. Для получения дополнительной информации см. [How to: Develop a WCF Data Service Running on IIS](how-to-develop-a-wcf-data-service-running-on-iis.md).

- **Microsoft Azure**

     Вы можете развернуть службу данных в Windows Azure с помощью инструментов Windows Azure для визуальной студии. Вы можете скачать Windows Azure Tools для визуальной студии из [Центра загрузки Microsoft.](https://go.microsoft.com/fwlink/?LinkID=201848) Для получения дополнительной информации о развертывании службы [Deploying an OData Service in Windows Azure](https://docs.microsoft.com/archive/blogs/astoriateam/deploying-an-odata-service-in-windows-azure)данных в Windows Azure см.

### <a name="deployment-considerations"></a>Требования к развертыванию

При разработке службы данных необходимо учитывать следующее:

- При развертывании службы данных, использующей поставщика entity Framework для доступа к базе данных S'L Server, возможно, вам также придется распространять структуры данных, данные или и то, и другое при развертывании служб ы данных. Visual Studio может автоматически создавать скрипты (файлы.sql) для этого в базе данных назначения, и эти скрипты могут быть включены в пакет веб-развертывания приложения ASP.NET. Для получения дополнительной информации [см.](https://docs.microsoft.com/previous-versions/dd465343(v=vs.100)) Для веб-сайта ASP.NET вы можете сделать это с помощью **базы данных Издательский мастер** в visual Studio. Для получения дополнительной информации, [см.](https://docs.microsoft.com/previous-versions/aspnet/bb907585(v=vs.100))

- Поскольку WCF Data Services включает базовую реализацию WCF, вы можете использовать Windows Server AppFabric для мониторинга службы данных, развернутой в IIS, работая на Windows Server. Для получения дополнительной информации об использовании Windows Server [Tracking WCF Data Services with Windows Server AppFabric](https://docs.microsoft.com/archive/blogs/rjacobs/tracking-wcf-data-services-with-windows-server-appfabric)AppFabric для мониторинга службы данных, см.

## <a name="see-also"></a>См. также

- [Размещение службы данных](hosting-the-data-service-wcf-data-services.md)
- [Защита служб WCF Data Services](securing-wcf-data-services.md)
- [Определение служб данных WCF](defining-wcf-data-services.md)
