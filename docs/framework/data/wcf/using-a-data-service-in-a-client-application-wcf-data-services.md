---
title: Использование служб данных в клиентском приложении (службы данных WCF)
ms.date: 03/30/2017
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, getting started
ms.assetid: 90872d0c-e989-4490-b3e9-54afb10d33d4
ms.openlocfilehash: 49e5ad2e6ae3dc50a0f48fcc3df2f7ec49ed7f88
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/15/2020
ms.locfileid: "90544405"
---
# <a name="using-a-data-service-in-a-client-application-wcf-data-services"></a><span data-ttu-id="29729-102">Использование служб данных в клиентском приложении (службы данных WCF)</span><span class="sxs-lookup"><span data-stu-id="29729-102">Using a Data Service in a Client Application (WCF Data Services)</span></span>
<span data-ttu-id="29729-103">Вы можете получить доступ к службе, предоставляющей канал Open Data Protocol (OData), предоставив универсальный код ресурса (URI) для веб-браузера.</span><span class="sxs-lookup"><span data-stu-id="29729-103">You can access a service that exposes an Open Data Protocol (OData) feed by supplying a URI to a Web browser.</span></span> <span data-ttu-id="29729-104">URI предоставляет адрес ресурса, и сообщения запроса отправляются по этим адресам для доступа или изменения базовых данных, представляемых ресурсом.</span><span class="sxs-lookup"><span data-stu-id="29729-104">The URI provides the address of a resource, and request messages are sent to these addresses to access or change the underlying data that the resource represents.</span></span> <span data-ttu-id="29729-105">Браузер выдает команду HTTP GET и возвращает запрошенный ресурс в качестве веб-канала OData.</span><span class="sxs-lookup"><span data-stu-id="29729-105">The browser issues an HTTP GET command and returns the requested resource as an OData feed.</span></span> <span data-ttu-id="29729-106">Дополнительные сведения см. в разделе [доступ к службе из веб-браузера](accessing-the-service-from-a-web-browser-wcf-data-services-quickstart.md).</span><span class="sxs-lookup"><span data-stu-id="29729-106">For more information, see [Accessing the Service from a Web Browser](accessing-the-service-from-a-web-browser-wcf-data-services-quickstart.md).</span></span>  
  
 <span data-ttu-id="29729-107">Хотя веб-браузер может быть полезен для тестирования того, что служба OData возвращает ожидаемые данные, производственные службы OData, позволяющие создавать, обновлять и удалять данные, обычно обращаются к коду приложения или языкам сценариев на веб-странице.</span><span class="sxs-lookup"><span data-stu-id="29729-107">Although a Web browser may be useful for testing that an OData service returns the expected data, production OData services that enable you to also create, update, and delete data are generally accessed by application code or scripting languages in a Web page.</span></span> <span data-ttu-id="29729-108">В этом разделе приводятся общие сведения о доступе к каналам OData из клиентского приложения.</span><span class="sxs-lookup"><span data-stu-id="29729-108">This topic provides an overview of how to access OData feeds from a client application.</span></span>  
  
## <a name="accessing-and-changing-data-using-rest-semantics"></a><span data-ttu-id="29729-109">Доступ и изменение данных с помощью семантики REST</span><span class="sxs-lookup"><span data-stu-id="29729-109">Accessing and Changing Data Using REST Semantics</span></span>  
 <span data-ttu-id="29729-110">OData помогает обеспечить взаимодействие между службами, которые предоставляют веб-каналы OData и приложениям, использующим каналы OData.</span><span class="sxs-lookup"><span data-stu-id="29729-110">OData helps guarantee interoperability between services that expose OData feeds and applications that consume OData feeds.</span></span> <span data-ttu-id="29729-111">Приложения обращаются к данным и изменяют их в службе на основе OData, отправляя сообщения запросов конкретного действия HTTP и с URI, который обращается к ресурсу сущности, для которого должно быть выполнено действие.</span><span class="sxs-lookup"><span data-stu-id="29729-111">Applications access and change data in an OData-based service by sending request messages of a specific HTTP action and with a URI that addresses an entity resource against which the action should be performed.</span></span> <span data-ttu-id="29729-112">Если необходимо передать данные сущности, они передаются в специально закодированных полезных данных в тексте сообщения.</span><span class="sxs-lookup"><span data-stu-id="29729-112">When entity data must be supplied, it is supplied as a specifically encoded payload in the body of the message.</span></span>  
  
### <a name="http-actions"></a><span data-ttu-id="29729-113">Действия HTTP</span><span class="sxs-lookup"><span data-stu-id="29729-113">HTTP Actions</span></span>  
 <span data-ttu-id="29729-114">OData поддерживает следующие действия HTTP для выполнения операций создания, чтения, обновления и удаления данных сущности, которые представляет адресуемый ресурс.</span><span class="sxs-lookup"><span data-stu-id="29729-114">OData supports the following HTTP actions to perform create, read, update, and delete operations on the entity data that the addressed resource represents:</span></span>  
  
- <span data-ttu-id="29729-115">**HTTP Get** — это действие по умолчанию при доступе к ресурсу из браузера.</span><span class="sxs-lookup"><span data-stu-id="29729-115">**HTTP GET** - This is the default action when a resource is accessed from a browser.</span></span> <span data-ttu-id="29729-116">Сообщение запроса не содержит полезных данных, а возвращается метод ответа с полезными данными, содержащими запрошенные данные.</span><span class="sxs-lookup"><span data-stu-id="29729-116">No payload is supplied in the request message, and a response method with a payload that contains the requested data is returned.</span></span>  
  
- <span data-ttu-id="29729-117">**HTTP POST** — вставляет новые данные сущности в указанный ресурс.</span><span class="sxs-lookup"><span data-stu-id="29729-117">**HTTP POST** - Inserts new entity data into the supplied resource.</span></span> <span data-ttu-id="29729-118">Вставляемые данные передаются в виде полезных данных сообщения запроса.</span><span class="sxs-lookup"><span data-stu-id="29729-118">Data to be inserted is supplied in the payload of the request message.</span></span> <span data-ttu-id="29729-119">Полезные данные ответного сообщения содержат данные созданной сущности.</span><span class="sxs-lookup"><span data-stu-id="29729-119">The payload of the response message contains the data for the newly created entity.</span></span> <span data-ttu-id="29729-120">К ним относятся все ключевые значения, формируемые автоматически.</span><span class="sxs-lookup"><span data-stu-id="29729-120">This includes any autogenerated key values.</span></span> <span data-ttu-id="29729-121">Заголовок содержит также URI, адресующий ресурс новой сущности.</span><span class="sxs-lookup"><span data-stu-id="29729-121">The header also contains the URI that addresses the new entity resource.</span></span>  
  
- <span data-ttu-id="29729-122">**HTTP DELETE** — удаляет данные сущности, которые представляет указанный ресурс.</span><span class="sxs-lookup"><span data-stu-id="29729-122">**HTTP DELETE** - Deletes the entity data that the specified resource represents.</span></span> <span data-ttu-id="29729-123">Полезные данные в сообщениях запроса и ответа отсутствуют.</span><span class="sxs-lookup"><span data-stu-id="29729-123">A payload is not present in the request or response messages.</span></span>  
  
- <span data-ttu-id="29729-124">**Http-размещение** — заменяет существующие данные сущности в запрошенном ресурсе новыми данными, которые передаются в полезных данных сообщения запроса.</span><span class="sxs-lookup"><span data-stu-id="29729-124">**HTTP PUT** - Replaces existing entity data at the requested resource with new data that is supplied in the payload of the request message.</span></span>  
  
- <span data-ttu-id="29729-125">**Слияние HTTP** — из-за неэффективного выполнения операции удаления, за которой следует Вставка в источнике данных только для изменения данных сущности, OData вводит новое действие HTTP MERGE.</span><span class="sxs-lookup"><span data-stu-id="29729-125">**HTTP MERGE** - Because of inefficiencies in executing a delete followed by an insert in the data source just to change entity data, OData introduces a new HTTP MERGE action.</span></span> <span data-ttu-id="29729-126">Полезные данные сообщения запроса содержат свойства, которые необходимо изменить в адресуемом ресурсе сущности.</span><span class="sxs-lookup"><span data-stu-id="29729-126">The payload of the request message contains the properties that must be changed on the addressed entity resource.</span></span> <span data-ttu-id="29729-127">Поскольку СЛИЯНИе по протоколу HTTP не определено в спецификации HTTP, может потребоваться дополнительная обработка для маршрутизации HTTP-запроса на СЛИЯНИе через серверы, не поддерживающие OData.</span><span class="sxs-lookup"><span data-stu-id="29729-127">Because HTTP MERGE is not defined in the HTTP specification, it may require additional processing to route a HTTP MERGE request through non-OData aware servers.</span></span>  
  
 <span data-ttu-id="29729-128">Дополнительные сведения см. в разделе [OData: Operations](https://www.odata.org/documentation/odata-version-2-0/operations/).</span><span class="sxs-lookup"><span data-stu-id="29729-128">For more information, see [OData: Operations](https://www.odata.org/documentation/odata-version-2-0/operations/).</span></span>
  
### <a name="payload-formats"></a><span data-ttu-id="29729-129">Форматы представления информации</span><span class="sxs-lookup"><span data-stu-id="29729-129">Payload Formats</span></span>  
 <span data-ttu-id="29729-130">Для запросов HTTP PUT, HTTP POST или HTTP MERGE полезные данные сообщения запроса содержат данные сущности, отправляемые службе данных.</span><span class="sxs-lookup"><span data-stu-id="29729-130">For an HTTP PUT, HTTP POST, or HTTP MERGE request, the payload of a request message contains the entity data that you send to the data service.</span></span> <span data-ttu-id="29729-131">Содержимое полезных данных зависит от формата данных сообщения.</span><span class="sxs-lookup"><span data-stu-id="29729-131">The contents of the payload depend on the data format of the message.</span></span> <span data-ttu-id="29729-132">Ответы HTTP на все действия, кроме DELETE, также содержат полезные данные.</span><span class="sxs-lookup"><span data-stu-id="29729-132">The HTTP responses to all actions except DELETE also contain such a payload.</span></span> <span data-ttu-id="29729-133">OData поддерживает следующие форматы полезных данных для доступа к данным и их изменения в службе:</span><span class="sxs-lookup"><span data-stu-id="29729-133">OData supports the following payload formats for accessing and changing data with the service:</span></span>  
  
- <span data-ttu-id="29729-134">**Atom** — это кодировка сообщений на основе XML, которая определяется OData в качестве расширения для протокола публикации Atom (AtomPub) для обеспечения обмена данными по протоколу HTTP для веб-каналов, подкастов, вики-страниц и функций Интернета на основе XML.</span><span class="sxs-lookup"><span data-stu-id="29729-134">**Atom** - An XML-based message encoding that is defined by OData as an extension to the Atom Publishing Protocol (AtomPub) to enable data exchange over HTTP for Web feeds, podcasts, wikis, and XML-based Internet functionality.</span></span> <span data-ttu-id="29729-135">Дополнительные сведения см. в разделе [OData: формат Atom](https://www.odata.org/documentation/odata-version-2-0/atom-format/).</span><span class="sxs-lookup"><span data-stu-id="29729-135">For more information, see [OData: Atom Format](https://www.odata.org/documentation/odata-version-2-0/atom-format/).</span></span>
  
- <span data-ttu-id="29729-136">**JSON** -НОТАЦИЯ объектов JavaScript (JSON) — это упрощенный формат обмена данными, основанный на подмножестве языка программирования JavaScript.</span><span class="sxs-lookup"><span data-stu-id="29729-136">**JSON** - JavaScript Object Notation (JSON) is a lightweight data interchange format that is based on a subset of the JavaScript Programming Language.</span></span> <span data-ttu-id="29729-137">Дополнительные сведения см. в разделе [формат OData: JSON](https://www.odata.org/documentation/odata-version-2-0/json-format/).</span><span class="sxs-lookup"><span data-stu-id="29729-137">For more information, see [OData: JSON Format](https://www.odata.org/documentation/odata-version-2-0/json-format/).</span></span>
  
 <span data-ttu-id="29729-138">Формат сообщения полезных данных запрашивается в заголовке HTTP-запроса.</span><span class="sxs-lookup"><span data-stu-id="29729-138">The message format of the payload is requested in the header of the HTTP request message.</span></span> <span data-ttu-id="29729-139">Дополнительные сведения см. в разделе [OData: Operations](https://www.odata.org/documentation/odata-version-2-0/operations/).</span><span class="sxs-lookup"><span data-stu-id="29729-139">For more information, see [OData: Operations](https://www.odata.org/documentation/odata-version-2-0/operations/).</span></span>
  
## <a name="accessing-and-changing-data-using-client-libraries"></a><span data-ttu-id="29729-140">Доступ и изменения данных с помощью клиентских библиотек</span><span class="sxs-lookup"><span data-stu-id="29729-140">Accessing and Changing Data Using Client Libraries</span></span>  
 <span data-ttu-id="29729-141">WCF Data Services включает клиентские библиотеки, которые позволяют более просто использовать веб-канал OData из .NET Framework и клиентских приложений на основе Silverlight.</span><span class="sxs-lookup"><span data-stu-id="29729-141">WCF Data Services includes client libraries that enable you to more easily consume an OData feed from .NET Framework and Silverlight-based client applications.</span></span> <span data-ttu-id="29729-142">Эти библиотеки упрощают отправку и получение сообщений HTTP.</span><span class="sxs-lookup"><span data-stu-id="29729-142">These libraries simplify sending and receiving HTTP messages.</span></span> <span data-ttu-id="29729-143">Кроме того, они преобразуют полезные данные сообщений в объекты CLR, представляющие данные сущностей.</span><span class="sxs-lookup"><span data-stu-id="29729-143">They also translate the message payload into CLR objects that represent entity data.</span></span> <span data-ttu-id="29729-144">Клиентские библиотеки содержат два базовых класса: <xref:System.Data.Services.Client.DataServiceContext> и <xref:System.Data.Services.Client.DataServiceQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="29729-144">The client libraries feature the two core classes <xref:System.Data.Services.Client.DataServiceContext> and <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span> <span data-ttu-id="29729-145">Эти классы позволяют отправлять запросы к службе данных и работать с возвращенными данными сущностей как с объектами CLR.</span><span class="sxs-lookup"><span data-stu-id="29729-145">These classes enable you to query a data service and then work with the returned entity data as CLR objects.</span></span> <span data-ttu-id="29729-146">Дополнительные сведения см. в разделе [WCF Data Services Client Library](wcf-data-services-client-library.md) и [WCF Data Services (Silverlight)](/previous-versions/windows/silverlight/dotnet-windows-silverlight/cc838234(v=vs.95)).</span><span class="sxs-lookup"><span data-stu-id="29729-146">For more information, see [WCF Data Services Client Library](wcf-data-services-client-library.md) and [WCF Data Services (Silverlight)](/previous-versions/windows/silverlight/dotnet-windows-silverlight/cc838234(v=vs.95)).</span></span>  
  
 <span data-ttu-id="29729-147">Для добавления ссылки на службу данных можно использовать диалоговое окно **Добавление ссылки на службу** в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="29729-147">You can use the **Add Service Reference** dialog in Visual Studio to add a reference to a data service.</span></span> <span data-ttu-id="29729-148">Эта программа запрашивает метаданные службы у упомянутой службы данных и формирует контекст <xref:System.Data.Services.Client.DataServiceContext>, который представляет службу данных, а также клиентские классы службы данных, которые представляют сущности.</span><span class="sxs-lookup"><span data-stu-id="29729-148">This tool requests the service metadata from a referenced data service and generates the <xref:System.Data.Services.Client.DataServiceContext> that represents a data service, as well as generates the client data service classes that represent entities.</span></span> <span data-ttu-id="29729-149">Дополнительные сведения см. [в разделе Создание клиентской библиотеки службы данных](generating-the-data-service-client-library-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="29729-149">For more information, see [Generating the Data Service Client Library](generating-the-data-service-client-library-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="29729-150">Существуют доступные библиотеки программирования, которые можно использовать для использования веб-канала OData в других типах клиентских приложений.</span><span class="sxs-lookup"><span data-stu-id="29729-150">There are programming libraries available that you can use to consume an OData feed in other kinds of client applications.</span></span> <span data-ttu-id="29729-151">Дополнительные сведения о пакете OData SDK см. в разделе [пример кода для ODATA SDK](https://www.odata.org/ecosystem/#sdk).</span><span class="sxs-lookup"><span data-stu-id="29729-151">For more information on OData SDK, see [OData SDK - Sample Code](https://www.odata.org/ecosystem/#sdk).</span></span>
  
## <a name="see-also"></a><span data-ttu-id="29729-152">См. также</span><span class="sxs-lookup"><span data-stu-id="29729-152">See also</span></span>

- [<span data-ttu-id="29729-153">Доступ к ресурсам служб данных</span><span class="sxs-lookup"><span data-stu-id="29729-153">Accessing Data Service Resources</span></span>](accessing-data-service-resources-wcf-data-services.md)
- [<span data-ttu-id="29729-154">Краткое руководство</span><span class="sxs-lookup"><span data-stu-id="29729-154">Quickstart</span></span>](quickstart-wcf-data-services.md)
