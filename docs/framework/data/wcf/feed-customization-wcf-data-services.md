---
title: Настройка каналов (службы данных WCF)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, feeds
- WCF Data Services, Atom protocol
- Atom Publishing Protocol [WCF Data Services]
- WCF Data Services, customizing feeds
ms.assetid: 0d1a39bc-6462-4683-bd7d-e74e0fd28a85
ms.openlocfilehash: f35c1387d54fdc02cb421af477671a5a75939c57
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "64626398"
---
# <a name="feed-customization-wcf-data-services"></a><span data-ttu-id="1a9c1-102">Настройка каналов (службы данных WCF)</span><span class="sxs-lookup"><span data-stu-id="1a9c1-102">Feed Customization (WCF Data Services)</span></span>
[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <span data-ttu-id="1a9c1-103">использует [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] для предоставления данных в виде канала.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-103">uses the [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] to expose data as a feed.</span></span> [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] <span data-ttu-id="1a9c1-104">поддерживает форматы Atom и нотации объектов JavaScript (JSON) для веб-каналов данных.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-104">supports both Atom and JavaScript Object Notation (JSON) formats for data feeds.</span></span> <span data-ttu-id="1a9c1-105">При использовании потока Atom [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] предоставляет стандартный метод сериализации данных, таких как сущности и связи, в формате XML, которое может быть включено в тексте HTTP-сообщения.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-105">When you use an Atom feed, [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] provides a standard method to serialize data, such as entities and relationships, into an XML format that can be included in the body of HTTP message.</span></span> [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] <span data-ttu-id="1a9c1-106">Определяет свойства сущности по умолчанию сопоставление между данными, содержащимися в сущностях и элементах Atom.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-106">defines a default entity-property mapping between the data that is contained in entities and Atom elements.</span></span> <span data-ttu-id="1a9c1-107">Дополнительные сведения см. в разделе [OData: Формат Atom](https://go.microsoft.com/fwlink/?LinkID=185794).</span><span class="sxs-lookup"><span data-stu-id="1a9c1-107">For more information, see [OData: Atom Format](https://go.microsoft.com/fwlink/?LinkID=185794).</span></span>  
  
 <span data-ttu-id="1a9c1-108">Возможна ситуация, когда требуется сериализация данных свойства, возвращаемых службой данных, в настраиваемом виде, а не в стандартном формате канала.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-108">You may have an application scenario that requires that the property data returned by the data service be serialized in a customized manner rather than in the standard feed format.</span></span> <span data-ttu-id="1a9c1-109">С помощью [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)], можно настроить сериализацию в канале данных, чтобы свойства сущности сопоставлялись с неиспользуемыми элементами и атрибутами сущности или со специализированными элементами записи в веб-канала.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-109">With [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)], you can customize the serialization in a data feed so that properties of an entity may be mapped to unused elements and attributes of an entry or to custom elements of an entry in the feed.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1a9c1-110">Настройка канала поддерживается только для каналов Atom.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-110">Feed customization is only supported for Atom feeds.</span></span> <span data-ttu-id="1a9c1-111">Специализированные каналы не возвращаются при запросе в формате JSON.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-111">Custom feeds are not returned when the JSON format is requested for the returned feed.</span></span>  
  
 <span data-ttu-id="1a9c1-112">С помощью [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] можно определить альтернативное сопоставление «сущность-свойство» для полезных данных канала Atom путем применения атрибутов к типам сущностей в модели данных вручную.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-112">With [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], you can define an alternate entity-property mapping for an Atom payload by manually applying attributes to entity types in the data model.</span></span> <span data-ttu-id="1a9c1-113">Поставщик источника данных службы данных определяет метод применения этих атрибутов.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-113">The data source provider of the data service determines how you should apply these attributes.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="1a9c1-114">При определении специализированных каналов необходимо убедиться, что все свойства сущности, которые имеют определенные пользовательские сопоставления, включены в проекцию.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-114">When you define custom feeds, you must guarantee that all entity properties that have custom mappings defined are included in the projection.</span></span> <span data-ttu-id="1a9c1-115">Если сопоставленное свойство сущности не включено в проекцию, может произойти потеря данных.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-115">When a mapped entity property is not included in the projection, data loss might occur.</span></span> <span data-ttu-id="1a9c1-116">Дополнительные сведения см. в разделе [проекции запросов](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="1a9c1-116">For more information, see [Query Projections](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md).</span></span>  
  
## <a name="customizing-feeds-with-the-entity-framework-provider"></a><span data-ttu-id="1a9c1-117">Настройка каналов с помощью поставщика Entity Framework</span><span class="sxs-lookup"><span data-stu-id="1a9c1-117">Customizing Feeds with the Entity Framework Provider</span></span>  
 <span data-ttu-id="1a9c1-118">Модель данных, используемая с поставщиком [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)], представлена в виде XML в EDMX-файле.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-118">The data model used with the [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] provider is represented as XML in the .edmx file.</span></span> <span data-ttu-id="1a9c1-119">В данном случае атрибуты, определяющие специализированные каналы, добавляются к элементам `EntityType` и `Property`, представляющим типы сущностей и свойства в модели данных.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-119">In this case, the attributes that define custom feeds are added to the `EntityType` and `Property` elements that represent entity types and properties in the data model.</span></span> <span data-ttu-id="1a9c1-120">Эти атрибуты настройки потока не определены в [ \[MC-CSDL\]: Формат файла определения концептуальной схемы](https://go.microsoft.com/fwlink/?LinkId=159072), который является форматом, [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] поставщик использует для определения модели данных.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-120">These feed customization attributes are not defined in [\[MC-CSDL\]: Conceptual Schema Definition File Format](https://go.microsoft.com/fwlink/?LinkId=159072), which is the format that the [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] provider uses to define the data model.</span></span> <span data-ttu-id="1a9c1-121">Поэтому атрибуты настройки канала должны быть объявлены в специальном пространстве имен схемы, определенном как `m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"`.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-121">Therefore, you must declare feed customization attributes in a specific schema namespace, which is defined as `m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"`.</span></span> <span data-ttu-id="1a9c1-122">Следующий фрагмент XML иллюстрирует применение атрибутов настройки канала к элементам `Property` типа сущности `Products`, определяющего свойства `ProductName`, `ReorderLevel` и `UnitsInStock`.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-122">The following XML fragment shows feed customization attributes applied to `Property` elements of the `Products` entity type that define the `ProductName`, `ReorderLevel`, and `UnitsInStock` properties.</span></span>  
  
 [!code-xml[Astoria Custom Feeds#EdmFeedAttributes](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria_custom_feeds/xml/northwind.csdl#edmfeedattributes)]  
  
 <span data-ttu-id="1a9c1-123">Эти атрибуты порождают следующий специализированный канал данных для набора сущностей `Products`.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-123">These attributes produce the following customized data feed for the `Products` entity set.</span></span> <span data-ttu-id="1a9c1-124">В данном специализированном канале данных значение свойства `ProductName` отображается как в элементе `author`, так и в свойстве `ProductName` элемента, а свойство `UnitsInStock` отображается в специализированном элементе с собственным уникальным пространством имен и со свойством `ReorderLevel` в качестве атрибута:</span><span class="sxs-lookup"><span data-stu-id="1a9c1-124">In the customized data feed, the `ProductName` property value is displayed in both in the `author` element and as the `ProductName` property element, and the `UnitsInStock` property is displayed in a custom element that has its own unique namespace and with the `ReorderLevel` property as an attribute:</span></span>  
  
 [!code-xml[Astoria Custom Feeds#EdmFeedResultProduct](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria_custom_feeds/xml/edmfeedresult.xml#edmfeedresultproduct)]  
  
 <span data-ttu-id="1a9c1-125">Дополнительные сведения см. в разделе [Как Настройка каналов с использованием поставщика Entity Framework](../../../../docs/framework/data/wcf/how-to-customize-feeds-with-ef-provider-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="1a9c1-125">For more information, see [How to: Customize Feeds with the Entity Framework Provider](../../../../docs/framework/data/wcf/how-to-customize-feeds-with-ef-provider-wcf-data-services.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1a9c1-126">Поскольку расширения модели данных не поддерживаются конструктором сущностей, необходимо вручную модифицировать XML-файл, содержащий модель данных.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-126">Because extensions to the data model are not supported by the Entity Designer, you must manually modify the XML file that contains the data model.</span></span> <span data-ttu-id="1a9c1-127">Дополнительные сведения о EDMX-файл, который формируется [!INCLUDE[adonet_edm](../../../../includes/adonet-edm-md.md)] средства, см. в разделе [.edmx Общие сведения о файле (платформа Entity Framework)](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/cc982042(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="1a9c1-127">For more information about the .edmx file that is generated by the [!INCLUDE[adonet_edm](../../../../includes/adonet-edm-md.md)] tools, see [.edmx File Overview (Entity Framework)](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/cc982042(v=vs.100)).</span></span>  
  
### <a name="custom-feed-attributes"></a><span data-ttu-id="1a9c1-128">Настраиваемые атрибуты канала</span><span class="sxs-lookup"><span data-stu-id="1a9c1-128">Custom Feed Attributes</span></span>  
 <span data-ttu-id="1a9c1-129">В следующей таблице приведены XML-атрибуты, с помощью которых можно настроить каналы, добавляемые в язык определения концептуальной схемы (CSDL) с определением модели данных.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-129">The following table shows the XML attributes that customize feeds that you can add to the conceptual schema definition language (CSDL) that defines the data model.</span></span> <span data-ttu-id="1a9c1-130">Эти атрибуты эквивалентны свойствам объекта <xref:System.Data.Services.Common.EntityPropertyMappingAttribute>, используемым при работе с поставщиком отражения.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-130">These attributes are equivalent to the properties of the <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> used with the reflection provider.</span></span>  
  
|<span data-ttu-id="1a9c1-131">Имя атрибута</span><span class="sxs-lookup"><span data-stu-id="1a9c1-131">Attribute name</span></span>|<span data-ttu-id="1a9c1-132">Описание</span><span class="sxs-lookup"><span data-stu-id="1a9c1-132">Description</span></span>|  
|--------------------|-----------------|  
|`FC_ContentKind`|<span data-ttu-id="1a9c1-133">Указывает тип содержимого.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-133">Indicates the type of the content.</span></span> <span data-ttu-id="1a9c1-134">Следующие ключевые слова определяют типы содержимого синдикации.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-134">The following keywords define syndication content types.</span></span><br /><br /> <span data-ttu-id="1a9c1-135">`text:` Значение свойства отображается в веб-канала в виде текста.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-135">`text:` The property value is displayed in the feed as text.</span></span><br /><br /> <span data-ttu-id="1a9c1-136">`html:` Значение свойства отображается в веб-канала в формате HTML.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-136">`html:` The property value is displayed in the feed as HTML.</span></span><br /><br /> <span data-ttu-id="1a9c1-137">`xhtml:` Значение свойства отображается в канале как HTML в формате XML.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-137">`xhtml:` The property value is displayed in the feed as XML-formatted HTML.</span></span><br /><br /> <span data-ttu-id="1a9c1-138">Эти ключевые слова эквивалентны значениям перечисления <xref:System.Data.Services.Common.SyndicationTextContentKind>, используемым при работе с поставщиком отражения.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-138">These keywords are equivalent to the values of the <xref:System.Data.Services.Common.SyndicationTextContentKind> enumeration used with the reflection provider.</span></span><br /><br /> <span data-ttu-id="1a9c1-139">Этот атрибут не поддерживается, если используются атрибуты `FC_NsPrefix` и `FC_NsUri`.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-139">This attribute is not supported when the `FC_NsPrefix` and `FC_NsUri` attributes are used.</span></span><br /><br /> <span data-ttu-id="1a9c1-140">Если задается значение `xhtml` для атрибута `FC_ContentKind`, то необходимо убедиться, что значение свойства содержит XML в правильном формате.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-140">When you specify a value of `xhtml` for the `FC_ContentKind` attribute, you must ensure that the property value contains properly formatted XML.</span></span> <span data-ttu-id="1a9c1-141">Служба данных возвращает значение, не выполняя никаких преобразований.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-141">The data service returns the value without performing any transformations.</span></span> <span data-ttu-id="1a9c1-142">Необходимо также убедиться, что префиксы элементов XML в возвращаемом XML имеют URI-код пространства имен и префикс, определенный в сопоставленном канале.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-142">You must also ensure that any XML element prefixes in the returned XML have a namespace URI and prefix defined in the mapped feed.</span></span>|  
|`FC_KeepInContent`|<span data-ttu-id="1a9c1-143">Указывает, что значение упомянутого свойства должно быть включено как в раздел содержимого канала, так и в сопоставленное расположение.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-143">Indicates that the referenced property value should be included both in the content section of the feed and in the mapped location.</span></span> <span data-ttu-id="1a9c1-144">Допустимые значения: `true` и `false`.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-144">Valid values are `true` and `false`.</span></span> <span data-ttu-id="1a9c1-145">Чтобы результирующий канал обратной совместимостью с более ранними версиями [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], укажите значение `true` чтобы убедиться в том, что значение включается в разделе содержимого веб-канала.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-145">To make the resulting feed backward-compatible with earlier versions of [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], specify a value of `true` to make sure that the value is included in the content section of the feed.</span></span>|  
|`FC_NsPrefix`|<span data-ttu-id="1a9c1-146">Префикс пространства имен элемента XML в сопоставлении, не включенном в синдикацию.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-146">The namespace prefix of the XML element in a non-syndication mapping.</span></span> <span data-ttu-id="1a9c1-147">Этот атрибут должен быть использован с атрибутом `FC_NsUri` и не может быть использован с атрибутом `FC_ContentKind`.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-147">This attribute must be used with the `FC_NsUri` attribute and cannot be used with the `FC_ContentKind` attribute.</span></span>|  
|`FC_NsUri`|<span data-ttu-id="1a9c1-148">URI пространства имен элемента XML в сопоставлении, не включенном в синдикацию.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-148">The namespace URI of the XML element in a non-syndication mapping.</span></span> <span data-ttu-id="1a9c1-149">Этот атрибут должен быть использован с атрибутом `FC_NsPrefix` и не может быть использован с атрибутом `FC_ContentKind`.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-149">This attribute must be used with the `FC_NsPrefix` attribute and cannot be used with the `FC_ContentKind` attribute.</span></span>|  
|`FC_SourcePath`|<span data-ttu-id="1a9c1-150">Путь свойства сущности, к которой применяется данное правило сопоставления.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-150">The path of the property of the entity to which this feed mapping rule applies.</span></span> <span data-ttu-id="1a9c1-151">Этот атрибут поддерживается только при использовании в элементе `EntityType`.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-151">This attribute is only supported when it is used in an `EntityType` element.</span></span><br /><br /> <span data-ttu-id="1a9c1-152">Свойство <xref:System.Data.Services.Common.EntityPropertyMappingAttribute.SourcePath%2A> не может непосредственно ссылаться на сложный тип.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-152">The <xref:System.Data.Services.Common.EntityPropertyMappingAttribute.SourcePath%2A> property cannot directly reference a complex type.</span></span> <span data-ttu-id="1a9c1-153">Для сложных типов необходимо использовать выражение пути, свойства в котором разделены символом косой черты (`/`).</span><span class="sxs-lookup"><span data-stu-id="1a9c1-153">For complex types, you must use a path expression where property names are separated by a backslash (`/`) character.</span></span> <span data-ttu-id="1a9c1-154">Например, допускаются следующие значения для типа сущности `Person` с целым свойством `Age` и сложное свойство</span><span class="sxs-lookup"><span data-stu-id="1a9c1-154">For example, the following values are allowed for an entity type `Person` with an integer property `Age` and a complex property</span></span><br /><br /> <span data-ttu-id="1a9c1-155">`Address`:</span><span class="sxs-lookup"><span data-stu-id="1a9c1-155">`Address`:</span></span><br /><br /> `Age`<br /><br /> `Address/Street`<br /><br /> <span data-ttu-id="1a9c1-156">Свойству <xref:System.Data.Services.Common.EntityPropertyMappingAttribute.SourcePath%2A> нельзя задать значение, содержащее пробел или любой символ, недопустимый в имени свойства.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-156">The <xref:System.Data.Services.Common.EntityPropertyMappingAttribute.SourcePath%2A> property cannot be set to a value that contains a space or any other character that is not valid in a property name.</span></span>|  
|`FC_TargetPath`|<span data-ttu-id="1a9c1-157">Имя целевого элемента результирующего канала, с которым сопоставляется данное свойство.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-157">The name of the target element of the resulting feed to map the property.</span></span> <span data-ttu-id="1a9c1-158">Этот элемент может быть элементом, определенным в спецификации Atom, либо специализированным элементом.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-158">This element can be an element defined by the Atom specification or a custom element.</span></span><br /><br /> <span data-ttu-id="1a9c1-159">Следующие ключевые слова соответствуют стандартным значениям целевых путей синдикации, указывающим на конкретные расположения в канале [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1a9c1-159">The following keywords are predefined syndication target-path values that point to specific location in an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed.</span></span><br /><br /> <span data-ttu-id="1a9c1-160">`SyndicationAuthorEmail:` `atom:email` Дочерний элемент элемента `atom:author` элемент.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-160">`SyndicationAuthorEmail:` The `atom:email` child element of the `atom:author` element.</span></span><br /><br /> <span data-ttu-id="1a9c1-161">`SyndicationAuthorName:` `atom:name` Дочерний элемент элемента `atom:author` элемент.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-161">`SyndicationAuthorName:` The `atom:name` child element of the `atom:author` element.</span></span><br /><br /> <span data-ttu-id="1a9c1-162">`SyndicationAuthorUri:` `atom:uri` Дочерний элемент элемента `atom:author` элемент.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-162">`SyndicationAuthorUri:` The `atom:uri` child element of the `atom:author` element.</span></span><br /><br /> <span data-ttu-id="1a9c1-163">`SyndicationContributorEmail:` `atom:email` Дочерний элемент элемента `atom:contributor` элемент.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-163">`SyndicationContributorEmail:` The `atom:email` child element of the `atom:contributor` element.</span></span><br /><br /> <span data-ttu-id="1a9c1-164">`SyndicationContributorName:` `atom:name` Дочерний элемент элемента `atom:contributor` элемент.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-164">`SyndicationContributorName:` The `atom:name` child element of the `atom:contributor` element.</span></span><br /><br /> <span data-ttu-id="1a9c1-165">`SyndicationContributorUri:` `atom:uri` Дочерний элемент элемента `atom:contributor` элемент.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-165">`SyndicationContributorUri:` The `atom:uri` child element of the `atom:contributor` element.</span></span><br /><br /> <span data-ttu-id="1a9c1-166">`SyndicationCustomProperty:` Элемент пользовательского свойства.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-166">`SyndicationCustomProperty:` A custom property element.</span></span> <span data-ttu-id="1a9c1-167">При сопоставлении с пользовательским элементом целевой объект должен быть выражением пути, в котором вложенные элементы разделяются обратной косой чертой (`/`), а атрибуты определяются амперсандом (`@`).</span><span class="sxs-lookup"><span data-stu-id="1a9c1-167">When mapping to a custom element, the target must be a path expression in which nested elements are separated by a backslash (`/`) and attributes are specified by an ampersand (`@`).</span></span> <span data-ttu-id="1a9c1-168">В следующем примере строка `UnitsInStock/@ReorderLevel` сопоставляет значение свойства с атрибутом с именем `ReorderLevel` у обозначенного именем `UnitsInStock` дочернего элемента корневого элемента entry.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-168">In the following example, the string `UnitsInStock/@ReorderLevel` maps a property value to an attribute named `ReorderLevel` on a child element named `UnitsInStock` of the root entry element.</span></span><br /><br /> `<Property Name="ReorderLevel" Type="Int16"               m:FC_TargetPath="UnitsInStock/@ReorderLevel"               m:FC_NsPrefix="Northwind"               m:FC_NsUri="http://schemas.examples.microsoft.com/dataservices"               m:FC_KeepInContent="false"               />`<br /><br /> <span data-ttu-id="1a9c1-169">Если целью является имя специализированного элемента, необходимо также задать атрибуты `FC_NsPrefix` и `FC_NsUri`.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-169">When the target is a custom element name, the `FC_NsPrefix` and `FC_NsUri` attributes must also be specified.</span></span><br /><br /> <span data-ttu-id="1a9c1-170">`SyndicationPublished:` `atom:published` Элемент.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-170">`SyndicationPublished:` The `atom:published` element.</span></span><br /><br /> <span data-ttu-id="1a9c1-171">`SyndicationRights:` `atom:rights` Элемент.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-171">`SyndicationRights:` The `atom:rights` element.</span></span><br /><br /> <span data-ttu-id="1a9c1-172">`SyndicationSummary:` `atom:summary` Элемент.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-172">`SyndicationSummary:` The `atom:summary` element.</span></span><br /><br /> <span data-ttu-id="1a9c1-173">`SyndicationTitle:` `atom:title` Элемент.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-173">`SyndicationTitle:` The `atom:title` element.</span></span><br /><br /> <span data-ttu-id="1a9c1-174">`SyndicationUpdated:` `atom:updated` Элемент.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-174">`SyndicationUpdated:` The `atom:updated` element.</span></span><br /><br /> <span data-ttu-id="1a9c1-175">Эти ключевые слова эквивалентны значениям перечисления <xref:System.Data.Services.Common.SyndicationItemProperty>, используемым при работе с поставщиком отражения.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-175">These keywords are equivalent to the values of the <xref:System.Data.Services.Common.SyndicationItemProperty> enumeration used with the reflection provider.</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="1a9c1-176">В именах и значениях атрибутов учитывается регистр.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-176">Attribute names and values are case-sensitive.</span></span> <span data-ttu-id="1a9c1-177">Атрибуты можно применять либо к элементу `EntityType`, либо к одному или нескольким элементам `Property`, но не к тем и другим одновременно.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-177">Attributes can be applied either to the `EntityType` element or to one or more `Property` elements, but not to both.</span></span>  
  
## <a name="customizing-feeds-with-the-reflection-provider"></a><span data-ttu-id="1a9c1-178">Настройка каналов с помощью поставщика отражения</span><span class="sxs-lookup"><span data-stu-id="1a9c1-178">Customizing Feeds with the Reflection Provider</span></span>  
 <span data-ttu-id="1a9c1-179">Для настройки каналов в модели данных, реализованной с использованием поставщика отражения, добавьте один или несколько экземпляров атрибута <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> к классам, представляющим типы сущностей в модели данных.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-179">To customize feeds for a data model that was implemented by using the reflection provider, add one or more instances of the <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> attribute to the classes that represent entity types in the data model.</span></span> <span data-ttu-id="1a9c1-180">Свойства класса <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> соответствуют атрибутам настройки канала, описанным в предыдущем разделе.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-180">The properties of the <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> class correspond to the feed customization attributes that are described in the previous section.</span></span> <span data-ttu-id="1a9c1-181">Следующий пример иллюстрирует объявление типа `Order` с сопоставлением специализированного канала, определенным для обоих свойств.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-181">The following is an example of the declaration of the `Order` type, with custom feed mapping defined for both properties.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1a9c1-182">Определения модели данных в этом примере в разделе [как: Создание службы данных с помощью поставщика отражения](../../../../docs/framework/data/wcf/create-a-data-service-using-rp-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="1a9c1-182">The data model for this example is defined in the topic [How to: Create a Data Service Using the Reflection Provider](../../../../docs/framework/data/wcf/create-a-data-service-using-rp-wcf-data-services.md).</span></span>  
  
 [!code-csharp[Astoria Custom Feeds#CustomOrderFeed](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_custom_feeds/cs/orderitems.svc.cs#customorderfeed)]
 [!code-vb[Astoria Custom Feeds#CustomOrderFeed](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_custom_feeds/vb/orderitems.svc.vb#customorderfeed)]  
  
 <span data-ttu-id="1a9c1-183">Эти атрибуты порождают следующий специализированный канал данных для набора сущностей `Orders`.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-183">These attributes produce the following customized data feed for the `Orders` entity set.</span></span> <span data-ttu-id="1a9c1-184">В этом специализированном канале, `OrderId` значение свойства отображается только в `title` элемент `entry` и `Customer` значение свойства отображается как в `author` элемент и в качестве `Customer` элемент свойства:</span><span class="sxs-lookup"><span data-stu-id="1a9c1-184">In this customized feed, the `OrderId` property value displays only in the `title` element of the `entry` and the `Customer` property value displays both in the `author` element and as the `Customer` property element:</span></span>  
  
 [!code-xml[Astoria Custom Feeds#IQueryableFeedResult](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria_custom_feeds/xml/iqueryablefeedresult.xml#iqueryablefeedresult)]  
  
 <span data-ttu-id="1a9c1-185">Дополнительные сведения см. в разделе [Как Настройка каналов с поставщиком отражения](../../../../docs/framework/data/wcf/how-to-customize-feeds-with-the-reflection-provider-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="1a9c1-185">For more information, see [How to: Customize Feeds with the Reflection Provider](../../../../docs/framework/data/wcf/how-to-customize-feeds-with-the-reflection-provider-wcf-data-services.md).</span></span>  
  
## <a name="customizing-feeds-with-a-custom-data-service-provider"></a><span data-ttu-id="1a9c1-186">Настройка каналов с помощью специализированного поставщика служб данных</span><span class="sxs-lookup"><span data-stu-id="1a9c1-186">Customizing Feeds with a Custom Data Service Provider</span></span>  
 <span data-ttu-id="1a9c1-187">Настройка каналов для модели данных, определенной с использованием специализированного поставщика служб данных, осуществляется для типа ресурса путем вызова метода <xref:System.Data.Services.Providers.ResourceType.AddEntityPropertyMappingAttribute%2A> для типа <xref:System.Data.Services.Providers.ResourceType>, который представляет тип сущности в модели данных.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-187">Feed customization for a data model defined by using a custom data service provider is defined for a resource type by calling the <xref:System.Data.Services.Providers.ResourceType.AddEntityPropertyMappingAttribute%2A> on the <xref:System.Data.Services.Providers.ResourceType> that represents an entity type in the data model.</span></span> <span data-ttu-id="1a9c1-188">Дополнительные сведения см. в разделе [специализированные поставщики служб данных](../../../../docs/framework/data/wcf/custom-data-service-providers-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="1a9c1-188">For more information, see [Custom Data Service Providers](../../../../docs/framework/data/wcf/custom-data-service-providers-wcf-data-services.md).</span></span>  
  
## <a name="consuming-custom-feeds"></a><span data-ttu-id="1a9c1-189">Использование специализированных каналов</span><span class="sxs-lookup"><span data-stu-id="1a9c1-189">Consuming Custom Feeds</span></span>  
 <span data-ttu-id="1a9c1-190">Если приложение напрямую использует [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] веб-канала, он должен иметь возможность обрабатывать любыми специализированными элементами и атрибутами возвращенного канала.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-190">When your application directly consumes an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed, it must be able to process any customized elements and attributes in the returned feed.</span></span> <span data-ttu-id="1a9c1-191">При реализации специализированных каналов в модели данных, независимо от поставщика службы данных, конечная точка `$metadata` возвращает сведения о специализированном канале в виде атрибутов специализированного канала в формате CSDL.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-191">When you have implemented custom feeds in your data model, regardless of the data service provider, the `$metadata` endpoint returns custom feed information as custom feed attributes in the CSDL returned by the data service.</span></span> <span data-ttu-id="1a9c1-192">При использовании **Add Service Reference** диалоговое окно или [datasvcutil.exe](../../../../docs/framework/data/wcf/wcf-data-service-client-utility-datasvcutil-exe.md) для создания клиентских классов службы данных, настроенный веб-канала атрибуты используются для обеспечения запросов и ответов на службы данных обрабатываются правильно.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-192">When you use the **Add Service Reference** dialog or the [datasvcutil.exe](../../../../docs/framework/data/wcf/wcf-data-service-client-utility-datasvcutil-exe.md) tool to generate client data service classes, the customized feed attributes are used to guarantee that requests and responses to the data service are handled correctly.</span></span>  
  
## <a name="feed-customization-considerations"></a><span data-ttu-id="1a9c1-193">Рекомендации по настройке канала</span><span class="sxs-lookup"><span data-stu-id="1a9c1-193">Feed Customization Considerations</span></span>  
 <span data-ttu-id="1a9c1-194">При определении пользовательских сопоставлений канала необходимо учитывать следующее.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-194">You should consider the following when defining custom feed mappings.</span></span>  
  
- <span data-ttu-id="1a9c1-195">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] Клиент рассматривает сопоставленные элементы в канале как пустые если они содержат только пробелы.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-195">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client treats mapped elements in a feed as empty when they contain only white space.</span></span> <span data-ttu-id="1a9c1-196">По этой причине на стороне клиента с тем же пробелы не материализуются сопоставленные элементы, которые содержат только пробелы.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-196">Because of this, mapped elements that contain only white space are not materialized on the client with the same white space.</span></span> <span data-ttu-id="1a9c1-197">Чтобы сохранить этот пробел на стороне клиента, необходимо задать значение `KeepInContext` для `true` в атрибуте сопоставления канала.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-197">To preserve this white space on the client, you must set the value of `KeepInContext` to `true` in the feed mapping attribute.</span></span>  
  
## <a name="versioning-requirements"></a><span data-ttu-id="1a9c1-198">Требования к управлению версиями</span><span class="sxs-lookup"><span data-stu-id="1a9c1-198">Versioning Requirements</span></span>  
 <span data-ttu-id="1a9c1-199">При настройке канала предъявляются следующие требования к управлению версиями протокола [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="1a9c1-199">Feed customization has the following [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protocol versioning requirements:</span></span>  
  
- <span data-ttu-id="1a9c1-200">Для настройки канала требуется, чтобы и клиент, и служба данных поддерживали версию 2.0 протокола [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] и последующие версии.</span><span class="sxs-lookup"><span data-stu-id="1a9c1-200">Feed customization requires that both the client and data service support version 2.0 of the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protocol and later versions.</span></span>  
  
 <span data-ttu-id="1a9c1-201">Дополнительные сведения см. в разделе [управление версиями службы данных](../../../../docs/framework/data/wcf/data-service-versioning-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="1a9c1-201">For more information, see [Data Service Versioning](../../../../docs/framework/data/wcf/data-service-versioning-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1a9c1-202">См. также</span><span class="sxs-lookup"><span data-stu-id="1a9c1-202">See also</span></span>

- [<span data-ttu-id="1a9c1-203">Поставщик отражений</span><span class="sxs-lookup"><span data-stu-id="1a9c1-203">Reflection Provider</span></span>](../../../../docs/framework/data/wcf/reflection-provider-wcf-data-services.md)
- [<span data-ttu-id="1a9c1-204">Поставщик Entity Framework</span><span class="sxs-lookup"><span data-stu-id="1a9c1-204">Entity Framework Provider</span></span>](../../../../docs/framework/data/wcf/entity-framework-provider-wcf-data-services.md)
