---
title: Привязка данных к элементам управления (службы данных WCF)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- client applications, WCF Data Services
- WCF Data Services, client library
- data binding, WCF Data Services
ms.assetid: b32e1d49-c214-4cb1-867e-88fbb3d08c8d
ms.openlocfilehash: 178d77c225144497982487afa00f4493e17d1744
ms.sourcegitcommit: 636af37170ae75a11c4f7d1ecd770820e7dfe7bd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/07/2020
ms.locfileid: "91805217"
---
# <a name="binding-data-to-controls-wcf-data-services"></a><span data-ttu-id="60c87-102">Привязка данных к элементам управления (службы данных WCF)</span><span class="sxs-lookup"><span data-stu-id="60c87-102">Binding Data to Controls (WCF Data Services)</span></span>

<span data-ttu-id="60c87-103">С помощью WCF Data Services можно привязать элементы управления, такие как `ComboBox` и, `ListView` к экземпляру <xref:System.Data.Services.Client.DataServiceCollection%601> класса.</span><span class="sxs-lookup"><span data-stu-id="60c87-103">With WCF Data Services, you can bind controls such as the `ComboBox` and `ListView` controls to an instance of the <xref:System.Data.Services.Client.DataServiceCollection%601> class.</span></span> <span data-ttu-id="60c87-104">Эта коллекция, наследуемая от <xref:System.Collections.ObjectModel.ObservableCollection%601> класса, содержит данные из канала Open Data Protocol (OData).</span><span class="sxs-lookup"><span data-stu-id="60c87-104">This collection, which inherits from the <xref:System.Collections.ObjectModel.ObservableCollection%601> class, contains the data from an Open Data Protocol (OData) feed.</span></span> <span data-ttu-id="60c87-105">Этот класс представляет коллекцию динамических данных, обеспечивающих выдачу уведомлений при добавлении и удалении элементов.</span><span class="sxs-lookup"><span data-stu-id="60c87-105">This class represents a dynamic data collection that provides notifications when items get added or removed.</span></span> <span data-ttu-id="60c87-106">При использовании экземпляра <xref:System.Data.Services.Client.DataServiceCollection%601> для привязки данных WCF Data Services клиентские библиотеки обрабатывали эти события, чтобы убедиться, что объекты, которые отписываются по, <xref:System.Data.Services.Client.DataServiceContext> остаются синхронизированными с данными в связанном ЭЛЕМЕНТЕ пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="60c87-106">When you use an instance of <xref:System.Data.Services.Client.DataServiceCollection%601> for data binding, the WCF Data Services client libraries handle these events to ensure that objects tracked by the <xref:System.Data.Services.Client.DataServiceContext> remain synchronized with the data in the bound UI element.</span></span>  
  
 <span data-ttu-id="60c87-107">Класс <xref:System.Data.Services.Client.DataServiceCollection%601> реализует интерфейс <xref:System.Collections.Specialized.INotifyCollectionChanged> (не напрямую) для оповещения контекста о добавлении и удалении объектов в коллекции.</span><span class="sxs-lookup"><span data-stu-id="60c87-107">The <xref:System.Data.Services.Client.DataServiceCollection%601> class (indirectly) implements the <xref:System.Collections.Specialized.INotifyCollectionChanged> interface to alert the context when objects are added to or removed from the collection.</span></span> <span data-ttu-id="60c87-108">Объекты типа службы данных, используемые с коллекцией <xref:System.Data.Services.Client.DataServiceCollection%601>, должны также реализовать интерфейс <xref:System.ComponentModel.INotifyPropertyChanged> для оповещения объекта <xref:System.Data.Services.Client.DataServiceCollection%601> об изменении свойств объектов в привязанной коллекции.</span><span class="sxs-lookup"><span data-stu-id="60c87-108">Data service type objects used with a <xref:System.Data.Services.Client.DataServiceCollection%601> must also implement the <xref:System.ComponentModel.INotifyPropertyChanged> interface to alert the <xref:System.Data.Services.Client.DataServiceCollection%601> when properties of objects in the binding collection have changed.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="60c87-109">При использовании диалогового окна **Добавление ссылки на службу** или средства [DataSvcUtil.exe](wcf-data-service-client-utility-datasvcutil-exe.md) с `/dataservicecollection` возможностью создания классов клиентских служб данных созданные классы данных реализуют <xref:System.ComponentModel.INotifyPropertyChanged> интерфейс.</span><span class="sxs-lookup"><span data-stu-id="60c87-109">When you use the **Add Service Reference** dialog or the [DataSvcUtil.exe](wcf-data-service-client-utility-datasvcutil-exe.md) tool with the `/dataservicecollection` option to generate the client data service classes, the generated data classes implement the <xref:System.ComponentModel.INotifyPropertyChanged> interface.</span></span> <span data-ttu-id="60c87-110">Дополнительные сведения см. [в разделе как вручную создавать классы службы данных клиента](how-to-manually-generate-client-data-service-classes-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="60c87-110">For more information, see [How to: Manually Generate Client Data Service Classes](how-to-manually-generate-client-data-service-classes-wcf-data-services.md).</span></span>  
  
## <a name="creating-the-binding-collection"></a><span data-ttu-id="60c87-111">Создание коллекции привязок</span><span class="sxs-lookup"><span data-stu-id="60c87-111">Creating the Binding Collection</span></span>  

 <span data-ttu-id="60c87-112">Создать новый экземпляр класса <xref:System.Data.Services.Client.DataServiceCollection%601> можно путем вызова одного из конструкторов класса, передав ему экземпляр <xref:System.Data.Services.Client.DataServiceContext> и необязательный объект <xref:System.Data.Services.Client.DataServiceQuery%601> или запрос LINQ, при выполнении которого возвращается экземпляр <xref:System.Collections.Generic.IEnumerable%601>.</span><span class="sxs-lookup"><span data-stu-id="60c87-112">Create a new instance of the <xref:System.Data.Services.Client.DataServiceCollection%601> class by calling one of the class constructor methods with a supplied <xref:System.Data.Services.Client.DataServiceContext> instance and optionally a <xref:System.Data.Services.Client.DataServiceQuery%601> or LINQ query that, when it is executed, returns an <xref:System.Collections.Generic.IEnumerable%601> instance.</span></span> <span data-ttu-id="60c87-113">Это <xref:System.Collections.Generic.IEnumerable%601> предоставляет источник объектов для коллекции привязок, материализованный из веб-канала OData.</span><span class="sxs-lookup"><span data-stu-id="60c87-113">This <xref:System.Collections.Generic.IEnumerable%601> provides the source of objects for the binding collection, which are materialized from an OData feed.</span></span> <span data-ttu-id="60c87-114">Дополнительные сведения см. в разделе [материализация объектов](object-materialization-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="60c87-114">For more information, see [Object Materialization](object-materialization-wcf-data-services.md).</span></span> <span data-ttu-id="60c87-115">По умолчанию изменения в привязанных объектах и элементах, вставляемых в коллекцию, автоматически отслеживаются контекстом <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="60c87-115">By default, changes made to bound objects and items inserted into the collection are automatically tracked by the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="60c87-116">Если необходимо вручную отвести эти изменения, вызовите один из методов конструктора, принимающих `trackingMode` параметр, и укажите значение <xref:System.Data.Services.Client.TrackingMode.None> .</span><span class="sxs-lookup"><span data-stu-id="60c87-116">If you need to manually track these changes, call one of the constructor methods that takes a `trackingMode` parameter and specify a value of <xref:System.Data.Services.Client.TrackingMode.None>.</span></span>  
  
 <span data-ttu-id="60c87-117">Следующий пример иллюстрирует создание экземпляра <xref:System.Data.Services.Client.DataServiceCollection%601> на основе переданного контекста <xref:System.Data.Services.Client.DataServiceContext> и объекта <xref:System.Data.Services.Client.DataServiceQuery%601>, который возвращает всех клиентов вместе со связанными с ними заказами.</span><span class="sxs-lookup"><span data-stu-id="60c87-117">The following example shows how to create an instance of <xref:System.Data.Services.Client.DataServiceCollection%601> based on a supplied <xref:System.Data.Services.Client.DataServiceContext> and a <xref:System.Data.Services.Client.DataServiceQuery%601> that returns all customers with related orders:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#CustomersOrders2Binding](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/customerorders2.cs#customersorders2binding)]
 [!code-vb[Astoria Northwind Client#CustomersOrders2Binding](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/customerorders2.vb#customersorders2binding)]  
  
## <a name="binding-data-to-windows-presentation-foundation-elements"></a><span data-ttu-id="60c87-118">Привязка данных к элементам Windows Presentation Foundation</span><span class="sxs-lookup"><span data-stu-id="60c87-118">Binding Data to Windows Presentation Foundation Elements</span></span>  

 <span data-ttu-id="60c87-119">Поскольку класс <xref:System.Data.Services.Client.DataServiceCollection%601> является наследником класса <xref:System.Collections.ObjectModel.ObservableCollection%601>, привязывать объекты к компоненту или элементу управления в приложении Windows Presentation Foundation (WPF) можно так же, как и при использовании для привязки класса <xref:System.Collections.ObjectModel.ObservableCollection%601>.</span><span class="sxs-lookup"><span data-stu-id="60c87-119">Because the <xref:System.Data.Services.Client.DataServiceCollection%601> class inherits from the <xref:System.Collections.ObjectModel.ObservableCollection%601> class, you can bind objects to an element, or control, in a Windows Presentation Foundation (WPF) application as you would when using the <xref:System.Collections.ObjectModel.ObservableCollection%601> class for binding.</span></span> <span data-ttu-id="60c87-120">Дополнительные сведения см. в разделе [Привязка данных (Windows Presentation Foundation)](/dotnet/desktop/wpf/data/data-binding-overview).</span><span class="sxs-lookup"><span data-stu-id="60c87-120">For more information, see [Data Binding (Windows Presentation Foundation)](/dotnet/desktop/wpf/data/data-binding-overview).</span></span> <span data-ttu-id="60c87-121">Одним из способов привязки данных службы данных к элементам управления WPF является задание значения свойства `DataContext` элемента, равного экземпляру класса <xref:System.Data.Services.Client.DataServiceCollection%601>, который содержит результат выполнения запроса.</span><span class="sxs-lookup"><span data-stu-id="60c87-121">One way to bind data service data to WPF controls is to set the `DataContext` property of the element to the instance of the <xref:System.Data.Services.Client.DataServiceCollection%601> class that contains the query result.</span></span> <span data-ttu-id="60c87-122">В этом случае используйте свойство <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A> для задания источника объектов для элемента управления.</span><span class="sxs-lookup"><span data-stu-id="60c87-122">In this case, you use the <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A> property to set the object source for the control.</span></span> <span data-ttu-id="60c87-123">Используйте свойство <xref:System.Windows.Controls.ItemsControl.DisplayMemberPath%2A> для задания отображаемого свойства привязанного объекта.</span><span class="sxs-lookup"><span data-stu-id="60c87-123">Use the <xref:System.Windows.Controls.ItemsControl.DisplayMemberPath%2A> property to specify which property of the bound object to display.</span></span> <span data-ttu-id="60c87-124">Если элемент привязывается к связанному объекту, возвращаемому свойством навигации, включите путь в привязку, определенную для свойства <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A>.</span><span class="sxs-lookup"><span data-stu-id="60c87-124">If you are binding an element to a related object that is returned by a navigation property, include the path in the binding defined for the <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A> property.</span></span> <span data-ttu-id="60c87-125">Данный путь задается относительно корневого объекта, заданного свойством <xref:System.Windows.FrameworkElement.DataContext%2A> родительского элемента управления.</span><span class="sxs-lookup"><span data-stu-id="60c87-125">This path is relative to the root object set by the <xref:System.Windows.FrameworkElement.DataContext%2A> property of the parent control.</span></span> <span data-ttu-id="60c87-126">В следующем примере задается свойство <xref:System.Windows.FrameworkElement.DataContext%2A> элемента <xref:System.Windows.Controls.StackPanel> для привязки родительского элемента управления к коллекции клиентских объектов <xref:System.Data.Services.Client.DataServiceCollection%601>.</span><span class="sxs-lookup"><span data-stu-id="60c87-126">The following example sets the <xref:System.Windows.FrameworkElement.DataContext%2A> property of a <xref:System.Windows.Controls.StackPanel> element to bind the parent control to an <xref:System.Data.Services.Client.DataServiceCollection%601> of customer objects:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#MasterDetailBinding](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/customerorderscustom.xaml.cs#masterdetailbinding)]
 [!code-csharp[Astoria Northwind Client#MasterDetailBinding](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/customerorderswpf.xaml.cs#masterdetailbinding)]
 [!code-vb[Astoria Northwind Client#MasterDetailBinding](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/customerorderscustom.xaml.vb#masterdetailbinding)]
 [!code-vb[Astoria Northwind Client#MasterDetailBinding](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/customerorderswpf.xaml.vb#masterdetailbinding)]
 [!code-vb[Astoria Northwind Client#MasterDetailBinding](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/customerorderscustom2.xaml.vb#masterdetailbinding)]  
  
 <span data-ttu-id="60c87-127">В следующем примере показано определение привязки XAML для дочерних элементов управления <xref:System.Windows.Controls.DataGrid> и <xref:System.Windows.Controls.ComboBox>:</span><span class="sxs-lookup"><span data-stu-id="60c87-127">The following example shows the XAML binding definition of the child <xref:System.Windows.Controls.DataGrid> and <xref:System.Windows.Controls.ComboBox> controls:</span></span>  
  
 [!code-xaml[Astoria Northwind Client#MasterDetailXaml](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/customerorderswpf.xaml#masterdetailxaml)]  
  
 <span data-ttu-id="60c87-128">Дополнительные сведения см. в разделе [инструкции. Привязка данных к Windows Presentation Foundation элементам](bind-data-to-wpf-elements-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="60c87-128">For more information, see [How to: Bind Data to Windows Presentation Foundation Elements](bind-data-to-wpf-elements-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="60c87-129">Если сущность участвует в отношении «один ко многим» или «многие ко многим», свойство навигации отношения возвращает коллекцию связанных объектов.</span><span class="sxs-lookup"><span data-stu-id="60c87-129">When an entity participates in a one-to-many or many-to-many relationship, the navigation property for the relationship returns a collection of related objects.</span></span> <span data-ttu-id="60c87-130">При использовании диалогового окна **Добавление ссылки на службу** или средства DataSvcUtil.exe для создания классов клиентских служб данных свойство навигации возвращает экземпляр <xref:System.Data.Services.Client.DataServiceCollection%601> .</span><span class="sxs-lookup"><span data-stu-id="60c87-130">When you use the **Add Service Reference** dialog box or the DataSvcUtil.exe tool to generate the client data service classes, the navigation property returns an instance of <xref:System.Data.Services.Client.DataServiceCollection%601>.</span></span> <span data-ttu-id="60c87-131">Это позволяет привязывать связанные объекты к элементу управления с поддержкой типовых сценариев привязки WPF, таких как шаблон привязки «основной-подробности» для связанных сущностей.</span><span class="sxs-lookup"><span data-stu-id="60c87-131">This enables you to bind related objects to a control, and support common WPF binding scenarios, such as the master-detail binding pattern for related entities.</span></span> <span data-ttu-id="60c87-132">В предыдущем примере XAML код XAML привязывает основную коллекцию <xref:System.Data.Services.Client.DataServiceCollection%601> к корневому элементу данных.</span><span class="sxs-lookup"><span data-stu-id="60c87-132">In the previous XAML example, the XAML code binds the master <xref:System.Data.Services.Client.DataServiceCollection%601> to the root data element.</span></span> <span data-ttu-id="60c87-133">Затем заказ <xref:System.Windows.Controls.DataGrid> привязывается к коллекции объектов Orders <xref:System.Data.Services.Client.DataServiceCollection%601>, возвращаемой для выбранного объекта Customers, который в свою очередь привязывается к корневому элементу данных объекта <xref:System.Windows.Window>.</span><span class="sxs-lookup"><span data-stu-id="60c87-133">The order <xref:System.Windows.Controls.DataGrid> is then bound to the Orders <xref:System.Data.Services.Client.DataServiceCollection%601> returned from the selected Customers object, which is in turn bound to the root data element of the <xref:System.Windows.Window>.</span></span>  
  
## <a name="binding-data-to-windows-forms-controls"></a><span data-ttu-id="60c87-134">Привязка данных к элементам управления Windows Forms</span><span class="sxs-lookup"><span data-stu-id="60c87-134">Binding Data to Windows Forms Controls</span></span>  

 <span data-ttu-id="60c87-135">Для привязки объектов к элементу управления Windows Form задайте значение свойства `DataSource` элемента управления, равное экземпляру класса <xref:System.Data.Services.Client.DataServiceCollection%601>, который содержит результат выполнения запроса.</span><span class="sxs-lookup"><span data-stu-id="60c87-135">To bind objects to a Windows Form control, set the `DataSource` property of the control to the instance of the <xref:System.Data.Services.Client.DataServiceCollection%601> class that contains the query result.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="60c87-136">Привязка данных поддерживается только для элементов управления, прослушивающих события изменений путем реализации интерфейсов <xref:System.Collections.Specialized.INotifyCollectionChanged> и <xref:System.ComponentModel.INotifyPropertyChanged>.</span><span class="sxs-lookup"><span data-stu-id="60c87-136">Data binding is only supported for controls that listen for change events by implementing the <xref:System.Collections.Specialized.INotifyCollectionChanged> and <xref:System.ComponentModel.INotifyPropertyChanged> interfaces.</span></span> <span data-ttu-id="60c87-137">Если элемент управления не поддерживает этот тип уведомлений об изменениях, изменения в базовом объекте <xref:System.Data.Services.Client.DataServiceCollection%601> не отражаются в привязанном элементе управления.</span><span class="sxs-lookup"><span data-stu-id="60c87-137">When a control does not support this kind of change notification, changes that are made to the underlying <xref:System.Data.Services.Client.DataServiceCollection%601> are not reflected in the bound control.</span></span>  
  
 <span data-ttu-id="60c87-138">В следующем примере показана привязка коллекции <xref:System.Data.Services.Client.DataServiceCollection%601> к элементу управления <xref:System.Windows.Forms.ComboBox>:</span><span class="sxs-lookup"><span data-stu-id="60c87-138">The following example binds an <xref:System.Data.Services.Client.DataServiceCollection%601> to a <xref:System.Windows.Forms.ComboBox> control:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#CustomersOrdersDataBindingSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/customerorders.cs#customersordersdatabindingspecific)]
 [!code-vb[Astoria Northwind Client#CustomersOrdersDataBindingSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/customerorders.vb#customersordersdatabindingspecific)]  
  
 <span data-ttu-id="60c87-139">При использовании диалогового окна **Добавление ссылки на службу** для создания классов клиентских служб данных также создается источник данных проекта, основанный на созданном <xref:System.Data.Services.Client.DataServiceContext> .</span><span class="sxs-lookup"><span data-stu-id="60c87-139">When you use the **Add Service Reference** dialog to generate the client data service classes, a project data source is also created that is based on the generated <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="60c87-140">С помощью этого источника данных можно создавать элементы пользовательского интерфейса или элементы управления, отображающие данные из службы данных, просто перетаскивая элементы из окна **Источники данных** в конструктор.</span><span class="sxs-lookup"><span data-stu-id="60c87-140">With this data source, you can create UI elements or controls that display data from the data service simply by dragging items from the **Data Sources** window onto the designer.</span></span> <span data-ttu-id="60c87-141">Добавленные элементы становятся элементами пользовательского интерфейса приложения, привязанными к источнику данных.</span><span class="sxs-lookup"><span data-stu-id="60c87-141">These items become elements in the application UI that are bound to the data source.</span></span> <span data-ttu-id="60c87-142">Дополнительные сведения см. [в разделе инструкции. Привязка данных с помощью источника данных проекта](how-to-bind-data-using-a-project-data-source-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="60c87-142">For more information, see [How to: Bind Data Using a Project Data Source](how-to-bind-data-using-a-project-data-source-wcf-data-services.md).</span></span>  
  
## <a name="binding-paged-data"></a><span data-ttu-id="60c87-143">Привязка постраничных данных</span><span class="sxs-lookup"><span data-stu-id="60c87-143">Binding Paged Data</span></span>  

 <span data-ttu-id="60c87-144">Служба данных может быть настроена для ограничения объема запрашиваемых данных, возвращаемых в отдельном ответном сообщении.</span><span class="sxs-lookup"><span data-stu-id="60c87-144">A data service can be configured to limit the amount of queried data that is returned in a single response message.</span></span> <span data-ttu-id="60c87-145">Дополнительные сведения см. [в разделе Настройка службы данных](configuring-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="60c87-145">For more information, see [Configuring the Data Service](configuring-the-data-service-wcf-data-services.md).</span></span> <span data-ttu-id="60c87-146">Если служба данных использует подкачку страниц для возврата запрашиваемых данных, в каждом ответе содержится ссылка, используемая для возврата следующей страницы результатов.</span><span class="sxs-lookup"><span data-stu-id="60c87-146">When the data service is paging response data, each response contains a link that is used to return the next page of results.</span></span> <span data-ttu-id="60c87-147">Дополнительные сведения см. в разделе [Загрузка отложенного содержимого](loading-deferred-content-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="60c87-147">For more information, see [Loading Deferred Content](loading-deferred-content-wcf-data-services.md).</span></span> <span data-ttu-id="60c87-148">В этом случае необходимо явно загружать страницы путем вызова метода <xref:System.Data.Services.Client.DataServiceCollection%601.Load%2A> объекта <xref:System.Data.Services.Client.DataServiceCollection%601>, передавая ему URI, полученный из свойства <xref:System.Data.Services.Client.DataServiceQueryContinuation.NextLinkUri%2A>, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="60c87-148">In this case, you must explicitly load pages by calling the <xref:System.Data.Services.Client.DataServiceCollection%601.Load%2A> method on the <xref:System.Data.Services.Client.DataServiceCollection%601> by passing the URI obtained from the <xref:System.Data.Services.Client.DataServiceQueryContinuation.NextLinkUri%2A> property, as in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#BindPagedDataSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/customerorderswpf3.xaml.cs#bindpageddataspecific)]
 [!code-vb[Astoria Northwind Client#BindPagedDataSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/customerorderswpf3.xaml.vb#bindpageddataspecific)]  
  
 <span data-ttu-id="60c87-149">Связанные объекты загружаются аналогичным способом.</span><span class="sxs-lookup"><span data-stu-id="60c87-149">Related objects are loaded in a similar manner.</span></span> <span data-ttu-id="60c87-150">Дополнительные сведения см. в разделе [инструкции. Привязка данных к Windows Presentation Foundation элементам](bind-data-to-wpf-elements-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="60c87-150">For more information, see [How to: Bind Data to Windows Presentation Foundation Elements](bind-data-to-wpf-elements-wcf-data-services.md).</span></span>  
  
## <a name="customizing-data-binding-behaviors"></a><span data-ttu-id="60c87-151">Настройка поведения привязки данных</span><span class="sxs-lookup"><span data-stu-id="60c87-151">Customizing Data Binding Behaviors</span></span>  

 <span data-ttu-id="60c87-152">Класс <xref:System.Data.Services.Client.DataServiceCollection%601> позволяет перехватывать события, возникающие при изменении коллекции, например при добавлении или удалении объекта, а также при модификации свойств объекта в коллекции.</span><span class="sxs-lookup"><span data-stu-id="60c87-152">The <xref:System.Data.Services.Client.DataServiceCollection%601> class enables you to intercept the events raised when changes are made to the collection, such as an object being added or removed, and when changes are made to the properties of object in a collection.</span></span> <span data-ttu-id="60c87-153">Имеется возможность модифицировать события привязки для переопределения поведения по умолчанию со следующими ограничениями.</span><span class="sxs-lookup"><span data-stu-id="60c87-153">You can modify the data binding events to override the default behavior, which includes the following constraints:</span></span>  
  
- <span data-ttu-id="60c87-154">В делегатах не выполняется никаких проверок.</span><span class="sxs-lookup"><span data-stu-id="60c87-154">No validation is performed within the delegates.</span></span>  
  
- <span data-ttu-id="60c87-155">При добавлении сущности автоматически добавляются связанные сущности.</span><span class="sxs-lookup"><span data-stu-id="60c87-155">Adding an entity automatically adds related entities.</span></span>  
  
- <span data-ttu-id="60c87-156">При удалении сущности связанные сущности не удаляются.</span><span class="sxs-lookup"><span data-stu-id="60c87-156">Deleting an entity does not delete the related entities.</span></span>  
  
 <span data-ttu-id="60c87-157">При создании нового экземпляра <xref:System.Data.Services.Client.DataServiceCollection%601> имеется возможность указать следующие параметры, определяющие делегаты методов для обработки событий, возникающих при изменении привязанных объектов.</span><span class="sxs-lookup"><span data-stu-id="60c87-157">When you create a new instance of <xref:System.Data.Services.Client.DataServiceCollection%601>, you have the option to specify the following parameters that define delegates to methods that handle the events raised when bound objects are changed:</span></span>  
  
- <span data-ttu-id="60c87-158">`entityChanged` — метод, вызываемый при изменении свойства привязанного объекта.</span><span class="sxs-lookup"><span data-stu-id="60c87-158">`entityChanged` - a method that is called when the property of a bound object is changed.</span></span> <span data-ttu-id="60c87-159">Делегат <xref:System.Func%602> принимает объект <xref:System.Data.Services.Client.EntityChangedParams> и возвращает логическое значение, указывающее, должно ли по-прежнему применяться поведение по умолчанию, то есть вызов метода <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> контекста <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="60c87-159">This <xref:System.Func%602> delegate accepts an <xref:System.Data.Services.Client.EntityChangedParams> object and returns a Boolean value that indicates whether the default behavior, to call <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> on the <xref:System.Data.Services.Client.DataServiceContext>, should still occur.</span></span>  
  
- <span data-ttu-id="60c87-160">`entityCollectionChanged` — метод, вызываемый при добавлении или удалении объекта из коллекции привязок.</span><span class="sxs-lookup"><span data-stu-id="60c87-160">`entityCollectionChanged` - a method that is called when an object is added or removed from the binding collection.</span></span> <span data-ttu-id="60c87-161">Делегат <xref:System.Func%602> принимает объект <xref:System.Data.Services.Client.EntityCollectionChangedParams> и возвращает логическое значение, указывающее, должно ли по-прежнему применяться поведение по умолчанию, то есть вызов метода <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> для действия <xref:System.Collections.Specialized.NotifyCollectionChangedAction.Add> или метода <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> для действия <xref:System.Collections.Specialized.NotifyCollectionChangedAction.Remove> применительно к контексту <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="60c87-161">This <xref:System.Func%602> delegate accepts an <xref:System.Data.Services.Client.EntityCollectionChangedParams> object and returns a Boolean value that indicates whether the default behavior, to call <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> for an <xref:System.Collections.Specialized.NotifyCollectionChangedAction.Add> action or <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> for a <xref:System.Collections.Specialized.NotifyCollectionChangedAction.Remove> action on the <xref:System.Data.Services.Client.DataServiceContext>, should still occur.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="60c87-162">WCF Data Services не выполняет проверку пользовательских поведений, реализованных в этих делегатах.</span><span class="sxs-lookup"><span data-stu-id="60c87-162">WCF Data Services performs no validation of the custom behaviors that you implement in these delegates.</span></span>  
  
 <span data-ttu-id="60c87-163">В следующем примере задано специализированное действие <xref:System.Collections.Specialized.NotifyCollectionChangedAction.Remove>, вызывающее метод <xref:System.Data.Services.Client.DataServiceContext.DeleteLink%2A> и <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> для удаления сущностей `Orders_Details`, принадлежащих удаленной сущности `Orders`.</span><span class="sxs-lookup"><span data-stu-id="60c87-163">In the following example, the <xref:System.Collections.Specialized.NotifyCollectionChangedAction.Remove> action is customized to call the <xref:System.Data.Services.Client.DataServiceContext.DeleteLink%2A> and <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> method to remove `Orders_Details` entities that belong to a deleted `Orders` entity.</span></span> <span data-ttu-id="60c87-164">Это специализированное действие выполняется, поскольку зависимые сущности не удаляются автоматически при удалении родительской сущности.</span><span class="sxs-lookup"><span data-stu-id="60c87-164">This custom action is performed because dependent entities are not automatically deleted when the parent entity is deleted.</span></span>  
  
 [!code-csharp[Astoria Northwind Client#CustomersOrdersDeleteRelated](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/customerorderscustom.xaml.cs#customersordersdeleterelated)]
 [!code-vb[Astoria Northwind Client#CustomersOrdersDeleteRelated](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/customerorderscustom.xaml.vb#customersordersdeleterelated)]
 [!code-vb[Astoria Northwind Client#CustomersOrdersDeleteRelated](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/customerorderscustom2.xaml.vb#customersordersdeleterelated)]  
  
 <span data-ttu-id="60c87-165">Дополнительные сведения см. [в разделе инструкции. Настройка поведения привязки данных](how-to-customize-data-binding-behaviors-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="60c87-165">For more information, see [How to: Customize Data Binding Behaviors](how-to-customize-data-binding-behaviors-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="60c87-166">Поведение по умолчанию при удалении объекта из коллекции <xref:System.Data.Services.Client.DataServiceCollection%601> с помощью метода <xref:System.Collections.ObjectModel.Collection%601.Remove%2A> состоит в том, что объект также помечается как удаленный в контексте <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="60c87-166">The default behavior when an object is removed from a <xref:System.Data.Services.Client.DataServiceCollection%601> by using the <xref:System.Collections.ObjectModel.Collection%601.Remove%2A> method is that the object is also marked as deleted in the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="60c87-167">Для изменения этого поведения можно задать в параметре `entityCollectionChanged` делегат метода, который будет вызываться при возникновении события <xref:System.Collections.Specialized.INotifyCollectionChanged.CollectionChanged>.</span><span class="sxs-lookup"><span data-stu-id="60c87-167">To change this behavior, you can specify a delegate to a method in the `entityCollectionChanged` parameter that is called when the <xref:System.Collections.Specialized.INotifyCollectionChanged.CollectionChanged> event occurs.</span></span>  
  
## <a name="data-binding-with-custom-client-data-classes"></a><span data-ttu-id="60c87-168">Привязка данных с помощью специализированных клиентских классов данных</span><span class="sxs-lookup"><span data-stu-id="60c87-168">Data Binding with Custom Client Data Classes</span></span>  

 <span data-ttu-id="60c87-169">Для загрузки объектов в коллекцию <xref:System.Data.Services.Client.DataServiceCollection%601> эти объекты сами должны реализовывать интерфейс <xref:System.ComponentModel.INotifyPropertyChanged>.</span><span class="sxs-lookup"><span data-stu-id="60c87-169">To be able to load objects into a <xref:System.Data.Services.Client.DataServiceCollection%601>, the objects themselves must implement the <xref:System.ComponentModel.INotifyPropertyChanged> interface.</span></span> <span data-ttu-id="60c87-170">Клиентские классы службы данных, создаваемые при использовании диалогового окна **Добавление ссылки на службу** или средства [DataSvcUtil.exe](wcf-data-service-client-utility-datasvcutil-exe.md) , реализуют этот интерфейс.</span><span class="sxs-lookup"><span data-stu-id="60c87-170">Data service client classes that are generated when you use the **Add Service Reference** dialog box or the [DataSvcUtil.exe](wcf-data-service-client-utility-datasvcutil-exe.md) tool implement this interface.</span></span> <span data-ttu-id="60c87-171">При предоставлении собственных клиентских классов данных необходимо использовать другой тип коллекции для привязки данных.</span><span class="sxs-lookup"><span data-stu-id="60c87-171">If you provide your own client data classes, you must use another type of collection for data binding.</span></span> <span data-ttu-id="60c87-172">При изменении объектов необходимо обрабатывать события в элементах управления с привязанными данными для вызова следующих методов класса <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="60c87-172">When objects change, you must handle events in the data bound controls to call the following methods of the <xref:System.Data.Services.Client.DataServiceContext> class:</span></span>  
  
- <span data-ttu-id="60c87-173"><xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> — при добавлении в коллекцию нового объекта.</span><span class="sxs-lookup"><span data-stu-id="60c87-173"><xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> - when a new object is added to the collection.</span></span>  
  
- <span data-ttu-id="60c87-174"><xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> — при удалении объекта из коллекции.</span><span class="sxs-lookup"><span data-stu-id="60c87-174"><xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> - when an object is removed from the collection.</span></span>  
  
- <span data-ttu-id="60c87-175"><xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> — при изменении свойства объекта в коллекции.</span><span class="sxs-lookup"><span data-stu-id="60c87-175"><xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> - when a property is changed on an object in the collection.</span></span>  
  
- <span data-ttu-id="60c87-176"><xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> — при добавлении объекта в коллекцию связанного объекта.</span><span class="sxs-lookup"><span data-stu-id="60c87-176"><xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> - when an object is added to a collection of related object.</span></span>  
  
- <span data-ttu-id="60c87-177"><xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> — при добавлении объекта в коллекцию связанных объектов.</span><span class="sxs-lookup"><span data-stu-id="60c87-177"><xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> - when an object is added to a collection of related objects.</span></span>  
  
 <span data-ttu-id="60c87-178">Дополнительные сведения см. [в разделе Обновление службы данных](updating-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="60c87-178">For more information, see [Updating the Data Service](updating-the-data-service-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="60c87-179">См. также</span><span class="sxs-lookup"><span data-stu-id="60c87-179">See also</span></span>

- [<span data-ttu-id="60c87-180">Практическое руководство. Создание клиентских классов служб данных вручную</span><span class="sxs-lookup"><span data-stu-id="60c87-180">How to: Manually Generate Client Data Service Classes</span></span>](how-to-manually-generate-client-data-service-classes-wcf-data-services.md)
- [<span data-ttu-id="60c87-181">Практическое руководство. Добавление ссылки на службу данных</span><span class="sxs-lookup"><span data-stu-id="60c87-181">How to: Add a Data Service Reference</span></span>](how-to-add-a-data-service-reference-wcf-data-services.md)
