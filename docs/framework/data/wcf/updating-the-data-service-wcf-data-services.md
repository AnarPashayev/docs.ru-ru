---
title: Обновление службы данных (службы данных WCF)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, changing data
- WCF Data Services, client library
ms.assetid: 00d993be-ffed-4dea-baf7-6eea982cdb54
ms.openlocfilehash: 5b8fa13bf5db7f3c3df97febe4bb6f9ee4c184a4
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2019
ms.locfileid: "59231296"
---
# <a name="updating-the-data-service-wcf-data-services"></a><span data-ttu-id="49feb-102">Обновление службы данных (службы данных WCF)</span><span class="sxs-lookup"><span data-stu-id="49feb-102">Updating the Data Service (WCF Data Services)</span></span>
<span data-ttu-id="49feb-103">При использовании [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] клиентскую библиотеку для использования [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] веб-канала, эта библиотека преобразует записи из канала в экземпляры классов клиентской службы данных.</span><span class="sxs-lookup"><span data-stu-id="49feb-103">When you use the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library to consume an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed, the library translates the entries in the feed into instances of client data service classes.</span></span> <span data-ttu-id="49feb-104">Эти классы службы данных отслеживаются с помощью объекта <xref:System.Data.Services.Client.DataServiceContext>, которому принадлежит объект <xref:System.Data.Services.Client.DataServiceQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="49feb-104">These data service classes are tracked by using the <xref:System.Data.Services.Client.DataServiceContext> to which the <xref:System.Data.Services.Client.DataServiceQuery%601> belongs.</span></span> <span data-ttu-id="49feb-105">Клиент отслеживает изменения сущностей, указанных с помощью методов объекта <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="49feb-105">The client tracks changes to entities that you report by using methods on <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="49feb-106">Эти методы позволяют клиенту отслеживать добавленные и удаленные сущности, а также изменения, вносимые в значения свойств или в связи между экземплярами сущностей.</span><span class="sxs-lookup"><span data-stu-id="49feb-106">These methods enable the client to track added and deleted entities and also changes that you make to property values or to relationships between entity instances.</span></span> <span data-ttu-id="49feb-107">При вызове метода <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> отслеженные изменения отправляются назад в службу данных в виде операций, основанных на REST.</span><span class="sxs-lookup"><span data-stu-id="49feb-107">Those tracked changes are sent back to the data service as REST-based operations when you call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="49feb-108">При использовании экземпляра класса <xref:System.Data.Services.Client.DataServiceCollection%601> для привязки данных к элементам управления, изменения, внесенные в данные с помощью привязанного элемента управления, автоматически передаются объекту <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="49feb-108">When you use an instance of <xref:System.Data.Services.Client.DataServiceCollection%601> to bind data to controls, changes made to data in the bound control are automatically reported to the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="49feb-109">Дополнительные сведения см. в разделе [привязка данных к элементам управления](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="49feb-109">For more information, see [Binding Data to Controls](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span></span>  
  
## <a name="adding-modifying-and-changing-entities"></a><span data-ttu-id="49feb-110">Добавление, модификация и изменение сущностей</span><span class="sxs-lookup"><span data-stu-id="49feb-110">Adding, Modifying, and Changing Entities</span></span>  
 <span data-ttu-id="49feb-111">При использовании **Add Service Reference** диалоговое окно в Visual Studio для добавления ссылки на [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] веб-канала, полученный клиентские классы службы данных каждый имеют статический *создать* метод, который принимает один параметр на каждое свойство сущности, не допускающие значения NULL.</span><span class="sxs-lookup"><span data-stu-id="49feb-111">When you use the **Add Service Reference** dialog in Visual Studio to add a reference to an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed, the resulting client data service classes each have a static *Create* method that takes one parameter for each non-nullable entity property.</span></span> <span data-ttu-id="49feb-112">Этот метод можно использовать для создания экземпляров классов типа сущности, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="49feb-112">You can use this method to create instances of entity type classes, as in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#CreateNewProduct](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#createnewproduct)]
 [!code-vb[Astoria Northwind Client#CreateNewProduct](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#createnewproduct)]  
  
 <span data-ttu-id="49feb-113">Для добавления экземпляра сущности вызовите соответствующий *AddTo* метод <xref:System.Data.Services.Client.DataServiceContext> классом, создаваемым **Add Service Reference** диалоговое окно, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="49feb-113">To add an entity instance, call the appropriate *AddTo* method on the <xref:System.Data.Services.Client.DataServiceContext> class generated by the **Add Service Reference** dialog box, as in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AddProductSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#addproductspecific)]
 [!code-vb[Astoria Northwind Client#AddProductSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#addproductspecific)]  
  
 <span data-ttu-id="49feb-114">При этом объект добавляется в контекст и в соответствующий набор сущностей.</span><span class="sxs-lookup"><span data-stu-id="49feb-114">This adds the object to the context and into the correct entity set.</span></span> <span data-ttu-id="49feb-115">Можно также вызвать метод <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>, но при этом придется передать имя набора сущностей.</span><span class="sxs-lookup"><span data-stu-id="49feb-115">You can also call <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>, but you must instead supply the entity set name.</span></span> <span data-ttu-id="49feb-116">Если добавляемая сущность имеет одну или несколько связей с другими сущностями, можно использовать либо метод <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A>, либо один из предыдущих методов и явно задать эти связи.</span><span class="sxs-lookup"><span data-stu-id="49feb-116">If the added entity has one or more relationships to other entities, you can either use the <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> method or use one of the previous methods and also explicitly define those links.</span></span> <span data-ttu-id="49feb-117">Эти операции обсуждаются дальше в данном разделе.</span><span class="sxs-lookup"><span data-stu-id="49feb-117">These operations are discussed later in this topic.</span></span>  
  
 <span data-ttu-id="49feb-118">Для изменения существующего экземпляра сущности запросите сущность, произведите необходимые изменения ее свойств, а затем вызовите метод <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> объекта <xref:System.Data.Services.Client.DataServiceContext>, чтобы указать клиентской библиотеке на необходимость отправки обновления объекта, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="49feb-118">To modify an existing entity instance, first query for that entity, make the desired changes to its properties, and then call the <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> to indicate to the client library that it needs to send an update for that object, as shown in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#ModifyCustomerSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#modifycustomerspecific)]
 [!code-vb[Astoria Northwind Client#ModifyCustomerSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#modifycustomerspecific)]  
  
 <span data-ttu-id="49feb-119">Для удаления экземпляра сущности вызовите метод <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> объекта <xref:System.Data.Services.Client.DataServiceContext>, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="49feb-119">To delete an entity instance, call the <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> method on the <xref:System.Data.Services.Client.DataServiceContext>, as shown in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#DeleteProductSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#deleteproductspecific)]
 [!code-vb[Astoria Northwind Client#DeleteProductSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#deleteproductspecific)]  
  
 <span data-ttu-id="49feb-120">Дополнительные сведения см. в разделе [Как Добавление, изменение и удаление сущностей](../../../../docs/framework/data/wcf/how-to-add-modify-and-delete-entities-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="49feb-120">For more information, see [How to: Add, Modify, and Delete Entities](../../../../docs/framework/data/wcf/how-to-add-modify-and-delete-entities-wcf-data-services.md).</span></span>  
  
## <a name="attaching-entities"></a><span data-ttu-id="49feb-121">Присоединение сущностей</span><span class="sxs-lookup"><span data-stu-id="49feb-121">Attaching Entities</span></span>  
 <span data-ttu-id="49feb-122">Клиентская библиотека позволяет сохранить обновления, произведенные в сущности, без выполнения запроса для загрузки сущности в контекст <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="49feb-122">The client library enables you to save updates that you made to an entity without first executing a query to load the entity into the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="49feb-123">Используйте метод <xref:System.Data.Services.Client.DataServiceContext.AttachTo%2A> для присоединения существующего объекта к определенному набору сущностей в контексте <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="49feb-123">Use the <xref:System.Data.Services.Client.DataServiceContext.AttachTo%2A> method to attach an existing object to a specific entity set in the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="49feb-124">Затем этот объект можно изменить и сохранить изменения в службе данных.</span><span class="sxs-lookup"><span data-stu-id="49feb-124">You can then modify the object and save the changes to the data service.</span></span> <span data-ttu-id="49feb-125">В следующем примере измененный пользовательский объект присоединяется к контексту, после чего вызывается метод <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> для пометки присоединенного объекта атрибутом <xref:System.Data.Services.Client.EntityStates.Modified> перед вызовом метода <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="49feb-125">In the following example, a customer object that has been changed is attached to the context and then <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> is called to mark the attached object as <xref:System.Data.Services.Client.EntityStates.Modified> before <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> is called:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AttachObjectSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#attachobjectspecific)]
 [!code-vb[Astoria Northwind Client#AttachObjectSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#attachobjectspecific)]  
  
 <span data-ttu-id="49feb-126">Во время присоединения объектов следует принимать во внимание следующие соображения.</span><span class="sxs-lookup"><span data-stu-id="49feb-126">The following considerations apply when attaching objects:</span></span>  
  
-   <span data-ttu-id="49feb-127">Объект присоединяется в состоянии <xref:System.Data.Services.Client.EntityStates.Unchanged>.</span><span class="sxs-lookup"><span data-stu-id="49feb-127">An object is attached in the <xref:System.Data.Services.Client.EntityStates.Unchanged> state.</span></span>  
  
-   <span data-ttu-id="49feb-128">При присоединении объекта связанные с ним объекты не присоединяются.</span><span class="sxs-lookup"><span data-stu-id="49feb-128">When an object is attached, objects that are related to the attached object are not also attached.</span></span>  
  
-   <span data-ttu-id="49feb-129">Объект не может быть присоединен, если сущность уже отслеживается контекстом.</span><span class="sxs-lookup"><span data-stu-id="49feb-129">An object cannot be attached if the entity is already being tracked by the context.</span></span>  
  
-   <span data-ttu-id="49feb-130">При присоединении объекта сущности, полученной со значением eTag, используется перегруженный метод <xref:System.Data.Services.Client.DataServiceContext.AttachTo%28System.String%2CSystem.Object%2CSystem.String%29>, принимающий параметр `etag`.</span><span class="sxs-lookup"><span data-stu-id="49feb-130">The <xref:System.Data.Services.Client.DataServiceContext.AttachTo%28System.String%2CSystem.Object%2CSystem.String%29> method overload that takes an `etag` parameter is used when you attach an entity object that was received along with an eTag value.</span></span> <span data-ttu-id="49feb-131">Это значение eTag используется для проверки параллелизма при сохранении изменений в присоединенном объекте.</span><span class="sxs-lookup"><span data-stu-id="49feb-131">This eTag value is then used to check for concurrency when changes to the attached object are saved.</span></span>  
  
 <span data-ttu-id="49feb-132">Дополнительные сведения см. в разделе [Как Присоединение существующей сущности к контексту DataServiceContext](../../../../docs/framework/data/wcf/attach-an-existing-entity-to-dc-wcf-data.md).</span><span class="sxs-lookup"><span data-stu-id="49feb-132">For more information, see [How to: Attach an Existing Entity to the DataServiceContext](../../../../docs/framework/data/wcf/attach-an-existing-entity-to-dc-wcf-data.md).</span></span>  
  
## <a name="creating-and-modifying-relationship-links"></a><span data-ttu-id="49feb-133">Создание и изменение ссылок на связи</span><span class="sxs-lookup"><span data-stu-id="49feb-133">Creating and Modifying Relationship Links</span></span>  
 <span data-ttu-id="49feb-134">При добавлении новой сущности с помощью <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> метод или соответствующего *AddTo* метод <xref:System.Data.Services.Client.DataServiceContext> класс, который **Add Service Reference** формируемого диалоговым окном, все связи между новой сущностью и связанными сущностями не определяются автоматически.</span><span class="sxs-lookup"><span data-stu-id="49feb-134">When you add a new entity by using either the <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> method or the appropriate *AddTo* method of the <xref:System.Data.Services.Client.DataServiceContext> class that the **Add Service Reference** dialog generates, any relationships between the new entity and related entities are not automatically defined.</span></span>  
  
 <span data-ttu-id="49feb-135">Пользователь может создать и изменить связи между экземплярами сущностей и отразить эти изменения в службе данных с помощью клиентской библиотеки.</span><span class="sxs-lookup"><span data-stu-id="49feb-135">You can create and change relationships between entity instances and have the client library reflect those changes in the data service.</span></span> <span data-ttu-id="49feb-136">Связи между сущностями определяются как ассоциации модели, а объект <xref:System.Data.Services.Client.DataServiceContext> отслеживает каждую связь в виде объекта ссылки в контексте.</span><span class="sxs-lookup"><span data-stu-id="49feb-136">Relationships between entities are defined as associations in the model, and the <xref:System.Data.Services.Client.DataServiceContext> tracks each relationship as a link object in the context.</span></span> [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <span data-ttu-id="49feb-137">предоставляет следующие методы в <xref:System.Data.Services.Client.DataServiceContext> класса для создания, изменения и удаления ссылок:</span><span class="sxs-lookup"><span data-stu-id="49feb-137">provides the following methods on the <xref:System.Data.Services.Client.DataServiceContext> class to create, modify, and delete these links:</span></span>  
  
|<span data-ttu-id="49feb-138">Метод</span><span class="sxs-lookup"><span data-stu-id="49feb-138">Method</span></span>|<span data-ttu-id="49feb-139">Описание</span><span class="sxs-lookup"><span data-stu-id="49feb-139">Description</span></span>|  
|------------|-----------------|  
|<xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A>|<span data-ttu-id="49feb-140">Создает новую ссылку между двумя связанными объектами сущностей.</span><span class="sxs-lookup"><span data-stu-id="49feb-140">Creates a new link between two related entity objects.</span></span> <span data-ttu-id="49feb-141">Вызов этого метода эквивалентен вызову <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> и <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> и позволяет создать новый объект и определить связь с существующим объектом.</span><span class="sxs-lookup"><span data-stu-id="49feb-141">Calling this method is equivalent to calling <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> and <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> to both create the new object and define the relationship to an existing object.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>|<span data-ttu-id="49feb-142">Создает новую ссылку между двумя связанными объектами сущностей.</span><span class="sxs-lookup"><span data-stu-id="49feb-142">Creates a new link between two related entity objects.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>|<span data-ttu-id="49feb-143">Обновляет существующую связь между двумя объектами связанной сущности.</span><span class="sxs-lookup"><span data-stu-id="49feb-143">Updates an existing link between two related entity objects.</span></span> <xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> <span data-ttu-id="49feb-144">также используется для удаления связей с количеством элементов ноль или один к одному (`0..1:1`) и один к одному (`1:1`).</span><span class="sxs-lookup"><span data-stu-id="49feb-144">is also used to delete links with a cardinality of zero-or-one-to-one (`0..1:1`) and one-to-one (`1:1`).</span></span> <span data-ttu-id="49feb-145">Это можно сделать, задав связанному объекту значение `null`.</span><span class="sxs-lookup"><span data-stu-id="49feb-145">You can do this by setting the related object to `null`.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.DeleteLink%2A>|<span data-ttu-id="49feb-146">Помечает ссылку, отслеживаемую контекстом, для удаления при вызове метода <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="49feb-146">Marks a link that the context is tracking for deletion when the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method is called.</span></span> <span data-ttu-id="49feb-147">Используйте этот метод при удалении связанного объекта или изменения связи путем удаления ссылки на существующий объект и последующего добавления ссылки на другой связанный объект.</span><span class="sxs-lookup"><span data-stu-id="49feb-147">Use this method when you delete a related object or change a relationship by first deleting the link to an existing object and then adding a link to the new related object.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.AttachLink%2A>|<span data-ttu-id="49feb-148">Уведомляет контекст о существовании ссылки между двумя объектами сущностей.</span><span class="sxs-lookup"><span data-stu-id="49feb-148">Notifies the context of an existing link between two entity objects.</span></span> <span data-ttu-id="49feb-149">Контекст предполагает, что эта связь уже существует в службе данных, и не пытается создать связь при вызове метода <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="49feb-149">The context assumes that this relationship already exists in the data service and does not try to create the link when you call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method.</span></span> <span data-ttu-id="49feb-150">Используйте этот метод при присоединении объектов к контексту, если необходимо также присоединить ссылку между двумя из них.</span><span class="sxs-lookup"><span data-stu-id="49feb-150">Use this method when you attach objects to a context and need to also attach the link between the two.</span></span> <span data-ttu-id="49feb-151">При определении новой связи лучше использовать объект <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>.</span><span class="sxs-lookup"><span data-stu-id="49feb-151">If you are defining a new relationship, you should instead use <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.DetachLink%2A>|<span data-ttu-id="49feb-152">Прекращает отслеживание указанной ссылки в контексте.</span><span class="sxs-lookup"><span data-stu-id="49feb-152">Stops tracking the specified link in the context.</span></span> <span data-ttu-id="49feb-153">Этот метод используется для удаления связей «один ко многим» (`*:*`).</span><span class="sxs-lookup"><span data-stu-id="49feb-153">This method is used to delete one-to-many (`*:*`) relationships.</span></span> <span data-ttu-id="49feb-154">Для связей с количеством элементов, равным одному, следует использовать объект <xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>.</span><span class="sxs-lookup"><span data-stu-id="49feb-154">For relationship links with a cardinality of one, you must instead use <xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>.</span></span>|  
  
 <span data-ttu-id="49feb-155">Следующий пример иллюстрирует использование метода <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> для добавления нового объекта `Order_Detail`, связанного с имеющейся сущностью `Orders`.</span><span class="sxs-lookup"><span data-stu-id="49feb-155">The following example shows how to use the <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> method to add a new `Order_Detail` that is related to an existing `Orders` entity.</span></span> <span data-ttu-id="49feb-156">Поскольку новый объект `Order_Details` отслеживается с помощью метода <xref:System.Data.Services.Client.DataServiceContext>, связь добавленного объекта `Order_Details` с существующей сущностью `Products` определяется методом<xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>:</span><span class="sxs-lookup"><span data-stu-id="49feb-156">Because the new `Order_Details` object is now tracked by the <xref:System.Data.Services.Client.DataServiceContext>, the relationship of the added `Order_Details` object to the existing `Products` entity is defined by calling the <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> method:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AddOrderDetailToOrderSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#addorderdetailtoorderspecific)]
 [!code-vb[Astoria Northwind Client#AddOrderDetailToOrderSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#addorderdetailtoorderspecific)]  
  
 <span data-ttu-id="49feb-157">В то время как метод <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> определяет связи, которые необходимо создать в службе данных, чтобы эти связи были отражены в объектах, присутствующих в контексте, для самих объектов необходимо задать свойства навигации.</span><span class="sxs-lookup"><span data-stu-id="49feb-157">While the <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> method defines links that must be created in the data service, to have these links reflected in the objects that are in the context, you must also set the navigation properties on the objects themselves.</span></span> <span data-ttu-id="49feb-158">В предыдущем примере необходимо задать свойства навигации следующим образом.</span><span class="sxs-lookup"><span data-stu-id="49feb-158">In the previous example, you should set the navigation properties as follows:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#SetNavProps](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#setnavprops)]
 [!code-vb[Astoria Northwind Client#SetNavProps](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#setnavprops)]  
  
 <span data-ttu-id="49feb-159">Дополнительные сведения см. в разделе [Как Определение связей сущностей](../../../../docs/framework/data/wcf/how-to-define-entity-relationships-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="49feb-159">For more information, see [How to: Define Entity Relationships](../../../../docs/framework/data/wcf/how-to-define-entity-relationships-wcf-data-services.md).</span></span>  
  
## <a name="saving-changes"></a><span data-ttu-id="49feb-160">Сохранение изменений</span><span class="sxs-lookup"><span data-stu-id="49feb-160">Saving Changes</span></span>  
 <span data-ttu-id="49feb-161">Изменения отслеживаются в экземпляре <xref:System.Data.Services.Client.DataServiceContext>, но не отправляются на сервер немедленно.</span><span class="sxs-lookup"><span data-stu-id="49feb-161">Changes are tracked in the <xref:System.Data.Services.Client.DataServiceContext> instance but not sent to the server immediately.</span></span> <span data-ttu-id="49feb-162">После завершения изменений для указанного действия вызовите метод <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>, чтобы передать все изменения в службу данных.</span><span class="sxs-lookup"><span data-stu-id="49feb-162">After you are finished with the required changes for a specified activity, call <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> to submit all the changes to the data service.</span></span> <span data-ttu-id="49feb-163">Дополнительные сведения см. в разделе [управление контекстом службы данных](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="49feb-163">For more information, see [Managing the Data Service Context](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span></span> <span data-ttu-id="49feb-164">Изменения можно сохранить и асинхронно с помощью методов <xref:System.Data.Services.Client.DataServiceContext.BeginSaveChanges%2A> и <xref:System.Data.Services.Client.DataServiceContext.EndSaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="49feb-164">You can also save changes asynchronously by using the <xref:System.Data.Services.Client.DataServiceContext.BeginSaveChanges%2A> and <xref:System.Data.Services.Client.DataServiceContext.EndSaveChanges%2A> methods.</span></span> <span data-ttu-id="49feb-165">Дополнительные сведения см. в разделе [асинхронных операций](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="49feb-165">For more information, see [Asynchronous Operations](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="49feb-166">См. также</span><span class="sxs-lookup"><span data-stu-id="49feb-166">See also</span></span>

- [<span data-ttu-id="49feb-167">Библиотека клиентов служб данных WCF</span><span class="sxs-lookup"><span data-stu-id="49feb-167">WCF Data Services Client Library</span></span>](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)
- [<span data-ttu-id="49feb-168">Выполнение запросов к службе данных</span><span class="sxs-lookup"><span data-stu-id="49feb-168">Querying the Data Service</span></span>](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)
- [<span data-ttu-id="49feb-169">Асинхронные операции</span><span class="sxs-lookup"><span data-stu-id="49feb-169">Asynchronous Operations</span></span>](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md)
- [<span data-ttu-id="49feb-170">Пакетные операции</span><span class="sxs-lookup"><span data-stu-id="49feb-170">Batching Operations</span></span>](../../../../docs/framework/data/wcf/batching-operations-wcf-data-services.md)
- [<span data-ttu-id="49feb-171">Материализация объектов</span><span class="sxs-lookup"><span data-stu-id="49feb-171">Object Materialization</span></span>](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md)
- [<span data-ttu-id="49feb-172">Управление контекстом службы данных</span><span class="sxs-lookup"><span data-stu-id="49feb-172">Managing the Data Service Context</span></span>](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md)
