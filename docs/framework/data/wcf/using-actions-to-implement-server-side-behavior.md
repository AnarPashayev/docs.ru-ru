---
title: Использование действий для реализации поведения на стороне сервера
ms.date: 03/30/2017
ms.assetid: 11a372db-7168-498b-80d2-9419ff557ba5
ms.openlocfilehash: 19139a7efd955448a1f97c492a7245c1bbfe6c3d
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2020
ms.locfileid: "91180599"
---
# <a name="using-actions-to-implement-server-side-behavior"></a><span data-ttu-id="960a0-102">Использование действий для реализации поведения на стороне сервера</span><span class="sxs-lookup"><span data-stu-id="960a0-102">Using actions to implement server-side behavior</span></span>

<span data-ttu-id="960a0-103">Действия OData предоставляют способ реализации поведения, срабатывающего при получении ресурса из службы OData.</span><span class="sxs-lookup"><span data-stu-id="960a0-103">OData Actions provide a way to implement a behavior that acts upon a resource retrieved from an OData service.</span></span> <span data-ttu-id="960a0-104">Рассмотрим для примера цифровой фильм в качестве ресурса. С цифровым фильмом можно совершить множество различных действий: извлекать, оценивать, комментировать или возвращать.</span><span class="sxs-lookup"><span data-stu-id="960a0-104">For example consider a digital movie as a resource, there are many things you may do with a digital movie: check-out, rate/comment, or check-in.</span></span> <span data-ttu-id="960a0-105">Приведенные варианты являются примерами действий, которые могут выполняться службой данных WCF, управляющей цифровыми фильмами.</span><span class="sxs-lookup"><span data-stu-id="960a0-105">These are all examples of Actions that may be implemented by a WCF Data Service that manages digital movies.</span></span> <span data-ttu-id="960a0-106">Действия описываются в ответе OData, содержащим ресурс, для которого может быть вызвано это действие.</span><span class="sxs-lookup"><span data-stu-id="960a0-106">Actions are described in an OData response that contains a resource on which the Action can be invoked.</span></span> <span data-ttu-id="960a0-107">Если пользователь запрашивает ответ, который представляет цифровой фильм, то ответ, возвращаемый службой данных WCF, содержит сведения о действиях, которые могут быть применены к этому ресурсу.</span><span class="sxs-lookup"><span data-stu-id="960a0-107">When a user requests a resource that represents a digital movie the response returned from the WCF Data Service contains information about the Actions that are available for that resource.</span></span> <span data-ttu-id="960a0-108">Доступность действия зависит от состояния службы данных или ресурса.</span><span class="sxs-lookup"><span data-stu-id="960a0-108">The availability of an Action can depend on the state of the data service or resource.</span></span> <span data-ttu-id="960a0-109">Например, цифровой фильм, извлеченный одним пользователем, не может быть извлечен другим пользователем.</span><span class="sxs-lookup"><span data-stu-id="960a0-109">For example once a digital movie is checked out it cannot be checked out by another user.</span></span> <span data-ttu-id="960a0-110">Для вызова действий клиентам достаточно указать URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="960a0-110">Clients can invoke an action simply by specifying a URL.</span></span> <span data-ttu-id="960a0-111">Например, `http://MyServer/MovieService.svc/Movies(6)` определяет конкретный цифровой фильм и `http://MyServer/MovieService.svc/Movies(6)/Checkout` вызовет действие для конкретного фильма.</span><span class="sxs-lookup"><span data-stu-id="960a0-111">For example, `http://MyServer/MovieService.svc/Movies(6)` would identify a specific digital movie and `http://MyServer/MovieService.svc/Movies(6)/Checkout` would invoke the action on the specific movie.</span></span> <span data-ttu-id="960a0-112">Действия позволяют применять модель службы, не обращаясь к модели данных.</span><span class="sxs-lookup"><span data-stu-id="960a0-112">Actions allow you to expose you service model without exposing your data model.</span></span> <span data-ttu-id="960a0-113">Продолжим рассмотрение примера с фильмом. Например, вы можете разрешить пользователям оценивать фильм, но не предоставлять доступ к данным оценок как к ресурсу.</span><span class="sxs-lookup"><span data-stu-id="960a0-113">Continuing with the movie service example, you may wish to allow a user to rate a movie, but not directly expose the rating data as a resource.</span></span> <span data-ttu-id="960a0-114">Вы можете реализовать действие оценки, чтобы разрешить пользователям оценивать фильм, при этом у них не будет прямого доступа к данным оценок как к ресурсу.</span><span class="sxs-lookup"><span data-stu-id="960a0-114">You could implement a Rate Action to allow the user to rate a movie but not directly access the rating data as a resource.</span></span>

## <a name="implementing-an-action"></a><span data-ttu-id="960a0-115">Реализация действия</span><span class="sxs-lookup"><span data-stu-id="960a0-115">Implementing an action</span></span>

 <span data-ttu-id="960a0-116">Чтобы реализовать действие службы, необходимо реализовать <xref:System.IServiceProvider> интерфейсы, [Идатасервицеактионпровидер](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103))и [идатасервицеинвокабле](/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) .</span><span class="sxs-lookup"><span data-stu-id="960a0-116">To implement a service action you must implement the <xref:System.IServiceProvider>, [IDataServiceActionProvider](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)), and [IDataServiceInvokable](/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) interfaces.</span></span> <span data-ttu-id="960a0-117"><xref:System.IServiceProvider> позволяет WCF Data Services получить реализацию [идатасервицеактионпровидер](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)).</span><span class="sxs-lookup"><span data-stu-id="960a0-117"><xref:System.IServiceProvider> allows WCF Data Services to get your implementation of [IDataServiceActionProvider](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)).</span></span> <span data-ttu-id="960a0-118">[Идатасервицеактионпровидер](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) позволяет WCF Data Services создавать, находить, описывать и вызывать действия службы.</span><span class="sxs-lookup"><span data-stu-id="960a0-118">[IDataServiceActionProvider](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) allows WCF Data Services to create, find, describe and invoke service actions.</span></span> <span data-ttu-id="960a0-119">[Идатасервицеинвокабле](/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) позволяет вызывать код, реализующий поведение действий службы, и получать результаты, если таковые имеются.</span><span class="sxs-lookup"><span data-stu-id="960a0-119">[IDataServiceInvokable](/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) allows you to invoke the code that implements the service actions’ behavior and get the results, if any.</span></span> <span data-ttu-id="960a0-120">Помните, что службы данных WCF являются службами с предварительным вызовом, то есть новый экземпляр службы создается при каждом вызове службы.</span><span class="sxs-lookup"><span data-stu-id="960a0-120">Keep in mind that WCF Data Services are Per-Call WCF Services, a new instance of the service will be created each time the service is called.</span></span>  <span data-ttu-id="960a0-121">Удостоверьтесь в том, что при создании службы выполняется только необходимая работа.</span><span class="sxs-lookup"><span data-stu-id="960a0-121">Make sure no unnecessary work is done when the service is created.</span></span>

### <a name="iserviceprovider"></a><span data-ttu-id="960a0-122">IServiceProvider</span><span class="sxs-lookup"><span data-stu-id="960a0-122">IServiceProvider</span></span>

 <span data-ttu-id="960a0-123">Интерфейс <xref:System.IServiceProvider> содержит метод <xref:System.IServiceProvider.GetService%2A>.</span><span class="sxs-lookup"><span data-stu-id="960a0-123"><xref:System.IServiceProvider> contains a method called <xref:System.IServiceProvider.GetService%2A>.</span></span> <span data-ttu-id="960a0-124">Службы данных WCF вызывают этот метод для получения числа поставщиков служб, включая поставщиков служб метаданных и поставщиков действий служб данных.</span><span class="sxs-lookup"><span data-stu-id="960a0-124">This method is called by WCF Data Services to retrieve a number of service providers, including metadata service providers and data service action providers.</span></span> <span data-ttu-id="960a0-125">При запросе поставщика действий службы данных возвратите реализацию [идатасервицеактионпровидер](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) .</span><span class="sxs-lookup"><span data-stu-id="960a0-125">When asked for a data service action provider, return your [IDataServiceActionProvider](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) implementation.</span></span>

### <a name="idataserviceactionprovider"></a><span data-ttu-id="960a0-126">IDataServiceActionProvider</span><span class="sxs-lookup"><span data-stu-id="960a0-126">IDataServiceActionProvider</span></span>

 <span data-ttu-id="960a0-127">[Идатасервицеактионпровидер](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) содержит методы, позволяющие получать сведения о доступных действиях.</span><span class="sxs-lookup"><span data-stu-id="960a0-127">[IDataServiceActionProvider](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) contains methods that allow you to retrieve information about the available actions.</span></span> <span data-ttu-id="960a0-128">При реализации [идатасервицеактионпровидер](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) Вы дополняете метаданные службы, которая определяется реализацией [идатасервицеактионпровидер](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) вашей службы с действиями и обрабатывает эти действия соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="960a0-128">When you implement [IDataServiceActionProvider](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) you are augmenting the metadata for your service which is defined by your service’s implementation of [IDataServiceActionProvider](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) with Actions and handling dispatch to those actions as appropriate.</span></span>

#### <a name="advertiseserviceaction"></a><span data-ttu-id="960a0-129">AdvertiseServiceAction</span><span class="sxs-lookup"><span data-stu-id="960a0-129">AdvertiseServiceAction</span></span>

 <span data-ttu-id="960a0-130">[Метод адвертисесервицеактион](/previous-versions/dotnet/wcf-data-services/hh859971(v=vs.103)) вызывается для определения действий, доступных для указанного ресурса.</span><span class="sxs-lookup"><span data-stu-id="960a0-130">The [AdvertiseServiceAction method](/previous-versions/dotnet/wcf-data-services/hh859971(v=vs.103)) is called to determine what actions are available for the specified resource.</span></span> <span data-ttu-id="960a0-131">Этот метод вызывается только для действий, которые не всегда доступны.</span><span class="sxs-lookup"><span data-stu-id="960a0-131">This method is only called for actions that are not always available.</span></span> <span data-ttu-id="960a0-132">Он используется для проверки того, следует ли включать действие в ответ OData, исходя из состояния запрашиваемого ресурса или службы.</span><span class="sxs-lookup"><span data-stu-id="960a0-132">It is used to check if the action should be included in the OData response based upon the state of the resource being requested or the state of the service.</span></span> <span data-ttu-id="960a0-133">Способ выполнения этой проверки полностью зависит от вас.</span><span class="sxs-lookup"><span data-stu-id="960a0-133">How this check is accomplished is completely up to you.</span></span> <span data-ttu-id="960a0-134">Если вычислять доступность затратно, а текущий ресурс находится в веб-канале, можно просто пропустить проверку и объявить о доступности действия.</span><span class="sxs-lookup"><span data-stu-id="960a0-134">If it is an expensive to calculate availability and the current resource is in a feed, it is acceptable to skip the check and advertise the action.</span></span> <span data-ttu-id="960a0-135">Если текущий ресурс в данный момент возвращается в рамках веб-канала, параметру `inFeed` задается значение `true`.</span><span class="sxs-lookup"><span data-stu-id="960a0-135">The `inFeed` parameter is set to `true` if the current resource being returned is part of a feed.</span></span>

#### <a name="createinvokable"></a><span data-ttu-id="960a0-136">CreateInvokable</span><span class="sxs-lookup"><span data-stu-id="960a0-136">CreateInvokable</span></span>

 <span data-ttu-id="960a0-137">[Креатеинвокабле](/previous-versions/dotnet/wcf-data-services/hh859940(v=vs.103)) вызывается для создания [идатасервицеинвокабле](/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) , содержащего делегат, который инкапсулирует код, реализующий поведение действия.</span><span class="sxs-lookup"><span data-stu-id="960a0-137">[CreateInvokable](/previous-versions/dotnet/wcf-data-services/hh859940(v=vs.103)) is called to create a [IDataServiceInvokable](/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) that contains a delegate that encapsulates the code that implements the action’s behavior.</span></span> <span data-ttu-id="960a0-138">При этом создается экземпляр [идатасервицеинвокабле](/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) , но не вызывается действие.</span><span class="sxs-lookup"><span data-stu-id="960a0-138">This creates the [IDataServiceInvokable](/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) instance but does not invoke the action.</span></span> <span data-ttu-id="960a0-139">У действий службы данных WCF имеются побочные эффекты, они должны выполняться в сочетании с поставщиком обновлений для сохранения этих изменений на диске.</span><span class="sxs-lookup"><span data-stu-id="960a0-139">WCF Data Service Actions have side effects and need to work in conjunction with the Update Provider to save those changes to disk.</span></span> <span data-ttu-id="960a0-140">Метод [идатасервицеинвокабле. Invoke](/previous-versions/dotnet/wcf-data-services/hh859924(v=vs.103)) вызывается из метода SaveChanges () поставщика обновлений.</span><span class="sxs-lookup"><span data-stu-id="960a0-140">The [IDataServiceInvokable.Invoke](/previous-versions/dotnet/wcf-data-services/hh859924(v=vs.103)) method is called from the Update Provider’s SaveChanges() method is called.</span></span>

#### <a name="getserviceactions"></a><span data-ttu-id="960a0-141">GetServiceActions</span><span class="sxs-lookup"><span data-stu-id="960a0-141">GetServiceActions</span></span>

 <span data-ttu-id="960a0-142">Этот метод возвращает коллекцию экземпляров [сервицеактион](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) , которые представляют все действия, предоставляемые службой данных WCF.</span><span class="sxs-lookup"><span data-stu-id="960a0-142">This method returns a collection of [ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) instances that represent all of the actions a WCF Data Service exposes.</span></span> <span data-ttu-id="960a0-143">[Сервицеактион](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) — это представление метаданных действия и включает такие сведения, как имя действия, его параметры и тип возвращаемого значения.</span><span class="sxs-lookup"><span data-stu-id="960a0-143">[ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) is the metadata representation of an Action and includes information like the Action name, its parameters, and its return type.</span></span>

#### <a name="getserviceactionsbybindingparametertype"></a><span data-ttu-id="960a0-144">GetServiceActionsByBindingParameterType</span><span class="sxs-lookup"><span data-stu-id="960a0-144">GetServiceActionsByBindingParameterType</span></span>

 <span data-ttu-id="960a0-145">Этот метод возвращает коллекцию всех экземпляров [сервицеактион](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) , которые могут быть привязаны к указанному типу параметра привязки.</span><span class="sxs-lookup"><span data-stu-id="960a0-145">This method returns a collection of all [ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) instances that can be bound to the specified binding parameter type.</span></span> <span data-ttu-id="960a0-146">Иными словами, все [сервицеактион](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)), которые могут действовать с указанным типом ресурса (также называемым типом параметра привязки). Используется, когда служба возвращает ресурс, чтобы включить сведения о действиях, которые могут быть вызваны для этого ресурса.</span><span class="sxs-lookup"><span data-stu-id="960a0-146">In other words, all [ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103))s that can act on the specified resource type (also called binding parameter type).This is used when the service returns a resource in order to include information about Actions that can be invoked against that resource.</span></span> <span data-ttu-id="960a0-147">Этот метод должен возвращать только действия, которые могут быть привязаны к указанному типу параметра привязки (а не производным типам).</span><span class="sxs-lookup"><span data-stu-id="960a0-147">This method should only return actions that can bind to the exact binding parameter type (no derived types).</span></span> <span data-ttu-id="960a0-148">Этот метод вызывается один раз для каждого запроса и каждого типа, а результат его работы кэшируется службами данных WCF.</span><span class="sxs-lookup"><span data-stu-id="960a0-148">This method is called once per request per type encountered and the result is cached by WCF Data Services.</span></span>

#### <a name="tryresolveserviceaction"></a><span data-ttu-id="960a0-149">TryResolveServiceAction</span><span class="sxs-lookup"><span data-stu-id="960a0-149">TryResolveServiceAction</span></span>

 <span data-ttu-id="960a0-150">Этот метод выполняет поиск указанного [сервицеактион](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) и возвращает `true` значение, если [сервицеактион](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) найден.</span><span class="sxs-lookup"><span data-stu-id="960a0-150">This method searches for a specified [ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) and returns `true` if the [ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) is found.</span></span> <span data-ttu-id="960a0-151">Если объект найден, [сервицеактион](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) возвращается в `serviceAction` `out` параметре.</span><span class="sxs-lookup"><span data-stu-id="960a0-151">If found, the [ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) is returned in the `serviceAction` `out` parameter.</span></span>

### <a name="idataserviceinvokable"></a><span data-ttu-id="960a0-152">IDataServiceInvokable</span><span class="sxs-lookup"><span data-stu-id="960a0-152">IDataServiceInvokable</span></span>

 <span data-ttu-id="960a0-153">Этот интерфейс обеспечивает способ выполнения действия службы данных WCF.</span><span class="sxs-lookup"><span data-stu-id="960a0-153">This interface provides a way to execute a WCF Data Service Action.</span></span> <span data-ttu-id="960a0-154">При реализации интерфейса IDataServiceInvokable необходимо учесть три вещи.</span><span class="sxs-lookup"><span data-stu-id="960a0-154">When implementing IDataServiceInvokable you are responsible for 3 things:</span></span>

1. <span data-ttu-id="960a0-155">Отслеживание и, потенциально, маршалинг параметров.</span><span class="sxs-lookup"><span data-stu-id="960a0-155">Capturing and potentially marshaling the parameters</span></span>

2. <span data-ttu-id="960a0-156">Передача параметров коду, который фактически реализует действие при вызове метода Invoke().</span><span class="sxs-lookup"><span data-stu-id="960a0-156">Dispatching the parameters to the code that actually implements the Action when Invoke() is called</span></span>

3. <span data-ttu-id="960a0-157">Сохранение результатов работы метода Invoke() с тем, чтобы их можно было получить с помощью метода GetResult().</span><span class="sxs-lookup"><span data-stu-id="960a0-157">Storing any results from Invoke() so they can be retrieved using GetResult()</span></span>

 <span data-ttu-id="960a0-158">Параметры могут передаваться в виде токенов.</span><span class="sxs-lookup"><span data-stu-id="960a0-158">The parameters may be passed as tokens.</span></span> <span data-ttu-id="960a0-159">Это так, потому что можно написать поставщика службы данных, работающего с токенами, которые представляют ресурсы. При реализации такой схемы может потребоваться преобразование (маршалинг) этих токенов в сами ресурсы до их отправки собственно действию.</span><span class="sxs-lookup"><span data-stu-id="960a0-159">This is because it is possible to write a Data Service Provider that works with tokens that represent resources, if this is the case you may need to convert (marshal) these tokens into actual resources before dispatching to the actual action.</span></span> <span data-ttu-id="960a0-160">После маршалирования параметра он должен находиться в состоянии, доступном для редактирования, чтобы любые изменения ресурса, происходящие при вызове действия, были сохранены и записаны на диск.</span><span class="sxs-lookup"><span data-stu-id="960a0-160">After the parameter has been marshaled, it must be in an editable state so that any changes to the resource that occur when the action is invoked will be saved and written to disk.</span></span>

 <span data-ttu-id="960a0-161">Этому интерфейсу требуется два метода: Invoke и GetResult.</span><span class="sxs-lookup"><span data-stu-id="960a0-161">This interface requires two methods: Invoke and GetResult.</span></span> <span data-ttu-id="960a0-162">Метод Invoke вызывает делегата, который реализует поведение действия, а метод GetResult возвращает результат выполнения действия.</span><span class="sxs-lookup"><span data-stu-id="960a0-162">Invoke invokes the delegate that implements the action’s behavior and GetResult returns the result of the action.</span></span>

## <a name="invoking-a-wcf-data-service-action"></a><span data-ttu-id="960a0-163">Вызов действия службы данных WCF</span><span class="sxs-lookup"><span data-stu-id="960a0-163">Invoking a WCF Data Service Action</span></span>

 <span data-ttu-id="960a0-164">Действия вызываются с помощью запроса HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="960a0-164">Actions are invoked using an HTTP POST request.</span></span> <span data-ttu-id="960a0-165">В URL-адресе указывается ресурс, за которым следует имя действия.</span><span class="sxs-lookup"><span data-stu-id="960a0-165">The URL specifies the resource followed by the action name.</span></span> <span data-ttu-id="960a0-166">Параметры передаются в тексте запроса.</span><span class="sxs-lookup"><span data-stu-id="960a0-166">Parameters are passed in the body of the request.</span></span> <span data-ttu-id="960a0-167">Например, при наличии службы MovieService, которая выполняла действие Rate.</span><span class="sxs-lookup"><span data-stu-id="960a0-167">For example if there was a service called MovieService which exposed an action called Rate.</span></span> <span data-ttu-id="960a0-168">Для вызова действия Rate в отношении определенного фильма можно использовать следующий URL-адрес:</span><span class="sxs-lookup"><span data-stu-id="960a0-168">You could use the following URL to invoke the Rate action on a specific movie:</span></span>

 `http://MovieServer/MovieService.svc/Movies(1)/Rate`

 <span data-ttu-id="960a0-169">Movies(1) обозначает фильм, который требуется оценить, а Rate обозначает действие Rate.</span><span class="sxs-lookup"><span data-stu-id="960a0-169">Movies(1) specifies the movie you wish to rate and Rate specifies the Rate action.</span></span> <span data-ttu-id="960a0-170">Само значение оценки будет приведено в тексте HTTP-запроса, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="960a0-170">The actual value of the rating will be in the body of the HTTP request as shown in the following example:</span></span>

```http
POST http://MovieServer/MoviesService.svc/Movies(1)/Rate HTTP/1.1
Content-Type: application/json
Content-Length: 20
Host: localhost:15238
{
   "rating": 4
}
```

> [!WARNING]
> <span data-ttu-id="960a0-171">Приведенный выше образец кода будет работать только со службами данных WCF 5.2 и более поздней версии, которые поддерживают облегченный формат JSON.</span><span class="sxs-lookup"><span data-stu-id="960a0-171">The above sample code will work only with WCF Data Services 5.2 and later which has support for JSON light.</span></span> <span data-ttu-id="960a0-172">При использовании более ранней версии служб данных WCF необходимо указать подробный тип содержимого json следующим образом: `application/json;odata=verbose`.</span><span class="sxs-lookup"><span data-stu-id="960a0-172">If using an earlier version of WCF Data Services, you must specify the json verbose content-type as follows: `application/json;odata=verbose`.</span></span>

 <span data-ttu-id="960a0-173">Также можно вызывать действия с помощью клиента служб данных WCF, как показано в следующем фрагменте кода:</span><span class="sxs-lookup"><span data-stu-id="960a0-173">Alternatively you can invoke an action using the WCF Data Services Client as shown in the following code snippet.</span></span>

```csharp
MoviesModel context = new MoviesModel (new Uri("http://MyServer/MoviesService.svc/"));
//...
context.Execute(new Uri("http://MyServer/MoviesService.svc/Movies(1)/Rate"), "POST", new BodyOperationParameter("rating",4) );
```

 <span data-ttu-id="960a0-174">В приведенном выше фрагменте кода класс `MoviesModel` был сформирован с помощью Visual Studio для добавления ссылки на службу данных WCF.</span><span class="sxs-lookup"><span data-stu-id="960a0-174">In the code snippet above, the `MoviesModel` class was generated by using Visual Studio to Add Service Reference to a WCF Data Service.</span></span>

## <a name="see-also"></a><span data-ttu-id="960a0-175">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="960a0-175">See also</span></span>

- [<span data-ttu-id="960a0-176">Службы WCF Data Services 4.5</span><span class="sxs-lookup"><span data-stu-id="960a0-176">WCF Data Services 4.5</span></span>](index.md)
- [<span data-ttu-id="960a0-177">Определение служб данных WCF</span><span class="sxs-lookup"><span data-stu-id="960a0-177">Defining WCF Data Services</span></span>](defining-wcf-data-services.md)
- [<span data-ttu-id="960a0-178">Разработка и развертывание WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="960a0-178">Developing and Deploying WCF Data Services</span></span>](developing-and-deploying-wcf-data-services.md)
- [<span data-ttu-id="960a0-179">Специализированные поставщики служб данных</span><span class="sxs-lookup"><span data-stu-id="960a0-179">Custom Data Service Providers</span></span>](custom-data-service-providers-wcf-data-services.md)
