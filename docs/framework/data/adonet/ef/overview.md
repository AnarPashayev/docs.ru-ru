---
title: Общие сведения об Entity Framework
ms.date: 09/17/2018
ms.assetid: a2166b3d-d8ba-4a0a-8552-6ba1e3eaaee0
ms.openlocfilehash: d63e60c90e71593821c38830bc11d767e582619a
ms.sourcegitcommit: 8699383914c24a0df033393f55db3369db728a7b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/15/2019
ms.locfileid: "65634277"
---
# <a name="entity-framework-overview"></a>Общие сведения об Entity Framework

Платформа [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] представляет собой набор технологий ADO.NET, обеспечивающих разработку приложений, связанных с обработкой данных. Архитекторам и разработчикам приложений, ориентированных на обработку данных, приходится учитывать необходимость достижения двух совершенно различных целей. Они должны моделировать сущности, связи и логику решаемых бизнес-задач, а также работать с ядрами СУБД, используемыми для сохранения и получения данных. Данные могут распределяться по нескольким системам хранения данных, в каждой из которых применяются свои протоколы, но даже в приложениях, работающих с одной системой хранения данных, необходимо поддерживать баланс между требованиями системы хранения данных и требованиями написания эффективного и удобного для обслуживания кода приложения.

В [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] разработчики получают возможность работать с данными, представленными в форме относящихся к конкретным доменам объектов и свойств, таких как клиенты и их адреса, не будучи вынужденными обращаться к базовым таблицам и столбцам базы данных, где хранятся эти данные. [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] дает разработчикам возможность работать с данными на более высоком уровне абстракции, создавать и сопровождать приложения, ориентированные на работу с данными, одновременно с этим сокращая объем кода, по сравнению с традиционными приложениями. Так как [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] входит в состав .NET Framework, [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] приложения могут выполняться на любом компьютере, на котором установлена платформа .NET Framework, начиная с версии 3.5 с пакетом обновления 1.

## <a name="give-life-to-models"></a>Воплотить в жизнь моделей
 Многолетним и общим подходом к разработке является подход, при котором построение приложения или службы представляет собой его разделение на три части: модель домена, логическую модель и физическую модель. Модель домена определяет сущности и связи в моделируемой системе. Логическая модель для реляционной базы данных обеспечивает нормализацию сущностей и связей в целях создания таблиц с ограничениями внешнего ключа. В физической модели учитываются возможности конкретной системы обработки данных путем определения зависящих от ядра базы данных подробных сведений о хранении данных, которые касаются секционирования и индексирование.

 Физическая модель совершенствуется администраторами базы данных в целях повышения производительности, но программисты, которые разрабатывают код приложения, в основном вынуждены ограничиваться работой с логической моделью, подготавливая SQL-запросы и вызывая хранимые процедуры. Модели домена в основном используются как инструмент для представления и обмена мнениями о требованиях к приложению, поэтому чаще всего служат в качестве практически не изменяющихся схем, которые рассматриваются и обсуждаются на ранних стадиях проекта, после чего выходят из сферы внимания. Во многих коллективах разработчиков принято пропускать этап создания концептуальной модели и начинать с определения таблиц, столбцов и ключей в реляционной базе данных.

 [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] Придает значимость моделям, позволяя разработчикам выполнять запросы к сущностям и связям в модели предметной области (вызывается *концептуальной* модель [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]), опираясь на [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] для их преобразования операции команды, специфического для источника данных. Это позволяет отказаться от применения в приложениях жестко заданных зависимостей от конкретного источника данных.

 При работе в режиме Code First концептуальная модель сопоставлена с режимом хранения в коде. [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] может вывести концептуальную модель, основанную на типах объектов и дополнительных конфигурациях, которые можно задать. Метаданные сопоставления формируются во время выполнения на основе сочетания определений типов домена и дополнительной информации о конфигурации, которая указана в коде. [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] при необходимости создает базу данных на основе метаданных. Дополнительные сведения см. в разделе [Создание и сопоставление концептуальной модели](https://go.microsoft.com/fwlink/?LinkID=235382).

 При работе со средствами работы с моделью EDM концептуальная модель, модель хранения и сопоставление между ними выражены в схемах на основе XML и определены в файлах с именами с соответствующими расширениями.

- Язык CSDL определяет концептуальную модель. CSDL — это [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]в реализации [модели EDM](../../../../../docs/framework/data/adonet/entity-data-model.md). Расширение файла - CSDL.

- Язык SSDL определяет модель хранения данных, которая также называется логической моделью. Расширение файла - SSDL.

- Язык MSL определяет сопоставление модели хранения и концептуальной модели. Расширение файла - MSL.

Модель хранения и сопоставления при необходимости могут быть изменены без изменения концептуальной модели, классов данных и кода приложения. Модели хранения зависят от поставщика, поэтому можно работать с согласованной концептуальной моделью через различные источники данных.

[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] Модели и сопоставления файлов для создания, чтения, обновления и удаления, выполняемых над сущностями и связями концептуальной модели, в эквивалентные операции в источнике данных. [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] Поддерживает даже сопоставление сущностей в концептуальной модели с хранимыми процедурами в источнике данных. Дополнительные сведения см. в разделе [CSDL, SSDL и MSL спецификации](../../../../../docs/framework/data/adonet/ef/language-reference/csdl-ssdl-and-msl-specifications.md).

## <a name="map-objects-to-data"></a>Объекты-карты к данным
 При использовании объектно-ориентированного программирования для взаимодействия с системами хранения данных возникают сложности. Безусловно, организация классов часто напоминает организацию таблиц реляционной базы данных, но такое соответствие неидеально. Несколько нормализованных таблиц часто соответствуют единственному классу, а связи между классами представлены не так, как связи между таблицами. Например, для представления клиенту заказа на продажу в классе `Order` может использоваться свойство, содержащее ссылку на экземпляр класса `Customer`, но строка таблицы `Order` базы данных содержит столбец внешнего ключа (или набор столбцов) со значением, которое соответствует первичному ключу в таблице `Customer`. Класс `Customer` может включать свойство с именем `Orders`, содержащее коллекцию экземпляров класса `Order`, но таблица `Customer` базы данных не содержит сравнимого столбца. В этом случае [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] предоставляет разработчикам гибкость в представлении связей или более полные связи модели (такие, как в базе данных).

 В существующих решениях была предпринята попытка устранить этот разрыв, часто называемый «несоответствием типов данных» (impedance mismatch), путем сопоставления с реляционными таблицами и столбцами только объектно-ориентированных классов и свойств. Вместо данного традиционного подхода [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] сопоставляет реляционные таблицы, столбцы и ограничения внешнего ключа логических моделей сущностей и связей в концептуальной модели. Это позволяет достичь большей гибкости при определении объектов и оптимизации логической модели. С помощью инструментов [!INCLUDE[adonet_edm](../../../../../includes/adonet-edm-md.md)] формируются расширяемые классы данных, основанные на концептуальной модели. Эти классы являются разделяемыми классами, которые могут быть расширены с помощью дополнительных членов, добавленных разработчиком. По умолчанию классы, сформированные для определенной концептуальной модели, являются производными от базовых классов, предоставляющих службы для материализации сущностей в виде объектов, а также для отслеживания и сохранения изменений. Разработчики могут использовать эти три класса для работы с сущностями и связями как с объектами, относящимися к ассоциациям. Разработчики смогут также настраивать классы, сформированные для концептуальной модели. Дополнительные сведения см. в разделе [работа с объектами](../../../../../docs/framework/data/adonet/ef/working-with-objects.md).

## <a name="access-and-change-entity-data"></a>Доступ и изменение данных сущностей

[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] — это не просто еще одно средство объектно-реляционного сопоставления. Она предоставляет приложениям возможность чтения и изменения данных, представленных в виде сущностей и связей в концептуальной модели. [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] использует данные в модели и файлах сопоставления для преобразования запросов объектов к типам сущностей, представленным в концептуальной модели, в запросы, зависящие от источника данных. Результаты запросов преобразуются в объекты, [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] управляет. [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] Предоставляет следующие способы выполнения запросов к концептуальной модели и возврата объектов:

- [!INCLUDE[linq_entities](../../../../../includes/linq-entities-md.md)]. Обеспечивает поддержку Language-Integrated Query (LINQ) для выполнения запросов к типам сущностей, которые определены в концептуальной модели. Дополнительные сведения см. в разделе [LINQ to Entities](../../../../../docs/framework/data/adonet/ef/language-reference/linq-to-entities.md).

- [!INCLUDE[esql](../../../../../includes/esql-md.md)]. Независимый от хранилища диалект SQL, который работает непосредственно с сущностями в концептуальной модели, которая поддерживает [!INCLUDE[adonet_edm](../../../../../includes/adonet-edm-md.md)] основные понятия. [!INCLUDE[esql](../../../../../includes/esql-md.md)] используется, и с запросами объектов и запросы, которые выполняются с помощью поставщика EntityClient. Дополнительные сведения см. в разделе [Общие сведения об Entity SQL](../../../../../docs/framework/data/adonet/ef/language-reference/entity-sql-overview.md).

Платформа [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] включает в себя поставщик данных EntityClient. Поставщик управляет соединениями, переводит запросы сущностей в запросы, зависящие от источника данных, и возвращает модуль чтения данных, который используется [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] для материализации данных сущности в виде объектов. Если материализация объектов не требуется, поставщик EntityClient может использоваться как обычная [!INCLUDE[vstecado](../../../../../includes/vstecado-md.md)] поставщика данных, позволяя приложениям выполнять [!INCLUDE[esql](../../../../../includes/esql-md.md)] запросы и использовать средство чтения возвращаемых данных только для чтения. Дополнительные сведения см. в разделе [поставщик EntityClient для Entity Framework](../../../../../docs/framework/data/adonet/ef/entityclient-provider-for-the-entity-framework.md).

На следующей схеме показана архитектура доступа к данным [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]:

![Схема архитектуры Entity Framework](../../../../../docs/framework/data/adonet/ef/media/wd-efarchdiagram.gif "wd_EFArchDiagram")

Средства [!INCLUDE[adonet_edm](../../../../../includes/adonet-edm-md.md)] могут сформировать класс, производный от `System.Data.Objects.ObjectContext` или `System.Data.Entity.DbContext`, который представляет контейнер сущностей в концептуальной модели. Контекст объекта предоставляет средства для отслеживания изменений и управления идентификаторами, параллелизмом и связями. Этот класс представляет также доступ к методу `SaveChanges`, который записывает результаты вставки, обновления и удаления данных в источник данных. Подобно запросам, эти изменения производятся либо командами, автоматически сформированными системой, либо хранимыми процедурами, указанными разработчиком.

## <a name="data-providers"></a>Поставщики данных

Поставщик `EntityClient` расширяет модель поставщика [!INCLUDE[vstecado](../../../../../includes/vstecado-md.md)] путем доступа к данным в терминах сущностей и связей концептуальной модели. Выполняет запросы на языке [!INCLUDE[esql](../../../../../includes/esql-md.md)]. [!INCLUDE[esql](../../../../../includes/esql-md.md)] представляет базовый язык запросов, с помощью которого `EntityClient` обменивается данными с базой данных. Дополнительные сведения см. в разделе [поставщик EntityClient для Entity Framework](../../../../../docs/framework/data/adonet/ef/entityclient-provider-for-the-entity-framework.md).

Приложение [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] включает обновленный поставщик данных SqlClient, который поддерживает канонические деревья команд. Дополнительные сведения см. в разделе [SqlClient для Entity Framework](../../../../../docs/framework/data/adonet/ef/sqlclient-for-the-entity-framework.md).

## <a name="entity-data-model-tools"></a>Средства модели EDM

Вместе с [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] среда выполнения, Visual Studio включает средства моделирования и сопоставления. Дополнительные сведения см. в разделе [моделирования и сопоставления](../../../../../docs/framework/data/adonet/ef/modeling-and-mapping.md).

## <a name="learn-more"></a>Дополнительные сведения

Дополнительные сведения о [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)], см. в разделе:

[Приступая к работе](../../../../../docs/framework/data/adonet/ef/getting-started.md) — предоставляет сведения о том, как начать работу и быстром запуске при помощи [быстрого запуска](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb399182(v=vs.100)), который показывает, как создать простое [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] приложения.

[Терминология платформы Entity Framework](../../../../../docs/framework/data/adonet/ef/terminology.md) -определяет многие термины, представленные в модели EDM и [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] и используются в [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] документации.

[Ресурсы Entity Framework](../../../../../docs/framework/data/adonet/ef/resources.md) — ссылки на концептуальные разделы и ссылки на другие разделы и ресурсы для построения [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] приложений.

## <a name="see-also"></a>См. также

- [ADO.NET Entity Framework](../../../../../docs/framework/data/adonet/ef/index.md)
