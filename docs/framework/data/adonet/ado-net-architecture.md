---
title: Архитектура ADO.NET
ms.date: 03/30/2017
ms.assetid: fcd45b99-ae8f-45ab-8b97-d887beda734e
ms.openlocfilehash: 50b8aaf6b07494c44423cf454f667f3bcdce32c6
ms.sourcegitcommit: d2e1dfa7ef2d4e9ffae3d431cf6a4ffd9c8d378f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/07/2019
ms.locfileid: "70787005"
---
# <a name="adonet-architecture"></a><span data-ttu-id="bf5d8-102">Архитектура ADO.NET</span><span class="sxs-lookup"><span data-stu-id="bf5d8-102">ADO.NET Architecture</span></span>
<span data-ttu-id="bf5d8-103">Обработка данных традиционно полагалась в основном на двухуровневую модель, основанную на сетевом соединении.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-103">Data processing has traditionally relied primarily on a connection-based, two-tier model.</span></span> <span data-ttu-id="bf5d8-104">Так как при обработке данных все больше используется многоуровневая архитектура, программисты переходят на метод, не использующий подключение, чтобы обеспечить лучшую масштабируемость для их приложений.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-104">As data processing increasingly uses multi-tier architectures, programmers are switching to a disconnected approach to provide better scalability for their applications.</span></span>  
  
## <a name="adonet-components"></a><span data-ttu-id="bf5d8-105">Компоненты ADO.NET</span><span class="sxs-lookup"><span data-stu-id="bf5d8-105">ADO.NET Components</span></span>  
 <span data-ttu-id="bf5d8-106">Двумя основными компонентами ADO.NET для доступа к данным и управления ими являются поставщики данных .NET Framework и <xref:System.Data.DataSet>.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-106">The two main components of ADO.NET for accessing and manipulating data are the .NET Framework data providers and the <xref:System.Data.DataSet>.</span></span>  
  
### <a name="net-framework-data-providers"></a><span data-ttu-id="bf5d8-107">Поставщики данных .NET Framework</span><span class="sxs-lookup"><span data-stu-id="bf5d8-107">.NET Framework Data Providers</span></span>  
 <span data-ttu-id="bf5d8-108">Поставщиками данных .NET Framework являются компоненты, которые специально сконструированы для обработки данных и быстрого, однопроходного доступа к данным только для чтения.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-108">The .NET Framework Data Providers are components that have been explicitly designed for data manipulation and fast, forward-only, read-only access to data.</span></span> <span data-ttu-id="bf5d8-109">Объект `Connection` обеспечивает обмен данными с источником данных.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-109">The `Connection` object provides connectivity to a data source.</span></span> <span data-ttu-id="bf5d8-110">Объект `Command` позволяет обращаться к командам базы данных для возврата данных, изменения данных, выполнения хранимых процедур и передачи или получения сведений о параметрах.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-110">The `Command` object enables access to database commands to return data, modify data, run stored procedures, and send or retrieve parameter information.</span></span> <span data-ttu-id="bf5d8-111">`DataReader` обеспечивает высокопроизводительный поток данных из источника данных.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-111">The `DataReader` provides a high-performance stream of data from the data source.</span></span> <span data-ttu-id="bf5d8-112">Наконец, `DataAdapter` предоставляет мост между объектом `DataSet` и источником данных.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-112">Finally, the `DataAdapter` provides the bridge between the `DataSet` object and the data source.</span></span> <span data-ttu-id="bf5d8-113">`DataAdapter` использует объекты `Command` для выполнения команд SQL на источнике данных для загрузки `DataSet` с данными и согласования изменений данных, выполненных в `DataSet`, вновь с источником данных.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-113">The `DataAdapter` uses `Command` objects to execute SQL commands at the data source to both load the `DataSet` with data and reconcile changes that were made to the data in the `DataSet` back to the data source.</span></span> <span data-ttu-id="bf5d8-114">Дополнительные сведения см. в статьях [.NET Framework Data providers](data-providers.md) и [Извлечение и изменение данных в ADO.NET](retrieving-and-modifying-data.md).</span><span class="sxs-lookup"><span data-stu-id="bf5d8-114">For more information, see [.NET Framework Data Providers](data-providers.md) and [Retrieving and Modifying Data in ADO.NET](retrieving-and-modifying-data.md).</span></span>  
  
### <a name="the-dataset"></a><span data-ttu-id="bf5d8-115">DataSet</span><span class="sxs-lookup"><span data-stu-id="bf5d8-115">The DataSet</span></span>  
 <span data-ttu-id="bf5d8-116">Класс `DataSet` в ADO.NET специально сконструирован для доступа к данным независимо от источника данных.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-116">The ADO.NET `DataSet` is explicitly designed for data access independent of any data source.</span></span> <span data-ttu-id="bf5d8-117">Поэтому он может быть использован со многими и разными источниками данных, с XML-данными или для управления данными, локальными для приложения.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-117">As a result, it can be used with multiple and differing data sources, used with XML data, or used to manage data local to the application.</span></span> <span data-ttu-id="bf5d8-118">`DataSet` содержит коллекцию одного или нескольких объектов <xref:System.Data.DataTable>, состоящих из строк и столбцов данных, а также первичный ключ, внешний ключ, ограничение и связанные сведения о данных в объектах `DataTable`.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-118">The `DataSet` contains a collection of one or more <xref:System.Data.DataTable> objects consisting of rows and columns of data, and also primary key, foreign key, constraint, and relation information about the data in the `DataTable` objects.</span></span> <span data-ttu-id="bf5d8-119">Дополнительные сведения см. в разделе [Наборы данных, таблицы данных и объекты DataView](./dataset-datatable-dataview/index.md).</span><span class="sxs-lookup"><span data-stu-id="bf5d8-119">For more information, see [DataSets, DataTables, and DataViews](./dataset-datatable-dataview/index.md).</span></span>  
  
 <span data-ttu-id="bf5d8-120">На следующей схеме показана связь между поставщиком данных .NET Framework и `DataSet`.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-120">The following diagram illustrates the relationship between a .NET Framework data provider and a `DataSet`.</span></span>  
  
 <span data-ttu-id="bf5d8-121">![ADO.NET график](./media/ado-1-bpuedev11.png "ado_1_bpuedev11")</span><span class="sxs-lookup"><span data-stu-id="bf5d8-121">![ADO.Net graphic](./media/ado-1-bpuedev11.png "ado_1_bpuedev11")</span></span>  
<span data-ttu-id="bf5d8-122">Архитектура ADO.NET</span><span class="sxs-lookup"><span data-stu-id="bf5d8-122">ADO.NET architecture</span></span>  
  
### <a name="choosing-a-datareader-or-a-dataset"></a><span data-ttu-id="bf5d8-123">Выбор между DataReader или DataSet</span><span class="sxs-lookup"><span data-stu-id="bf5d8-123">Choosing a DataReader or a DataSet</span></span>  
 <span data-ttu-id="bf5d8-124">При принятии решения о том, следует ли использовать `DataReader` в приложении (см. [статью получение данных с помощью DataReader](retrieving-data-using-a-datareader.md)) или `DataSet` (см. раздел [DataSets, DataTables и представления данных](./dataset-datatable-dataview/index.md)), следует рассмотреть тип функций, необходимых приложению.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-124">When you decide whether your application should use a `DataReader` (see [Retrieving Data Using a DataReader](retrieving-data-using-a-datareader.md)) or a `DataSet` (see [DataSets, DataTables, and DataViews](./dataset-datatable-dataview/index.md)), consider the type of functionality that your application requires.</span></span> <span data-ttu-id="bf5d8-125">`DataSet` предназначен для выполнения следующих задач.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-125">Use a `DataSet` to do the following:</span></span>  
  
- <span data-ttu-id="bf5d8-126">Локальное кэширование данных в приложении для последующей обработки.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-126">Cache data locally in your application so that you can manipulate it.</span></span> <span data-ttu-id="bf5d8-127">Если нужно только считывать результаты запроса, класс `DataReader` подходит наилучшим образом.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-127">If you only need to read the results of a query, the `DataReader` is the better choice.</span></span>  
  
- <span data-ttu-id="bf5d8-128">Удаленное взаимодействие с данными между уровнями или от веб-службы XML.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-128">Remote data between tiers or from an XML Web service.</span></span>  
  
- <span data-ttu-id="bf5d8-129">Динамическое взаимодействие с данными, например привязка к элементу управления Windows Forms или комбинирование и связывание данных из нескольких источников.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-129">Interact with data dynamically such as binding to a Windows Forms control or combining and relating data from multiple sources.</span></span>  
  
- <span data-ttu-id="bf5d8-130">Выполнение интенсивной обработки, не требующей открытого соединения с источником данных, что освобождает соединение для использования другими клиентами.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-130">Perform extensive processing on data without requiring an open connection to the data source, which frees the connection to be used by other clients.</span></span>  
  
 <span data-ttu-id="bf5d8-131">Если функциональность, предоставляемая классом `DataSet`, не нужна, можно повысить производительность приложения, используя класс `DataReader` для возврата данных в однопроходном режиме только для чтения.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-131">If you do not require the functionality provided by the `DataSet`, you can improve the performance of your application by using the `DataReader` to return your data in a forward-only, read-only manner.</span></span> <span data-ttu-id="bf5d8-132">Несмотря на `DataAdapter` то, `DataReader` что использует для `DataSet` заполнения содержимого (см. раздел [Заполнение](populating-a-dataset-from-a-dataadapter.md) `DataReader`набора данных из DataAdapter) с помощью, можно повысить производительность, так как сохраняется память, которая будет использоваться и Избегайте обработки, необходимой для создания и заполнения содержимого `DataSet`объекта. `DataSet`</span><span class="sxs-lookup"><span data-stu-id="bf5d8-132">Although the `DataAdapter` uses the `DataReader` to fill the contents of a `DataSet` (see [Populating a DataSet from a DataAdapter](populating-a-dataset-from-a-dataadapter.md)), by using the `DataReader`, you can boost performance because you will save memory that would be consumed by the `DataSet`, and avoid the processing that is required to create and fill the contents of the `DataSet`.</span></span>  
  
## <a name="linq-to-dataset"></a><span data-ttu-id="bf5d8-133">LINQ to DataSet</span><span class="sxs-lookup"><span data-stu-id="bf5d8-133">LINQ to DataSet</span></span>  
 <span data-ttu-id="bf5d8-134">Технология LINQ to DataSet предоставляет возможности выполнения запросов и проверки типов во время компиляции для данных, кэшированных в объекте DataSet.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-134">LINQ to DataSet provides query capabilities and compile-time type checking over data cached in a DataSet object.</span></span> <span data-ttu-id="bf5d8-135">Эта технология позволяет писать запросы на одном из языков .NET Framework, например C# или Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-135">It allows you to write queries in one of the .NET Framework development language, such as C# or Visual Basic.</span></span> <span data-ttu-id="bf5d8-136">Дополнительные сведения см. в разделе [LINQ to DataSet](linq-to-dataset.md).</span><span class="sxs-lookup"><span data-stu-id="bf5d8-136">For more information, see [LINQ to DataSet](linq-to-dataset.md).</span></span>  
  
## <a name="linq-to-sql"></a><span data-ttu-id="bf5d8-137">LINQ to SQL</span><span class="sxs-lookup"><span data-stu-id="bf5d8-137">LINQ to SQL</span></span>  
 <span data-ttu-id="bf5d8-138">LINQ to SQL поддерживает запросы к модели объектов, сопоставленной со структурами данных реляционной базы данных, без использования промежуточной концептуальной модели.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-138">LINQ to SQL supports queries against an object model that is mapped to the data structures of a relational database without using an intermediate conceptual model.</span></span> <span data-ttu-id="bf5d8-139">Каждая таблица представляется отдельным классом; таким образом, модель объектов тесно привязывается к схеме реляционной базы данных.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-139">Each table is represented by a separate class, tightly coupling the object model to the relational database schema.</span></span> <span data-ttu-id="bf5d8-140">LINQ to SQL преобразует запросы LINQ из модели объектов в язык Transact-SQL и передает их в базу данных для выполнения.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-140">LINQ to SQL translates language-integrated queries in the object model into Transact-SQL and sends them to the database for execution.</span></span> <span data-ttu-id="bf5d8-141">При возврате результатов базой данных LINQ to SQL преобразует результаты обратно в объекты.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-141">When the database returns the results, LINQ to SQL translates the results back into objects.</span></span> <span data-ttu-id="bf5d8-142">Дополнительные сведения см. в разделе [LINQ to SQL](./sql/linq/index.md).</span><span class="sxs-lookup"><span data-stu-id="bf5d8-142">For more information, see [LINQ to SQL](./sql/linq/index.md).</span></span>  
  
## <a name="adonet-entity-framework"></a><span data-ttu-id="bf5d8-143">ADO.NET Entity Framework</span><span class="sxs-lookup"><span data-stu-id="bf5d8-143">ADO.NET Entity Framework</span></span>  
 <span data-ttu-id="bf5d8-144">Платформа ADO.NET Entity Framework разработана, чтобы разработчики могли создавать приложения для доступа к данным путем программирования по концептуальной модели приложения, а не по реляционной схеме хранения.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-144">The ADO.NET Entity Framework is designed to enable developers to create data access applications by programming against a conceptual application model instead of programming directly against a relational storage schema.</span></span> <span data-ttu-id="bf5d8-145">Ее целью является уменьшение объема кода и затрат на сопровождение приложений, ориентированных на обработку данных.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-145">The goal is to decrease the amount of code and maintenance required for data-oriented applications.</span></span> <span data-ttu-id="bf5d8-146">Дополнительные сведения см. в разделе [ADO.NET Entity Framework](./ef/index.md).</span><span class="sxs-lookup"><span data-stu-id="bf5d8-146">For more information, see [ADO.NET Entity Framework](./ef/index.md).</span></span>  
  
## <a name="wcf-data-services"></a><span data-ttu-id="bf5d8-147">Службы данных WCF</span><span class="sxs-lookup"><span data-stu-id="bf5d8-147">WCF Data Services</span></span>  
 [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <span data-ttu-id="bf5d8-148">используется для развертывания служб данных в Интернете или интрасети.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-148">is used to deploy data services on the Web or an intranet.</span></span> <span data-ttu-id="bf5d8-149">Данные структурируются как сущности и отношения согласно спецификациям модели EDM.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-149">The data is structured as entities and relationships according to the specifications of the Entity Data Model.</span></span> <span data-ttu-id="bf5d8-150">Данные, развертываемые в данной модели, адресуются по стандартному протоколу HTTP.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-150">Data deployed on this model is addressable by standard HTTP protocol.</span></span> <span data-ttu-id="bf5d8-151">Дополнительные сведения см. в разделе [Службы данных WCF 4.5](../wcf/index.md).</span><span class="sxs-lookup"><span data-stu-id="bf5d8-151">For more information, see [WCF Data Services 4.5](../wcf/index.md).</span></span>  
  
## <a name="xml-and-adonet"></a><span data-ttu-id="bf5d8-152">XML и ADO.NET</span><span class="sxs-lookup"><span data-stu-id="bf5d8-152">XML and ADO.NET</span></span>  
 <span data-ttu-id="bf5d8-153">ADO.NET использует возможности XML для обеспечения отключенного доступа к данным.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-153">ADO.NET leverages the power of XML to provide disconnected access to data.</span></span> <span data-ttu-id="bf5d8-154">ADO.NET разрабатывался вручную с использованием классов XML в .NET Framework; Оба компонента являются компонентами одной архитектуры.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-154">ADO.NET was designed hand-in-hand with the XML classes in the .NET Framework; both are components of a single architecture.</span></span>  
  
 <span data-ttu-id="bf5d8-155">ADO.NET и классы XML в .NET Framework сходятся в `DataSet` объекте.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-155">ADO.NET and the XML classes in the .NET Framework converge in the `DataSet` object.</span></span> <span data-ttu-id="bf5d8-156">Объект `DataSet` может заполняться данными из XML-источника, будь то файл или поток XML-данных.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-156">The `DataSet` can be populated with data from an XML source, whether it is a file or an XML stream.</span></span> <span data-ttu-id="bf5d8-157">Объект `DataSet` может быть записан в виде XML-кода, соответствующего спецификациям консорциума W3C, который включает в себя схему в виде XSD, независимо от источника данных, находящихся в `DataSet`.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-157">The `DataSet` can be written as World-Wide Web Consortium (W3C) compliant XML that includes its schema as XML schema definition language (XSD) schema, regardless of the source of the data in the `DataSet`.</span></span> <span data-ttu-id="bf5d8-158">Так как в `DataSet` собственным форматом сериализации является XML, он является отличным способом перемещения данных между уровнями. Это делает `DataSet` оптимальным решением для удаленного взаимодействия с контекстом данных и схемы как в направлении к веб-службе XML, так и в обратном направлении.</span><span class="sxs-lookup"><span data-stu-id="bf5d8-158">Because of the native serialization format of the `DataSet` is XML, it is an excellent medium for moving data between tiers, making the `DataSet` an optimal choice for remoting data and schema context to and from an XML Web service.</span></span> <span data-ttu-id="bf5d8-159">Дополнительные сведения см. в разделе [XML-документы и данные](../../../standard/data/xml/index.md).</span><span class="sxs-lookup"><span data-stu-id="bf5d8-159">For more information, see [XML Documents and Data](../../../standard/data/xml/index.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bf5d8-160">См. также</span><span class="sxs-lookup"><span data-stu-id="bf5d8-160">See also</span></span>

- [<span data-ttu-id="bf5d8-161">Общие сведения об ADO.NET</span><span class="sxs-lookup"><span data-stu-id="bf5d8-161">ADO.NET Overview</span></span>](ado-net-overview.md)
