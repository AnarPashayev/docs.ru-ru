---
title: Уведомления запросов в SQL Server
description: Узнайте, как использовать уведомления о запросах для уведомления приложений об изменении данных в SQL Server базе данных, например для обновления отображения приложений.
ms.date: 03/30/2017
ms.assetid: 0f0ba1a1-3180-4af8-87f7-c795dc8f8f55
ms.openlocfilehash: 43b496db74f7e6fc9bc9f17d946bf34398b32312
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/15/2020
ms.locfileid: "90543989"
---
# <a name="query-notifications-in-sql-server"></a>Уведомления запросов в SQL Server
С помощью уведомлений о запросах, построенных на основе инфраструктуры компонента Service Broker, приложения могут получать извещения об изменениях данных. Эта функция особенно полезна для приложений, которые предоставляют кэш данных из базы данных (например, для веб-приложений), и которым требуются уведомления об изменении исходных данных.  
  
 Существует три способа реализации уведомлений о запросах с помощью ADO.NET:  
  
1. Реализация низкого уровня обеспечивается классом `SqlNotificationRequest`, который предоставляет функциональные возможности на стороне сервера, что позволяет выполнять команду с запросом на уведомления.  
  
2. Высокоуровневая реализация обеспечивается классом `SqlDependency`, который является классом, предоставляющим высокоуровневую абстракцию функций уведомления между исходным приложением и SQL Server, что позволяет использовать зависимость для обнаружения изменений на сервере. В большинстве случаев это самый простой и самый эффективный способ задействовать возможности уведомления SQL Server в управляемых клиентских приложениях с помощью поставщика данных .NET Framework для SQL Server.  
  
3. Кроме того, веб-приложения, построенные с помощью ASP.NET 2.0 и более поздних версий, могут использовать вспомогательные классы `SqlCacheDependency`.  
  
 Уведомления о запросах удобно использовать в приложениях, которые должны обновлять дисплеи и кэши в ответ на изменения в базовых данных. Microsoft SQL Server позволяет приложениям .NET Framework передавать команды в SQL Server и запрашивать уведомления, если при выполнении одной и той же команды может получиться результирующий набор, отличный от полученного первоначально. Формируемые на сервере уведомления отправляются через очереди для последующей обработки.  
  
 Уведомления можно настроить для инструкций SELECT и EXECUTE. При использовании инструкции EXECUTE SQL Server регистрирует уведомление о выполненной команде, а не саму инструкцию EXECUTE. Команда должна соответствовать требованиям, предъявляемым к инструкции SELECT. Если регистрируемая команда состоит из нескольких инструкций, ядро СУБД создает уведомления для каждой из них.  
  
 Если вы разрабатываете приложение, в котором вам потребуются надежные отправки уведомлений при изменении данных, ознакомьтесь с разделом **планирование эффективной стратегии уведомлений о запросах** и **альтернативных способов уведомления о запросах** в статье [планирование уведомлений](/previous-versions/sql/sql-server-2008-r2/ms187528(v=sql.105)) . Дополнительные сведения об уведомлениях о запросах и SQL Server Service Broker см. по следующим ссылкам на статьи в документации по SQL Server.  
  
 **Документация по SQL Server**  
  
- [Использование уведомлений запросов](/previous-versions/sql/sql-server-2008-r2/ms175110(v=sql.105))  
  
- [Создание запроса для уведомления](/previous-versions/sql/sql-server-2008-r2/ms181122(v=sql.105))  
  
- [Разработка (компонент Service Broker)](/previous-versions/sql/sql-server-2008-r2/bb522889(v=sql.105))  
  
- [Информационный центр по компоненту Service Broker для разработчиков](/previous-versions/sql/sql-server-2008-r2/ms166100(v=sql.105))  
  
- [Руководство разработчика (компонент Service Broker)](/previous-versions/sql/sql-server-2008-r2/bb522908(v=sql.105))  
  
## <a name="in-this-section"></a>в этом разделе  
 [Включение уведомлений о запросах](enabling-query-notifications.md)  
 Описание использования уведомлений о запросах, включая требования для их включения и использования.  
  
 [SqlDependency в приложении ASP.NET](sqldependency-in-an-aspnet-app.md)  
 Демонстрирует использование уведомлений запросов из приложения ASP.NET.  
  
 [Обнаружение изменений с помощью SqlDependency](detecting-changes-with-sqldependency.md)  
 Сведения об определении отличия результатов запроса от изначально полученных.  
  
 [Выполнение SqlCommand с помощью SqlNotificationRequest](sqlcommand-execution-with-a-sqlnotificationrequest.md)  
 Демонстрирует настройку объекта <xref:System.Data.SqlClient.SqlCommand> для работы с уведомлением запроса.  
  
## <a name="reference"></a>Справочник  
 <xref:System.Data.Sql.SqlNotificationRequest>  
 Описание класса <xref:System.Data.Sql.SqlNotificationRequest> и всех его членов.  
  
 <xref:System.Data.SqlClient.SqlDependency>  
 Описание класса <xref:System.Data.SqlClient.SqlDependency> и всех его членов.  
  
 <xref:System.Web.Caching.SqlCacheDependency>  
 Описание класса <xref:System.Web.Caching.SqlCacheDependency> и всех его членов.  
  
## <a name="see-also"></a>См. также

- [SQL Server и ADO.NET](index.md)
- [Общие сведения об ADO.NET](../ado-net-overview.md)
