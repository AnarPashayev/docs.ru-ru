---
title: Владение и отделение пользователей от схем в SQL Server
ms.date: 03/30/2017
ms.assetid: 242830c1-31b5-4427-828c-cc22ff339f30
ms.openlocfilehash: 520772acc5edd812f64c61cc7fdda9db3441c87c
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/22/2019
ms.locfileid: "69961090"
---
# <a name="ownership-and-user-schema-separation-in-sql-server"></a><span data-ttu-id="a0198-102">Владение и отделение пользователей от схем в SQL Server</span><span class="sxs-lookup"><span data-stu-id="a0198-102">Ownership and User-Schema Separation in SQL Server</span></span>
<span data-ttu-id="a0198-103">Основным принципом безопасности SQL Server является то, что владельцы объектов имеют неотзываемые разрешения на их администрирование.</span><span class="sxs-lookup"><span data-stu-id="a0198-103">A core concept of SQL Server security is that owners of objects have irrevocable permissions to administer them.</span></span> <span data-ttu-id="a0198-104">Нельзя удалять права доступа у владельцев объектов. Также нельзя удалять пользователей из базы данных, если они владеют в ней объектами.</span><span class="sxs-lookup"><span data-stu-id="a0198-104">You cannot remove privileges from an object owner, and you cannot drop users from a database if they own objects in it.</span></span>  
  
## <a name="user-schema-separation"></a><span data-ttu-id="a0198-105">Отделение пользователей от схем</span><span class="sxs-lookup"><span data-stu-id="a0198-105">User-Schema Separation</span></span>  
 <span data-ttu-id="a0198-106">Отделение пользователей от схем обеспечивает дополнительную гибкость в управлении разрешениями объектов базы данных.</span><span class="sxs-lookup"><span data-stu-id="a0198-106">User-schema separation allows for more flexibility in managing database object permissions.</span></span> <span data-ttu-id="a0198-107">*Схема* — это именованный контейнер для объектов базы данных, который позволяет группировать объекты в отдельные пространства имен.</span><span class="sxs-lookup"><span data-stu-id="a0198-107">A *schema* is a named container for database objects, which allows you to group objects into separate namespaces.</span></span> <span data-ttu-id="a0198-108">Например, образец базы данных AdventureWorks содержит схемы для Production, Sales и HumanResources.</span><span class="sxs-lookup"><span data-stu-id="a0198-108">For example, the AdventureWorks sample database contains schemas for Production, Sales, and HumanResources.</span></span>  
  
 <span data-ttu-id="a0198-109">Четырехкомпонентный синтаксис ссылок на объекты указывает имя схемы.</span><span class="sxs-lookup"><span data-stu-id="a0198-109">The four-part naming syntax for referring to objects specifies the schema name.</span></span>  
  
```  
Server.Database.DatabaseSchema.DatabaseObject  
```  
  
### <a name="schema-owners-and-permissions"></a><span data-ttu-id="a0198-110">Владельцы схемы и разрешения</span><span class="sxs-lookup"><span data-stu-id="a0198-110">Schema Owners and Permissions</span></span>  
 <span data-ttu-id="a0198-111">Владельцем схемы может быть любой участник базы данных, при этом одному участнику может принадлежать несколько схем.</span><span class="sxs-lookup"><span data-stu-id="a0198-111">Schemas can be owned by any database principal, and a single principal can own multiple schemas.</span></span> <span data-ttu-id="a0198-112">К схеме можно применить правила безопасности, которые наследуются всеми объектами схемы.</span><span class="sxs-lookup"><span data-stu-id="a0198-112">You can apply security rules to a schema, which are inherited by all objects in the schema.</span></span> <span data-ttu-id="a0198-113">После установки разрешений доступа для схемы они автоматически применяются по мере добавления к схеме новых объектов.</span><span class="sxs-lookup"><span data-stu-id="a0198-113">Once you set up access permissions for a schema, those permissions are automatically applied as new objects are added to the schema.</span></span> <span data-ttu-id="a0198-114">Пользователь может назначить новую схему, а несколько пользователей базы данных могут совместно использовать одну одну схему.</span><span class="sxs-lookup"><span data-stu-id="a0198-114">Users can be assigned a default schema, and multiple database users can share the same schema.</span></span>  
  
 <span data-ttu-id="a0198-115">По умолчанию, если разработчик создает объект в схеме, он принадлежит участнику безопасности, являющемуся владельцем схемы, а не разработчику.</span><span class="sxs-lookup"><span data-stu-id="a0198-115">By default, when developers create objects in a schema, the objects are owned by the security principal that owns the schema, not the developer.</span></span> <span data-ttu-id="a0198-116">Владение объектом можно передать с помощью инструкции Transact-SQL ALTER AUTHORIZATION.</span><span class="sxs-lookup"><span data-stu-id="a0198-116">Object ownership can be transferred with ALTER AUTHORIZATION Transact-SQL statement.</span></span> <span data-ttu-id="a0198-117">Схема может также содержать объекты, принадлежащие другим пользователям и иметь более детализированные разрешения, чем назначенные схеме, хотя это не рекомендуется из-за увеличения сложности управления разрешениями.</span><span class="sxs-lookup"><span data-stu-id="a0198-117">A schema can also contain objects that are owned by different users and have more granular permissions than those assigned to the schema, although this is not recommended because it adds complexity to managing permissions.</span></span> <span data-ttu-id="a0198-118">Объекты можно перемещать из одной схемы в другую, а принадлежность схемы передавать от одного участника другому.</span><span class="sxs-lookup"><span data-stu-id="a0198-118">Objects can be moved between schemas, and schema ownership can be transferred between principals.</span></span> <span data-ttu-id="a0198-119">Пользователей базы данных можно удалять, не влияя этим на схемы.</span><span class="sxs-lookup"><span data-stu-id="a0198-119">Database users can be dropped without affecting schemas.</span></span>  
  
### <a name="built-in-schemas"></a><span data-ttu-id="a0198-120">Встроенные схемы</span><span class="sxs-lookup"><span data-stu-id="a0198-120">Built-In Schemas</span></span>  
 <span data-ttu-id="a0198-121">SQL Server поставляется с десятью предварительно определенными схемами, имеющими одинаковое имя со встроенными пользователями и ролями базы данных.</span><span class="sxs-lookup"><span data-stu-id="a0198-121">SQL Server ships with ten pre-defined schemas that have the same names as the built-in database users and roles.</span></span> <span data-ttu-id="a0198-122">Они существуют главным образом ради обратной совместимости.</span><span class="sxs-lookup"><span data-stu-id="a0198-122">These exist mainly for backward compatibility.</span></span> <span data-ttu-id="a0198-123">Схемы, имеющие одинаковые имена с предопределенными ролями базы данных, можно удалить, если они не нужны.</span><span class="sxs-lookup"><span data-stu-id="a0198-123">You can drop the schemas that have the same names as the fixed database roles if you do not need them.</span></span> <span data-ttu-id="a0198-124">Нельзя удалить следующие схемы.</span><span class="sxs-lookup"><span data-stu-id="a0198-124">You cannot drop the following schemas:</span></span>  
  
- `dbo`  
  
- `guest`  
  
- `sys`  
  
- `INFORMATION_SCHEMA`  
  
 <span data-ttu-id="a0198-125">Если их удалить из шаблона базы данных, эти схемы не появятся в новых базах данных.</span><span class="sxs-lookup"><span data-stu-id="a0198-125">If you drop them from the model database, they will not appear in new databases.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="a0198-126">Схемы `sys` и `INFORMATION_SCHEMA` зарезервированы для системных объектов.</span><span class="sxs-lookup"><span data-stu-id="a0198-126">The `sys` and `INFORMATION_SCHEMA` schemas are reserved for system objects.</span></span> <span data-ttu-id="a0198-127">В этих схемах нельзя создавать и удалять объекты.</span><span class="sxs-lookup"><span data-stu-id="a0198-127">You cannot create objects in these schemas and you cannot drop them.</span></span>  
  
#### <a name="the-dbo-schema"></a><span data-ttu-id="a0198-128">Схема dbo</span><span class="sxs-lookup"><span data-stu-id="a0198-128">The dbo Schema</span></span>  
 <span data-ttu-id="a0198-129">Схема `dbo` представляет собой схему по умолчанию для вновь созданной базы данных.</span><span class="sxs-lookup"><span data-stu-id="a0198-129">The `dbo` schema is the default schema for a newly created database.</span></span> <span data-ttu-id="a0198-130">Владельцем схемы `dbo` является учетная запись пользователя `dbo`.</span><span class="sxs-lookup"><span data-stu-id="a0198-130">The `dbo` schema is owned by the `dbo` user account.</span></span> <span data-ttu-id="a0198-131">Схемой по умолчанию для пользователей, созданных с помощью команды Transact-SQL CREATE USER, является `dbo`.</span><span class="sxs-lookup"><span data-stu-id="a0198-131">By default, users created with the CREATE USER Transact-SQL command have `dbo` as their default schema.</span></span>  
  
 <span data-ttu-id="a0198-132">Пользователи, которым назначена схема `dbo`, не наследуют разрешения пользовательской учетной записи `dbo`.</span><span class="sxs-lookup"><span data-stu-id="a0198-132">Users who are assigned the `dbo` schema do not inherit the permissions of the `dbo` user account.</span></span> <span data-ttu-id="a0198-133">Пользователи не наследуют разрешения схемы, их наследуют объекты базы данных, содержащиеся в схеме.</span><span class="sxs-lookup"><span data-stu-id="a0198-133">No permissions are inherited from a schema by users; schema permissions are inherited by the database objects contained in the schema.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="a0198-134">Если на объект базы данных ссылаются с помощью однокомпонентного имени, SQL Server вначале ищет этот объект в схеме пользователя по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="a0198-134">When database objects are referenced by using a one-part name, SQL Server first looks in the user's default schema.</span></span> <span data-ttu-id="a0198-135">Если объект не найден, SQL Server ищет его в схеме `dbo`.</span><span class="sxs-lookup"><span data-stu-id="a0198-135">If the object is not found there, SQL Server looks next in the `dbo` schema.</span></span> <span data-ttu-id="a0198-136">Если этот объект не найден в схеме `dbo`, возвращается ошибка.</span><span class="sxs-lookup"><span data-stu-id="a0198-136">If the object is not in the `dbo` schema, an error is returned.</span></span>  
  
## <a name="external-resources"></a><span data-ttu-id="a0198-137">Внешние ресурсы</span><span class="sxs-lookup"><span data-stu-id="a0198-137">External Resources</span></span>  
 <span data-ttu-id="a0198-138">Дополнительные сведения о принадлежности объектов и схемах см. в следующих документах.</span><span class="sxs-lookup"><span data-stu-id="a0198-138">For more information on object ownership and schemas, see the following resources.</span></span>  
  
|<span data-ttu-id="a0198-139">Resource</span><span class="sxs-lookup"><span data-stu-id="a0198-139">Resource</span></span>|<span data-ttu-id="a0198-140">Описание</span><span class="sxs-lookup"><span data-stu-id="a0198-140">Description</span></span>|  
|--------------|-----------------|  
|<span data-ttu-id="a0198-141">[Разделение схем пользователей](https://docs.microsoft.com/previous-versions/sql/sql-server-2008-r2/ms190387(v=sql.105))</span><span class="sxs-lookup"><span data-stu-id="a0198-141">[User-Schema Separation](https://docs.microsoft.com/previous-versions/sql/sql-server-2008-r2/ms190387(v=sql.105))</span></span>|<span data-ttu-id="a0198-142">Описывает изменения, возникшие из-за отделения пользователей от схем.</span><span class="sxs-lookup"><span data-stu-id="a0198-142">Describes the changes introduced by user-schema separation.</span></span> <span data-ttu-id="a0198-143">Сюда входит новое поведение, его влияние на владение, представления каталогов и разрешения.</span><span class="sxs-lookup"><span data-stu-id="a0198-143">Includes new behavior, its impact on ownership, catalog views, and permissions.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="a0198-144">См. также</span><span class="sxs-lookup"><span data-stu-id="a0198-144">See also</span></span>

- [<span data-ttu-id="a0198-145">Защита приложений ADO.NET</span><span class="sxs-lookup"><span data-stu-id="a0198-145">Securing ADO.NET Applications</span></span>](../../../../../docs/framework/data/adonet/securing-ado-net-applications.md)
- [<span data-ttu-id="a0198-146">Сценарии безопасности приложений в SQL Server</span><span class="sxs-lookup"><span data-stu-id="a0198-146">Application Security Scenarios in SQL Server</span></span>](../../../../../docs/framework/data/adonet/sql/application-security-scenarios-in-sql-server.md)
- [<span data-ttu-id="a0198-147">Проверка подлинности в SQL Server</span><span class="sxs-lookup"><span data-stu-id="a0198-147">Authentication in SQL Server</span></span>](../../../../../docs/framework/data/adonet/sql/authentication-in-sql-server.md)
- [<span data-ttu-id="a0198-148">Роли сервера и базы данных в SQL Server</span><span class="sxs-lookup"><span data-stu-id="a0198-148">Server and Database Roles in SQL Server</span></span>](../../../../../docs/framework/data/adonet/sql/server-and-database-roles-in-sql-server.md)
- [<span data-ttu-id="a0198-149">Авторизация и разрешения в SQL Server</span><span class="sxs-lookup"><span data-stu-id="a0198-149">Authorization and Permissions in SQL Server</span></span>](../../../../../docs/framework/data/adonet/sql/authorization-and-permissions-in-sql-server.md)
- [<span data-ttu-id="a0198-150">Центр разработчиков наборов данных и управляемых поставщиков ADO.NET</span><span class="sxs-lookup"><span data-stu-id="a0198-150">ADO.NET Managed Providers and DataSet Developer Center</span></span>](https://go.microsoft.com/fwlink/?LinkId=217917)
