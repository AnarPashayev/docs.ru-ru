---
title: Состояния объектов и отслеживание изменений
ms.date: 03/30/2017
ms.assetid: 7a808b00-9c3c-479a-aa94-717280fefd71
ms.openlocfilehash: 63b04d3a4b6e48594e9664833a6e539d62bbab0e
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2019
ms.locfileid: "59191159"
---
# <a name="object-states-and-change-tracking"></a><span data-ttu-id="61508-102">Состояния объектов и отслеживание изменений</span><span class="sxs-lookup"><span data-stu-id="61508-102">Object States and Change-Tracking</span></span>
[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] <span data-ttu-id="61508-103">объекты всегда участвовать в некоторых *состояние*.</span><span class="sxs-lookup"><span data-stu-id="61508-103">objects always participate in some *state*.</span></span> <span data-ttu-id="61508-104">Например, когда [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] создает объект, объект находится в состоянии `Unchanged`.</span><span class="sxs-lookup"><span data-stu-id="61508-104">For example, when [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] creates a new object, the object is in `Unchanged` state.</span></span> <span data-ttu-id="61508-105">Объект, создаваемый пользователем неизвестен <xref:System.Data.Linq.DataContext> и находится в `Untracked` состояние.</span><span class="sxs-lookup"><span data-stu-id="61508-105">A new object that you yourself create is unknown to the <xref:System.Data.Linq.DataContext> and is in `Untracked` state.</span></span> <span data-ttu-id="61508-106">После успешного выполнения <xref:System.Data.Linq.DataContext.SubmitChanges%2A> все объекты, известные [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)], находятся в состоянии `Unchanged`.</span><span class="sxs-lookup"><span data-stu-id="61508-106">Following successful execution of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, all objects known to [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] are in `Unchanged` state.</span></span> <span data-ttu-id="61508-107">(Единственное исключение представляют объекты, успешно удаленные из базы данных, находящиеся в состоянии `Deleted` и не используемые в экземпляре <xref:System.Data.Linq.DataContext>.)</span><span class="sxs-lookup"><span data-stu-id="61508-107">(The single exception is represented by those that have been successfully deleted from the database, which are in `Deleted` state and unusable in that <xref:System.Data.Linq.DataContext> instance.)</span></span>  
  
## <a name="object-states"></a><span data-ttu-id="61508-108">Состояния объектов</span><span class="sxs-lookup"><span data-stu-id="61508-108">Object States</span></span>  
 <span data-ttu-id="61508-109">В следующей таблице представлены возможные состояния объектов [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)].</span><span class="sxs-lookup"><span data-stu-id="61508-109">The following table lists the possible states for [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] objects.</span></span>  
  
|<span data-ttu-id="61508-110">Регион</span><span class="sxs-lookup"><span data-stu-id="61508-110">State</span></span>|<span data-ttu-id="61508-111">Описание</span><span class="sxs-lookup"><span data-stu-id="61508-111">Description</span></span>|  
|-----------|-----------------|  
|`Untracked`|<span data-ttu-id="61508-112">Объект, не отслеживаемый [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)].</span><span class="sxs-lookup"><span data-stu-id="61508-112">An object not tracked by [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)].</span></span> <span data-ttu-id="61508-113">Далее представлено несколько примеров.</span><span class="sxs-lookup"><span data-stu-id="61508-113">Examples include the following:</span></span><br /><br /> <span data-ttu-id="61508-114">— Объект не запрошенный с помощью текущего <xref:System.Data.Linq.DataContext> (например, вновь созданного объекта).</span><span class="sxs-lookup"><span data-stu-id="61508-114">-   An object not queried through the current <xref:System.Data.Linq.DataContext> (such as a newly created object).</span></span><br /><span data-ttu-id="61508-115">-Объект, созданный с помощью десериализации</span><span class="sxs-lookup"><span data-stu-id="61508-115">-   An object created through deserialization</span></span><br /><span data-ttu-id="61508-116">— Объект запрошенный с помощью другого <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="61508-116">-   An object queried through a different <xref:System.Data.Linq.DataContext>.</span></span>|  
|`Unchanged`|<span data-ttu-id="61508-117">Объект, извлеченный с использованием текущего <xref:System.Data.Linq.DataContext> и не измененный после создания.</span><span class="sxs-lookup"><span data-stu-id="61508-117">An object retrieved by using the current <xref:System.Data.Linq.DataContext> and not known to have been modified since it was created.</span></span>|  
|`PossiblyModified`|<span data-ttu-id="61508-118">Объект, который *присоединенного* для <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="61508-118">An object which is *attached* to a <xref:System.Data.Linq.DataContext>.</span></span> <span data-ttu-id="61508-119">Дополнительные сведения см. в разделе [извлечение данных и операции CUD в N-уровневых приложениях (LINQ to SQL) и](../../../../../../docs/framework/data/adonet/sql/linq/data-retrieval-and-cud-operations-in-n-tier-applications.md).</span><span class="sxs-lookup"><span data-stu-id="61508-119">For more information, see [Data Retrieval and CUD Operations in N-Tier Applications (LINQ to SQL)](../../../../../../docs/framework/data/adonet/sql/linq/data-retrieval-and-cud-operations-in-n-tier-applications.md).</span></span>|  
|`ToBeInserted`|<span data-ttu-id="61508-120">Объект, который не был извлечен с использованием текущего <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="61508-120">An object not retrieved by using the current <xref:System.Data.Linq.DataContext>.</span></span> <span data-ttu-id="61508-121">Это приводит к `INSERT` базы данных во время <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="61508-121">This causes a database `INSERT` during <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span>|  
|`ToBeUpdated`|<span data-ttu-id="61508-122">Объект, известный для изменения после извлечения.</span><span class="sxs-lookup"><span data-stu-id="61508-122">An object known to have been modified since it was retrieved.</span></span> <span data-ttu-id="61508-123">Это приводит к `UPDATE` базы данных во время <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="61508-123">This causes a database `UPDATE` during <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span>|  
|`ToBeDeleted`|<span data-ttu-id="61508-124">Объект, помеченный для удаления и вызывающий `DELETE` базы данных во время <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="61508-124">An object marked for deletion, causing a database `DELETE` during <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span>|  
|`Deleted`|<span data-ttu-id="61508-125">Объект, удаленный в базе данных.</span><span class="sxs-lookup"><span data-stu-id="61508-125">An object that has been deleted in the database.</span></span> <span data-ttu-id="61508-126">Это состояние является завершающим и не допускает дополнительных переходов.</span><span class="sxs-lookup"><span data-stu-id="61508-126">This state is final and does not allow for additional transitions.</span></span>|  
  
## <a name="inserting-objects"></a><span data-ttu-id="61508-127">Вставка объектов</span><span class="sxs-lookup"><span data-stu-id="61508-127">Inserting Objects</span></span>  
 <span data-ttu-id="61508-128">Используя `Inserts`, можно явным образом запросить <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>.</span><span class="sxs-lookup"><span data-stu-id="61508-128">You can explicitly request `Inserts` by using <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>.</span></span> <span data-ttu-id="61508-129">Кроме того [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] может вывести `Inserts` путем поиска объектов, которые подключены к одному из известных объектов, которые должны быть обновлены.</span><span class="sxs-lookup"><span data-stu-id="61508-129">Alternatively, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] can infer `Inserts` by finding objects connected to one of the known objects that must be updated.</span></span> <span data-ttu-id="61508-130">Например, если вы добавите `Untracked` объект <xref:System.Data.Linq.EntitySet%601> или задать <xref:System.Data.Linq.EntityRef%601> для `Untracked` объект `Untracked` он становится доступным за счет отслеживаемых объектов в графе.</span><span class="sxs-lookup"><span data-stu-id="61508-130">For example, if you add an `Untracked` object to an <xref:System.Data.Linq.EntitySet%601> or set an <xref:System.Data.Linq.EntityRef%601> to an `Untracked` object, you make the `Untracked` object reachable by way of tracked objects in the graph.</span></span> <span data-ttu-id="61508-131">При обработке <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] проходит через отслеживаемые объекты и обнаруживает все постоянные достижимых объектов, которые не отслеживаются.</span><span class="sxs-lookup"><span data-stu-id="61508-131">While processing <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] traverses the tracked objects and discovers any reachable persistent objects that are not tracked.</span></span> <span data-ttu-id="61508-132">Такие объекты являются кандидатами на вставку в базу данных.</span><span class="sxs-lookup"><span data-stu-id="61508-132">Such objects are candidates for insertion into the database.</span></span>  
  
 <span data-ttu-id="61508-133">Для классов в иерархии наследования <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>(`o`) также задает значение члена, назначенного в качестве *дискриминатора* в соответствии с типом объекта `o`.</span><span class="sxs-lookup"><span data-stu-id="61508-133">For classes in an inheritance hierarchy, <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>(`o`) also sets the value of the member designated as the *discriminator* to match the type of the object `o`.</span></span> <span data-ttu-id="61508-134">Если тип совпадает со значением дискриминатора по умолчанию, данное значение переопределяет значение дискриминатора.</span><span class="sxs-lookup"><span data-stu-id="61508-134">In the case of a type matching the default discriminator value, this action causes the discriminator value to be overwritten with the default value.</span></span> <span data-ttu-id="61508-135">Дополнительные сведения см. в разделе [Поддержка наследования](../../../../../../docs/framework/data/adonet/sql/linq/inheritance-support.md).</span><span class="sxs-lookup"><span data-stu-id="61508-135">For more information, see [Inheritance Support](../../../../../../docs/framework/data/adonet/sql/linq/inheritance-support.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="61508-136">Объект, добавляемый в `Table` не является кэшем идентификации.</span><span class="sxs-lookup"><span data-stu-id="61508-136">An object added to a `Table` is not in the identity cache.</span></span> <span data-ttu-id="61508-137">Кэш идентификации отражает только данные, извлеченные из базы данных.</span><span class="sxs-lookup"><span data-stu-id="61508-137">The identity cache reflects only what is retrieved from the database.</span></span> <span data-ttu-id="61508-138">После вызова <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A> добавленная сущность не отображается в запросах к базе данных до успешного выполнения <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="61508-138">After a call to <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>, the added entity does not appear in queries against the database until <xref:System.Data.Linq.DataContext.SubmitChanges%2A> is successfully completed.</span></span>  
  
## <a name="deleting-objects"></a><span data-ttu-id="61508-139">Удаление объектов</span><span class="sxs-lookup"><span data-stu-id="61508-139">Deleting Objects</span></span>  
 <span data-ttu-id="61508-140">Отслеживаемый объект `o` помечается для удаления путем вызова метода <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>(o) для соответствующей таблицы <xref:System.Data.Linq.Table%601>.</span><span class="sxs-lookup"><span data-stu-id="61508-140">You mark a tracked object `o` for deletion by calling <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>(o) on the appropriate <xref:System.Data.Linq.Table%601>.</span></span> [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] <span data-ttu-id="61508-141">рассматривает удаление объекта из <xref:System.Data.Linq.EntitySet%601> как обновление устанавливается операции и соответствующие значения внешнего ключа в null.</span><span class="sxs-lookup"><span data-stu-id="61508-141">considers the removal of an object from an <xref:System.Data.Linq.EntitySet%601> as an update operation, and the corresponding foreign key value is set to null.</span></span> <span data-ttu-id="61508-142">Результат операции (`o`) из таблицы не удаляется.</span><span class="sxs-lookup"><span data-stu-id="61508-142">The target of the operation (`o`) is not deleted from its table.</span></span> <span data-ttu-id="61508-143">Например, `cust.Orders.DeleteOnSubmit(ord)` означает обновление, где для разрыва связи между `cust` и `ord` внешнему ключу `ord.CustomerID` задается значение NULL.</span><span class="sxs-lookup"><span data-stu-id="61508-143">For example, `cust.Orders.DeleteOnSubmit(ord)` indicates an update where the relationship between `cust` and `ord` is severed by setting the foreign key `ord.CustomerID` to null.</span></span> <span data-ttu-id="61508-144">При этом строка, соответствующая `ord`, не удаляется.</span><span class="sxs-lookup"><span data-stu-id="61508-144">It does not cause the deletion of the row corresponding to `ord`.</span></span>  
  
 [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] <span data-ttu-id="61508-145">выполняет следующий процесс при удалении объекта (<xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>) из таблицы:</span><span class="sxs-lookup"><span data-stu-id="61508-145">performs the following processing when an object is deleted (<xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>) from its table:</span></span>  
  
-   <span data-ttu-id="61508-146">При вызове <xref:System.Data.Linq.DataContext.SubmitChanges%2A> для объекта выполняется операция `DELETE`.</span><span class="sxs-lookup"><span data-stu-id="61508-146">When <xref:System.Data.Linq.DataContext.SubmitChanges%2A> is called, a `DELETE` operation is performed for that object.</span></span>  
  
-   <span data-ttu-id="61508-147">Удаление не отражается на связанных объектах независимо от того, загружены они или нет.</span><span class="sxs-lookup"><span data-stu-id="61508-147">The removal is not propagated to related objects regardless of whether they are loaded.</span></span> <span data-ttu-id="61508-148">В частности, связанные объекты не загружаются для обновления свойства связи.</span><span class="sxs-lookup"><span data-stu-id="61508-148">Specifically, related objects are not loaded for updating the relationship property.</span></span>  
  
-   <span data-ttu-id="61508-149">После успешного выполнения <xref:System.Data.Linq.DataContext.SubmitChanges%2A> все объекты переходят в состояние `Deleted`.</span><span class="sxs-lookup"><span data-stu-id="61508-149">After successful execution of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, the objects are set to the `Deleted` state.</span></span> <span data-ttu-id="61508-150">В результате объект или его `id` не могут использоваться в данном <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="61508-150">As a result, you cannot use the object or its `id` in that <xref:System.Data.Linq.DataContext>.</span></span> <span data-ttu-id="61508-151">Внутренний кэш, поддерживаемый экземпляром <xref:System.Data.Linq.DataContext>, не удаляет объекты, извлеченные или добавленные в качестве новых, даже если они были удалены в базе данных.</span><span class="sxs-lookup"><span data-stu-id="61508-151">The internal cache maintained by a <xref:System.Data.Linq.DataContext> instance does not eliminate objects that are retrieved or added as new, even after the objects have been deleted in the database.</span></span>  
  
 <span data-ttu-id="61508-152">Метод <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> можно вызвать только в объекте, отслеживаемом с помощью <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="61508-152">You can call <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> only on an object tracked by the <xref:System.Data.Linq.DataContext>.</span></span> <span data-ttu-id="61508-153">Для объекта `Untracked` метод <xref:System.Data.Linq.Table%601.Attach%2A> необходимо вызвать до вызова <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>.</span><span class="sxs-lookup"><span data-stu-id="61508-153">For an `Untracked` object, you must call <xref:System.Data.Linq.Table%601.Attach%2A> before you call <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>.</span></span> <span data-ttu-id="61508-154">При вызове метода <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> в объекте `Untracked` создается исключение.</span><span class="sxs-lookup"><span data-stu-id="61508-154">Calling <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> on an `Untracked` object throws an exception.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="61508-155">Удаление объекта из таблицы сообщает [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] для создания соответствующего SQL `DELETE` команды во время <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="61508-155">Removing an object from a table tells [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] to generate a corresponding SQL `DELETE` command at the time of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span> <span data-ttu-id="61508-156">Это действие не приводит к удалению объекта из кэша статьи и не распространяется на удаление связанных объектов.</span><span class="sxs-lookup"><span data-stu-id="61508-156">This action does not remove the object from the cache or propagate the deletion to related objects.</span></span>  
>   
>  <span data-ttu-id="61508-157">Чтобы освободить `id` удаленного объекта, воспользуйтесь новым экземпляром <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="61508-157">To reclaim the `id` of a deleted object, use a new <xref:System.Data.Linq.DataContext> instance.</span></span> <span data-ttu-id="61508-158">Для очистки связанных объектов, можно использовать *каскадное удаление* компонентов базы данных, в противном случае вручную удалите связанные объекты.</span><span class="sxs-lookup"><span data-stu-id="61508-158">For cleanup of related objects, you can use the *cascade delete* feature of the database, or else manually delete the related objects.</span></span>  
>   
>  <span data-ttu-id="61508-159">Связанные объекты можно удалять в произвольном порядке (в отличие от базы данных).</span><span class="sxs-lookup"><span data-stu-id="61508-159">The related objects do not have to be deleted in any special order (unlike in the database).</span></span>  
  
## <a name="updating-objects"></a><span data-ttu-id="61508-160">Обновление объектов</span><span class="sxs-lookup"><span data-stu-id="61508-160">Updating Objects</span></span>  
 <span data-ttu-id="61508-161">`Updates` можно обнаружить, просматривая уведомления об изменениях.</span><span class="sxs-lookup"><span data-stu-id="61508-161">You can detect `Updates` by observing notifications of changes.</span></span> <span data-ttu-id="61508-162">Уведомления предоставляются с помощью события <xref:System.ComponentModel.INotifyPropertyChanging.PropertyChanging> в методах задания свойств.</span><span class="sxs-lookup"><span data-stu-id="61508-162">Notifications are provided through the <xref:System.ComponentModel.INotifyPropertyChanging.PropertyChanging> event in property setters.</span></span> <span data-ttu-id="61508-163">Когда [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] получает уведомление о первом изменении объекта, он создает копию объекта и рассматривает объект в качестве кандидата для создания оператора `Update`.</span><span class="sxs-lookup"><span data-stu-id="61508-163">When [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] is notified of the first change to an object, it creates a copy of the object and considers the object a candidate for generating an `Update` statement.</span></span>  
  
 <span data-ttu-id="61508-164">Для объектов, которые не реализуют <xref:System.ComponentModel.INotifyPropertyChanging>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] хранит копию значения, которые у объектов при они были первой материализации.</span><span class="sxs-lookup"><span data-stu-id="61508-164">For objects that do not implement <xref:System.ComponentModel.INotifyPropertyChanging>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] maintains a copy of the values that objects had when they were first materialized.</span></span> <span data-ttu-id="61508-165">При вызове <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] сравнивает текущие и исходные значения, чтобы определить, был ли изменен объект.</span><span class="sxs-lookup"><span data-stu-id="61508-165">When you call <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] compares the current and original values to decide whether the object has been changed.</span></span>  
  
 <span data-ttu-id="61508-166">При обновлении связей ссылка из дочернего элемента на родительский (то есть ссылка, соответствующая внешнему ключу) считается ведущей.</span><span class="sxs-lookup"><span data-stu-id="61508-166">For updates to relationships, the reference from the child to the parent (that is, the reference corresponding to the foreign key) is considered the authority.</span></span> <span data-ttu-id="61508-167">Ссылка в обратном направлении (то есть из родительского элемента на дочерний) является необязательной.</span><span class="sxs-lookup"><span data-stu-id="61508-167">The reference in the reverse direction (that is, from parent to child) is optional.</span></span> <span data-ttu-id="61508-168">Классы отношений (<xref:System.Data.Linq.EntitySet%601> и <xref:System.Data.Linq.EntityRef%601>) гарантируют непротиворечивость двунаправленных ссылок для отношений "один-ко-многим" и "один-к-одному".</span><span class="sxs-lookup"><span data-stu-id="61508-168">Relationship classes (<xref:System.Data.Linq.EntitySet%601> and <xref:System.Data.Linq.EntityRef%601>) guarantee that the bidirectional references are consistent for one-to-many and one-to-one relationships.</span></span> <span data-ttu-id="61508-169">Если в объектной модели не используется <xref:System.Data.Linq.EntitySet%601> или <xref:System.Data.Linq.EntityRef%601> и если имеется обратная ссылка, то при обновлении связей необходимо сохранить ее согласованность с прямой ссылкой.</span><span class="sxs-lookup"><span data-stu-id="61508-169">If the object model does not use <xref:System.Data.Linq.EntitySet%601> or <xref:System.Data.Linq.EntityRef%601>, and if the reverse reference is present, it is your responsibility to keep it consistent with the forward reference when the relationship is updated.</span></span>  
  
 <span data-ttu-id="61508-170">При обновлении необходимой ссылки и соответствующего внешнего ключа следует обеспечить их непротиворечивость.</span><span class="sxs-lookup"><span data-stu-id="61508-170">If you update both the required reference and the corresponding foreign key, you must make sure that they agree.</span></span> <span data-ttu-id="61508-171">Если на момент вызова <xref:System.InvalidOperationException> эти объекты не синхронизированы, создается исключение <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="61508-171">An <xref:System.InvalidOperationException> exception is thrown if the two are not synchronized at the time that you call <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span> <span data-ttu-id="61508-172">Несмотря на то, что изменения значения внешнего ключа достаточны для воздействия на обновление базовой строки, необходимо изменить ссылку, чтобы сохранить подключение графа объекта и обеспечить двунаправленную согласованность связей.</span><span class="sxs-lookup"><span data-stu-id="61508-172">Although foreign key value changes are sufficient for affecting an update of the underlying row, you should change the reference to maintain connectivity of the object graph and bidirectional consistency of relationships.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="61508-173">См. также</span><span class="sxs-lookup"><span data-stu-id="61508-173">See also</span></span>

- [<span data-ttu-id="61508-174">Основные сведения</span><span class="sxs-lookup"><span data-stu-id="61508-174">Background Information</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/background-information.md)
- [<span data-ttu-id="61508-175">Операции вставки, обновления и удаления</span><span class="sxs-lookup"><span data-stu-id="61508-175">Insert, Update, and Delete Operations</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/insert-update-and-delete-operations.md)
