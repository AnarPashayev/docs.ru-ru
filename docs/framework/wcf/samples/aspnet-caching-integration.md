---
title: Интеграция кэширования ASP.NET
ms.date: 03/30/2017
ms.assetid: f581923a-8a72-42fc-bd6a-46de2aaeecc1
ms.openlocfilehash: 56f686b83deb576f1245a9d4b9df2df433ea1e2f
ms.sourcegitcommit: 581ab03291e91983459e56e40ea8d97b5189227e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/27/2019
ms.locfileid: "70045775"
---
# <a name="aspnet-caching-integration"></a>Интеграция кэширования ASP.NET

В этом образце демонстрируется использование выходного кэша ASP.NET в модели веб-программирования WCF HTTP . В этом разделе основное внимание уделено возможности интеграции выходного кэша ASP.NET.

## <a name="demonstrates"></a>Демонстрации

Интеграция с выходным кэшем ASP.NET

> [!IMPORTANT]
> Образцы уже могут быть установлены на компьютере. Перед продолжением проверьте следующий каталог (по умолчанию).
>
> `<InstallDrive>:\WF_WCF_Samples`
>
> Если этот каталог не существует, перейдите к [примерам Windows Communication Foundation (WCF) и Windows Workflow Foundation (WF) для .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) , чтобы скачать все Windows Communication Foundation (WCF) [!INCLUDE[wf1](../../../../includes/wf1-md.md)] и примеры. Этот образец расположен в следующем каталоге.
>
> `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\Web\AspNetCachingIntegration`

## <a name="discussion"></a>Обсуждение

В примере используется <xref:System.ServiceModel.Web.AspNetCacheProfileAttribute> для использования кэширования выходных данных ASP.NET со службой Windows Communication Foundation (WCF). Атрибут <xref:System.ServiceModel.Web.AspNetCacheProfileAttribute> применяется к операциям службы и предоставляет имя профиля кэша для файла конфигурации, который будет использован для ответов из заданной операции.

В файле Service.cs примера проекта службы обе `GetCustomer` <xref:System.ServiceModel.Web.AspNetCacheProfileAttribute>операции и `GetCustomers` помечаются атрибутом, который предоставляет имя профиля кэша "CacheFor60Seconds". В файле Web. config проекта службы профиль кэша "CacheFor60Seconds" предоставляется в элементе <`caching`> <`system.web`>. Для этого профиля кэша значение `duration` атрибута равно "60", поэтому ответы, связанные с этим профилем, кэшируются в кэше вывода ASP.NET в течение 60 секунд. Кроме того, для этого профиля `varmByParam` кэша атрибуту присвоено значение "Format", чтобы запросы с разными значениями `format` для параметра строки запроса были кэшированы отдельно. Наконец, `varyByHeader` атрибут профиля кэша имеет значение Accept, поэтому ответы на запросы с разными значениями заголовков Accept кэшируются отдельно.

В файле Program.cs из проекта «Клиент» показывается, как можно разработать клиент с помощью <xref:System.Net.HttpWebRequest>. Заметьте, что это лишь один из способов доступа к WCF-службе. Доступ к службе также можно получить с помощью других классов .NET Framework, таких как фабрика каналов WCF <xref:System.Net.WebClient>и. Другие примеры в пакете SDK (например, образец [службы HTTP Basic](../../../../docs/framework/wcf/samples/basic-http-service.md) ) иллюстрируют использование этих классов для взаимодействия со службой WCF.

## <a name="to-run-the-sample"></a>Выполнение образца

Этот образец состоит из трех проектов.

- **Служба**. Проект веб-приложения, который содержит службу WCF HTTP, размещенную в ASP.NET.

- **Клиент**: Проект консольного приложения, вызывающий службу.

- **Общие**: Общая библиотека, которая содержит тип клиента, используемый клиентом и службой.

Во время выполнения клиентского консольного приложения клиент совершает запросы к службе и выводит в окно консоли нужные сведения из ответов.

#### <a name="to-run-the-sample"></a>Выполнение образца

1. Откройте решение для образца ASP.NET Caching Integration.

2. Чтобы построить решение, нажмите CTRL+SHIFT+B.

3. Если окно **Обозреватель решений** еще не открыто, нажмите клавиши CTRL + W + S.

4. В окне **Обозреватель решений** щелкните правой кнопкой мыши проект **службы** и выберите команду **запустить новый экземпляр**. Запускается сервер разработки ASP.NET, на котором размещается служба.

5. В окне **Обозреватель решений** щелкните правой кнопкой мыши **клиентский** проект и выберите команду **запустить новый экземпляр**.

6. На клиенте открывается окно консоли с URI запущенной службы и URI HTML-страницы справки для запущенной службы. HTML-страницу справки можно просмотреть в любой момент времени, введя URI этой страницы в браузере.

7. Во время работы образца клиент записывает состояние текущего действия.

8. Чтобы завершить клиентское консольное приложение, нажмите любую клавишу.

9. Чтобы прекратить отладку службы, нажмите клавиши SHIFT+F5.

10. В области уведомлений Windows щелкните правой кнопкой мыши значок сервера ASP.NET Development Server и выберитепункт прерывать.
