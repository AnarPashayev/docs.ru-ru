---
title: Публикация служб WCF
ms.date: 03/30/2017
ms.assetid: c806b253-cd47-4b96-b831-e73cbf08808f
ms.openlocfilehash: 44dd7f58129ddc356f362f9ef9527d85644fe821
ms.sourcegitcommit: 8699383914c24a0df033393f55db3369db728a7b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/15/2019
ms.locfileid: "65635505"
---
# <a name="wcf-service-publishing"></a>Публикация служб WCF

Публикация службы Windows Communication Foundation (WCF) помогает в реализации от начальной среды разработки, предоставляемые узел службы WCF и тестовый клиент WCF для фактического развертывания приложения в рабочей среде в целях тестирования. Прежде чем остановиться итоговый план развертывания, можно использовать публикации службы Windows Communication Foundation (WCF) для проверки функционирования службы WCF и Готово к публикации. Также можно развернуть в различных целевых размещениях для тестирования библиотеки службы WCF.

## <a name="supported-services-and-target-locations"></a>Поддерживаемые службы и целевые размещения

Публикация службы WCF поддерживает Публикация служб WCF, созданных из набора шаблонов библиотек служб WCF и их соответствующие шаблоны элементов, включая следующие:

- Шаблон библиотеки службы WCF с шаблоном элемента.

- Библиотека служб синдикации.

Эти шаблоны служб можно найти, выбрав **файл** > **новый проект** > [**Visual Basic** или **Visual C#** ] > **WCF**. Другие шаблоны WCF в этом расположении (включая приложение службы рабочего процесса WCF и приложение службы WCF), можно опубликовать с помощью [публикации для веб-приложений одним щелчком](https://docs.microsoft.com/previous-versions/aspnet/dd465337(v=vs.110)).

Служба может быть опубликована в следующих целевых расположениях.

- Локальный веб-сервер IIS.

- Файловая система.

- FTP-узел.

## <a name="using-wcf-service-publishing"></a>Использование публикации служб WCF

Выполните следующие действия для развертывания реализации службы:

1. Откройте Visual Studio с повышенными привилегиями (щелкните правой кнопкой мыши исполняемый файл и выберите **Запуск от имени администратора** для его открытия).  Если вы используете IIS 7.0 или более поздней версии, убедитесь, что вы установили компонент «Совместимость метабазы IIS и IIS6 конфигурации», с помощью «Windows включение или отключение компонентов» на панели управления.

2. Откройте проект службы, выберите **построения** > **публикации \<имя проекта >** в главном меню, или щелкните правой кнопкой мыши проект в **обозревателе решений**и нажмите кнопку **публикации**.

3. **Публикации** появится окно. Нажмите кнопку **...** . чтобы указать целевое расположение, в котором должна быть развернута служба. Можно выбрать для развертывания приложения на локальном IIS, файловая система или FTP-сайта. При развертывании приложения на локальный сервер IIS, можно выбрать веб-сайта и создать веб-приложения, выбрав **Создание нового веб-приложения** значок в правом верхнем углу.

4. После того как вы щелкнете **публикации** в главном окне Visual Studio развертывает приложение на указанном целевом расположении и копирует файлы сборки, Web.config и SVC-в целевой каталог. . .Svc будет называться «ProjectName.ServiceName.svc»». После успешной публикации службы ссылку можно найти в окне вывода Visual Studio, который выглядит подобно показанному «подключение к `http://localhost/WebApplicationFolderName...`«. Можно щелкнуть ссылку при нажатой клавише CTRL, чтобы открыть страницу браузера в Visual Studio для просмотра структуры каталогов службы.

     Если перейти к узлу не удается, возможно, браузер каталогов в IIS не включен. Следуйте советам из раздела «Что можно предпринять», чтобы включить его. Кроме того, можно непосредственно ввести `http://localhost/WebApplicationFolderName/ProjectName.ServiceName.svc` просмотра страницы службы.

Можно использовать **публикации** указать, если вы хотите скопировать сборку, конфигурации и SVC-файла для всех служб, определенных в проекте в целевое расположение и перезаписать существующие файлы в месте назначения.

При выборе развертывания приложения на локальный сервер IIS могут возникнуть ошибки, связанные с настройкой IIS. Убедитесь, что IIS установлен правильно. Вы можете ввести `http://localhost` в адресной строке браузера и проверьте ли страница IIS по умолчанию отображается. В некоторых случаях проблемы также может быть вызвано неправильной регистрацией ASP.NET или WCF в IIS. Можно открыть командную строку разработчика для Visual Studio и выполните команду `aspnet_regiis.exe -ir` устранить неполадки регистрации ASP.NET, или выполните команду `ServiceModelReg.exe –ia` для устранения проблемы регистрации WCF.

## <a name="files-generated-for-publishing"></a>Файлы, созданные для опубликования
 Прежде чем можно будет библиотеку службы WCF, размещенных на веб сервере, с помощью средства создаются следующие файлы: файлы сборки, файл Web.config и SVC-файла. Все файлы копируются в целевое расположение. После этого выполняется публикация службы.

### <a name="assembly-files"></a>Файлы сборки
 При публикации службы WCF с помощью этого средства, служба автоматически построены в первую очередь и после сборки в проекте службы создаются файлы сборки.

### <a name="svc-file"></a>Файл SVC
 Операция публикации создает файл *.svc для каждой службы WCF, ли файл существует или не так, чтобы обеспечить правильность версии. Существует два различных вида файлов svc: один для библиотеки службы WCF и Библиотека служб синдикации и еще один — для последовательного рабочего процесса и State Machine Workflow Service Library. Созданный \*SVC-файл копируется в корневую папку в целевом расположении.

### <a name="webconfig-file"></a>Файл Web.config
 Файл Web.config создается каждый раз при публикации проекта службы в заданное целевое расположение.

 Созданный файл Web.config содержит веб-разделы, которые полезны для размещения веб-сайтов, а содержимое файла App.config для библиотеки службы WCF, со следующими изменениями:

- Базовый адрес клиента исключен.

- Параметры в элементе `<diagnostics>` исключены, чтобы сохранить параметры отслеживания целевой платформы.

## <a name="publishing-wcf-services-with-non-http-bindings-to-iis"></a>Публикация служб WCF с привязками, не использующими HTTP, в службах IIS
 Если используется IIS7.0 или более поздней версии, можно опубликовать службы WCF с привязками, отличные от HTTP в IIS. Потребуется провести некоторые предварительные настройки. Дополнительные сведения см. в разделах в [размещение в службе активации процессов Windows](../../../docs/framework/wcf/feature-details/hosting-in-windows-process-activation-service.md).

## <a name="security"></a>Безопасность
 Публикация в локальный сервер IIS требует наличия прав администратора, так как IIS требует выполнения под учетной записью администратора. Если пользователь без прав администратора откроет службу WCF в публикации, IIS недоступен как целевое расположение. Публикация в файловой системе или FTP-сайт работает без прав администратора.

## <a name="see-also"></a>См. также

- [Шаблоны WCF в Visual Studio](../../../docs/framework/wcf/wcf-vs-templates.md)
- [Узел службы WCF (WcfSvcHost.exe)](../../../docs/framework/wcf/wcf-service-host-wcfsvchost-exe.md)
- [Тестовый клиент WCF (WcfTestClient.exe)](../../../docs/framework/wcf/wcf-test-client-wcftestclient-exe.md)
