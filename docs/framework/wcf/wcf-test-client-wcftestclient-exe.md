---
title: Тестовый клиент WCF (WcfTestClient.exe)
ms.date: 03/30/2017
ms.assetid: d4302855-677f-4640-aa90-c5d785d72fb7
ms.openlocfilehash: ac89b234dfafe3f87f1423a04ce8e4dd6b44b991
ms.sourcegitcommit: 628e8147ca10187488e6407dab4c4e6ebe0cac47
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/15/2019
ms.locfileid: "72321187"
---
# <a name="wcf-test-client-wcftestclientexe"></a>Тестовый клиент WCF (WcfTestClient.exe)
Windows Communication Foundation (WCF) Test Client (клиент WcfTestClient. exe) — это средство графического пользовательского интерфейса, которое позволяет пользователям вводить параметры теста, отправлять эти входные данные в службу и просматривать ответ, отправляемый службой обратно. Она обеспечивает простой процесс тестирования служб при объединении с узлом службы WCF.

Обычно тестовый клиент WCF (клиент WcfTestClient. exe) можно найти в следующем расположении: `C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\Common7\IDE`-Community может быть одним из "Enterprise", "Professional" или "Community" в зависимости от установленного уровня Visual Studio.

## <a name="scenarios-for-using-test-client"></a>Сценарии использования тестового клиента

В следующих разделах рассматриваются наиболее распространенные сценарии, в которых можно использовать тестовый клиент WCF для упрощения процесса разработки.

### <a name="inside-visual-studio"></a>В Visual Studio

#### <a name="wcf-service-host-starts-wcf-test-client-with-a-single-service"></a>Узел службы WCF запускает тестового клиента WCF с одной службой

После создания нового проекта службы WCF и нажатия клавиши F5 для запуска отладчика узел службы WCF начинает размещать службу в проекте. Затем откроется тестовый клиент WCF и отобразится список конечных точек служб, определенных в файле конфигурации. Можно протестировать эти параметры и запустить службу, и повторять этот процесс для последовательного тестирования и проверки службы.

#### <a name="wcf-service-host-starts-wcf-test-client-with-multiple-services"></a>Узел службы WCF запускает тестового клиента WCF с несколькими службами

Вы также можете использовать тестовый клиент WCF, чтобы упростить отладку проекта службы, содержащего несколько служб. После открытия тестового клиента WCF автоматически выполняет итерацию по списку служб в проекте и открывает их для тестирования.

### <a name="outside-visual-studio"></a>Вне Visual Studio

Вы также можете вызвать тестовый клиент WCF (клиент WcfTestClient. exe) за пределами Visual Studio для тестирования произвольной службы в Интернете. Инструмент расположен в следующей папке:

`C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\Common7\IDE` (где Community может быть одним из "Enterprise", "Professional" или "Community" в зависимости от того, какой уровень Visual Studio установлен на компьютере)

Для использования средства дважды щелкните кнопкой мыши имя файла, чтобы открыть его, или запустите его из командной строки.

Тестовый клиент WCF принимает произвольное число URI в качестве аргументов командной строки.  Это универсальные коды ресурса служб, которые могут быть проверены.

`wcfTestClient.exe URI1 URI2 …`

После открытия окна тестового клиента WCF щелкните **файл**->**Добавить службу**и введите адрес конечной точки службы, которую нужно открыть.

## <a name="wcf-test-client-user-interface"></a>Пользовательский интерфейс тестового клиента WCF

Тестовый клиент WCF можно использовать с одной службой или несколькими службами.

### <a name="service-operations"></a>Операции служб

В левой области главного окна тестового клиента WCF перечислены все доступные службы, а также соответствующие конечные точки и операции.

Если дважды щелкнуть операцию, в правой области внутри новой вкладки с именем операции отображается ее содержимое.

В левой области также отображается список файлов конфигурации. Дважды щелкните любой элемент, чтобы открыть в правой области содержимое этого файла в виде нового окна с вкладками.

### <a name="entering-test-parameters"></a>Ввод тестовых параметров

Для просмотра тестовых параметров дважды щелкните операцию, чтобы открыть ее в правой области. Параметры показаны в **форматированном** представлении по умолчанию, и можно ввести произвольные значения параметров для тестирования службы.

Чтобы просмотреть XML-код сообщения, щелкните **XML**. Чтобы отправить их в службу, нажмите кнопку **вызвать**.

Для параметра набора данных щелкните. **.** кнопка рядом с полем **изменить...** чтобы изменить его в новом окне, отображающем DataGrid. Обратите внимание на внешний вид кнопок **Копировать набор** данных и **вставить набор данных** . Если схема объекта DataSet неизвестна при первом изменении, то DataGrid будет пустым. Необходимо вставить в текущий объект в DataGrid объект DataSet с такой же схемой. (Обратите внимание, что схему необходимо скопировать из другого места перед операцией вставки.) Можно также скопировать объект набора данных для использования в будущем, нажав кнопку **Копировать набор данных** .

Ответ службы отображается под тестовыми параметрами.

> [!NOTE]
> Если ожидаемое возвращаемое значение является строкой, результат отображается в виде строки в кавычках, хотя входные значения вводятся без кавычек.

Если при создании контракта для службы некоторая операция была указана как односторонняя, реакция службы не отображается. Как только сообщение поступает в очередь на доставку, появляется диалоговое окно с уведомлением, что сообщение успешно отравлено.

### <a name="session-support"></a>Поддержка сеансов

Флажок **запустить новый прокси-сервер** на вкладке операции службы позволяет включить поддержку сеанса. По умолчанию этот флажок снят.

Если вы вводите параметры тестирования для определенной операции (или другой операции в той же конечной точке службы) и нажимайте кнопку **вызвать** несколько раз с снятым флажком, эти операции совместно используют один прокси-сервер, и состояние службы сохраняется в нескольких операциях.

Если установлен флажок **запустить новый прокси** -сервер, то для каждого **вызова**запускается новый прокси-сервер, сценарий предыдущего сеанса завершается, а состояние службы сбрасывается.

### <a name="editing-client-configuration"></a>Изменение конфигурации клиента

В левой области главного окна тестового клиента WCF перечислены файлы конфигурации клиента. Дважды щелкните любой из этих элементов, чтобы отобразить содержимое файла в правой области.

#### <a name="edit-with-service-configuration-editor"></a>Изменение с помощью редактора конфигурации служб

Щелкните правой кнопкой мыши **файл конфигурации** на левой панели и выберите в контекстном меню пункт **изменить с помощью SvcConfigEditor**. Открывается редактор конфигурации служб, в который загружено содержимое конфигурации клиента. В этом средстве конфигурацию можно изменить и сохранить.

После сохранения файла в редакторе конфигураций службы WCF Test Client выводит предупреждающее сообщение о том, что файл был изменен вне, и спрашивает, нужно ли его перезагрузить.

При выборе варианта **Да**содержимое конфигурации на вкладке Client. dll. config отражает изменения, внесенные в редакторе.

Если выбрано значение **нет**, содержимое конфигурации на вкладке Client. dll. config остается неизменным, а измененное содержимое автоматически сохраняется в исходном файле.

#### <a name="restore-to-default-configuration"></a>Восстановление конфигурации по умолчанию

Если вы хотите отменить все изменения и восстановить конфигурацию клиента по умолчанию, щелкните правой кнопкой мыши **файл конфигурации** на левой панели и выберите контекстное меню **восстановить конфигурацию по умолчанию**. Загружается значение конфигурации по умолчанию, и содержимое на вкладке "Client. dll. config" восстанавливается.

#### <a name="validate-changes"></a>Проверка изменений

Когда сохраненные изменения загружаются в тестовом клиенте WCF, конфигурация проверяется на допустимость в соответствии со схемой WCF. При нахождении ошибок отображается диалоговое окно со сведениями об ошибке.

При создании прокси-сервера, двоичной компиляции или вызове службы элементы меню, поддерживающие редактирование (т. е. «Edit...», «Restore...» и т. д.), отключаются. Вызов службы также отключается при загрузке обновленной конфигурации в тестовый клиент WCF.

#### <a name="persist-client-configuration"></a>Сохранение конфигурация клиента

В **меню сервис**->**Параметры**->**Конфигурация клиента** содержится параметр **всегда повторно создавать конфигурацию при запуске служб** , который включен по умолчанию. Этот параметр указывает, что каждый раз, когда тестовый клиент WCF загружает службу, он повторно создает файл конфигурации на основе последних файлов контракта службы и службы App. config.

Если вы изменили конфигурацию клиента для службы WCF и хотите всегда использовать этот обновленный файл для отладки службы, можно снять флажок **повторно создать** . Таким образом, даже при обновлении службы и повторном открытии тестового клиента WCF файл Client. dll. config был обновлен ранее, а не повторно создан на основе обновленной службы.

Однако может потребоваться изменение файла конфигурации, чтобы сделать его совместимым с повторно созданным прокси. Если повторно созданный прокси и файл конфигурации не соответствуют из-за обновленной службы, то произойдет ошибка при вызове службы.

> [!CAUTION]
> Если файл конфигурации клиента был изменен и выбран для повторного использования его в будущем, то файл находится в следующем расположении:
>
> \Documents and Settings\\[учетная запись пользователя] \ \ мои проекты клиентов Документс\тест.
>
> Все обновленные учетные данные, сохраненные в файле конфигурации клиента, защищены списком управления доступа (ACL) этой папки.

### <a name="adding-removing-and-refreshing-services"></a>Добавление, удаление и обновление служб

#### <a name="add-service"></a>Добавление службы

Щелкните **файл**->**Добавить службу** , чтобы добавить службу в тестовый клиент WCF. Далее требуется ввести универсальный код ресурса (адрес конечной точки) добавляемой службы. Адрес службы может быть адресом обмена метаданными (MEX) или адресом языка описания веб-служб (WSDL).

В подменю **недавние службы** также можно найти список 10 недавно добавленных конечных точек служб. Если выбрать один из них, указанная служба будет добавлена в тестовый клиент WCF.

Можно также щелкнуть правой кнопкой мыши корень дерева службы **My Service**и выбрать команду **Добавить службу** , чтобы добиться того же результата.

При создании прокси, двоичной компиляции или вызове службы, команды меню, которые поддерживают добавление службы отключены. Вызов службы также отключен.

#### <a name="remove-service"></a>Удаление службы

Щелкните правой кнопкой мыши корень службы, который нужно удалить, и выберите пункт **удалить службу** , чтобы удалить службу из тестового клиента WCF.

При создании прокси, двоичной компиляции или вызове службы, команды меню, которые поддерживают удаление службы отключены. Вызов службы также отключен.

#### <a name="refresh-service"></a>Обновление службы

Если в службу вносятся изменения во время выполнения тестового клиента WCF и необходимо убедиться, что реализация тестового клиента WCF для этой службы актуальна, щелкните правой кнопкой мыши корень службы и выберите **Обновить службу**. Обратите внимание, что после обновления состояние службы сброшено.

При создании прокси, двоичной компиляции или вызове службы, команды меню, которые поддерживают обновление службы отключены. Вызов службы также отключен.

## <a name="location-of-files-generated-by-the-test-client"></a>Расположение файлов, созданных тестовым клиентом.

По умолчанию тестовый клиент WCF сохраняет созданный код клиента и файлы конфигурации в папке "проекты клиента%Аппдата%\локал\темп\тест". Эта папка удаляется после выхода из тестового клиента WCF. Если файл конфигурации изменен в клиенте тестирования WCF и параметр **всегда повторно создавать конфигурацию при запуске служб** отключен, измененный файл копируется в папку "качедконфиг" в разделе "Мои проекты клиента документс\тест" с помощью XML-файла сопоставления (Metadata-Address-to-File-Name) в качестве индекса.

Вы также можете запустить тестовый клиент WCF в командной строке, используя параметр `/ProjectPath`, чтобы указать новый путь для хранения созданных файлов, или использовать параметр `/RestoreProjectPath` для восстановления расположения по умолчанию. Синтаксис выглядит следующим образом:

`wcfTestClient.exe /ProjectPath [desired location]`

При выполнении этой команды тестовый клиент WCF не открывается. Изменяется только расположение папок. Эту команду можно выполнить, независимо от того, выполняется ли тестовый клиент WCF. Новое расположение применяется при перезапуске тестового клиента WCF. Сведения о расположении можно сохранить в реестре или в файле клиент WcfTestClient. exe. Option в папке «проекты клиента%Аппдата%\локал\темп\тест».

## <a name="features-supported-by-wcf-test-client"></a>Возможности, поддерживаемые тестовым клиентом WCF

Ниже приведен список функций, поддерживаемых клиентом WCF Test.

- Вызов службы: запрос/ответ и одностороннее сообщение.

- Привязки: все привязки, поддерживаемые программой Svcutil.exe.

- Управление сеансом.

- Контракт сообщения.

- XML-сериализация.

Ниже приведен список функций, которые не поддерживаются в тестовом клиенте WCF.

- Типы: <xref:System.IO.Stream>, <xref:System.ServiceModel.Channels.Message>, <xref:System.Xml.XmlElement>, <xref:System.Xml.XmlAttribute>, <xref:System.Xml.XmlNode>, типы, в которых реализован интерфейс <xref:System.Xml.Serialization.IXmlSerializable>, включая связанный атрибут <xref:System.Xml.Serialization.XmlSchemaProviderAttribute>, а также типы <xref:System.Xml.Linq.XDocument> и <xref:System.Xml.Linq.XElement> и тип ADO.NET <xref:System.Data.DataTable>.

- Дуплексный контракт.

- Транзакция.

- Безопасность: CardSpace, сертификат, имя пользователя и пароль.

- Привязки: WSFederationbinding, любые контекстные привязки, привязка Https, WebHttpbinding (поддержка ответных сообщений Json).

## <a name="closing-wcf-test-client"></a>Закрытие тестового клиента WCF

Вы можете закрыть тестовый клиент WCF следующими способами.

- В меню **файл** выберите команду **выход**. Кроме того, в главном окне тестового клиента WCF нажмите кнопку **Закрыть**. Оба эти действия также завершают работу автоматического размещения службы WCF и останавливают процесс отладки Visual Studio, если тестовый клиент WCF был запущен Visual Studio.

- Щелкните правой кнопкой мыши значок **службы WCF** в области уведомлений и выберите команду **выход.** Это завершает работу как автоматического размещения службы WCF, так и тестового клиента WCF и останавливает процесс отладки Visual Studio.

## <a name="see-also"></a>См. также:

- [Узел службы WCF (WcfSvcHost.exe)](wcf-service-host-wcfsvchost-exe.md)
