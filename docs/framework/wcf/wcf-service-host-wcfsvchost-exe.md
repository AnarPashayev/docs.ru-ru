---
title: Узел службы WCF (WcfSvcHost.exe)
ms.date: 03/30/2017
ms.assetid: 8643a63d-a357-4c39-bd6c-cdfdf71e370e
ms.openlocfilehash: f8a081ed7c525b4346908f0419f0bb1ebf43683a
ms.sourcegitcommit: d6e27023aeaffc4b5a3cb4b88685018d6284ada4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/09/2019
ms.locfileid: "67662636"
---
# <a name="wcf-service-host-wcfsvchostexe"></a>Узел службы WCF (WcfSvcHost.exe)

Узел службы Windows Communication Foundation (WCF) (WcfSvcHost.exe) позволяет запустить отладчик Visual Studio (F5) для автоматического размещения и проверки службы, реализованный. Затем можно проверить службу, используя тестовый клиент WCF (WcfTestClient.exe) или своего собственного клиента для поиска и устранения потенциальных ошибок.

## <a name="wcf-service-host"></a>Узел службы WCF

Узел службы WCF перечисление служб в проекте службы WCF, загружает конфигурацию проекта и создает экземпляр узла для каждой найденной службы. Средство интегрирован в Visual Studio через шаблон службы WCF и вызывается при запуске отладки проекта.

С помощью узла службы WCF, можно разместить службы WCF (в проекте библиотеки службы WCF) без создания дополнительного кода или фиксации в конкретном узле во время разработки.

> [!NOTE]
> Узел службы WCF не поддерживает частичное доверие. Если вы хотите использовать службы WCF в режиме частичного доверия, не используйте шаблон проекта библиотеки служб WCF в Visual Studio для построения службы. Вместо этого создайте новый веб-узел в Visual Studio, выбрав шаблон веб-сайт службы WCF, который может разместить службу в веб-сервер, на котором поддерживается частичное доверие WCF.

## <a name="project-types-hosted-by-wcf-service-host"></a>Типы проектов, размещенные узлом службы WCF

Узел службы WCF можно разместить следующие типы проекта библиотеки службы WCF: Библиотека службы WCF, библиотека службы последовательного рабочего процесса, State Machine Workflow Service Library и Библиотека служб синдикации. Узел службы WCF можно также разместить эти службы, которые могут быть добавлены в проект библиотеки службы с помощью **Добавление элемента** функциональные возможности. Сюда входят службы WCF, служба конечного компьютера WF, последовательная служба WF, служба конечного компьютера WF XAML и последовательная служба WF XAML.

Однако следует отметить, что это средство не окажет содействия в настройке узла. Для этой задачи необходимо вручную отредактировать файл App.config. Это средство также не выполняет проверку подлинности пользовательских файлов конфигурации.

> [!CAUTION]
> Не следует использовать узел службы WCF для размещения служб в рабочей среде, так как он не был разработан для этой цели.  Узел службы WCF не поддерживает надежности, безопасности и требования к управляемости такой среды. Вместо этого используется IIS, поскольку таким образом обеспечивается высочайшие свойства надежности и мониторинга, предоставляющие предпочтительное решение для служб размещения. После завершения разработки служб необходимо перенести службы от узла службы WCF в IIS.

## <a name="scenarios-for-using-wcf-service-host-inside-visual-studio"></a>Сценарии для использования узла службы WCF в Visual Studio

В следующей таблице перечислены все параметры в **аргументы командной строки** диалоговое окно, в котором можно найти, щелкнув правой кнопкой мыши проект в **обозревателя решений** в Visual Studio, выбрав **Свойства**, выбрав **Отладка** вкладка и щелкнув **запуск проекта**. Эти параметры используются при настройке узла службы WCF.

|Параметр|Значение|
|---------------|-------------|
|`/client`|Необязательный параметр, задающий путь к исполняемому файлу для запуска после размещения служб. Будет запущен тестовый клиент WCF следующий за размещением.|
|`/clientArg`|Задайте строку в качестве аргумента, передаваемого настраиваемому клиентскому приложению.|
|`/?`|Отображает текст справки.|

#### <a name="using-wcf-test-client"></a>Использование тестового клиента WCF

После создания проекта службы WCF и нажмите клавишу F5 для запуска отладчика узел службы WCF запускает размещение всех служб, которые находятся в проекте. Тестовый клиент WCF автоматически открывает и отображает список конечных точек службы, определенные в файле конфигурации. В главном окне можно проверить параметры и вызвать службу.

Чтобы убедиться, что используется тестовый клиент WCF, щелкните правой кнопкой мыши проект в **обозревателя решений** в Visual Studio выберите **свойства**, а затем выберите **Отладка** вкладки. Нажмите кнопку **запуск проекта** и убедитесь, что в появится следующее **аргументы командной строки** диалоговое окно.

`/client:WcfTestClient.exe`

#### <a name="using-a-custom-client"></a>Использование настраиваемого клиента

Чтобы использовать пользовательский клиент, щелкните правой кнопкой мыши проект в **обозревателя решений** в Visual Studio выберите **свойства**, а затем выберите **Отладка** вкладки. Нажмите кнопку **запуск проекта** и изменить `/client` параметр в **аргументы командной строки** диалоговое окно, чтобы указать настраиваемый клиент, как показано в следующем примере.

`/client:"path/CustomClient.exe"`

При нажатии клавиши F5, чтобы снова запустить эту службу, узел службы WCF автоматически запускает настраиваемый клиент, при запуске отладчика.

Также можно использовать параметр `/clientArg:`, чтобы указать строку в качестве аргумента, переданного настраиваемому клиентскому приложению, как указано в следующем примере:

`/client:"path/CustomClient.exe" /clientArg:"arguments that are passed to Client"`

Например, если используется шаблон библиотеки служб синдикации, то можно использовать следующие аргументы командной строки:

`/client:iexplore.exe /clientArgs:http://localhost:8731/Design_Time_Addresses/Feed1/`

#### <a name="specifying-no-client"></a>Указание отсутствия клиента

Чтобы указать, что клиенты не будут использоваться после размещения служб WCF, щелкните правой кнопкой мыши проект в **обозревателя решений** в Visual Studio выберите **свойства**, а затем выберите **Отладка** вкладки. Нажмите кнопку **запуск проекта** и оставить **аргументы командной строки** диалоговое окно пустым.

#### <a name="using-a-custom-host"></a>Использование настраиваемого узла

Чтобы использовать пользовательский узел, щелкните правой кнопкой мыши проект в **обозревателя решений** в Visual Studio выберите **свойства**, а затем выберите **Отладка** вкладки. Нажмите кнопку **запуск внешней программы** и введите полный путь к настраиваемому узлу. Можно также использовать **аргументы командной строки** диалоговое окно, чтобы указать аргументы для передачи на узел.

## <a name="wcf-service-host-user-interface"></a>Пользовательский интерфейс узла службы WCF

При изначальном запуске узла службы WCF (нажав клавишу F5 в Visual Studio), **узел службы WCF** автоматически откроется окно. При выполнении узла службы WCF, в области уведомлений появляется значок программы. Дважды щелкните значок, чтобы открыть **узел службы WCF** окно

При возникновении ошибок во время размещения службы, чтобы отобразить соответствующие сведения открыть узел службы WCF-диалоговое окно.

**Узел службы WCF** главное окно содержит два меню:

- **Файл**: Содержит **закрыть** и **выхода** команды. При нажатии кнопки **закрыть**, **узел службы WCF** диалоговое окно закрывается, но службы будут размещаться. При нажатии кнопки **выхода**, узел службы WCF также завершить работу. Также завершается работа всех размещенных служб.

- **Справка**: Содержит **о** команду, которая содержит сведения о версии. Он также содержит **помочь** команду, которая может открыть файл справки.

Основной **узел службы WCF** окно содержит две области:

- Первая область **службы**. В ней содержится список, отображающий основные сведения всех служб. К ним относятся следующие сведения:

  - **Служба**. Список всех служб.

  - **состояние**: Отобразить состояние службы. Допустимые значения: «Работает», «Остановлено» и «Error».

  - **Адрес метаданных**: Отображает адрес метаданных службы.

- Вторая область **дополнительную информацию**. Отображает подробные сведения о работе состояние службы, при выборе конкретной строки службы в **службы** области. Если состояние - «Ошибка», можно просмотреть полное сообщение об ошибке на экране.

## <a name="stopping-wcf-service-host"></a>Остановка узла службы WCF

Вы можете завершить работу узла службы WCF, одним из следующих четырех способов:

- Остановите сеанс отладки в Visual Studio.

- Выберите **выхода** из **файл** меню в **узел службы WCF** окна.

- Выберите **выхода** из контекстного меню для узла службы WCF значок в области системных уведомлений.

- Выйдите из тестового клиента WCF, если он используется.

## <a name="using-service-host-without-administrator-privilege"></a>Использование узла службы без прав администратора

Чтобы разрешить пользователям без прав администратора для разработки служб WCF, создается список ACL (список управления доступом) для пространства имен "http://+:8731/Design_Time_Addresses" во время установки Visual Studio. Список управления доступом определяется пользовательским интерфейсом, который включает всех пользователей, выполнивших вход в систему. Администраторы могут добавлять или удалять пользователей из этого списка ACL и открыть дополнительные порты. Этот список ACL позволяет пользователям использовать WCF Service Auto Host (wcfSvcHost.exe) без предоставления им прав администратора.

Можно изменить доступ используя средство netsh.exe в [!INCLUDE[wv](../../../includes/wv-md.md)] под учетной записью администратора. Ниже приведен пример использования средства netsh.exe.

```
netsh http add urlacl url=http://+:8001/MyService user=<domain>\<user>
```

Дополнительные сведения о netsh.exe см. в разделе "[способы использования средства Netsh.exe и переключателей командной строки](https://go.microsoft.com/fwlink/?LinkId=97877)«.

## <a name="see-also"></a>См. также

- [Тестовый клиент WCF (WcfTestClient.exe)](../../../docs/framework/wcf/wcf-test-client-wcftestclient-exe.md)
