---
title: Узел службы WCF (WcfSvcHost.exe)
ms.date: 03/30/2017
ms.assetid: 8643a63d-a357-4c39-bd6c-cdfdf71e370e
ms.openlocfilehash: b8fb32111a80178f5eb92411eb4990decb645bb6
ms.sourcegitcommit: a4f9b754059f0210e29ae0578363a27b9ba84b64
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/05/2019
ms.locfileid: "74837744"
---
# <a name="wcf-service-host-wcfsvchostexe"></a>Узел службы WCF (WcfSvcHost.exe)

Узел службы Windows Communication Foundation (WCF) (WcfSvcHost. exe) позволяет запустить отладчик Visual Studio (F5) для автоматического размещения и тестирования реализованной службы. Затем можно протестировать службу с помощью тестового клиента WCF (клиент WcfTestClient. exe) или собственного клиента, чтобы найти и исправить возможные ошибки.

## <a name="wcf-service-host"></a>Узел службы WCF

Узел службы WCF перечисляет службы в проекте службы WCF, загружает конфигурацию проекта и создает экземпляр узла для каждой найденной службы. Это средство интегрировано в Visual Studio с помощью шаблона службы WCF и вызывается при запуске отладки проекта.

С помощью узла службы WCF можно разместить службу WCF (в проекте библиотеки службы WCF) без написания дополнительного кода или фиксации на определенном узле во время разработки.

> [!NOTE]
> Узел службы WCF не поддерживает частичное доверие. Если вы хотите использовать службу WCF в режиме частичного доверия, не используйте шаблон проекта библиотеки службы WCF в Visual Studio для создания службы. Вместо этого создайте новый веб-сайт в Visual Studio, выбрав шаблон веб-сайт службы WCF, который может размещать службу на сервере, на котором поддерживается частичное доверие WCF.

## <a name="project-types-hosted-by-wcf-service-host"></a>Типы проектов, размещенные узлом службы WCF

На узле службы WCF могут размещаться следующие типы проектов библиотеки служб WCF: Библиотека службы WCF, последовательная Библиотека службы рабочих процессов, Библиотека службы рабочего процесса конечного автомата и Библиотека службы синдикации. Узел службы WCF также может размещать эти службы, которые можно добавить в проект библиотеки служб с помощью функции **добавления элемента** . Сюда входят служба WCF, служба конечного автомата WF, последовательная служба WF, служба конечного автомата XAML WF и последовательная служба XAML WF.

Однако следует отметить, что это средство не окажет содействия в настройке узла. Для этой задачи необходимо вручную отредактировать файл App.config. Это средство также не выполняет проверку подлинности пользовательских файлов конфигурации.

> [!CAUTION]
> Не следует использовать узел службы WCF для размещения служб в рабочей среде, так как он не был разработан для этой цели.  Узел службы WCF не поддерживает требования к надежности, безопасности и управляемости такой среды. Вместо этого используется IIS, поскольку таким образом обеспечивается высочайшие свойства надежности и мониторинга, предоставляющие предпочтительное решение для служб размещения. После завершения разработки служб следует перенести службы из узла службы WCF в службы IIS.

## <a name="scenarios-for-using-wcf-service-host-inside-visual-studio"></a>Сценарии для использования узла службы WCF в Visual Studio

В следующей таблице перечислены все параметры в диалоговом окне **аргументы командной строки** , которые можно найти, щелкнув правой кнопкой мыши проект в **обозревателе решений** в Visual Studio, выбрав пункт **Свойства**, а затем выбрав вкладку **Отладка** и нажав кнопку **запустить проект**. Эти параметры полезны при настройке узла службы WCF.

|Параметр|Смысл|
|---------------|-------------|
|`/client`|Необязательный параметр, задающий путь к исполняемому файлу для запуска после размещения служб. Запускается тестовый клиент WCF, следующий за размещением.|
|`/clientArg`|Задайте строку в качестве аргумента, передаваемого настраиваемому клиентскому приложению.|
|`/?`|Отображает текст справки.|

#### <a name="using-wcf-test-client"></a>Использование тестового клиента WCF

После создания нового проекта службы WCF и нажатия клавиши F5 для запуска отладчика узел службы WCF начинает размещать все службы, найденные в проекте. Тестовый клиент WCF автоматически открывает и отображает список конечных точек служб, определенных в файле конфигурации. В главном окне можно проверить параметры и вызвать службу.

Чтобы убедиться в использовании тестового клиента WCF, щелкните правой кнопкой мыши проект в **обозревателе решений** в Visual Studio, выберите пункт **свойства**, а затем перейдите на вкладку **Отладка** . Нажмите кнопку **запустить проект** и убедитесь, что в диалоговом окне **аргументы командной строки** отображается следующее.

`/client:WcfTestClient.exe`

#### <a name="using-a-custom-client"></a>Использование настраиваемого клиента

Чтобы использовать настраиваемый клиент, щелкните правой кнопкой мыши проект в **обозревателе решений** в Visual Studio, выберите пункт **свойства**, а затем перейдите на вкладку **Отладка** . Нажмите кнопку **запустить проект** и измените параметр `/client` в диалоговом окне **аргументы командной строки** , чтобы указать на пользовательский клиент, как показано в следующем примере.

`/client:"path/CustomClient.exe"`

При нажатии клавиши F5 для повторного запуска службы узел службы WCF автоматически запускает пользовательский клиент при запуске отладчика.

Также можно использовать параметр `/clientArg:`, чтобы указать строку в качестве аргумента, переданного настраиваемому клиентскому приложению, как указано в следующем примере:

`/client:"path/CustomClient.exe" /clientArg:"arguments that are passed to Client"`

Например, если используется шаблон библиотеки служб синдикации, то можно использовать следующие аргументы командной строки:

`/client:iexplore.exe /clientArgs:http://localhost:8731/Design_Time_Addresses/Feed1/`

#### <a name="specifying-no-client"></a>Указание отсутствия клиента

Чтобы указать, что после размещения службы WCF клиент не будет использоваться, щелкните правой кнопкой мыши проект в **обозревателе решений** в Visual Studio, выберите пункт **свойства**, а затем перейдите на вкладку **Отладка** . Нажмите кнопку **запустить проект** и оставьте диалоговое окно **аргументы командной строки** пустым.

#### <a name="using-a-custom-host"></a>Использование настраиваемого узла

Чтобы использовать настраиваемый узел, щелкните правой кнопкой мыши проект в **обозревателе решений** в Visual Studio, выберите пункт **свойства**, а затем перейдите на вкладку **Отладка** . Щелкните **запустить внешнюю программу** и введите полный путь к пользовательскому узлу. Можно также использовать диалоговое окно **аргументы командной строки** , чтобы указать аргументы, передаваемые узлу.

## <a name="wcf-service-host-user-interface"></a>Пользовательский интерфейс узла службы WCF

При первоначальном вызове узла службы WCF (нажатием клавиши F5 в Visual Studio) автоматически открывается окно **службы WCF** . Когда узел службы WCF выполняется, в области уведомлений появляется значок программы. Дважды щелкните значок, чтобы открыть окно **размещения службы WCF** .

При возникновении ошибок во время размещения службы откроется диалоговое окно "узел службы WCF", в котором отображаются соответствующие сведения.

Главное окно **узла службы WCF** содержит два меню:

- **Файл**: содержит команды **Close** и **Exit** . При нажатии кнопки **Закрыть**диалоговое окно " **узел службы WCF** " закрывается, но службы продолжают размещаться. При нажатии кнопки **выход**узел службы WCF также завершает работу. Также завершается работа всех размещенных служб.

- **Справка**: содержит команду **About** , содержащую сведения о версии. Он также содержит команду **Help** , которая может открыть файл справки.

Основное окно **службы WCF** содержит две области:

- Первая область — **Service**. В ней содержится список, отображающий основные сведения всех служб. К ним относятся следующие сведения:

  - **Служба**: список всех служб.

  - **Состояние**: отображает состояние службы. Допустимые значения: "Started", "Stopped" и "Error".

  - **Адрес метаданных**: отображает адрес метаданных служб.

- Вторая область — **Дополнительные сведения**. В нем отображается подробное описание состояния службы, если в области **обслуживания** выбрана конкретная Сервисная строка. Если состояние - «Ошибка», можно просмотреть полное сообщение об ошибке на экране.

## <a name="stopping-wcf-service-host"></a>Остановка узла службы WCF

Вы можете завершить работу узла службы WCF следующими четырьмя способами.

- Останавливает сеанс отладки в Visual Studio.

- Выберите команду **выход** в меню **файл** в окне **размещения службы WCF** .

- Выберите **выход** из контекстного меню значка службы WCF значок "область уведомлений системы".

- Выйдите из тестового клиента WCF, если он используется.

## <a name="using-service-host-without-administrator-privilege"></a>Использование узла службы без прав администратора

Чтобы разрешить пользователям без прав администратора для разработки служб WCF, в ходе установки Visual Studio для пространства имен "http://+:8731/Design_Time_Addresses" создается список управления доступом (ACL). Список управления доступом определяется пользовательским интерфейсом, который включает всех пользователей, выполнивших вход в систему. Администраторы могут добавлять или удалять пользователей из списка ACL или открывать дополнительные порты. Этот список ACL позволяет пользователям использовать автоматическое размещение службы WCF (wcfSvcHost. exe) без предоставления прав администратора.

Вы можете изменить доступ с помощью средства Netsh. exe в Windows Vista в учетной записи администратора с повышенными правами. Ниже приведен пример использования средства netsh.exe.

```console
netsh http add urlacl url=http://+:8001/MyService user=<domain>\<user>
```

Дополнительные сведения о программе Netsh. exe см. в разделе "[Использование средства Netsh. exe и параметров командной строки](https://docs.microsoft.com/previous-versions/tn-archive/bb490939(v=technet.10))".

## <a name="see-also"></a>См. также:

- [Тестовый клиент WCF (WcfTestClient.exe)](wcf-test-client-wcftestclient-exe.md)
