---
title: Расширение клиентов
ms.date: 03/30/2017
helpviewer_keywords:
- proxy extensions [WCF]
ms.assetid: 1328c61c-06e5-455f-9ebd-ceefb59d3867
ms.openlocfilehash: 99b4dd5e4acfce8bea4d3c2cae3a53152585675d
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61857939"
---
# <a name="extending-clients"></a><span data-ttu-id="c5880-102">Расширение клиентов</span><span class="sxs-lookup"><span data-stu-id="c5880-102">Extending Clients</span></span>
<span data-ttu-id="c5880-103">В вызывающем приложении уровень модели службы отвечает за преобразование вызовов методов в коде приложения в исходящие сообщения, передачу их по соответствующим каналам, преобразование результатов обратно в возвращаемые значения и выходные параметры в коде приложения, а также за возврат результатов вызывающем объекту.</span><span class="sxs-lookup"><span data-stu-id="c5880-103">In a calling application, the service model layer is responsible for translating method invocations in application code into outbound messages, pushing them to the underlying channels, translating results back into return values and out parameters in application code, and returning the results back to the caller.</span></span> <span data-ttu-id="c5880-104">Расширения модели службы изменяют или реализуют поведение и возможности выполнения или взаимодействия, в том числе возможности клиента или диспетчера, пользовательские поведения, перехват сообщений и параметров, а также другие возможности расширяемости.</span><span class="sxs-lookup"><span data-stu-id="c5880-104">Service model extensions modify or implement execution or communication behavior and features involving client or dispatcher functionality, custom behaviors, message and parameter interception, and other extensibility functionality.</span></span>  
  
 <span data-ttu-id="c5880-105">В этом разделе описывается использование <xref:System.ServiceModel.Dispatcher.ClientRuntime> и <xref:System.ServiceModel.Dispatcher.ClientOperation> классы в клиентском приложении Windows Communication Foundation (WCF), чтобы изменить поведение выполнения по умолчанию клиента WCF, или чтобы перехватывать или изменять сообщения, параметры или возвращаемые значения перед или после их отправки и получения из уровня канала.</span><span class="sxs-lookup"><span data-stu-id="c5880-105">This topic describes how to use the <xref:System.ServiceModel.Dispatcher.ClientRuntime> and <xref:System.ServiceModel.Dispatcher.ClientOperation> classes in a Windows Communication Foundation (WCF) client application to modify the default execution behavior of a WCF client or to intercept or modify messages, parameters, or return values prior to or subsequent to sending or retrieving them from the channel layer.</span></span> <span data-ttu-id="c5880-106">Дополнительные сведения о расширении среды выполнения службы см. в разделе [расширение диспетчеров](../../../../docs/framework/wcf/extending/extending-dispatchers.md).</span><span class="sxs-lookup"><span data-stu-id="c5880-106">For more information about extending the service runtime, see [Extending Dispatchers](../../../../docs/framework/wcf/extending/extending-dispatchers.md).</span></span> <span data-ttu-id="c5880-107">Дополнительные сведения о расширениях функциональности, изменяющих и добавляющих пользовательские объекты в среду выполнения клиента см. в разделе [настройку и расширение среды выполнения с помощью поведений](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md).</span><span class="sxs-lookup"><span data-stu-id="c5880-107">For more information about the behaviors that modify and insert customization objects into the client runtime, see [Configuring and Extending the Runtime with Behaviors](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md).</span></span>  
  
## <a name="clients"></a><span data-ttu-id="c5880-108">Клиенты</span><span class="sxs-lookup"><span data-stu-id="c5880-108">Clients</span></span>  
 <span data-ttu-id="c5880-109">На клиенте клиентский объект или клиента канал WCF преобразует вызовы метода в исходящие и входящие сообщения к результатам операции, которые возвращаются вызывающему приложению.</span><span class="sxs-lookup"><span data-stu-id="c5880-109">On a client, a WCF client object or client channel converts method invocations into outgoing messages and incoming messages to operation results that are returned to the calling application.</span></span> <span data-ttu-id="c5880-110">(Дополнительные сведения о типах клиентов см. в разделе [Клиентская архитектура технологии WCF](../../../../docs/framework/wcf/feature-details/client-architecture.md).)</span><span class="sxs-lookup"><span data-stu-id="c5880-110">(For more information about client types, see [WCF Client Architecture](../../../../docs/framework/wcf/feature-details/client-architecture.md).)</span></span>  
  
 <span data-ttu-id="c5880-111">Типы клиента WCF имеют типы среды выполнения, которые обрабатывают эта функциональность на уровне конечной точки и операции.</span><span class="sxs-lookup"><span data-stu-id="c5880-111">WCF client types have runtime types that handle this endpoint- and operation-level functionality.</span></span> <span data-ttu-id="c5880-112">Когда приложение вызывает операцию, <xref:System.ServiceModel.Dispatcher.ClientOperation> преобразует исходящие объекты в сообщение, обрабатывает перехватчики, проверяет, что исходящий вызов соответствует целевому контракту, и передает исходящее сообщение объекту <xref:System.ServiceModel.Dispatcher.ClientRuntime>, который отвечает за создание исходящих каналов (и входящих в случае дуплексной связи) и управление ими, дополнительную обработку исходящих сообщений (например, изменение заголовка), обработку перехватчиков сообщений в обоих направлениях и перенаправление входящих дуплексных вызовов соответствующему объекту <xref:System.ServiceModel.Dispatcher.DispatchRuntime> на стороне клиента.</span><span class="sxs-lookup"><span data-stu-id="c5880-112">When an application calls an operation, the <xref:System.ServiceModel.Dispatcher.ClientOperation> translates the outbound objects into a message, processes interceptors, confirms that the outbound call conforms to the target contract, and hands the outbound message to the <xref:System.ServiceModel.Dispatcher.ClientRuntime>, which is responsible for creating and managing outbound channels (and inbound channels in the case of duplex services), handling extra outbound message processing (such as header modification), processing message interceptors in both directions, and routing inbound duplex calls to the appropriate client-side <xref:System.ServiceModel.Dispatcher.DispatchRuntime> object.</span></span> <span data-ttu-id="c5880-113">Объекты <xref:System.ServiceModel.Dispatcher.ClientOperation> и <xref:System.ServiceModel.Dispatcher.ClientRuntime> выполняют аналогичные функции, когда сообщения (в том числе ошибки) возвращаются клиенту.</span><span class="sxs-lookup"><span data-stu-id="c5880-113">Both the <xref:System.ServiceModel.Dispatcher.ClientOperation> and <xref:System.ServiceModel.Dispatcher.ClientRuntime> provide similar services when messages (including faults) are returned to the client.</span></span>  
  
 <span data-ttu-id="c5880-114">Эти два класса среды выполнения являются основным расширением, позволяющим настроить обработку объектов клиента WCF и каналов.</span><span class="sxs-lookup"><span data-stu-id="c5880-114">These two runtime classes are the main extension to customize the processing of WCF client objects and channels.</span></span> <span data-ttu-id="c5880-115">Класс <xref:System.ServiceModel.Dispatcher.ClientRuntime> позволяет пользователям перехватывать и расширять выполнение клиента на уровне всех сообщений в контракте.</span><span class="sxs-lookup"><span data-stu-id="c5880-115">The <xref:System.ServiceModel.Dispatcher.ClientRuntime> class allows users to intercept and extend client execution across all messages in the contract.</span></span> <span data-ttu-id="c5880-116">Класс <xref:System.ServiceModel.Dispatcher.ClientOperation> позволяет пользователям перехватывать и расширять выполнение клиента для всех сообщений в заданной операции.</span><span class="sxs-lookup"><span data-stu-id="c5880-116">The <xref:System.ServiceModel.Dispatcher.ClientOperation> class allows users to intercept and extend client execution for all messages in a given operation.</span></span>  
  
 <span data-ttu-id="c5880-117">Изменение свойств и вставка дополнительных функций реализуются с помощью расширений функциональности контрактов, конечных точек и операций.</span><span class="sxs-lookup"><span data-stu-id="c5880-117">Modifying the properties or inserting customizations are done by using contract, endpoint, and operation behaviors.</span></span> <span data-ttu-id="c5880-118">Дополнительные сведения о том, как использовать эти виды поведения для изменения функций клиента см. в разделе [настройку и расширение среды выполнения с помощью поведений](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md).</span><span class="sxs-lookup"><span data-stu-id="c5880-118">For more information about how to use these types of behaviors to perform client runtime customizations, see [Configuring and Extending the Runtime with Behaviors](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md).</span></span>  
  
## <a name="scenarios"></a><span data-ttu-id="c5880-119">Сценарии</span><span class="sxs-lookup"><span data-stu-id="c5880-119">Scenarios</span></span>  
 <span data-ttu-id="c5880-120">Существует несколько причин для расширения клиентской системы, в том числе следующие.</span><span class="sxs-lookup"><span data-stu-id="c5880-120">There a number of reasons to extend the client system, including:</span></span>  
  
- <span data-ttu-id="c5880-121">Пользовательская проверка сообщений</span><span class="sxs-lookup"><span data-stu-id="c5880-121">Custom Message Validation.</span></span> <span data-ttu-id="c5880-122">У пользователя может возникнуть потребность проверить, что сообщение удовлетворяет конкретной схеме.</span><span class="sxs-lookup"><span data-stu-id="c5880-122">A user may want to enforce that a message is valid for a certain schema.</span></span> <span data-ttu-id="c5880-123">Этого можно добиться, реализовав интерфейс <xref:System.ServiceModel.Dispatcher.IClientMessageInspector> и присвоив реализацию свойству <xref:System.ServiceModel.Dispatcher.DispatchRuntime.MessageInspectors%2A>.</span><span class="sxs-lookup"><span data-stu-id="c5880-123">This can be done by implementing the <xref:System.ServiceModel.Dispatcher.IClientMessageInspector> interface and assigning the implementation to the <xref:System.ServiceModel.Dispatcher.DispatchRuntime.MessageInspectors%2A> property.</span></span> <span data-ttu-id="c5880-124">Примеры см. в разделах [Практическое руководство. Проверка или изменение сообщений на клиенте](../../../../docs/framework/wcf/extending/how-to-inspect-or-modify-messages-on-the-client.md) и [как: Проверка или изменение сообщений на клиенте](../../../../docs/framework/wcf/extending/how-to-inspect-or-modify-messages-on-the-client.md).</span><span class="sxs-lookup"><span data-stu-id="c5880-124">For examples, see [How to: Inspect or Modify Messages on the Client](../../../../docs/framework/wcf/extending/how-to-inspect-or-modify-messages-on-the-client.md) and [How to: Inspect or Modify Messages on the Client](../../../../docs/framework/wcf/extending/how-to-inspect-or-modify-messages-on-the-client.md).</span></span>  
  
- <span data-ttu-id="c5880-125">Ведение пользовательского журнала сообщений</span><span class="sxs-lookup"><span data-stu-id="c5880-125">Custom Message Logging.</span></span> <span data-ttu-id="c5880-126">У пользователя может возникнуть потребность проверять и регистрировать некоторый набор сообщений приложения, которые проходят через конечную точку.</span><span class="sxs-lookup"><span data-stu-id="c5880-126">A user may want to inspect and log some set of application messages that flow through an endpoint.</span></span> <span data-ttu-id="c5880-127">Для этого также можно использовать интерфейсы перехватчиков сообщений.</span><span class="sxs-lookup"><span data-stu-id="c5880-127">This can also be accomplished with the message interceptor interfaces.</span></span>  
  
- <span data-ttu-id="c5880-128">Пользовательские преобразования сообщений</span><span class="sxs-lookup"><span data-stu-id="c5880-128">Custom Message Transformations.</span></span> <span data-ttu-id="c5880-129">Вместо изменения кода приложений пользователю может потребоваться применить некоторые преобразования к сообщению в среде выполнения (например, для работы с версиями).</span><span class="sxs-lookup"><span data-stu-id="c5880-129">Rather than modifying application code, the user may want to apply certain transformations to the message in the runtime (for example, for versioning).</span></span> <span data-ttu-id="c5880-130">Для этого также можно использовать интерфейсы перехватчиков сообщений.</span><span class="sxs-lookup"><span data-stu-id="c5880-130">This can be accomplished, again, with the message interceptor interfaces.</span></span>  
  
- <span data-ttu-id="c5880-131">Пользовательская модель данных</span><span class="sxs-lookup"><span data-stu-id="c5880-131">Custom Data Model.</span></span> <span data-ttu-id="c5880-132">Пользователь может потребоваться модель данных и сериализации, кроме тех, по умолчанию поддерживаются в WCF (а именно, <xref:System.Runtime.Serialization.DataContractSerializer?displayProperty=nameWithType>, <xref:System.Xml.Serialization.XmlSerializer?displayProperty=nameWithType>, и <xref:System.ServiceModel.Channels.Message?displayProperty=nameWithType> объекты).</span><span class="sxs-lookup"><span data-stu-id="c5880-132">A user may want to have a data or serialization model other than those supported by default in WCF (namely, <xref:System.Runtime.Serialization.DataContractSerializer?displayProperty=nameWithType>, <xref:System.Xml.Serialization.XmlSerializer?displayProperty=nameWithType>, and <xref:System.ServiceModel.Channels.Message?displayProperty=nameWithType> objects).</span></span> <span data-ttu-id="c5880-133">Этого можно добиться, реализовав интерфейсы модулей форматирования сообщений.</span><span class="sxs-lookup"><span data-stu-id="c5880-133">This can be done by implementing the message formatter interfaces.</span></span> <span data-ttu-id="c5880-134">Дополнительные сведения см. в описании интерфейса <xref:System.ServiceModel.Dispatcher.IClientMessageFormatter?displayProperty=nameWithType> и свойства <xref:System.ServiceModel.Dispatcher.ClientOperation.Formatter%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c5880-134">For more information, see <xref:System.ServiceModel.Dispatcher.IClientMessageFormatter?displayProperty=nameWithType> and the <xref:System.ServiceModel.Dispatcher.ClientOperation.Formatter%2A?displayProperty=nameWithType> property.</span></span>  
  
- <span data-ttu-id="c5880-135">Пользовательская проверка параметров</span><span class="sxs-lookup"><span data-stu-id="c5880-135">Custom Parameter Validation.</span></span> <span data-ttu-id="c5880-136">Может возникнуть необходимость принудительной проверки введенных параметров (в отличие от XML).</span><span class="sxs-lookup"><span data-stu-id="c5880-136">A user may want to enforce that typed parameters are valid (as opposed to XML).</span></span> <span data-ttu-id="c5880-137">Для этого также можно использовать интерфейсы инспекторов параметров.</span><span class="sxs-lookup"><span data-stu-id="c5880-137">This can be done using the parameter inspector interfaces.</span></span> <span data-ttu-id="c5880-138">Пример см. в статье [Практическое руководство. Проверка или изменение параметров](../../../../docs/framework/wcf/extending/how-to-inspect-or-modify-parameters.md) или [клиентской проверки](../../../../docs/framework/wcf/samples/client-validation.md).</span><span class="sxs-lookup"><span data-stu-id="c5880-138">For an example, see [How to: Inspect or Modify Parameters](../../../../docs/framework/wcf/extending/how-to-inspect-or-modify-parameters.md) or [Client Validation](../../../../docs/framework/wcf/samples/client-validation.md).</span></span>  
  
### <a name="using-the-clientruntime-class"></a><span data-ttu-id="c5880-139">Использование класса ClientRuntime</span><span class="sxs-lookup"><span data-stu-id="c5880-139">Using the ClientRuntime Class</span></span>  
 <span data-ttu-id="c5880-140">Класс <xref:System.ServiceModel.Dispatcher.ClientRuntime> является точкой расширения, в которую можно добавить объекты расширения, перехватывающие сообщения и расширяющие функциональность клиента.</span><span class="sxs-lookup"><span data-stu-id="c5880-140">The <xref:System.ServiceModel.Dispatcher.ClientRuntime> class is an extensibility point to which you can add extension objects that intercept messages and extend client behavior.</span></span> <span data-ttu-id="c5880-141">Объекты перехвата могут обрабатывать все сообщения в определенном контракте, обрабатывать только сообщения для определенных операций, выполнять инициализацию пользовательского канала, а также реализовывать другие варианты функциональности пользовательского клиентского приложения.</span><span class="sxs-lookup"><span data-stu-id="c5880-141">Interception objects can process all messages in a particular contract, process only messages for particular operations, perform custom channel initialization, and implement other custom client application behavior.</span></span>  
  
- <span data-ttu-id="c5880-142">Свойство <xref:System.ServiceModel.Dispatcher.ClientRuntime.CallbackDispatchRuntime%2A> возвращает объект времени выполнения диспетчеризации для клиентов обратного вызова, инициируемого службой.</span><span class="sxs-lookup"><span data-stu-id="c5880-142">The <xref:System.ServiceModel.Dispatcher.ClientRuntime.CallbackDispatchRuntime%2A> property returns the dispatch run-time object for service-initiated callback clients.</span></span>  
  
- <span data-ttu-id="c5880-143">Свойство <xref:System.ServiceModel.Dispatcher.ClientRuntime.OperationSelector%2A> принимает объект выбора пользовательской операции.</span><span class="sxs-lookup"><span data-stu-id="c5880-143">The <xref:System.ServiceModel.Dispatcher.ClientRuntime.OperationSelector%2A> property accepts a custom operation selector object.</span></span>  
  
- <span data-ttu-id="c5880-144">Свойство <xref:System.ServiceModel.Dispatcher.ClientRuntime.ChannelInitializers%2A> позволяет добавлять инициализатор канала, который может проверять или изменять клиентский канал.</span><span class="sxs-lookup"><span data-stu-id="c5880-144">The <xref:System.ServiceModel.Dispatcher.ClientRuntime.ChannelInitializers%2A> property enables the addition of a channel initializer that can inspect or modify the client channel.</span></span>  
  
- <span data-ttu-id="c5880-145">Свойство <xref:System.ServiceModel.Dispatcher.ClientRuntime.Operations%2A> возвращает коллекцию объектов <xref:System.ServiceModel.Dispatcher.ClientOperation>, в которую можно добавить пользовательские перехватчики сообщений, предоставляющие функциональность в соответствии с сообщениями данной операции.</span><span class="sxs-lookup"><span data-stu-id="c5880-145">The <xref:System.ServiceModel.Dispatcher.ClientRuntime.Operations%2A> property gets a collection of <xref:System.ServiceModel.Dispatcher.ClientOperation> objects to which you can add custom message interceptors that provide functionality specific to the messages of that operation.</span></span>  
  
- <span data-ttu-id="c5880-146">Свойство <xref:System.ServiceModel.Dispatcher.ClientRuntime.ManualAddressing%2A> позволяет приложению отключать некоторые заголовки автоматической адресации для управления адресацией напрямую.</span><span class="sxs-lookup"><span data-stu-id="c5880-146">The <xref:System.ServiceModel.Dispatcher.ClientRuntime.ManualAddressing%2A> property enables an application to turn off some automatic addressing headers to directly control addressing.</span></span>  
  
- <span data-ttu-id="c5880-147">Свойство <xref:System.ServiceModel.Dispatcher.ClientRuntime.Via%2A> задает значение назначения сообщения на уровне транспорта для поддержки посредников и других сценариев.</span><span class="sxs-lookup"><span data-stu-id="c5880-147">The <xref:System.ServiceModel.Dispatcher.ClientRuntime.Via%2A> property sets the value of the destination of the message at the transport level to support intermediaries and other scenarios.</span></span>  
  
- <span data-ttu-id="c5880-148"><xref:System.ServiceModel.Dispatcher.ClientRuntime.MessageInspectors%2A> Свойство возвращает коллекцию <xref:System.ServiceModel.Dispatcher.IClientMessageInspector> объектов, к которым можно добавить пользовательские перехватчики сообщений для всех сообщений, проходящих через клиент WCF.</span><span class="sxs-lookup"><span data-stu-id="c5880-148">The <xref:System.ServiceModel.Dispatcher.ClientRuntime.MessageInspectors%2A> property gets a collection of <xref:System.ServiceModel.Dispatcher.IClientMessageInspector> objects to which you can add custom message interceptors for all messages traveling through a WCF client.</span></span>  
  
 <span data-ttu-id="c5880-149">Кроме того, существует несколько других свойств, которые извлекают данные о контракте:</span><span class="sxs-lookup"><span data-stu-id="c5880-149">In addition, there are a number of other properties that retrieve the contract information:</span></span>  
  
- <xref:System.ServiceModel.Dispatcher.ClientRuntime.ContractName%2A>  
  
- <xref:System.ServiceModel.Dispatcher.ClientRuntime.ContractNamespace%2A>  
  
- <xref:System.ServiceModel.Dispatcher.ClientRuntime.ContractClientType%2A>  
  
 <span data-ttu-id="c5880-150">Если клиент WCF является дуплексным клиентом WCF, то следующие свойства также извлекают обратного вызова WCF сведения о клиенте:</span><span class="sxs-lookup"><span data-stu-id="c5880-150">If the WCF client is a duplex WCF client, the following properties also retrieve the callback WCF client information:</span></span>  
  
- <xref:System.ServiceModel.Dispatcher.ClientRuntime.CallbackClientType%2A>  
  
- <xref:System.ServiceModel.Dispatcher.ClientRuntime.CallbackDispatchRuntime%2A>  
  
 <span data-ttu-id="c5880-151">Чтобы расширить выполнение клиента WCF через весь клиент WCF, изучите свойства, предоставляемые <xref:System.ServiceModel.Dispatcher.ClientRuntime> класса, чтобы понять, каким путем изменения свойства или путем реализации интерфейса и добавления его к свойству нужную функциональность.</span><span class="sxs-lookup"><span data-stu-id="c5880-151">To extend WCF client execution across an entire WCF client, review the properties available on the <xref:System.ServiceModel.Dispatcher.ClientRuntime> class to see whether modifying a property or implementing an interface and adding it to a property creates the functionality you are seeking.</span></span> <span data-ttu-id="c5880-152">После выбора расширения для построения вставьте это расширение в соответствующее свойство <xref:System.ServiceModel.Dispatcher.ClientRuntime>, реализовав расширение функциональности клиента, которое при вызове обеспечивает доступ к классу <xref:System.ServiceModel.Dispatcher.ClientRuntime>.</span><span class="sxs-lookup"><span data-stu-id="c5880-152">Once you have chosen a particular extension to build, insert your extension into the appropriate <xref:System.ServiceModel.Dispatcher.ClientRuntime> property by implementing a client behavior that provides access to the <xref:System.ServiceModel.Dispatcher.ClientRuntime> class when invoked.</span></span>  
  
 <span data-ttu-id="c5880-153">Объекты пользовательских расширений можно вставлять в коллекцию с помощью расширения функциональности оператора (объекта, реализующего интерфейс <xref:System.ServiceModel.Description.IOperationBehavior>), контракта (объекта, реализующего интерфейс <xref:System.ServiceModel.Description.IContractBehavior>) или конечной точки (объекта, реализующего интерфейс <xref:System.ServiceModel.Description.IEndpointBehavior>).</span><span class="sxs-lookup"><span data-stu-id="c5880-153">You can insert custom extension objects into a collection using an operation behavior (an object that implements <xref:System.ServiceModel.Description.IOperationBehavior>), a contract behavior (an object that implements <xref:System.ServiceModel.Description.IContractBehavior>), or an endpoint behavior (an object that implements <xref:System.ServiceModel.Description.IEndpointBehavior>).</span></span> <span data-ttu-id="c5880-154">Устанавливаемый объект расширения функциональности добавляется в соответствующую коллекцию либо программным образам, либо декларативно (путем реализации пользовательского атрибута), либо путем реализации пользовательского объекта <xref:System.ServiceModel.Configuration.BehaviorExtensionElement>, чтобы сделать возможной вставку расширения функциональности при помощи файла конфигурации приложения.</span><span class="sxs-lookup"><span data-stu-id="c5880-154">The installing behavior object is added to the appropriate collection of behaviors either programmatically, declaratively (by implementing a custom attribute), or by implementing a custom <xref:System.ServiceModel.Configuration.BehaviorExtensionElement> object to enable the behavior to be inserted using an application configuration file.</span></span> <span data-ttu-id="c5880-155">Дополнительные сведения см. в разделе [настройку и расширение среды выполнения с помощью поведений](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md).</span><span class="sxs-lookup"><span data-stu-id="c5880-155">For details, see [Configuring and Extending the Runtime with Behaviors](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md).</span></span>  
  
 <span data-ttu-id="c5880-156">Примеры, демонстрирующие перехват клиентом WCF, см. в разделе [как: Проверка или изменение сообщений на клиенте](../../../../docs/framework/wcf/extending/how-to-inspect-or-modify-messages-on-the-client.md).</span><span class="sxs-lookup"><span data-stu-id="c5880-156">For examples that demonstrate interception across a WCF client, see [How to: Inspect or Modify Messages on the Client](../../../../docs/framework/wcf/extending/how-to-inspect-or-modify-messages-on-the-client.md).</span></span>  
  
### <a name="using-the-clientoperation-class"></a><span data-ttu-id="c5880-157">Использование класса ClientOperation</span><span class="sxs-lookup"><span data-stu-id="c5880-157">Using the ClientOperation Class</span></span>  
 <span data-ttu-id="c5880-158">Класс <xref:System.ServiceModel.Dispatcher.ClientOperation> - это расположение для изменений клиента, вносимых во время выполнения, и точка вставки для пользовательских расширений, применяемых только к одной операции службы.</span><span class="sxs-lookup"><span data-stu-id="c5880-158">The <xref:System.ServiceModel.Dispatcher.ClientOperation> class is the location for client run-time modifications and insertion point for custom extensions that are scoped to only one service operation.</span></span> <span data-ttu-id="c5880-159">(Чтобы изменить поведение клиента во время выполнения для всех сообщений в контракте, используйте класс <xref:System.ServiceModel.Dispatcher.ClientRuntime>.)</span><span class="sxs-lookup"><span data-stu-id="c5880-159">(To modify client run-time behavior for all messages in a contract, use the <xref:System.ServiceModel.Dispatcher.ClientRuntime> class.)</span></span>  
  
 <span data-ttu-id="c5880-160">Используйте свойство <xref:System.ServiceModel.Dispatcher.ClientRuntime.Operations%2A>, чтобы найти объект <xref:System.ServiceModel.Dispatcher.ClientOperation>, который представляет определенную операцию службы.</span><span class="sxs-lookup"><span data-stu-id="c5880-160">Use the <xref:System.ServiceModel.Dispatcher.ClientRuntime.Operations%2A> property to locate the <xref:System.ServiceModel.Dispatcher.ClientOperation> object that represents a particular service operation.</span></span> <span data-ttu-id="c5880-161">Следующие свойства позволяют вставить пользовательские объекты в систему клиента WCF:</span><span class="sxs-lookup"><span data-stu-id="c5880-161">The following properties enable you to insert custom objects into the WCF client system:</span></span>  
  
- <span data-ttu-id="c5880-162">Используйте свойство <xref:System.ServiceModel.Dispatcher.ClientOperation.Formatter%2A> для вставки пользовательской реализации <xref:System.ServiceModel.Dispatcher.IClientMessageFormatter> для операции или изменения текущего модуля форматирования.</span><span class="sxs-lookup"><span data-stu-id="c5880-162">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.Formatter%2A> property to insert a custom <xref:System.ServiceModel.Dispatcher.IClientMessageFormatter> implementation for an operation or modify the current formatter.</span></span>  
  
- <span data-ttu-id="c5880-163">Используйте свойство <xref:System.ServiceModel.Dispatcher.ClientOperation.ParameterInspectors%2A> для вставки пользовательской реализации <xref:System.ServiceModel.Dispatcher.IParameterInspector> или для изменения текущей реализации.</span><span class="sxs-lookup"><span data-stu-id="c5880-163">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.ParameterInspectors%2A> property to insert a custom <xref:System.ServiceModel.Dispatcher.IParameterInspector> implementation or to modify the current one.</span></span>  
  
 <span data-ttu-id="c5880-164">Следующие свойства позволяют изменить систему при взаимодействии с модулем форматирования и пользовательскими инспекторами параметров.</span><span class="sxs-lookup"><span data-stu-id="c5880-164">The following properties enable you to modify the system in interaction with the formatter and custom parameter inspectors:</span></span>  
  
- <span data-ttu-id="c5880-165">Используйте свойство <xref:System.ServiceModel.Dispatcher.ClientOperation.SerializeRequest%2A>, чтобы управлять сериализацией исходящего сообщения.</span><span class="sxs-lookup"><span data-stu-id="c5880-165">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.SerializeRequest%2A> property to control the serialization of an outbound message.</span></span>  
  
- <span data-ttu-id="c5880-166">Используйте свойство <xref:System.ServiceModel.Dispatcher.ClientOperation.DeserializeReply%2A>, чтобы управлять десериализацией входящего сообщения.</span><span class="sxs-lookup"><span data-stu-id="c5880-166">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.DeserializeReply%2A> property to control the deserialization of an inbound message.</span></span>  
  
- <span data-ttu-id="c5880-167">Используйте свойство <xref:System.ServiceModel.Dispatcher.ClientOperation.Action%2A>, чтобы управлять действием WS-Addressing сообщения запроса.</span><span class="sxs-lookup"><span data-stu-id="c5880-167">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.Action%2A> property to control the WS-Addressing action of the request message.</span></span>  
  
- <span data-ttu-id="c5880-168">Используйте <xref:System.ServiceModel.Dispatcher.ClientOperation.BeginMethod%2A> и <xref:System.ServiceModel.Dispatcher.ClientOperation.EndMethod%2A> для указания клиентских методов WCF, которые связаны с асинхронной операцией.</span><span class="sxs-lookup"><span data-stu-id="c5880-168">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.BeginMethod%2A> and <xref:System.ServiceModel.Dispatcher.ClientOperation.EndMethod%2A> to specify which WCF client methods are associated with an asynchronous operation.</span></span>  
  
- <span data-ttu-id="c5880-169">Используйте свойство <xref:System.ServiceModel.Dispatcher.ClientOperation.FaultContractInfos%2A>, чтобы получить коллекцию, содержащую типы, которые могут содержаться в ошибках SOAP в качестве типа сведений.</span><span class="sxs-lookup"><span data-stu-id="c5880-169">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.FaultContractInfos%2A> property to get a collection that contains the types that can appear in SOAP faults as the detail type.</span></span>  
  
- <span data-ttu-id="c5880-170">Используйте свойства <xref:System.ServiceModel.Dispatcher.ClientOperation.IsInitiating%2A> и <xref:System.ServiceModel.Dispatcher.ClientOperation.IsTerminating%2A>, чтобы задать соответственно инициализацию или завершение сеанса при вызове операции.</span><span class="sxs-lookup"><span data-stu-id="c5880-170">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.IsInitiating%2A> and <xref:System.ServiceModel.Dispatcher.ClientOperation.IsTerminating%2A> properties to control whether a session is initiated or is torn down, respectively, when the operation is called.</span></span>  
  
- <span data-ttu-id="c5880-171">Используйте свойство <xref:System.ServiceModel.Dispatcher.ClientOperation.IsOneWay%2A>, чтобы определить, является ли операция односторонней.</span><span class="sxs-lookup"><span data-stu-id="c5880-171">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.IsOneWay%2A> property to control whether the operation is a one-way operation.</span></span>  
  
- <span data-ttu-id="c5880-172">Используйте свойство <xref:System.ServiceModel.Dispatcher.ClientOperation.Parent%2A> для получения родительского объекта <xref:System.ServiceModel.Dispatcher.ClientRuntime>.</span><span class="sxs-lookup"><span data-stu-id="c5880-172">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.Parent%2A> property to obtain the containing <xref:System.ServiceModel.Dispatcher.ClientRuntime> object.</span></span>  
  
- <span data-ttu-id="c5880-173">Используйте свойство <xref:System.ServiceModel.Dispatcher.ClientOperation.Name%2A> для получения имени операции.</span><span class="sxs-lookup"><span data-stu-id="c5880-173">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.Name%2A> property to get the name of the operation.</span></span>  
  
- <span data-ttu-id="c5880-174">Используйте свойство <xref:System.ServiceModel.Dispatcher.ClientOperation.SyncMethod%2A> для определения метода, который сопоставлен операции.</span><span class="sxs-lookup"><span data-stu-id="c5880-174">Use the <xref:System.ServiceModel.Dispatcher.ClientOperation.SyncMethod%2A> property to control which method is mapped to the operation.</span></span>  
  
 <span data-ttu-id="c5880-175">Чтобы расширить выполнение клиента WCF через только к одной операции службы, изучите свойства, предоставляемые <xref:System.ServiceModel.Dispatcher.ClientOperation> класса, чтобы понять, каким путем изменения свойства или путем реализации интерфейса и добавления его к свойству нужную функциональность.</span><span class="sxs-lookup"><span data-stu-id="c5880-175">To extend WCF client execution across only one service operation, review the properties available on the <xref:System.ServiceModel.Dispatcher.ClientOperation> class to see whether modifying a property or implementing an interface and adding it to a property creates the functionality you are seeking.</span></span> <span data-ttu-id="c5880-176">После выбора расширения для построения вставьте это расширение в соответствующее свойство <xref:System.ServiceModel.Dispatcher.ClientOperation>, реализовав расширение функциональности клиента, которое при вызове обеспечивает доступ к классу <xref:System.ServiceModel.Dispatcher.ClientOperation>.</span><span class="sxs-lookup"><span data-stu-id="c5880-176">Once you have chosen a particular extension to build, insert your extension into the appropriate <xref:System.ServiceModel.Dispatcher.ClientOperation> property by implementing a client behavior that provides access to the <xref:System.ServiceModel.Dispatcher.ClientOperation> class when invoked.</span></span> <span data-ttu-id="c5880-177">После этого внутри данного расширения функциональности можно изменить свойство <xref:System.ServiceModel.Dispatcher.ClientRuntime> для удовлетворения необходимых требований.</span><span class="sxs-lookup"><span data-stu-id="c5880-177">Inside that behavior you can then modify the <xref:System.ServiceModel.Dispatcher.ClientRuntime> property to fit your requirements.</span></span>  
  
 <span data-ttu-id="c5880-178">Обычно реализации расширения функциональности операции (объекта, реализующего интерфейс <xref:System.ServiceModel.Description.IOperationBehavior>) бывает достаточно, но для достижения такого же результата можно также воспользоваться расширениями функциональности конечных точек и контрактов, найдя объект <xref:System.ServiceModel.Description.OperationDescription> для конкретной операции и прикрепив к нему расширение функциональности.</span><span class="sxs-lookup"><span data-stu-id="c5880-178">Typically, implementing an operation behavior (an object that implements the <xref:System.ServiceModel.Description.IOperationBehavior> interface) suffices, but you can also use endpoint behaviors and contract behaviors to accomplish the same thing by locating the <xref:System.ServiceModel.Description.OperationDescription> for a particular operation and attaching the behavior there.</span></span> <span data-ttu-id="c5880-179">Дополнительные сведения см. в разделе [настройку и расширение среды выполнения с помощью поведений](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md).</span><span class="sxs-lookup"><span data-stu-id="c5880-179">For details, see [Configuring and Extending the Runtime with Behaviors](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md).</span></span>  
  
 <span data-ttu-id="c5880-180">Чтобы использовать пользовательское расширение функциональности на этапе конфигурации, установите его с использованием обработчика раздела конфигурации пользовательского расширения функциональности.</span><span class="sxs-lookup"><span data-stu-id="c5880-180">To use your custom behavior from configuration, install your behavior using a custom behavior configuration section handler.</span></span> <span data-ttu-id="c5880-181">Его также можно установить путем создания пользовательского атрибута.</span><span class="sxs-lookup"><span data-stu-id="c5880-181">You can also install your behavior by creating a custom attribute.</span></span>  
  
 <span data-ttu-id="c5880-182">Примеры, демонстрирующие перехват клиентом WCF, см. в разделе [как: Проверка или изменение параметров](../../../../docs/framework/wcf/extending/how-to-inspect-or-modify-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="c5880-182">For examples that demonstrate interception across a WCF client, see [How to: Inspect or Modify Parameters](../../../../docs/framework/wcf/extending/how-to-inspect-or-modify-parameters.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c5880-183">См. также</span><span class="sxs-lookup"><span data-stu-id="c5880-183">See also</span></span>

- <xref:System.ServiceModel.Dispatcher.ClientRuntime>
- <xref:System.ServiceModel.Dispatcher.ClientOperation>
- [<span data-ttu-id="c5880-184">Практическое руководство. Проверка или изменение сообщений на стороне клиента</span><span class="sxs-lookup"><span data-stu-id="c5880-184">How to: Inspect or Modify Messages on the Client</span></span>](../../../../docs/framework/wcf/extending/how-to-inspect-or-modify-messages-on-the-client.md)
- [<span data-ttu-id="c5880-185">Практическое руководство. Проверка или изменение параметров</span><span class="sxs-lookup"><span data-stu-id="c5880-185">How to: Inspect or Modify Parameters</span></span>](../../../../docs/framework/wcf/extending/how-to-inspect-or-modify-parameters.md)
