---
title: Экспорт пользовательских метаданных для расширения WCF
ms.date: 03/30/2017
ms.assetid: 53c93882-f8ba-4192-965b-787b5e3f09c0
ms.openlocfilehash: 5107e4d079a51ee94d59aa872c8a4c74f229ea8a
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2019
ms.locfileid: "59201251"
---
# <a name="exporting-custom-metadata-for-a-wcf-extension"></a><span data-ttu-id="fa24f-102">Экспорт пользовательских метаданных для расширения WCF</span><span class="sxs-lookup"><span data-stu-id="fa24f-102">Exporting Custom Metadata for a WCF Extension</span></span>
<span data-ttu-id="fa24f-103">В Windows Communication Foundation (WCF), экспорта метаданных — это процесс описания конечных точек службы и проецирования их в параллельное, стандартизованное представление, клиенты могут использовать, чтобы понять, как использовать службу.</span><span class="sxs-lookup"><span data-stu-id="fa24f-103">In Windows Communication Foundation (WCF), metadata export is the process of describing service endpoints and projecting them into a parallel, standardized representation that clients can use to understand how to use the service.</span></span> <span data-ttu-id="fa24f-104">Пользовательские метаданные состоят из элементов XML, которые не могут быть экспортированы с помощью средств экспорта метаданных, предоставляемых системой.</span><span class="sxs-lookup"><span data-stu-id="fa24f-104">Custom metadata consists of XML elements that the system-provided metadata exporters cannot export.</span></span> <span data-ttu-id="fa24f-105">Обычно сюда входят пользовательские элементы WSDL для определенных пользователем поведений, элементов привязки и утверждений политики о возможностях и требованиях привязок и контрактов.</span><span class="sxs-lookup"><span data-stu-id="fa24f-105">Typically, this includes custom WSDL elements for user-defined behaviors and binding elements and policy assertions about the capabilities and requirements of bindings and contracts.</span></span>  
  
 <span data-ttu-id="fa24f-106">В этом разделе описано, как экспортировать пользовательские элементы WSDL и утверждения политики, но при этом не рассматривается сам процесс экспорта.</span><span class="sxs-lookup"><span data-stu-id="fa24f-106">This section describes exporting custom WSDL or policy assertions, and does not focus on the exporting process itself.</span></span> <span data-ttu-id="fa24f-107">Дополнительные сведения о том, как использовать типы, которые экспортируют и импортируют метаданные независимо от того, являются ли они пользовательскими или созданными системой, см. в разделе [Экспорт и импорт метаданных](../../../../docs/framework/wcf/feature-details/exporting-and-importing-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="fa24f-107">For more information about how to use the types that export and import metadata regardless of whether the metadata is custom or system-constructed, see [Exporting and Importing Metadata](../../../../docs/framework/wcf/feature-details/exporting-and-importing-metadata.md).</span></span>  
  
## <a name="overview"></a><span data-ttu-id="fa24f-108">Обзор</span><span class="sxs-lookup"><span data-stu-id="fa24f-108">Overview</span></span>  
 <span data-ttu-id="fa24f-109">При публикации метаданных с помощью <xref:System.ServiceModel.Description.ServiceMetadataBehavior?displayProperty=nameWithType>, <xref:System.ServiceModel.Description.ServiceDescription?displayProperty=nameWithType> исследуется и XSD и WSDL--включая утверждения политики--создаются для всех контрактов и привязок, поддерживаемых WCF с помощью предоставляемых системой атрибутов и привязок.</span><span class="sxs-lookup"><span data-stu-id="fa24f-109">When metadata is published using the <xref:System.ServiceModel.Description.ServiceMetadataBehavior?displayProperty=nameWithType>, the <xref:System.ServiceModel.Description.ServiceDescription?displayProperty=nameWithType> is examined and XSD and WSDL -- including policy assertions -- are generated for all contracts and bindings that WCF can support using system-provided attributes and bindings.</span></span> <span data-ttu-id="fa24f-110">Однако для правильного экспорта пользовательских атрибутов поведения или элементов привязки требуется их поддержка.</span><span class="sxs-lookup"><span data-stu-id="fa24f-110">However, custom behavior attributes or binding elements require support before they can be exported properly.</span></span>  
  
 <span data-ttu-id="fa24f-111">В данном разделе рассматриваются следующие вопросы.</span><span class="sxs-lookup"><span data-stu-id="fa24f-111">This section describes:</span></span>  
  
1.  <span data-ttu-id="fa24f-112">Реализация и использование интерфейса <xref:System.ServiceModel.Description.IWsdlExportExtension?displayProperty=nameWithType>, который предоставляет данные создания WSDL перед публикацией WSDL.</span><span class="sxs-lookup"><span data-stu-id="fa24f-112">How to implement and use the <xref:System.ServiceModel.Description.IWsdlExportExtension?displayProperty=nameWithType> interface, which exposes the WSDL generation data to you prior to publishing the WSDL.</span></span>  
  
2.  <span data-ttu-id="fa24f-113">Реализация и использование интерфейса <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType>, который предоставляет данные политики для экспорта утверждений политики в данные WSDL.</span><span class="sxs-lookup"><span data-stu-id="fa24f-113">How to implement and use the <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType> interface, which exposes the policy data to you prior to exporting the policy assertions in WSDL data.</span></span>  
  
 <span data-ttu-id="fa24f-114">Дополнительные сведения об импорте пользовательского языка WSDL и утверждений политики см. в разделе [Импорт пользовательских метаданных для расширения WCF](../../../../docs/framework/wcf/extending/importing-custom-metadata-for-a-wcf-extension.md).</span><span class="sxs-lookup"><span data-stu-id="fa24f-114">For more information about importing custom WSDL and policy assertions, see [Importing Custom Metadata for a WCF Extension](../../../../docs/framework/wcf/extending/importing-custom-metadata-for-a-wcf-extension.md).</span></span>  
  
## <a name="exporting-custom-wsdl-elements"></a><span data-ttu-id="fa24f-115">Экспорт пользовательских элементов WSDL</span><span class="sxs-lookup"><span data-stu-id="fa24f-115">Exporting Custom WSDL Elements</span></span>  
 <span data-ttu-id="fa24f-116">Реализуйте <xref:System.ServiceModel.Description.IWsdlExportExtension> в поведении операции, поведении контракта, поведении конечной точки или элементе привязки (<xref:System.ServiceModel.Description.IOperationBehavior>, <xref:System.ServiceModel.Description.IContractBehavior>, <xref:System.ServiceModel.Description.IEndpointBehavior> или <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> соответственно) и вставьте эти поведения или элементы привязки в описание службы, которую требуется экспортировать.</span><span class="sxs-lookup"><span data-stu-id="fa24f-116">Implement the <xref:System.ServiceModel.Description.IWsdlExportExtension> on an operation behavior, contract behavior, endpoint behavior or binding element (<xref:System.ServiceModel.Description.IOperationBehavior>, <xref:System.ServiceModel.Description.IContractBehavior>, <xref:System.ServiceModel.Description.IEndpointBehavior>, or <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> respectively) and insert the behaviors or binding elements into the description of the service that you are trying to export.</span></span> <span data-ttu-id="fa24f-117">(Дополнительные сведения о вставке поведений см. в разделе [настройку и расширение среды выполнения с помощью поведений](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md)).</span><span class="sxs-lookup"><span data-stu-id="fa24f-117">(For more information about inserting behaviors, see [Configuring and Extending the Runtime with Behaviors](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md)).</span></span> <span data-ttu-id="fa24f-118">Для каждой конечной точки вызывается метод <xref:System.ServiceModel.Description.IWsdlExportExtension>, и каждая конечная точка сначала экспортирует контракт, если он еще не был экспортирован.</span><span class="sxs-lookup"><span data-stu-id="fa24f-118">The <xref:System.ServiceModel.Description.IWsdlExportExtension> is called for each endpoint and each endpoint exports the contract first if it has not already been exported.</span></span> <span data-ttu-id="fa24f-119">Можно принять участие в любом процессе экспорта, в зависимости от потребностей:</span><span class="sxs-lookup"><span data-stu-id="fa24f-119">You can participate in either export process, depending upon your needs:</span></span>  
  
-   <span data-ttu-id="fa24f-120">Используйте <xref:System.ServiceModel.Description.WsdlContractConversionContext> для изменения экспортированных метаданных в методе <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A>.</span><span class="sxs-lookup"><span data-stu-id="fa24f-120">Use the <xref:System.ServiceModel.Description.WsdlContractConversionContext> to modify the exported metadata in the <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> method.</span></span>  
  
-   <span data-ttu-id="fa24f-121">Используйте <xref:System.ServiceModel.Description.WsdlEndpointConversionContext> для изменения экспортированных метаданных для конечной точки в методе <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportEndpoint%2A>.</span><span class="sxs-lookup"><span data-stu-id="fa24f-121">Use the <xref:System.ServiceModel.Description.WsdlEndpointConversionContext> to modify the exported metadata for the endpoint in the <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportEndpoint%2A> method.</span></span>  
  
 <span data-ttu-id="fa24f-122">Метод <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> вызывается для всех реализаций <xref:System.ServiceModel.Description.IWsdlExportExtension> в экспортируемом экземпляре <xref:System.ServiceModel.Description.ContractDescription?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="fa24f-122">The <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> method is called on all <xref:System.ServiceModel.Description.IWsdlExportExtension> implementations within the <xref:System.ServiceModel.Description.ContractDescription?displayProperty=nameWithType> instance that is being exported.</span></span>  <span data-ttu-id="fa24f-123">Метод <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportEndpoint%2A> вызывается для всех реализаций <xref:System.ServiceModel.Description.IWsdlExportExtension> с экспортируемым экземпляром <xref:System.ServiceModel.Description.ServiceEndpoint?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="fa24f-123">The <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportEndpoint%2A> method is called on all <xref:System.ServiceModel.Description.IWsdlExportExtension> implementations with the <xref:System.ServiceModel.Description.ServiceEndpoint?displayProperty=nameWithType> instance that is being exported.</span></span>  
  
 <span data-ttu-id="fa24f-124">Дополнительные сведения см. в разделе [Как Экспорт WSDL пользовательских](../../../../docs/framework/wcf/extending/how-to-export-custom-wsdl.md) образец [публикация WSDL пользовательских](../../../../docs/framework/wcf/samples/custom-wsdl-publication.md).</span><span class="sxs-lookup"><span data-stu-id="fa24f-124">For more information, see [How to: Export Custom WSDL](../../../../docs/framework/wcf/extending/how-to-export-custom-wsdl.md) and the sample [Custom WSDL Publication](../../../../docs/framework/wcf/samples/custom-wsdl-publication.md).</span></span>  
  
## <a name="exporting-custom-policy-assertions"></a><span data-ttu-id="fa24f-125">Экспорт утверждений пользовательской политики</span><span class="sxs-lookup"><span data-stu-id="fa24f-125">Exporting Custom Policy Assertions</span></span>  
 <span data-ttu-id="fa24f-126">Реализуйте <xref:System.ServiceModel.Description.IPolicyExportExtension> в <xref:System.ServiceModel.Channels.BindingElement> и добавьте в привязку этот элемент привязки, чтобы записать в WSDL утверждения пользовательской политики о поддержке привязки и возможностях контракта.</span><span class="sxs-lookup"><span data-stu-id="fa24f-126">Implement the <xref:System.ServiceModel.Description.IPolicyExportExtension> on a <xref:System.ServiceModel.Channels.BindingElement> and add the binding element to the binding to write custom policy assertions about binding support and contract capabilities into the WSDL.</span></span> <span data-ttu-id="fa24f-127">Метод <xref:System.ServiceModel.Description.IPolicyExportExtension> вызывается один раз при экспорте реализованного элемента привязки в привязке и передает <xref:System.ServiceModel.Description.PolicyConversionContext> в метод <xref:System.ServiceModel.Description.IPolicyExportExtension.ExportPolicy%2A>.</span><span class="sxs-lookup"><span data-stu-id="fa24f-127">The <xref:System.ServiceModel.Description.IPolicyExportExtension> is called once when exporting the implemented binding element in a binding and passes the <xref:System.ServiceModel.Description.PolicyConversionContext> to the <xref:System.ServiceModel.Description.IPolicyExportExtension.ExportPolicy%2A> method.</span></span> <span data-ttu-id="fa24f-128">Эти методы можно использовать для экземпляра <xref:System.ServiceModel.Description.PolicyConversionContext>, чтобы добавить утверждения политики, присоединенные к привязке WSDL в субъектах сообщения, операции или конечной точки.</span><span class="sxs-lookup"><span data-stu-id="fa24f-128">You can use the methods on the <xref:System.ServiceModel.Description.PolicyConversionContext> instance to add to the policy assertions attached to the WSDL binding at the message, operation or endpoint subjects.</span></span>  
  
 <span data-ttu-id="fa24f-129">Дополнительные сведения см. в разделе [Как Экспорт утверждений пользовательской политики](../../../../docs/framework/wcf/extending/how-to-export-custom-policy-assertions.md).</span><span class="sxs-lookup"><span data-stu-id="fa24f-129">For more information, see [How to: Export Custom Policy Assertions](../../../../docs/framework/wcf/extending/how-to-export-custom-policy-assertions.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fa24f-130">См. также</span><span class="sxs-lookup"><span data-stu-id="fa24f-130">See also</span></span>

- [<span data-ttu-id="fa24f-131">Практическое руководство. Экспорт пользовательской информации WSDL</span><span class="sxs-lookup"><span data-stu-id="fa24f-131">How to: Export Custom WSDL</span></span>](../../../../docs/framework/wcf/extending/how-to-export-custom-wsdl.md)
- [<span data-ttu-id="fa24f-132">Практическое руководство. Экспорт проверочных утверждений пользовательской политики</span><span class="sxs-lookup"><span data-stu-id="fa24f-132">How to: Export Custom Policy Assertions</span></span>](../../../../docs/framework/wcf/extending/how-to-export-custom-policy-assertions.md)
- [<span data-ttu-id="fa24f-133">Импорт пользовательских метаданных для расширения WCF</span><span class="sxs-lookup"><span data-stu-id="fa24f-133">Importing Custom Metadata for a WCF Extension</span></span>](../../../../docs/framework/wcf/extending/importing-custom-metadata-for-a-wcf-extension.md)
