---
title: Новые возможности в Windows Communication Foundation 4.5
ms.date: 03/30/2017
helpviewer_keywords:
- WCF [WCF], what's new
- Windows Communication Foundation [WCF], what's new
ms.assetid: 7e93fe73-af93-46b5-9f63-32f761ee40cf
ms.openlocfilehash: e01b3a39a004e963e5bb66c5fa71433cb4e7204a
ms.sourcegitcommit: 32a575bf4adccc901f00e264f92b759ced633379
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/04/2019
ms.locfileid: "74802379"
---
# <a name="whats-new-in-windows-communication-foundation-45"></a><span data-ttu-id="508af-102">Новые возможности в Windows Communication Foundation 4.5</span><span class="sxs-lookup"><span data-stu-id="508af-102">What's New in Windows Communication Foundation 4.5</span></span>

<span data-ttu-id="508af-103">В этом разделе обсуждаются новые функции Windows Communication Foundation (WCF) версии 4,5.</span><span class="sxs-lookup"><span data-stu-id="508af-103">This topic discusses features new to Windows Communication Foundation (WCF) version 4.5.</span></span>

## <a name="wcf-simplification-features"></a><span data-ttu-id="508af-104">Возможности упрощения WCF</span><span class="sxs-lookup"><span data-stu-id="508af-104">WCF Simplification Features</span></span>

<span data-ttu-id="508af-105">Много работы было посвящено тому, чтобы сделать разработку и поддержку приложений WCF 4.5 более легкой.</span><span class="sxs-lookup"><span data-stu-id="508af-105">Much work has been done to make WCF 4.5 applications easier to develop and maintain.</span></span> <span data-ttu-id="508af-106">Дополнительные сведения см. в разделе [функции упрощения WCF](wcf-simplification-features.md).</span><span class="sxs-lookup"><span data-stu-id="508af-106">For more information, see [WCF Simplification Features](wcf-simplification-features.md).</span></span>

### <a name="task-based-async-support"></a><span data-ttu-id="508af-107">Поддержка асинхронного выполнения задач</span><span class="sxs-lookup"><span data-stu-id="508af-107">Task-based Async Support</span></span>

<span data-ttu-id="508af-108">По умолчанию команда добавления ссылки на службу формирует методы асинхронных операций службы, возвращающие объекты задач.</span><span class="sxs-lookup"><span data-stu-id="508af-108">By default, Add Service Reference generates Task-returning async service operation methods.</span></span> <span data-ttu-id="508af-109">Это выполняется как для синхронных, так и для асинхронных методов.</span><span class="sxs-lookup"><span data-stu-id="508af-109">This is done for both synchronous and asynchronous methods.</span></span> <span data-ttu-id="508af-110">Это позволяет вызывать операции службы асинхронно, используя новую модель асинхронного программирования на основе задач.</span><span class="sxs-lookup"><span data-stu-id="508af-110">This allows you to call the service operations asynchronously using the new Task based async programming model.</span></span> <span data-ttu-id="508af-111">При вызове сформированного прокси-метода WCF создает объект задачи, представляющий асинхронную операцию, и возвращает ее.</span><span class="sxs-lookup"><span data-stu-id="508af-111">When you call the generated proxy method, WCF constructs a Task object to represent the asynchronous operation and returns that Task to you.</span></span> <span data-ttu-id="508af-112">Задача завершается после завершения операции.</span><span class="sxs-lookup"><span data-stu-id="508af-112">The Task completes when the operation completes.</span></span> <span data-ttu-id="508af-113">При реализации асинхронной операции ее можно реализовать как асинхронную операцию на основе задач.</span><span class="sxs-lookup"><span data-stu-id="508af-113">When implementing an async operation you can implement it as a task-based async operation.</span></span> <span data-ttu-id="508af-114">Дополнительные сведения см. в разделе [синхронные и асинхронные операции](synchronous-and-asynchronous-operations.md).</span><span class="sxs-lookup"><span data-stu-id="508af-114">For more information see, [Synchronous and Asynchronous Operations](synchronous-and-asynchronous-operations.md).</span></span>

### <a name="simplified-generated-configuration-files"></a><span data-ttu-id="508af-115">Упрощенные сформированные файлы конфигурации</span><span class="sxs-lookup"><span data-stu-id="508af-115">Simplified Generated Configuration Files</span></span>

<span data-ttu-id="508af-116">Клиентский файл конфигурации создается при добавлении ссылки на службу в Visual Studio или при использовании средства SvcUtil.exe.</span><span class="sxs-lookup"><span data-stu-id="508af-116">When you add a service reference in Visual Studio or use the SvcUtil.exe tool, a client configuration file is generated.</span></span> <span data-ttu-id="508af-117">В предыдущих версиях WCF эти файлы конфигурации содержали значения каждого свойства привязки, даже если значение было значением по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="508af-117">In previous versions of WCF these configuration files contained the value of every binding property even if its value is the default value.</span></span> <span data-ttu-id="508af-118">В WCF 4.5 сформированные файлы конфигурации содержат только те свойства привязки, которым присвоено значение не по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="508af-118">In WCF 4.5 the generated configuration files contain only those binding properties that are set to a non-default value.</span></span>

<span data-ttu-id="508af-119">Дополнительные сведения см. в разделе [функции упрощения WCF](wcf-simplification-features.md).</span><span class="sxs-lookup"><span data-stu-id="508af-119">For more information, see [WCF Simplification Features](wcf-simplification-features.md).</span></span>

### <a name="contract-first-development"></a><span data-ttu-id="508af-120">Разработка в соответствии с парадигмой «Сначала контракт»</span><span class="sxs-lookup"><span data-stu-id="508af-120">Contract-First Development</span></span>

<span data-ttu-id="508af-121">WCF теперь поддерживает разработку в соответствии с парадигмой «Сначала контракт».</span><span class="sxs-lookup"><span data-stu-id="508af-121">WCF now has support for contract-first development.</span></span> <span data-ttu-id="508af-122">Svcutil. exe имеет параметр/Сервицеконтракт, который позволяет создавать контракты служб и данных из документа WSDL.</span><span class="sxs-lookup"><span data-stu-id="508af-122">The svcutil.exe has a /serviceContract switch which allows you to generate service and data contracts from a WSDL document.</span></span>

### <a name="add-service-reference-from-a-portable-subset-project"></a><span data-ttu-id="508af-123">Добавление ссылки на службу из проекта переносимого подмножества</span><span class="sxs-lookup"><span data-stu-id="508af-123">Add Service Reference from a Portable Subset Project</span></span>

<span data-ttu-id="508af-124">Проекты переносимого подмножества позволяют программистам, создающим сборки .NET, поддерживать одно дерево исходного кода и создавать сборки, одновременно поддерживая несколько платформ .NET (настольные приложения, Silverlight, Windows Phone и XBOX).</span><span class="sxs-lookup"><span data-stu-id="508af-124">Portable subset projects enable .NET assembly programmers to maintain a single source tree and build system while still supporting multiple .NET platforms (desktop, Silverlight, Windows Phone, and XBOX).</span></span> <span data-ttu-id="508af-125">Переносимые проекты подмножества ссылаются только на переносимые библиотеки .NET, которые являются сборкой .NET Framework, которую можно использовать на любой платформе .NET.</span><span class="sxs-lookup"><span data-stu-id="508af-125">Portable subset projects only reference .NET portable libraries which are a .NET framework assembly that can be used on any .NET platform.</span></span> <span data-ttu-id="508af-126">Процесс добавления такой же, как и при добавлении ссылки на службу в рамках любого другого клиентского приложения WCF.</span><span class="sxs-lookup"><span data-stu-id="508af-126">The developer experience is the same as adding a service reference within any other WCF client application.</span></span> <span data-ttu-id="508af-127">Дополнительные сведения см. [в разделе Добавление ссылки на службу в проекте переносимого подмножества](add-service-reference-in-a-portable-subset-project.md).</span><span class="sxs-lookup"><span data-stu-id="508af-127">For more information, see [Add Service Reference in a Portable Subset Project](add-service-reference-in-a-portable-subset-project.md).</span></span>

### <a name="aspnet-compatibility-mode-default-changed"></a><span data-ttu-id="508af-128">Изменились значения по умолчанию для режима совместимости с ASP.NET</span><span class="sxs-lookup"><span data-stu-id="508af-128">ASP.NET Compatibility Mode Default Changed</span></span>

<span data-ttu-id="508af-129">WCF предоставляет режим совместимости с ASP.NET, дающий разработчикам при создании служб WCF полный доступ к функциям HTTP-конвейера ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="508af-129">WCF provides ASP.NET compatibility mode to grant developers full access to the features in the ASP.NET HTTP pipeline when writing WCF services.</span></span> <span data-ttu-id="508af-130">Чтобы использовать этот режим, необходимо присвоить атрибуту `aspNetCompatibilityEnabled` значение true в разделе [\<serviceHostingEnvironment >](../configure-apps/file-schema/wcf/servicehostingenvironment.md) файла Web. config. Кроме того, любая служба в этом appDomain должна иметь свойство `RequirementsMode` в своем <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute>е, для которого задано значение <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed> или <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Required>.</span><span class="sxs-lookup"><span data-stu-id="508af-130">To use this mode, you must set the `aspNetCompatibilityEnabled` attribute to true in the [\<serviceHostingEnvironment>](../configure-apps/file-schema/wcf/servicehostingenvironment.md) section of web.config. Additionally, any service in this appDomain needs to have the `RequirementsMode` property on its <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> set to <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed> or <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Required>.</span></span> <span data-ttu-id="508af-131">По умолчанию <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> теперь имеет значение <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed>.</span><span class="sxs-lookup"><span data-stu-id="508af-131">By default <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> is now set to <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed>.</span></span> <span data-ttu-id="508af-132">Дополнительные сведения см. в разделе [WCF Services and ASP.NET](./feature-details/wcf-services-and-aspnet.md).</span><span class="sxs-lookup"><span data-stu-id="508af-132">For more information, see [WCF Services and ASP.NET](./feature-details/wcf-services-and-aspnet.md).</span></span>

### <a name="new-transport-default-values"></a><span data-ttu-id="508af-133">Новые значения по умолчанию для свойств транспорта</span><span class="sxs-lookup"><span data-stu-id="508af-133">New Transport Default Values</span></span>

<span data-ttu-id="508af-134">Для упрощения настройки были изменены несколько значений по умолчанию для свойств транспорта.</span><span class="sxs-lookup"><span data-stu-id="508af-134">In order to simplify configuration a number of transport property default values have changed.</span></span> <span data-ttu-id="508af-135">Дополнительные сведения см. в разделе [функции упрощения WCF](wcf-simplification-features.md).</span><span class="sxs-lookup"><span data-stu-id="508af-135">For more information, see [WCF Simplification Features](wcf-simplification-features.md).</span></span>

### <a name="xmldictionaryreaderquotas"></a><span data-ttu-id="508af-136">XmlDictionaryReaderQuotas</span><span class="sxs-lookup"><span data-stu-id="508af-136">XmlDictionaryReaderQuotas</span></span>

<span data-ttu-id="508af-137"><xref:System.Xml.XmlDictionaryReaderQuotas> содержит настраиваемые значения квот для средств чтения словаря XML, которые ограничивают объем памяти, используемый кодировщиком при создании сообщения.</span><span class="sxs-lookup"><span data-stu-id="508af-137"><xref:System.Xml.XmlDictionaryReaderQuotas> contains configurable quota values for XML dictionary readers which limit the amount of memory utilized by an encoder while creating a message.</span></span> <span data-ttu-id="508af-138">Хотя эти квоты и можно изменить, значения по умолчанию были изменены для уменьшения вероятности явной настройки разработчиками этих данных.</span><span class="sxs-lookup"><span data-stu-id="508af-138">While these quotas are configurable, the default values have changed to lessen the possibility that a developer will have to set them explicitly.</span></span> <span data-ttu-id="508af-139">Дополнительные сведения см. в разделе [функции упрощения WCF](wcf-simplification-features.md).</span><span class="sxs-lookup"><span data-stu-id="508af-139">For more information, see [WCF Simplification Features](wcf-simplification-features.md).</span></span>

### <a name="wcf-configuration-validation"></a><span data-ttu-id="508af-140">Проверка конфигурации WCF</span><span class="sxs-lookup"><span data-stu-id="508af-140">WCF Configuration Validation</span></span>

<span data-ttu-id="508af-141">В ходе выполнения процесса сборки в Visual Studio теперь выполняется проверка файлов конфигурации WCF на наличие атрибутов, заданных в проекте.</span><span class="sxs-lookup"><span data-stu-id="508af-141">As part of the build process within Visual Studio, WCF configuration files are now validated for attributes defined within the project.</span></span> <span data-ttu-id="508af-142">Если проверка завершается с ошибкой, то в Visual Studio отображается список ошибок и предупреждений.</span><span class="sxs-lookup"><span data-stu-id="508af-142">A list of validation errors or warnings is displayed in Visual Studio if the validation fails.</span></span>

### <a name="xml-editor-tooltips"></a><span data-ttu-id="508af-143">Подсказки в редакторе XML</span><span class="sxs-lookup"><span data-stu-id="508af-143">XML Editor Tooltips</span></span>

<span data-ttu-id="508af-144">В XML-редакторе Visual Studio отображаются подсказки для каждого элемента конфигурации (и его свойств), входящего в файл конфигурации службы. Это облегчает работу разработчиков по конфигурации WCF-служб.</span><span class="sxs-lookup"><span data-stu-id="508af-144">In order to help new and existing WCF service developers to configure their services, the Visual Studio XML editor now provides tooltips for every configuration element and its properties that is part of the service configuration file.</span></span>

## <a name="streaming-improvements"></a><span data-ttu-id="508af-145">Улучшения в потоковой передаче данных</span><span class="sxs-lookup"><span data-stu-id="508af-145">Streaming Improvements</span></span>

<span data-ttu-id="508af-146">Добавлена поддержка истинной асинхронной потоковой передачи, когда отправляющая сторона не блокирует потоки в случае, если принимающая сторона не считывает или считывает медленно, таким образом увеличивая масштабируемость решений.</span><span class="sxs-lookup"><span data-stu-id="508af-146">Added support for true asynchronous streaming where the send side now does not block threads if the receive side is not reading or slow in reading thereby increasing scalability.</span></span> <span data-ttu-id="508af-147">Снято ограничение буферизации сообщений, когда клиент отправляет потоковое сообщение службе WCF, размещенной на веб-сервере служб IIS.</span><span class="sxs-lookup"><span data-stu-id="508af-147">Removed the limitation of message buffering when a client sends a streamed message to an IIS hosted WCF service.</span></span> <span data-ttu-id="508af-148">Дополнительные сведения см. в разделе [функции упрощения WCF](wcf-simplification-features.md).</span><span class="sxs-lookup"><span data-stu-id="508af-148">For more information, see [WCF Simplification Features](wcf-simplification-features.md).</span></span>

## <a name="simplifying-exposing-an-endpoint-over-https-with-iis"></a><span data-ttu-id="508af-149">Упрощено предоставление доступа к конечной точке по протоколу HTTPS в службах IIS</span><span class="sxs-lookup"><span data-stu-id="508af-149">Simplifying Exposing an Endpoint Over HTTPS with IIS</span></span>

<span data-ttu-id="508af-150">Было добавлено сопоставление протокола HTTPS для упрощения предоставления доступа к конечной точке по протоколу HTTPS.</span><span class="sxs-lookup"><span data-stu-id="508af-150">An HTTPS protocol mapping has been added to simplify exposing an endpoint over HTTPS.</span></span> <span data-ttu-id="508af-151">Чтобы включить конечную точку HTTPS, убедитесь, что веб-сайт имеет привязку HTTPS и настроенный SSL-сертификат, а затем просто включите HTTPS для виртуального каталога, в котором размещается служба.</span><span class="sxs-lookup"><span data-stu-id="508af-151">To enable an HTTPS endpoint, ensure your website has an HTTPS binding and SSL certificate configured, and then simply enable HTTPS for the virtual directory that hosts the service.</span></span> <span data-ttu-id="508af-152">Если для службы включены метаданные, то доступ к ней будет также предоставлен по протоколу HTTPS.</span><span class="sxs-lookup"><span data-stu-id="508af-152">If metadata is enabled for the service, it will be exposed over HTTPS as well.</span></span>

## <a name="generating-a-single-wsdl-document"></a><span data-ttu-id="508af-153">Создание одного документа WSDL</span><span class="sxs-lookup"><span data-stu-id="508af-153">Generating a Single WSDL Document</span></span>

<span data-ttu-id="508af-154">Некоторые стеки обработки WSDL от сторонних производителей не могут обрабатывать документы WSDL, которые имеют зависимости от других документов посредством xsd:import.</span><span class="sxs-lookup"><span data-stu-id="508af-154">Some third-party WSDL processing stacks are not able to process WSDL documents that have dependencies on other documents through a xsd:import.</span></span> <span data-ttu-id="508af-155">WCF теперь позволяет указывать, что все данные WSDL должны быть возвращены в одном документе.</span><span class="sxs-lookup"><span data-stu-id="508af-155">WCF now allows you to specify that all WSDL information be returned in a single document.</span></span> <span data-ttu-id="508af-156">Чтобы запросить один документ WSDL, добавьте "? Синглевсдл" в универсальный код ресурса (URI) при запросе метаданных из службы.</span><span class="sxs-lookup"><span data-stu-id="508af-156">To request a single WSDL document append "?singleWSDL" to the URI when requesting metadata from the service.</span></span>

## <a name="websocket-support"></a><span data-ttu-id="508af-157">Поддержка WebSocket</span><span class="sxs-lookup"><span data-stu-id="508af-157">WebSocket Support</span></span>

<span data-ttu-id="508af-158">WebSockets - это технология, которая обеспечивает истинный двусторонний обмен сообщениями по портам 80 и 443, имеющий характеристики производительности, схожие с протоколом TCP.</span><span class="sxs-lookup"><span data-stu-id="508af-158">WebSockets is a technology that provides true bidirectional communication over ports 80 and 443 with performance characteristics similar to TCP.</span></span> <span data-ttu-id="508af-159">Были добавлены две привязки для поддержки обмена данными через транспорт WebSocket.</span><span class="sxs-lookup"><span data-stu-id="508af-159">Two new bindings have been added to support communication over a WebSocket transport.</span></span> <span data-ttu-id="508af-160"><xref:System.ServiceModel.NetHttpBinding> и <xref:System.ServiceModel.NetHttpsBinding>.</span><span class="sxs-lookup"><span data-stu-id="508af-160"><xref:System.ServiceModel.NetHttpBinding> and <xref:System.ServiceModel.NetHttpsBinding>.</span></span> <span data-ttu-id="508af-161">Дополнительные сведения см. в разделе [привязки, предоставляемые системой](system-provided-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="508af-161">For more information see: [System-Provided Bindings](system-provided-bindings.md).</span></span>

## <a name="new-transport-default-values"></a><span data-ttu-id="508af-162">Новые значения по умолчанию для свойств транспорта</span><span class="sxs-lookup"><span data-stu-id="508af-162">New Transport Default Values</span></span>

<span data-ttu-id="508af-163">В следующей таблице описываются измененные настройки и разделы, в которых можно найти дополнительные сведения.</span><span class="sxs-lookup"><span data-stu-id="508af-163">The following table describes the settings that have changed and where to find additional information.</span></span>

|<span data-ttu-id="508af-164">свойство;</span><span class="sxs-lookup"><span data-stu-id="508af-164">Property</span></span>|<span data-ttu-id="508af-165">On</span><span class="sxs-lookup"><span data-stu-id="508af-165">On</span></span>|<span data-ttu-id="508af-166">Новое значение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="508af-166">New Default</span></span>|<span data-ttu-id="508af-167">Дополнительные сведения см. в разделе .</span><span class="sxs-lookup"><span data-stu-id="508af-167">For more information see</span></span>|
|--------------|--------|-----------------|------------------------------|
|<span data-ttu-id="508af-168">channelInitializationTimeout</span><span class="sxs-lookup"><span data-stu-id="508af-168">channelInitializationTimeout</span></span>|<xref:System.ServiceModel.NetTcpBinding>|<span data-ttu-id="508af-169">30 секунд</span><span class="sxs-lookup"><span data-stu-id="508af-169">30 seconds</span></span>|<xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.ChannelInitializationTimeout%2A>|
|<span data-ttu-id="508af-170">listenBacklog</span><span class="sxs-lookup"><span data-stu-id="508af-170">listenBacklog</span></span>|<xref:System.ServiceModel.NetTcpBinding>|<span data-ttu-id="508af-171">12 \* количество процессоров</span><span class="sxs-lookup"><span data-stu-id="508af-171">12 \* number of processors</span></span>|<xref:System.ServiceModel.NetTcpBinding.ListenBacklog%2A>|
|<span data-ttu-id="508af-172">maxPendingAccepts</span><span class="sxs-lookup"><span data-stu-id="508af-172">maxPendingAccepts</span></span>|<span data-ttu-id="508af-173">ConnectionOrientedTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="508af-173">ConnectionOrientedTransportBindingElement</span></span><br /><br /> <span data-ttu-id="508af-174">SMSvcHost.exe</span><span class="sxs-lookup"><span data-stu-id="508af-174">SMSvcHost.exe</span></span>|<span data-ttu-id="508af-175">2 \* количество процессоров для транспорта</span><span class="sxs-lookup"><span data-stu-id="508af-175">2 \* number of processors for transport</span></span><br /><br /> <span data-ttu-id="508af-176">4 \* число процессоров для SMSvcHost. exe</span><span class="sxs-lookup"><span data-stu-id="508af-176">4 \* number of processors for SMSvcHost.exe</span></span>|<span data-ttu-id="508af-177"><xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingAccepts%2A> [настройке службы совместного использования портов net. TCP](./feature-details/configuring-the-net-tcp-port-sharing-service.md)</span><span class="sxs-lookup"><span data-stu-id="508af-177"><xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingAccepts%2A> [Configuring the Net.TCP Port Sharing Service](./feature-details/configuring-the-net-tcp-port-sharing-service.md)</span></span>|
|<span data-ttu-id="508af-178">maxPendingConnections</span><span class="sxs-lookup"><span data-stu-id="508af-178">maxPendingConnections</span></span>|<span data-ttu-id="508af-179">ConnectionOrientedTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="508af-179">ConnectionOrientedTransportBindingElement</span></span>|<span data-ttu-id="508af-180">12 \* количество процессоров</span><span class="sxs-lookup"><span data-stu-id="508af-180">12 \* number of processors</span></span>|<xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingConnections%2A>|
|<span data-ttu-id="508af-181">receiveTimeout</span><span class="sxs-lookup"><span data-stu-id="508af-181">receiveTimeout</span></span>|<span data-ttu-id="508af-182">SMSvcHost.exe</span><span class="sxs-lookup"><span data-stu-id="508af-182">SMSvcHost.exe</span></span>|<span data-ttu-id="508af-183">30 секунд</span><span class="sxs-lookup"><span data-stu-id="508af-183">30 seconds</span></span>|[<span data-ttu-id="508af-184">Настройка службы совместного использования портов Net.TCP</span><span class="sxs-lookup"><span data-stu-id="508af-184">Configuring the Net.TCP Port Sharing Service</span></span>](./feature-details/configuring-the-net-tcp-port-sharing-service.md)|

## <a name="xml-editor-tooltips"></a><span data-ttu-id="508af-185">Подсказки в редакторе XML</span><span class="sxs-lookup"><span data-stu-id="508af-185">XML Editor Tooltips</span></span>

<span data-ttu-id="508af-186">В XML-редакторе Visual Studio отображаются подсказки для каждого элемента конфигурации (и его свойств), входящего в файл конфигурации службы. Это облегчает работу разработчиков по конфигурации WCF-служб.</span><span class="sxs-lookup"><span data-stu-id="508af-186">In order to help new and existing WCF service developers to configure their services, the Visual Studio XML editor now provides tooltips for every configuration element and its properties that is part of the service configuration file.</span></span>

## <a name="configuring-wcf-services-in-code"></a><span data-ttu-id="508af-187">Настройка служб WCF в коде</span><span class="sxs-lookup"><span data-stu-id="508af-187">Configuring WCF Services in Code</span></span>

<span data-ttu-id="508af-188">Windows Communication Foundation (WCF) позволяет разработчикам настраивать службы с помощью файлов конфигурации или кода.</span><span class="sxs-lookup"><span data-stu-id="508af-188">Windows Communication Foundation (WCF) allows developers to configure services using configuration files or code.</span></span> <span data-ttu-id="508af-189">Файлы конфигурации используются, если необходимо настроить службу после ее развертывания.</span><span class="sxs-lookup"><span data-stu-id="508af-189">Configuration files are useful when a service needs to be configured after being deployed.</span></span> <span data-ttu-id="508af-190">При использовании файлов конфигурации ИТ-работнику требуется только обновить файл конфигурации без необходимости выполнять повторную компиляцию.</span><span class="sxs-lookup"><span data-stu-id="508af-190">When using configuration files, an IT professional only needs to update the configuration file, no recompilation is required.</span></span> <span data-ttu-id="508af-191">Файлы конфигурации, однако, могут быть сложными и требовать больших усилий при обслуживании.</span><span class="sxs-lookup"><span data-stu-id="508af-191">Configuration files, however, can be complex and difficult to maintain.</span></span> <span data-ttu-id="508af-192">Отсутствует поддержка отладки файлов конфигурации, и ссылки на элементы конфигурации осуществляются по именам, что усложняет работу и способствует совершению ошибок при создании файлов конфигурации.</span><span class="sxs-lookup"><span data-stu-id="508af-192">There is no support for debugging configuration files and configuration elements are referenced by names which makes authoring configuration files error-prone and difficult.</span></span> <span data-ttu-id="508af-193">WCF также позволяет настраивать службы в коде.</span><span class="sxs-lookup"><span data-stu-id="508af-193">WCF also allows you to configure services in code.</span></span> <span data-ttu-id="508af-194">В более ранних версиях WCF (4,0 и более ранних версий) Настройка служб в коде была непростой в собственных сценариях, класс <xref:System.ServiceModel.ServiceHost> позволял вам настроить конечные точки и поведения до вызова ServiceHost. Open.</span><span class="sxs-lookup"><span data-stu-id="508af-194">In earlier versions of WCF (4.0 and earlier) configuring services in code was easy in self-hosted scenarios, the <xref:System.ServiceModel.ServiceHost> class allowed you to configure endpoints and behaviors prior to calling ServiceHost.Open.</span></span> <span data-ttu-id="508af-195">Однако в сценариях с размещением в Интернете нет прямого доступа к классу <xref:System.ServiceModel.ServiceHost>.</span><span class="sxs-lookup"><span data-stu-id="508af-195">In web hosted scenarios, however, you don’t have access to the <xref:System.ServiceModel.ServiceHost> class.</span></span> <span data-ttu-id="508af-196">Чтобы настроить службу, размещенную в сети, приходилось создавать класс `System.ServiceModel.ServiceHostFactory`, который создавал <xref:System.ServiceModel.Activation.ServiceHostFactory> и выполнял необходимые настройки.</span><span class="sxs-lookup"><span data-stu-id="508af-196">To configure a web hosted service you were required to create a `System.ServiceModel.ServiceHostFactory` that created the <xref:System.ServiceModel.Activation.ServiceHostFactory> and performed any needed configuration.</span></span> <span data-ttu-id="508af-197">Начиная с .NET 4,5, WCF предоставляет более простой способ настройки автономных и размещенных в Интернете служб в коде.</span><span class="sxs-lookup"><span data-stu-id="508af-197">Starting with .NET 4.5, WCF provides an easier way to configure both self-hosted and web hosted services in code.</span></span> <span data-ttu-id="508af-198">Дополнительные сведения см. [в разделе Настройка служб WCF в коде](configuring-wcf-services-in-code.md).</span><span class="sxs-lookup"><span data-stu-id="508af-198">For more information, see [Configuring WCF Services in Code](configuring-wcf-services-in-code.md).</span></span>

## <a name="channelfactory-caching"></a><span data-ttu-id="508af-199">Кэширование ChannelFactory</span><span class="sxs-lookup"><span data-stu-id="508af-199">ChannelFactory Caching</span></span>

<span data-ttu-id="508af-200">Клиентские приложения WCF используют класс <xref:System.ServiceModel.ChannelFactory%601> для создания коммуникационного канала со службой WCF.</span><span class="sxs-lookup"><span data-stu-id="508af-200">WCF client applications use the <xref:System.ServiceModel.ChannelFactory%601> class to create a communication channel with a WCF service.</span></span> <span data-ttu-id="508af-201">Создание экземпляров класса <xref:System.ServiceModel.ChannelFactory%601> оказывает определенное влияние на производительность, поскольку выполняются следующие операции:</span><span class="sxs-lookup"><span data-stu-id="508af-201">Creating <xref:System.ServiceModel.ChannelFactory%601> instances incurs some overhead because it involves the following operations:</span></span>

1. <span data-ttu-id="508af-202">Построение дерева <xref:System.ServiceModel.Description.ContractDescription></span><span class="sxs-lookup"><span data-stu-id="508af-202">Constructing the <xref:System.ServiceModel.Description.ContractDescription> tree</span></span>

2. <span data-ttu-id="508af-203">Отображение всех необходимых типов CLR</span><span class="sxs-lookup"><span data-stu-id="508af-203">Reflecting all of the required CLR types</span></span>

3. <span data-ttu-id="508af-204">Построение стека каналов</span><span class="sxs-lookup"><span data-stu-id="508af-204">Constructing the channel stack</span></span>

4. <span data-ttu-id="508af-205">Освобождение ресурсов</span><span class="sxs-lookup"><span data-stu-id="508af-205">Disposing of resources</span></span>

<span data-ttu-id="508af-206">Чтобы уменьшить дополнительные расходы ресурсов, WCF может кэшировать фабрики каналов при использовании прокси клиента WCF.</span><span class="sxs-lookup"><span data-stu-id="508af-206">To help minimize this overhead, WCF can cache channel factories when you are using a WCF client proxy.</span></span> <span data-ttu-id="508af-207">Дополнительные сведения см. в статье [фабрика каналов и кэширование](./feature-details/channel-factory-and-caching.md).</span><span class="sxs-lookup"><span data-stu-id="508af-207">For more information, see [Channel Factory and Caching](./feature-details/channel-factory-and-caching.md).</span></span>

## <a name="compression-and-the-binary-encoder"></a><span data-ttu-id="508af-208">Сжатие и двоичный кодировщик</span><span class="sxs-lookup"><span data-stu-id="508af-208">Compression and the Binary Encoder</span></span>

<span data-ttu-id="508af-209">Начиная с версии WCF 4.5, в двоичном кодировщике появилась поддержка сжатия.</span><span class="sxs-lookup"><span data-stu-id="508af-209">Beginning with WCF 4.5 the WCF binary encoder adds support for compression.</span></span> <span data-ttu-id="508af-210">Тип сжатия задается с помощью свойства <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A>.</span><span class="sxs-lookup"><span data-stu-id="508af-210">The type of compression is configured with the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A> property.</span></span> <span data-ttu-id="508af-211">Свойство <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A> должно быть задано и в клиенте и в службе.</span><span class="sxs-lookup"><span data-stu-id="508af-211">Both the client and the service must configure the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A> property.</span></span> <span data-ttu-id="508af-212">Сжатие будет работать для протоколов HTTP, HTTPS и TCP.</span><span class="sxs-lookup"><span data-stu-id="508af-212">Compression will work for HTTP, HTTPS, and TCP protocols.</span></span> <span data-ttu-id="508af-213">Если клиент указывает использование сжатия, но служба его не поддерживает, возникает исключение протокола, указывающее на несоответствие.</span><span class="sxs-lookup"><span data-stu-id="508af-213">If a client specifies to use compression but the service does not support it a protocol exception is thrown indicating a protocol mismatch.</span></span> <span data-ttu-id="508af-214">Дополнительные сведения см. [в разделе Выбор кодировщика сообщений](./feature-details/choosing-a-message-encoder.md).</span><span class="sxs-lookup"><span data-stu-id="508af-214">For more information, see [Choosing a Message Encoder](./feature-details/choosing-a-message-encoder.md).</span></span>

## <a name="udp"></a><span data-ttu-id="508af-215">Протокол UDP</span><span class="sxs-lookup"><span data-stu-id="508af-215">UDP</span></span>

<span data-ttu-id="508af-216">Добавлена поддержка для транспорта UDP, который позволяет разработчикам писать службы, использующие "пожар и забыть" сообщения.</span><span class="sxs-lookup"><span data-stu-id="508af-216">Support has been added for a UDP transport which allows developers to write services that use "fire and forget" messaging.</span></span> <span data-ttu-id="508af-217">Клиент отправляет сообщение службе, но не ожидает от нее ответа.</span><span class="sxs-lookup"><span data-stu-id="508af-217">A client sends a message to a service and expects no response from the service.</span></span>

## <a name="multiple-authentication-support"></a><span data-ttu-id="508af-218">Поддержка нескольких видов проверок подлинности</span><span class="sxs-lookup"><span data-stu-id="508af-218">Multiple Authentication Support</span></span>

<span data-ttu-id="508af-219">Была добавлена поддержка нескольких режимов проверок подлинности, поддерживаемых службами IIS, в одной конечной точке WCF при использовании транспорта HTTP и безопасности транспорта.</span><span class="sxs-lookup"><span data-stu-id="508af-219">Support has been added to support multiple authentication modes, as supported by IIS, on a single WCF endpoint when using the HTTP transport and transport security.</span></span> <span data-ttu-id="508af-220">Служба IIS позволяет включить несколько режимов проверки подлинности в виртуальном каталоге. Эта возможность позволяет одной конечной точке WCF поддерживать несколько режимов проверки подлинности, разрешенных для виртуального каталога, в котором размещена служба WCF.</span><span class="sxs-lookup"><span data-stu-id="508af-220">IIS allows you to enable multiple authentication modes on a virtual directory, this feature allows a single WCF endpoint to support the multiple authentication modes enabled for the virtual directory where the WCF service is hosted.</span></span>

## <a name="idn-support"></a><span data-ttu-id="508af-221">Поддержка IDN</span><span class="sxs-lookup"><span data-stu-id="508af-221">IDN Support</span></span>

<span data-ttu-id="508af-222">Добавлена поддержка служб WCF с интернационализированными именами домена (IDN).</span><span class="sxs-lookup"><span data-stu-id="508af-222">Support has been added to allow for WCF services with Internationalized Domain Names.</span></span> <span data-ttu-id="508af-223">Дополнительные сведения см. в разделе [WCF и международные доменные имена](./feature-details/wcf-and-internationalized-domain-names.md).</span><span class="sxs-lookup"><span data-stu-id="508af-223">For more information see [WCF and Internationalized Domain Names](./feature-details/wcf-and-internationalized-domain-names.md).</span></span>

## <a name="httpclient"></a><span data-ttu-id="508af-224">HttpClient</span><span class="sxs-lookup"><span data-stu-id="508af-224">HttpClient</span></span>

<span data-ttu-id="508af-225">Был добавлен новый класс <xref:System.Net.Http.HttpClient>, существенного облегчающий работу с HTTP-запросами.</span><span class="sxs-lookup"><span data-stu-id="508af-225">A new class called <xref:System.Net.Http.HttpClient> has been added to make working with HTTP requests much easier.</span></span> <span data-ttu-id="508af-226">Дополнительные сведения см. в разделе [Создание приложений в социальных сетях и подключение к службам HTTP](https://channel9.msdn.com/Events/BUILD/BUILD2011/PLAT-581T) и [Пример HTTP-клиента](https://code.msdn.microsoft.com/windowsapps/HttpClient-sample-55700664).</span><span class="sxs-lookup"><span data-stu-id="508af-226">For more info, see [Making apps social and connected with HTTP services](https://channel9.msdn.com/Events/BUILD/BUILD2011/PLAT-581T) and the [HTTP Client Sample](https://code.msdn.microsoft.com/windowsapps/HttpClient-sample-55700664).</span></span>

## <a name="configuration-intellisense"></a><span data-ttu-id="508af-227">Технология Intellisense в файлах конфигурации</span><span class="sxs-lookup"><span data-stu-id="508af-227">Configuration Intellisense</span></span>

<span data-ttu-id="508af-228">Значения атрибутов в файлах конфигурации для настраиваемых атрибутов, определенных в проекте, теперь поддерживают технологию intellisense для ускорения работы.</span><span class="sxs-lookup"><span data-stu-id="508af-228">Attribute values in configuration files for custom attributes defined in the project now support intellisense to facilitate working with configurations quickly and accurately.</span></span>

## <a name="configuration-tooltips"></a><span data-ttu-id="508af-229">Всплывающие подсказки в файлах конфигурации</span><span class="sxs-lookup"><span data-stu-id="508af-229">Configuration tooltips</span></span>

<span data-ttu-id="508af-230">Элементы и атрибуты WCF теперь имеют подсказки в редакторе XML, что упрощает и точно определяет назначение элемента или атрибута.</span><span class="sxs-lookup"><span data-stu-id="508af-230">WCF elements and attributes now have tooltips in the XML editor, to more easily and accurately identify the purpose of the element or attribute.</span></span>

## <a name="paste-data-as-classes"></a><span data-ttu-id="508af-231">Вставка данных в виде классов</span><span class="sxs-lookup"><span data-stu-id="508af-231">Paste Data as Classes</span></span>

<span data-ttu-id="508af-232">В проекте WCF типы данных, определенные в XML (например, предоставленные как служба), могут быть вставлены непосредственно в кодовую страницу.</span><span class="sxs-lookup"><span data-stu-id="508af-232">In a WCF project, data types defined in XML (such as are exposed in a service) can be pasted directly into a code page.</span></span> <span data-ttu-id="508af-233">XML-тип будет вставлен как тип CLR.</span><span class="sxs-lookup"><span data-stu-id="508af-233">The XML type will be pasted as a CLR type.</span></span> <span data-ttu-id="508af-234">Дополнительные сведения см. [в разделе Создание классов типов данных из XML](generating-data-type-classes-from-xml.md) .</span><span class="sxs-lookup"><span data-stu-id="508af-234">See [Generating Data Type Classes from XML](generating-data-type-classes-from-xml.md) for more details.</span></span>

## <a name="webservicehost-and-default-endpoints"></a><span data-ttu-id="508af-235">WebServiceHost и конечные точки по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="508af-235">WebServiceHost and default endpoints</span></span>

<span data-ttu-id="508af-236">В Visual Studio 2010 WebServiceHost автоматически создавал конечную точку по умолчанию независимо от того, была она явно указана или нет.</span><span class="sxs-lookup"><span data-stu-id="508af-236">In Visual Studio 2010, WebServiceHost automatically created a default endpoint whether you explicitly specified an endpoint or not.</span></span> <span data-ttu-id="508af-237">В Visual Studio 2012 и более поздних версиях класс ServiceHost создает конечную точку по умолчанию только в том случае, если конечные точки явно не добавлены.</span><span class="sxs-lookup"><span data-stu-id="508af-237">In Visual Studio 2012 and later, WebServiceHost only creates a default endpoint if no endpoints are explicitly added.</span></span> <span data-ttu-id="508af-238">Если клиент ожидает конечную точку по умолчанию, можно явно добавить конечную точку и указать клиенту на нее.</span><span class="sxs-lookup"><span data-stu-id="508af-238">If your client is expecting the default endpoint you can explicitly add an endpoint and point the client to it.</span></span> <span data-ttu-id="508af-239">Кроме того, можно вернуть прежнее поведение WCF, добавив следующий параметр в файл конфигурации приложения.</span><span class="sxs-lookup"><span data-stu-id="508af-239">Alternatively, you can tell WCF to revert back to the previous behavior by adding the following setting to you application’s configuration file</span></span>

```xml
<appSettings>
    <add key="wcf:webservicehost:enableautomaticendpointscompatability" value="true"/>
  </appSettings>
```

## <a name="ihttpcookiecontainermanager"></a><span data-ttu-id="508af-240">IHttpCookieContainerManager</span><span class="sxs-lookup"><span data-stu-id="508af-240">IHttpCookieContainerManager</span></span>

<span data-ttu-id="508af-241">Этот интерфейс, предоставляемый <xref:System.ServiceModel.Channels.IChannelFactory%601>, существенно упрощает работу с куки-файлами на стороне клиента.</span><span class="sxs-lookup"><span data-stu-id="508af-241">This interface, exposed by <xref:System.ServiceModel.Channels.IChannelFactory%601>, makes working with cookies on the client side much easier.</span></span> <span data-ttu-id="508af-242">Когда свойство AllowCookies имеет значение true для привязки, доступ к куки-файлам можно получить следующим образом:</span><span class="sxs-lookup"><span data-stu-id="508af-242">When AllowCookies is set to true on the binding, you can access cookies by using the following code:</span></span>

```csharp
IHttpCookieContainerManager cookieManager = factory.GetProperty<IHttpCookieContainerManager>();
System.Net.CookieContainer container = cookieManager.CookieContainer;
```

<span data-ttu-id="508af-243">Затем можно получать или устанавливать куки-файлы из <xref:System.Net.CookieContainer>.</span><span class="sxs-lookup"><span data-stu-id="508af-243">You can then retrieve or set the cookies from the <xref:System.Net.CookieContainer>.</span></span> <span data-ttu-id="508af-244">Когда свойство AllowCookies имеет значение false, куки-файл можно получить вручную с помощью <xref:System.ServiceModel.OperationContext> и отправить его запросом с помощью другого <xref:System.ServiceModel.OperationContext> или средства проверки сообщений.</span><span class="sxs-lookup"><span data-stu-id="508af-244">When AllowCookies is set to false, you can manually retrieve the cookies using <xref:System.ServiceModel.OperationContext> and send it in other requests using another <xref:System.ServiceModel.OperationContext> or message inspector.</span></span> <span data-ttu-id="508af-245">Интерфейс IHttpCookieContainerManager позволяет выполнить проверку подлинности пользователя для службы и использовать куки-файл, возвращенный службой, для проверки подлинности в других службах.</span><span class="sxs-lookup"><span data-stu-id="508af-245">The IHttpCookieContainerManager interface allows you to authenticate a user with a service and use the authentication cookie returned by that service to authenticate with other services.</span></span>
