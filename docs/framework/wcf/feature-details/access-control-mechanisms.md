---
title: Механизмы управления доступом
ms.date: 03/30/2017
helpviewer_keywords:
- WCF security
- access control [WCF]
ms.assetid: 9d576122-3f55-4425-9acf-b23d0781e966
ms.openlocfilehash: b423dac4d8324069eb1825666419b23b5afdca63
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2020
ms.locfileid: "79185496"
---
# <a name="access-control-mechanisms"></a>Механизмы управления доступом
Вы можете контролировать доступ несколькими способами с помощью Фонда связи Windows (WCF). В настоящем разделе кратко описываются различные механизмы и приводятся рассуждения о том, когда и какой способ использовать; раздел должен помочь пользователю выбрать правильный механизм использования. Технологии доступа перечислены в порядке сложности. Самым простым является <xref:System.Security.Permissions.PrincipalPermissionAttribute>; самым сложным - модель удостоверения.  
  
 В дополнение к этим механизмам, олицетворение и делегирование с WCF объясняется в [делегировании и олицетворение](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).  
  
## <a name="principalpermissionattribute"></a>PrincipalPermissionAttribute  
 Для ограничения доступа к методу службы используется <xref:System.Security.Permissions.PrincipalPermissionAttribute>. Когда атрибут применяется к методу, он может быть использован для требования идентификации конкретного вызывающего абонента или членства в группе Windows или ASP.NET роли. Если подлинность клиента проверена при помощи сертификата X.509, клиенту дается первичное удостоверение, состоящее из имени субъекта и отпечатка сертификата.  
  
 Для контроля доступа к ресурсам на компьютере, на котором работает служба, используется <xref:System.Security.Permissions.PrincipalPermissionAttribute>, если пользователи службы всегда будут частью того же домена Windows, на котором работает служба. Можно легко создать группы Windows, которые имеют заданный уровень доступа (такой как отсутствие доступа, только для чтения или чтение и запись).  
  
 Для получения дополнительной информации об использовании атрибута [см. Как: Ограничить доступ с помощью класса PrincipalPermissionAttribute](../../../../docs/framework/wcf/how-to-restrict-access-with-the-principalpermissionattribute-class.md). Для получения дополнительной информации о личности, см [Служба идентификации и аутентификации](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).  
  
## <a name="aspnet-membership-provider"></a>Поставщик участия ASP.NET  
 Особенностью ASP.NET является поставщик членства. Даже если поставщик членства технически не является механизмом контроля доступа, он позволяет контролировать доступ к службе путем ограничения набора возможных удостоверений, которые могут получить доступ к конечной точке службы. Возможность членства включает в себя базу данных, которая может быть заполнена комбинациями имени/пароля, что позволяет пользователям веб-сайта создавать учетные записи на сайте. Чтобы получить доступ к службе, используюейейейейпоставщику членства, пользователь должен войти в систему с именем пользователя и паролем.  
  
> [!NOTE]
> Сначала необходимо заполнить базу данных с помощью функции ASP.NET, прежде чем служба WCF сможет использовать ее для целей авторизации.  
  
 Вы также можете использовать функцию членства, если у вас уже есть база данных о членстве с существующего веб-сайта ASP.NET и вы хотите, чтобы те же пользователи могли использовать ваш сервис, авторизованный с теми же именами пользователей и паролями.  
  
 Для получения дополнительной информации об использовании функции членства в службе WCF см [ASP.NET.](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-membership-provider.md)  
  
## <a name="aspnet-role-provider"></a>Поставщик ролей ASP.NET  
 Еще одной особенностью ASP.NET является возможность управления авторизацией с помощью ролей. Поставщик роли ASP.NET позволяет разработчику создавать роли для пользователей и назначать каждому пользователю роль или роли. Как и в отношении поставщика членства, роли и назначения хранятся в базе данных и могут быть заполнены с помощью инструментов, предоставляемых конкретной реализацией ASP.NET поставщика ролевых ролей. Как и в отношении функции членства, разработчики WCF могут использовать информацию в базе данных для авторизации пользователей служб по ролям. Они могут, например, использовать поставщик ролей совместно с описанным выше механизмом контроля доступа `PrincipalPermissionAttribute`.  
  
 Вы также можете использовать ASP.NET ролевой услуги, если у вас есть существующая база данных ASP.NET ролевой поставщика и вы хотите использовать тот же набор правил и пользовательских назначений в службе WCF.  
  
 Для получения дополнительной информации об использовании функции ролевой функции поставщика см [ASP.NET.](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-role-provider-with-a-service.md)  
  
## <a name="authorization-manager"></a>Диспетчер авторизации  
 Другая функция сочетает в себе диспетчера авторизации (AzMan) с ASP.NET ролевой услугой для авторизации клиентов. При ASP.NET усевает веб-служба, AzMan может быть интегрирован в приложение, чтобы авторизация службы осуществлялась через AzMan. ASP.NET роль менеджера предоставляет API, который позволяет управлять ролями приложений, добавлять и удалять пользователей из ролей и проверять членство в роли, но он не позволяет задать вопрос о том, имеет ли пользователь право выполнять именованные задачи или операции. AzMan позволяет определять отдельные операции и комбинировать их в задачах. При помощи AZMan кроме проверок роли можно также проверять, может ли пользователь выполнять задачу. Назначение роли и авторизация задачи могут быть настроены вне приложения или выполнены программно внутри приложения. Оснастка администрирования AzMan консоли управления MMC позволяет администраторам менять задачи, которые может выполнять определенная роль во время выполнения и управлять членством ролей каждого пользователя.  
  
 Вы также можете использовать AzMan и ASP.NET ролевой провайдер, если у вас уже есть доступ к существующей установке AzMan и вы хотите авторизовать пользователей служб, используя функции комбинации азман/ролевой поставщика.  
  
 Для получения дополнительной информации о AzMan и ASP.NET ролевой роли поставщика, [см. Как: Используйте менеджер авторизации (AzMan) с ASP.NET 2.0](https://docs.microsoft.com/previous-versions/msp-n-p/ff649313(v=pandp.10)). Для получения дополнительной информации об использовании AzMan и поставщика роли для wCF услуг, см [ASP.NET.](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-authorization-manager-role-provider-with-a-service.md)  
  
## <a name="identity-model"></a>Модель удостоверения  
 Модель удостоверения представляет собой набор API, которые позволяют управлять требованиями и политиками для авторизации клиентов. При помощи модели удостоверения можно рассматривать каждое требование, содержащееся в учетных данных, которое пользователь использовал для проверки своей подлинности, сравнить требования с набором политик для службы и на основе сравнения разрешить или запретить доступ.  
  
 Модель удостоверения используется, если необходимы точный контроль и способность задавать специальные условия перед предоставлением доступа. Например, при использовании <xref:System.Security.Permissions.PrincipalPermissionAttribute>, критерием является просто проверка подлинности удостоверения пользователя и его принадлежность определенной роли. В отличие от этого, при помощи модели удостоверения можно создавать политику, устанавливающую, что для получения разрешения на просмотр документа пользователь должен быть старше 18 лет и иметь действительное водительское удостоверение.  
  
 Одним из примеров, где можно воспользоваться контролем доступа на базе требования модели удостоверения, является использование учетных данных федерации в сценарии выданного токена. Для получения дополнительной информации о федерации и выпущенных токенов, [см.](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md)  
  
 Для получения дополнительной информации о модели идентификации [см.](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md)  
  
## <a name="see-also"></a>См. также раздел

- <xref:System.Security.Permissions.PrincipalPermissionAttribute>
- [Практическое руководство. Ограничение доступа с использованием класса PrincipalPermissionAttribute](../../../../docs/framework/wcf/how-to-restrict-access-with-the-principalpermissionattribute-class.md)
- [Практическое руководство. Использование поставщика ролей ASP.NET со службой](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-role-provider-with-a-service.md)
- [Практическое руководство. Использование поставщика ролей диспетчера авторизации ASP.NET со службой](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-authorization-manager-role-provider-with-a-service.md)
- [Управление утверждениями и авторизацией с помощью модели удостоверения](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md)
- [Делегирование и олицетворение](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md)
