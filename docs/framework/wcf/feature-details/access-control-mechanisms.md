---
title: Механизмы управления доступом
ms.date: 03/30/2017
helpviewer_keywords:
- WCF security
- access control [WCF]
ms.assetid: 9d576122-3f55-4425-9acf-b23d0781e966
ms.openlocfilehash: 9ebd1489c35bb3b023ed73cd86fac1b6a352012b
ms.sourcegitcommit: c4e9d05644c9cb89de5ce6002723de107ea2e2c4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/19/2019
ms.locfileid: "65882174"
---
# <a name="access-control-mechanisms"></a>Механизмы управления доступом
Вы можете управлять доступом несколькими способами с помощью Windows Communication Foundation (WCF). В настоящем разделе кратко описываются различные механизмы и приводятся рассуждения о том, когда и какой способ использовать; раздел должен помочь пользователю выбрать правильный механизм использования. Технологии доступа перечислены в порядке сложности. Самым простым является <xref:System.Security.Permissions.PrincipalPermissionAttribute>; самым сложным - модель удостоверения.  
  
 Помимо этих механизмов, объясняется олицетворение и делегирование в WCF в [делегирование и олицетворение](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).  
  
## <a name="principalpermissionattribute"></a>PrincipalPermissionAttribute  
 Для ограничения доступа к методу службы используется <xref:System.Security.Permissions.PrincipalPermissionAttribute>. Когда атрибут применяется к методу, его можно использовать для запроса идентификации заданного вызывающего или членства в группе Windows или роли ASP.NET. Если подлинность клиента проверена при помощи сертификата X.509, клиенту дается первичное удостоверение, состоящее из имени субъекта и отпечатка сертификата.  
  
 Для контроля доступа к ресурсам на компьютере, на котором работает служба, используется <xref:System.Security.Permissions.PrincipalPermissionAttribute>, если пользователи службы всегда будут частью того же домена Windows, на котором работает служба. Можно легко создать группы Windows, которые имеют заданный уровень доступа (такой как отсутствие доступа, только для чтения или чтение и запись).  
  
 Дополнительные сведения об использовании атрибута см. в разделе [как: Ограничение доступа с использованием класса PrincipalPermissionAttribute](../../../../docs/framework/wcf/how-to-restrict-access-with-the-principalpermissionattribute-class.md). Дополнительные сведения об удостоверении см. в разделе [службы идентификации и проверки подлинности](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).  
  
## <a name="aspnet-membership-provider"></a>Поставщик участия ASP.NET  
 Это функция ASP.NET — поставщик членства. Даже если поставщик членства технически не является механизмом контроля доступа, он позволяет контролировать доступ к службе путем ограничения набора возможных удостоверений, которые могут получить доступ к конечной точке службы. Возможность членства включает в себя базу данных, которая может быть заполнена комбинациями имени/пароля, что позволяет пользователям веб-сайта создавать учетные записи на сайте. Для доступа к службе, которая использует поставщика членства, пользователь должен войти в систему со своими именем пользователя и паролем.  
  
> [!NOTE]
>  Необходимо заполнить базу данных, с помощью функции ASP.NET, прежде чем служба WCF может использовать его для проверки подлинности.  
  
 Возможность членства также можно использовать, если уже имеется база данных членства из существующего веб-сайта ASP.NET, и вы хотите включить тех же пользователей, для использования вашей службы, авторизованным с теми же именами пользователей и пароли.  
  
 Дополнительные сведения об использовании функции членства в службе WCF см. в разделе [как: Использование поставщика членства ASP.NET](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-membership-provider.md).  
  
## <a name="aspnet-role-provider"></a>Поставщик ролей ASP.NET  
 Другой особенностью ASP.NET является способность управлять авторизацией с помощью ролей. Поставщик ролей ASP.NET позволяет разработчикам создавать роли для пользователей и назначить каждому пользователю на роль или роли. Как и в случае с поставщиком членства, роли и назначения хранятся в базе данных и можно было заполнять с помощью средств, предоставляемых конкретной реализации поставщика ролей ASP.NET. Как и с возможностью членства, WCF разработчики могут использовать данные в базе данных для авторизации пользователей службе ролей. Они могут, например, использовать поставщик ролей совместно с описанным выше механизмом контроля доступа `PrincipalPermissionAttribute`.  
  
 Также можно использовать поставщика ролей ASP.NET, если у вас существующей базы данных поставщика ролей ASP.NET и хотите использовать тот же набор правил и назначений пользователя в службе WCF.  
  
 Дополнительные сведения об использовании функции поставщика ролей см. в разделе [как: Использование поставщика ролей ASP.NET со службой](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-role-provider-with-a-service.md).  
  
## <a name="authorization-manager"></a>Диспетчер авторизации  
 Еще одна функция объединяет диспетчера авторизации (AzMan) с помощью поставщика ролей ASP.NET для проверки подлинности клиентов. Когда ASP.NET размещает веб-служба, AzMan можно интегрировать в приложение таким образом, чтобы авторизация выполнялась через AzMan. Диспетчер ролей ASP.NET предоставляет API, который позволяет управлять ролями приложения, добавить и удалить пользователей из ролей и проверять членство в ролях, но он не позволяет запрашивать, имеет ли пользователь разрешение на выполнение названной задачи или операции. AzMan позволяет определять отдельные операции и комбинировать их в задачах. При помощи AZMan кроме проверок роли можно также проверять, может ли пользователь выполнять задачу. Назначение роли и авторизация задачи могут быть настроены вне приложения или выполнены программно внутри приложения. Оснастка администрирования AzMan консоли управления MMC позволяет администраторам менять задачи, которые может выполнять определенная роль во время выполнения и управлять членством ролей каждого пользователя.  
  
 Можно также использовать AzMan и поставщика ролей ASP.NET Если вас уже есть доступ к существующей установке AzMan и нужно авторизовать пользователей своей службы, с помощью возможностей комбинации AzMan/роль поставщика.  
  
 Дополнительные сведения о AzMan и поставщика ролей ASP.NET, см. в разделе [How To: Использовать диспетчер авторизации (AzMan) с помощью ASP.NET 2.0](https://go.microsoft.com/fwlink/?LinkId=88951). Дополнительные сведения об использовании AzMan и поставщика ролей для служб WCF см. в разделе [как: Использование поставщика ролей диспетчера авторизации ASP.NET со службой](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-authorization-manager-role-provider-with-a-service.md).  
  
## <a name="identity-model"></a>Модель удостоверения  
 Модель удостоверения представляет собой набор API, которые позволяют управлять требованиями и политиками для авторизации клиентов. При помощи модели удостоверения можно рассматривать каждое требование, содержащееся в учетных данных, которое пользователь использовал для проверки своей подлинности, сравнить требования с набором политик для службы и на основе сравнения разрешить или запретить доступ.  
  
 Модель удостоверения используется, если необходимы точный контроль и способность задавать специальные условия перед предоставлением доступа. Например, при использовании <xref:System.Security.Permissions.PrincipalPermissionAttribute>, критерием является просто проверка подлинности удостоверения пользователя и его принадлежность определенной роли. В отличие от этого, при помощи модели удостоверения можно создавать политику, устанавливающую, что для получения разрешения на просмотр документа пользователь должен быть старше 18 лет и иметь действительное водительское удостоверение.  
  
 Одним из примеров, где можно воспользоваться контролем доступа на базе требования модели удостоверения, является использование учетных данных федерации в сценарии выданного токена. Дополнительные сведения о Федерация и выданные маркеры, см. в разделе [Федерация и выданные маркеры](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).  
  
 Дополнительные сведения о модели удостоверения, см. в разделе [управление утверждениями и авторизацией с моделью идентификации](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md).  
  
## <a name="see-also"></a>См. также

- <xref:System.Security.Permissions.PrincipalPermissionAttribute>
- [Практическое руководство. Ограничение доступа с использованием класса PrincipalPermissionAttribute](../../../../docs/framework/wcf/how-to-restrict-access-with-the-principalpermissionattribute-class.md)
- [Практическое руководство. Использование поставщика ролей ASP.NET со службой](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-role-provider-with-a-service.md)
- [Практическое руководство. Использование поставщика ролей диспетчера авторизации ASP.NET со службой](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-authorization-manager-role-provider-with-a-service.md)
- [Управление утверждениями и авторизацией с помощью модели удостоверения](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md)
- [Делегирование и олицетворение](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md)
