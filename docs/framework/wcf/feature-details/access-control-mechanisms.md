---
title: Механизмы управления доступом
ms.date: 03/30/2017
helpviewer_keywords:
- WCF security
- access control [WCF]
ms.assetid: 9d576122-3f55-4425-9acf-b23d0781e966
ms.openlocfilehash: 53b20e7f11f5accd1436f29063817142681e4f74
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2019
ms.locfileid: "59213263"
---
# <a name="access-control-mechanisms"></a><span data-ttu-id="6b9b9-102">Механизмы управления доступом</span><span class="sxs-lookup"><span data-stu-id="6b9b9-102">Access Control Mechanisms</span></span>
<span data-ttu-id="6b9b9-103">Вы можете управлять доступом несколькими способами с помощью Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="6b9b9-103">You can control access in several way with Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="6b9b9-104">В настоящем разделе кратко описываются различные механизмы и приводятся рассуждения о том, когда и какой способ использовать; раздел должен помочь пользователю выбрать правильный механизм использования.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-104">This topic briefly discusses the various mechanisms and provides suggestions on when to use each; it is intended to help you select the correct mechanism to use.</span></span> <span data-ttu-id="6b9b9-105">Технологии доступа перечислены в порядке сложности.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-105">The access technologies are listed in order of complexity.</span></span> <span data-ttu-id="6b9b9-106">Самым простым является <xref:System.Security.Permissions.PrincipalPermissionAttribute>; самым сложным - модель удостоверения.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-106">The simplest is the <xref:System.Security.Permissions.PrincipalPermissionAttribute>; the most complex is the Identity Model.</span></span>  
  
 <span data-ttu-id="6b9b9-107">Помимо этих механизмов, объясняется олицетворение и делегирование в WCF в [делегирование и олицетворение](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="6b9b9-107">In addition to these mechanisms, impersonation and delegation with WCF is explained in [Delegation and Impersonation](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span></span>  
  
## <a name="principalpermissionattribute"></a><span data-ttu-id="6b9b9-108">PrincipalPermissionAttribute</span><span class="sxs-lookup"><span data-stu-id="6b9b9-108">PrincipalPermissionAttribute</span></span>  
 <span data-ttu-id="6b9b9-109">Для ограничения доступа к методу службы используется <xref:System.Security.Permissions.PrincipalPermissionAttribute>.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-109">The <xref:System.Security.Permissions.PrincipalPermissionAttribute> is used to restrict access to a service method.</span></span> <span data-ttu-id="6b9b9-110">Когда атрибут применяется к методу, он может использоваться для запроса идентификации заданного вызывающего или членства в группе Windows или роли [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6b9b9-110">When the attribute is applied to a method, it can be used to demand a specific caller's identity or membership in a Windows group or [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role.</span></span> <span data-ttu-id="6b9b9-111">Если подлинность клиента проверена при помощи сертификата X.509, клиенту дается первичное удостоверение, состоящее из имени субъекта и отпечатка сертификата.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-111">If the client is authenticated using an X.509 certificate, it is given a primary identity that consists of the subject name plus the thumbprint of the certificate.</span></span>  
  
 <span data-ttu-id="6b9b9-112">Для контроля доступа к ресурсам на компьютере, на котором работает служба, используется <xref:System.Security.Permissions.PrincipalPermissionAttribute>, если пользователи службы всегда будут частью того же домена Windows, на котором работает служба.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-112">Use the <xref:System.Security.Permissions.PrincipalPermissionAttribute> to control access to resources on the computer that the service is running on, and if the users of the service will always be part of the same Windows domain that the service is running on.</span></span> <span data-ttu-id="6b9b9-113">Можно легко создать группы Windows, которые имеют заданный уровень доступа (такой как отсутствие доступа, только для чтения или чтение и запись).</span><span class="sxs-lookup"><span data-stu-id="6b9b9-113">You can easily create Windows groups that have specified levels of access (such as none, read-only, or read and write).</span></span>  
  
 <span data-ttu-id="6b9b9-114">Дополнительные сведения об использовании атрибута см. в разделе [как: Ограничение доступа с использованием класса PrincipalPermissionAttribute](../../../../docs/framework/wcf/how-to-restrict-access-with-the-principalpermissionattribute-class.md).</span><span class="sxs-lookup"><span data-stu-id="6b9b9-114">For more information about using the attribute, see [How to: Restrict Access with the PrincipalPermissionAttribute Class](../../../../docs/framework/wcf/how-to-restrict-access-with-the-principalpermissionattribute-class.md).</span></span> <span data-ttu-id="6b9b9-115">Дополнительные сведения об удостоверении см. в разделе [службы идентификации и проверки подлинности](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="6b9b9-115">For more information about identity, see [Service Identity and Authentication](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span></span>  
  
## <a name="aspnet-membership-provider"></a><span data-ttu-id="6b9b9-116">Поставщик участия ASP.NET</span><span class="sxs-lookup"><span data-stu-id="6b9b9-116">ASP.NET Membership Provider</span></span>  
 <span data-ttu-id="6b9b9-117">Возможность [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] является поставщиком членства по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-117">A feature of [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] is the membership provider.</span></span> <span data-ttu-id="6b9b9-118">Даже если поставщик членства технически не является механизмом контроля доступа, он позволяет контролировать доступ к службе путем ограничения набора возможных удостоверений, которые могут получить доступ к конечной точке службы.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-118">Even though the membership provider is not technically an access control mechanism, it allows controlling access to the service by limiting the set of possible identities that can access the service's endpoint.</span></span> <span data-ttu-id="6b9b9-119">Возможность членства включает в себя базу данных, которая может быть заполнена комбинациями имени/пароля, что позволяет пользователям веб-сайта создавать учетные записи на сайте.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-119">The membership feature includes a database that can be populated with user name/password combinations that enable users of a Web site to establish accounts with the site.</span></span> <span data-ttu-id="6b9b9-120">Для доступа к службе, которая использует поставщика членства, пользователь должен войти в систему со своими именем пользователя и паролем.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-120">To access a service that uses the membership provider, a user must log on with his or her user name and password.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="6b9b9-121">Необходимо заполнить базу данных при помощи [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] компонентов, прежде чем служба WCF может использовать его для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-121">You must first populate the database using the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] feature before a WCF service can use it for authorization purposes.</span></span>  
  
 <span data-ttu-id="6b9b9-122">Кроме того, функцию членства также можно использовать, если уже имеется база данных членства из существующего веб-сайта [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] и нужно разрешить тем же пользователям, авторизованным с теми же именами пользователей и паролями, использовать эту службу.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-122">You can also use the membership feature if you already have a membership database from an existing [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] Web site and you want to enable the same users to use your service, authorized with the same user names and passwords.</span></span>  
  
 <span data-ttu-id="6b9b9-123">Дополнительные сведения об использовании функции членства в службе WCF см. в разделе [как: Использование поставщика членства ASP.NET](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-membership-provider.md).</span><span class="sxs-lookup"><span data-stu-id="6b9b9-123">For more information about using the membership feature in a WCF service, see [How to: Use the ASP.NET Membership Provider](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-membership-provider.md).</span></span>  
  
## <a name="aspnet-role-provider"></a><span data-ttu-id="6b9b9-124">Поставщик ролей ASP.NET</span><span class="sxs-lookup"><span data-stu-id="6b9b9-124">ASP.NET Role Provider</span></span>  
 <span data-ttu-id="6b9b9-125">Другой возможностью [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] является способность управлять авторизацией при помощи ролей.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-125">Another feature of [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] is the ability to manage authorization using roles.</span></span> <span data-ttu-id="6b9b9-126">Поставщик ролей [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] позволяет разработчику создавать роли для пользователей и соотносить каждого пользователя с ролью или ролями.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-126">The [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider enables a developer to create roles for users and to assign each user to a role or roles.</span></span> <span data-ttu-id="6b9b9-127">Как и в случае с поставщиком членства, роли и назначения хранятся в базе данных и могут быть заполнены при помощи средств, предоставленных отдельной реализацией поставщика ролей [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6b9b9-127">As with the membership provider, the roles and assignments are stored in a database, and can be populated using tools provided by a particular implementation of the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider.</span></span> <span data-ttu-id="6b9b9-128">Как и с возможностью членства, WCF разработчики могут использовать данные в базе данных для авторизации пользователей службе ролей.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-128">As with the membership feature, WCF developers can use the information in the database to authorize service users by roles.</span></span> <span data-ttu-id="6b9b9-129">Они могут, например, использовать поставщик ролей совместно с описанным выше механизмом контроля доступа `PrincipalPermissionAttribute`.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-129">They can, for example, use the role provider in combination with the `PrincipalPermissionAttribute` access control mechanism described above.</span></span>  
  
 <span data-ttu-id="6b9b9-130">Можно также использовать [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] поставщика ролей, если у вас есть [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] базы данных поставщика ролей и необходимо использовать тот же набор правил и назначений пользователя в службе WCF.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-130">You can also use the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider if you have an existing [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider database and want to use the same set of rules and user assignments in your WCF service.</span></span>  
  
 <span data-ttu-id="6b9b9-131">Дополнительные сведения об использовании функции поставщика ролей см. в разделе [как: Использование поставщика ролей ASP.NET со службой](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-role-provider-with-a-service.md).</span><span class="sxs-lookup"><span data-stu-id="6b9b9-131">For more information about using the role provider feature, see [How to: Use the ASP.NET Role Provider with a Service](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-role-provider-with-a-service.md).</span></span>  
  
## <a name="authorization-manager"></a><span data-ttu-id="6b9b9-132">Диспетчер авторизации</span><span class="sxs-lookup"><span data-stu-id="6b9b9-132">Authorization Manager</span></span>  
 <span data-ttu-id="6b9b9-133">Другая функция авторизации клиентов комбинирует диспетчер авторизации (AzMan) и поставщик ролей [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6b9b9-133">Another feature combines the Authorization Manager (AzMan) with the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider to authorize clients.</span></span> <span data-ttu-id="6b9b9-134">Когда на [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] размещается веб-служба, AzMan можно интегрировать в приложение таким образом, чтобы авторизация для доступа к службе выполнялась через AzMan.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-134">When [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] hosts a Web service, AzMan can be integrated into the application so that authorization to the service is done through AzMan.</span></span> [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] <span data-ttu-id="6b9b9-135">Диспетчер ролей предоставляет API, который позволяет управлять ролями приложения, добавить и удалить пользователей из ролей и проверять членство в ролях, но он не позволяет запрашивать, имеет ли пользователь разрешение на выполнение названной задачи или операции.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-135">role manager provides an API that enables you to manage application roles, add and remove users from roles, and check role membership, but it does not allow you to query whether a user is authorized to perform a named task or operation.</span></span> <span data-ttu-id="6b9b9-136">AzMan позволяет определять отдельные операции и комбинировать их в задачах.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-136">AzMan allows you to define individual operations and combine them into tasks.</span></span> <span data-ttu-id="6b9b9-137">При помощи AZMan кроме проверок роли можно также проверять, может ли пользователь выполнять задачу.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-137">With AZMan, in addition to role checks, you can also check whether a user can perform a task.</span></span> <span data-ttu-id="6b9b9-138">Назначение роли и авторизация задачи могут быть настроены вне приложения или выполнены программно внутри приложения.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-138">Role assignment and task authorization can be configured outside of the application or performed programmatically within the application.</span></span> <span data-ttu-id="6b9b9-139">Оснастка администрирования AzMan консоли управления MMC позволяет администраторам менять задачи, которые может выполнять определенная роль во время выполнения и управлять членством ролей каждого пользователя.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-139">The AzMan administration Microsoft Management Console (MMC) snap-in allows administrators to change the tasks a role can perform at run time and to manage each user's membership of roles.</span></span>  
  
 <span data-ttu-id="6b9b9-140">Кроме того, AzMan и поставщик ролей [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] можно использовать, если уже есть доступ к существующей установке AzMan и нужно авторизовать пользователей своей службы при помощи возможностей комбинации AzMan/поставщик ролей.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-140">You can also use AzMan and the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider if you already have access to an existing AzMan installation and want to authorize your service users using the features of the AzMan/role provider combination.</span></span>  
  
 <span data-ttu-id="6b9b9-141">Дополнительные сведения о AzMan и [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] поставщика ролей, см. в разделе [How To: Использовать диспетчер авторизации (AzMan) с помощью ASP.NET 2.0](https://go.microsoft.com/fwlink/?LinkId=88951).</span><span class="sxs-lookup"><span data-stu-id="6b9b9-141">For more information about AzMan and the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider, see [How To: Use Authorization Manager (AzMan) with ASP.NET 2.0](https://go.microsoft.com/fwlink/?LinkId=88951).</span></span> <span data-ttu-id="6b9b9-142">Дополнительные сведения об использовании AzMan и поставщика ролей для служб WCF см. в разделе [как: Использование поставщика ролей диспетчера авторизации ASP.NET со службой](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-authorization-manager-role-provider-with-a-service.md).</span><span class="sxs-lookup"><span data-stu-id="6b9b9-142">For more information about using AzMan and the role provider for WCF services, see [How to: Use the ASP.NET Authorization Manager Role Provider with a Service](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-authorization-manager-role-provider-with-a-service.md).</span></span>  
  
## <a name="identity-model"></a><span data-ttu-id="6b9b9-143">Модель удостоверения</span><span class="sxs-lookup"><span data-stu-id="6b9b9-143">Identity Model</span></span>  
 <span data-ttu-id="6b9b9-144">Модель удостоверения представляет собой набор API, которые позволяют управлять требованиями и политиками для авторизации клиентов.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-144">The Identity Model is a set of APIs that enable you to manage claims and policies to authorize clients.</span></span> <span data-ttu-id="6b9b9-145">При помощи модели удостоверения можно рассматривать каждое требование, содержащееся в учетных данных, которое пользователь использовал для проверки своей подлинности, сравнить требования с набором политик для службы и на основе сравнения разрешить или запретить доступ.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-145">With the Identity Model, you can examine every claim contained in credentials that the caller used to authenticate itself to the service, compare the claims to the set of policies for the service, and grant or deny access based on the comparison.</span></span>  
  
 <span data-ttu-id="6b9b9-146">Модель удостоверения используется, если необходимы точный контроль и способность задавать специальные условия перед предоставлением доступа.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-146">Use the Identity Model if you need fine control and the ability to set specific criteria before granting access.</span></span> <span data-ttu-id="6b9b9-147">Например, при использовании <xref:System.Security.Permissions.PrincipalPermissionAttribute>, критерием является просто проверка подлинности удостоверения пользователя и его принадлежность определенной роли.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-147">For example, when using the <xref:System.Security.Permissions.PrincipalPermissionAttribute>, the criterion is simply that the identity of the user is authenticated and belongs to a specific role.</span></span> <span data-ttu-id="6b9b9-148">В отличие от этого, при помощи модели удостоверения можно создавать политику, устанавливающую, что для получения разрешения на просмотр документа пользователь должен быть старше 18 лет и иметь действительное водительское удостоверение.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-148">In contrast, using the Identity Model, you can create a policy that states the user must be over 18 years of age and possesses a valid driver's license before being allowed to view a document.</span></span>  
  
 <span data-ttu-id="6b9b9-149">Одним из примеров, где можно воспользоваться контролем доступа на базе требования модели удостоверения, является использование учетных данных федерации в сценарии выданного токена.</span><span class="sxs-lookup"><span data-stu-id="6b9b9-149">One example where you can benefit from the Identity Model claim-based access control is when using federation credentials in the issued token scenario.</span></span> <span data-ttu-id="6b9b9-150">Дополнительные сведения о Федерация и выданные маркеры, см. в разделе [Федерация и выданные маркеры](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="6b9b9-150">For more information about federation and issued tokens, see [Federation and Issued Tokens](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span></span>  
  
 <span data-ttu-id="6b9b9-151">Дополнительные сведения о модели удостоверения, см. в разделе [управление утверждениями и авторизацией с моделью идентификации](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md).</span><span class="sxs-lookup"><span data-stu-id="6b9b9-151">For more information about the Identity Model, see [Managing Claims and Authorization with the Identity Model](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6b9b9-152">См. также</span><span class="sxs-lookup"><span data-stu-id="6b9b9-152">See also</span></span>

- <xref:System.Security.Permissions.PrincipalPermissionAttribute>
- [<span data-ttu-id="6b9b9-153">Практическое руководство. Ограничение доступа с использованием класса PrincipalPermissionAttribute</span><span class="sxs-lookup"><span data-stu-id="6b9b9-153">How to: Restrict Access with the PrincipalPermissionAttribute Class</span></span>](../../../../docs/framework/wcf/how-to-restrict-access-with-the-principalpermissionattribute-class.md)
- [<span data-ttu-id="6b9b9-154">Практическое руководство. Использование поставщика ролей ASP.NET со службой</span><span class="sxs-lookup"><span data-stu-id="6b9b9-154">How to: Use the ASP.NET Role Provider with a Service</span></span>](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-role-provider-with-a-service.md)
- [<span data-ttu-id="6b9b9-155">Практическое руководство. Использование поставщика ролей диспетчера авторизации ASP.NET со службой</span><span class="sxs-lookup"><span data-stu-id="6b9b9-155">How to: Use the ASP.NET Authorization Manager Role Provider with a Service</span></span>](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-authorization-manager-role-provider-with-a-service.md)
- [<span data-ttu-id="6b9b9-156">Управление утверждениями и авторизацией с помощью модели удостоверения</span><span class="sxs-lookup"><span data-stu-id="6b9b9-156">Managing Claims and Authorization with the Identity Model</span></span>](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md)
- [<span data-ttu-id="6b9b9-157">Делегирование и олицетворение</span><span class="sxs-lookup"><span data-stu-id="6b9b9-157">Delegation and Impersonation</span></span>](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md)
