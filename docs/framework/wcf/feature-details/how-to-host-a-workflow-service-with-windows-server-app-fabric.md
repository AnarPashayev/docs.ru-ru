---
title: Практическое руководство. Как разместить службу рабочего процесса с помощью Windows Server App Fabric
ms.date: 03/30/2017
ms.assetid: 83b62cce-5fc2-4c6d-b27c-5742ba3bac73
ms.openlocfilehash: d762863b70191662f4eb145388a48484c944e1e0
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2019
ms.locfileid: "59202265"
---
# <a name="how-to-host-a-workflow-service-with-windows-server-app-fabric"></a><span data-ttu-id="f9433-102">Практическое руководство. Как разместить службу рабочего процесса с помощью Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="f9433-102">How to: Host a Workflow Service with Windows Server App Fabric</span></span>
<span data-ttu-id="f9433-103">Размещение служб рабочих процессов в фабрике приложений аналогично их размещению в виртуальном каталоге служб IIS/WAS.</span><span class="sxs-lookup"><span data-stu-id="f9433-103">Hosting workflow services in App Fabric is similar to hosting under IIS/WAS.</span></span> <span data-ttu-id="f9433-104">Разница состоит лишь в предоставлении фабрикой приложений средств для развертывания, наблюдения и управления службами рабочих процессов.</span><span class="sxs-lookup"><span data-stu-id="f9433-104">The only difference is the tools App Fabric provides for deploying, monitoring, and managing workflow services.</span></span> <span data-ttu-id="f9433-105">В этом разделе используется служба рабочего процесса, созданная в [создания длительные службы рабочего процесса](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md).</span><span class="sxs-lookup"><span data-stu-id="f9433-105">This topic uses the workflow service created in the [Creating a Long-running Workflow Service](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md).</span></span> <span data-ttu-id="f9433-106">Указанный раздел содержит пошаговые инструкции по созданию службы рабочих процессов.</span><span class="sxs-lookup"><span data-stu-id="f9433-106">That topic will walk you through creating a workflow service.</span></span> <span data-ttu-id="f9433-107">В этом разделе объясняется, как разместить службу рабочих процессов с помощью фабрики приложений.</span><span class="sxs-lookup"><span data-stu-id="f9433-107">This topic will explain how to host the workflow service using App Fabric.</span></span> <span data-ttu-id="f9433-108">Дополнительные сведения о Windows Server App Fabric, см. в разделе [Windows Server App Fabric документации](https://go.microsoft.com/fwlink/?LinkID=193037&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="f9433-108">For more information about Windows Server App Fabric, see [Windows Server App Fabric Documentation](https://go.microsoft.com/fwlink/?LinkID=193037&clcid=0x409).</span></span> <span data-ttu-id="f9433-109">Перед выполнением описанных далее шагов убедитесь, что фабрика приложений Windows Server уже установлена.</span><span class="sxs-lookup"><span data-stu-id="f9433-109">Before completing the steps below make sure you have Windows Server App Fabric installed.</span></span>  <span data-ttu-id="f9433-110">Для этого откройте диспетчер служб IIS (inetmgr.exe), щелкните имя сервера в **подключений** просмотра щелкните узлы и нажмите кнопку **веб-сайт по умолчанию**.</span><span class="sxs-lookup"><span data-stu-id="f9433-110">To do this open up Internet Information Services (inetmgr.exe), click your server name in the **Connections** view, click Sites, and click **Default Web Site**.</span></span> <span data-ttu-id="f9433-111">В правой части экрана вы увидите раздел **App Fabric**.</span><span class="sxs-lookup"><span data-stu-id="f9433-111">In the right-hand side of the screen you should see a section called **App Fabric**.</span></span> <span data-ttu-id="f9433-112">Если вы не видите этот раздел (он находится на верхней правой панели), значит фабрика приложений не установлена.</span><span class="sxs-lookup"><span data-stu-id="f9433-112">If you don’t see this section (it will be on the top of the right-hand pane) you do not have App Fabric installed.</span></span> <span data-ttu-id="f9433-113">Дополнительные сведения об установке Windows Server App Fabric см. в разделе [Установка Windows Server App Fabric](https://go.microsoft.com/fwlink/?LinkId=193136).</span><span class="sxs-lookup"><span data-stu-id="f9433-113">For more information about installing Windows Server App Fabric see [Installing Windows Server App Fabric](https://go.microsoft.com/fwlink/?LinkId=193136).</span></span>  
  
### <a name="creating-a-simple-workflow-service"></a><span data-ttu-id="f9433-114">Создание простой службы рабочих процессов</span><span class="sxs-lookup"><span data-stu-id="f9433-114">Creating a Simple Workflow Service</span></span>  
  
1.  <span data-ttu-id="f9433-115">Откройте Visual Studio 2012 и загрузите решение OrderProcessing, созданное в [создания длительные службы рабочего процесса](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md) раздела.</span><span class="sxs-lookup"><span data-stu-id="f9433-115">Open Visual Studio 2012 and load the OrderProcessing solution you created in the [Creating a Long-running Workflow Service](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md) topic.</span></span>  
  
2.  <span data-ttu-id="f9433-116">Щелкните правой кнопкой мыши **OrderService** проекта и выберите **свойства** и выберите **Web** вкладки.</span><span class="sxs-lookup"><span data-stu-id="f9433-116">Right click the **OrderService** project and select **Properties** and select the **Web** tab.</span></span>  
  
3.  <span data-ttu-id="f9433-117">В **действие при запуске** страницы свойств "выберите команду" **определенную страницу** и в поле ввода введите Service1.xamlx.</span><span class="sxs-lookup"><span data-stu-id="f9433-117">In the **Start Action** section of the property page select **Specific Page** and type Service1.xamlx in the edit box.</span></span>  
  
4.  <span data-ttu-id="f9433-118">В **серверы** страницы свойств "выберите команду" **использовать локальный веб-сервер IIS** и введите следующий URL-адрес: `http://localhost/OrderService`.</span><span class="sxs-lookup"><span data-stu-id="f9433-118">In the **Servers** section of the property page select **Use Local IIS Web Server** and type in the following URL: `http://localhost/OrderService`.</span></span>  
  
5.  <span data-ttu-id="f9433-119">Нажмите кнопку **создать виртуальный каталог** кнопки.</span><span class="sxs-lookup"><span data-stu-id="f9433-119">Click the **Create Virtual Directory** button.</span></span> <span data-ttu-id="f9433-120">При этом будет создан новый виртуальный каталог, а проект будет настроен для копирования необходимых файлов в этот каталог при сборке проекта.</span><span class="sxs-lookup"><span data-stu-id="f9433-120">This will create a new virtual directory and set up the project to copy the needed files to the virtual directory when the project is built.</span></span>  <span data-ttu-id="f9433-121">Можно также вручную скопировать в этот виртуальный каталог XAMLX-файл, файл web.config и все необходимые библиотеки DLL.</span><span class="sxs-lookup"><span data-stu-id="f9433-121">Alternatively you could manually copy the .xamlx, the web.config, and any needed DLLs to the virtual directory.</span></span>  
  
### <a name="configuring-a-workflow-service-hosted-in-windows-server-app-fabric"></a><span data-ttu-id="f9433-122">Настройка службы рабочих процессов, размещенной в фабрике приложений Windows Server</span><span class="sxs-lookup"><span data-stu-id="f9433-122">Configuring a Workflow Service Hosted in Windows Server App Fabric</span></span>  
  
1.  <span data-ttu-id="f9433-123">Откройте диспетчер служб IIS (inetmgr.exe).</span><span class="sxs-lookup"><span data-stu-id="f9433-123">Open Internet Information Services Manager (inetmgr.exe).</span></span>  
  
2.  <span data-ttu-id="f9433-124">Перейдите в виртуальный каталог OrderService в **подключений** области.</span><span class="sxs-lookup"><span data-stu-id="f9433-124">Navigate to the OrderService virtual directory in the **Connections** pane.</span></span>  
  
3.  <span data-ttu-id="f9433-125">Щелкните правой кнопкой мыши OrderService и выберите **управление службами WF WCF и**, **Настройка...** .</span><span class="sxs-lookup"><span data-stu-id="f9433-125">Right click OrderService and select **Manage WCF and WF Services**, **Configure…**.</span></span> <span data-ttu-id="f9433-126">**Настройка WCF и WF для приложения** диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="f9433-126">The **Configure WCF and WF for Application** dialog box is displayed.</span></span>  
  
4.  <span data-ttu-id="f9433-127">Выберите **Общие** вкладку, чтобы отобразить общие сведения о приложении, как показано на следующем снимке экрана.</span><span class="sxs-lookup"><span data-stu-id="f9433-127">Select the **General** tab to display general information about the application as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="f9433-128">![Вкладка "Общие" диалогового окна Конфигурация фабрики приложения](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-general.gif "AppFabricConfiguration-Общие")</span><span class="sxs-lookup"><span data-stu-id="f9433-128">![General tab of the App Fabric Configuration dialog](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-general.gif "AppFabricConfiguration-General")</span></span>  
  
5.  <span data-ttu-id="f9433-129">Выберите **мониторинг** вкладки. Показаны различные параметры наблюдения, как показано на следующем снимке экрана.</span><span class="sxs-lookup"><span data-stu-id="f9433-129">Select the **Monitoring** tab. This shows various monitoring settings as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="f9433-130">![Вкладка наблюдение за конфигурацией фабрики приложения](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-monitoring.gif "AppFabricConfiguration мониторинг")</span><span class="sxs-lookup"><span data-stu-id="f9433-130">![App Fabric Configuration Monitoring tab](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-monitoring.gif "AppFabricConfiguration-Monitoring")</span></span>  
  
     <span data-ttu-id="f9433-131">Дополнительные сведения о настройке службы рабочего процесса мониторинга в фабрике приложений см. в разделе [настройке мониторинга с помощью App Fabric](https://go.microsoft.com/fwlink/?LinkId=193153).</span><span class="sxs-lookup"><span data-stu-id="f9433-131">For more information about configuring workflow service monitoring in App Fabric see [Configuring monitoring with App Fabric](https://go.microsoft.com/fwlink/?LinkId=193153).</span></span>  
  
6.  <span data-ttu-id="f9433-132">Выберите **сохранение рабочего процесса** вкладки. Это позволяет настроить приложение для использования поставщика сохраняемости по умолчанию фабрикой приложений как показано на следующем снимке экрана.</span><span class="sxs-lookup"><span data-stu-id="f9433-132">Select the **Workflow Persistence** tab. This allows you to configure your application to use App Fabric’s default persistence provider as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="f9433-133">![Конфигурация фабрики приложения &#45; сохраняемости](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-persistence.gif "AppFabricConfiguration сохраняемости")</span><span class="sxs-lookup"><span data-stu-id="f9433-133">![App Fabric Configuration &#45; Persistence](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-persistence.gif "AppFabricConfiguration-Persistence")</span></span>  
  
     <span data-ttu-id="f9433-134">Дополнительные сведения о настройке сохраняемости рабочего процесса в Windows Server App Fabric см. в разделе [Настройка сохраняемости рабочих процессов в фабрике приложений](https://go.microsoft.com/fwlink/?LinkId=193148).</span><span class="sxs-lookup"><span data-stu-id="f9433-134">For more information about configuring workflow persistence in Windows Server App Fabric see [Configuring Workflow Persistence in App Fabric](https://go.microsoft.com/fwlink/?LinkId=193148).</span></span>  
  
7.  <span data-ttu-id="f9433-135">Выберите **Управление узлом рабочих процессов** вкладки. Это позволяет указать, когда простаивающих экземпляров рабочего процесса службы должны выгружаться и сохраняться, как показано на следующем снимке экрана.</span><span class="sxs-lookup"><span data-stu-id="f9433-135">Select the **Workflow Host Management** tab. This allows you to specify when idle workflow service instances should be unloaded and persisted as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="f9433-136">![Настройка App Fabric-Управление узлом рабочих процессов](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-management.gif "AppFabricConfiguration-Management")</span><span class="sxs-lookup"><span data-stu-id="f9433-136">![App Fabric Configuration  Workflow Host Management](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-management.gif "AppFabricConfiguration-Management")</span></span>  
  
     <span data-ttu-id="f9433-137">Дополнительные сведения о настройке управления узла рабочего процесса см. в разделе [Настройка Управление узлом рабочих процессов в фабрике приложений](https://go.microsoft.com/fwlink/?LinkId=193151).</span><span class="sxs-lookup"><span data-stu-id="f9433-137">For more information about workflow host management configuration see [Configuring Workflow Host Management in App Fabric](https://go.microsoft.com/fwlink/?LinkId=193151).</span></span>  
  
8.  <span data-ttu-id="f9433-138">Выберите **автозапуска** вкладки. Это позволяет указать параметры автозапуска служб рабочих процессов в приложении, как показано на следующем снимке экрана.</span><span class="sxs-lookup"><span data-stu-id="f9433-138">Select the **Auto-Start** tab. This allows you to specify auto-start settings for the workflow services in the application as shown in the following screenshot.</span></span>  
  
     ![Снимок экрана, показывающий App Fabric автоматически&#45;запуск конфигурации.](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/app-fabric-auto-start-configuration.gif)  
  
     <span data-ttu-id="f9433-140">Дополнительные сведения о настройке автоматического запуска см. в разделе [Настройка автозапуска при работе с App Fabric](https://go.microsoft.com/fwlink/?LinkId=193150).</span><span class="sxs-lookup"><span data-stu-id="f9433-140">For more information about configuring Auto-Start see [Configuring Auto-Start with App Fabric](https://go.microsoft.com/fwlink/?LinkId=193150).</span></span>  
  
9. <span data-ttu-id="f9433-141">Выберите **регулирование** вкладки. Это позволяет настроить параметры регулирования для службы рабочего процесса, как показано на следующем снимке экрана.</span><span class="sxs-lookup"><span data-stu-id="f9433-141">Select the **Throttling** tab. This allows you to configure throttling settings for the workflow service as shown in the following screenshot.</span></span>  
  
     ![Снимок экрана, показывающий регулирование конфигурации фабрики приложения.](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/app-fabric-throttling-configuration.gif)  
  
     <span data-ttu-id="f9433-143">Дополнительные сведения о настройке регулирования см. в разделе [Настройка регулирования при работе с App Fabric](https://go.microsoft.com/fwlink/?LinkId=193149).</span><span class="sxs-lookup"><span data-stu-id="f9433-143">For more information about configuring throttling see [Configuring Throttling with App Fabric](https://go.microsoft.com/fwlink/?LinkId=193149).</span></span>  
  
10. <span data-ttu-id="f9433-144">Выберите **безопасности** вкладки. Это позволяет настроить параметры безопасности для приложения, как показано на следующем снимке экрана.</span><span class="sxs-lookup"><span data-stu-id="f9433-144">Select the **Security** tab. This allows you to configure security settings for the application as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="f9433-145">![Конфигурация безопасности фабрики приложения](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-security.gif "AppFabricConfiguration безопасности")</span><span class="sxs-lookup"><span data-stu-id="f9433-145">![App Fabric Security Configuration](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-security.gif "AppFabricConfiguration-Security")</span></span>  
  
     <span data-ttu-id="f9433-146">Дополнительные сведения о настройке безопасности с помощью Windows Server App Fabric см. в разделе [Настройка безопасности с помощью App Fabric](https://go.microsoft.com/fwlink/?LinkId=193152).</span><span class="sxs-lookup"><span data-stu-id="f9433-146">For more information about configuring security with Windows Server App Fabric see [Configuring Security with App Fabric](https://go.microsoft.com/fwlink/?LinkId=193152).</span></span>  
  
### <a name="using-windows-server-app-fabric"></a><span data-ttu-id="f9433-147">Использование фабрики приложений Windows Server</span><span class="sxs-lookup"><span data-stu-id="f9433-147">Using Windows Server App Fabric</span></span>  
  
1.  <span data-ttu-id="f9433-148">Выполните построение решения, чтобы скопировать необходимые файлы в виртуальный каталог.</span><span class="sxs-lookup"><span data-stu-id="f9433-148">Build the solution to copy the necessary files to the virtual directory.</span></span>  
  
2.  <span data-ttu-id="f9433-149">Правой кнопкой мыши проект OrderClient и выберите **Отладка**, **запустить новый экземпляр** запустить клиентское приложение.</span><span class="sxs-lookup"><span data-stu-id="f9433-149">Right click the OrderClient project and select **Debug**, **Start New Instance** to launch the client application.</span></span>  
  
3.  <span data-ttu-id="f9433-150">Клиент будет работать, и Visual Studio появится **присоединить предупреждение системы безопасности** диалоговом окне щелкните **не Присоединяйте** кнопки.</span><span class="sxs-lookup"><span data-stu-id="f9433-150">The client will run and Visual Studio will display an **Attach Security Warning** dialog box, click the **Don’t Attach** button.</span></span> <span data-ttu-id="f9433-151">При этом среда Visual Studio не будет присоединяться к процессу служб IIS для отладки.</span><span class="sxs-lookup"><span data-stu-id="f9433-151">This tells Visual Studio to not attach to the IIS process for debugging.</span></span>  
  
4.  <span data-ttu-id="f9433-152">Клиентское приложение немедленно вызовет службу рабочих процессов и перейдет в состояние ожидания.</span><span class="sxs-lookup"><span data-stu-id="f9433-152">The client application will immediately call the Workflow service and then wait.</span></span> <span data-ttu-id="f9433-153">Служба рабочих процессов перейдет в состояние бездействия и будет сохранена.</span><span class="sxs-lookup"><span data-stu-id="f9433-153">The workflow service will go idle and be persisted.</span></span> <span data-ttu-id="f9433-154">Чтобы это проверить, запустите диспетчер служб IIS (inetmgr.exe), перейдите к элементу OrderService в области «Соединения» и выберите его.</span><span class="sxs-lookup"><span data-stu-id="f9433-154">You can verify this by starting Internet Information Services (inetmgr.exe), navigating to the OrderService in the Connections pane and selecting it.</span></span> <span data-ttu-id="f9433-155">Затем щелкните значок панели мониторинга фабрики приложений на панели справа.</span><span class="sxs-lookup"><span data-stu-id="f9433-155">Next, click the App Fabric Dashboard icon in the right-hand pane.</span></span> <span data-ttu-id="f9433-156">В разделе сохраненные экземпляры WF, вы увидите, что имеется один экземпляр службы рабочего процесса, как показано на следующем снимке экрана.</span><span class="sxs-lookup"><span data-stu-id="f9433-156">Under Persisted WF Instances you will see there is one persisted workflow service instance as shown in the following screenshot.</span></span>  
  
     ![Снимок экрана с панели мониторинга фабрики приложений.](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/app-fabric-dashboard.gif)  
  
     <span data-ttu-id="f9433-158">**Журнал экземпляра WF** выводит сведения о службе рабочего процесса, например количество активаций, число завершений экземпляров службы рабочего процесса и число экземпляров рабочих процессов со сбоями.</span><span class="sxs-lookup"><span data-stu-id="f9433-158">The **WF Instance History** lists information about the workflow service such as the number of workflow service activations, the number of workflow service instance completions, and the number of workflow instances with failures.</span></span> <span data-ttu-id="f9433-159">Под активными и Бездействующими экземплярами, которые будет отображать ссылку щелкнув ссылку можно просмотреть дополнительные сведения об экземплярах простаивающего рабочего процесса, как показано на следующем снимке экрана.</span><span class="sxs-lookup"><span data-stu-id="f9433-159">Under Active or Idle instances a link will be displayed, clicking on the link will display more information about the idle workflow instances as shown in the following screenshot.</span></span>  
  
     ![Снимок экрана, показывающий сохраняются сведения об экземпляре рабочего процесса.](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/persisted-workflow-instance-detail.gif)  
  
     <span data-ttu-id="f9433-161">Дополнительные сведения о Windows Server App Fabric возможности и способы их использования см. в разделе [функции размещения Windows Server App Fabric](https://go.microsoft.com/fwlink/?LinkID=193143&clcid=0x409)</span><span class="sxs-lookup"><span data-stu-id="f9433-161">For more information about Windows Server App Fabric features and how to use them see [Windows Server App Fabric Hosting Features](https://go.microsoft.com/fwlink/?LinkID=193143&clcid=0x409)</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f9433-162">См. также</span><span class="sxs-lookup"><span data-stu-id="f9433-162">See also</span></span>

- [<span data-ttu-id="f9433-163">Создание службы долго выполняющегося рабочего процесса</span><span class="sxs-lookup"><span data-stu-id="f9433-163">Creating a Long-running Workflow Service</span></span>](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md)
- [<span data-ttu-id="f9433-164">Возможности размещения Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="f9433-164">Windows Server App Fabric Hosting Features</span></span>](https://go.microsoft.com/fwlink/?LinkId=193143)
- [<span data-ttu-id="f9433-165">Установка Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="f9433-165">Installing Windows Server App Fabric</span></span>](https://go.microsoft.com/fwlink/?LinkId=193136)
- [<span data-ttu-id="f9433-166">Документация по Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="f9433-166">Windows Server App Fabric Documentation</span></span>](https://go.microsoft.com/fwlink/?LinkID=193037&clcid=0x409)
