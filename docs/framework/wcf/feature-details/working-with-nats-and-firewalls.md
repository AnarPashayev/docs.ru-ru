---
title: Работа со средствами NAT и брандмауэрами
ms.date: 03/30/2017
helpviewer_keywords:
- firewalls [WCF]
- NATs [WCF]
ms.assetid: 74db0632-1bf0-428b-89c8-bd53b64332e7
ms.openlocfilehash: 5495d8198d30f4462fa9772f7d663664c82c6dee
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62050367"
---
# <a name="working-with-nats-and-firewalls"></a><span data-ttu-id="aaff1-102">Работа со средствами NAT и брандмауэрами</span><span class="sxs-lookup"><span data-stu-id="aaff1-102">Working with NATs and Firewalls</span></span>
<span data-ttu-id="aaff1-103">Зачастую в сетевом подключении между клиентом и сервером отсутствует прямой и открытый путь для взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="aaff1-103">The client and server of a network connection frequently do not have a direct and open path for communication.</span></span> <span data-ttu-id="aaff1-104">Пакеты фильтруются, перенаправляются, анализируются и преобразуются как на конечных, так и на промежуточных компьютерах в сети.</span><span class="sxs-lookup"><span data-stu-id="aaff1-104">Packets are filtered, routed, analyzed, and transformed both on the endpoint machines and by intermediate machines on the network.</span></span> <span data-ttu-id="aaff1-105">Типичными примерами промежуточных приложений, участвующих в сетевом взаимодействии, служат средства преобразования сетевых адресов (NAT) и брандмауэры.</span><span class="sxs-lookup"><span data-stu-id="aaff1-105">Network address translations (NATs) and firewalls are common examples of intermediate applications that can participate in network communication.</span></span>  
  
 <span data-ttu-id="aaff1-106">Транспорты в Windows Communication Foundation (WCF) и (MEP) шаблоны обмена сообщениями работают по другому наличие средствами NAT и брандмауэрами.</span><span class="sxs-lookup"><span data-stu-id="aaff1-106">Windows Communication Foundation (WCF) transports, and message exchange patterns (MEPs) react differently to, the presence of NATs and firewalls.</span></span> <span data-ttu-id="aaff1-107">В этом разделе описано, как работают средства NAT и брандмауэры в типичных топологиях сети.</span><span class="sxs-lookup"><span data-stu-id="aaff1-107">This topic describes how NATs and firewalls function in common network topologies.</span></span> <span data-ttu-id="aaff1-108">Рекомендации для определенных сочетаний транспорта WCF и шаблонов обмена сообщениями учитывая, что помочь сделать работу приложений более надежной для средствами NAT и брандмауэрами в сети.</span><span class="sxs-lookup"><span data-stu-id="aaff1-108">Recommendations for specific combinations of WCF transports and MEPs are given that help make your applications more robust to NATs and firewalls on the network.</span></span>  
  
## <a name="how-nats-affect-communication"></a><span data-ttu-id="aaff1-109">Влияние преобразования сетевых адресов на обмен данными</span><span class="sxs-lookup"><span data-stu-id="aaff1-109">How NATs Affect Communication</span></span>  
 <span data-ttu-id="aaff1-110">Преобразование сетевых адресов позволяет нескольким компьютерам использовать один внешний IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="aaff1-110">NAT was created to enable several machines to share a single external IP address.</span></span> <span data-ttu-id="aaff1-111">При преобразовании сетевых адресов с сопоставлением портов внутреннему IP-адресу и порту подключения сопоставляется внешний IP-адрес с новым номером порта.</span><span class="sxs-lookup"><span data-stu-id="aaff1-111">A port-remapping NAT maps an internal IP address and port for a connection to an external IP address with a new port number.</span></span> <span data-ttu-id="aaff1-112">Новый номер порта позволяет сопоставлять возвращаемый трафик с исходной передачей данных.</span><span class="sxs-lookup"><span data-stu-id="aaff1-112">The new port number allows the NAT to correlate return traffic with the original communication.</span></span> <span data-ttu-id="aaff1-113">В настоящее время многие домашние пользователи имеют один личный маршрутизируемый IP-адрес и используют преобразование сетевых адресов для глобальной маршрутизации пакетов.</span><span class="sxs-lookup"><span data-stu-id="aaff1-113">Many home users now have an IP address that is only privately routable and rely on a NAT to provide global routing of packets.</span></span>  
  
 <span data-ttu-id="aaff1-114">Преобразование сетевых адресов не обеспечивает периметр безопасности.</span><span class="sxs-lookup"><span data-stu-id="aaff1-114">A NAT does not provide a security boundary.</span></span> <span data-ttu-id="aaff1-115">Однако в распространенных конфигурациях NAT прямая адресация внутренних компьютеров не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="aaff1-115">However, common NAT configurations prevent the internal machines from being directly addressed.</span></span> <span data-ttu-id="aaff1-116">Это, с одной стороны, позволяет защитить внутренние компьютеры от некоторых нежелательных подключений, а, с другой стороны, затрудняет создание серверных приложений, которым требуется асинхронно отправлять данные назад клиенту.</span><span class="sxs-lookup"><span data-stu-id="aaff1-116">This both protects the internal machines from some unwanted connections and makes it difficult to write server applications that must asynchronously send data back to the client.</span></span> <span data-ttu-id="aaff1-117">Средство NAT переписывает адреса в пакетах таким образом, чтобы они напоминали подключения, исходящие от компьютера NAT.</span><span class="sxs-lookup"><span data-stu-id="aaff1-117">The NAT rewrites the addresses in packets to make it seem like connections are originating at the NAT machine.</span></span> <span data-ttu-id="aaff1-118">Это приводит к сбою сервера при попытке открытия обратного подключения к клиенту.</span><span class="sxs-lookup"><span data-stu-id="aaff1-118">This causes the server to fail when it attempts to open a connection back to the client.</span></span> <span data-ttu-id="aaff1-119">Если сервер использует полученный адрес клиента, происходит сбой, поскольку отсутствует возможность открытой маршрутизации на адрес клиента.</span><span class="sxs-lookup"><span data-stu-id="aaff1-119">If the server uses the client's perceived address, it fails because the client address cannot be publicly routed.</span></span> <span data-ttu-id="aaff1-120">Если сервер использует адрес NAT, происходит сбой из-за отсутствия прослушивающего приложения на этом компьютере.</span><span class="sxs-lookup"><span data-stu-id="aaff1-120">If the server uses the NAT address, it fails to connect because no application is listening on that machine.</span></span>  
  
 <span data-ttu-id="aaff1-121">Некоторые средства NAT поддерживают настройку правил переадресации, чтобы разрешить внешним компьютерам подключаться к определенному внутреннему компьютеру.</span><span class="sxs-lookup"><span data-stu-id="aaff1-121">Some NATs support the configuration of forwarding rules to allow external machines to connect to a particular internal machine.</span></span> <span data-ttu-id="aaff1-122">Инструкции по настройке правил переадресации различаются в разных системах NAT, поэтому в большинстве случаев не рекомендуется обращаться к конечным пользователям с просьбой изменить конфигурацию NAT.</span><span class="sxs-lookup"><span data-stu-id="aaff1-122">The instructions for configuring forwarding rules varies among different NATs, and asking end users to change their NAT configuration is not recommended for most applications.</span></span> <span data-ttu-id="aaff1-123">Кроме того, многие конечные пользователи не смогут или не захотят изменять конфигурацию NAT ради одного приложения.</span><span class="sxs-lookup"><span data-stu-id="aaff1-123">Many end users either cannot or do not want to change their NAT configuration for a particular application.</span></span>  
  
## <a name="how-firewalls-affect-communication"></a><span data-ttu-id="aaff1-124">Влияние брандмауэров на обмен данными</span><span class="sxs-lookup"><span data-stu-id="aaff1-124">How Firewalls Affect Communication</span></span>  
 <span data-ttu-id="aaff1-125">Объект *брандмауэра* является программное или аппаратное устройство, которое применяет правила к трафику, проходящему через, чтобы решить, следует ли разрешить или запретить прохождение такого.</span><span class="sxs-lookup"><span data-stu-id="aaff1-125">A *firewall* is a software or hardware device that applies rules to the traffic passing through to decide whether to allow or deny passage.</span></span> <span data-ttu-id="aaff1-126">Брандмауэры можно настроить для проверки входящего или исходящего трафика.</span><span class="sxs-lookup"><span data-stu-id="aaff1-126">You can configure firewalls to examine incoming and/or outgoing streams of traffic.</span></span> <span data-ttu-id="aaff1-127">Брандмауэр создает в сети периметр безопасности либо на границе сети, либо на узле конечной точки.</span><span class="sxs-lookup"><span data-stu-id="aaff1-127">The firewall provides a security boundary for the network at either the edge of the network or on the endpoint host.</span></span> <span data-ttu-id="aaff1-128">Корпоративные пользователи традиционно размещали свои серверы за брандмауэром для предотвращения вредоносных атак.</span><span class="sxs-lookup"><span data-stu-id="aaff1-128">Business users have traditionally kept their servers behind a firewall to prevent malicious attacks.</span></span> <span data-ttu-id="aaff1-129">С появлением персонального брандмауэра в [!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)] также значительно увеличилось количество домашних пользователей, защищенных брандмауэром.</span><span class="sxs-lookup"><span data-stu-id="aaff1-129">Since the introduction of the personal firewall in [!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)], the number of home users behind a firewall has greatly increased as well.</span></span> <span data-ttu-id="aaff1-130">Скорее всего, одна или обе конечных точки подключения снабжены брандмауэром, проверяющим пакеты.</span><span class="sxs-lookup"><span data-stu-id="aaff1-130">This makes it likely that one or both ends of a connection have a firewall examining packets.</span></span>  
  
 <span data-ttu-id="aaff1-131">Брандмауэры очень сильно различаются по своей сложности и возможностям проверки пакетов.</span><span class="sxs-lookup"><span data-stu-id="aaff1-131">Firewalls vary greatly in terms of their complexity and capability for examining packets.</span></span> <span data-ttu-id="aaff1-132">Простые брандмауэры применяют правила на основании исходного и конечного адресов и портов, указанных в пакетах.</span><span class="sxs-lookup"><span data-stu-id="aaff1-132">Simple firewalls apply rules based on the source and destination addresses and ports in packets.</span></span> <span data-ttu-id="aaff1-133">Более сложные брандмауэры также проверяют содержимое пакетов.</span><span class="sxs-lookup"><span data-stu-id="aaff1-133">Intelligent firewalls can also examine the contents of packets to make decisions.</span></span> <span data-ttu-id="aaff1-134">Такие брандмауэры поставляются в различных конфигурациях и часто используются для специализированных приложений.</span><span class="sxs-lookup"><span data-stu-id="aaff1-134">These firewalls come in many different configurations and are often used for specialized applications.</span></span>  
  
 <span data-ttu-id="aaff1-135">В типичной конфигурации домашнего пользователя брандмауэр запрещает входящие подключения кроме случаев, когда ранее было установлено исходящее подключение к этому компьютеру.</span><span class="sxs-lookup"><span data-stu-id="aaff1-135">A common configuration for a home user firewall is to prohibit incoming connections unless an outgoing connection was made to that machine previously.</span></span> <span data-ttu-id="aaff1-136">В типичной конфигурации корпоративного пользователя брандмауэр запрещает входящие подключения ко всем портам за исключением группы заданных портов.</span><span class="sxs-lookup"><span data-stu-id="aaff1-136">A common configuration for a business user firewall is to prohibit incoming connections on all ports except a group specifically identified.</span></span> <span data-ttu-id="aaff1-137">Примером служит брандмауэр, который запрещает подключения ко всем портам, кроме портов 80 и 443 для предоставления услуг HTTP и HTTPS.</span><span class="sxs-lookup"><span data-stu-id="aaff1-137">An example is a firewall that prohibits connections on all ports except for ports 80 and 443 to provide HTTP and HTTPS service.</span></span> <span data-ttu-id="aaff1-138">Также домашним и корпоративным пользователям предлагаются управляемые брандмауэры, которые разрешают доверенному пользователю или процессу изменять конфигурацию брандмауэра.</span><span class="sxs-lookup"><span data-stu-id="aaff1-138">Managed firewalls exist for both home and business users that permit a trusted user or process on the machine to change the firewall configuration.</span></span> <span data-ttu-id="aaff1-139">Управляемые брандмауэры чаще используются домашними пользователями, у которых нет корпоративной политики по контролю за использованием сети.</span><span class="sxs-lookup"><span data-stu-id="aaff1-139">Managed firewalls are more common for home users where there is no corporate policy controlling network usage.</span></span>  
  
## <a name="using-teredo"></a><span data-ttu-id="aaff1-140">Использование Teredo</span><span class="sxs-lookup"><span data-stu-id="aaff1-140">Using Teredo</span></span>  
 <span data-ttu-id="aaff1-141">Teredo является технологией перехода на IPv6, позволяющей напрямую обращаться к адресам компьютеров, находящихся за устройством преобразования сетевых адресов (NAT).</span><span class="sxs-lookup"><span data-stu-id="aaff1-141">Teredo is an IPv6 transition technology that enables the direct addressability of machines behind a NAT.</span></span> <span data-ttu-id="aaff1-142">Teredo опирается на использование сервера, который может публично и глобально маршрутизироваться для объявления возможных подключений.</span><span class="sxs-lookup"><span data-stu-id="aaff1-142">Teredo relies on the use of a server that can be publicly and globally routed to advertise potential connections.</span></span> <span data-ttu-id="aaff1-143">Сервер Teredo служит общей точкой пересечения для клиента и сервера приложения, с помощью которой они могут обмениваться информацией о подключении.</span><span class="sxs-lookup"><span data-stu-id="aaff1-143">The Teredo server gives the application client and server a common meeting point at which they can exchange connection information.</span></span> <span data-ttu-id="aaff1-144">Затем компьютеры запрашивают временный адрес Teredo, а пакеты туннелируются по существующей сети.</span><span class="sxs-lookup"><span data-stu-id="aaff1-144">The machines then request a temporary Teredo address, and packets are tunneled through the existing network.</span></span> <span data-ttu-id="aaff1-145">Поддержки Teredo в WCF необходимо включить поддержку IPv6 и Teredo в операционной системе.</span><span class="sxs-lookup"><span data-stu-id="aaff1-145">Teredo support in WCF requires enabling IPv6 and Teredo support in the operating system.</span></span> <span data-ttu-id="aaff1-146">Teredo поддерживается операционными системами, начиная с [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="aaff1-146">[!INCLUDE[wxp](../../../../includes/wxp-md.md)] and later operating systems support Teredo.</span></span> <span data-ttu-id="aaff1-147">Операционные системы, начиная с [!INCLUDE[wv](../../../../includes/wv-md.md)], поддерживают IPv6 по умолчанию, пользователю необходимо лишь включить поддержку Teredo.</span><span class="sxs-lookup"><span data-stu-id="aaff1-147">[!INCLUDE[wv](../../../../includes/wv-md.md)] and later operating systems support IPv6 by default and only require the user to enable Teredo.</span></span> <span data-ttu-id="aaff1-148">В операционных системах [!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)] и [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] пользователю необходимо включить поддержку и IPv6 и Teredo.</span><span class="sxs-lookup"><span data-stu-id="aaff1-148">[!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)] and [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] require the user to enable both IPv6 and Teredo.</span></span> <span data-ttu-id="aaff1-149">Дополнительные сведения см. в разделе [Teredo Overview](https://go.microsoft.com/fwlink/?LinkId=87571).</span><span class="sxs-lookup"><span data-stu-id="aaff1-149">For more information, see the [Teredo Overview](https://go.microsoft.com/fwlink/?LinkId=87571).</span></span>  
  
## <a name="choosing-a-transport-and-message-exchange-pattern"></a><span data-ttu-id="aaff1-150">Выбор транспорта и шаблона обмена сообщениями</span><span class="sxs-lookup"><span data-stu-id="aaff1-150">Choosing a Transport and Message Exchange Pattern</span></span>  
 <span data-ttu-id="aaff1-151">Выбор транспорта и шаблона обмена сообщениями осуществляется в три этапа.</span><span class="sxs-lookup"><span data-stu-id="aaff1-151">Selecting a transport and MEP is a three-step process:</span></span>  
  
1. <span data-ttu-id="aaff1-152">Анализ возможности адресации компьютеров конечной точки.</span><span class="sxs-lookup"><span data-stu-id="aaff1-152">Analyze the addressability of the endpoint machines.</span></span> <span data-ttu-id="aaff1-153">В большинстве случаев для корпоративных серверов доступна прямая адресация, а возможность адресации конечных пользователей блокируется средствами NAT.</span><span class="sxs-lookup"><span data-stu-id="aaff1-153">Enterprise servers commonly have direct addressability, while end users commonly have their addressability blocked by NATs.</span></span> <span data-ttu-id="aaff1-154">Если обе конечные точки защищены средствами NAT, например в одноранговых сценариях взаимодействия между конечными пользователями, для обеспечения возможности адресации может потребоваться использование такой технологии, как Teredo.</span><span class="sxs-lookup"><span data-stu-id="aaff1-154">If both endpoints are behind a NAT, such as in peer-to-peer scenarios between end users, then you might need a technology such as Teredo to provide addressability.</span></span>  
  
2. <span data-ttu-id="aaff1-155">Анализ ограничений протокола и портов компьютеров конечной точки.</span><span class="sxs-lookup"><span data-stu-id="aaff1-155">Analyze the protocol and port restrictions of the endpoint machines.</span></span> <span data-ttu-id="aaff1-156">Корпоративные серверы, как правило, находятся за мощными брандмауэрами, которые блокируют многие порты.</span><span class="sxs-lookup"><span data-stu-id="aaff1-156">Enterprise servers are typically behind strong firewalls that block many ports.</span></span> <span data-ttu-id="aaff1-157">Однако зачастую открыт порт 80 для трафика HTTP и порт 443 для трафика HTTPS.</span><span class="sxs-lookup"><span data-stu-id="aaff1-157">However, port 80 is frequently open to permit HTTP traffic, and port 443 is open to permit HTTPS traffic.</span></span> <span data-ttu-id="aaff1-158">Ограничения портов у конечных пользователей применяются реже, однако может использоваться брандмауэр, разрешающий только исходящие подключения.</span><span class="sxs-lookup"><span data-stu-id="aaff1-158">End users are less likely to have port restrictions but might be behind a firewall that permits only outgoing connections.</span></span> <span data-ttu-id="aaff1-159">В некоторых брандмауэрах предусмотрена возможность избирательного открытия подключений для отдельных приложений на конечной точке.</span><span class="sxs-lookup"><span data-stu-id="aaff1-159">Some firewalls permit management by applications on the endpoint to selectively open connections.</span></span>  
  
3. <span data-ttu-id="aaff1-160">Выбор транспортов и шаблонов обмена сообщениями с учетом возможности адресации и ограничения портов в сети.</span><span class="sxs-lookup"><span data-stu-id="aaff1-160">Compute the transports and MEPs that the addressability and port restrictions of the network permit.</span></span>  
  
 <span data-ttu-id="aaff1-161">В типичной топологии клиент-серверных приложений клиенты расположены за средством NAT без поддержки Teredo с брандмауэром, разрешающим только исходящий трафик. При этом сервер с возможностью прямой адресации расположен за мощным брандмауэром.</span><span class="sxs-lookup"><span data-stu-id="aaff1-161">A common topology for client-server applications is to have clients that are behind a NAT without Teredo with an outbound-only firewall and a server that is directly addressable with a strong firewall.</span></span> <span data-ttu-id="aaff1-162">Для такого сценария хорошо подходит транспорт TCP с дуплексным шаблоном обмена сообщениями и транспорт HTTP с шаблоном обмена сообщениями типа "запрос-ответ".</span><span class="sxs-lookup"><span data-stu-id="aaff1-162">In this scenario, the TCP transport with a duplex MEP and an HTTP transport with a request-reply MEP work well.</span></span> <span data-ttu-id="aaff1-163">В типичной топологии одноранговых приложений обе конечные точки находятся за средствами NAT и брандмауэрами.</span><span class="sxs-lookup"><span data-stu-id="aaff1-163">A common topology for peer-to-peer applications is to have both endpoints behind NATs and firewalls.</span></span> <span data-ttu-id="aaff1-164">В таком сценарии и в сценариях с неизвестной топологией сети необходимо учитывать следующие рекомендации.</span><span class="sxs-lookup"><span data-stu-id="aaff1-164">In this scenario, and in scenarios where the network topology is unknown, consider the following recommendations:</span></span>  
  
- <span data-ttu-id="aaff1-165">Не используйте двусторонние транспорты.</span><span class="sxs-lookup"><span data-stu-id="aaff1-165">Do not use dual transports.</span></span> <span data-ttu-id="aaff1-166">Двусторонний транспорт открывает больше подключений, что снижает вероятность успешного установления подключения.</span><span class="sxs-lookup"><span data-stu-id="aaff1-166">A dual transport opens more connections, which reduces the chance of connecting successfully.</span></span>  
  
- <span data-ttu-id="aaff1-167">Поддержка установления обратных каналов в исходном подключении.</span><span class="sxs-lookup"><span data-stu-id="aaff1-167">Support establishing back channels over the originating connection.</span></span> <span data-ttu-id="aaff1-168">При использовании обратных каналов, например дуплексного TCP, открывается меньшее количество подключений, что повышает вероятность успешного установления подключения.</span><span class="sxs-lookup"><span data-stu-id="aaff1-168">Using back channels, such as in duplex TCP, opens fewer connections, which increases the chance of connecting successfully.</span></span>  
  
- <span data-ttu-id="aaff1-169">Использование доступной службы либо для регистрации конечных точек, либо для перенаправления трафика.</span><span class="sxs-lookup"><span data-stu-id="aaff1-169">Employ a reachable service for either registering endpoints or relaying traffic.</span></span> <span data-ttu-id="aaff1-170">Использование глобально доступной службы подключения, например сервера Teredo, существенно повышает вероятность успешного подключения в случае неизвестной топологии сети или топологии сети с ограничениями.</span><span class="sxs-lookup"><span data-stu-id="aaff1-170">Using a globally reachable connection service, such as a Teredo server, greatly increases the chance of connecting successfully when the network topology is restrictive or unknown.</span></span>  
  
 <span data-ttu-id="aaff1-171">Проверьте следующие таблицы, односторонние, запрос ответ и дуплексный шаблонов обмена сообщениями и стандартный TCP, TCP с Teredo, и транспорт стандартный и двусторонний HTTP в WCF.</span><span class="sxs-lookup"><span data-stu-id="aaff1-171">The following tables examine the one-way, request-reply, and duplex MEPs, and the standard TCP, TCP with Teredo, and standard and dual HTTP transports in WCF.</span></span>  
  
|<span data-ttu-id="aaff1-172">Возможность адресации</span><span class="sxs-lookup"><span data-stu-id="aaff1-172">Addressability</span></span>|<span data-ttu-id="aaff1-173">Прямая адресация сервера</span><span class="sxs-lookup"><span data-stu-id="aaff1-173">Server Direct</span></span>|<span data-ttu-id="aaff1-174">Прямая адресация сервера с обходом NAT</span><span class="sxs-lookup"><span data-stu-id="aaff1-174">Server Direct with NAT traversal</span></span>|<span data-ttu-id="aaff1-175">Сервер NAT</span><span class="sxs-lookup"><span data-stu-id="aaff1-175">Server NAT</span></span>|<span data-ttu-id="aaff1-176">Сервер NAT с обходом NAT</span><span class="sxs-lookup"><span data-stu-id="aaff1-176">Server NAT with NAT traversal</span></span>|  
|--------------------|-------------------|--------------------------------------|----------------|-----------------------------------|  
|<span data-ttu-id="aaff1-177">Прямая адресация клиента</span><span class="sxs-lookup"><span data-stu-id="aaff1-177">Client direct</span></span>|<span data-ttu-id="aaff1-178">Любой транспорт и шаблон обмена сообщениями</span><span class="sxs-lookup"><span data-stu-id="aaff1-178">Any transport and MEP</span></span>|<span data-ttu-id="aaff1-179">Любой транспорт и шаблон обмена сообщениями</span><span class="sxs-lookup"><span data-stu-id="aaff1-179">Any transport and MEP</span></span>|<span data-ttu-id="aaff1-180">Не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="aaff1-180">Not supported.</span></span>|<span data-ttu-id="aaff1-181">Не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="aaff1-181">Not supported.</span></span>|  
|<span data-ttu-id="aaff1-182">Прямая адресация клиента с обходом NAT</span><span class="sxs-lookup"><span data-stu-id="aaff1-182">Client direct with NAT traversal</span></span>|<span data-ttu-id="aaff1-183">Любой транспорт и шаблон обмена сообщениями</span><span class="sxs-lookup"><span data-stu-id="aaff1-183">Any transport and MEP.</span></span>|<span data-ttu-id="aaff1-184">Любой транспорт и шаблон обмена сообщениями</span><span class="sxs-lookup"><span data-stu-id="aaff1-184">Any transport and MEP.</span></span>|<span data-ttu-id="aaff1-185">Не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="aaff1-185">Not supported.</span></span>|<span data-ttu-id="aaff1-186">TCP с Teredo и любым шаблоном обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="aaff1-186">TCP with Teredo and any MEP.</span></span> <span data-ttu-id="aaff1-187">В операционной системе [!INCLUDE[wv](../../../../includes/wv-md.md)] предусмотрен параметр конфигурации компьютера для поддержки HTTP с Teredo.</span><span class="sxs-lookup"><span data-stu-id="aaff1-187">[!INCLUDE[wv](../../../../includes/wv-md.md)] has a machine-wide configuration option to support HTTP with Teredo.</span></span>|  
|<span data-ttu-id="aaff1-188">Клиент NAT</span><span class="sxs-lookup"><span data-stu-id="aaff1-188">Client NAT</span></span>|<span data-ttu-id="aaff1-189">Любой односторонний транспорт и шаблон обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="aaff1-189">Any non-dual transport and MEP.</span></span> <span data-ttu-id="aaff1-190">Для шаблона дуплексного обмена сообщениями требуется TCP-транспорт.</span><span class="sxs-lookup"><span data-stu-id="aaff1-190">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="aaff1-191">Любой односторонний транспорт и шаблон обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="aaff1-191">Any non-dual transport and MEP.</span></span> <span data-ttu-id="aaff1-192">Для шаблона дуплексного обмена сообщениями требуется TCP-транспорт.</span><span class="sxs-lookup"><span data-stu-id="aaff1-192">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="aaff1-193">Не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="aaff1-193">Not supported.</span></span>|<span data-ttu-id="aaff1-194">Не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="aaff1-194">Not supported.</span></span>|  
|<span data-ttu-id="aaff1-195">Клиент NAT с обходом NAT</span><span class="sxs-lookup"><span data-stu-id="aaff1-195">Client NAT with NAT traversal</span></span>|<span data-ttu-id="aaff1-196">Любой односторонний транспорт и шаблон обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="aaff1-196">Any non-dual transport and MEP.</span></span> <span data-ttu-id="aaff1-197">Для шаблона дуплексного обмена сообщениями требуется TCP-транспорт.</span><span class="sxs-lookup"><span data-stu-id="aaff1-197">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="aaff1-198">Любой транспорт, кроме двустороннего HTTP, и любой шаблон обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="aaff1-198">All but dual HTTP and any MEP.</span></span> <span data-ttu-id="aaff1-199">Для шаблона дуплексного обмена сообщениями требуется TCP-транспорт.</span><span class="sxs-lookup"><span data-stu-id="aaff1-199">Duplex MEP requires TCP transport.</span></span> <span data-ttu-id="aaff1-200">Для двустороннего TCP-транспорта требуется Teredo.</span><span class="sxs-lookup"><span data-stu-id="aaff1-200">Dual TCP transport requires Teredo.</span></span> <span data-ttu-id="aaff1-201">В операционной системе [!INCLUDE[wv](../../../../includes/wv-md.md)] предусмотрен параметр конфигурации компьютера для поддержки HTTP с Teredo.</span><span class="sxs-lookup"><span data-stu-id="aaff1-201">[!INCLUDE[wv](../../../../includes/wv-md.md)] has a machine-wide configuration option to support HTTP with Teredo.</span></span>|<span data-ttu-id="aaff1-202">Не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="aaff1-202">Not supported.</span></span>|<span data-ttu-id="aaff1-203">TCP с Teredo и любым шаблоном обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="aaff1-203">TCP with Teredo and any MEP.</span></span> <span data-ttu-id="aaff1-204">В операционной системе [!INCLUDE[wv](../../../../includes/wv-md.md)] предусмотрен параметр конфигурации компьютера для поддержки HTTP с Teredo.</span><span class="sxs-lookup"><span data-stu-id="aaff1-204">[!INCLUDE[wv](../../../../includes/wv-md.md)] has a machine-wide configuration option to support HTTP with Teredo.</span></span>|  
  
|<span data-ttu-id="aaff1-205">Ограничения брандмауэра</span><span class="sxs-lookup"><span data-stu-id="aaff1-205">Firewall restrictions</span></span>|<span data-ttu-id="aaff1-206">Открытый сервер</span><span class="sxs-lookup"><span data-stu-id="aaff1-206">Server open</span></span>|<span data-ttu-id="aaff1-207">Сервер с управляемым брандмауэром</span><span class="sxs-lookup"><span data-stu-id="aaff1-207">Server with managed firewall</span></span>|<span data-ttu-id="aaff1-208">Сервер с брандмауэром, разрешающим только трафик HTTP</span><span class="sxs-lookup"><span data-stu-id="aaff1-208">Server with HTTP-only firewall</span></span>|<span data-ttu-id="aaff1-209">Сервер с брандмауэром, разрешающим только исходящий трафик</span><span class="sxs-lookup"><span data-stu-id="aaff1-209">Server with outbound-only firewall</span></span>|  
|---------------------------|-----------------|----------------------------------|-------------------------------------|-----------------------------------------|  
|<span data-ttu-id="aaff1-210">Открытый клиент</span><span class="sxs-lookup"><span data-stu-id="aaff1-210">Client Open</span></span>|<span data-ttu-id="aaff1-211">Любой транспорт и шаблон обмена сообщениями</span><span class="sxs-lookup"><span data-stu-id="aaff1-211">Any transport and MEP.</span></span>|<span data-ttu-id="aaff1-212">Любой транспорт и шаблон обмена сообщениями</span><span class="sxs-lookup"><span data-stu-id="aaff1-212">Any transport and MEP.</span></span>|<span data-ttu-id="aaff1-213">Любой HTTP-транспорт и шаблон обмена сообщениями</span><span class="sxs-lookup"><span data-stu-id="aaff1-213">Any HTTP transport and MEP.</span></span>|<span data-ttu-id="aaff1-214">Не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="aaff1-214">Not supported.</span></span>|  
|<span data-ttu-id="aaff1-215">Клиент с управляемым брандмауэром</span><span class="sxs-lookup"><span data-stu-id="aaff1-215">Client with managed firewall</span></span>|<span data-ttu-id="aaff1-216">Любой односторонний транспорт и шаблон обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="aaff1-216">Any non-dual transport and MEP.</span></span> <span data-ttu-id="aaff1-217">Для шаблона дуплексного обмена сообщениями требуется TCP-транспорт.</span><span class="sxs-lookup"><span data-stu-id="aaff1-217">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="aaff1-218">Любой односторонний транспорт и шаблон обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="aaff1-218">Any non-dual transport and MEP.</span></span> <span data-ttu-id="aaff1-219">Для шаблона дуплексного обмена сообщениями требуется TCP-транспорт.</span><span class="sxs-lookup"><span data-stu-id="aaff1-219">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="aaff1-220">Любой HTTP-транспорт и шаблон обмена сообщениями</span><span class="sxs-lookup"><span data-stu-id="aaff1-220">Any HTTP transport and MEP.</span></span>|<span data-ttu-id="aaff1-221">Не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="aaff1-221">Not supported.</span></span>|  
|<span data-ttu-id="aaff1-222">Клиент с брандмауэром, разрешающим только трафик HTTP</span><span class="sxs-lookup"><span data-stu-id="aaff1-222">Client with HTTP-only firewall</span></span>|<span data-ttu-id="aaff1-223">Любой HTTP-транспорт и шаблон обмена сообщениями</span><span class="sxs-lookup"><span data-stu-id="aaff1-223">Any HTTP transport and MEP.</span></span>|<span data-ttu-id="aaff1-224">Любой HTTP-транспорт и шаблон обмена сообщениями</span><span class="sxs-lookup"><span data-stu-id="aaff1-224">Any HTTP transport and MEP.</span></span>|<span data-ttu-id="aaff1-225">Любой HTTP-транспорт и шаблон обмена сообщениями</span><span class="sxs-lookup"><span data-stu-id="aaff1-225">Any HTTP transport and MEP.</span></span>|<span data-ttu-id="aaff1-226">Не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="aaff1-226">Not supported.</span></span>|  
|<span data-ttu-id="aaff1-227">Клиент с брандмауэром, разрешающим только исходящий трафик</span><span class="sxs-lookup"><span data-stu-id="aaff1-227">Client with outbound-only firewall</span></span>|<span data-ttu-id="aaff1-228">Любой односторонний транспорт и шаблон обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="aaff1-228">Any non-dual transport and MEP.</span></span> <span data-ttu-id="aaff1-229">Для шаблона дуплексного обмена сообщениями требуется TCP-транспорт.</span><span class="sxs-lookup"><span data-stu-id="aaff1-229">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="aaff1-230">Любой односторонний транспорт и шаблон обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="aaff1-230">Any non-dual transport and MEP.</span></span> <span data-ttu-id="aaff1-231">Для шаблона дуплексного обмена сообщениями требуется TCP-транспорт.</span><span class="sxs-lookup"><span data-stu-id="aaff1-231">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="aaff1-232">Любой HTTP-транспорт и любой недуплексный шаблон обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="aaff1-232">Any HTTP transport and any non-duplex MEP.</span></span>|<span data-ttu-id="aaff1-233">Не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="aaff1-233">Not supported.</span></span>|
