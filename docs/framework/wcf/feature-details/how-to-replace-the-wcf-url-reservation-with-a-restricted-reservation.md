---
title: Практическое руководство. Как заменить URL-резервирование WCF на ограниченное резервирование
ms.date: 03/30/2017
ms.assetid: 2754d223-79fc-4e2b-a6ce-989889f2abfa
ms.openlocfilehash: f9cfda1d4ca14dd380dd01f944d4c900f9832096
ms.sourcegitcommit: 558d78d2a68acd4c95ef23231c8b4e4c7bac3902
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2019
ms.locfileid: "59307565"
---
# <a name="how-to-replace-the-wcf-url-reservation-with-a-restricted-reservation"></a><span data-ttu-id="b9e7b-102">Практическое руководство. Как заменить URL-резервирование WCF на ограниченное резервирование</span><span class="sxs-lookup"><span data-stu-id="b9e7b-102">How to: Replace the WCF URL Reservation with a Restricted Reservation</span></span>
<span data-ttu-id="b9e7b-103">Резервирование URL-адреса позволяет ограничить список тех, кто может получать сообщения с URL-адреса или набора URL-адресов.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-103">A URL reservation allows you to restrict who can receive messages from a URL or a set of URLs.</span></span> <span data-ttu-id="b9e7b-104">Резервирование включает шаблон URL-адреса, список управления доступом (ACL) и набор флагов.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-104">A reservation consists of a URL template, an access control list (ACL), and a set of flags.</span></span> <span data-ttu-id="b9e7b-105">Шаблон URL-адреса определяет, какие URL-адреса будут затронуты резервированием.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-105">The URL template defines which URLs the reservation affects.</span></span> <span data-ttu-id="b9e7b-106">Дополнительные сведения об обработке шаблонов URL-адресов см. в разделе [Маршрутизация входящих запросов](https://go.microsoft.com/fwlink/?LinkId=136764).</span><span class="sxs-lookup"><span data-stu-id="b9e7b-106">For more information about how URL templates are processed, see [Routing Incoming Requests](https://go.microsoft.com/fwlink/?LinkId=136764).</span></span> <span data-ttu-id="b9e7b-107">Список управления доступом (ACL) управляет тем, какой пользователь или группа пользователей может получать сообщения с указанных URL-адресов.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-107">The ACL controls what user or group of users is permitted to receive messages from the specified URLs.</span></span> <span data-ttu-id="b9e7b-108">Флаги указывают, разрешает ли резервирование пользователю или группе отслеживать URL-адрес напрямую или делегирует это разрешение какому-либо другому процессу.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-108">The flags indicate whether the reservation is to give a user or group permission to listen on the URL directly or to delegate the permission to listen to some other process.</span></span>  
  
 <span data-ttu-id="b9e7b-109">Как часть конфигурации операционной системы по умолчанию Windows Communication Foundation (WCF) создает глобально допустимое резервирование для порта 80, чтобы все пользователи могли запускать приложения, использующие двойная привязка HTTP для дуплексной связи.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-109">As part of the default operating system configuration, Windows Communication Foundation (WCF) creates a globally accessible reservation for port 80 to enable all users to run applications that use a dual HTTP binding for duplex communication.</span></span> <span data-ttu-id="b9e7b-110">Поскольку список управления доступом (ACL) для данного резервирования предназначен для каждого пользователя, администраторы не могут явным образом позволить или запретить отслеживать URL-адрес или набор URL-адресов.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-110">Because the ACL on this reservation is for everyone, administrators cannot explicitly allow or disallow permission to listen on a URL or set of URLs.</span></span> <span data-ttu-id="b9e7b-111">В данном разделе объясняется, как удалить это резервирование и создать его повторно с ограниченным списком управления доступом (ACL).</span><span class="sxs-lookup"><span data-stu-id="b9e7b-111">This topic explains how to delete this reservation and how to re-create the reservation with a restricted ACL.</span></span>  
  
 <span data-ttu-id="b9e7b-112">В [!INCLUDE[wv](../../../../includes/wv-md.md)] или [!INCLUDE[lserver](../../../../includes/lserver-md.md)] можно просмотреть все резервирования HTTP URL-адресов, выполнив в командной строке с правами администратора команду `netsh http show urlacl`.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-112">On [!INCLUDE[wv](../../../../includes/wv-md.md)] or [!INCLUDE[lserver](../../../../includes/lserver-md.md)] you can view all of the HTTP URL reservations from an elevated command prompt by typing `netsh http show urlacl`.</span></span>  <span data-ttu-id="b9e7b-113">В следующем примере показано, резервирование URL-адрес WCF, которые должен выглядеть.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-113">The following example shows what a WCF URL reservation should resemble.</span></span>  
  
```  
Reserved URL : http://+:80/Temporary_Listen_Addresses/  
        User: \Everyone  
            Listen: Yes  
            Delegate: No  
            SDDL: D:(A;;GX;;;WD)  
```  
  
 <span data-ttu-id="b9e7b-114">Резервирование включает шаблон URL-адрес, используемый при приложения WCF использует двойную привязку HTTP для дуплексной связи.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-114">The reservation consists of a URL template used when a WCF application is using an HTTP dual binding for duplex communication.</span></span> <span data-ttu-id="b9e7b-115">URL-адреса этого вида используются для службы WCF для отправки сообщений обратно клиенту WCF при обмене данными через двойную привязку HTTP.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-115">URLs of this form are used for a WCF service to send messages back to the WCF client when communicating over a HTTP dual binding.</span></span> <span data-ttu-id="b9e7b-116">Каждый пользователь получает разрешение отслеживать URL-адрес, но не может делегировать отслеживание другому процессу.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-116">Everyone is given permission to listen on the URL but not to delegate listening to another process.</span></span> <span data-ttu-id="b9e7b-117">Наконец, список управления доступом (ACL) описывается на языке Security Descriptor Definition Language (SSDL).</span><span class="sxs-lookup"><span data-stu-id="b9e7b-117">Finally, the ACL is described in Security Descriptor Definition Language (SSDL).</span></span> <span data-ttu-id="b9e7b-118">Дополнительные сведения о языке SSDL, см. в разделе [SSDL](https://go.microsoft.com/fwlink/?LinkId=136789)</span><span class="sxs-lookup"><span data-stu-id="b9e7b-118">For more information about SSDL, see [SSDL](https://go.microsoft.com/fwlink/?LinkId=136789)</span></span>  
  
### <a name="to-delete-the-wcf-url-reservation"></a><span data-ttu-id="b9e7b-119">Удаление резервирования URL-адреса WCF</span><span class="sxs-lookup"><span data-stu-id="b9e7b-119">To delete the WCF URL reservation</span></span>  
  
1. <span data-ttu-id="b9e7b-120">Нажмите кнопку **запустить**, пункты **все программы**, нажмите кнопку **стандартные**, щелкните правой кнопкой мыши **командной** и нажмите кнопку **Запуск от имени Администратор** в появившемся контекстном меню.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-120">Click **Start**, point to **All Programs**, click **Accessories**, right-click **Command Prompt** and click **Run as Administrator** on the context menu that comes up.</span></span> <span data-ttu-id="b9e7b-121">Нажмите кнопку **Продолжить** в окне контроля учетных записей (UAC), которое может запросить разрешение на продолжение.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-121">Click **Continue** on the User Account Control (UAC) window that might ask permissions to continue.</span></span>  
  
2. <span data-ttu-id="b9e7b-122">Введите в **netsh http delete, urlacl url =http://+:80/Temporary_Listen_Addresses/**  в окне командной строки.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-122">Type in **netsh http delete urlacl url=http://+:80/Temporary_Listen_Addresses/** in the command prompt window.</span></span>  
  
3. <span data-ttu-id="b9e7b-123">Если резервирование удалено успешно, появится следующее сообщение.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-123">If the reservation is deleted successfully, the following message is displayed.</span></span> **<span data-ttu-id="b9e7b-124">Резервирование URL-адреса удалено успешно</span><span class="sxs-lookup"><span data-stu-id="b9e7b-124">URL reservation successfully deleted</span></span>**  
  
## <a name="creating-a-new-security-group-and-new-restricted-url-reservation"></a><span data-ttu-id="b9e7b-125">Создание новой группы безопасности и нового ограниченного резервирования URL-адреса</span><span class="sxs-lookup"><span data-stu-id="b9e7b-125">Creating a New Security Group and New Restricted URL Reservation</span></span>  
 <span data-ttu-id="b9e7b-126">Чтобы заменить резервирование URL-адрес WCF ограниченным резервированием сначала необходимо создать новую группу безопасности.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-126">To replace the WCF URL reservation with a restricted reservation you must first create a new security group.</span></span> <span data-ttu-id="b9e7b-127">Это можно сделать двумя способами: из командной строки или из консоли управления компьютером.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-127">You can do this in one of two ways: from a command prompt or from the computer management console.</span></span> <span data-ttu-id="b9e7b-128">Требуется выполнить только одно действие.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-128">You only have to do one.</span></span>  
  
#### <a name="to-create-a-new-security-group-from-a-command-prompt"></a><span data-ttu-id="b9e7b-129">Создание новой группы безопасности из командной строки</span><span class="sxs-lookup"><span data-stu-id="b9e7b-129">To create a new security group from a command prompt</span></span>  
  
1. <span data-ttu-id="b9e7b-130">Нажмите кнопку **запустить**, пункты **все программы**, нажмите кнопку **стандартные**, щелкните правой кнопкой мыши **командной** и нажмите кнопку **Запуск от имени Администратор** в появившемся контекстном меню.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-130">Click **Start**, point to **All Programs**, click **Accessories**, right-click **Command Prompt** and click **Run as Administrator** on the context menu that comes up.</span></span> <span data-ttu-id="b9e7b-131">Нажмите кнопку **Продолжить** в окне контроля учетных записей (UAC), которое может запросить разрешение на продолжение.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-131">Click **Continue** on the User Account Control (UAC) window that might ask permissions to continue.</span></span>  
  
2. <span data-ttu-id="b9e7b-132">Введите в **net localgroup "\<имя группы безопасности >» / comment:»\<описание группы безопасности >» / add** в командной строке.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-132">Type in **net localgroup "\<security group name>" /comment:"\<security group description>" /add** at the command prompt.</span></span> <span data-ttu-id="b9e7b-133">Замена  **\<имя группы безопасности >** с именем группы безопасности, необходимо создать и  **\<описание группы безопасности >** на подходящее описание для Группа безопасности.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-133">Replacing **\<security group name>** with the name of the security group you want to create and **\<security group description>** with a suitable description for the security group.</span></span>  
  
3. <span data-ttu-id="b9e7b-134">Если группа безопасности создана успешно, появится следующее сообщение.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-134">If the security group is created successfully, the following message is displayed.</span></span> **<span data-ttu-id="b9e7b-135">Команда завершена успешно.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-135">The command completed successfully.</span></span>**  
  
#### <a name="to-create-a-new-security-group-from-the-computer-management-console"></a><span data-ttu-id="b9e7b-136">Создание новой группы безопасности из консоли управления компьютером</span><span class="sxs-lookup"><span data-stu-id="b9e7b-136">To create a new security group from the computer management console</span></span>  
  
1. <span data-ttu-id="b9e7b-137">Нажмите кнопку **запустить**, нажмите кнопку **панели управления**, нажмите кнопку **Администрирование**и нажмите кнопку **Управление компьютером** открывая компьютер Консоль управления.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-137">Click **Start**, click **Control Panel**, click **Administrative Tools**, and click **Computer Management** to open up the Computer Management Console.</span></span> <span data-ttu-id="b9e7b-138">Нажмите кнопку **Продолжить** в окне контроля учетных записей (UAC), которое может запросить разрешение на продолжение.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-138">Click **Continue** on the User Account Control (UAC) window that might ask permissions to continue.</span></span>  
  
2. <span data-ttu-id="b9e7b-139">Нажмите кнопку **Служебные**, нажмите кнопку **локальные пользователи и группы**, щелкните правой кнопкой мыши **группы** папку и нажмите кнопку **новая группа** в контекстном меню, появится.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-139">Click **System Tools**, click **Local Users and Groups**, right-click **Groups** folder and click **New Group** on the context menu that comes up.</span></span> <span data-ttu-id="b9e7b-140">Введите желаемое **имя группы**, **описание** и другие сведения об этой новой группы безопасности и выберите **создать** кнопку, чтобы создать группу безопасности.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-140">Type in the desired **Group Name**, **Description** and other details of this new security group and click the **Create** button to create the security group.</span></span>  
  
#### <a name="to-create-the-restricted-url-reservation"></a><span data-ttu-id="b9e7b-141">Создание ограниченного резервирования URL-адреса</span><span class="sxs-lookup"><span data-stu-id="b9e7b-141">To create the restricted URL reservation</span></span>  
  
1. <span data-ttu-id="b9e7b-142">Нажмите кнопку **запустить**, пункты **все программы**, нажмите кнопку **стандартные**, щелкните правой кнопкой мыши **командной** и нажмите кнопку **Запуск от имени Администратор** в появившемся контекстном меню.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-142">Click **Start**, point to **All Programs**, click **Accessories**, right-click **Command Prompt** and click **Run as Administrator** on the context menu that comes up.</span></span> <span data-ttu-id="b9e7b-143">Нажмите кнопку **Продолжить** в окне контроля учетных записей (UAC), которое может запросить разрешение на продолжение.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-143">Click **Continue** on the User Account Control (UAC) window that might ask permissions to continue.</span></span>  
  
2. <span data-ttu-id="b9e7b-144">Введите в **netsh http добавьте urlacl URL-адрес =http://+:80/Temporary_Listen_Addresses/ пользователя =»\<имя компьютера >\\< имя группы безопасности\>**  в командной строке.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-144">Type in **netsh http add urlacl url=http://+:80/Temporary_Listen_Addresses/ user="\<machine name>\\<security group name\>** at the command prompt.</span></span> <span data-ttu-id="b9e7b-145">Замена  **\<имя компьютера >** именем компьютера, на котором необходимо создать группу, и  **\<имя группы безопасности >** на имя созданной группы безопасности ранее.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-145">Replacing **\<machine name>** with the computer name on which the group must be created and **\<security group name>** with the name of the security group you created previously.</span></span>  
  
3. <span data-ttu-id="b9e7b-146">Если резервирование создано успешно, появится следующее сообщение.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-146">If the reservation is created successfully, the following message is displayed.</span></span> <span data-ttu-id="b9e7b-147">**Резервирование URL-адреса успешно добавлен**.</span><span class="sxs-lookup"><span data-stu-id="b9e7b-147">**URL reservation successfully added**.</span></span>
