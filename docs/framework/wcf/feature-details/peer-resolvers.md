---
title: Одноранговые распознаватели
ms.date: 03/30/2017
ms.assetid: d86d12a1-7358-450f-9727-b6afb95adb9c
ms.openlocfilehash: de19e08c1c001076c56e26020584d17079f1a45f
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62038705"
---
# <a name="peer-resolvers"></a><span data-ttu-id="0caa8-102">Одноранговые распознаватели</span><span class="sxs-lookup"><span data-stu-id="0caa8-102">Peer Resolvers</span></span>
<span data-ttu-id="0caa8-103">Чтобы подключиться к сетке, одноранговому узлу требуются IP-адреса других узлов.</span><span class="sxs-lookup"><span data-stu-id="0caa8-103">In order to connect to a mesh, a peer node requires the IP addresses of other nodes.</span></span> <span data-ttu-id="0caa8-104">Получение IP-адресов обычно происходит в результате обращения к службе арбитра, которая принимает идентификатор сетки и возвращает список адресов, соответствующих узлам, зарегистрированным для конкретного идентификатора сетки.</span><span class="sxs-lookup"><span data-stu-id="0caa8-104">IP addresses are obtained by contacting a resolver service, which takes the mesh ID and returns a list of addresses corresponding to nodes registered with that particular mesh ID.</span></span> <span data-ttu-id="0caa8-105">Арбитр сохраняет список зарегистрированных адресов, которые он создает при регистрации в службе всех узлов сетки.</span><span class="sxs-lookup"><span data-stu-id="0caa8-105">The resolver keeps a list of registered addresses, which it creates by having each node in the mesh register with the service.</span></span>  
  
 <span data-ttu-id="0caa8-106">С помощью свойства `Resolver` привязки <xref:System.ServiceModel.NetPeerTcpBinding> можно задать конкретную службу однорангового распознавателя для использования.</span><span class="sxs-lookup"><span data-stu-id="0caa8-106">You can specify which PeerResolver service to use through the `Resolver` property of the <xref:System.ServiceModel.NetPeerTcpBinding>.</span></span>  
  
## <a name="supported-peer-resolvers"></a><span data-ttu-id="0caa8-107">Поддерживаемые одноранговые распознаватели</span><span class="sxs-lookup"><span data-stu-id="0caa8-107">Supported Peer Resolvers</span></span>  
 <span data-ttu-id="0caa8-108">Одноранговый канал поддерживает распознаватели двух типов: Peer Name Resolution Protocol (PNRP) и пользовательские службы распознавателя.</span><span class="sxs-lookup"><span data-stu-id="0caa8-108">Peer Channel supports two types of resolvers: Peer Name Resolution Protocol (PNRP), and custom resolver services.</span></span>  
  
 <span data-ttu-id="0caa8-109">По умолчанию для обнаружения одноранговых и соседних узлов в сетке используется служба однорангового распознавателя PNRP.</span><span class="sxs-lookup"><span data-stu-id="0caa8-109">By default, Peer Channel uses the PNRP peer resolver service for discovery of peers and neighbors in the mesh.</span></span> <span data-ttu-id="0caa8-110">Для ситуаций и платформы, где PNRP не недоступна или нереализуема, Windows Communication Foundation (WCF) предоставляет доступ к службе обнаружения альтернативные, основанное на сервер - <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService>.</span><span class="sxs-lookup"><span data-stu-id="0caa8-110">For situations/platforms where PNRP is not available or feasible, Windows Communication Foundation (WCF) provides an alternative, server-based discovery service - the <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService>.</span></span> <span data-ttu-id="0caa8-111">Кроме того, можно явным образом определить пользовательскую службу распознавателя, написав класс, который реализует интерфейс <xref:System.ServiceModel.PeerResolvers.IPeerResolverContract>.</span><span class="sxs-lookup"><span data-stu-id="0caa8-111">You can also explicitly define a custom resolver service by writing a class that implements the <xref:System.ServiceModel.PeerResolvers.IPeerResolverContract> interface.</span></span>  
  
### <a name="peer-name-resolution-protocol-pnrp"></a><span data-ttu-id="0caa8-112">Протокол PNRP</span><span class="sxs-lookup"><span data-stu-id="0caa8-112">Peer Name Resolution Protocol (PNRP)</span></span>  
 <span data-ttu-id="0caa8-113">Протокол PNRP, являющийся распознавателем по умолчанию для [!INCLUDE[wv](../../../../includes/wv-md.md)], представляет собой распределенную бессерверную службу распознавания имен.</span><span class="sxs-lookup"><span data-stu-id="0caa8-113">PNRP, the default resolver for [!INCLUDE[wv](../../../../includes/wv-md.md)], is a distributed, serverless name resolver service.</span></span> <span data-ttu-id="0caa8-114">Протокол PNRP также можно использовать в [!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)], установив пакет Advanced Networking Pack.</span><span class="sxs-lookup"><span data-stu-id="0caa8-114">PNRP can also be used on [!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)] by installing the Advanced Networking Pack.</span></span> <span data-ttu-id="0caa8-115">Любые два клиента, выполняющие одну и ту же версию PNRP, могут находить друг друга с помощью этого протокола, если соблюдаются определенные условия (например, между клиентами нет брандмауэра).</span><span class="sxs-lookup"><span data-stu-id="0caa8-115">Any two clients running the same version of PNRP can locate each other using this protocol, provided they meet certain conditions (such as the lack of an intervening corporate firewall).</span></span> <span data-ttu-id="0caa8-116">Обратите внимание, что версия протокола PNRP, входящая в состав [!INCLUDE[wv](../../../../includes/wv-md.md)], новее версии, включенной в пакет Advanced Networking Pack.</span><span class="sxs-lookup"><span data-stu-id="0caa8-116">Note that the version of PNRP that ships with [!INCLUDE[wv](../../../../includes/wv-md.md)] is newer than the version included in the Advanced Networking Pack.</span></span> <span data-ttu-id="0caa8-117">Проверьте Центр загрузки Майкрософт на наличие обновлений протокола PNRP для [!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0caa8-117">Check the Microsoft Download Center for updates to PNRP for [!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)].</span></span>  
  
### <a name="custom-resolver-services"></a><span data-ttu-id="0caa8-118">Пользовательские службы распознавателя</span><span class="sxs-lookup"><span data-stu-id="0caa8-118">Custom Resolver Services</span></span>  
 <span data-ttu-id="0caa8-119">Если служба PNRP недоступна, или если требуются возможности управления структурой сетки, можно применять пользовательские службы распознавателя на базе сервера.</span><span class="sxs-lookup"><span data-stu-id="0caa8-119">When the PNRP service is unavailable, or you want complete control over mesh shaping, you can use a custom, server-based resolver service.</span></span> <span data-ttu-id="0caa8-120">Можно явным образом определить эту службу путем написания класса распознавателя, реализующего интерфейс <xref:System.ServiceModel.PeerResolvers.IPeerResolverContract>, или с помощью готовой реализации по умолчанию <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService>.</span><span class="sxs-lookup"><span data-stu-id="0caa8-120">You can explicitly define this service by writing a resolver class implementing the <xref:System.ServiceModel.PeerResolvers.IPeerResolverContract> interface, or by using the in-box default implementation, <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService>.</span></span>  
  
 <span data-ttu-id="0caa8-121">При использовании реализации службы по умолчанию срок регистрации клиента истекает через заданный промежуток времени, если клиент явным образом не обновляет регистрацию.</span><span class="sxs-lookup"><span data-stu-id="0caa8-121">Under the default implementation of the service, client registrations expire after a certain amount of time if the client does not explicitly refresh the registration.</span></span> <span data-ttu-id="0caa8-122">Клиенты, использующие службу распознавателя, должны учитывать максимальное время задержки при взаимодействии между клиентом и сервером, чтобы вовремя обновлять регистрацию.</span><span class="sxs-lookup"><span data-stu-id="0caa8-122">Clients using the resolver service must be aware of the upper bound on client-server latency in order to successfully refresh registrations in time.</span></span> <span data-ttu-id="0caa8-123">Для этого необходимо установить в службе распознавателя соответствующее значение времени ожидания обновления (`RefreshInterval`).</span><span class="sxs-lookup"><span data-stu-id="0caa8-123">This involves choosing an appropriate refresh time-out (`RefreshInterval`) on the resolver service.</span></span> <span data-ttu-id="0caa8-124">(Дополнительные сведения см. в разделе [внутри CustomPeerResolverService: Регистрация клиентов](../../../../docs/framework/wcf/feature-details/inside-the-custompeerresolverservice-client-registrations.md).)</span><span class="sxs-lookup"><span data-stu-id="0caa8-124">(For more information, see [Inside the CustomPeerResolverService: Client Registrations](../../../../docs/framework/wcf/feature-details/inside-the-custompeerresolverservice-client-registrations.md).)</span></span>  
  
 <span data-ttu-id="0caa8-125">Кроме того, разработчик приложения должен подумать о защите подключений между клиентами и пользовательской службой распознавателя.</span><span class="sxs-lookup"><span data-stu-id="0caa8-125">The application writer must also consider securing the connection between clients and the custom resolver service.</span></span> <span data-ttu-id="0caa8-126">Для этого можно воспользоваться параметрами безопасности привязки <xref:System.ServiceModel.NetTcpBinding>, которую клиенты используют для связи со службой распознавателя.</span><span class="sxs-lookup"><span data-stu-id="0caa8-126">You may do this by using security settings on the <xref:System.ServiceModel.NetTcpBinding> that clients use to contact the resolver service.</span></span> <span data-ttu-id="0caa8-127">Необходимо задать учетные данные (если они используются) в объекте `ChannelFactory`, который используется для создания однорангового канала.</span><span class="sxs-lookup"><span data-stu-id="0caa8-127">You must specify credentials (if used) on the `ChannelFactory` used to create Peer Channel.</span></span> <span data-ttu-id="0caa8-128">Эти учетные данные передаются в объект `ChannelFactory`, который используется для создания каналов пользовательского распознавателя.</span><span class="sxs-lookup"><span data-stu-id="0caa8-128">These credentials are passed to the `ChannelFactory` used to create channels to the custom resolver.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0caa8-129">При использовании локальных или импровизированных сетей с пользовательским распознавателем настоятельно рекомендуется включать в приложения, которые используют или поддерживают локальные и импровизированные сети, механизм для выбора при подключении одного локального адреса.</span><span class="sxs-lookup"><span data-stu-id="0caa8-129">When using local and impromptu networks with a custom resolver, it is strongly advised that applications using or supporting link-local or impromptu networks include logic that selects a single link-local address to use when connecting.</span></span> <span data-ttu-id="0caa8-130">Это позволит избежать ошибок, связанных с компьютерами с несколькими локальными адресами.</span><span class="sxs-lookup"><span data-stu-id="0caa8-130">This prevents any confusion potentially caused by computers with multiple link-local addresses.</span></span> <span data-ttu-id="0caa8-131">Поэтому одноранговый канал поддерживает одновременное использование только одного локального адреса.</span><span class="sxs-lookup"><span data-stu-id="0caa8-131">In accordance with this, Peer Channel only supports using a single link-local address at any one time.</span></span> <span data-ttu-id="0caa8-132">Этот адрес можно указать в свойстве `ListenIpAddress` привязки <xref:System.ServiceModel.NetPeerTcpBinding>.</span><span class="sxs-lookup"><span data-stu-id="0caa8-132">You may specify this address with the `ListenIpAddress` property on the <xref:System.ServiceModel.NetPeerTcpBinding>.</span></span>  
  
 <span data-ttu-id="0caa8-133">Показывает, как реализовать пользовательский Сопоставитель, см. в разделе [одноранговых каналов пользовательского распознавателя одноранговых узлов](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms751466(v=vs.90)).</span><span class="sxs-lookup"><span data-stu-id="0caa8-133">For a demonstration of how to implement a custom resolver, see [Peer Channel Custom Peer Resolver](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms751466(v=vs.90)).</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="0caa8-134">В этом разделе</span><span class="sxs-lookup"><span data-stu-id="0caa8-134">In This Section</span></span>  
 [<span data-ttu-id="0caa8-135">Внутри CustomPeerResolverService: Регистрация клиентов</span><span class="sxs-lookup"><span data-stu-id="0caa8-135">Inside the CustomPeerResolverService: Client Registrations</span></span>](../../../../docs/framework/wcf/feature-details/inside-the-custompeerresolverservice-client-registrations.md)  
  
## <a name="see-also"></a><span data-ttu-id="0caa8-136">См. также</span><span class="sxs-lookup"><span data-stu-id="0caa8-136">See also</span></span>

- [<span data-ttu-id="0caa8-137">Основные понятия одноранговых каналов</span><span class="sxs-lookup"><span data-stu-id="0caa8-137">Peer Channel Concepts</span></span>](../../../../docs/framework/wcf/feature-details/peer-channel-concepts.md)
- [<span data-ttu-id="0caa8-138">Безопасность одноранговых каналов</span><span class="sxs-lookup"><span data-stu-id="0caa8-138">Peer Channel Security</span></span>](../../../../docs/framework/wcf/feature-details/peer-channel-security.md)
- [<span data-ttu-id="0caa8-139">Создание приложения одноранговых каналов</span><span class="sxs-lookup"><span data-stu-id="0caa8-139">Building a Peer Channel Application</span></span>](../../../../docs/framework/wcf/feature-details/building-a-peer-channel-application.md)
