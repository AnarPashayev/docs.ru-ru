---
title: Основные сведения о проверке подлинности HTTP
description: Ознакомьтесь с этим введением в проверку подлинности HTTP в WCF, включая схемы проверки подлинности HTTP и выбор схемы проверки подлинности.
ms.date: 03/30/2017
ms.assetid: 9376309a-39e3-4819-b47b-a73982b57620
ms.openlocfilehash: 65ccde358f4eb8727e59ca32fb9782b87e29c5c1
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/26/2020
ms.locfileid: "96293524"
---
# <a name="understanding-http-authentication"></a><span data-ttu-id="d2136-103">Основные сведения о проверке подлинности HTTP</span><span class="sxs-lookup"><span data-stu-id="d2136-103">Understanding HTTP Authentication</span></span>

<span data-ttu-id="d2136-104">Проверка подлинности - это процесс проверки наличия у клиента права доступа к ресурсу.</span><span class="sxs-lookup"><span data-stu-id="d2136-104">Authentication is the process of identifying whether a client is eligible to access a resource.</span></span> <span data-ttu-id="d2136-105">Протокол HTTP поддерживает проверку подлинности как средство согласования доступа к защищенному ресурсу.</span><span class="sxs-lookup"><span data-stu-id="d2136-105">The HTTP protocol supports authentication as a means of negotiating access to a secure resource.</span></span>  
  
 <span data-ttu-id="d2136-106">Исходный запрос от клиента как правило является анонимными и не содержит информацию для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="d2136-106">The initial request from a client is typically an anonymous request, not containing any authentication information.</span></span> <span data-ttu-id="d2136-107">Приложения сервера HTTP могут отклонить анонимный запрос, если требуется проверка подлинности.</span><span class="sxs-lookup"><span data-stu-id="d2136-107">HTTP server applications can deny the anonymous request while indicating that authentication is required.</span></span> <span data-ttu-id="d2136-108">Серверное приложение посылает заголовки WWW-Authentication для обозначения поддерживаемых схем проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="d2136-108">The server application sends WWW-Authentication headers to indicate the supported authentication schemes.</span></span> <span data-ttu-id="d2136-109">В этом документе описываются несколько схем проверки подлинности для HTTP и обсуждается их поддержка в Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="d2136-109">This document describes several authentication schemes for HTTP and discusses their support in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="http-authentication-schemes"></a><span data-ttu-id="d2136-110">Схемы проверки подлинности HTTP</span><span class="sxs-lookup"><span data-stu-id="d2136-110">HTTP Authentication Schemes</span></span>  

 <span data-ttu-id="d2136-111">Сервер может указать несколько схем проверки подлинности для выбора клиентом.</span><span class="sxs-lookup"><span data-stu-id="d2136-111">The server can specify multiple authentication schemes for the client to choose from.</span></span> <span data-ttu-id="d2136-112">В следующей таблице описаны некоторые схемы проверки подлинности, которые обычно встречаются в приложениях Windows.</span><span class="sxs-lookup"><span data-stu-id="d2136-112">The following table describes some of the authentication schemes commonly found in Windows applications.</span></span>  
  
|<span data-ttu-id="d2136-113">Схема проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="d2136-113">Authentication Scheme</span></span>|<span data-ttu-id="d2136-114">Описание</span><span class="sxs-lookup"><span data-stu-id="d2136-114">Description</span></span>|  
|---------------------------|-----------------|  
|<span data-ttu-id="d2136-115">Анонимный</span><span class="sxs-lookup"><span data-stu-id="d2136-115">Anonymous</span></span>|<span data-ttu-id="d2136-116">Анонимный запрос не содержит информацию для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="d2136-116">An anonymous request does not contain any authentication information.</span></span> <span data-ttu-id="d2136-117">Это эквивалентно предоставлению доступа к ресурсу без ограничений.</span><span class="sxs-lookup"><span data-stu-id="d2136-117">This is equivalent to granting everyone access to the resource.</span></span>|  
|<span data-ttu-id="d2136-118">Основные</span><span class="sxs-lookup"><span data-stu-id="d2136-118">Basic</span></span>|<span data-ttu-id="d2136-119">Обычная проверка подлинности заключается в передаче строки в кодировке Base64, которая содержит имя пользователя и пароль для клиента.</span><span class="sxs-lookup"><span data-stu-id="d2136-119">Basic authentication sends a Base64-encoded string that contains a user name and password for the client.</span></span> <span data-ttu-id="d2136-120">Base64 не является формой шифрования, ее следует рассматривать как передачу пароля и имени пользователя открытым текстом.</span><span class="sxs-lookup"><span data-stu-id="d2136-120">Base64 is not a form of encryption and should be considered the same as sending the user name and password in clear text.</span></span> <span data-ttu-id="d2136-121">Если требуется защита ресурса, настоятельно рекомендуется использовать схему проверку подлинности, отличную от обычной.</span><span class="sxs-lookup"><span data-stu-id="d2136-121">If a resource needs to be protected, strongly consider using an authentication scheme other than basic authentication.</span></span>|  
|<span data-ttu-id="d2136-122">Digest (дайджест)</span><span class="sxs-lookup"><span data-stu-id="d2136-122">Digest</span></span>|<span data-ttu-id="d2136-123">Дайджест-проверка подлинности - это схема запроса-ответа, предназначенная для замены обычной проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="d2136-123">Digest authentication is a challenge-response scheme that is intended to replace Basic authentication.</span></span> <span data-ttu-id="d2136-124">Сервер отправляет клиенту строку случайных данных, называемую *nonce* , в качестве запроса.</span><span class="sxs-lookup"><span data-stu-id="d2136-124">The server sends a string of random data called a *nonce* to the client as a challenge.</span></span> <span data-ttu-id="d2136-125">Клиент отвечает с хэшем, который содержит помимо дополнительной информации имя пользователя, пароль и специальное слово.</span><span class="sxs-lookup"><span data-stu-id="d2136-125">The client responds with a hash that includes the user name, password, and nonce, among additional information.</span></span> <span data-ttu-id="d2136-126">Хэширование данных и сложность этого обмена усложняют кражу и повторное использование учетных данных пользователя при использовании этой схемы проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="d2136-126">The complexity this exchange introduces and the data hashing make it more difficult to steal and reuse the user's credentials with this authentication scheme.</span></span><br /><br /> <span data-ttu-id="d2136-127">Дайджест-проверка подлинности требует использования учетных записей домена Windows.</span><span class="sxs-lookup"><span data-stu-id="d2136-127">Digest authentication requires the use of Windows domain accounts.</span></span> <span data-ttu-id="d2136-128">*Область* дайджеста — это доменное имя Windows.</span><span class="sxs-lookup"><span data-stu-id="d2136-128">The digest *realm* is the Windows domain name.</span></span> <span data-ttu-id="d2136-129">Поэтому нельзя использовать дайджест-проверку подлинности на сервере под управлением операционной системы, которая не поддерживает домены Windows (например Windows XP Home Edition).</span><span class="sxs-lookup"><span data-stu-id="d2136-129">Therefore, you cannot use a server running on an operating system that does not support Windows domains, such as Windows XP Home Edition, with Digest authentication.</span></span> <span data-ttu-id="d2136-130">И наоборот, если клиент запущен под управлением операционной системы, которая не поддерживает домены Windows, учетная запись домена должна быть явно задана при проверке подлинности.</span><span class="sxs-lookup"><span data-stu-id="d2136-130">Conversely, when the client runs on an operating system that does not support Windows domains, a domain account must be explicitly specified during the authentication.</span></span>|  
|<span data-ttu-id="d2136-131">NTLM</span><span class="sxs-lookup"><span data-stu-id="d2136-131">NTLM</span></span>|<span data-ttu-id="d2136-132">Проверка подлинности NTLM (NT LAN Manager) - это схема запроса-ответа, которая является более безопасным вариантом дайджест-проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="d2136-132">NT LAN Manager (NTLM) authentication is a challenge-response scheme that is a securer variation of Digest authentication.</span></span> <span data-ttu-id="d2136-133">NTLM использует учетные данные Windows для преобразования данных вызова вместо передачи незашифрованных имени пользователя и пароля.</span><span class="sxs-lookup"><span data-stu-id="d2136-133">NTLM uses Windows credentials to transform the challenge data instead of the unencoded user name and password.</span></span> <span data-ttu-id="d2136-134">Проверка подлинности NTLM требует множественного обмена между клиентом и сервером.</span><span class="sxs-lookup"><span data-stu-id="d2136-134">NTLM authentication requires multiple exchanges between the client and server.</span></span> <span data-ttu-id="d2136-135">Сервер и любой промежуточный прокси-сервер должны поддерживать постоянные соединения для успешного завершения проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="d2136-135">The server and any intervening proxies must support persistent connections to successfully complete the authentication.</span></span>|  
|<span data-ttu-id="d2136-136">Согласование</span><span class="sxs-lookup"><span data-stu-id="d2136-136">Negotiate</span></span>|<span data-ttu-id="d2136-137">Проверка подлинности Negotiate, в зависимости от доступности, автоматически выбирает протокол Kerberos или проверку подлинности NTLM.</span><span class="sxs-lookup"><span data-stu-id="d2136-137">Negotiate authentication automatically selects between the Kerberos protocol and NTLM authentication, depending on availability.</span></span> <span data-ttu-id="d2136-138">Если доступен, используется протокол Kerberos, в противном случае предпринимается попытка использования протокола NTLM.</span><span class="sxs-lookup"><span data-stu-id="d2136-138">The Kerberos protocol is used if it is available; otherwise, NTLM is tried.</span></span> <span data-ttu-id="d2136-139">Проверка подлинности Kerberos обладает существенными преимуществами перед NTLM.</span><span class="sxs-lookup"><span data-stu-id="d2136-139">Kerberos authentication significantly improves upon NTLM.</span></span> <span data-ttu-id="d2136-140">Проверка подлинности Kerberos быстрее NTLM и позволяет использовать взаимную проверку подлинности и делегирование учетных данных удаленным компьютерам.</span><span class="sxs-lookup"><span data-stu-id="d2136-140">Kerberos authentication is both faster than NTLM and allows the use of mutual authentication and delegation of credentials to remote machines.</span></span>|  
|<span data-ttu-id="d2136-141">Windows Live ID</span><span class="sxs-lookup"><span data-stu-id="d2136-141">Windows Live ID</span></span>|<span data-ttu-id="d2136-142">Базовая служба HTTP Windows включает проверку подлинности с использованием федеративных протоколов.</span><span class="sxs-lookup"><span data-stu-id="d2136-142">The underlying Windows HTTP service includes authentication using federated protocols.</span></span> <span data-ttu-id="d2136-143">Однако стандартные транспорты HTTP в WCF не поддерживают использование федеративных схем проверки подлинности, таких как Microsoft Windows Live ID.</span><span class="sxs-lookup"><span data-stu-id="d2136-143">However, the standard HTTP transports in WCF do not support the use of federated authentication schemes, such as Microsoft Windows Live ID.</span></span> <span data-ttu-id="d2136-144">Поддержка этой возможности в данный момент доступна посредством безопасности сообщения.</span><span class="sxs-lookup"><span data-stu-id="d2136-144">Support for this feature is currently available through the use of message security.</span></span> <span data-ttu-id="d2136-145">Дополнительные сведения см. в разделе [Федерация и выданные токены](federation-and-issued-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="d2136-145">For more information, see [Federation and Issued Tokens](federation-and-issued-tokens.md).</span></span>|  
  
## <a name="choosing-an-authentication-scheme"></a><span data-ttu-id="d2136-146">Выбор схемы проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="d2136-146">Choosing an Authentication Scheme</span></span>  

 <span data-ttu-id="d2136-147">При выборе потенциальной схемы проверки подлинности для HTTP-сервера необходимо учитывать несколько моментов.</span><span class="sxs-lookup"><span data-stu-id="d2136-147">When selecting the potential authentication schemes for an HTTP server, a few items to consider include the following:</span></span>  
  
- <span data-ttu-id="d2136-148">Рассмотрите, требуется ли защита ресурса.</span><span class="sxs-lookup"><span data-stu-id="d2136-148">Consider whether the resource needs to be protected.</span></span> <span data-ttu-id="d2136-149">Использование проверки подлинности HTTP требует передачи большего объема данных и может ограничить взаимодействие с клиентами.</span><span class="sxs-lookup"><span data-stu-id="d2136-149">Using HTTP authentication requires transmitting more data and can limit interoperability with clients.</span></span> <span data-ttu-id="d2136-150">Можно разрешить анонимный доступ к ресурсу, не требующему защиты.</span><span class="sxs-lookup"><span data-stu-id="d2136-150">Allow anonymous access to resources that do not need to be protected.</span></span>  
  
- <span data-ttu-id="d2136-151">Если требуется защита ресурса, проанализируйте, какая схема проверки подлинности обеспечит требуемый уровень безопасности.</span><span class="sxs-lookup"><span data-stu-id="d2136-151">If the resource needs to be protected, consider which authentication schemes provide the required level of security.</span></span> <span data-ttu-id="d2136-152">Самая слабая стандартная схема проверки подлинности - обычная проверка подлинности.</span><span class="sxs-lookup"><span data-stu-id="d2136-152">The weakest standard authentication scheme discussed here is Basic authentication.</span></span> <span data-ttu-id="d2136-153">Обычная проверка подлинности не защищает учетные данные пользователя.</span><span class="sxs-lookup"><span data-stu-id="d2136-153">Basic authentication does not protect the user's credentials.</span></span> <span data-ttu-id="d2136-154">Самая стойкая стандартная схема проверка подлинности - проверка подлинности Negotiate, реализованная в протоколе Kerberos.</span><span class="sxs-lookup"><span data-stu-id="d2136-154">The strongest standard authentication scheme is Negotiate authentication, resulting in the Kerberos protocol.</span></span>  
  
- <span data-ttu-id="d2136-155">Сервер не должен (в заголовках WWW-Authentication) предоставлять любую схему, которая не готова принять или обеспечить достаточную защиту безопасного ресурса.</span><span class="sxs-lookup"><span data-stu-id="d2136-155">A server should not present (in the WWW-Authentication headers) any scheme that it is not prepared to accept or that does not adequately secure the protected resource.</span></span> <span data-ttu-id="d2136-156">Клиент свободен в выборе любой схемы проверки подлинности, предоставляемой сервером.</span><span class="sxs-lookup"><span data-stu-id="d2136-156">Clients are free to choose between any of the authentication schemes the server presents.</span></span> <span data-ttu-id="d2136-157">Некоторые клиенты выбирают по умолчанию слабую схему проверки подлинности или первую схему проверки подлинности в списке сервера.</span><span class="sxs-lookup"><span data-stu-id="d2136-157">Some clients default to a weak authentication scheme or the first authentication scheme in the server's list.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d2136-158">См. также</span><span class="sxs-lookup"><span data-stu-id="d2136-158">See also</span></span>

- [<span data-ttu-id="d2136-159">Общие сведения о безопасности транспорта</span><span class="sxs-lookup"><span data-stu-id="d2136-159">Transport Security Overview</span></span>](transport-security-overview.md)
- [<span data-ttu-id="d2136-160">Использование олицетворения при обеспечении безопасности транспорта</span><span class="sxs-lookup"><span data-stu-id="d2136-160">Using Impersonation with Transport Security</span></span>](using-impersonation-with-transport-security.md)
- [<span data-ttu-id="d2136-161">Делегирование и олицетворение</span><span class="sxs-lookup"><span data-stu-id="d2136-161">Delegation and Impersonation</span></span>](delegation-and-impersonation-with-wcf.md)
