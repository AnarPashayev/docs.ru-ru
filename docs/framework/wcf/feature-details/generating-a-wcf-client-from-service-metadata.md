---
title: Создание клиента WCF из метаданных службы
ms.date: 03/30/2017
ms.assetid: 27f8f545-cc44-412a-b104-617e0781b803
ms.openlocfilehash: 5cfbfc1e4be0003b3699f818212fbcd959f3ad91
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2019
ms.locfileid: "59078256"
---
# <a name="generating-a-wcf-client-from-service-metadata"></a>Создание клиента WCF из метаданных службы
В этом разделе рассматривается использование различных ключей в Svcutil.exe для формирования клиентов из документов метаданных.  
  
 Документы метаданных могут находиться в устойчивом хранилище или извлекаться в оперативном режиме. Извлечение в оперативном режиме происходит либо по протоколу WS-MetadataExchange, либо по протоколу Microsoft Discovery (DISCO). Svcutil.exe одновременно отправляет следующие запросы метаданных для извлечения метаданных:  
  
-   запрос WS-MetadataExchange (MEX) по указанному адресу;  
  
-   запрос MEX с присоединенным ключом `/mex` по указанному адресу;  
  
-   Запрос DISCO (с помощью [DiscoveryClientProtocol](https://go.microsoft.com/fwlink/?LinkId=94777) из веб-служб ASP.NET) по указанному адресу.  
  
 Программа Svcutil.exe формирует клиент на основании файла WSDL или файла политики, полученного от службы. Имя участника-пользователя (UPN) формируется путем сцепления имя пользователя с "\@", а затем добавив полное доменное имя (FQDN). Тем не менее для пользователей, зарегистрированных в Active Directory, этот формат не является допустимым, и имя участника-пользователя, создаваемый программой приведет к сбою проверки подлинности Kerberos с следующее сообщение об ошибке: **Неудачная попытка входа.** Чтобы устранить эту проблему, необходимо вручную откорректировать файл клиента, сформированный Svcutil.exe.  
  
```  
svcutil.exe [/t:code]  <metadataDocumentPath>* | <url>* | <epr>  
```  
  
## <a name="referencing-and-sharing-types"></a>Ссылки на типы и совместное использование типов  
  
|Параметр|Описание:|  
|------------|-----------------|  
|**/ reference:\<путь к файлу >**|Ссылается на типы в заданной сборке. При создании клиентов необходимо использовать этот параметр для задания сборок, которые могут содержать типы, представляющие импортируемые метаданные.<br /><br /> Краткая форма: `/r`|  
|**/excludeType:\<тип >**|Задает полное имя типа или имя типа с указанием на сборку, который необходимо исключить из ссылочных типов контракта.<br /><br /> Краткая форма: `/et`|  
  
## <a name="choosing-a-serializer"></a>Выбор сериализатора  
  
|Параметр|Описание|  
|------------|-----------------|  
|**/serializer:Auto**|Автоматически выбирает сериализатор. Выбираемый сериализатор - `DataContract`. Если использовать этот сериализатор не удается, используется сериализатор `XmlSerializer`.<br /><br /> Сокращенная форма: `/ser:Auto`|  
|**/serializer:DataContractSerializer**|Формирует типы данных, использующих для сериализации и десериализации сериализатор `DataContract`.<br /><br /> Краткая форма: `/ser:DataContractSerializer`|  
|**/serializer:XmlSerializer**|Формирует типы данных, использующих для сериализации и десериализации сериализатор `XmlSerializer`.<br /><br /> Краткая форма: `/ser:XmlSerializer`|  
|**/importXmlTypes**|Настраивает сериализатор `DataContract` на импорт типов, отличных от `DataContract`, в виде типов `IXmlSerializable`.<br /><br /> Краткая форма: `/ixt`|  
|**/dataContractOnly**|Формирует код только для типов `DataContract`. Формируются типы `ServiceContract`.<br /><br /> Для этого параметра следует задавать только локальные файлы метаданных.<br /><br /> Краткая форма: `/dconly`|  
  
## <a name="choosing-a-language-for-the-client"></a>Выбор языка для клиента  
  
|Параметр|Описание:|  
|------------|-----------------|  
|**/ Language:\<языка >**|Задает язык программирования, используемый для создания кода. Необходимо задать либо имя языка, зарегистрированное в файле Machine.config, либо полное имя класса, наследуемого от <xref:System.CodeDom.Compiler.CodeDomProvider>.<br /><br /> Значения: C#, cs, csharp, vb, vbs, visualbasic, vbscript, javascript, c++, mc, cpp<br /><br /> По умолчанию: csharp<br /><br /> Краткая форма: `/l`<br /><br /> Дополнительные сведения см. в разделе [класс CodeDomProvider](https://go.microsoft.com/fwlink/?LinkId=94778).|  
  
## <a name="choosing-a-namespace-for-the-client"></a>Выбор пространства имен для клиента  
  
|Параметр|Описание:|  
|------------|-----------------|  
|**/ namespace:\<строка, строка >**|Задает сопоставление между элементом `targetNamespace` WSDL или схемы XML и пространством имен среды CLR. При использовании в качестве значения элемента `targetNamespace` подстановочного знака (*) все элементы `targetNamespaces` сопоставляются без явного сопоставления данному пространству имен среды CLR.<br /><br /> Чтобы гарантировать, что имя контракта сообщения не конфликтует с именем операции, либо дополните ссылку на тип двойными двоеточиями (`::`), либо убедитесь, что имена уникальны.<br /><br /> По умолчанию: Производный от целевого пространства имен документа схемы для `DataContracts`. Для всех остальных создаваемых типов используется пространство имен по умолчанию.<br /><br /> Краткая форма: `/n`|  
  
## <a name="choosing-a-data-binding"></a>Выбор привязки данных  
  
|Параметр|Описание:|  
|------------|-----------------|  
|**/enableDataBinding**|Реализует интерфейс <xref:System.ComponentModel.INotifyPropertyChanged> во всех типах `DataContract` для включения привязки данных.<br /><br /> Краткая форма: `/edb`|  
  
## <a name="generating-configuration"></a>Формирование конфигурации  
  
|Параметр|Описание:|  
|------------|-----------------|  
|**/ config:\<configFile >**|Задает имя файла для формируемого файла конфигурации.<br /><br /> По умолчанию: output.config|  
|**/mergeConfig**|Объединяет созданную конфигурацию с существующим файлом (вместо его перезаписи).|  
|**/noConfig**|Запрещает создавать файлы конфигурации.|  
  
## <a name="see-also"></a>См. также

- [Использование метаданных](../../../../docs/framework/wcf/feature-details/using-metadata.md)
- [Общие сведения об архитектуре метаданных](../../../../docs/framework/wcf/feature-details/metadata-architecture-overview.md)
