---
title: Значения членов данных по умолчанию
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- data members [WCF], default values
- data members [WCF]
ms.assetid: 53a3b505-4b27-444b-b079-0eb84a97cfd8
ms.openlocfilehash: 2d323566aa211ced9ed76302756ed5dc82c5d2c3
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61857120"
---
# <a name="data-member-default-values"></a><span data-ttu-id="d78d3-102">Значения членов данных по умолчанию</span><span class="sxs-lookup"><span data-stu-id="d78d3-102">Data Member Default Values</span></span>
<span data-ttu-id="d78d3-103">В [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)], типы имеют концепцию *значения по умолчанию*.</span><span class="sxs-lookup"><span data-stu-id="d78d3-103">In the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)], types have a concept of *default values*.</span></span> <span data-ttu-id="d78d3-104">Например, любой ссылочный тип имеет значение по умолчанию `null`, а значением по умолчанию для целого типа является ноль.</span><span class="sxs-lookup"><span data-stu-id="d78d3-104">For example, for any reference type the default value is `null`, and for an integer type it is zero.</span></span> <span data-ttu-id="d78d3-105">Иногда требуется исключить член данных из сериализованных данных, если для него задано значение по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="d78d3-105">It is occasionally desirable to omit a data member from serialized data when it is set to its default value.</span></span> <span data-ttu-id="d78d3-106">Так как этот член имеет значение по умолчанию, нет необходимости сериализовывать фактическое значение; это повышает производительность.</span><span class="sxs-lookup"><span data-stu-id="d78d3-106">Because the member has a default value, an actual value need not be serialized; this has a performance advantage.</span></span>  
  
 <span data-ttu-id="d78d3-107">Чтобы исключить член из сериализованных данных, задайте для свойства <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> атрибута <xref:System.Runtime.Serialization.DataMemberAttribute> значение `false` (по умолчанию задано значение `true`).</span><span class="sxs-lookup"><span data-stu-id="d78d3-107">To omit a member from serialized data, set the <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> property of the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute to `false` (the default is `true`).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d78d3-108">Присваивать значение <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> свойству `false` следует только при конкретной необходимости, например для обеспечения взаимодействия или для уменьшения объема данных.</span><span class="sxs-lookup"><span data-stu-id="d78d3-108">You should set the <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> property to `false` if there is a specific need to do so, such as for interoperability or data size reduction.</span></span>  
  
## <a name="example"></a><span data-ttu-id="d78d3-109">Пример</span><span class="sxs-lookup"><span data-stu-id="d78d3-109">Example</span></span>  
 <span data-ttu-id="d78d3-110">В следующем коде у нескольких членов для свойства <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> задано значение `false`.</span><span class="sxs-lookup"><span data-stu-id="d78d3-110">The following code has several members with the <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> set to `false`.</span></span>  
  
 [!code-csharp[DataMemberAttribute#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/datamemberattribute/cs/overview.cs#4)]
 [!code-vb[DataMemberAttribute#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/datamemberattribute/vb/overview.vb#4)]  
  
 <span data-ttu-id="d78d3-111">При сериализации экземпляра этого класса получается следующее: `employeeName` и `employeeID` сериализуются.</span><span class="sxs-lookup"><span data-stu-id="d78d3-111">If an instance of this class is serialized, the result is as follows: `employeeName` and `employeeID` is serialized.</span></span> <span data-ttu-id="d78d3-112">Значение "null" для `employeeName` и нулевое значение для `employeeID` в явном виде указаны в сериализованных данных.</span><span class="sxs-lookup"><span data-stu-id="d78d3-112">The null value for `employeeName` and the zero value for `employeeID` is explicitly part of the serialized data.</span></span> <span data-ttu-id="d78d3-113">Однако члены `position`, `salary` и `bonus` не сериализуются.</span><span class="sxs-lookup"><span data-stu-id="d78d3-113">However, the `position`, `salary`, and `bonus` members are not serialized.</span></span> <span data-ttu-id="d78d3-114">Наконец, член `targetSalary` сериализуется как обычно, хотя для свойства <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> задано значение `false`, так как 57800 не соответствует принятому в платформе .NET значению по умолчанию для целого числа (а именно, ноль).</span><span class="sxs-lookup"><span data-stu-id="d78d3-114">Finally, `targetSalary` is serialized as usual, even though the <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> property is set to `false`, because 57800 does not match the .NET default value for an integer, which is zero.</span></span>  
  
### <a name="xml-representation"></a><span data-ttu-id="d78d3-115">Представление XML</span><span class="sxs-lookup"><span data-stu-id="d78d3-115">XML Representation</span></span>  
 <span data-ttu-id="d78d3-116">При сериализации предыдущего примера в XML представление аналогично приведенному ниже.</span><span class="sxs-lookup"><span data-stu-id="d78d3-116">If the previous example is serialized to XML, the representation is similar to the following.</span></span>  
  
```xml  
<Employee>  
   <employeeName xsi:nil="true" />  
   <employeeID>0</employeeID>  
<targetSalary>57800</targetSalary>  
</Employee>  
```  
  
 <span data-ttu-id="d78d3-117">Атрибут `xsi:nil` является специальным атрибутом в пространстве имен экземпляров схемы XML интернет-консорциума (W3C), который обеспечивает совместимый способ явного указания значения "null".</span><span class="sxs-lookup"><span data-stu-id="d78d3-117">The `xsi:nil` attribute is a special attribute in the World Wide Web Consortium (W3C) XML Schema instance namespace that provides an interoperable way to explicitly represent a null value.</span></span> <span data-ttu-id="d78d3-118">Обратите внимание, что в XML полностью отсутствует информация о членах данных со сведениями о должности, окладе и бонусах.</span><span class="sxs-lookup"><span data-stu-id="d78d3-118">Note that there is no information at all in the XML about position, salary, and bonus data members.</span></span> <span data-ttu-id="d78d3-119">Получатель может интерпретировать их как значения `null`, ноль и `null` соответственно.</span><span class="sxs-lookup"><span data-stu-id="d78d3-119">The receiving end can interpret these as `null`, zero, and `null`, respectively.</span></span> <span data-ttu-id="d78d3-120">Не гарантируется, что десериализатор независимого разработчика выполнит правильную интерпретацию, поэтому не рекомендуется использовать такую схему.</span><span class="sxs-lookup"><span data-stu-id="d78d3-120">There is no guarantee that a third-party deserializer can make the correct interpretation, which is why this pattern is not recommended.</span></span> <span data-ttu-id="d78d3-121">Класс <xref:System.Runtime.Serialization.DataContractSerializer> всегда выбирает правильную интерпретацию для отсутствующих значений.</span><span class="sxs-lookup"><span data-stu-id="d78d3-121">The <xref:System.Runtime.Serialization.DataContractSerializer> class always selects the correct interpretation for missing values.</span></span>  
  
### <a name="interaction-with-isrequired"></a><span data-ttu-id="d78d3-122">Взаимодействие со свойством IsRequired</span><span class="sxs-lookup"><span data-stu-id="d78d3-122">Interaction with IsRequired</span></span>  
 <span data-ttu-id="d78d3-123">Как уже говорилось в [управление версиями контракта данных](../../../../docs/framework/wcf/feature-details/data-contract-versioning.md), <xref:System.Runtime.Serialization.DataMemberAttribute> атрибут имеет <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> свойства (значение по умолчанию — `false`).</span><span class="sxs-lookup"><span data-stu-id="d78d3-123">As discussed in [Data Contract Versioning](../../../../docs/framework/wcf/feature-details/data-contract-versioning.md), the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute has an <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property (the default is `false`).</span></span> <span data-ttu-id="d78d3-124">Это свойство указывает, должен ли определенный член данных присутствовать в сериализованных данных при десериализации.</span><span class="sxs-lookup"><span data-stu-id="d78d3-124">The property indicates whether a given data member must be present in the serialized data when it is being deserialized.</span></span> <span data-ttu-id="d78d3-125">Если для свойства `IsRequired` задано значение `true` (означающее, что значение должно присутствовать), а для свойства <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> задано значение `false` (указывающее, что если значение равно значению по умолчанию, то оно может отсутствовать), сериализация значений по умолчанию для этого члена данных невозможна, так как результат будет противоречивым.</span><span class="sxs-lookup"><span data-stu-id="d78d3-125">If `IsRequired` is set to `true`, (which indicates that a value must be present) and <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> is set to `false` (indicating that the value must not be present if it is set to its default value), default values for this data member cannot be serialized because the results would be contradictory.</span></span> <span data-ttu-id="d78d3-126">Если для такого члена данных задано значение по умолчанию (обычно `null` или ноль) и производится попытка сериализации, возникает исключение <xref:System.Runtime.Serialization.SerializationException>.</span><span class="sxs-lookup"><span data-stu-id="d78d3-126">If such a data member is set to its default value (usually `null` or zero) and a serialization is attempted, a <xref:System.Runtime.Serialization.SerializationException> is thrown.</span></span>  
  
### <a name="schema-representation"></a><span data-ttu-id="d78d3-127">Представление схемы</span><span class="sxs-lookup"><span data-stu-id="d78d3-127">Schema Representation</span></span>  
 <span data-ttu-id="d78d3-128">Сведения о представления схемы языка определения схемы XML элементов данных при `EmitDefaultValue` свойству `false` рассматриваются в [Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md).</span><span class="sxs-lookup"><span data-stu-id="d78d3-128">The details of the XML Schema definition language (XSD) schema representation of data members when the `EmitDefaultValue` property is set to `false` are discussed in [Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md).</span></span> <span data-ttu-id="d78d3-129">Тем не менее ниже приводятся краткие общие сведения:</span><span class="sxs-lookup"><span data-stu-id="d78d3-129">However, the following is a brief overview:</span></span>  
  
- <span data-ttu-id="d78d3-130">Когда <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> присваивается `false`, она представляется в схеме как заметка, специфичная для Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="d78d3-130">When the <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> is set to `false`, it is represented in the schema as an annotation specific to Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="d78d3-131">Не существует совместимого способа представления этой информации.</span><span class="sxs-lookup"><span data-stu-id="d78d3-131">There is no interoperable way to represent this information.</span></span> <span data-ttu-id="d78d3-132">В частности, атрибут "default" в схеме не используется для этой цели, на атрибут `minOccurs` влияет только параметр <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A>, а на атрибут `nillable` влияет только тип члена данных.</span><span class="sxs-lookup"><span data-stu-id="d78d3-132">In particular, the "default" attribute in the schema is not used for this purpose, the `minOccurs` attribute is affected only by the <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> setting, and the `nillable` attribute is affected only by the type of the data member.</span></span>  
  
- <span data-ttu-id="d78d3-133">Фактическое значение по умолчанию, которое требуется использовать, в этой схеме отсутствует.</span><span class="sxs-lookup"><span data-stu-id="d78d3-133">The actual default value to use is not present in the schema.</span></span> <span data-ttu-id="d78d3-134">Правильная интерпретация отсутствующего элемента зависит только от принимающей конечной точки.</span><span class="sxs-lookup"><span data-stu-id="d78d3-134">It is up to the receiving endpoint to appropriately interpret a missing element.</span></span>  
  
 <span data-ttu-id="d78d3-135">При импорте схемы <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> свойству автоматически присваивается `false` каждый раз, когда упомянутая заметка относящиеся конкретно к WCF обнаруживается ранее.</span><span class="sxs-lookup"><span data-stu-id="d78d3-135">On schema import, the <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A> property is automatically set to `false` whenever the WCF-specific annotation mentioned previously is detected.</span></span> <span data-ttu-id="d78d3-136">Кроме того, значение `false` устанавливается для ссылочных типов, у которых для свойства `nillable` задано значение `false`, чтобы обеспечить поддержку специфичных сценариев взаимодействия, часто встречающихся при использовании веб-служб [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d78d3-136">It is also set to `false` for reference types that have the `nillable` property set to `false` to support specific interoperability scenarios that commonly occur when consuming [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] Web services.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d78d3-137">См. также</span><span class="sxs-lookup"><span data-stu-id="d78d3-137">See also</span></span>

- <xref:System.Runtime.Serialization.DataMemberAttribute.EmitDefaultValue%2A>
- <xref:System.Runtime.Serialization.DataMemberAttribute>
