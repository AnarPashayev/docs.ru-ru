---
title: Утверждения и маркеры
ms.date: 03/30/2017
helpviewer_keywords:
- claims [WCF], and tokens
ms.assetid: eff167f3-33f8-483d-a950-aa3e9f97a189
ms.openlocfilehash: 223b86310d90c877df15a99c90a0a72ea780734a
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2019
ms.locfileid: "59076267"
---
# <a name="claims-and-tokens"></a><span data-ttu-id="f280b-102">Утверждения и маркеры</span><span class="sxs-lookup"><span data-stu-id="f280b-102">Claims and Tokens</span></span>
<span data-ttu-id="f280b-103">В этом разделе описываются различные типы утверждений, которые создает Windows Communication Foundation (WCF) из поддерживаемых маркеров по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="f280b-103">This topic describes the various claim types that Windows Communication Foundation (WCF) creates from the default tokens that it supports.</span></span>  
  
 <span data-ttu-id="f280b-104">Анализировать утверждения учетных данных клиента можно с помощью классов <xref:System.IdentityModel.Claims.ClaimSet> и <xref:System.IdentityModel.Claims.Claim>.</span><span class="sxs-lookup"><span data-stu-id="f280b-104">You can examine the claims of a client credential by using the <xref:System.IdentityModel.Claims.ClaimSet> and <xref:System.IdentityModel.Claims.Claim> classes.</span></span> <span data-ttu-id="f280b-105">Класс `ClaimSet` содержит коллекцию объектов `Claim`.</span><span class="sxs-lookup"><span data-stu-id="f280b-105">The `ClaimSet` contains a collection of `Claim` objects.</span></span> <span data-ttu-id="f280b-106">Каждый объект `Claim` имеет следующие важные члены.</span><span class="sxs-lookup"><span data-stu-id="f280b-106">Each `Claim` has the following important members:</span></span>  
  
-   <span data-ttu-id="f280b-107">Свойство <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> возвращает универсальный код ресурса (URI), который указывает тип делаемого утверждения.</span><span class="sxs-lookup"><span data-stu-id="f280b-107">The <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> property returns a Uniform Resource Identifier (URI) that specifies the type of claim being made.</span></span> <span data-ttu-id="f280b-108">Например, тип утверждения может представлять собой отпечаток сертификата, в котором в случае URI будет `http://schemas.microsoft.com/ws/20005/05/identity/claims/thumprint`.</span><span class="sxs-lookup"><span data-stu-id="f280b-108">For example, a claim type may be a thumbprint of a certificate, in which case the URI is `http://schemas.microsoft.com/ws/20005/05/identity/claims/thumprint`.</span></span>  
  
-   <span data-ttu-id="f280b-109">Свойство <xref:System.IdentityModel.Claims.Claim.Right%2A> возвращает универсальный код ресурса (URI), который указывает право утверждения.</span><span class="sxs-lookup"><span data-stu-id="f280b-109">The <xref:System.IdentityModel.Claims.Claim.Right%2A> property returns a URI that specifies the right of the claim.</span></span> <span data-ttu-id="f280b-110">Предопределенные права находятся в классе <xref:System.IdentityModel.Claims.Rights> (<xref:System.IdentityModel.Claims.Rights.Identity%2A>, <xref:System.IdentityModel.Claims.Rights.PossessProperty%2A>).</span><span class="sxs-lookup"><span data-stu-id="f280b-110">Predefined rights are found in the <xref:System.IdentityModel.Claims.Rights> class (<xref:System.IdentityModel.Claims.Rights.Identity%2A>,  <xref:System.IdentityModel.Claims.Rights.PossessProperty%2A>).</span></span>  
  
-   <span data-ttu-id="f280b-111">Свойство <xref:System.IdentityModel.Claims.Claim.Resource%2A> возвращает ресурс, связанный с утверждением.</span><span class="sxs-lookup"><span data-stu-id="f280b-111">The <xref:System.IdentityModel.Claims.Claim.Resource%2A> property returns the resource associated with the claim.</span></span>  
  
 <span data-ttu-id="f280b-112">Каждый объект <xref:System.IdentityModel.Claims.ClaimSet> также имеет свойство <xref:System.IdentityModel.Claims.ClaimSet.Issuer%2A>, которое представляет <xref:System.IdentityModel.Claims.ClaimSet> издателя (`Issuer`).</span><span class="sxs-lookup"><span data-stu-id="f280b-112">Each <xref:System.IdentityModel.Claims.ClaimSet> also has an <xref:System.IdentityModel.Claims.ClaimSet.Issuer%2A> property, which represents the <xref:System.IdentityModel.Claims.ClaimSet> of the `Issuer`.</span></span>  
  
## <a name="windows-accounts"></a><span data-ttu-id="f280b-113">Учетные записи Windows</span><span class="sxs-lookup"><span data-stu-id="f280b-113">Windows Accounts</span></span>  
 <span data-ttu-id="f280b-114">Когда учетные данные клиента сопоставляются с учетной записью пользователя Windows, полученный в результате объект <xref:System.IdentityModel.Claims.ClaimSet> имеет следующие значения.</span><span class="sxs-lookup"><span data-stu-id="f280b-114">Where a client credential maps to a Windows user account, the resulting <xref:System.IdentityModel.Claims.ClaimSet> has the following values:</span></span>  
  
-   <span data-ttu-id="f280b-115">`Issuer` - значение, возвращенное статическим свойством Windows класса <xref:System.IdentityModel.Claims.ClaimSet>.</span><span class="sxs-lookup"><span data-stu-id="f280b-115">The `Issuer` is the value returned by the static Windows property of the <xref:System.IdentityModel.Claims.ClaimSet> class.</span></span>  
  
-   <span data-ttu-id="f280b-116">Коллекция содержит следующие утверждения.</span><span class="sxs-lookup"><span data-stu-id="f280b-116">The claims in the collection are:</span></span>  
  
    -   <span data-ttu-id="f280b-117">Объект <xref:System.IdentityModel.Claims.Claim>, у которого свойство <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> указывает на идентификатор безопасности (SID), свойство <xref:System.IdentityModel.Claims.Claim.Right%2A> имеет значение `Identity`, а свойство <xref:System.IdentityModel.Claims.Claim.Resource%2A> возвращает фактическое значение идентификатора безопасности.</span><span class="sxs-lookup"><span data-stu-id="f280b-117">A <xref:System.IdentityModel.Claims.Claim> with a <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> value of security identifier (SID), a <xref:System.IdentityModel.Claims.Claim.Right%2A> property value of `Identity`, and a <xref:System.IdentityModel.Claims.Claim.Resource%2A> that returns the actual SID value.</span></span> <span data-ttu-id="f280b-118">Идентификатор безопасности (SID) - это уникальное значение, выдаваемое контроллером домена каждому пользователю.</span><span class="sxs-lookup"><span data-stu-id="f280b-118">A SID is a unique value the domain controller issues to every user.</span></span> <span data-ttu-id="f280b-119">Идентификатор безопасности используется для идентификации пользователя при взаимодействии с системой безопасности Windows.</span><span class="sxs-lookup"><span data-stu-id="f280b-119">The SID is used to identify the user in interactions with Windows security.</span></span>  
  
    -   <span data-ttu-id="f280b-120">Объект <xref:System.IdentityModel.Claims.Claim>, у которого свойство <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> указывает на идентификатор безопасности, свойство <xref:System.IdentityModel.Claims.Claim.Right%2A> имеет значение `PossessProperty`, а свойство <xref:System.IdentityModel.Claims.Claim.Resource%2A> представляет собой значение идентификатора безопасности.</span><span class="sxs-lookup"><span data-stu-id="f280b-120">A <xref:System.IdentityModel.Claims.Claim> with a <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> value of SID, a <xref:System.IdentityModel.Claims.Claim.Right%2A> of `PossessProperty`, and a <xref:System.IdentityModel.Claims.Claim.Resource%2A> of the SID value.</span></span>  
  
    -   <span data-ttu-id="f280b-121">Объект <xref:System.IdentityModel.Claims.Claim>, у которого свойство <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> имеет значение <xref:System.IdentityModel.Claims.ClaimTypes.Name%2A>, свойство <xref:System.IdentityModel.Claims.Claim.Right%2A> имеет значение `PossessProperty`, а свойство <xref:System.IdentityModel.Claims.Claim.Resource%2A> представляет собой строку, содержащую имя пользователя (например, "MYMACHINE\Bob").</span><span class="sxs-lookup"><span data-stu-id="f280b-121">A <xref:System.IdentityModel.Claims.Claim> with a <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> of <xref:System.IdentityModel.Claims.ClaimTypes.Name%2A>, a <xref:System.IdentityModel.Claims.Claim.Right%2A> of `PossessProperty` and a <xref:System.IdentityModel.Claims.Claim.Resource%2A> of string containing the user name (for example, "MYMACHINE\Bob").</span></span>  
  
    -   <span data-ttu-id="f280b-122">Дополнительные утверждения типа "идентификатор безопасности" со значением <xref:System.IdentityModel.Claims.Rights.PossessProperty%2A> для различных групп, к которым принадлежит пользователь.</span><span class="sxs-lookup"><span data-stu-id="f280b-122">Additional SID claims with <xref:System.IdentityModel.Claims.Rights.PossessProperty%2A> for the various groups the user belongs to.</span></span>  
  
## <a name="certificates"></a><span data-ttu-id="f280b-123">Сертификаты</span><span class="sxs-lookup"><span data-stu-id="f280b-123">Certificates</span></span>  
 <span data-ttu-id="f280b-124">Когда учетные данные клиента представляют собой сертификат, полученный в результате объект <xref:System.IdentityModel.Claims.ClaimSet> имеет следующие значения.</span><span class="sxs-lookup"><span data-stu-id="f280b-124">Where the client credential is a certificate, the resulting <xref:System.IdentityModel.Claims.ClaimSet> has the following values:</span></span>  
  
-   <span data-ttu-id="f280b-125">В случае самостоятельно выданного сертификата издателем (`Issuer`) является сам объект <xref:System.IdentityModel.Claims.ClaimSet>.</span><span class="sxs-lookup"><span data-stu-id="f280b-125">For self-issued certificates, the `Issuer` is the <xref:System.IdentityModel.Claims.ClaimSet> itself.</span></span> <span data-ttu-id="f280b-126">Объект <xref:System.IdentityModel.Claims.ClaimSet> возвращает свойство <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> со значением <xref:System.IdentityModel.Claims.ClaimTypes.Thumbprint%2A>, свойство <xref:System.IdentityModel.Claims.Claim.Right%2A> со значением `Identity` и свойство <xref:System.IdentityModel.Claims.Claim.Resource%2A> со значением, представляющим собой массив типа <xref:System.Byte>, который содержит отпечаток сертификата.</span><span class="sxs-lookup"><span data-stu-id="f280b-126">The <xref:System.IdentityModel.Claims.ClaimSet> returns a <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> of <xref:System.IdentityModel.Claims.ClaimTypes.Thumbprint%2A>, a <xref:System.IdentityModel.Claims.Claim.Right%2A> of `Identity`, and a <xref:System.IdentityModel.Claims.Claim.Resource%2A> value that is a <xref:System.Byte> array containing the thumbprint of the certificate.</span></span>  
  
-   <span data-ttu-id="f280b-127">В случае сертификата, выданного центром сертификации, издателем является `ClaimSet`, представляющий сертификат центра.</span><span class="sxs-lookup"><span data-stu-id="f280b-127">For a certificate issued by a certification authority, the issuer is the `ClaimSet` representing the certification authority’s certificate.</span></span>  
  
-   <span data-ttu-id="f280b-128">В коллекцию входят следующие утверждения (`Claims`).</span><span class="sxs-lookup"><span data-stu-id="f280b-128">The `Claims` in the collection include:</span></span>  
  
    -   <span data-ttu-id="f280b-129">Объект `Claim`, у которого свойство `ClaimType` указывает на отпечаток, свойство `Right` имеет значение PossessProperty, а значение свойства `Resource` представляет собой байтовый массив, содержащий отпечаток сертификата.</span><span class="sxs-lookup"><span data-stu-id="f280b-129">A `Claim` with a `ClaimType` of Thumbprint, a `Right` of PossessProperty, and a `Resource` that is a byte array containing the thumbprint of the certificate</span></span>  
  
    -   <span data-ttu-id="f280b-130">Дополнительные утверждения с правом "PossessProperty" различных типов, включая "X500DistinguishedName","Dns", "Name", "Upn" и "Rsa", представляют различные свойства сертификата.</span><span class="sxs-lookup"><span data-stu-id="f280b-130">Additional PossessProperty claims of various types, including X500DistinguishedName, Dns, Name, Upn, and Rsa, represent various properties of the certificate.</span></span> <span data-ttu-id="f280b-131">Ресурс для утверждения типа Rsa является открытого ключа, связанного с сертификатом. **Примечание** где тип учетных данных клиента является сертификат, сопоставляемый с Windows учетная запись, два `ClaimSet` создаются объекты.</span><span class="sxs-lookup"><span data-stu-id="f280b-131">The resource for the Rsa claim is the public key associated with the certificate.**Note** Where the client credential type is a certificate that the service maps to a Windows account, two `ClaimSet` objects are generated.</span></span> <span data-ttu-id="f280b-132">Первый объект содержит все утверждения, связанные с учетной записью Windows, а второй содержит все утверждения, связанные с сертификатом.</span><span class="sxs-lookup"><span data-stu-id="f280b-132">The first contains all the claims related to the Windows account and the second contains all the claims related to the certificate.</span></span>  
  
## <a name="user-namepassword"></a><span data-ttu-id="f280b-133">Имя пользователя/пароль</span><span class="sxs-lookup"><span data-stu-id="f280b-133">User Name/Password</span></span>  
 <span data-ttu-id="f280b-134">Когда учетные данные клиента представляют собой имя пользователя/пароль (или эквивалент), которые не сопоставляются с учетной записью Windows, полученный в результате объект `ClaimSet` будет выдан статическим свойством <xref:System.IdentityModel.Claims.ClaimSet.System%2A> класса `ClaimSet`.</span><span class="sxs-lookup"><span data-stu-id="f280b-134">Where the client credential is a user name/password (or equivalent) that does not map to a Windows account, the resulting `ClaimSet` is issued by the static <xref:System.IdentityModel.Claims.ClaimSet.System%2A> property of the `ClaimSet` class.</span></span> <span data-ttu-id="f280b-135">`ClaimSet` Содержит `Identity` утверждения типа <xref:System.IdentityModel.Claims.ClaimTypes.Name%2A> ресурсом которого является предоставленное клиентом имя пользователя.</span><span class="sxs-lookup"><span data-stu-id="f280b-135">The `ClaimSet` contains an `Identity` claim of type <xref:System.IdentityModel.Claims.ClaimTypes.Name%2A> whose resource is the user name the client provides.</span></span> <span data-ttu-id="f280b-136">У соответствующего утверждения свойство`Right` имеет значение `PossessProperty`.</span><span class="sxs-lookup"><span data-stu-id="f280b-136">A corresponding claim has a `Right` of `PossessProperty`.</span></span>  
  
## <a name="rsa-keys"></a><span data-ttu-id="f280b-137">Ключи RSA</span><span class="sxs-lookup"><span data-stu-id="f280b-137">RSA Keys</span></span>  
 <span data-ttu-id="f280b-138">Если используется ключ RSA, не связанного с сертификатом, полученный в результате `ClaimSet` самостоятельно выданным и содержит `Identity` утверждения типа <xref:System.IdentityModel.Claims.ClaimTypes.Rsa%2A> , ресурсом которого является ключ RSA.</span><span class="sxs-lookup"><span data-stu-id="f280b-138">Where an RSA key not associated with a certificate is used, the resulting `ClaimSet` is self-issued and contains an `Identity` claim of type <xref:System.IdentityModel.Claims.ClaimTypes.Rsa%2A> whose resource is the RSA key.</span></span> <span data-ttu-id="f280b-139">У соответствующего утверждения свойство`Right` имеет значение `PossessProperty`.</span><span class="sxs-lookup"><span data-stu-id="f280b-139">A corresponding claim has a `Right` of `PossessProperty`.</span></span>  
  
## <a name="saml"></a><span data-ttu-id="f280b-140">Маркеры SAML</span><span class="sxs-lookup"><span data-stu-id="f280b-140">SAML</span></span>  
 <span data-ttu-id="f280b-141">Когда для проверки подлинности клиента используется маркер на языке SAML, полученный в результате объект `ClaimSet` будет выдан сущностью, подписавшей маркер SAML; зачастую это сертификат службы маркеров безопасности, которая выдала маркер SAML.</span><span class="sxs-lookup"><span data-stu-id="f280b-141">Where the client authenticates with a Security Assertions Markup Language (SAML) token, the resulting `ClaimSet` is issued by the entity that signed the SAML token, often the certificate of the security token service (STS) that issued the SAML token.</span></span> <span data-ttu-id="f280b-142">Объект `ClaimSet` содержит различные утверждения, обнаруженные в маркере SAML.</span><span class="sxs-lookup"><span data-stu-id="f280b-142">The `ClaimSet` contains various claims as found in the SAML token.</span></span> <span data-ttu-id="f280b-143">Если маркер SAML содержит свойство `SamlSubject` с именем, отличным от `null`, создается утверждение с правом `Identity`, типом <xref:System.IdentityModel.Claims.ClaimTypes.NameIdentifier%2A> и ресурсом типа <xref:System.IdentityModel.Tokens.SamlNameIdentifierClaimResource>.</span><span class="sxs-lookup"><span data-stu-id="f280b-143">If the SAML token contains a `SamlSubject` with a non-`null` name, then an `Identity` claim with a type of <xref:System.IdentityModel.Claims.ClaimTypes.NameIdentifier%2A> and a resource type of <xref:System.IdentityModel.Tokens.SamlNameIdentifierClaimResource> are created.</span></span>  
  
## <a name="identity-claims-and-servicesecuritycontextisanonymous"></a><span data-ttu-id="f280b-144">Идентификационные утверждения и ServiceSecurityContext.IsAnonymous</span><span class="sxs-lookup"><span data-stu-id="f280b-144">Identity Claims and ServiceSecurityContext.IsAnonymous</span></span>  
 <span data-ttu-id="f280b-145">Если ни один из `ClaimSet` объектов, полученный в результате учетные данные клиента содержит утверждения, у `Right` из `Identity,` то <xref:System.ServiceModel.ServiceSecurityContext.IsAnonymous%2A> возвращает `true`.</span><span class="sxs-lookup"><span data-stu-id="f280b-145">If none of the `ClaimSet` objects resulting from the client credentials contain a claim with a `Right` of `Identity,` then the <xref:System.ServiceModel.ServiceSecurityContext.IsAnonymous%2A> property returns `true`.</span></span> <span data-ttu-id="f280b-146">При наличии одного или нескольких таких утверждений свойство `IsAnonymous` возвращает значение `false`.</span><span class="sxs-lookup"><span data-stu-id="f280b-146">If one or more such claims are present, the `IsAnonymous` property returns `false`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f280b-147">См. также</span><span class="sxs-lookup"><span data-stu-id="f280b-147">See also</span></span>

- <xref:System.IdentityModel.Claims.ClaimSet>
- <xref:System.IdentityModel.Claims.Claim>
- <xref:System.IdentityModel.Claims.Rights>
- <xref:System.IdentityModel.Claims.ClaimTypes>
- [<span data-ttu-id="f280b-148">Управление утверждениями и авторизацией с помощью модели удостоверения</span><span class="sxs-lookup"><span data-stu-id="f280b-148">Managing Claims and Authorization with the Identity Model</span></span>](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md)
