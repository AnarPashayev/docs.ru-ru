---
title: Импорт схемы для создания классов
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF, schema import and export
- XsdDataContractImporter class
ms.assetid: b9170583-8c34-43bd-97bb-6c0c8dddeee0
ms.openlocfilehash: 986f8c2d1eec91ee9a68d2b6068f5b38dfdf14f1
ms.sourcegitcommit: c7a7e1468bf0fa7f7065de951d60dfc8d5ba89f5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/14/2019
ms.locfileid: "65591259"
---
# <a name="importing-schema-to-generate-classes"></a><span data-ttu-id="75675-102">Импорт схемы для создания классов</span><span class="sxs-lookup"><span data-stu-id="75675-102">Importing Schema to Generate Classes</span></span>
<span data-ttu-id="75675-103">Для создания классов из схемы, которые могут использоваться с Windows Communication Foundation (WCF), используйте <xref:System.Runtime.Serialization.XsdDataContractImporter> класса.</span><span class="sxs-lookup"><span data-stu-id="75675-103">To generate classes from schemas that are usable with Windows Communication Foundation (WCF), use the <xref:System.Runtime.Serialization.XsdDataContractImporter> class.</span></span> <span data-ttu-id="75675-104">В данном разделе описывается процесс и параметры импорта.</span><span class="sxs-lookup"><span data-stu-id="75675-104">This topic describes the process and variations.</span></span>  
  
## <a name="the-import-process"></a><span data-ttu-id="75675-105">Процесс импорта</span><span class="sxs-lookup"><span data-stu-id="75675-105">The Import Process</span></span>
 <span data-ttu-id="75675-106">Процесс импорта схемы начинается с создания объекта <xref:System.Xml.Schema.XmlSchemaSet>, что приводит к созданию объекта <xref:System.CodeDom.CodeCompileUnit>.</span><span class="sxs-lookup"><span data-stu-id="75675-106">The schema import process starts with an <xref:System.Xml.Schema.XmlSchemaSet> and produces a <xref:System.CodeDom.CodeCompileUnit>.</span></span>  
  
 <span data-ttu-id="75675-107">`XmlSchemaSet` Является частью из платформы .NET Framework объектной модели схемы (SOM), представляющий набор документов схемы языка определения схемы XML.</span><span class="sxs-lookup"><span data-stu-id="75675-107">The `XmlSchemaSet` is a part of the .NET Framework’s Schema Object Model (SOM) that represents a set of XML Schema definition language (XSD) schema documents.</span></span> <span data-ttu-id="75675-108">Чтобы создать объект `XmlSchemaSet` из набора документов XSD, десериализуйте каждый документ в объект <xref:System.Xml.Schema.XmlSchema> (с помощью сериализатора <xref:System.Xml.Serialization.XmlSerializer>) и добавьте эти объекты в новый объект `XmlSchemaSet`.</span><span class="sxs-lookup"><span data-stu-id="75675-108">To create an `XmlSchemaSet` object from a set of XSD documents, deserialize each document into an <xref:System.Xml.Schema.XmlSchema> object (using the <xref:System.Xml.Serialization.XmlSerializer>) and add these objects to a new `XmlSchemaSet`.</span></span>  
  
 <span data-ttu-id="75675-109">`CodeCompileUnit` Является частью платформы .NET Framework документа объектной модели кода (CodeDOM), представляющее код .NET Framework абстрактным способом.</span><span class="sxs-lookup"><span data-stu-id="75675-109">The `CodeCompileUnit` is part of the .NET Framework’s Code Document Object Model (CodeDOM) that represents .NET Framework code in an abstract way.</span></span> <span data-ttu-id="75675-110">Чтобы создать фактический код из `CodeCompileUnit`, используйте подкласс класса <xref:System.CodeDom.Compiler.CodeDomProvider>, например класс <xref:Microsoft.CSharp.CSharpCodeProvider> или класс <xref:Microsoft.VisualBasic.VBCodeProvider>.</span><span class="sxs-lookup"><span data-stu-id="75675-110">To generate the actual code from a `CodeCompileUnit`, use a subclass of the <xref:System.CodeDom.Compiler.CodeDomProvider> class, such as the <xref:Microsoft.CSharp.CSharpCodeProvider> or <xref:Microsoft.VisualBasic.VBCodeProvider> class.</span></span>  
  
### <a name="to-import-a-schema"></a><span data-ttu-id="75675-111">Процедура импорта схемы</span><span class="sxs-lookup"><span data-stu-id="75675-111">To import a schema</span></span>  
  
1. <span data-ttu-id="75675-112">Создайте экземпляр класса <xref:System.Runtime.Serialization.XsdDataContractImporter>.</span><span class="sxs-lookup"><span data-stu-id="75675-112">Create an instance of the <xref:System.Runtime.Serialization.XsdDataContractImporter>.</span></span>  
  
2. <span data-ttu-id="75675-113">Необязательный параметр.</span><span class="sxs-lookup"><span data-stu-id="75675-113">Optional.</span></span> <span data-ttu-id="75675-114">Передайте объект `CodeCompileUnit` в конструктор.</span><span class="sxs-lookup"><span data-stu-id="75675-114">Pass a `CodeCompileUnit` in the constructor.</span></span> <span data-ttu-id="75675-115">Типы, созданные во время импорта схемы, добавляются в этот экземпляр класса `CodeCompileUnit` вместо создания нового пустого экземпляра класса `CodeCompileUnit`.</span><span class="sxs-lookup"><span data-stu-id="75675-115">The types generated during schema import are added to this `CodeCompileUnit` instance instead of starting with a blank `CodeCompileUnit`.</span></span>  
  
3. <span data-ttu-id="75675-116">Необязательный параметр.</span><span class="sxs-lookup"><span data-stu-id="75675-116">Optional.</span></span> <span data-ttu-id="75675-117">Вызовите один из методов <xref:System.Runtime.Serialization.XsdDataContractImporter.CanImport%2A> .</span><span class="sxs-lookup"><span data-stu-id="75675-117">Call one of the <xref:System.Runtime.Serialization.XsdDataContractImporter.CanImport%2A> methods.</span></span> <span data-ttu-id="75675-118">Метод определяет, является ли данная схема действительной схемой контракта данных и можно ли ее импортировать.</span><span class="sxs-lookup"><span data-stu-id="75675-118">The method determines whether the given schema is a valid data contract schema and can be imported.</span></span> <span data-ttu-id="75675-119">Метод `CanImport` имеет те же перегрузки, что метод `Import` (см. следующий шаг).</span><span class="sxs-lookup"><span data-stu-id="75675-119">The `CanImport` method has the same overloads as `Import` (the next step).</span></span>  
  
4. <span data-ttu-id="75675-120">Вызовите один из перегруженных методов `Import`, например метод <xref:System.Runtime.Serialization.XsdDataContractImporter.Import%28System.Xml.Schema.XmlSchemaSet%29>.</span><span class="sxs-lookup"><span data-stu-id="75675-120">Call one of the overloaded `Import` methods, for example, the <xref:System.Runtime.Serialization.XsdDataContractImporter.Import%28System.Xml.Schema.XmlSchemaSet%29> method.</span></span>  
  
     <span data-ttu-id="75675-121">Простейшая перегрузка принимает объект `XmlSchemaSet` и импортирует все типы, включая анонимные, найденные в данном наборе схем.</span><span class="sxs-lookup"><span data-stu-id="75675-121">The simplest overload takes an `XmlSchemaSet` and imports all types, including anonymous types, found in that schema set.</span></span> <span data-ttu-id="75675-122">Другие перегрузки позволяют указывать тип XSD или список типов для импорта (в виде объекта <xref:System.Xml.XmlQualifiedName> или коллекции объектов `XmlQualifiedName`).</span><span class="sxs-lookup"><span data-stu-id="75675-122">Other overloads allow you to specify the XSD type or a list of types to import (in the form of an <xref:System.Xml.XmlQualifiedName> or a collection of `XmlQualifiedName` objects).</span></span> <span data-ttu-id="75675-123">В этом случае импортируются только указанные типы.</span><span class="sxs-lookup"><span data-stu-id="75675-123">In this case, only the specified types are imported.</span></span> <span data-ttu-id="75675-124">Перегрузка принимает объект <xref:System.Xml.Schema.XmlSchemaElement>, импортирующий определенный элемент из объекта `XmlSchemaSet` и его связанный тип (анонимный или нет).</span><span class="sxs-lookup"><span data-stu-id="75675-124">An overload takes an <xref:System.Xml.Schema.XmlSchemaElement> that imports a particular element out of the `XmlSchemaSet`, as well as its associated type (whether it is anonymous or not).</span></span> <span data-ttu-id="75675-125">Эта перегрузка возвращает объект `XmlQualifiedName`, представляющий имя контракта данных типа, созданного для этого элемента.</span><span class="sxs-lookup"><span data-stu-id="75675-125">This overload returns an `XmlQualifiedName`, which represents the data contract name of the type generated for this element.</span></span>  
  
     <span data-ttu-id="75675-126">При нескольких вызовах метода `Import` в один и тот же объект `CodeCompileUnit` добавляется несколько типов.</span><span class="sxs-lookup"><span data-stu-id="75675-126">Multiple calls of the `Import` method result in multiple items being added to the same `CodeCompileUnit`.</span></span> <span data-ttu-id="75675-127">Тип не создается в объекте `CodeCompileUnit` , если он уже имеется в нем.</span><span class="sxs-lookup"><span data-stu-id="75675-127">A type is not generated into the `CodeCompileUnit` if it already exists there.</span></span> <span data-ttu-id="75675-128">Вызовите метод `Import` несколько раз для одного и того же объекта `XsdDataContractImporter` вместо использования нескольких объектов `XsdDataContractImporter`.</span><span class="sxs-lookup"><span data-stu-id="75675-128">Call `Import` multiple times on the same `XsdDataContractImporter` instead of using multiple `XsdDataContractImporter` objects.</span></span> <span data-ttu-id="75675-129">Этот метод рекомендуется использовать, чтобы избежать создания повторяющихся типов.</span><span class="sxs-lookup"><span data-stu-id="75675-129">This is the recommended way to avoid duplicate types being generated.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="75675-130">В случае сбоя при импорте объект `CodeCompileUnit` будет находиться в непредсказуемом состоянии.</span><span class="sxs-lookup"><span data-stu-id="75675-130">If there is a failure during import, the `CodeCompileUnit` will be in an unpredictable state.</span></span> <span data-ttu-id="75675-131">Использование объекта `CodeCompileUnit`, возникшего после сбоя импорта, может привести к образованию уязвимых мест в системе безопасности.</span><span class="sxs-lookup"><span data-stu-id="75675-131">Using a `CodeCompileUnit` resulting from a failed import could expose you to security vulnerabilities.</span></span>  
  
5. <span data-ttu-id="75675-132">Для доступа к объекту `CodeCompileUnit` используется свойство <xref:System.Runtime.Serialization.XsdDataContractImporter.CodeCompileUnit%2A> .</span><span class="sxs-lookup"><span data-stu-id="75675-132">Access the `CodeCompileUnit` through the <xref:System.Runtime.Serialization.XsdDataContractImporter.CodeCompileUnit%2A> property.</span></span>  
  
### <a name="import-options-customizing-the-generated-types"></a><span data-ttu-id="75675-133">Параметры импорта. Настройка созданных типов</span><span class="sxs-lookup"><span data-stu-id="75675-133">Import Options: Customizing the Generated Types</span></span>  
 <span data-ttu-id="75675-134">Можно присвоить свойство <xref:System.Runtime.Serialization.XsdDataContractImporter.Options%2A> объекта <xref:System.Runtime.Serialization.XsdDataContractImporter> экземпляру класса <xref:System.Runtime.Serialization.ImportOptions> для управления различными аспектами процесса импорта.</span><span class="sxs-lookup"><span data-stu-id="75675-134">You can set the <xref:System.Runtime.Serialization.XsdDataContractImporter.Options%2A> property of the <xref:System.Runtime.Serialization.XsdDataContractImporter> to an instance of the <xref:System.Runtime.Serialization.ImportOptions> class to control various aspects of the import process.</span></span> <span data-ttu-id="75675-135">Некоторые параметры непосредственно влияют на созданные типы.</span><span class="sxs-lookup"><span data-stu-id="75675-135">A number of options directly influence the types that are generated.</span></span>  
  
#### <a name="controlling-the-access-level-generateinternal-or-the-internal-switch"></a><span data-ttu-id="75675-136">Управление уровнем доступа (GenerateInternal или коммутатор /internal)</span><span class="sxs-lookup"><span data-stu-id="75675-136">Controlling the Access Level (GenerateInternal or the /internal switch)</span></span>  
 <span data-ttu-id="75675-137">Это соответствует **/ internal** переключиться [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span><span class="sxs-lookup"><span data-stu-id="75675-137">This corresponds to the **/internal** switch on the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span>  
  
 <span data-ttu-id="75675-138">Как правило, открытые типы создаются из схемы с закрытыми полями и соответствующими свойствами открытых членов данных.</span><span class="sxs-lookup"><span data-stu-id="75675-138">Normally, public types are generated from schema, with private fields and matching public data member properties.</span></span> <span data-ttu-id="75675-139">Чтобы вместо этого создать внутренние типы, присвойте свойству <xref:System.Runtime.Serialization.ImportOptions.GenerateInternal%2A> значение `true`.</span><span class="sxs-lookup"><span data-stu-id="75675-139">To generate internal types instead, set the <xref:System.Runtime.Serialization.ImportOptions.GenerateInternal%2A> property to `true`.</span></span>  
  
 <span data-ttu-id="75675-140">В следующем примере показана схема, преобразованная во внутренний класс после присвоения свойству <xref:System.Runtime.Serialization.ImportOptions.GenerateInternal%2A> значения `true.`</span><span class="sxs-lookup"><span data-stu-id="75675-140">The following example shows a schema transformed into an internal class when the <xref:System.Runtime.Serialization.ImportOptions.GenerateInternal%2A> property is set to `true.`</span></span>  
  
 [!code-csharp[c_SchemaImportExport#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#2)]
 [!code-vb[c_SchemaImportExport#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#2)]  
  
#### <a name="controlling-namespaces-namespaces-or-the-namespace-switch"></a><span data-ttu-id="75675-141">Управление пространствами имен (Namespaces или коммутатор /namespace)</span><span class="sxs-lookup"><span data-stu-id="75675-141">Controlling Namespaces (Namespaces or the /namespace switch)</span></span>  
 <span data-ttu-id="75675-142">Это соответствует **/Namespace** переключиться `Svcutil.exe` средство.</span><span class="sxs-lookup"><span data-stu-id="75675-142">This corresponds to the **/namespace** switch on the `Svcutil.exe` tool.</span></span>  
  
 <span data-ttu-id="75675-143">Как правило, сформированные из схемы типы создаются в пространствах имен .NET Framework, каждое пространство имен XSD, соответствующий определенным пространства имен .NET Framework в соответствии с сопоставлением, рассмотренным в [Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md).</span><span class="sxs-lookup"><span data-stu-id="75675-143">Normally, types generated from schema are generated into .NET Framework namespaces, with each XSD namespace corresponding to a particular .NET Framework namespace according to a mapping described in [Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md).</span></span> <span data-ttu-id="75675-144">Это сопоставление можно настроить, присвоив свойству <xref:System.Runtime.Serialization.ImportOptions.Namespaces%2A> значение <xref:System.Collections.Generic.Dictionary%602>.</span><span class="sxs-lookup"><span data-stu-id="75675-144">You can customize this mapping by the <xref:System.Runtime.Serialization.ImportOptions.Namespaces%2A> property to a <xref:System.Collections.Generic.Dictionary%602>.</span></span> <span data-ttu-id="75675-145">Если пространство имен XSD найден в словаре, соответствующий пространства имен .NET Framework также берется из словаря.</span><span class="sxs-lookup"><span data-stu-id="75675-145">If a given XSD namespace is found in the dictionary, the matching .NET Framework namespace is also taken from your dictionary.</span></span>  
  
 <span data-ttu-id="75675-146">Например, рассмотрим следующую схему.</span><span class="sxs-lookup"><span data-stu-id="75675-146">For example, consider the following schema.</span></span>  
  
 [!code-xml[c_SchemaImportExport#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#10)]  
  
 <span data-ttu-id="75675-147">В следующем примере используется `Namespaces` свойства для сопоставления `http://schemas.contoso.com/carSchema` пространство имен «Contoso.Cars».</span><span class="sxs-lookup"><span data-stu-id="75675-147">The following example uses the `Namespaces` property to map the `http://schemas.contoso.com/carSchema` namespace to "Contoso.Cars".</span></span>  
  
 [!code-csharp[c_SchemaImportExport#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#8)]
 [!code-vb[c_SchemaImportExport#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#8)]  
  
#### <a name="adding-the-serializableattribute-generateserializable-or-the-serializable-switch"></a><span data-ttu-id="75675-148">Добавление SerializableAttribute (GenerateSerializable или коммутатор /serializable)</span><span class="sxs-lookup"><span data-stu-id="75675-148">Adding the SerializableAttribute (GenerateSerializable or the /serializable switch)</span></span>  
 <span data-ttu-id="75675-149">Это соответствует **/ serializable** переключиться `Svcutil.exe` средство.</span><span class="sxs-lookup"><span data-stu-id="75675-149">This corresponds to the **/serializable** switch on the `Svcutil.exe` tool.</span></span>  
  
 <span data-ttu-id="75675-150">Иногда очень важно для типов, созданных из схемы, могли использоваться в модулях сериализации среды выполнения .NET Framework (например, <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter?displayProperty=nameWithType> и <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter> классы).</span><span class="sxs-lookup"><span data-stu-id="75675-150">Sometimes it is important for the types generated from the schema to be usable with .NET Framework runtime serialization engines (for example, the <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter?displayProperty=nameWithType> and the <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter> classes).</span></span> <span data-ttu-id="75675-151">Это полезно при использовании типов для удаленного взаимодействия .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="75675-151">This is useful when using types for .NET Framework remoting.</span></span> <span data-ttu-id="75675-152">Чтобы включить эту возможность, необходимо применить атрибут <xref:System.SerializableAttribute> к созданным типам помимо обычного атрибута <xref:System.Runtime.Serialization.DataContractAttribute>.</span><span class="sxs-lookup"><span data-stu-id="75675-152">To enable this, you must apply the <xref:System.SerializableAttribute> attribute to the generated types in addition to the regular <xref:System.Runtime.Serialization.DataContractAttribute> attribute.</span></span> <span data-ttu-id="75675-153">Этот атрибут создается автоматически, если параметр импорта `GenerateSerializable` имеет значение `true`.</span><span class="sxs-lookup"><span data-stu-id="75675-153">The attribute is generated automatically if the `GenerateSerializable` import option is set to `true`.</span></span>  
  
 <span data-ttu-id="75675-154">В следующем примере показан класс `Vehicle`, при создании которого параметр импорта `GenerateSerializable` был установлен на значение `true`.</span><span class="sxs-lookup"><span data-stu-id="75675-154">The following example shows the `Vehicle` class generated with the `GenerateSerializable` import option set to `true`.</span></span>  
  
 [!code-csharp[c_SchemaImportExport#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#4)]
 [!code-vb[c_SchemaImportExport#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#4)]  
  
#### <a name="adding-data-binding-support-enabledatabinding-or-the-enabledatabinding-switch"></a><span data-ttu-id="75675-155">Добавление поддержки привязки данных (EnableDataBinding или коммутатор /enableDataBinding)</span><span class="sxs-lookup"><span data-stu-id="75675-155">Adding Data Binding Support (EnableDataBinding or the /enableDataBinding switch)</span></span>  
 <span data-ttu-id="75675-156">Это соответствует **/enableDataBinding** в средстве Svcutil.exe.</span><span class="sxs-lookup"><span data-stu-id="75675-156">This corresponds to the **/enableDataBinding** switch on the Svcutil.exe tool.</span></span>  
  
 <span data-ttu-id="75675-157">Иногда возникает необходимость привязать созданные из схемы типы к компонентам графического пользовательского интерфейса, чтобы при каждом обновлении экземпляров этих типов автоматически обновлялся пользовательский интерфейс.</span><span class="sxs-lookup"><span data-stu-id="75675-157">Sometimes, you may want to bind the types generated from the schema to graphical user interface components so that any update to instances of these types will automatically update the UI.</span></span> <span data-ttu-id="75675-158">Объект `XsdDataContractImporter` может создавать типы, реализующие интерфейс <xref:System.ComponentModel.INotifyPropertyChanged> способом, обеспечивающим вызов события при любом изменении свойства.</span><span class="sxs-lookup"><span data-stu-id="75675-158">The `XsdDataContractImporter` can generate types that implement the <xref:System.ComponentModel.INotifyPropertyChanged> interface in such a way that any property change triggers an event.</span></span> <span data-ttu-id="75675-159">При создании типов для использования в среде программирования пользовательского интерфейса клиента, который поддерживает этот интерфейс (таких как Windows Presentation Foundation (WPF)), задайте <xref:System.Runtime.Serialization.ImportOptions.EnableDataBinding%2A> свойства `true` для включения этой функции.</span><span class="sxs-lookup"><span data-stu-id="75675-159">If you are generating types for use with a client UI programming environment that supports this interface (such as Windows Presentation Foundation (WPF)), set the <xref:System.Runtime.Serialization.ImportOptions.EnableDataBinding%2A> property to `true` to enable this feature.</span></span>  
  
 <span data-ttu-id="75675-160">В следующем примере показан класс `Vehicle`, при создании которого параметр импорта <xref:System.Runtime.Serialization.ImportOptions.EnableDataBinding%2A> был установлен на значение `true`.</span><span class="sxs-lookup"><span data-stu-id="75675-160">The following example shows the `Vehicle` class generated with the <xref:System.Runtime.Serialization.ImportOptions.EnableDataBinding%2A> set to `true`.</span></span>  
  
 [!code-csharp[C_SchemaImportExport#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#5)]
 [!code-vb[C_SchemaImportExport#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#5)]  
  
### <a name="import-options-choosing-collection-types"></a><span data-ttu-id="75675-161">Параметры импорта. Выбор типов коллекции</span><span class="sxs-lookup"><span data-stu-id="75675-161">Import Options: Choosing Collection Types</span></span>  
 <span data-ttu-id="75675-162">Коллекции элементов представляют два специальных шаблона в формате XML: список элементов и ассоциации между двумя элементами.</span><span class="sxs-lookup"><span data-stu-id="75675-162">Two special patterns in XML represent collections of items: lists of items and associations between one item and another.</span></span> <span data-ttu-id="75675-163">Ниже представлен пример списка строк.</span><span class="sxs-lookup"><span data-stu-id="75675-163">The following is an example of a list of strings.</span></span>  
  
 [!code-xml[C_SchemaImportExport#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#11)]  
  
 <span data-ttu-id="75675-164">Ниже приведен пример ассоциации между строкой и целым числом (`city name` и `population`).</span><span class="sxs-lookup"><span data-stu-id="75675-164">The following is an example of an association between a string and an integer (`city name` and `population`).</span></span>  
  
 [!code-xml[C_SchemaImportExport#12](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#12)]  
  
> [!NOTE]
>  <span data-ttu-id="75675-165">Любая ассоциация может также считаться списком.</span><span class="sxs-lookup"><span data-stu-id="75675-165">Any association could also be considered a list.</span></span> <span data-ttu-id="75675-166">Например, указанную выше ассоциацию можно рассматривать как список сложных объектов `city` с двумя полями (полем строки и целочисленным полем).</span><span class="sxs-lookup"><span data-stu-id="75675-166">For example, you can view the preceding association as a list of complex `city` objects that happen to have two fields (a string field and an integer field).</span></span> <span data-ttu-id="75675-167">Оба шаблона имеют представление в схеме XSD.</span><span class="sxs-lookup"><span data-stu-id="75675-167">Both patterns have a representation in the XSD Schema.</span></span> <span data-ttu-id="75675-168">Нет способа различать список и ассоциацию, поэтому такие шаблоны всегда обрабатываются как списки, если не специальная заметка, характерная для WCF в схеме.</span><span class="sxs-lookup"><span data-stu-id="75675-168">There is no way to differentiate between a list and an association, so such patterns are always treated as lists unless a special annotation specific to WCF is present in the schema.</span></span> <span data-ttu-id="75675-169">В заметке указывается, что данный шаблон представляет ассоциацию.</span><span class="sxs-lookup"><span data-stu-id="75675-169">The annotation indicates that a given pattern represents an association.</span></span> <span data-ttu-id="75675-170">Дополнительные сведения см. в разделе [Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md).</span><span class="sxs-lookup"><span data-stu-id="75675-170">For more information, see [Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md).</span></span>  
  
 <span data-ttu-id="75675-171">Как правило список импортируется как контракт данных коллекции, который является производным от универсального списка или как массив .NET Framework, в зависимости от того, является ли схема использует стандартный шаблон именования для коллекций.</span><span class="sxs-lookup"><span data-stu-id="75675-171">Normally, a list is imported as a collection data contract that derives from a Generic List or as a .NET Framework array, depending on whether or not the schema follows the standard naming pattern for collections.</span></span> <span data-ttu-id="75675-172">Это описано более подробно в [типы коллекций в контрактах данных](../../../../docs/framework/wcf/feature-details/collection-types-in-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="75675-172">This is described in more detail in [Collection Types in Data Contracts](../../../../docs/framework/wcf/feature-details/collection-types-in-data-contracts.md).</span></span> <span data-ttu-id="75675-173">Обычно ассоциации импортируются либо в виде <xref:System.Collections.Generic.Dictionary%602>, либо в виде контракта данных коллекции, наследуемого от объекта словаря.</span><span class="sxs-lookup"><span data-stu-id="75675-173">Associations are normally imported as either a <xref:System.Collections.Generic.Dictionary%602> or a collection data contract that derives from the dictionary object.</span></span> <span data-ttu-id="75675-174">Например, рассмотрим следующую схему.</span><span class="sxs-lookup"><span data-stu-id="75675-174">For example, consider the following schema.</span></span>  
  
 [!code-xml[c_SchemaImportExport#13](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#13)]  
  
 <span data-ttu-id="75675-175">Импорт выполняется следующим образом (вместо свойств для удобочитаемости показаны поля.)</span><span class="sxs-lookup"><span data-stu-id="75675-175">This would be imported as follows (fields are shown instead of properties for readability).</span></span>  
  
 [!code-csharp[c_SchemaImportExport#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#6)]
 [!code-vb[c_SchemaImportExport#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#6)]  
  
 <span data-ttu-id="75675-176">Можно настроить типы коллекций, созданные для таких шаблонов схемы.</span><span class="sxs-lookup"><span data-stu-id="75675-176">It is possible to customize the collection types that are generated for such schema patterns.</span></span> <span data-ttu-id="75675-177">Например, может потребоваться создать коллекции, наследуемые от класса <xref:System.ComponentModel.BindingList%601>, а не от класса <xref:System.Collections.Generic.List%601>, для привязки типа к списку и его автоматического обновления при изменении содержимого коллекции.</span><span class="sxs-lookup"><span data-stu-id="75675-177">For example, you may want to generate collections deriving from the <xref:System.ComponentModel.BindingList%601> instead of the <xref:System.Collections.Generic.List%601> class in order to bind the type to a list box and have it be automatically updated when the contents of the collection change.</span></span> <span data-ttu-id="75675-178">Для этого присвойте свойство <xref:System.Runtime.Serialization.ImportOptions.ReferencedCollectionTypes%2A> класса <xref:System.Runtime.Serialization.ImportOptions> списку типов коллекций, которые должны использоваться (в дальнейшем называемых "ссылочные типы").</span><span class="sxs-lookup"><span data-stu-id="75675-178">To do this, set the <xref:System.Runtime.Serialization.ImportOptions.ReferencedCollectionTypes%2A> property of the <xref:System.Runtime.Serialization.ImportOptions> class to a list of collection types to be used (hereafter known as the referenced types).</span></span> <span data-ttu-id="75675-179">При импорте какой-либо коллекции выполняется сканирование этого списка ссылочных типов коллекций и используется наиболее подходящая коллекция, если таковая найдена.</span><span class="sxs-lookup"><span data-stu-id="75675-179">When importing any collection, this list of referenced collection types is scanned and the best-matching collection is used if one is found.</span></span> <span data-ttu-id="75675-180">Ассоциации сопоставляются только с типами, реализующими универсальный или неуниверсальный интерфейс <xref:System.Collections.IDictionary>, в то время как списки сопоставляются с любым поддерживаемым типом коллекции.</span><span class="sxs-lookup"><span data-stu-id="75675-180">Associations are matched only against types that implement either the generic or the nongeneric <xref:System.Collections.IDictionary> interface, while lists are matched against any supported collection type.</span></span>  
  
 <span data-ttu-id="75675-181">Например, если свойству <xref:System.Runtime.Serialization.ImportOptions.ReferencedCollectionTypes%2A> присвоено значение <xref:System.ComponentModel.BindingList%601>, тип `people` в предыдущем примере создается следующим образом.</span><span class="sxs-lookup"><span data-stu-id="75675-181">For example, if the <xref:System.Runtime.Serialization.ImportOptions.ReferencedCollectionTypes%2A> property is set to a <xref:System.ComponentModel.BindingList%601>, the `people` type in the preceding example is generated as follows.</span></span>  
  
 [!code-csharp[C_SchemaImportExport#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#7)]
 [!code-vb[C_SchemaImportExport#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#7)]  
  
 <span data-ttu-id="75675-182">Закрытый универсальный интерфейс считается наиболее подходящим.</span><span class="sxs-lookup"><span data-stu-id="75675-182">A closed generic is considered the best match.</span></span> <span data-ttu-id="75675-183">Например, если типы `BindingList(Of Integer)` и <xref:System.Collections.ArrayList> передаются в коллекцию ссылочных типов, любые списки целых чисел, найденные в схеме, импортируются как `BindingList(Of Integer)`.</span><span class="sxs-lookup"><span data-stu-id="75675-183">For example, if the types `BindingList(Of Integer)` and <xref:System.Collections.ArrayList> are passed to the collection of referenced types, any lists of integers found in schema are imported as a `BindingList(Of Integer)`.</span></span> <span data-ttu-id="75675-184">Любые другие списки, например `List(Of String)`, импортируются как `ArrayList`.</span><span class="sxs-lookup"><span data-stu-id="75675-184">Any other lists, for example, a `List(Of String)`, are imported as an `ArrayList`.</span></span>  
  
 <span data-ttu-id="75675-185">Если тип, реализующий универсальный интерфейс `IDictionary`, добавляется в коллекцию ссылочных типов, параметры этого типа должны быть либо полностью открытыми, либо полностью закрытыми.</span><span class="sxs-lookup"><span data-stu-id="75675-185">If a type that implements the generic `IDictionary` interface is added to the collection of referenced types, its type parameters must either be fully open or fully closed.</span></span>  
  
 <span data-ttu-id="75675-186">Дубликаты не разрешены.</span><span class="sxs-lookup"><span data-stu-id="75675-186">Duplicates are not allowed.</span></span> <span data-ttu-id="75675-187">Например, нельзя добавить и `List(Of Integer)`, и `Collection(Of Integer)` в ссылочные типы.</span><span class="sxs-lookup"><span data-stu-id="75675-187">For example, you cannot add both a `List(Of Integer)` and a `Collection(Of Integer)` to the referenced types.</span></span> <span data-ttu-id="75675-188">Это делает невозможным определение типа, который следует использовать при обнаружении списка целых чисел в схеме.</span><span class="sxs-lookup"><span data-stu-id="75675-188">That would make it impossible to determine which should be used when a list of integers is found in schema.</span></span> <span data-ttu-id="75675-189">Дубликаты обнаруживаются, только если в схеме есть тип, указывающий на проблему дубликатов.</span><span class="sxs-lookup"><span data-stu-id="75675-189">Duplicates will be detected only if there is a type in schema that exposes the duplicates problem.</span></span> <span data-ttu-id="75675-190">Например, если импортируемая схема не содержит список целых чисел, допускается иметь оба типа: `List(Of Integer)` и `Collection(Of Integer)` в коллекции ссылочных типов, но ни тот, ни другой не будут действовать.</span><span class="sxs-lookup"><span data-stu-id="75675-190">For example, if the imported schema does not contain lists of integers, it is allowed to have both the `List(Of Integer)` and the `Collection(Of Integer)` in the referenced types collection, but neither will have any effect.</span></span>  
  
 <span data-ttu-id="75675-191">Механизм ссылочных типов коллекций работает одинаково хорошо как для коллекций сложных типов (включая коллекции других коллекций), так и для коллекций примитивов.</span><span class="sxs-lookup"><span data-stu-id="75675-191">The referenced collection types mechanism works equally well for collections of complex types (including collections of other collections), and not just for collections of primitives.</span></span>  
  
 <span data-ttu-id="75675-192">`ReferencedCollectionTypes` Свойство соответствует **/collectionType** в средстве SvcUtil.exe.</span><span class="sxs-lookup"><span data-stu-id="75675-192">The `ReferencedCollectionTypes` property corresponds to the **/collectionType** switch on the SvcUtil.exe tool.</span></span> <span data-ttu-id="75675-193">Обратите внимание, что для ссылки на несколько типов коллекций, **/collectionType** коммутатора должен быть указан несколько раз.</span><span class="sxs-lookup"><span data-stu-id="75675-193">Note that to reference multiple collection types, the **/collectionType** switch must be specified multiple times.</span></span> <span data-ttu-id="75675-194">Если тип не находится в библиотеке MsCorLib.dll, его сборки также должно быть указано с помощью **/reference** переключения.</span><span class="sxs-lookup"><span data-stu-id="75675-194">If the type is not in the MsCorLib.dll, its assembly must also be referenced using the **/reference** switch.</span></span>  
  
#### <a name="import-options-referencing-existing-types"></a><span data-ttu-id="75675-195">Параметры импорта. Ссылка на существующие типы</span><span class="sxs-lookup"><span data-stu-id="75675-195">Import Options: Referencing Existing Types</span></span>  
 <span data-ttu-id="75675-196">В некоторых случаях типы в схеме соответствуют существующие типы .NET Framework, и нет необходимости создавать эти типы с нуля.</span><span class="sxs-lookup"><span data-stu-id="75675-196">Occasionally, types in schema correspond to existing .NET Framework types, and there is no need to generate these types from scratch.</span></span> <span data-ttu-id="75675-197">(Сведения, представленные в данном разделе, применимы только к типам, не являющимся коллекциями.</span><span class="sxs-lookup"><span data-stu-id="75675-197">(This section applies only to noncollection types.</span></span> <span data-ttu-id="75675-198">Дополнительные сведения о типах коллекций см. в предыдущем разделе.)</span><span class="sxs-lookup"><span data-stu-id="75675-198">For collection types, see the preceding section.)</span></span>  
  
 <span data-ttu-id="75675-199">Например, имеется стандартный корпоративный тип контракта данных "Person", который всегда необходимо использовать при представлении лица.</span><span class="sxs-lookup"><span data-stu-id="75675-199">For example, you may have a standard company-wide "Person" data contract type that you always want used when representing a person.</span></span> <span data-ttu-id="75675-200">Всякий раз при использовании этого типа некоторыми службами и при отображении его схемы в метаданных службы может возникать необходимость в повторном использовании существующего типа `Person` при импорте этой схемы вместо создания нового типа для каждой службы.</span><span class="sxs-lookup"><span data-stu-id="75675-200">Whenever some service makes use of this type, and its schema appears in the service metadata, you may want to reuse the existing `Person` type when importing this schema instead of generating a new one for every service.</span></span>  
  
 <span data-ttu-id="75675-201">Для этого передайте список типов .NET Framework, которые вы хотите повторно использовать в коллекцию <xref:System.Runtime.Serialization.ImportOptions.ReferencedTypes%2A> свойство возвращает на <xref:System.Runtime.Serialization.ImportOptions> класса.</span><span class="sxs-lookup"><span data-stu-id="75675-201">To do this, pass a list of .NET Framework types that you want to reuse into the collection the <xref:System.Runtime.Serialization.ImportOptions.ReferencedTypes%2A> property returns on the <xref:System.Runtime.Serialization.ImportOptions> class.</span></span> <span data-ttu-id="75675-202">Если какой-либо из этих типов имеет имя контракта данных и пространство имен, соответствующие имени и пространству имен типа схемы, выполняется структурное сравнение.</span><span class="sxs-lookup"><span data-stu-id="75675-202">If any of these types have a data contract name and namespace that matches the name and namespace of a schema type, a structural comparison is performed.</span></span> <span data-ttu-id="75675-203">Если выяснилось, что типы имеют соответствующие имена и соответствующие структуры, существующего типа .NET Framework используется повторно вместо создания нового.</span><span class="sxs-lookup"><span data-stu-id="75675-203">If it is determined that the types have both matching names and matching structures, the existing .NET Framework type is reused instead of generating a new one.</span></span> <span data-ttu-id="75675-204">Если соответствует только имя, но не структура, вызывается исключение.</span><span class="sxs-lookup"><span data-stu-id="75675-204">If only the name matches but not the structure, an exception is thrown.</span></span> <span data-ttu-id="75675-205">Обратите внимание, при создании ссылок на типы управление версиями не допускается (например, добавление новых необязательных членов данных).</span><span class="sxs-lookup"><span data-stu-id="75675-205">Note that there is no allowance for versioning when referencing types (for example, adding new optional data members).</span></span> <span data-ttu-id="75675-206">Структуры должны совпадать полностью.</span><span class="sxs-lookup"><span data-stu-id="75675-206">The structures must match exactly.</span></span>  
  
 <span data-ttu-id="75675-207">Допустимо добавлять несколько типов с одинаковым именем контракта данных и пространством имен в коллекцию ссылочных типов, если никакие типы схемы не импортируются с этим именем и пространством имен.</span><span class="sxs-lookup"><span data-stu-id="75675-207">It is legal to add multiple types with the same data contract name and namespace to the referenced types collection, as long as no schema types are imported with that name and namespace.</span></span> <span data-ttu-id="75675-208">Это позволит быстро добавлять все типы в сборке в коллекцию, не задумываясь о возможных проблемах с дубликатами для типов, которые в настоящий момент отсутствуют в схеме.</span><span class="sxs-lookup"><span data-stu-id="75675-208">This allows you to easily add all the types in an assembly to the collection without worrying about duplicates for types that do not actually occur in schema.</span></span>  
  
 <span data-ttu-id="75675-209">`ReferencedTypes` Свойство соответствует **/reference** в определенных режимах работы средства Svcutil.exe.</span><span class="sxs-lookup"><span data-stu-id="75675-209">The `ReferencedTypes` property corresponds to the **/reference** switch in certain modes of operation of the Svcutil.exe tool.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="75675-210">При использовании Svcutil.exe или (в Visual Studio) **Add Service Reference** автоматически добавляются ссылки на средства, все типы в библиотеке MsCorLib.dll.</span><span class="sxs-lookup"><span data-stu-id="75675-210">When using the Svcutil.exe or (in Visual Studio) the **Add Service Reference** tools, all of the types in MsCorLib.dll are automatically referenced.</span></span>  
  
#### <a name="import-options-importing-non-datacontract-schema-as-ixmlserializable-types"></a><span data-ttu-id="75675-211">Параметры импорта. Импорт схемы, отличной от DataContract в виде типов IXmlSerializable</span><span class="sxs-lookup"><span data-stu-id="75675-211">Import Options: Importing Non-DataContract Schema as IXmlSerializable types</span></span>  
 <span data-ttu-id="75675-212">Объект <xref:System.Runtime.Serialization.XsdDataContractImporter> поддерживает ограниченное подмножество схемы.</span><span class="sxs-lookup"><span data-stu-id="75675-212">The <xref:System.Runtime.Serialization.XsdDataContractImporter> supports a limited subset of the schema.</span></span> <span data-ttu-id="75675-213">При наличии неподдерживаемых конструкций схемы (например, атрибутов XML) попытка импорта заканчивается с ошибкой, и возникает исключение.</span><span class="sxs-lookup"><span data-stu-id="75675-213">If unsupported schema constructs are present (for example, XML attributes), the import attempt fails with an exception.</span></span> <span data-ttu-id="75675-214">Однако, если присвоить свойству <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> значение `true`, диапазон поддерживаемых схем увеличится.</span><span class="sxs-lookup"><span data-stu-id="75675-214">However, setting the <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> property to `true` extends the range of schema supported.</span></span> <span data-ttu-id="75675-215">При выборе значения `true` объект <xref:System.Runtime.Serialization.XsdDataContractImporter> создает типы, реализующие интерфейс <xref:System.Xml.Serialization.IXmlSerializable>.</span><span class="sxs-lookup"><span data-stu-id="75675-215">When set to `true`, the <xref:System.Runtime.Serialization.XsdDataContractImporter> generates types that implement the <xref:System.Xml.Serialization.IXmlSerializable> interface.</span></span> <span data-ttu-id="75675-216">Это обеспечивает прямой доступ к XML-представлению этих типов.</span><span class="sxs-lookup"><span data-stu-id="75675-216">This enables direct access to the XML representation of these types.</span></span>  
  
##### <a name="design-considerations"></a><span data-ttu-id="75675-217">Вопросы проектирования</span><span class="sxs-lookup"><span data-stu-id="75675-217">Design Considerations</span></span>  
  
- <span data-ttu-id="75675-218">Возможно, будет трудно работать со слабо типизированным XML-представлением напрямую.</span><span class="sxs-lookup"><span data-stu-id="75675-218">It may be difficult to work with the weakly typed XML representation directly.</span></span> <span data-ttu-id="75675-219">При работе со схемой, не совместимой с контрактами данных строго типизированным способом, рекомендуется использовать альтернативный модуль сериализации, такой как <xref:System.Xml.Serialization.XmlSerializer>.</span><span class="sxs-lookup"><span data-stu-id="75675-219">Consider using an alternative serialization engine, such as the <xref:System.Xml.Serialization.XmlSerializer>, to work with schema not compatible with data contracts in a strongly typed way.</span></span> <span data-ttu-id="75675-220">Дополнительные сведения см. в разделе [с помощью класса XmlSerializer](../../../../docs/framework/wcf/feature-details/using-the-xmlserializer-class.md).</span><span class="sxs-lookup"><span data-stu-id="75675-220">For more information, see [Using the XmlSerializer Class](../../../../docs/framework/wcf/feature-details/using-the-xmlserializer-class.md).</span></span>  
  
- <span data-ttu-id="75675-221">Некоторые конструкции схемы невозможно импортировать с помощью <xref:System.Runtime.Serialization.XsdDataContractImporter>, даже если свойству <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> присвоено значение `true`.</span><span class="sxs-lookup"><span data-stu-id="75675-221">Some schema constructs cannot be imported by the <xref:System.Runtime.Serialization.XsdDataContractImporter> even when the <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> property is set to `true`.</span></span> <span data-ttu-id="75675-222">В таких случаях также рекомендуется использовать <xref:System.Xml.Serialization.XmlSerializer>.</span><span class="sxs-lookup"><span data-stu-id="75675-222">Again, consider using the <xref:System.Xml.Serialization.XmlSerializer> for such cases.</span></span>  
  
- <span data-ttu-id="75675-223">Точные конструкции схемы, поддерживаемые одновременно при <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> — `true` или `false` описаны в [Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md).</span><span class="sxs-lookup"><span data-stu-id="75675-223">The exact schema constructs that are supported both when <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> is `true` or `false` are described in [Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md).</span></span>  
  
- <span data-ttu-id="75675-224">При импорте и экспорте точность схемы для созданных типов <xref:System.Xml.Serialization.IXmlSerializable> не сохраняется.</span><span class="sxs-lookup"><span data-stu-id="75675-224">Schema for generated <xref:System.Xml.Serialization.IXmlSerializable> types do not retain fidelity when imported and exported.</span></span> <span data-ttu-id="75675-225">Это значит, что при экспорте схемы из созданных типов и импорте в виде классов исходная схема не возвращается.</span><span class="sxs-lookup"><span data-stu-id="75675-225">That is, exporting the schema from the generated types and importing as classes does not return the original schema.</span></span>  
  
 <span data-ttu-id="75675-226">Можно сгруппировать параметр <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> и параметр <xref:System.ServiceModel.Description.ServiceContractGenerator.ReferencedTypes%2A>, описанные выше.</span><span class="sxs-lookup"><span data-stu-id="75675-226">It is possible to combine the <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> option with the <xref:System.ServiceModel.Description.ServiceContractGenerator.ReferencedTypes%2A> option previously described.</span></span> <span data-ttu-id="75675-227">В случае типов, которые необходимо создать как реализации <xref:System.Xml.Serialization.IXmlSerializable>, структурная проверка пропускается при использовании возможности <xref:System.ServiceModel.Description.ServiceContractGenerator.ReferencedTypes%2A>.</span><span class="sxs-lookup"><span data-stu-id="75675-227">For types that have to be generated as <xref:System.Xml.Serialization.IXmlSerializable> implementations, the structural check is skipped when using the <xref:System.ServiceModel.Description.ServiceContractGenerator.ReferencedTypes%2A> feature.</span></span>  
  
 <span data-ttu-id="75675-228"><xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> Параметр соответствует параметру **/importXmlTypes** в средстве Svcutil.exe.</span><span class="sxs-lookup"><span data-stu-id="75675-228">The <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> option corresponds to the **/importXmlTypes** switch on the Svcutil.exe tool.</span></span>  
  
##### <a name="working-with-generated-ixmlserializable-types"></a><span data-ttu-id="75675-229">Работа с созданными типами IXmlSerializable</span><span class="sxs-lookup"><span data-stu-id="75675-229">Working with Generated IXmlSerializable Types</span></span>  
 <span data-ttu-id="75675-230">Созданные типы `IXmlSerializable` содержат закрытое поле с именем "nodesField", возвращающее массив объектов <xref:System.Xml.XmlNode>.</span><span class="sxs-lookup"><span data-stu-id="75675-230">The generated `IXmlSerializable` types contain a private field, named "nodesField," that returns an array of <xref:System.Xml.XmlNode> objects.</span></span> <span data-ttu-id="75675-231">При десериализации экземпляра такого типа доступ к данным XML можно получить непосредственно через это поле с помощью документной объектной модели XML.</span><span class="sxs-lookup"><span data-stu-id="75675-231">When deserializing an instance of such a type, you can access the XML data directly through this field by using the XML Document Object Model.</span></span> <span data-ttu-id="75675-232">При сериализации экземпляра этого типа можно настроить это поле на требуемые данные XML, и он будет сериализован.</span><span class="sxs-lookup"><span data-stu-id="75675-232">When serializing an instance of this type, you can set this field to the desired XML data and it will be serialized.</span></span>  
  
 <span data-ttu-id="75675-233">Это возможно благодаря реализации `IXmlSerializable`.</span><span class="sxs-lookup"><span data-stu-id="75675-233">This is accomplished through the `IXmlSerializable` implementation.</span></span> <span data-ttu-id="75675-234">В созданном типе `IXmlSerializable` реализация <xref:System.Xml.Serialization.IXmlSerializable.ReadXml%2A> вызывает метод <xref:System.Runtime.Serialization.XmlSerializableServices.ReadNodes%2A> класса <xref:System.Runtime.Serialization.XmlSerializableServices>.</span><span class="sxs-lookup"><span data-stu-id="75675-234">In the generated `IXmlSerializable` type, the <xref:System.Xml.Serialization.IXmlSerializable.ReadXml%2A> implementation calls the <xref:System.Runtime.Serialization.XmlSerializableServices.ReadNodes%2A> method of the <xref:System.Runtime.Serialization.XmlSerializableServices> class.</span></span> <span data-ttu-id="75675-235">Этот метод является вспомогательным методом, преобразующим данные XML, предоставленные с помощью <xref:System.Xml.XmlReader>, в массив объектов <xref:System.Xml.XmlNode>.</span><span class="sxs-lookup"><span data-stu-id="75675-235">The method is a helper method that converts XML provided through an <xref:System.Xml.XmlReader> to an array of <xref:System.Xml.XmlNode> objects.</span></span> <span data-ttu-id="75675-236">Реализация <xref:System.Xml.Serialization.IXmlSerializable.WriteXml%2A> выполняет противоположные действия и преобразовывает массив объектов `XmlNode` в последовательность вызовов <xref:System.Xml.XmlWriter>.</span><span class="sxs-lookup"><span data-stu-id="75675-236">The <xref:System.Xml.Serialization.IXmlSerializable.WriteXml%2A> implementation does the opposite and converts the array of `XmlNode` objects to a sequence of <xref:System.Xml.XmlWriter> calls.</span></span> <span data-ttu-id="75675-237">Это возможно благодаря методу <xref:System.Runtime.Serialization.XmlSerializableServices.WriteNodes%2A>.</span><span class="sxs-lookup"><span data-stu-id="75675-237">This is accomplished using the <xref:System.Runtime.Serialization.XmlSerializableServices.WriteNodes%2A> method.</span></span>  
  
 <span data-ttu-id="75675-238">Процесс экспорта схемы можно выполнить в созданных классах `IXmlSerializable`.</span><span class="sxs-lookup"><span data-stu-id="75675-238">It is possible to run the schema export process on the generated `IXmlSerializable` classes.</span></span> <span data-ttu-id="75675-239">Как уже говорилось ранее, исходная схема не возвращается.</span><span class="sxs-lookup"><span data-stu-id="75675-239">As previously stated, you will not get the original schema back.</span></span> <span data-ttu-id="75675-240">Вместо этого вы получите «anyType» стандартный тип XSD, который является подстановочным знаком для любого типа XSD.</span><span class="sxs-lookup"><span data-stu-id="75675-240">Instead, you will get the "anyType" standard XSD type, which is a wildcard for any XSD type.</span></span>  
  
 <span data-ttu-id="75675-241">Это достигается путем применения <xref:System.Xml.Serialization.XmlSchemaProviderAttribute> атрибут в созданный `IXmlSerializable` классы и указанию метода, который вызывает <xref:System.Runtime.Serialization.XmlSerializableServices.AddDefaultSchema%2A> метод для создания типа «anyType».</span><span class="sxs-lookup"><span data-stu-id="75675-241">This is accomplished by applying the <xref:System.Xml.Serialization.XmlSchemaProviderAttribute> attribute to the generated `IXmlSerializable` classes and specifying a method that calls the <xref:System.Runtime.Serialization.XmlSerializableServices.AddDefaultSchema%2A> method to generate the "anyType" type.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="75675-242">Тип <xref:System.Runtime.Serialization.XmlSerializableServices> существует только для поддержки этой конкретной функции.</span><span class="sxs-lookup"><span data-stu-id="75675-242">The <xref:System.Runtime.Serialization.XmlSerializableServices> type exists solely to support this particular feature.</span></span> <span data-ttu-id="75675-243">Не рекомендуется использовать его для других целей.</span><span class="sxs-lookup"><span data-stu-id="75675-243">It is not recommended for use for any other purpose.</span></span>  
  
#### <a name="import-options-advanced-options"></a><span data-ttu-id="75675-244">Параметры импорта. Дополнительные параметры</span><span class="sxs-lookup"><span data-stu-id="75675-244">Import Options: Advanced Options</span></span>  
 <span data-ttu-id="75675-245">Ниже представлены дополнительные параметры импорта.</span><span class="sxs-lookup"><span data-stu-id="75675-245">The following are advanced import options:</span></span>  
  
- <span data-ttu-id="75675-246">Свойство <xref:System.Runtime.Serialization.ImportOptions.CodeProvider%2A>.</span><span class="sxs-lookup"><span data-stu-id="75675-246"><xref:System.Runtime.Serialization.ImportOptions.CodeProvider%2A> property.</span></span> <span data-ttu-id="75675-247">Укажите класс <xref:System.CodeDom.Compiler.CodeDomProvider>, используемый для создания кода для созданных классов.</span><span class="sxs-lookup"><span data-stu-id="75675-247">Specify the <xref:System.CodeDom.Compiler.CodeDomProvider> to use to generate the code for the generated classes.</span></span> <span data-ttu-id="75675-248">Механизм импорта пытается избежать возможностей, не поддерживаемых классом <xref:System.CodeDom.Compiler.CodeDomProvider>.</span><span class="sxs-lookup"><span data-stu-id="75675-248">The import mechanism attempts to avoid features that the <xref:System.CodeDom.Compiler.CodeDomProvider> does not support.</span></span> <span data-ttu-id="75675-249">Если <xref:System.Runtime.Serialization.ImportOptions.CodeProvider%2A> не задано, используется полный набор функций платформы .NET Framework, без ограничений.</span><span class="sxs-lookup"><span data-stu-id="75675-249">If the <xref:System.Runtime.Serialization.ImportOptions.CodeProvider%2A> is not set, the full set of .NET Framework features is used with no restrictions.</span></span>  
  
- <span data-ttu-id="75675-250">Свойство <xref:System.Runtime.Serialization.ImportOptions.DataContractSurrogate%2A>.</span><span class="sxs-lookup"><span data-stu-id="75675-250"><xref:System.Runtime.Serialization.ImportOptions.DataContractSurrogate%2A> property.</span></span> <span data-ttu-id="75675-251">С помощью этого свойства можно указать реализацию <xref:System.Runtime.Serialization.IDataContractSurrogate>.</span><span class="sxs-lookup"><span data-stu-id="75675-251">An <xref:System.Runtime.Serialization.IDataContractSurrogate> implementation can be specified with this property.</span></span> <span data-ttu-id="75675-252">В реализации <xref:System.Runtime.Serialization.IDataContractSurrogate> настраивается процесс импорта.</span><span class="sxs-lookup"><span data-stu-id="75675-252">The <xref:System.Runtime.Serialization.IDataContractSurrogate> customizes the import process.</span></span> <span data-ttu-id="75675-253">Дополнительные сведения см. в разделе [суррогаты контрактов данных](../../../../docs/framework/wcf/extending/data-contract-surrogates.md).</span><span class="sxs-lookup"><span data-stu-id="75675-253">For more information, see [Data Contract Surrogates](../../../../docs/framework/wcf/extending/data-contract-surrogates.md).</span></span> <span data-ttu-id="75675-254">По умолчанию суррогат не используется.</span><span class="sxs-lookup"><span data-stu-id="75675-254">By default, no surrogate is used.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="75675-255">См. также</span><span class="sxs-lookup"><span data-stu-id="75675-255">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractSerializer>
- <xref:System.Runtime.Serialization.XsdDataContractImporter>
- <xref:System.Runtime.Serialization.XsdDataContractExporter>
- <xref:System.Runtime.Serialization.ImportOptions>
- [<span data-ttu-id="75675-256">Справочник по схеме контрактов данных</span><span class="sxs-lookup"><span data-stu-id="75675-256">Data Contract Schema Reference</span></span>](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md)
- [<span data-ttu-id="75675-257">Суррогаты контрактов данных</span><span class="sxs-lookup"><span data-stu-id="75675-257">Data Contract Surrogates</span></span>](../../../../docs/framework/wcf/extending/data-contract-surrogates.md)
- [<span data-ttu-id="75675-258">Импорт и экспорт схемы</span><span class="sxs-lookup"><span data-stu-id="75675-258">Schema Import and Export</span></span>](../../../../docs/framework/wcf/feature-details/schema-import-and-export.md)
- [<span data-ttu-id="75675-259">Экспорт схем из классов</span><span class="sxs-lookup"><span data-stu-id="75675-259">Exporting Schemas from Classes</span></span>](../../../../docs/framework/wcf/feature-details/exporting-schemas-from-classes.md)
- [<span data-ttu-id="75675-260">Справочник по схеме контрактов данных</span><span class="sxs-lookup"><span data-stu-id="75675-260">Data Contract Schema Reference</span></span>](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md)
