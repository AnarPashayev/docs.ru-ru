---
title: Создание служб WCF для ASP.NET AJAX
ms.date: 03/30/2017
ms.assetid: 04c0402c-e617-4ba5-aedf-d17692234776
ms.openlocfilehash: 52f60020d4ff7be6520f5f9aa3bb7a027af4b482
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "64627097"
---
# <a name="creating-wcf-services-for-aspnet-ajax"></a><span data-ttu-id="39460-102">Создание служб WCF для ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="39460-102">Creating WCF Services for ASP.NET AJAX</span></span>
<span data-ttu-id="39460-103">Технология ASP.NET AJAX корпорации Майкрософт позволяет быстро создавать веб-страницы, содержащие широкий набор средств взаимодействия с пользователем с известными элементами пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="39460-103">Microsoft ASP.NET AJAX enables you to quickly create Web pages that include a rich user experience with responsive and familiar user interface elements.</span></span> <span data-ttu-id="39460-104">Эта технология предоставляет библиотеки клиентских сценариев, включающие не зависящие от веб-обозревателя технологии ECMAScript (JavaScript) и динамического HTML (DHTML), и интегрирует их с платформой разработки на базе сервера ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="39460-104">ASP.NET AJAX provides client-script libraries that incorporate cross-browser ECMAScript (JavaScript) and dynamic HTML (DHTML) technologies, and it integrates them with the ASP.NET 2.0 server-based development platform.</span></span> <span data-ttu-id="39460-105">Используя ASP.NET AJAX, можно улучшить взаимодействие веб-приложений с пользователем и повысить их эффективность.</span><span class="sxs-lookup"><span data-stu-id="39460-105">By using ASP.NET AJAX, you can improve the user experience and the efficiency of your Web applications.</span></span>  
  
 <span data-ttu-id="39460-106">Технология ASP.NET AJAX состоит из библиотек клиентских сценариев и серверных компонентов, интегрированных для обеспечения надежной инфраструктуры разработки.</span><span class="sxs-lookup"><span data-stu-id="39460-106">ASP.NET AJAX consists of client-script libraries and of server components that are integrated to provide a robust development framework.</span></span> <span data-ttu-id="39460-107">Доступ к службе со страницы ASP.NET: если URL-адрес службы добавляется в элемент управления диспетчера скриптов ASP.NET на странице, операции службы могут вызываться с помощью кода JavaScript, что выглядит абсолютно аналогично обычному вызову функции JavaScript.</span><span class="sxs-lookup"><span data-stu-id="39460-107">To access a service from an ASP.NET page: once the service URL is added to the ASP.NET Script Manager control on the page, service operations may be invoked using JavaScript code that looks exactly like a regular JavaScript function call.</span></span> <span data-ttu-id="39460-108">См. в разделе [Узнайте ASP.NET AJAX](https://go.microsoft.com/fwlink/?LinkId=186475) об использовании веб-служб в инфраструктуре AJAX.</span><span class="sxs-lookup"><span data-stu-id="39460-108">See [Learn ASP.NET AJAX](https://go.microsoft.com/fwlink/?LinkId=186475) about the use of Web services within the AJAX framework.</span></span>  
  
 <span data-ttu-id="39460-109">Большинство служб Windows Communication Foundation (WCF) можно представить в виде службы, совместимой с ASP.NET AJAX, добавив соответствующую конечную точку ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="39460-109">Most Windows Communication Foundation (WCF) services may be exposed as a service compatible with ASP.NET AJAX by adding an appropriate ASP.NET AJAX endpoint.</span></span>  
  
 <span data-ttu-id="39460-110">Если вы используете Visual Studio, можно использовать встроенный шаблон для служб WCF с поддержкой AJAX, доступных в **Добавление нового элемента** диалоговое окно, при работе с веб-сайты ASP.NET или веб-приложений.</span><span class="sxs-lookup"><span data-stu-id="39460-110">If you are using Visual Studio, you may use a pre-built template for AJAX-enabled WCF services, available in the **Add New Item** dialog when working with ASP.NET Web Sites or Web Applications.</span></span>  
  
 <span data-ttu-id="39460-111">Если шаблоны Visual Studio не используются, конечную точку ASP.NET AJAX можно создать двумя указанными ниже способами.</span><span class="sxs-lookup"><span data-stu-id="39460-111">If you are not using the Visual Studio templates, there are two ways to create an ASP.NET AJAX endpoint:</span></span>  
  
- <span data-ttu-id="39460-112">Создайте конечную точку, используя динамическую активацию основного приложения, не применяя никакой конфигурации.</span><span class="sxs-lookup"><span data-stu-id="39460-112">Create the endpoint using dynamic host activation without using any configuration.</span></span> <span data-ttu-id="39460-113">Это основной подход при незнании системы конфигурации WCF.</span><span class="sxs-lookup"><span data-stu-id="39460-113">This is the most basic approach if you are unfamiliar with the WCF configuration system.</span></span> <span data-ttu-id="39460-114">Дополнительные сведения см. в разделе [Как Добавление конечной точки ASP.NET AJAX без использования конфигурации](../../../../docs/framework/wcf/feature-details/how-to-add-an-aspnet-ajax-endpoint-without-using-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="39460-114">For more information, see [How to: Add an ASP.NET AJAX Endpoint Without Using Configuration](../../../../docs/framework/wcf/feature-details/how-to-add-an-aspnet-ajax-endpoint-without-using-configuration.md).</span></span>  
  
- <span data-ttu-id="39460-115">Добавьте конечную точку с поддержкой AJAX в службу WCF, с помощью конфигурации.</span><span class="sxs-lookup"><span data-stu-id="39460-115">Add an AJAX-enabled endpoint to a WCF service using configuration.</span></span> <span data-ttu-id="39460-116">Дополнительные сведения см. в разделе [Как Использование конфигурации для добавления конечной точки ASP.NET AJAX](../../../../docs/framework/wcf/feature-details/how-to-use-configuration-to-add-an-aspnet-ajax-endpoint.md).</span><span class="sxs-lookup"><span data-stu-id="39460-116">For more information, see [How to: Use Configuration to Add an ASP.NET AJAX Endpoint](../../../../docs/framework/wcf/feature-details/how-to-use-configuration-to-add-an-aspnet-ajax-endpoint.md).</span></span>  
  
 <span data-ttu-id="39460-117">Модель веб-программирования, описанных в [WCF Web HTTP программирования Общие сведения о модели](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-model-overview.md) может использоваться со службами ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="39460-117">The Web Programming Model described in the [WCF Web HTTP Programming Model Overview](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-model-overview.md) may be used with ASP.NET AJAX services.</span></span> <span data-ttu-id="39460-118">В частности:</span><span class="sxs-lookup"><span data-stu-id="39460-118">Specifically:</span></span>  
  
- <span data-ttu-id="39460-119">Для выбора команд HTTP GET и HTTP POST можно использовать атрибуты <xref:System.ServiceModel.Web.WebGetAttribute> и <xref:System.ServiceModel.Web.WebInvokeAttribute>.</span><span class="sxs-lookup"><span data-stu-id="39460-119">You can use the <xref:System.ServiceModel.Web.WebGetAttribute> and <xref:System.ServiceModel.Web.WebInvokeAttribute> attributes to select between HTTP GET and HTTP POST verbs.</span></span> <span data-ttu-id="39460-120">При правильном применении это может существенно повысить производительность приложения.</span><span class="sxs-lookup"><span data-stu-id="39460-120">If used correctly, this may significantly improve your application’s performance.</span></span> <span data-ttu-id="39460-121">Дополнительные сведения см. в разделе [Как Выбор между HTTP POST и HTTP GET запросами для конечных точек ASP.NET AJAX](../../../../docs/framework/wcf/feature-details/http-post-and-http-get-requests-for-aspnet-ajax-endpoints.md).</span><span class="sxs-lookup"><span data-stu-id="39460-121">For more information, see [How to: Choose between HTTP POST and HTTP GET requests for ASP.NET AJAX Endpoints](../../../../docs/framework/wcf/feature-details/http-post-and-http-get-requests-for-aspnet-ajax-endpoints.md).</span></span>  
  
- <span data-ttu-id="39460-122">Чтобы вынудить службу возвращать XML-данные вместо нотации объекта JavaScript (JSON) по умолчанию, можно применить свойства <xref:System.ServiceModel.Web.WebGetAttribute.ResponseFormat%2A> и <xref:System.ServiceModel.Web.WebInvokeAttribute.ResponseFormat%2A>.</span><span class="sxs-lookup"><span data-stu-id="39460-122">You can use the <xref:System.ServiceModel.Web.WebGetAttribute.ResponseFormat%2A> and <xref:System.ServiceModel.Web.WebInvokeAttribute.ResponseFormat%2A> properties to cause your service to return XML data instead of the default JavaScript Object Notation (JSON).</span></span> <span data-ttu-id="39460-123">При использовании этой возможности с инфраструктурой ASP.NET AJAX клиент JavaScript будет принимать DOM-объект XML.</span><span class="sxs-lookup"><span data-stu-id="39460-123">Doing this with the ASP.NET AJAX framework causes the JavaScript client to receive an XML DOM object.</span></span>  
  
    > [!WARNING]
    >  <span data-ttu-id="39460-124">Для правильной работы необходимо с помощью операции задать тип содержимого text/xml.</span><span class="sxs-lookup"><span data-stu-id="39460-124">Your operation must set the content type to text/xml for this to work.</span></span> <span data-ttu-id="39460-125">В противном случае клиент JavaScript будет принимать строку, содержащую XML вместо DOM-объекта XML.</span><span class="sxs-lookup"><span data-stu-id="39460-125">Otherwise, the JavaScript client will receive a string containing the XML instead of an XML DOM object.</span></span>  
  
     <span data-ttu-id="39460-126">В следующем примере показана операция, возвращающая XML-данные с типом содержимого, настроенным соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="39460-126">The following is an example of an operation that returns XML data with the content type set appropriately:</span></span>  
  
    ```  
    [OperationContract, WebGet(ResponseFormat=WebMessageFormat.Xml)]  
    public XElement GetData()  
    {  
    XElement x;  
    //Get some data here...  
  
    WebOperationContext.Current.OutgoingResponse.ContentType = "text/xml";      
    return x;  
    }  
    ```  
  
- <span data-ttu-id="39460-127">Если требуется совместимость с ASP.NET AJAX, никакие другие свойства в атрибутах <xref:System.ServiceModel.Web.WebGetAttribute> и <xref:System.ServiceModel.Web.WebInvokeAttribute> изменять нельзя.</span><span class="sxs-lookup"><span data-stu-id="39460-127">No other properties on the <xref:System.ServiceModel.Web.WebGetAttribute> and <xref:System.ServiceModel.Web.WebInvokeAttribute> attributes can be changed if compatibility with ASP.NET AJAX is required.</span></span> <span data-ttu-id="39460-128">Можно использовать другие аспекты модели веб-программирования, пока не нарушены соглашения о вызовах ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="39460-128">Other aspects of the Web Programming Model can be used as long as the ASP.NET AJAX calling conventions are not violated.</span></span>  
  
 <span data-ttu-id="39460-129">Более сложные сценарии требуют некоторых дополнительных подробностей поддержки AJAX в WCF быть понятным:</span><span class="sxs-lookup"><span data-stu-id="39460-129">More advanced scenarios require some additional details of AJAX support in WCF be understood:</span></span>  
  
- <span data-ttu-id="39460-130">Чтобы понять, как данные передаются между клиентом страницы AJAX и службы WCF с помощью JavaScript, а также дополнительные сведения о сопоставлении типов .NET Framework в типы JavaScript, см. в разделе [Поддержка JSON и другие передачи форматов данных](../../../../docs/framework/wcf/feature-details/support-for-json-and-other-data-transfer-formats.md).</span><span class="sxs-lookup"><span data-stu-id="39460-130">To understand how data is transferred between an AJAX page client and a WCF service using JavaScript, and for details on how .NET Framework types map to JavaScript types, see [Support for JSON and Other Data Transfer Formats](../../../../docs/framework/wcf/feature-details/support-for-json-and-other-data-transfer-formats.md).</span></span>  
  
- <span data-ttu-id="39460-131">чтобы воспользоваться преимуществами возможностей ASP.NET, например проверкой подлинности на основе URL-адреса и доступом к данным сеансов ASP.NET, можно включить режим совместимости с ASP.NET с использованием конфигурации.</span><span class="sxs-lookup"><span data-stu-id="39460-131">To take advantage of ASP.NET features, for example, URL-based authentication and accessing the ASP.NET session information, you may want to enable the ASP.NET Compatibility Mode through configuration.</span></span>  
  
 <span data-ttu-id="39460-132">Конечные точки AJAX в WCF можно использовать даже без платформа AJAX для ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="39460-132">AJAX endpoints in WCF may even be consumed without the ASP.NET AJAX framework.</span></span> <span data-ttu-id="39460-133">Это важно понимать архитектуру поддержки поддержки AJAX в WCF.</span><span class="sxs-lookup"><span data-stu-id="39460-133">Doing so requires an understanding of the support architecture of AJAX support in WCF.</span></span> <span data-ttu-id="39460-134">Обсуждение этой архитектуры, см. в разделе [WCF модель программирования Web HTTP объекта](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-object-model.md).</span><span class="sxs-lookup"><span data-stu-id="39460-134">For a discussion of this architecture, see [WCF Web HTTP Programming Object Model](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-object-model.md).</span></span> <span data-ttu-id="39460-135">Образец кода, демонстрирующий этот подход, см. в разделе [служба AJAX с JSON и XML](../../../../docs/framework/wcf/samples/ajax-service-with-json-and-xml-sample.md).</span><span class="sxs-lookup"><span data-stu-id="39460-135">For a code sample demonstrating this approach, see the [AJAX Service with JSON and XML](../../../../docs/framework/wcf/samples/ajax-service-with-json-and-xml-sample.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="39460-136">См. также</span><span class="sxs-lookup"><span data-stu-id="39460-136">See also</span></span>

- [<span data-ttu-id="39460-137">Модель веб-программирования HTTP WCF</span><span class="sxs-lookup"><span data-stu-id="39460-137">WCF Web HTTP Programming Model</span></span>](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-model.md)
- [<span data-ttu-id="39460-138">Практическое руководство. Добавление конечной точки ASP.NET AJAX без использования конфигурации</span><span class="sxs-lookup"><span data-stu-id="39460-138">How to: Add an ASP.NET AJAX Endpoint Without Using Configuration</span></span>](../../../../docs/framework/wcf/feature-details/how-to-add-an-aspnet-ajax-endpoint-without-using-configuration.md)
- [<span data-ttu-id="39460-139">Практическое руководство. Использование конфигурации для добавления конечной точки ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="39460-139">How to: Use Configuration to Add an ASP.NET AJAX Endpoint</span></span>](../../../../docs/framework/wcf/feature-details/how-to-use-configuration-to-add-an-aspnet-ajax-endpoint.md)
- [<span data-ttu-id="39460-140">Практическое руководство. Выбор между HTTP POST и HTTP GET запросами для конечных точек ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="39460-140">How to: Choose between HTTP POST and HTTP GET requests for ASP.NET AJAX Endpoints</span></span>](../../../../docs/framework/wcf/feature-details/http-post-and-http-get-requests-for-aspnet-ajax-endpoints.md)
