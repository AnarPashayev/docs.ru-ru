---
title: Атаки с повторением
ms.date: 03/30/2017
ms.assetid: 7a17e040-93cd-4432-81b9-9f62fec78c8f
ms.openlocfilehash: fefcb533cedb5405736ecda70c6879ebe00b8b49
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61991150"
---
# <a name="replay-attacks"></a>Атаки с повторением
Объект *атака воспроизведения* возникает, когда злоумышленник копирует поток сообщений между двумя сторонами и воспроизводит его для одного или нескольких сторон. Если не приняты ответные меры, атакованные компьютеры обрабатывают этот поток как допустимые сообщения, что приводит к ряду негативных последствий, таких как повторные заказы одного элемента.  
  
## <a name="bindings-may-be-subject-to-reflection-attacks"></a>Привязки могут подвергаться атакам отражения  
 *Атаки отражения* представляют собой воспроизведение сообщений обратно отправителю так, как если бы они поступили получателя как ответ. Стандартный *обнаружения воспроизведения* в Windows Communication Foundation (WCF) механизм не обрабатывает такие атаки автоматически.  
  
 Атаки отражения предотвращаются по умолчанию, так как модель службы WCF добавляет идентификатор подписанного сообщения для сообщения запроса и ожидает, что подписанный `relates-to` заголовка в сообщениях ответов. В результате сообщение запроса не может быть воспроизведено в качестве ответа. В сценариях защищенного надежного обмена сообщениями (RM) для предотвращения атак отражения принимаются следующие меры.  
  
- Схемы сообщения о создании последовательности и ответного сообщения о создании последовательности должны быть различными.  
  
- В симплексных последовательностях сообщения о последовательности, отправляемые клиентом, не могут быть воспроизведены обратно клиенту, поскольку клиент не распознает такие сообщения.  
  
- В дуплексных последовательностях два идентификатора последовательности должны быть уникальными. Таким образом, исходящее сообщение последовательности не может быть воспроизведено в качестве входящего сообщения последовательности (все заголовки последовательности и тела сообщений также являются подписанными).  
  
 Единственным типом привязок, чувствительных к атакам отражения, являются специальные привязки, в которых отключен протокол WS-Addressing и в которых используется защита на основе симметричного ключа. В привязке <xref:System.ServiceModel.BasicHttpBinding> по умолчанию не используется протокол WS-Addressing, однако защита на основе симметричных ключей используется таким образом, что привязка не является уязвимой для атаки такого типа.  
  
 Для устранения рисков специальных привязок следует не устанавливать контекст безопасности или требовать использования заголовков WS-Addressing.  
  
## <a name="web-farm-attacker-replays-request-to-multiple-nodes"></a>Веб-фермы: Злоумышленник воспроизводит запрос к нескольким узлам  
 Клиент использует службу, которая реализована на веб-ферме. Злоумышленник воспроизводит запрос, отправленный на один узел фермы, на другом узле фермы. Кроме того, в случае перезапуска службы кэш воспроизведения очищается, что позволяет злоумышленнику воспроизвести запрос. (В кэше содержатся использованные ранее значения подписи сообщения. Кэш не позволяет воспроизводить их, так что такие подписи могут использоваться только один раз. Кэш воспроизведения не является общим в масштабах веб-фермы.)  
  
 Возможные способы устранения рисков  
  
- Использование безопасности режима сообщений с маркерами контекста безопасности с отслеживанием состояния (как с включенным, так и с отключенным безопасным диалогом). Дополнительные сведения см. в разделе [Как Создайте контекст безопасности маркера для безопасного сеанса](../../../../docs/framework/wcf/feature-details/how-to-create-a-security-context-token-for-a-secure-session.md).  
  
- Настройка службы для использования безопасности уровня транспорта.  
  
## <a name="see-also"></a>См. также

- [Вопросы безопасности](../../../../docs/framework/wcf/feature-details/security-considerations-in-wcf.md)
- [Раскрытие информации](../../../../docs/framework/wcf/feature-details/information-disclosure.md)
- [Повышение привилегий](../../../../docs/framework/wcf/feature-details/elevation-of-privilege.md)
- [Отказ в обслуживании](../../../../docs/framework/wcf/feature-details/denial-of-service.md)
- [Подделка](../../../../docs/framework/wcf/feature-details/tampering.md)
- [Неподдерживаемые сценарии](../../../../docs/framework/wcf/feature-details/unsupported-scenarios.md)
