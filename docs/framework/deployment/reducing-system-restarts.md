---
title: Уменьшение числа перезагрузок при установке платформы .NET Framework 4.5
ms.date: 03/30/2017
helpviewer_keywords:
- .NET Framework, reducing system restarts
- installing .NET Framework
- installation [.NET Framework]
ms.assetid: 7aa8cb72-dee9-4716-ac54-b17b9ae8218f
author: mairaw
ms.author: mairaw
ms.openlocfilehash: e2b030508897f13cce1fc6439809b98bbae17813
ms.sourcegitcommit: f348c84443380a1959294cdf12babcb804cfa987
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/12/2019
ms.locfileid: "73975675"
---
# <a name="reducing-system-restarts-during-net-framework-45-installations"></a><span data-ttu-id="0dc3d-102">Уменьшение числа перезагрузок при установке платформы .NET Framework 4.5</span><span class="sxs-lookup"><span data-stu-id="0dc3d-102">Reducing System Restarts During .NET Framework 4.5 Installations</span></span>
<span data-ttu-id="0dc3d-103">Установщик .NET Framework 4.5 использует [Диспетчер перезагрузки](/windows/win32/rstmgr/about-restart-manager) для предотвращения перезагрузки системы во время установки, если это возможно.</span><span class="sxs-lookup"><span data-stu-id="0dc3d-103">The .NET Framework 4.5 installer uses the [Restart Manager](/windows/win32/rstmgr/about-restart-manager) to prevent system restarts whenever possible during installation.</span></span> <span data-ttu-id="0dc3d-104">Если программа установки устанавливает платформу .NET Framework, она может взаимодействовать с диспетчером перезапуска, чтобы воспользоваться преимуществами этой функции.</span><span class="sxs-lookup"><span data-stu-id="0dc3d-104">If your app setup program installs the .NET Framework, it can interface with the Restart Manager to take advantage of this feature.</span></span> <span data-ttu-id="0dc3d-105">Дополнительные сведения см. в разделе [Практическое руководство. Получение хода выполнения установщика .NET Framework 4.5](how-to-get-progress-from-the-dotnet-installer.md).</span><span class="sxs-lookup"><span data-stu-id="0dc3d-105">For more information, see [How to: Get Progress from the .NET Framework 4.5 Installer](how-to-get-progress-from-the-dotnet-installer.md).</span></span>  
  
## <a name="reasons-for-a-restart"></a><span data-ttu-id="0dc3d-106">Причины для перезапуска</span><span class="sxs-lookup"><span data-stu-id="0dc3d-106">Reasons for a Restart</span></span>  
 <span data-ttu-id="0dc3d-107">Установка .NET Framework 4.5 требует перезапуска системы, если во время установки запущено приложение платформы .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="0dc3d-107">The .NET Framework 4.5 installation requires a system restart if a .NET Framework 4 app is in use during the installation.</span></span> <span data-ttu-id="0dc3d-108">Это происходит потому, что .NET Framework 4.5 заменяет файлы платформы .NET Framework 4 и требует, чтобы эти файлы были доступны во время установки.</span><span class="sxs-lookup"><span data-stu-id="0dc3d-108">This is because the .NET Framework 4.5 replaces .NET Framework 4 files and requires those files to be available during installation.</span></span> <span data-ttu-id="0dc3d-109">Во многих случаях можно избежать перезапуска путем обнаружения и закрытия работающих приложения .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="0dc3d-109">In many cases, the restart can be prevented by preemptively detecting and closing.NET Framework 4 apps that are in use.</span></span> <span data-ttu-id="0dc3d-110">Но некоторые системные приложения не могут быть закрыты.</span><span class="sxs-lookup"><span data-stu-id="0dc3d-110">However, some system apps should not be closed.</span></span> <span data-ttu-id="0dc3d-111">В этих случаях не удается избежать перезапуска.</span><span class="sxs-lookup"><span data-stu-id="0dc3d-111">In these cases, a restart cannot be avoided.</span></span>  
  
## <a name="end-user-experience"></a><span data-ttu-id="0dc3d-112">Взаимодействие с пользователем</span><span class="sxs-lookup"><span data-stu-id="0dc3d-112">End-User Experience</span></span>  
 <span data-ttu-id="0dc3d-113">Пользователю, который выполняет полную установку .NET Framework 4.5, предоставляется возможность избежать перезапуска системы, если программа установки обнаружит запущенные приложения платформы .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="0dc3d-113">An end-user who is doing a full installation of the .NET Framework 4.5 is given the opportunity to avoid a system restart if the installer detects .NET Framework 4 apps in use.</span></span> <span data-ttu-id="0dc3d-114">В сообщении будут перечислены все запущенные приложения на платформе .NET Framework 4 и будет предоставлена возможность закрыть эти приложения перед установкой.</span><span class="sxs-lookup"><span data-stu-id="0dc3d-114">A message lists all running .NET Framework 4 apps and provides the option to close these apps before the installation.</span></span> <span data-ttu-id="0dc3d-115">В случае согласия пользователя эти приложения будут закрыты установщиком и перезапуска системы удастся избежать.</span><span class="sxs-lookup"><span data-stu-id="0dc3d-115">If the user confirms, these apps are shut down by the installer, and a system restart is avoided.</span></span> <span data-ttu-id="0dc3d-116">Если пользователь не отвечает на сообщение в течение отведенного времени, то установка продолжается без закрытия приложений.</span><span class="sxs-lookup"><span data-stu-id="0dc3d-116">If the user does not respond to the message within a certain amount of time, the installation continues without closing any apps.</span></span>  
  
 <span data-ttu-id="0dc3d-117">Если диспетчер перезапуска обнаруживает ситуацию, которая потребует перезапуска системы, даже если выполняемые приложения будут закрыты, сообщение не отображается.</span><span class="sxs-lookup"><span data-stu-id="0dc3d-117">If the Restart Manager detects a situation that will require a system restart even if running apps are closed, the message is not displayed.</span></span>  
  
 ![Диалоговое окно закрытия приложения со списком программ, работающих в данный момент.](./media/reducing-system-restarts/close-application-dialog.png)  
  
## <a name="using-a-chained-installer"></a><span data-ttu-id="0dc3d-119">Использование цепочечного установщика</span><span class="sxs-lookup"><span data-stu-id="0dc3d-119">Using a Chained Installer</span></span>  
 <span data-ttu-id="0dc3d-120">Если нужно распространять платформы .NET Framework с приложением, но необходимо использовать собственную программу установки и пользовательского интерфейса, можно включить установку платформы .NET Framework в процесс установки.</span><span class="sxs-lookup"><span data-stu-id="0dc3d-120">If you want to redistribute the .NET Framework with your app, but you want to use your own setup program and UI, you can include (chain) the .NET Framework setup process to your setup process.</span></span> <span data-ttu-id="0dc3d-121">Дополнительные сведения о подобных случаях установки см. в разделе [Руководство по развертыванию для разработчиков](deployment-guide-for-developers.md).</span><span class="sxs-lookup"><span data-stu-id="0dc3d-121">For more information about chained installations, see [Deployment Guide for Developers](deployment-guide-for-developers.md).</span></span> <span data-ttu-id="0dc3d-122">Для сокращения числа перезапусков системы при цепочечной установке установщик платформы .NET Framework предоставляет вашей программе установки список приложений, которые нужно закрыть.</span><span class="sxs-lookup"><span data-stu-id="0dc3d-122">To reduce system restarts in chained installations, the .NET Framework installer supplies your setup program with the list of apps to close.</span></span> <span data-ttu-id="0dc3d-123">Программа установки должна предоставить эти данные пользователю через пользовательский интерфейс, такой как окно сообщения, получить ответ пользователя, а затем передать ответ установщику платформы .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="0dc3d-123">Your setup program must provide this information to the user through a user interface such as a message box, get the user’s response, and then pass the response back to the .NET Framework installer.</span></span> <span data-ttu-id="0dc3d-124">Пример цепочечного установщика см. в статье [Практическое руководство. Получение хода выполнения установщика .NET Framework 4.5](how-to-get-progress-from-the-dotnet-installer.md).</span><span class="sxs-lookup"><span data-stu-id="0dc3d-124">For an example of a chained installer, see the article [How to: Get Progress from the .NET Framework 4.5 Installer](how-to-get-progress-from-the-dotnet-installer.md).</span></span>  
  
 <span data-ttu-id="0dc3d-125">При использовании цепочечного установщика, если не требуется предоставлять собственное окно сообщения для завершения приложений, можно использовать параметры `/showrmui` и `/passive` в командной строке при добавлении платформы .NET Framework в процесс установки.</span><span class="sxs-lookup"><span data-stu-id="0dc3d-125">If you're using a chained installer, but you do not want to provide your own message box for closing apps, you can use the `/showrmui` and `/passive` options on the command line when you chain the .NET Framework setup process.</span></span> <span data-ttu-id="0dc3d-126">При использовании этих параметров вместе установщик отображает окно сообщения для закрытия приложений, чтобы избежать перезапуска системы.</span><span class="sxs-lookup"><span data-stu-id="0dc3d-126">When you use these options together, the installer shows the message box for closing apps if they can be closed to avoid a system restart.</span></span> <span data-ttu-id="0dc3d-127">Это диалоговое окно работает в пассивном режиме так же, как и при полном пользовательском интерфейсе.</span><span class="sxs-lookup"><span data-stu-id="0dc3d-127">This message box behaves the same in passive mode as it does under the full user interface.</span></span> <span data-ttu-id="0dc3d-128">Полный набор параметров командной строки для распространяемого пакета .NET Framework см. в разделе [Руководство по развертыванию для разработчиков](deployment-guide-for-developers.md).</span><span class="sxs-lookup"><span data-stu-id="0dc3d-128">See [Deployment Guide for Developers](deployment-guide-for-developers.md) for the complete set of command-line options for the .NET Framework redistributable.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0dc3d-129">См. также</span><span class="sxs-lookup"><span data-stu-id="0dc3d-129">See also</span></span>

- [<span data-ttu-id="0dc3d-130">Развертывание</span><span class="sxs-lookup"><span data-stu-id="0dc3d-130">Deployment</span></span>](index.md)
- [<span data-ttu-id="0dc3d-131">Руководство по развертыванию для разработчиков</span><span class="sxs-lookup"><span data-stu-id="0dc3d-131">Deployment Guide for Developers</span></span>](deployment-guide-for-developers.md)
- [<span data-ttu-id="0dc3d-132">Практическое руководство. Получение хода выполнения установщика .NET Framework 4.5</span><span class="sxs-lookup"><span data-stu-id="0dc3d-132">How to: Get Progress from the .NET Framework 4.5 Installer</span></span>](how-to-get-progress-from-the-dotnet-installer.md)
