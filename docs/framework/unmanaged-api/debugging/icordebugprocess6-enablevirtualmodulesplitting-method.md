---
title: Метод ICorDebugProcess6::EnableVirtualModuleSplitting
ms.date: 03/30/2017
ms.assetid: e7733bd3-68da-47f9-82ef-477db5f2e32d
ms.openlocfilehash: 8ad15d11ce81323b30434b3db98259a74a198f29
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2020
ms.locfileid: "79178569"
---
# <a name="icordebugprocess6enablevirtualmodulesplitting-method"></a>Метод ICorDebugProcess6::EnableVirtualModuleSplitting
Позволяет включить или отключить разделение виртуальных модулей.  
  
## <a name="syntax"></a>Синтаксис  
  
```cpp  
HRESULT EnableVirtualModuleSplitting(  
   BOOL enableSplitting  
);  
```  
  
## <a name="parameters"></a>Параметры  
 `enableSplitting`  
 `true`, чтобы включить разделение виртуальных модулей; `false`, чтобы отключить его.  
  
## <a name="remarks"></a>Remarks  
 Разделение виртуального модуля заставляет [ICorDebug](icordebug-interface.md) распознавать модули, которые были объединены во время процесса сборки, и представлять их как группу отдельных модулей, а не как один большой модуль. Это изменяет поведение различных методов [ICorDebug,](icordebug-interface.md) описанных ниже.  
  
> [!NOTE]
> Этот метод доступен только в машинном коде .NET.  
  
 Этот метод может быть вызван, и значение `enableSplitting` может быть изменено, в любое время. Это не вызывает каких-либо затейливых функциональных изменений в объекте [ICorDebug,](icordebug-interface.md) кроме изменения поведения методов, перечисленных в [разделении виртуального модуля, и неуправляемой отладки](#APIs) раздела AIS на момент их вызова. Применение виртуальных модулей приводит к ухудшению производительности при вызове этих методов. Кроме того, для правильной реализации AI [IMetaDataImport](../../../../docs/framework/unmanaged-api/metadata/imetadataimport-interface.md) может потребоваться значительное кэширование в памяти виртуализированных метаданных, и эти кэши могут быть сохранены даже после выключения разделения виртуального модуля.  
  
## <a name="terminology"></a>Терминология  
 При описании разделения виртуальных модулей используются следующие термины:  
  
 контейнерные модули или контейнеры  
 Агрегатные модули.  
  
 вложенные модули или виртуальные модули  
 Модули, находящиеся в контейнере.  
  
 обычные модули  
 Модули, которые не были объединены во время построения. Они не являются ни вложенными, ни контейнерными модулями.  
  
 Контейнерные модули и вложенные модули представляются объектами интерфейса ICorDebugModule. Тем не менее, поведение интерфейса немного отличается \<в каждом случае, как X-ref к разделу> разделе описывает.  
  
## <a name="modules-and-assemblies"></a>Модули и сборки  
 Сборки с несколькими модулями не поддерживаются для сценариев объединения сборок, поэтому существует однозначное соответствие между модулем и сборкой. Каждый объект ICorDebugModule, независимо от того, представляет он контейнерный или вложенный модуль, имеет соответствующий объект ICorDebugAssembly. [ICorDebugModule::GetAssembly](icordebugmodule-getassembly-method.md) метод преобразуется из модуля в сборку. Чтобы сопоставить в другом направлении, [Метод ICorDebugAssembly::EnumerateModules](icordebugassembly-enumeratemodules-method.md) метод перечисляет только 1 модуль. Так как сборка и модуль образуют в данном случае тесно связанную пару, термины «сборка и модуль» становятся в значительной степени взаимозаменяемыми.  
  
## <a name="behavioral-differences"></a>Различия в поведении  
 Контейнерные модули имеют следующие режимы поведения и характеристики:  
  
- Их метаданные для всех составных вложенных модулей объединяются друг с другом.  
  
- Имена типов можно изменять.  
  
- [ICorDebugModule::GetName](icordebugmodule-getname-method.md) метод возвращает путь к модулю на диске.  
  
- [ICorDebugModule::GetSize](icordebugmodule-getsize-method.md) метод возвращает размер этого изображения.  
  
- Метод ICorDebugAssembly3.EnumerateContainedAssemblies перечисляет вложенные модули.  
  
- Метод ICorDebugAssembly3.GetContainerAssembly возвращает `S_FALSE`.  
  
 Вложенные модули имеют следующие режимы поведения и характеристики:  
  
- Они имеют сокращенный набор метаданных, соответствующий исходной сборке, которая была объединена.  
  
- Имена метаданных не изменяются.  
  
- Маловероятно, что токены метаданных будут совпадать с токенами в исходной сборке перед тем, как она была объединена в процессе построения.  
  
- [ICorDebugModule::GetName](icordebugmodule-getname-method.md) метод возвращает имя сборки, а не путь файла.  
  
- [ICorDebugModule::GetSize](icordebugmodule-getsize-method.md) возвращает исходный нестыковый размер изображения.  
  
- Метод ICorDebugModule3.EnumerateContainedAssemblies возвращает `S_FALSE`.  
  
- Метод ICorDebugAssembly3.GetContainerAssembly возвращает составной модуль.  
  
## <a name="interfaces-retrieved-from-modules"></a>Интерфейсы, извлеченные из модулей  
 Из модулей можно создать или извлечь различные интерфейсы. Ниже перечислены некоторые из них.  
  
- Объект ICorDebugClass, который возвращается методом [ICorDebugModule::GetClassFromToken.](icordebugmodule-getclassfromtoken-method.md)  
  
- Объект ICorDebugAssembly, который возвращается методом [ICorDebugModule::GetAssembly.](icordebugmodule-getassembly-method.md)  
  
 Эти объекты всегда кэшируются [ICorDebug,](icordebug-interface.md)и они будут иметь одинаковую идентификацию указателя независимо от того, были ли они созданы или запрошены из контейнерного модуля или подмодула. Вложенный модуль обеспечивает отфильтрованное представление этих кэшированных объектов, но не отдельный кэш со своими собственными копиями.  
  
<a name="APIs"></a>
## <a name="virtual-module-splitting-and-the-unmanaged-debugging-apis"></a>Разделение виртуальных модулей и неуправляемые интерфейсы API отладки  
 В следующей таблице показано, как разделение виртуальных модулей влияет на поведение других методов в неуправляемом интерфейсе API отладки.  
  
|Метод|`enableSplitting` = `true`|`enableSplitting` = `false`|  
|------------|---------------------------------|----------------------------------|  
|[ICorDebugFunction::GetModule](icordebugfunction-getmodule-method.md)|Возвращает вложенный модуль, в котором эта функция была изначально определена|Возвращает контейнерный модуль, в который была добавлена эта функция|  
|[ICorDebugClass::GetModule](icordebugclass-getmodule-method.md)|Возвращает вложенный модуль, в котором этот класс был изначально определен.|Возвращает контейнерный модуль, в который был добавлен этот класс.|  
|ICorDebugModuleDebugEvent::GetModule|Возвращает контейнерный модуль, который был загружен. Независимо от данного параметра, вложенные модули не получают события загрузки.|Возвращает контейнерный модуль, который был загружен.|  
|[ICorDebugAppDomain::EnumerateAssemblies](icordebugappdomain-enumerateassemblies-method.md)|Возвращает перечень сборочных узлов и регулярных сборок; контейнерные сборки не включаются. **Примечание:**  Если в какой-либо сборке контейнеров отсутствуют символы, ни одна из ее подсборки не будет перечислена. Если в любой регулярной сборке отсутствуют символы, то она может быть перечислена или не перечислена.|Возвращает перечень контейнерных сборок и регулярных сборок; сборочные узлы не включаются. **Примечание:**  Если какая-либо регулярная сборка отсутствует символы, она может или не может быть перечислена.|  
|[ICorDebugCode::GetCode](icordebugcode-getcode-method.md) (при общении только с кодом IL)|Возвращает IL-код, который будет действителен в образе сборки перед слиянием. В частности, любыми правильными встроенными токенами метаданных будут TypeRef или MemberRef, когда типы, на которые выполняется ссылка, не определены в виртуальном модуле, содержащем IL-код. Эти токены TypeRef или MemberRef можно искать в объекте [IMetaDataImport](../../../../docs/framework/unmanaged-api/metadata/imetadataimport-interface.md) для соответствующего виртуального объекта ICorDebugModule.|Возвращает IL-код в образе сборки после слияния.|  
  
## <a name="requirements"></a>Требования  
 **Платформы:** см. раздел [Требования к системе](../../../../docs/framework/get-started/system-requirements.md).  
  
 **Заголовок:** CorDebug.idl, CorDebug.h  
  
 **Библиотека:** CorGuids.lib  
  
 **Версии платформы .NET Framework:** [!INCLUDE[net_46_native](../../../../includes/net-46-native-md.md)]  
  
## <a name="see-also"></a>См. также раздел

- [Интерфейс ICorDebugProcess6](icordebugprocess6-interface.md)
- [Интерфейсы отладки](debugging-interfaces.md)
