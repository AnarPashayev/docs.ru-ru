---
title: Отражение в .NET
ms.date: 03/30/2017
helpviewer_keywords:
- assemblies [.NET], reflection
- EventInfo class, reflection
- common language runtime, reflection
- FieldInfo class, reflection
- ParameterInfo class, reflection
- ConstructorInfo class, reflection
- Assembly class, reflection
- value types, reflection
- reflection, about reflection
- modules, reflection
- runtime, reflection
- Module class, reflection
- MethodInfo class, reflection
- PropertyInfo class, reflection
- type browsers
- reflection
- discovering type information at run time
- type system, reflection
ms.assetid: d1a58e7f-fb39-4d50-bf84-e3b8f9bf9775
ms.openlocfilehash: 42944d8267d2e99fd9eb1a2cb28c0c81d3e9af75
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2020
ms.locfileid: "76744572"
---
# <a name="reflection-in-net"></a><span data-ttu-id="5a217-102">Отражение в .NET</span><span class="sxs-lookup"><span data-stu-id="5a217-102">Reflection in .NET</span></span>

<span data-ttu-id="5a217-103">Классы в пространстве имен <xref:System.Reflection> вместе с <xref:System.Type?displayProperty=nameWithType>позволяют получать сведения о загруженных [сборках](../../standard/assembly/index.md) и определенных в них типах, таких как [классы](../../standard/base-types/common-type-system.md#classes), [интерфейсы](../../standard/base-types/common-type-system.md#interfaces)и типы значений (т. е. [структуры](../../standard/base-types/common-type-system.md#structures) и [перечисления](../../standard/base-types/common-type-system.md#enumerations)).</span><span class="sxs-lookup"><span data-stu-id="5a217-103">The classes in the <xref:System.Reflection> namespace, together with <xref:System.Type?displayProperty=nameWithType>, enable you to obtain information about loaded [assemblies](../../standard/assembly/index.md) and the types defined within them, such as [classes](../../standard/base-types/common-type-system.md#classes), [interfaces](../../standard/base-types/common-type-system.md#interfaces), and value types (that is, [structures](../../standard/base-types/common-type-system.md#structures) and [enumerations](../../standard/base-types/common-type-system.md#enumerations)).</span></span> <span data-ttu-id="5a217-104">Отражение можно также использовать для создания экземпляров типов во время выполнения, для вызова этих экземпляров и получения доступа к ним.</span><span class="sxs-lookup"><span data-stu-id="5a217-104">You can also use reflection to create type instances at run time, and to invoke and access them.</span></span> <span data-ttu-id="5a217-105">Разделы, в которых описываются отдельные аспекты отражения, можно найти в подразделе [Связанные подразделы](#related_topics) в конце этого обзора.</span><span class="sxs-lookup"><span data-stu-id="5a217-105">For topics about specific aspects of reflection, see [Related Topics](#related_topics) at the end of this overview.</span></span>
  
<span data-ttu-id="5a217-106">Загрузчик [среды CLR](../../standard/clr.md) управляет [доменами приложений](../app-domains/application-domains.md), которые образуют определенные границы вокруг объектов с одной и той же областью приложения.</span><span class="sxs-lookup"><span data-stu-id="5a217-106">The [common language runtime](../../standard/clr.md) loader manages [application domains](../app-domains/application-domains.md), which constitute defined boundaries around objects that have the same application scope.</span></span> <span data-ttu-id="5a217-107">В частности, он загружает каждую сборку в соответствующий домен приложения и контролирует распределение памяти для иерархии типов в каждой сборке.</span><span class="sxs-lookup"><span data-stu-id="5a217-107">This management includes loading each assembly into the appropriate application domain and controlling the memory layout of the type hierarchy within each assembly.</span></span>  
  
<span data-ttu-id="5a217-108">[Сборки](../app-domains/index.md) содержат модули, модули содержат типы, а типы содержат члены.</span><span class="sxs-lookup"><span data-stu-id="5a217-108">[Assemblies](../app-domains/index.md) contain modules, modules contain types, and types contain members.</span></span> <span data-ttu-id="5a217-109">Отражение предоставляет объекты, которые инкапсулируют сборки, модули и типы.</span><span class="sxs-lookup"><span data-stu-id="5a217-109">Reflection provides objects that encapsulate assemblies, modules, and types.</span></span> <span data-ttu-id="5a217-110">Отражение можно использовать для динамического создания экземпляра типа, привязки типа к существующему объекту или получения типа из существующего объекта.</span><span class="sxs-lookup"><span data-stu-id="5a217-110">You can use reflection to dynamically create an instance of a type, bind the type to an existing object, or get the type from an existing object.</span></span> <span data-ttu-id="5a217-111">Затем можно вызывать методы типа или получать доступ к его полям и свойствам.</span><span class="sxs-lookup"><span data-stu-id="5a217-111">You can then invoke the type's methods or access its fields and properties.</span></span> <span data-ttu-id="5a217-112">Ниже приведены типичные варианты использования отражения.</span><span class="sxs-lookup"><span data-stu-id="5a217-112">Typical uses of reflection include the following:</span></span>  
  
- <span data-ttu-id="5a217-113">Объект <xref:System.Reflection.Assembly> используется для определения и загрузки сборок, загрузки модулей, перечисленных в манифесте сборки, а также для поиска типа в сборке и создания его экземпляра.</span><span class="sxs-lookup"><span data-stu-id="5a217-113">Use <xref:System.Reflection.Assembly> to define and load assemblies, load modules that are listed in the assembly manifest, and locate a type from this assembly and create an instance of it.</span></span>  
  
- <span data-ttu-id="5a217-114">Объект <xref:System.Reflection.Module> используется для получения таких сведений, как имя сборки, содержащей модуль, и перечень классов этого модуля.</span><span class="sxs-lookup"><span data-stu-id="5a217-114">Use <xref:System.Reflection.Module> to discover information such as the assembly that contains the module and the classes in the module.</span></span> <span data-ttu-id="5a217-115">Кроме того, можно получить все глобальные методы или определенные неглобальные методы, включенные в модуль.</span><span class="sxs-lookup"><span data-stu-id="5a217-115">You can also get all global methods or other specific, nonglobal methods defined on the module.</span></span>  
  
- <span data-ttu-id="5a217-116">Объект <xref:System.Reflection.ConstructorInfo> используется для получения таких сведений, как имя, параметры, модификаторы доступа (например, `public` или `private`) и сведения о реализации (например, `abstract` или `virtual`) конструктора.</span><span class="sxs-lookup"><span data-stu-id="5a217-116">Use <xref:System.Reflection.ConstructorInfo> to discover information such as the name, parameters, access modifiers (such as `public` or `private`), and implementation details (such as `abstract` or `virtual`) of a constructor.</span></span> <span data-ttu-id="5a217-117">Метод <xref:System.Type.GetConstructors%2A> или <xref:System.Type.GetConstructor%2A> типа <xref:System.Type> используется для вызова конкретного конструктора.</span><span class="sxs-lookup"><span data-stu-id="5a217-117">Use the <xref:System.Type.GetConstructors%2A> or <xref:System.Type.GetConstructor%2A> method of a <xref:System.Type> to invoke a specific constructor.</span></span>  
  
- <span data-ttu-id="5a217-118">Класс <xref:System.Reflection.MethodInfo> используется для получения таких сведений, как имя, возвращаемый тип, параметры, модификаторы доступа (например, `public` или `private`) и сведения о реализации (например, `abstract` или `virtual`) метода.</span><span class="sxs-lookup"><span data-stu-id="5a217-118">Use <xref:System.Reflection.MethodInfo> to discover information such as the name, return type, parameters, access modifiers (such as `public` or `private`), and implementation details (such as `abstract` or `virtual`) of a method.</span></span> <span data-ttu-id="5a217-119">Метод <xref:System.Type.GetMethods%2A> или <xref:System.Type.GetMethod%2A> типа <xref:System.Type> используется для вызова определенного метода.</span><span class="sxs-lookup"><span data-stu-id="5a217-119">Use the <xref:System.Type.GetMethods%2A> or <xref:System.Type.GetMethod%2A> method of a <xref:System.Type> to invoke a specific method.</span></span>  
  
- <span data-ttu-id="5a217-120">Класс <xref:System.Reflection.FieldInfo> используется для получения таких сведений, как имя, модификаторы доступа (например, `public` или `private`) и сведения о реализации (например, `static`) поля, а также для получения или задания значений поля.</span><span class="sxs-lookup"><span data-stu-id="5a217-120">Use <xref:System.Reflection.FieldInfo> to discover information such as the name, access modifiers (such as `public` or `private`) and implementation details (such as `static`) of a field, and to get or set field values.</span></span>  
  
- <span data-ttu-id="5a217-121">Класс <xref:System.Reflection.EventInfo> используется для получения таких сведений, как имя, тип данных обработчика событий, пользовательские атрибуты, объявляющий тип и отраженный тип события, а также для добавления или удаления обработчиков событий.</span><span class="sxs-lookup"><span data-stu-id="5a217-121">Use <xref:System.Reflection.EventInfo> to discover information such as the name, event-handler data type, custom attributes, declaring type, and reflected type of an event, and to add or remove event handlers.</span></span>  
  
- <span data-ttu-id="5a217-122">Класс <xref:System.Reflection.PropertyInfo> используется для получения таких сведений, как имя, тип данных, объявляющий тип, отраженный тип и состояние доступности свойства (для записи или только для чтения), а также для получения и задания значений свойств.</span><span class="sxs-lookup"><span data-stu-id="5a217-122">Use <xref:System.Reflection.PropertyInfo> to discover information such as the name, data type, declaring type, reflected type, and read-only or writable status of a property, and to get or set property values.</span></span>  
  
- <span data-ttu-id="5a217-123">Класс <xref:System.Reflection.ParameterInfo> используется для получения таких сведений, как имя параметра, тип данных, вид параметра (входной или выходной) и его положение в подписи метода.</span><span class="sxs-lookup"><span data-stu-id="5a217-123">Use <xref:System.Reflection.ParameterInfo> to discover information such as a parameter's name, data type, whether a parameter is an input or output parameter, and the position of the parameter in a method signature.</span></span>  
  
- <span data-ttu-id="5a217-124">Класс <xref:System.Reflection.CustomAttributeData> используется для получения сведений о настраиваемых атрибутах при работе в контексте домена приложения только для отражения.</span><span class="sxs-lookup"><span data-stu-id="5a217-124">Use <xref:System.Reflection.CustomAttributeData> to discover information about custom attributes when you are working in the reflection-only context of an application domain.</span></span> <span data-ttu-id="5a217-125">Класс <xref:System.Reflection.CustomAttributeData> позволяет проверять атрибуты, не создавая их экземпляры.</span><span class="sxs-lookup"><span data-stu-id="5a217-125"><xref:System.Reflection.CustomAttributeData> allows you to examine attributes without creating instances of them.</span></span>  
  
<span data-ttu-id="5a217-126">Классы пространства имен <xref:System.Reflection.Emit> реализуют особый вид отражения, который позволяет создавать типы во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="5a217-126">The classes of the <xref:System.Reflection.Emit> namespace provide a specialized form of reflection that enables you to build types at run time.</span></span>  
  
<span data-ttu-id="5a217-127">Отражение также можно использовать для создания приложений, называемых браузерами типов, которые позволяют пользователям выбирать типы, а затем просматривать сведения о них.</span><span class="sxs-lookup"><span data-stu-id="5a217-127">Reflection can also be used to create applications called type browsers, which enable users to select types and then view the information about those types.</span></span>  
  
<span data-ttu-id="5a217-128">Есть и другие способы использования отражения.</span><span class="sxs-lookup"><span data-stu-id="5a217-128">There are other uses for reflection.</span></span> <span data-ttu-id="5a217-129">Компиляторы таких языков программирования, как JScript, используют отражение для построения таблиц символов.</span><span class="sxs-lookup"><span data-stu-id="5a217-129">Compilers for languages such as JScript use reflection to construct symbol tables.</span></span> <span data-ttu-id="5a217-130">Классы в пространстве имен <xref:System.Runtime.Serialization> используют отражение для доступа к данным и определения того, какие поля следует сохранить.</span><span class="sxs-lookup"><span data-stu-id="5a217-130">The classes in the <xref:System.Runtime.Serialization> namespace use reflection to access data and to determine which fields to persist.</span></span> <span data-ttu-id="5a217-131">Классы в пространстве имен <xref:System.Runtime.Remoting> используют отражение косвенным образом через сериализацию.</span><span class="sxs-lookup"><span data-stu-id="5a217-131">The classes in the <xref:System.Runtime.Remoting> namespace use reflection indirectly through serialization.</span></span>  
  
## <a name="runtime-types-in-reflection"></a><span data-ttu-id="5a217-132">Типы среды выполнения в отражении</span><span class="sxs-lookup"><span data-stu-id="5a217-132">Runtime Types in Reflection</span></span>  
<span data-ttu-id="5a217-133">Отражение предоставляет классы, такие как <xref:System.Type> и <xref:System.Reflection.MethodInfo>, для представления типов, членов, параметров и других объектов кода.</span><span class="sxs-lookup"><span data-stu-id="5a217-133">Reflection provides classes, such as <xref:System.Type> and <xref:System.Reflection.MethodInfo>, to represent types, members, parameters, and other code entities.</span></span> <span data-ttu-id="5a217-134">Однако при использовании отражения вы работаете с этими классами не напрямую: большинство из них являются абстрактными (`MustInherit` в Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="5a217-134">However, when you use reflection, you don't work directly with these classes, most of which are abstract (`MustInherit` in Visual Basic).</span></span> <span data-ttu-id="5a217-135">Вместо этого вы работаете с типами, предоставленными средой CLR.</span><span class="sxs-lookup"><span data-stu-id="5a217-135">Instead, you work with types provided by the common language runtime (CLR).</span></span>  
  
<span data-ttu-id="5a217-136">Например, при использовании оператора `typeof` в C# (`GetType` в Visual Basic) для получения объекта <xref:System.Type> объект фактически является `RuntimeType`.</span><span class="sxs-lookup"><span data-stu-id="5a217-136">For example, when you use the C# `typeof` operator (`GetType` in Visual Basic) to obtain a <xref:System.Type> object, the object is really a `RuntimeType`.</span></span> <span data-ttu-id="5a217-137">`RuntimeType` является производным от <xref:System.Type> и предоставляет реализации всех абстрактных методов.</span><span class="sxs-lookup"><span data-stu-id="5a217-137">`RuntimeType` derives from <xref:System.Type> and provides implementations of all the abstract methods.</span></span>  
  
<span data-ttu-id="5a217-138">Эти классы среды выполнения являются `internal` (`Friend` в Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="5a217-138">These runtime classes are `internal` (`Friend` in Visual Basic).</span></span> <span data-ttu-id="5a217-139">Они не документируются отдельно от своих базовых классов, так как их поведение описывается в документации базового класса.</span><span class="sxs-lookup"><span data-stu-id="5a217-139">They are not documented separately from their base classes, because their behavior is described by the base class documentation.</span></span>  
  
<a name="related_topics"></a>   

## <a name="related-topics"></a><span data-ttu-id="5a217-140">Связанные разделы</span><span class="sxs-lookup"><span data-stu-id="5a217-140">Related Topics</span></span>  
  
|<span data-ttu-id="5a217-141">Заголовок</span><span class="sxs-lookup"><span data-stu-id="5a217-141">Title</span></span>|<span data-ttu-id="5a217-142">Описание</span><span class="sxs-lookup"><span data-stu-id="5a217-142">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="5a217-143">Просмотр сведений о типах</span><span class="sxs-lookup"><span data-stu-id="5a217-143">Viewing Type Information</span></span>](viewing-type-information.md)|<span data-ttu-id="5a217-144">Описывается класс <xref:System.Type> и приводятся примеры кода, иллюстрирующие использование <xref:System.Type> с несколькими классами отражения для получения информации о конструкторах, методах, полях, свойствах и событиях.</span><span class="sxs-lookup"><span data-stu-id="5a217-144">Describes the <xref:System.Type> class and provides code examples that illustrate how to use <xref:System.Type> with several reflection classes to obtain information about constructors, methods, fields, properties, and events.</span></span>|  
|[<span data-ttu-id="5a217-145">Отражение и универсальные типы</span><span class="sxs-lookup"><span data-stu-id="5a217-145">Reflection and Generic Types</span></span>](reflection-and-generic-types.md)|<span data-ttu-id="5a217-146">Объясняется обработка отражением параметров и аргументов типа для универсальных типов и методов.</span><span class="sxs-lookup"><span data-stu-id="5a217-146">Explains how reflection handles the type parameters and type arguments of generic types and generic methods.</span></span>|  
|[<span data-ttu-id="5a217-147">Соображения о безопасности для отражения</span><span class="sxs-lookup"><span data-stu-id="5a217-147">Security Considerations for Reflection</span></span>](security-considerations-for-reflection.md)|<span data-ttu-id="5a217-148">Описываются правила, определяющие, в какой степени отражение можно использовать для получения информации о типах и доступа к типам.</span><span class="sxs-lookup"><span data-stu-id="5a217-148">Describes the rules that determine to what degree reflection can be used to discover type information and access types.</span></span>|  
|[<span data-ttu-id="5a217-149">Динамическая загрузка и использование типов</span><span class="sxs-lookup"><span data-stu-id="5a217-149">Dynamically Loading and Using Types</span></span>](dynamically-loading-and-using-types.md)|<span data-ttu-id="5a217-150">Описывается интерфейс настраиваемой привязки отражения, поддерживающий позднее связывание.</span><span class="sxs-lookup"><span data-stu-id="5a217-150">Describes the reflection custom-binding interface that supports late binding.</span></span>|  
|[<span data-ttu-id="5a217-151">Практическое руководство. Загрузка сборок в контекст, предназначенный только для отражения</span><span class="sxs-lookup"><span data-stu-id="5a217-151">How to: Load Assemblies into the Reflection-Only Context</span></span>](how-to-load-assemblies-into-the-reflection-only-context.md)|<span data-ttu-id="5a217-152">Описывается контекст загрузки, предназначенный только для отражения.</span><span class="sxs-lookup"><span data-stu-id="5a217-152">Describes the reflection-only load context.</span></span> <span data-ttu-id="5a217-153">Показано, как загрузить сборку, протестировать контекст и просмотреть атрибуты, примененные к сборке в контексте, предназначенном только для отражения.</span><span class="sxs-lookup"><span data-stu-id="5a217-153">Shows how to load an assembly, how to test the context, and how to examine attributes applied to an assembly in the reflection-only context.</span></span>|  
|[<span data-ttu-id="5a217-154">Доступ к пользовательским атрибутам</span><span class="sxs-lookup"><span data-stu-id="5a217-154">Accessing Custom Attributes</span></span>](accessing-custom-attributes.md)|<span data-ttu-id="5a217-155">Показано, как использовать отражение для проверки наличия атрибутов и получения их значений.</span><span class="sxs-lookup"><span data-stu-id="5a217-155">Demonstrates using reflection to query attribute existence and values.</span></span>|  
|[<span data-ttu-id="5a217-156">Указание полных имен типов</span><span class="sxs-lookup"><span data-stu-id="5a217-156">Specifying Fully Qualified Type Names</span></span>](specifying-fully-qualified-type-names.md)|<span data-ttu-id="5a217-157">Описывается формат полных имен типов в форме Бэкуса-Наура и синтаксис для указания специальных символов, имен сборок, указателей, ссылок и массивов.</span><span class="sxs-lookup"><span data-stu-id="5a217-157">Describes the format of fully qualified type names in terms of the Backus-Naur form (BNF), and the syntax required for specifying special characters, assembly names, pointers, references, and arrays.</span></span>|  
|[<span data-ttu-id="5a217-158">Практическое руководство. Подключение делегата с помощью отражения</span><span class="sxs-lookup"><span data-stu-id="5a217-158">How to: Hook Up a Delegate Using Reflection</span></span>](how-to-hook-up-a-delegate-using-reflection.md)|<span data-ttu-id="5a217-159">Объясняется, как создать делегат для метода и привязать его к событию.</span><span class="sxs-lookup"><span data-stu-id="5a217-159">Explains how to create a delegate for a method and hook the delegate up to an event.</span></span> <span data-ttu-id="5a217-160">Также объясняется, как создать метод обработки событий во время выполнения с помощью <xref:System.Reflection.Emit.DynamicMethod>.</span><span class="sxs-lookup"><span data-stu-id="5a217-160">Explains how to create an event-handling method at run time using <xref:System.Reflection.Emit.DynamicMethod>.</span></span>|  
|[<span data-ttu-id="5a217-161">Предоставление динамических методов и сборок</span><span class="sxs-lookup"><span data-stu-id="5a217-161">Emitting Dynamic Methods and Assemblies</span></span>](emitting-dynamic-methods-and-assemblies.md)|<span data-ttu-id="5a217-162">Объясняется, как создавать динамические сборки и динамические методы.</span><span class="sxs-lookup"><span data-stu-id="5a217-162">Explains how to generate dynamic assemblies and dynamic methods.</span></span>|  
  
## <a name="reference"></a><span data-ttu-id="5a217-163">Справочные сведения</span><span class="sxs-lookup"><span data-stu-id="5a217-163">Reference</span></span>  

<xref:System.Type?displayProperty=nameWithType>  
  
<xref:System.Reflection>  
  
<xref:System.Reflection.Emit>  
