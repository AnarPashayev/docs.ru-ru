---
title: Переключатели трассировки
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- tracing [.NET Framework], trace switches
- trace switches, about trace switches
- tracing [.NET Framework], level of detail
- switches, trace
- trace switches
- trace switches, creating custom
ms.assetid: 8ab913aa-f400-4406-9436-f45bc6e54fbe
author: mairaw
ms.author: mairaw
ms.openlocfilehash: 85a1a017197826717280f53995ed98f26f1d80bb
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2019
ms.locfileid: "59132669"
---
# <a name="trace-switches"></a><span data-ttu-id="02771-102">Переключатели трассировки</span><span class="sxs-lookup"><span data-stu-id="02771-102">Trace Switches</span></span>
<span data-ttu-id="02771-103">Переключатели трассировки позволяют включать, отключать и фильтровать выходные данные трассировки.</span><span class="sxs-lookup"><span data-stu-id="02771-103">Trace switches enable you to enable, disable, and filter tracing output.</span></span> <span data-ttu-id="02771-104">Они являются объектами, которые существуют в коде и могут настраиваться извне с помощью файла конфигурации.</span><span class="sxs-lookup"><span data-stu-id="02771-104">They are objects that exist in your code and can be configured externally through the .config file.</span></span> <span data-ttu-id="02771-105">В .NET Framework существует три типа переключателей трассировки: класс <xref:System.Diagnostics.BooleanSwitch> , класс <xref:System.Diagnostics.TraceSwitch> и класс <xref:System.Diagnostics.SourceSwitch> .</span><span class="sxs-lookup"><span data-stu-id="02771-105">There are three types of trace switches provided in the .NET Framework: the <xref:System.Diagnostics.BooleanSwitch> class, the <xref:System.Diagnostics.TraceSwitch> class, and the <xref:System.Diagnostics.SourceSwitch> class.</span></span> <span data-ttu-id="02771-106">Класс <xref:System.Diagnostics.BooleanSwitch> действует как переключатель, включая или отключая различные операторы трассировки.</span><span class="sxs-lookup"><span data-stu-id="02771-106">The <xref:System.Diagnostics.BooleanSwitch> class acts as a toggle switch, either enabling or disabling a variety of trace statements.</span></span> <span data-ttu-id="02771-107">Классы <xref:System.Diagnostics.TraceSwitch> и <xref:System.Diagnostics.SourceSwitch> позволяют включать переключатель трассировки для определенного уровня трассировки, чтобы отображались сообщения <xref:System.Diagnostics.Trace> или <xref:System.Diagnostics.TraceSource> , заданные для данного уровня и всех уровней ниже него.</span><span class="sxs-lookup"><span data-stu-id="02771-107">The <xref:System.Diagnostics.TraceSwitch> and <xref:System.Diagnostics.SourceSwitch> classes allow you to enable a trace switch for a particular tracing level so that the <xref:System.Diagnostics.Trace> or <xref:System.Diagnostics.TraceSource> messages specified for that level and all levels below it appear.</span></span> <span data-ttu-id="02771-108">Если этот переключатель отключить, то сообщения трассировки не будут отображаться.</span><span class="sxs-lookup"><span data-stu-id="02771-108">If you disable the switch, the trace messages will not appear.</span></span> <span data-ttu-id="02771-109">Все эти классы являются производными от абстрактного (**MustInherit**) класса **Switch**, как и следует переключателям, разработанным пользователями.</span><span class="sxs-lookup"><span data-stu-id="02771-109">All these classes derive from the abstract (**MustInherit**) class **Switch**, as should any user-developed switches.</span></span>  
  
 <span data-ttu-id="02771-110">Переключатели трассировки можно использовать для фильтрации сведений.</span><span class="sxs-lookup"><span data-stu-id="02771-110">Trace switches can be useful for filtering information.</span></span> <span data-ttu-id="02771-111">Например, можно просматривать все сообщения трассировки в модуле доступа к данным, но только сообщения об ошибках в остальной части приложения.</span><span class="sxs-lookup"><span data-stu-id="02771-111">For example, you might want to see every tracing message in a data access module, but only error messages in the rest of the application.</span></span> <span data-ttu-id="02771-112">В этом случае следует использовать один переключатель трассировки для модуля доступа к данным и еще один переключатель для остальной части приложения.</span><span class="sxs-lookup"><span data-stu-id="02771-112">In that case, you would use one trace switch for the data access module and one switch for the rest of the application.</span></span> <span data-ttu-id="02771-113">Используя файл конфигурации для настройки соответствующих значений переключателей, можно управлять типами получаемых сообщений трассировки.</span><span class="sxs-lookup"><span data-stu-id="02771-113">By using the .config file to configure the switches to the appropriate settings, you could control what types of trace message you received.</span></span> <span data-ttu-id="02771-114">Дополнительные сведения см. в разделе [Как Создание, инициализация и настройка переключателей трассировки](../../../docs/framework/debug-trace-profile/how-to-create-initialize-and-configure-trace-switches.md).</span><span class="sxs-lookup"><span data-stu-id="02771-114">For more information, see [How to: Create, Initialize and Configure Trace Switches](../../../docs/framework/debug-trace-profile/how-to-create-initialize-and-configure-trace-switches.md).</span></span>  
  
 <span data-ttu-id="02771-115">Как правило, развертываемое приложение выполняется с отключенными переключателями, чтобы пользователям не приходилось наблюдать большое количество ненужных сообщений трассировки, появляющихся на экране или заполняющих файл журнала во время выполнения приложения.</span><span class="sxs-lookup"><span data-stu-id="02771-115">Typically, a deployed application is executed with its switches disabled, so that users need not observe a lot of irrelevant trace messages appearing on a screen or filling up a log file as the application runs.</span></span> <span data-ttu-id="02771-116">Если во время выполнения приложения возникает проблема, можно остановить приложение, включить переключатели и перезапустить приложение.</span><span class="sxs-lookup"><span data-stu-id="02771-116">If a problem arises during application execution, you can stop the application, enable the switches, and restart the application.</span></span> <span data-ttu-id="02771-117">Затем будут отображены сообщения трассировки.</span><span class="sxs-lookup"><span data-stu-id="02771-117">Then the tracing messages will be displayed.</span></span>  
  
 <span data-ttu-id="02771-118">Перед использованием переключателя необходимо создать объект переключателя из класса **BooleanSwitch** , класса **TraceSwitch** или класса переключателя, определенного разработчиком.</span><span class="sxs-lookup"><span data-stu-id="02771-118">To use a switch you must first create a switch object from a **BooleanSwitch** class, a **TraceSwitch** class, or a developer-defined switch class.</span></span> <span data-ttu-id="02771-119">Дополнительные сведения о создании определенных разработчиками переключателей см. в описании класса <xref:System.Diagnostics.Switch> в справочнике по .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="02771-119">For more information about creating developer-defined switches, see the <xref:System.Diagnostics.Switch> class in the .NET Framework reference.</span></span> <span data-ttu-id="02771-120">Затем задается значение конфигурации, определяющее, когда должен использоваться объект переключателя.</span><span class="sxs-lookup"><span data-stu-id="02771-120">Then you set a configuration value that specifies when the switch object is to be used.</span></span> <span data-ttu-id="02771-121">Затем проверяется настройка объекта переключателя в различных методах трассировки **Trace** (или **Debug**).</span><span class="sxs-lookup"><span data-stu-id="02771-121">You then test the setting of the switch object in various **Trace** (or **Debug**) tracing methods.</span></span>  
  
## <a name="trace-levels"></a><span data-ttu-id="02771-122">Уровни трассировки</span><span class="sxs-lookup"><span data-stu-id="02771-122">Trace Levels</span></span>  
 <span data-ttu-id="02771-123">При использовании **TraceSwitch**существуют дополнительные рекомендации.</span><span class="sxs-lookup"><span data-stu-id="02771-123">When you use **TraceSwitch**, there are additional considerations.</span></span> <span data-ttu-id="02771-124">Объект **TraceSwitch** имеет четыре свойства, которые возвращают **логические** значения, указывающие, установлен ли переключатель хотя бы для отдельного уровня:</span><span class="sxs-lookup"><span data-stu-id="02771-124">A **TraceSwitch** object has four properties that return **Boolean** values indicating whether the switch is set to at least a particular level:</span></span>  
  
-   <xref:System.Diagnostics.TraceSwitch.TraceError%2A?displayProperty=nameWithType>  
  
-   <xref:System.Diagnostics.TraceSwitch.TraceWarning%2A?displayProperty=nameWithType>  
  
-   <xref:System.Diagnostics.TraceSwitch.TraceInfo%2A?displayProperty=nameWithType>  
  
-   <xref:System.Diagnostics.TraceSwitch.TraceVerbose%2A?displayProperty=nameWithType>  
  
 <span data-ttu-id="02771-125">Уровни позволяют ограничить количество получаемых сведений трассировки только теми, которые необходимы для решения проблемы.</span><span class="sxs-lookup"><span data-stu-id="02771-125">Levels allow you to limit the amount of tracing information you receive to only that information needed to solve a problem.</span></span> <span data-ttu-id="02771-126">Вы указываете нужный уровень детализации в выходных данных трассировки путем установки и настройки переключателей трассировки для соответствующего уровня трассировки.</span><span class="sxs-lookup"><span data-stu-id="02771-126">You specify the level of detail you want in your tracing output by setting and configuring trace switches to the appropriate trace level.</span></span> <span data-ttu-id="02771-127">Можно получать сообщения об ошибках, предупреждения, информационные сообщения, подробные сообщения трассировки или совсем не получать сообщения.</span><span class="sxs-lookup"><span data-stu-id="02771-127">You can receive error messages, warning messages, informational messages, verbose tracing messages, or no message at all.</span></span>  
  
 <span data-ttu-id="02771-128">Только вы решаете, какие виды сообщений связать с каждым уровнем.</span><span class="sxs-lookup"><span data-stu-id="02771-128">It is entirely up to you to decide what kind of message to associate with each level.</span></span> <span data-ttu-id="02771-129">Обычно содержание сообщений трассировки зависит от того, что вы связываете с каждым уровнем, но вы определяете разницу между уровнями.</span><span class="sxs-lookup"><span data-stu-id="02771-129">Typically, the content of tracing messages depends on what you associate with each level, but you determine the differences between levels.</span></span> <span data-ttu-id="02771-130">Например, может потребоваться получать подробное описание проблемы на уровне 3 (**Info**), например, но получать только номер ссылки на ошибку на уровне 1 (**Error**).</span><span class="sxs-lookup"><span data-stu-id="02771-130">You might want to provide detailed descriptions of a problem at level 3 (**Info**), for example, but provide only an error reference number at level 1 (**Error**).</span></span> <span data-ttu-id="02771-131">Только вы решаете, какая схема лучше всего подходит для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="02771-131">It is entirely up to you to decide what scheme works best in your application.</span></span>  
  
 <span data-ttu-id="02771-132">Этим свойствам соответствуют значения от 1 до 4 перечисления **TraceLevel** .</span><span class="sxs-lookup"><span data-stu-id="02771-132">These properties correspond to the values 1 through 4 of the **TraceLevel** enumeration.</span></span> <span data-ttu-id="02771-133">В следующей таблице приведены уровни перечисления **TraceLevel** и их значения.</span><span class="sxs-lookup"><span data-stu-id="02771-133">The following table lists the levels of the **TraceLevel** enumeration and their values.</span></span>  
  
|<span data-ttu-id="02771-134">Перечисляемое значение</span><span class="sxs-lookup"><span data-stu-id="02771-134">Enumerated value</span></span>|<span data-ttu-id="02771-135">Целочисленное значение</span><span class="sxs-lookup"><span data-stu-id="02771-135">Integer value</span></span>|<span data-ttu-id="02771-136">Тип отображаемого сообщения (или записываемого в указанный целевой объект)</span><span class="sxs-lookup"><span data-stu-id="02771-136">Type of message displayed (or written to a specified output target)</span></span>|  
|----------------------|-------------------|---------------------------------------------------------------------------|  
|<span data-ttu-id="02771-137">Off</span><span class="sxs-lookup"><span data-stu-id="02771-137">Off</span></span>|<span data-ttu-id="02771-138">0</span><span class="sxs-lookup"><span data-stu-id="02771-138">0</span></span>|<span data-ttu-id="02771-139">Нет</span><span class="sxs-lookup"><span data-stu-id="02771-139">None</span></span>|  
|<span data-ttu-id="02771-140">Error</span><span class="sxs-lookup"><span data-stu-id="02771-140">Error</span></span>|<span data-ttu-id="02771-141">1</span><span class="sxs-lookup"><span data-stu-id="02771-141">1</span></span>|<span data-ttu-id="02771-142">Только сообщения об ошибках</span><span class="sxs-lookup"><span data-stu-id="02771-142">Only error messages</span></span>|  
|<span data-ttu-id="02771-143">Предупреждение</span><span class="sxs-lookup"><span data-stu-id="02771-143">Warning</span></span>|<span data-ttu-id="02771-144">2</span><span class="sxs-lookup"><span data-stu-id="02771-144">2</span></span>|<span data-ttu-id="02771-145">Предупреждающие сообщения и сообщения об ошибках</span><span class="sxs-lookup"><span data-stu-id="02771-145">Warning messages and error messages</span></span>|  
|<span data-ttu-id="02771-146">Info</span><span class="sxs-lookup"><span data-stu-id="02771-146">Info</span></span>|<span data-ttu-id="02771-147">3</span><span class="sxs-lookup"><span data-stu-id="02771-147">3</span></span>|<span data-ttu-id="02771-148">Информационные сообщения, предупреждения и сообщения об ошибках</span><span class="sxs-lookup"><span data-stu-id="02771-148">Informational messages, warning messages, and error messages</span></span>|  
|<span data-ttu-id="02771-149">Verbose</span><span class="sxs-lookup"><span data-stu-id="02771-149">Verbose</span></span>|<span data-ttu-id="02771-150">4</span><span class="sxs-lookup"><span data-stu-id="02771-150">4</span></span>|<span data-ttu-id="02771-151">Подробные сообщения, информационные сообщения, предупреждения и сообщения об ошибках</span><span class="sxs-lookup"><span data-stu-id="02771-151">Verbose messages, informational messages, warning messages, and error messages</span></span>|  
  
 <span data-ttu-id="02771-152">Свойства **TraceSwitch** указывают максимальный уровень трассировки для переключателя.</span><span class="sxs-lookup"><span data-stu-id="02771-152">The **TraceSwitch** properties indicate the maximum trace level for the switch.</span></span> <span data-ttu-id="02771-153">То есть сведения трассировки записываются для указанного уровня, а также для всех более низких уровней.</span><span class="sxs-lookup"><span data-stu-id="02771-153">That is, tracing information is written for the level specified as well as for all lower levels.</span></span> <span data-ttu-id="02771-154">Например, если **TraceInfo** имеет значение **true**, то **TraceError** и **TraceWarning** также имеют значение **true** , но **TraceVerbose** может иметь значение **false**.</span><span class="sxs-lookup"><span data-stu-id="02771-154">For example, if **TraceInfo** is **true**, then **TraceError** and **TraceWarning** are also **true** but **TraceVerbose** might well be **false**.</span></span>  
  
 <span data-ttu-id="02771-155">Эти свойства доступны только для чтения.</span><span class="sxs-lookup"><span data-stu-id="02771-155">These properties are read-only.</span></span> <span data-ttu-id="02771-156">Объект **TraceSwitch** автоматически устанавливает их при установке свойства **TraceLevel** .</span><span class="sxs-lookup"><span data-stu-id="02771-156">The **TraceSwitch** object automatically sets them when the **TraceLevel** property is set.</span></span> <span data-ttu-id="02771-157">Пример:</span><span class="sxs-lookup"><span data-stu-id="02771-157">For example:</span></span>  
  
```vb  
Dim myTraceSwitch As New TraceSwitch("SwitchOne", "The first switch")  
myTraceSwitch.Level = TraceLevel.Info  
' This message box displays true, because setting the level to  
' TraceLevel.Info sets all lower levels to true as well.  
MessageBox.Show(myTraceSwitch.TraceWarning.ToString())  
' This messagebox displays false.  
MessageBox.Show(myTraceSwitch.TraceVerbose.ToString())  
```  
  
```csharp  
System.Diagnostics.TraceSwitch myTraceSwitch =   
   new System.Diagnostics.TraceSwitch("SwitchOne", "The first switch");  
myTraceSwitch.Level = System.Diagnostics.TraceLevel.Info;  
// This message box displays true, because setting the level to   
// TraceLevel.Info sets all lower levels to true as well.  
MessageBox.Show(myTraceSwitch.TraceWarning.ToString());  
// This message box displays false.  
MessageBox.Show(myTraceSwitch.TraceVerbose.ToString());  
```  
  
## <a name="developer-defined-switches"></a><span data-ttu-id="02771-158">Переключатели, определяемые разработчиком</span><span class="sxs-lookup"><span data-stu-id="02771-158">Developer-Defined Switches</span></span>  
 <span data-ttu-id="02771-159">Помимо предоставления **BooleanSwitch** и **TraceSwitch**вы можете определить свои собственные переключатели путем наследования от класса **Switch** и переопределения методов базового класса настраиваемыми методами.</span><span class="sxs-lookup"><span data-stu-id="02771-159">In addition to providing **BooleanSwitch** and **TraceSwitch**, you can define your own switches by inheriting from the **Switch** class and overriding the base class methods with customized methods.</span></span> <span data-ttu-id="02771-160">Дополнительные сведения о создании определенных разработчиками переключателей см. в описании класса <xref:System.Diagnostics.Switch> в справочнике по .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="02771-160">For more information about creating developer-defined switches, see the <xref:System.Diagnostics.Switch> class in the .NET Framework reference.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="02771-161">См. также</span><span class="sxs-lookup"><span data-stu-id="02771-161">See also</span></span>

- [<span data-ttu-id="02771-162">Прослушиватели трассировки</span><span class="sxs-lookup"><span data-stu-id="02771-162">Trace Listeners</span></span>](../../../docs/framework/debug-trace-profile/trace-listeners.md)
- [<span data-ttu-id="02771-163">Практическое руководство. Добавление операторов трассировки в код приложения</span><span class="sxs-lookup"><span data-stu-id="02771-163">How to: Add Trace Statements to Application Code</span></span>](../../../docs/framework/debug-trace-profile/how-to-add-trace-statements-to-application-code.md)
- [<span data-ttu-id="02771-164">Трассировка и инструментирование приложений</span><span class="sxs-lookup"><span data-stu-id="02771-164">Tracing and Instrumenting Applications</span></span>](../../../docs/framework/debug-trace-profile/tracing-and-instrumenting-applications.md)
