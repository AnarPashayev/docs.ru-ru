---
title: Практическое руководство. Создание действия
ms.date: 09/14/2018
dev_langs:
- csharp
- vb
ms.assetid: c09b1e99-21b5-4d96-9c04-ec31db3f4436
ms.openlocfilehash: 48df9b90a92468858bd3ac5498bd83fd0d57fe75
ms.sourcegitcommit: 558d78d2a68acd4c95ef23231c8b4e4c7bac3902
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2019
ms.locfileid: "59315144"
---
# <a name="how-to-create-an-activity"></a>Практическое руководство. Создание действия

Действия являются базовой единицей режима работы в [!INCLUDE[wf1](../../../includes/wf1-md.md)]. Логика выполнения действия может быть реализована в управляемом коде или с помощью других действий. В этом разделе показано создание двух действий. Первое действие - простое действие с использованием кода для реализации логики выполнения. Реализация второго действия определяется с помощью других действий. Эти действия используются в следующих шагах учебника.

> [!NOTE]
> Чтобы скачать завершенную версию учебника, см. раздел [Windows Workflow Foundation (WF45), учебник "Приступая к работе"](https://go.microsoft.com/fwlink/?LinkID=248976).

## <a name="create-the-activity-library-project"></a>Создание проекта библиотеки действий

1. Откройте Visual Studio и выберите **New** > **проекта** из **файл** меню.

2. В **новый проект** диалогового окна в разделе **установленные** категорию **Visual C#** > **рабочего процесса** (или **Visual Basic** > **рабочего процесса**).

    > [!NOTE]
    > Если вы не видите **рабочего процесса** Категория шаблона, может потребоваться установить **Windows Workflow Foundation** компонент Visual Studio. Выберите **открыть установщик Visual Studio** ссылку в левой части **новый проект** диалоговое окно. В Visual Studio Installer, выберите **отдельные компоненты** вкладки. Затем в разделе **действия разработки** категорию **Windows Workflow Foundation** компонента. Выберите **изменить** для установки компонента.

3. Выберите **библиотеки действий** шаблона проекта. Тип `NumberGuessWorkflowActivities` в **имя** поле и нажмите кнопку **ОК**.

4. Щелкните правой кнопкой мыши **Activity1.xaml** в **обозревателе решений** и выберите **удалить**. Нажмите кнопку **ОК** для подтверждения.

## <a name="create-the-readint-activity"></a>Создание действия ReadInt

1. Выберите **Добавление нового элемента** из **проекта** меню.

2. В **установленные** > **общих элементов** выберите **рабочего процесса**. Выберите **действие кода** из **рабочего процесса** списка.

3. Тип `ReadInt` в **имя** поле и нажмите кнопку **добавить**.

4. Замените существующее определение `ReadInt` следующим определением.

     [!code-csharp[CFX_WF_GettingStarted#1](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_wf_gettingstarted/cs/readint.cs#1)]
     [!code-vb[CFX_WF_GettingStarted#1](~/samples/snippets/visualbasic/VS_Snippets_CFX/cfx_wf_gettingstarted/vb/readint.vb#1)]

    > [!NOTE]
    > Действие `ReadInt` является производным от <xref:System.Activities.NativeActivity%601>, а не от <xref:System.Activities.CodeActivity>, которое задается по умолчанию для шаблона действия кода. <xref:System.Activities.CodeActivity%601> можно использовать в том случае, если действие обеспечивает один результат, который предоставляется с помощью <xref:System.Activities.Activity%601.Result%2A> аргумент, но <xref:System.Activities.CodeActivity%601> не поддерживает использование закладок, поэтому <xref:System.Activities.NativeActivity%601> используется.

## <a name="create-the-prompt-activity"></a>Создание действия Prompt

1. Нажмите клавишу **Ctrl**+**Shift**+**B** для сборки проекта. При сборке проекта включается действие `ReadInt`, которое будет использоваться для построения пользовательского действия, начиная с этого шага.

2. Выберите **Добавление нового элемента** из **проекта** меню.

3. В **установленные** > **общих элементов** выберите **рабочего процесса**. Выберите **действия** из **рабочего процесса** списка.

4. Тип `Prompt` в **имя** поле и нажмите кнопку **добавить**.

5. Дважды щелкните **Prompt.xaml** в **обозревателе решений** чтобы отобразить его в конструкторе, если он еще не отображается.

6. Нажмите кнопку **аргументы** в нижнем левом углу конструктора действий для отображения **аргументы** области.

7. Нажмите кнопку **создать аргумент**.

8. Тип `BookmarkName` в **имя** выберите **в** из **направление** стрелку раскрывающегося списка выберите **строка** из **Тип аргумента** стрелку раскрывающегося списка и нажмите клавишу **ввод** чтобы сохранить аргумент.

9. Нажмите кнопку **создать аргумент**.

10. Тип `Result` в **имя** окно, в котором находится под только что добавленного `BookmarkName` аргумента выберите **Out** из **направление** раскрывающемся списке выберите **Int32** из **тип аргумента** стрелку раскрывающегося списка и нажмите клавишу **ввод**.

11. Нажмите кнопку **создать аргумент**.

12. Тип `Text` в **имя** выберите **в** из **направление** стрелку раскрывающегося списка выберите **строка** из **Тип аргумента** стрелку раскрывающегося списка и нажмите клавишу **ввод** чтобы сохранить аргумент.

     Эти три аргумента связаны с соответствующими аргументами действий <xref:System.Activities.Statements.WriteLine> и `ReadInt`, которые добавляются к действию `Prompt` на следующих этапах.

13. Нажмите кнопку **аргументы** в нижнем левом углу конструктора действий, чтобы закрыть **аргументы** области.

14. Перетащите **последовательности** действия из **поток управления** раздел **элементов** и сбросьте его в **Перетащите сюда действие** метку **Prompt** конструктора действий.

    > [!TIP]
    > Если **элементов** окно не отображается, выберите **элементов** из **представление** меню.

15. Перетащите **WriteLine** действия из **примитивы** раздел **элементов** и сбросьте его в **Перетащите сюда действие** метку **Последовательности** действия.

16. Привязать **текст** аргумент **WriteLine** действие **текст** аргумент **Prompt** действия, введя `Text` в **введите выражение C#** или **введите выражение VB** поле **свойства** окна, а затем нажмите клавишу **вкладке** ключ два раза. При этом окно элементов списка технологии IntelliSense закрывается, а значение свойства сохраняется посредством перемещения выбора вне свойства. Это свойство также можно задать, введя `Text` в **введите выражение C#** или **введите выражение VB** поле в самом действии.

    > [!TIP]
    > Если **окно "Свойства"** не отображается, выберите **окно "Свойства"** из **представление** меню.

17. Перетащите **ReadInt** действия из **NumberGuessWorkflowActivities** раздел **элементов** и поместите его **последовательности** действия, чтобы оно следовало **WriteLine** действия.

18. Привязать **BookmarkName** аргумент **ReadInt** действие **BookmarkName** аргумент **Prompt** действия, введя `BookmarkName` в **введите выражение VB** поле справа от **BookmarkName** аргумента в **окно "Свойства"**, а затем нажмите клавишу **Вкладке** два раза, чтобы закрыть окно элементов списка IntelliSense и сохранить свойство ключа.

19. Привязать **результат** аргумент **ReadInt** действие **результат** аргумент **Prompt** действия, введя `Result` в **введите выражение VB** поле справа от **результат** аргумента в **окно "Свойства"**, а затем нажмите клавишу **вкладке** ключа два раза.

20. Нажмите клавишу **Ctrl**+**Shift**+**B** для сборки решения.

## <a name="next-steps"></a>Следующие шаги

Инструкции по созданию рабочего процесса с помощью этих действий см. Далее в этом руководстве, [как: Создание рабочего процесса](how-to-create-a-workflow.md).

## <a name="see-also"></a>См. также

- <xref:System.Activities.CodeActivity>
- <xref:System.Activities.NativeActivity%601>
- [Разработка и реализация настраиваемых действий](designing-and-implementing-custom-activities.md)
- [Учебник по началу работы](getting-started-tutorial.md)
- [Практическое руководство. Создание рабочего процесса](how-to-create-a-workflow.md)
- [Использование ExpressionTextBox в пользовательском конструкторе действия](./samples/using-the-expressiontextbox-in-a-custom-activity-designer.md)