---
title: Практическое руководство. Создание действия
description: 'В этой статье показано, как создать два действия в Workflow Foundation: один, использующий код для реализации его логики и другой, определенный с помощью других действий.'
ms.date: 09/14/2018
dev_langs:
- csharp
- vb
ms.assetid: c09b1e99-21b5-4d96-9c04-ec31db3f4436
ms.openlocfilehash: c7610d8612eb944afa9c23e1bf2abceeb3a6d38b
ms.sourcegitcommit: a4cecb7389f02c27e412b743f9189bd2a6dea4d6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/14/2021
ms.locfileid: "98190771"
---
# <a name="how-to-create-an-activity"></a>Практическое руководство. Создание действия

Действия являются базовой единицей режима работы в [!INCLUDE[wf1](../../../includes/wf1-md.md)]. Логика выполнения действия может быть реализована в управляемом коде или с помощью других действий. В этом разделе показано создание двух действий. Первое действие - простое действие с использованием кода для реализации логики выполнения. Реализация второго действия определяется с помощью других действий. Эти действия используются в следующих шагах учебника.

## <a name="create-the-activity-library-project"></a>Создание проекта библиотеки действий

1. Откройте Visual Studio и выберите   >  в меню **файл** пункт создать **проект** .

2. В диалоговом окне **Новый проект** в разделе **установленная** Категория выберите   >  **Рабочий процесс** Visual C# (или **Visual Basic**  >  **Рабочий процесс**).

    > [!NOTE]
    > Если категория шаблон **рабочего процесса** не отображается, может потребоваться установить компонент **Windows Workflow Foundation** Visual Studio. Выберите ссылку **открыть Visual Studio Installer** в левой части диалогового окна **Новый проект** . В Visual Studio Installer выберите вкладку **отдельные компоненты** . Затем в категории **действия разработки** выберите компонент **Windows Workflow Foundation** . Нажмите кнопку **изменить** , чтобы установить компонент.

3. Выберите шаблон проекта **Библиотека действий** . Введите `NumberGuessWorkflowActivities` в поле **Имя** и нажмите кнопку **ОК**.

4. В **обозревателе решений** щелкните правой кнопкой мыши файл **Activity1.xaml** и выберите пункт **Удалить**. Нажмите кнопку **ОК** для подтверждения.

## <a name="create-the-readint-activity"></a>Создание действия ReadInt

1. В меню **проект** выберите команду **Добавить новый элемент** .

2. В узле **установленные**  >  **Общие элементы** выберите **Рабочий процесс**. Выберите **действие код** в списке **Рабочий процесс** .

3. Введите `ReadInt` в поле **Имя** и нажмите кнопку **Добавить**.

4. Замените существующее определение `ReadInt` следующим определением.

     [!code-csharp[CFX_WF_GettingStarted#1](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_wf_gettingstarted/cs/readint.cs#1)]
     [!code-vb[CFX_WF_GettingStarted#1](~/samples/snippets/visualbasic/VS_Snippets_CFX/cfx_wf_gettingstarted/vb/readint.vb#1)]

    > [!NOTE]
    > Действие `ReadInt` является производным от <xref:System.Activities.NativeActivity%601>, а не от <xref:System.Activities.CodeActivity>, которое задается по умолчанию для шаблона действия кода. <xref:System.Activities.CodeActivity%601> можно использовать, если действие возвращает один результат, который предоставляется с помощью аргумента <xref:System.Activities.Activity%601.Result%2A>. Однако <xref:System.Activities.CodeActivity%601> не поддерживает использование закладок, поэтому используется <xref:System.Activities.NativeActivity%601>.

## <a name="create-the-prompt-activity"></a>Создание действия Prompt

1. Нажмите клавиши **CTRL** + **SHIFT** + **B** , чтобы построить проект. При сборке проекта включается действие `ReadInt`, которое будет использоваться для построения пользовательского действия, начиная с этого шага.

2. В меню **проект** выберите команду **Добавить новый элемент** .

3. В узле **установленные**  >  **Общие элементы** выберите **Рабочий процесс**. В списке **Рабочий процесс** выберите пункт **Действие**.

4. Введите `Prompt` в поле **Имя** и нажмите кнопку **Добавить**.

5. Дважды щелкните **Prompt. XAML** в **Обозреватель решений** , чтобы отобразить его в конструкторе, если он еще не отображается.

6. В левом нижнем углу конструктора действий нажмите кнопку **Аргументы** для отображения панели **Аргументы**.

7. Нажмите кнопку **Создать аргумент**.

8. Введите в `BookmarkName` поле **имя** , выберите **в** раскрывающемся списке **направление** пункт **строка** из раскрывающегося списка **тип аргумента** и нажмите клавишу **Ввод** , чтобы сохранить аргумент.

9. Нажмите кнопку **Создать аргумент**.

10. Введите `Result` в поле **имя** , которое находится под только что добавленным `BookmarkName` аргументом, выберите пункт **выход** из раскрывающегося списка **направление** , выберите **Int32** из раскрывающегося списка **тип аргумента** и нажмите клавишу **Ввод**.

11. Нажмите кнопку **Создать аргумент**.

12. Введите в `Text` поле **имя** , выберите **в** раскрывающемся списке **направление** пункт **строка** из раскрывающегося списка **тип аргумента** и нажмите клавишу **Ввод** , чтобы сохранить аргумент.

     Эти три аргумента связаны с соответствующими аргументами действий <xref:System.Activities.Statements.WriteLine> и `ReadInt`, которые добавляются к действию `Prompt` на следующих этапах.

13. В левом нижнем углу конструктора действий нажмите кнопку **Аргументы**, чтобы закрыть панель **Аргументы**.

14. Перетащите действие **Sequence** из раздела **поток управления** на **панели элементов** и поместите его в метку **перетащите действие** в конструктор действий с **приглашением** .

    > [!TIP]
    > Если окно **Панель элементов** не отображается, выберите пункт **Панель элементов** в меню **Вид**.

15. Перетащите действие **WriteLine** из раздела **примитивы** на **панели элементов** и поместите его на метку **перетащите действие сюда** действие **последовательность** .

16. Привяжите **текстовый** аргумент действия **WriteLine** к **текстовому** аргументу действия **Prompt** . для этого введите `Text` в поле **Ввод выражения C#** или **введите выражение VB** в окне **Свойства** , а затем нажмите клавишу **Tab** два раза. При этом окно элементов списка технологии IntelliSense закрывается, а значение свойства сохраняется посредством перемещения выбора вне свойства. Это свойство также может быть установлено путем ввода `Text` в **выражение C#** или **ввода поля выражения VB** для самого действия.

    > [!TIP]
    > Если **окно Свойства** не отображается, в меню **вид** выберите пункт **окно свойств** .

17. Перетащите действие **ReadInt** из раздела **NumberGuessWorkflowActivities** на **панели элементов** и поместите его в действие **Sequence** , чтобы оно состоит из действия **WriteLine** .

18. Привяжите аргумент **BookmarkName** действия **ReadInt** к аргументу **BookmarkName** действия **Prompt** , введя `BookmarkName` в поле **введите выражение VB** справа от аргумента **BookmarkName** в **окне свойств**, а затем нажмите клавишу TAB два раза, чтобы закрыть окно **"** список членов IntelliSense" и сохранить свойство.

19. Привяжите **результирующий** аргумент действия **ReadInt** к аргументу **result** действия **Prompt** , введя `Result` в поле **введите выражение VB** справа от аргумента **result** в **окне Свойства**, а затем дважды нажмите клавишу **Tab** .

20. Нажмите клавиши **CTRL** + **SHIFT** + **B** , чтобы построить решение.

## <a name="next-steps"></a>Дальнейшие действия

Инструкции по созданию рабочего процесса с помощью этих действий см. в следующем шаге руководства, [инструкции. Создание рабочего процесса](how-to-create-a-workflow.md).

## <a name="see-also"></a>См. также

- <xref:System.Activities.CodeActivity>
- <xref:System.Activities.NativeActivity%601>
- [Разработка и реализация настраиваемых действий](designing-and-implementing-custom-activities.md)
- [Учебник по началу работы](getting-started-tutorial.md)
- [Практическое руководство. Создание рабочего процесса](how-to-create-a-workflow.md)
- [Использование ExpressionTextBox в пользовательском конструкторе действия](./samples/using-the-expressiontextbox-in-a-custom-activity-designer.md)
