---
title: Практическое руководство. Создание службы рабочих процессов, использующей существующий контракт службы
ms.date: 03/30/2017
ms.assetid: 11d11b59-acc4-48bf-8e4b-e97b516aa0a9
ms.openlocfilehash: 6d7fa8c9faa84efc84243387cd27aa264f6155eb
ms.sourcegitcommit: 005980b14629dfc193ff6cdc040800bc75e0a5a5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/14/2019
ms.locfileid: "70989626"
---
# <a name="how-to-create-a-workflow-service-that-consumes-an-existing-service-contract"></a>Практическое руководство. Создание службы рабочих процессов, использующей существующий контракт службы
.NET Framework 4,5 обеспечивает лучшую интеграцию между веб-службами и рабочими процессами в виде разработки рабочих процессов с помощью контрактов. Средство разработки рабочих процессов на основе контракта позволяет создать контракт в Code First. Затем это средство автоматически создает в области элементов шаблон действия для каждой операции в контракте.  
  
> [!NOTE]
> Этот раздел содержит пошаговые инструкции по созданию службы рабочих процессов на основе контракта. Дополнительные сведения о разработке службы рабочих процессов в первую очередь см. в разделе [разработка первой службы рабочих процессов](contract-first-workflow-service-development.md)на основе контрактов.  
  
### <a name="creating-the-workflow-project"></a>Создание проекта рабочего процесса  
  
1. В Visual Studio выберите **файл**, **создать проект**. Выберите узел **WCF** в **C#** узле в дереве **шаблонов** и выберите шаблон **приложение службы рабочего процесса WCF** .  
  
2. Присвойте новому проекту `ContractFirst` имя и нажмите кнопку **ОК**.  
  
### <a name="creating-the-service-contract"></a>Создание контракта службы  
  
1. Щелкните правой кнопкой мыши проект в **Обозреватель решений** и выберите **Добавить**, **новый элемент...** . Выберите узел **кода** слева и шаблон **класса** справа. Присвойте новому классу `IBookService` имя и нажмите кнопку **ОК**.  
  
2. В верхней части появившегося окна кода добавьте в `System.Servicemodel` инструкцию Using.  
  
    ```csharp  
    using System.ServiceModel;  
    ```  
  
3. Измените образец определения класса на следующее определение интерфейса.  
  
    ```csharp  
    [ServiceContract]  
        public interface IBookService  
        {  
            [OperationContract]  
            void Buy(string bookName);  
  
            [OperationContract(IsOneWay=true)]  
            void Checkout();  
        }  
    ```  
  
4. Постройте проект, нажав клавиши **CTRL + SHIFT + B**.  
  
### <a name="importing-the-service-contract"></a>Импорт контракта службы  
  
1. Щелкните правой кнопкой мыши проект в **Обозреватель решений** и выберите пункт **Импорт контракта службы**. В разделе  **\<текущий проект >** откройте все подузлы и выберите **ибуксервице**. Нажмите кнопку **ОК**.  
  
2. Откроется диалоговое окно с сообщением, что операция была завершена успешно, а созданные действия появятся в области элементов после сборки проекта. Нажмите кнопку **ОК**.  
  
3. Постройте проект, нажав клавиши **CTRL + SHIFT + B**, чтобы импортированные действия отображались на панели элементов.  
  
4. В **Обозреватель решений**откройте Service1. xamlx. Служба рабочего процесса появится в конструкторе.  
  
5. Выберите действие **последовательности** . В окно свойств щелкните **...** в свойстве **имплементедконтракт** . В открывшемся окне **Редактор коллекции типов** щелкните раскрывающийся список **Тип** и выберите пункт **Обзор для типов...** операции. В диалоговом окне **Обзор и выбор типа .NET** в разделе  **\<текущий проект >** откройте все подузлы и выберите **ибуксервице**. Нажмите кнопку **ОК**. В диалоговом окне **Редактор коллекции типов** нажмите кнопку **ОК**.  
  
6. Выберите и удалите действия **действия ReceiveRequest** и **SendResponse** .  
  
7. Перетащите действие **Buy_ReceiveAndSendReply** и **Checkout_Receive** из области элементов в действие **Последовательная служба** .
