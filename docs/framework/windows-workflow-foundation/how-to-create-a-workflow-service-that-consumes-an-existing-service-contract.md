---
title: Практическое руководство. Создание службы рабочих процессов, использующей существующий контракт службы
ms.date: 03/30/2017
ms.assetid: 11d11b59-acc4-48bf-8e4b-e97b516aa0a9
ms.openlocfilehash: c2ca9c349718c3939d74d052ff0ed448879cd045
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61945578"
---
# <a name="how-to-create-a-workflow-service-that-consumes-an-existing-service-contract"></a>Практическое руководство. Создание службы рабочих процессов, использующей существующий контракт службы
[!INCLUDE[net_v45](../../../includes/net-v45-md.md)] отличается улучшенной интеграцией между веб-службами и рабочими процессами в форме разработки рабочего процесса на основе контракта. Средство разработки рабочих процессов на основе контракта позволяет создать контракт в Code First. Затем это средство автоматически создает в области элементов шаблон действия для каждой операции в контракте.  
  
> [!NOTE]
>  Этот раздел содержит пошаговые инструкции по созданию службы рабочих процессов на основе контракта. Дополнительные сведения о разработке службы рабочего процесса первого контракта, см. в разделе [разработки службы рабочего процесса первого контракта](contract-first-workflow-service-development.md).  
  
### <a name="creating-the-workflow-project"></a>Создание проекта рабочего процесса  
  
1. В Visual Studio выберите **файл**, **новый проект**. Выберите **WCF** узле **C#** узел в **шаблоны** дерева и выберите **приложение службы рабочего процесса WCF** шаблон.  
  
2. Назовите новый проект `ContractFirst` и нажмите кнопку **ОК**.  
  
### <a name="creating-the-service-contract"></a>Создание контракта службы  
  
1. Щелкните правой кнопкой мыши проект в **обозревателе решений** и выберите **добавить**, **новый элемент...** . Выберите **кода** узел с левой стороны экрана и **класс** шаблон в правой части. Назовите новый класс `IBookService` и нажмите кнопку **ОК**.  
  
2. В верхней части появившегося окна кода добавьте в `System.Servicemodel` инструкцию Using.  
  
    ```  
    using System.ServiceModel;  
    ```  
  
3. Измените образец определения класса на следующее определение интерфейса.  
  
    ```  
    [ServiceContract]  
        public interface IBookService  
        {  
            [OperationContract]  
            void Buy(string bookName);  
  
            [OperationContract(IsOneWay=true)]  
            void Checkout();  
        }  
    ```  
  
4. Постройте проект, нажав клавишу **Ctrl + Shift + B**.  
  
### <a name="importing-the-service-contract"></a>Импорт контракта службы  
  
1. Щелкните правой кнопкой мыши проект в **обозревателе решений** и выберите **Импорт контракта службы**. В разделе  **\<текущий проект >** откройте все подузлы и выберите **IBookService**. Нажмите кнопку **ОК**.  
  
2. Откроется диалоговое окно с сообщением, что операция была завершена успешно, а созданные действия появятся в области элементов после сборки проекта. Нажмите кнопку **ОК**.  
  
3. Постройте проект, нажав клавишу **Ctrl + Shift + B**так, чтобы импортированные действия отобразились в области элементов.  
  
4. В **обозревателе решений**, откройте файл Service1.xamlx. Служба рабочего процесса появится в конструкторе.  
  
5. Выберите **последовательности** действия. В окне «Свойства» щелкните **...** кнопки в **ImplementedContract** свойство. В **редактор коллекции типов** щелкните в появившемся окне **тип** раскрывающийся список и выберите **Выбор типов...** запись. В **Обзор и Выбор типа .NET** диалогового окна в разделе  **\<текущий проект >** откройте все подузлы и выберите **IBookService**. Нажмите кнопку **ОК**. В **редактор коллекции типов** диалоговое окно, нажмите кнопку **ОК**.  
  
6. Выберите и удалите **ReceiveRequest** и **SendResponse** действий.  
  
7. Из панели элементов перетащите **Buy_ReceiveAndSendReply** и **Checkout_Receive** действия на **последовательная служба** действия.
