---
title: Практическое руководство. Создание рабочего процесса c блок-схемой
description: В этой статье описывается создание рабочего процесса, который использует как встроенные действия, так и пользовательские действия из предыдущей статьи.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 185d7aea-68a6-4bd8-adde-45050f33170a
ms.openlocfilehash: eb30a3a21ffc4cffe64d2f5d0bc741728f1ea87d
ms.sourcegitcommit: a4cecb7389f02c27e412b743f9189bd2a6dea4d6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/14/2021
ms.locfileid: "98190485"
---
# <a name="how-to-create-a-flowchart-workflow"></a>Практическое руководство. Создание рабочего процесса c блок-схемой

Рабочие процессы могут создаваться как из встроенных, так и из пользовательских действий. В этом разделе описывается создание рабочего процесса, который использует как встроенные действия, такие как <xref:System.Activities.Statements.Flowchart> действие, так и пользовательские действия из предыдущего раздела [инструкции. Создание действия](how-to-create-an-activity.md) . Рабочий процесс моделирует игру по угадыванию числа.  
  
> [!NOTE]
> Каждый раздел в учебнике «Приступая к работе» построен на основе предыдущих разделов. Для выполнения этой статьи сначала необходимо выполнить действия [по созданию действия](how-to-create-an-activity.md).  
  
### <a name="to-create-the-workflow"></a>Создание рабочего процесса  
  
1. Щелкните правой кнопкой мыши **NumberGuessWorkflowActivities** в **Обозреватель решений** и выберите **добавить**, **новый элемент**.  
  
2. В узле **установленные** **Общие элементы** выберите **Рабочий процесс**. В списке **Рабочий процесс** выберите пункт **Действие**.  
  
3. Введите `FlowchartNumberGuessWorkflow` в поле **имя** и нажмите кнопку **добавить**.  
  
4. Перетащите действие **блок-схема** из **раздела блок** -схема **области элементов** и поместите его в метку **Перетащите сюда действие** в рабочей области конструктора рабочих процессов.  
  
### <a name="to-create-the-workflow-variables-and-arguments"></a>Создание переменных и аргументов рабочего процесса  
  
1. Дважды щелкните **FlowchartNumberGuessWorkflow. XAML** в **Обозреватель решений** , чтобы отобразить рабочий процесс в конструкторе, если он еще не отображается.  
  
2. Щелкните **аргументы** в левой нижней части конструктора рабочих процессов, чтобы отобразить панель **аргументы** .  
  
3. Нажмите кнопку **Создать аргумент**.  
  
4. Введите в `MaxNumber` поле **имя** , выберите **в** раскрывающемся списке **направление** значение **Int32** , а затем нажмите клавишу ВВОД  , чтобы сохранить аргумент.  
  
5. Нажмите кнопку **Создать аргумент**.  
  
6. Введите `Turns` в поле **имя** , которое находится ниже вновь добавленного `MaxNumber` аргумента,  выберите из раскрывающегося списка **направление** , выберите **Int32** из раскрывающегося списка **тип аргумента** и нажмите клавишу ВВОД.  
  
7. В левом нижнем углу конструктора действий нажмите кнопку **Аргументы**, чтобы закрыть панель **Аргументы**.  
  
8. Щелкните **переменные** в левой нижней части конструктора рабочих процессов, чтобы отобразить панель **переменные** .  
  
9. Нажмите кнопку **Создать переменную**.  
  
    > [!TIP]
    > Если поле **создать переменную** не отображается, щелкните <xref:System.Activities.Statements.Flowchart> действие в области конструктора рабочих процессов, чтобы выбрать его.  
  
10. Введите `Guess` в поле **имя** , выберите **Int32** в раскрывающемся списке **тип переменной** и нажмите клавишу ВВОД, чтобы сохранить переменную.  
  
11. Нажмите кнопку **Создать переменную**.  
  
12. Введите `Target` в поле **имя** , выберите **Int32** в раскрывающемся списке **тип переменной** и нажмите клавишу ВВОД, чтобы сохранить переменную.  
  
13. В левом нижнем углу конструктора действий нажмите кнопку **Переменные**, чтобы закрыть панель **Переменные**.  
  
### <a name="to-add-the-workflow-activities"></a>Добавление действий рабочего процесса  
  
1. Перетащите действие **Assign (назначение** ) из раздела **примитивы** **области элементов** и наведите его на **начальный** узел, расположенный в верхней части блок-схемы. Когда действие **Assign** находится над **начальным** узлом, вокруг **начального** узла появятся три треугольника. Удалите действие **Assign** на треугольнике, расположенном непосредственно под **начальным** узлом. Это позволит связать два элемента вместе и назначить действие **Assign** в качестве первого действия в блок-схеме.  
  
    > [!NOTE]
    > Действия можно также указывать в качестве начального действия в рабочем процессе, вручную связав их с действием в начальном узле. Для этого наведите указатель мыши на **начальный** узел, щелкните один из прямоугольников, отображаемых при наведении указателя мыши на **начальный** узел, и перетащите строку подключения вниз к нужному действию и поместите ее на один из отображаемых прямоугольников. Вы также можете назначить действие в качестве начального действия, щелкнув его правой кнопкой мыши и выбрав пункт **задать в качестве начального узла**.  
  
2. Введите `Target` в поле **to** и следующее выражение в поле **введите выражение C#** или **введите выражение VB** .  
  
    ```vb  
    New System.Random().Next(1, MaxNumber + 1)  
    ```  
  
    ```csharp  
    new System.Random().Next(1, MaxNumber + 1)  
    ```  
  
    > [!TIP]
    > Если окно **Панель элементов** не отображается, выберите пункт **Панель элементов** в меню **Вид**.  
  
3. Перетащите действие **запрос** из раздела **NumberGuessWorkflowActivities** на **панели элементов**, поместите его под действием **Assign (назначение** ) из предыдущего шага и подключите действие **Prompt** к действию **Assign** . Соединить два действия можно тремя способами. Первый способ — подключить их по мере удаления действия **Prompt** в рабочем процессе. При перетаскивании действия **Prompt** в рабочий процесс наведите его на действие Assign ( **назначить** ) и поместите его на один из четырех треугольников, отображаемых, когда действие **запроса** находится над действием **Assign (назначить** ). Второй способ — удалить действие **Prompt** в рабочем процессе в нужном месте. Затем наведите указатель мыши на действие **Assign (назначение** ) и перетащите один из прямоугольников, отображаемых в действие **Prompt** . Перетащите указатель мыши, чтобы соединяющая линия из действия **назначить** подключаться к одному из прямоугольников действия **запроса** , а затем отпустите кнопку мыши. Третий способ очень похож на первый, за исключением того, что вместо того, чтобы перетаскивать действие **Prompt** из **панели элементов**, перетащите его из своего расположения в рабочей области конструктора рабочих процессов, наведите его на действие **Assign (назначить** ) и поместите его на один из появившихся треугольников.  
  
4. В **окне Свойства** действия **Prompt** введите, `"EnterGuess"` включая кавычки, в поле значение свойства **BookmarkName** . Введите `Guess` в поле значение свойства **результата** и введите следующее выражение в поле свойства **текста** .  
  
    ```vb  
    "Please enter a number between 1 and " & MaxNumber  
    ```  
  
    ```csharp  
    "Please enter a number between 1 and " + MaxNumber  
    ```  
  
    > [!TIP]
    > Если **окно Свойства** не отображается, в меню **вид** выберите пункт **окно свойств** .  
  
5. Перетащите действие **Assign (назначение** ) из раздела **примитивы** **области элементов** и подключите его с помощью одного из методов, описанных в предыдущем шаге, чтобы он был ниже действия **Prompt** .  
  
6. Введите `Turns` в поле **Кому** и `Turns + 1` в поле **введите выражение C#**  или **введите выражение VB** .  
  
7. Перетащите **FlowDecision** из раздела **блок-схема** области **элементов** и подключите его под действием **Assign (назначение** ). В **окне Свойства** введите следующее выражение в поле значение свойства **Condition** .  
  
    ```vb  
    Guess = Target  
    ```  
  
    ```csharp  
    Guess == Target  
    ```  
  
8. Перетащите еще одно действие **FlowDecision** из **области элементов** и поместите его под первым. Соедините два действия, перетащив прямоугольник, помеченный как " **ложь** ", в верхнем действии **FlowDecision** на прямоугольник в верхней части второго действия **FlowDecision** .  
  
    > [!TIP]
    > Если вы не видите метки **true** и **false** в **FlowDecision**, наведите указатель мыши на **FlowDecision**.  
  
9. Щелкните второе действие **FlowDecision** , чтобы выбрать его. В **окне Свойства** введите следующее выражение в поле значение свойства **Condition** .  
  
    ```text
    Guess < Target
    ```  
  
10. Перетащите два действия **WriteLine** из раздела **примитивы** на **панели элементов** и расположите их так, чтобы они были параллельно под двумя действиями **FlowDecision** . Соедините **истинное** действие нижнего действия **FlowDecision** с левым действием **WriteLine** и действием **false** с крайним правым действием **WriteLine** .  
  
11. Щелкните левое действие **WriteLine** , чтобы выбрать его, и введите следующее выражение в поле значение свойства **текста** в **окне Свойства**.  
  
    ```text
    "Your guess is too low."  
    ```  
  
12. Соедините команду **WriteLine** с левой стороной действия **Prompt** , находящейся над ним.  
  
13. Щелкните правой кнопкой мыши действие **WriteLine** , чтобы выбрать его, и введите следующее выражение в поле значение свойства **текста** в **окне Свойства**.  
  
    ```text
    "Your guess is too high."  
    ```  
  
14. Соедините действие **WriteLine** с правой стороны действия **Prompt** над ним.  
  
     В следующем примере показан завершенный рабочий процесс.  
  
     ![Схема, на которой показана завершенная блок-схема Windows Workflow Foundation.](./media/how-to-create-a-flowchart-workflow/completed-windows-workflow-flowchart.png)  
  
### <a name="to-build-the-workflow"></a>Построение рабочего процесса  
  
1. Чтобы построить решение, нажмите CTRL+SHIFT+B.  
  
     Инструкции по запуску рабочего процесса см. в следующем разделе [: запуск рабочего процесса](how-to-run-a-workflow.md). Если вы уже выполнили [инструкции](how-to-run-a-workflow.md) по выполнению шага рабочего процесса с другим стилем рабочего процесса и хотите запустить его с помощью рабочего процесса блок-схемы из этого шага, перейдите к разделу [Создание и запуск приложения](how-to-run-a-workflow.md#BKMK_ToRunTheApplication) , [посвященного запуску рабочего процесса](how-to-run-a-workflow.md).  
  
## <a name="see-also"></a>См. также

- <xref:System.Activities.Statements.Flowchart>
- <xref:System.Activities.Statements.FlowDecision>
- [Программирование в Windows Workflow Foundation](programming.md)
- [Разработка рабочих процессов](designing-workflows.md)
- [Учебник по началу работы](getting-started-tutorial.md)
- [Практическое руководство. Создание действия](how-to-create-an-activity.md)
- [Практическое руководство. Запуск рабочего процесса](how-to-run-a-workflow.md)
