---
title: Практическое руководство. Создание последовательного рабочего процесса
description: В этой статье создается рабочий процесс, использующий как встроенные действия, такие как действие Sequence, так и пользовательские действия.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 5280e816-ae17-48c4-8de0-a1e6895dd8f0
ms.openlocfilehash: 0c47290d11770a094fb09bcb4dc34aee1e4371a9
ms.sourcegitcommit: a4cecb7389f02c27e412b743f9189bd2a6dea4d6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/14/2021
ms.locfileid: "98190524"
---
# <a name="how-to-create-a-sequential-workflow"></a>Практическое руководство. Создание последовательного рабочего процесса

Рабочие процессы могут создаваться как из встроенных, так и из пользовательских действий. В этом разделе описывается создание рабочего процесса, который использует как встроенные действия, такие как <xref:System.Activities.Statements.Sequence> действие, так и пользовательские действия из предыдущего раздела [инструкции. Создание действия](how-to-create-an-activity.md) . Рабочий процесс моделирует игру по угадыванию числа.

> [!NOTE]
> Каждый раздел в учебнике «Приступая к работе» построен на основе предыдущих разделов. Для выполнения этой статьи сначала необходимо выполнить действия [по созданию действия](how-to-create-an-activity.md).

## <a name="to-create-the-workflow"></a>Создание рабочего процесса

1. Щелкните правой кнопкой мыши **NumberGuessWorkflowActivities** в **Обозреватель решений** и выберите **добавить**, **новый элемент**.

2. В узле **установленные** **Общие элементы** выберите **Рабочий процесс**. В списке **Рабочий процесс** выберите пункт **Действие**.

3. Введите `SequentialNumberGuessWorkflow` в поле **имя** и нажмите кнопку **добавить**.

4. Перетащите действие **Sequence** из раздела **поток управления** на **панели элементов** и поместите его на метку **перетащите действие сюда** в рабочей области конструктора рабочих процессов.

## <a name="to-create-the-workflow-variables-and-arguments"></a>Создание переменных и аргументов рабочего процесса

1. Дважды щелкните **SequentialNumberGuessWorkflow. XAML** в **Обозреватель решений** , чтобы отобразить рабочий процесс в конструкторе, если он еще не отображается.

2. Щелкните **аргументы** в левой нижней части конструктора рабочих процессов, чтобы отобразить панель **аргументы** .

3. Нажмите кнопку **Создать аргумент**.

4. Введите в `MaxNumber` поле **имя** , выберите **в** раскрывающемся списке **направление** значение **Int32** , а затем нажмите клавишу ВВОД  , чтобы сохранить аргумент.

5. Нажмите кнопку **Создать аргумент**.

6. Введите `Turns` в поле **имя** , которое находится ниже вновь добавленного `MaxNumber` аргумента,  выберите из раскрывающегося списка **направление** , выберите **Int32** из раскрывающегося списка **тип аргумента** и нажмите клавишу ВВОД.

7. В левом нижнем углу конструктора действий нажмите кнопку **Аргументы**, чтобы закрыть панель **Аргументы**.

8. Щелкните **переменные** в левой нижней части конструктора рабочих процессов, чтобы отобразить панель **переменные** .

9. Нажмите кнопку **Создать переменную**.

    > [!TIP]
    > Если поле **создать переменную** не отображается, щелкните действие **последовательностей** в области конструктора рабочих процессов, чтобы выбрать его.

10. Введите `Guess` в поле **имя** , выберите **Int32** в раскрывающемся списке **тип переменной** и нажмите клавишу ВВОД, чтобы сохранить переменную.

11. Нажмите кнопку **Создать переменную**.

12. Введите `Target` в поле **имя** , выберите **Int32** в раскрывающемся списке **тип переменной** и нажмите клавишу ВВОД, чтобы сохранить переменную.

13. В левом нижнем углу конструктора действий нажмите кнопку **Переменные**, чтобы закрыть панель **Переменные**.

## <a name="to-add-the-workflow-activities"></a>Добавление действий рабочего процесса

1. Перетащите действие **Assign (назначение** ) из раздела **примитивы** на **панели элементов** и поместите его в действие **Sequence** . Введите `Target` в поле **to** и следующее выражение в поле **введите выражение C#** или **введите выражение VB** .

    ```vb
    New System.Random().Next(1, MaxNumber + 1)
    ```

    ```csharp
    new System.Random().Next(1, MaxNumber + 1)
    ```

    > [!TIP]
    > Если окно **Панель элементов** не отображается, выберите пункт **Панель элементов** в меню **Вид**.

2. Перетащите действие **DoWhile** из раздела **поток управления** на **панели элементов** и поместите его в рабочий процесс, чтобы он был ниже действия Assign ( **назначить** ).

3. Введите следующее выражение в поле значения свойства **Condition** действия **DoWhile** .

    ```vb
    Guess <> Target
    ```

    ```csharp
    Guess != Target
    ```

     Действие <xref:System.Activities.Statements.DoWhile> выполняет дочерние действия, а затем выполняет оценку своего условия <xref:System.Activities.Statements.DoWhile.Condition%2A>. Если <xref:System.Activities.Statements.DoWhile.Condition%2A> имеет значение `True`, то действия в <xref:System.Activities.Statements.DoWhile> выполняются повторно. В этом примере проверяется догадка пользователя и <xref:System.Activities.Statements.DoWhile> продолжается до тех пор, пока догадка не будет правильной.

4. Перетащите действие **запрос** из раздела **NumberGuessWorkflowActivities** на **панели элементов** и поместите его в действие **DoWhile** из предыдущего шага.

5. В **окне Свойства** введите, `"EnterGuess"` включая кавычки, в поле значение свойства **BookmarkName** для действия **Prompt** . Введите `Guess` в поле значение свойства **результата** и введите следующее выражение в поле свойства **текста** .

    ```vb
    "Please enter a number between 1 and " & MaxNumber
    ```

    ```csharp
    "Please enter a number between 1 and " + MaxNumber
    ```

    > [!TIP]
    > Если **окно Свойства** не отображается, в меню **вид** выберите пункт **окно свойств** .

6. Перетащите действие **Assign (назначение** ) из раздела **примитивы** на **панели элементов** и поместите его в действие **DoWhile** , чтобы оно применяно к действию **Prompt** .

    > [!NOTE]
    > При удалении действия **Assign (назначение** ) Обратите внимание на то, как конструктор рабочих процессов автоматически добавляет действие **Sequence** , которое содержит как действие **Prompt** , так и вновь добавленное действие **назначение** .

7. Введите `Turns` в поле **Кому** и `Turns + 1` в поле **введите выражение C#** или **введите выражение VB** .

8. Перетащите действие **If** из раздела **поток управления** на **панели элементов** и поместите его в действие **Sequence** , чтобы оно применялись к вновь добавленному действию **Assign** .

9. Введите следующее выражение в поле значение свойства **Condition** действия **If** .

    ```vb
    Guess <> Target
    ```

    ```csharp
    Guess != Target
    ```

10. Перетащите другой элемент, **Если** действие находится в разделе **поток управления** **области элементов** , и поместите его в раздел **then** первого действия **If** .

11. Введите следующее выражение в поле значение свойства условия **для действия** ,  добавленного в действие.

    ```text
    Guess < Target
    ```

12. Перетащите два действия **WriteLine** из раздела **примитивы** на **панели элементов** и поместите их так, чтобы они находящегося в разделе **then** добавленного действия **If** , а другой — в разделе **else** .

13. Щелкните действие **WriteLine** в разделе **then (затем** ), чтобы выбрать его, и введите следующее выражение в поле значение свойства **текста** .

    ```text
    "Your guess is too low."
    ```

14. Щелкните действие **WriteLine** в разделе **else** , чтобы выбрать его, и введите следующее выражение в поле значение свойства **текста** .

    ```text
    "Your guess is too high."
    ```

     В следующем примере показан готовый рабочий процесс.

     ![Снимок экрана, показывающий завершенный последовательный рабочий процесс.](./media/how-to-create-a-sequential-workflow/complete-sequential-workflow.jpg)

## <a name="to-build-the-workflow"></a>Построение рабочего процесса

1. Чтобы построить решение, нажмите CTRL+SHIFT+B.

     Инструкции по запуску рабочего процесса см. в следующем разделе [: запуск рабочего процесса](how-to-run-a-workflow.md). Если вы уже выполнили [инструкции](how-to-run-a-workflow.md) по выполнению шага рабочего процесса с другим стилем рабочего процесса и хотите запустить его с помощью последовательного рабочего процесса из этого шага, перейдите к разделу [Создание и запуск приложения](how-to-run-a-workflow.md#BKMK_ToRunTheApplication) , [посвященного запуску рабочего процесса](how-to-run-a-workflow.md).

## <a name="see-also"></a>См. также

- <xref:System.Activities.Statements.Flowchart>
- <xref:System.Activities.Statements.FlowDecision>
- [Программирование в Windows Workflow Foundation](programming.md)
- [Разработка рабочих процессов](designing-workflows.md)
- [Учебник по началу работы](getting-started-tutorial.md)
- [Практическое руководство. Создание действия](how-to-create-an-activity.md)
- [Практическое руководство. Запуск рабочего процесса](how-to-run-a-workflow.md)
