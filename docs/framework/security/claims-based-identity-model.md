---
title: Модель удостоверений, основанных на утверждениях
ms.date: 03/30/2017
ms.assetid: 4a96a9af-d980-43be-bf91-341a23401431
author: BrucePerlerMS
ms.openlocfilehash: 3313b2ad36260415d0ac505e01523dd999f85424
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2019
ms.locfileid: "59345876"
---
# <a name="claims-based-identity-model"></a><span data-ttu-id="c0b65-102">Модель удостоверений, основанных на утверждениях</span><span class="sxs-lookup"><span data-stu-id="c0b65-102">Claims-Based Identity Model</span></span>
<span data-ttu-id="c0b65-103">При создании приложения, поддерживающего утверждения, удостоверение пользователя представлено в данном приложении в виде набора утверждений.</span><span class="sxs-lookup"><span data-stu-id="c0b65-103">When you build claims-aware applications, the user identity is represented in your application as a set of claims.</span></span> <span data-ttu-id="c0b65-104">Одно утверждение может быть имя пользователя, другой может быть адрес электронной почты.</span><span class="sxs-lookup"><span data-stu-id="c0b65-104">One claim could be the user’s name, another might be an email address.</span></span> <span data-ttu-id="c0b65-105">Основная идея заключается в настройке внешней системы удостоверений таким образом, чтобы она предоставляла приложению всю необходимую информацию о пользователе при каждом его запросе с криптографическим подтверждением того, что полученные данные удостоверения поступили из надежного источника.</span><span class="sxs-lookup"><span data-stu-id="c0b65-105">The idea is that an external identity system is configured to give your application everything it needs to know about the user with each request she makes, along with cryptographic assurance that the identity data you receive comes from a trusted source.</span></span>  
  
 <span data-ttu-id="c0b65-106">Эта модель значительно упрощает процесс единого входа, а ваши приложения больше не несут ответственности за выполнение следующих задач:</span><span class="sxs-lookup"><span data-stu-id="c0b65-106">Under this model, single sign-on is much easier to achieve, and your application is no longer responsible for the following:</span></span>  
  
-   <span data-ttu-id="c0b65-107">Аутентификация пользователей.</span><span class="sxs-lookup"><span data-stu-id="c0b65-107">Authenticating users.</span></span>  
  
-   <span data-ttu-id="c0b65-108">Сохранение учетных записей и паролей пользователей.</span><span class="sxs-lookup"><span data-stu-id="c0b65-108">Storing user accounts and passwords.</span></span>  
  
-   <span data-ttu-id="c0b65-109">Поиск сведений об удостоверении пользователя в корпоративных каталогах.</span><span class="sxs-lookup"><span data-stu-id="c0b65-109">Calling to enterprise directories to look up user identity details.</span></span>  
  
-   <span data-ttu-id="c0b65-110">Интеграция с системами удостоверений других платформ или компаний.</span><span class="sxs-lookup"><span data-stu-id="c0b65-110">Integrating with identity systems from other platforms or companies.</span></span>  
  
 <span data-ttu-id="c0b65-111">Согласно этой модели приложение принимает решения, связанные с удостоверениями, на основе утверждений, предоставленных системой, которая выполнила аутентификацию пользователя.</span><span class="sxs-lookup"><span data-stu-id="c0b65-111">Under this model, your application makes identity-related decisions based on claims supplied by the system that authenticated your user.</span></span> <span data-ttu-id="c0b65-112">Решение может быть любым: от простой персонализации приложения путем добавления имени пользователя до предоставления пользователю авторизации для доступа к более ценным функциям и ресурсам приложения.</span><span class="sxs-lookup"><span data-stu-id="c0b65-112">This could be anything from simple application personalization with the user’s first name, to authorizing the user to access higher valued features and resources in your application.</span></span>  
  
 <span data-ttu-id="c0b65-113">В данном разделе содержатся следующие сведения:</span><span class="sxs-lookup"><span data-stu-id="c0b65-113">This topic provides the following information:</span></span>  
  
-   [<span data-ttu-id="c0b65-114">Вводные сведения об удостоверениях на основе утверждений</span><span class="sxs-lookup"><span data-stu-id="c0b65-114">Introduction to Claims-Based Identity</span></span>](../../../docs/framework/security/claims-based-identity-model.md#BKMK_1)  
  
-   [<span data-ttu-id="c0b65-115">Базовый сценарий для модели удостоверений на основе утверждений</span><span class="sxs-lookup"><span data-stu-id="c0b65-115">Basic Scenario for a Claims-Based Identity Model</span></span>](../../../docs/framework/security/claims-based-identity-model.md#BKMK_2)  
  
<a name="BKMK_1"></a>   
## <a name="introduction-to-claims-based-identity"></a><span data-ttu-id="c0b65-116">Вводные сведения об удостоверениях на основе утверждений</span><span class="sxs-lookup"><span data-stu-id="c0b65-116">Introduction to Claims-Based Identity</span></span>  
 <span data-ttu-id="c0b65-117">Следующие термины и понятия помогут вам разобраться в новой архитектуре удостоверений.</span><span class="sxs-lookup"><span data-stu-id="c0b65-117">The following terminology and concepts can help you understand this new architecture for identity.</span></span>  
  
### <a name="identity"></a><span data-ttu-id="c0b65-118">идентификации</span><span class="sxs-lookup"><span data-stu-id="c0b65-118">Identity</span></span>  
 <span data-ttu-id="c0b65-119">Для описания модели программирования, используемой в Windows Identity Foundation (WIF), мы будем использовать термин "удостоверение", представляющий набор атрибутов, описывающий пользователя или другую сущность в системе, которую требуется защитить.</span><span class="sxs-lookup"><span data-stu-id="c0b65-119">For the purposes of describing the programming model in Windows Identity Foundation (WIF), we will use the term "identity" to represent a set of attributes that describe a user or some other entity in a system that you want to secure.</span></span>  
  
### <a name="claim"></a><span data-ttu-id="c0b65-120">Утверждение</span><span class="sxs-lookup"><span data-stu-id="c0b65-120">Claim</span></span>  
 <span data-ttu-id="c0b65-121">Например, утверждение, что фрагмент данных идентификации, такие как имя, адрес электронной почты, возраст, членство в роли Sales.</span><span class="sxs-lookup"><span data-stu-id="c0b65-121">Think of a claim as a piece of identity information such as name, email address, age, membership in the Sales role.</span></span> <span data-ttu-id="c0b65-122">Чем больше утверждений получит приложение, тем больше вы узнаете о пользователе.</span><span class="sxs-lookup"><span data-stu-id="c0b65-122">The more claims your application receives, the more you’ll know about your user.</span></span> <span data-ttu-id="c0b65-123">Возможно, вам неясно, почему такие данные названы "утверждениями", а не "атрибутами", как их обычно называют в описаниях корпоративных каталогов.</span><span class="sxs-lookup"><span data-stu-id="c0b65-123">You may be wondering why these are called "claims," rather than "attributes," as is commonly used in describing enterprise directories.</span></span> <span data-ttu-id="c0b65-124">Этот термин был выбран в связи с методом предоставления соответствующих данных.</span><span class="sxs-lookup"><span data-stu-id="c0b65-124">The reason has to do with the delivery method.</span></span> <span data-ttu-id="c0b65-125">Согласно этой модели приложение не ищет атрибуты пользователя в каталоге.</span><span class="sxs-lookup"><span data-stu-id="c0b65-125">In this model, your application doesn’t look up user attributes in a directory.</span></span> <span data-ttu-id="c0b65-126">Вместо этого пользователь предоставляет приложению утверждения, а приложение их исследует.</span><span class="sxs-lookup"><span data-stu-id="c0b65-126">Instead, the user delivers claims to your application, and your application examines them.</span></span> <span data-ttu-id="c0b65-127">Каждое утверждение создает поставщик, поэтому утверждению следует доверять только в той степени, в которой вы доверяете поставщику.</span><span class="sxs-lookup"><span data-stu-id="c0b65-127">Each claim is made by an issuer, and you trust the claim only as much as you trust the issuer.</span></span> <span data-ttu-id="c0b65-128">Например, утверждение, созданное контроллером домена вашей компании, больше заслуживает доверия, чем утверждение, созданное самим пользователем.</span><span class="sxs-lookup"><span data-stu-id="c0b65-128">For example, you trust a claim made by your company’s domain controller more than you trust a claim made by the user herself.</span></span> <span data-ttu-id="c0b65-129">WIF представляет утверждения типа <xref:System.Security.Claims.Claim>, которые обладают свойством <xref:System.Security.Claims.Claim.Issuer%2A>, позволяющим определить, кто создал утверждение.</span><span class="sxs-lookup"><span data-stu-id="c0b65-129">WIF represents claims with a <xref:System.Security.Claims.Claim> type, which has an <xref:System.Security.Claims.Claim.Issuer%2A> property that allows you to find out who issued the claim.</span></span>  
  
### <a name="security-token"></a><span data-ttu-id="c0b65-130">Токен безопасности</span><span class="sxs-lookup"><span data-stu-id="c0b65-130">Security Token</span></span>  
 <span data-ttu-id="c0b65-131">Пользователь предоставляет приложению набор утверждений наряду с запросом.</span><span class="sxs-lookup"><span data-stu-id="c0b65-131">The user delivers a set of claims to your application along with a request.</span></span> <span data-ttu-id="c0b65-132">В веб-службе эти утверждения заносятся в заголовок безопасности конверта SOAP.</span><span class="sxs-lookup"><span data-stu-id="c0b65-132">In a Web service, these claims are carried in the security header of the SOAP envelope.</span></span> <span data-ttu-id="c0b65-133">В веб-приложении на основе браузера утверждения поступают посредством HTTP POST из браузера пользователя, а затем могут быть кэшированы в файле Cookie, если требуется сеанс.</span><span class="sxs-lookup"><span data-stu-id="c0b65-133">In a browser-based Web application, the claims arrive through an HTTP POST from the user’s browser, and may later be cached in a cookie if a session is desired.</span></span> <span data-ttu-id="c0b65-134">Независимо от способа доставки утверждения могут быть сериализованы. На этом этапе в процесс добавляются токены безопасности.</span><span class="sxs-lookup"><span data-stu-id="c0b65-134">Regardless of how these claims arrive, they must be serialized, which is where security tokens come in.</span></span> <span data-ttu-id="c0b65-135">Токен безопасности — это сериализированный набор утверждений, который центр выдачи снабдил цифровой сигнатурой.</span><span class="sxs-lookup"><span data-stu-id="c0b65-135">A security token is a serialized set of claims that is digitally signed by the issuing authority.</span></span> <span data-ttu-id="c0b65-136">Сигнатура имеет существенное значение: она гарантирует, что пользователь не просто создал ряд утверждений и направил их вам.</span><span class="sxs-lookup"><span data-stu-id="c0b65-136">The signature is important: it gives you assurance that the user didn’t just make up a bunch of claims and send them to you.</span></span> <span data-ttu-id="c0b65-137">При низком уровне безопасности, когда криптография не является обязательной или желательной, можно использовать неподписанные токены, однако в этом разделе данный сценарий не приводится.</span><span class="sxs-lookup"><span data-stu-id="c0b65-137">In low security situations where cryptography isn’t necessary or desired, you can use unsigned tokens, but that scenario is not described in this topic.</span></span>  
  
 <span data-ttu-id="c0b65-138">Одной из ключевых функций WIF является возможность создавать и считывать токены безопасности.</span><span class="sxs-lookup"><span data-stu-id="c0b65-138">One of the core features in WIF is the ability to create and read security tokens.</span></span> <span data-ttu-id="c0b65-139">WIF и .NET Framework обрабатывают все криптографические данные и предоставляют вам приложение с набором утверждений, которые вы можете прочесть.</span><span class="sxs-lookup"><span data-stu-id="c0b65-139">WIF and the .NET Framework handle all of the cryptographic work, and present your application with a set of claims that you can read.</span></span>  
  
### <a name="issuing-authority"></a><span data-ttu-id="c0b65-140">Центр выдачи</span><span class="sxs-lookup"><span data-stu-id="c0b65-140">Issuing Authority</span></span>  
 <span data-ttu-id="c0b65-141">Существует множество различных типов центров выдачи, от контроллеров доменов, оформляющих квитанции Kerberos, до центров сертификации, оформляющих сертификаты X.509. Однако центр выдачи, представленный в данном разделе, оформляет токены безопасности, содержащие утверждения.</span><span class="sxs-lookup"><span data-stu-id="c0b65-141">There are lots of different types of issuing authorities, from domain controllers that issue Kerberos tickets, to certification authorities that issue X.509 certificates, but the specific type of authority discussed in this topic issues security tokens that contain claims.</span></span> <span data-ttu-id="c0b65-142">Этим центром выдачи является веб-приложение или веб-служба, которой известен способ создания токенов безопасности.</span><span class="sxs-lookup"><span data-stu-id="c0b65-142">This issuing authority is a Web application or Web service that knows how to issue security tokens.</span></span> <span data-ttu-id="c0b65-143">Она должна обладать достаточным объемом данных, чтобы создавать утверждения, соответствующие целевой проверяющей стороне и пользователю, отправившему запрос; а также нести ответственность за взаимодействие с хранилищами пользователей для поиска утверждений и аутентификации самих пользователей.</span><span class="sxs-lookup"><span data-stu-id="c0b65-143">It must have enough knowledge to be able to issue the proper claims given the target relying party and the user making the request, and might be responsible for interacting with user stores to look up claims and authenticate the users themselves.</span></span>  
  
 <span data-ttu-id="c0b65-144">Любой выбранный центр выдачи играет основную роль в решении для удостоверений.</span><span class="sxs-lookup"><span data-stu-id="c0b65-144">Whatever issuing authority you choose, it plays a central role in your identity solution.</span></span> <span data-ttu-id="c0b65-145">Если вы полагаетесь на утверждения, исключая аутентификацию из задач, выполняемых приложением, вы передаете ответственность за выполнение данной задачи центру выдачи и запрашиваете у него аутентификацию пользователей от вашего имени.</span><span class="sxs-lookup"><span data-stu-id="c0b65-145">When you factor authentication out of your application by relying on claims, you’re passing responsibility to that authority and asking it to authenticate users on your behalf.</span></span>  
  
### <a name="security-token-service-sts"></a><span data-ttu-id="c0b65-146">Служба маркеров безопасности (STS)</span><span class="sxs-lookup"><span data-stu-id="c0b65-146">Security Token Service (STS)</span></span>  
 <span data-ttu-id="c0b65-147">Служба токенов безопасности (STS) — это компонент службы, который создает, подписывает и оформляет токены безопасности по протоколам WS-Trust и WS-Federation.</span><span class="sxs-lookup"><span data-stu-id="c0b65-147">A security token service (STS) is the service component that builds, signs, and issues security tokens according to the WS-Trust and WS-Federation protocols.</span></span> <span data-ttu-id="c0b65-148">Внедрение этих протоколов требует значительной работы, однако WIF проделает ее за вас. Благодаря этому вам будет несложно обеспечить работоспособность STS, даже если вы не являетесь специалистом по этим протоколам.</span><span class="sxs-lookup"><span data-stu-id="c0b65-148">There’s a lot of work that goes into implementing these protocols, but WIF does all of this work for you, making it feasible for someone who isn’t an expert in the protocols to get an STS up and running with very little effort.</span></span> <span data-ttu-id="c0b65-149">Можно использовать предварительно созданную службу STS, например [службы федерации Active Directory® (AD FS) 2.0](https://go.microsoft.com/fwlink/?LinkID=247516), облачную службу STS, например [службу управления доступом (ACS) Microsoft Azure](https://go.microsoft.com/fwlink/?LinkID=247517); если же вы хотите создавать настраиваемые токены или выполнять настраиваемую проверку подлинности или авторизацию, у вас есть возможность создать собственную настраиваемую службу STS с помощью WIF.</span><span class="sxs-lookup"><span data-stu-id="c0b65-149">You can use a pre-built STS such as [Active Directory® Federation Services (AD FS) 2.0](https://go.microsoft.com/fwlink/?LinkID=247516), a cloud STS such as a [Windows Azure Access Control Service (ACS)](https://go.microsoft.com/fwlink/?LinkID=247517), or, if you want to issue custom tokens or provide custom authentication or authorization, you can build your own custom STS using WIF.</span></span> <span data-ttu-id="c0b65-150">WIF упрощает процесс создания собственной службы STS.</span><span class="sxs-lookup"><span data-stu-id="c0b65-150">WIF makes it easy to build your own STS.</span></span>  
  
### <a name="relying-party-application"></a><span data-ttu-id="c0b65-151">Приложение проверяющей стороны</span><span class="sxs-lookup"><span data-stu-id="c0b65-151">Relying Party Application</span></span>  
 <span data-ttu-id="c0b65-152">При создании приложения, доверяющего утверждениям, вы создаете приложение проверяющей стороны.</span><span class="sxs-lookup"><span data-stu-id="c0b65-152">When you build an application that relies on claims, you are building a relying party (RP) application.</span></span> <span data-ttu-id="c0b65-153">Приложение проверяющей стороны также называют "приложением, поддерживающим утверждения" или "приложением на основе утверждений".</span><span class="sxs-lookup"><span data-stu-id="c0b65-153">Synonyms for an RP include "claims-aware application" and "claims-based application".</span></span> <span data-ttu-id="c0b65-154">Проверяющими сторонами могут быть и веб-приложения, и веб-службы.</span><span class="sxs-lookup"><span data-stu-id="c0b65-154">Web applications and Web services can both be RPs.</span></span> <span data-ttu-id="c0b65-155">Приложение STS использует токены, созданные службой STS, и извлекает из них утверждения, необходимые ему для выполнения задач, связанных с удостоверениями.</span><span class="sxs-lookup"><span data-stu-id="c0b65-155">A RP application consumes the tokens issued by a STS and extracts the claims from tokens to use them for identity related tasks.</span></span> <span data-ttu-id="c0b65-156">WIF предлагает функциональные возможности, помогающие создавать приложения проверяющей стороны.</span><span class="sxs-lookup"><span data-stu-id="c0b65-156">WIF offers functionalities to help you build RP applications.</span></span>  
  
### <a name="standards"></a><span data-ttu-id="c0b65-157">Стандарты</span><span class="sxs-lookup"><span data-stu-id="c0b65-157">Standards</span></span>  
 <span data-ttu-id="c0b65-158">Чтобы обеспечить совместимость всех этих компонентов, в предыдущем сценарии используются некоторые стандарты WS-\*.</span><span class="sxs-lookup"><span data-stu-id="c0b65-158">In order to make all of this interoperable, several WS-\* standards are used in the previous scenario.</span></span> <span data-ttu-id="c0b65-159">Политика извлекается при помощи стандарта WS-MetadataExchange, а структурируется в соответствии со спецификацией WS-Policy.</span><span class="sxs-lookup"><span data-stu-id="c0b65-159">Policy is retrieved using WS-MetadataExchange, and the policy itself is structured according to the WS-Policy specification.</span></span> <span data-ttu-id="c0b65-160">Служба STS представляет конечные точки, реализующие спецификацию WS-Trust, в которой описаны принципы запроса и получения токенов безопасности.</span><span class="sxs-lookup"><span data-stu-id="c0b65-160">The STS exposes endpoints that implement the WS-Trust specification, which describes how to request and receive security tokens.</span></span> <span data-ttu-id="c0b65-161">Большинство современных служб STS используют токены, отформатированные с помощью языка Security Assertion Markup Langauge (SAML).</span><span class="sxs-lookup"><span data-stu-id="c0b65-161">Most STSs today issue tokens formatted with Security Assertion Markup Langauge (SAML).</span></span> <span data-ttu-id="c0b65-162">SAML — это отраслевой словарь XML, который можно использовать для представления утверждений в пригодной для взаимодействия форме.</span><span class="sxs-lookup"><span data-stu-id="c0b65-162">SAML is an industry-recognized XML vocabulary that can be used to represent claims in an interoperable way.</span></span> <span data-ttu-id="c0b65-163">Или, при наличии нескольких платформ, данный язык предоставит вам возможность обмениваться данными со службой STS на совершенно другой платформе, а также обеспечит единый вход во все ваши приложения вне зависимости от платформы.</span><span class="sxs-lookup"><span data-stu-id="c0b65-163">Or, in a multi-platform situation, this allows you to communicate with an STS on an entirely different platform and achieve single sign-on across all of your applications, regardless of platform.</span></span>  
  
### <a name="browser-based-applications"></a><span data-ttu-id="c0b65-164">Приложения на основе браузера</span><span class="sxs-lookup"><span data-stu-id="c0b65-164">Browser-Based Applications</span></span>  
 <span data-ttu-id="c0b65-165">Модель удостоверений на основе утверждений могут применять не только интеллектуальные клиенты.</span><span class="sxs-lookup"><span data-stu-id="c0b65-165">Smart clients aren’t the only ones who can use the claims-based identity model.</span></span> <span data-ttu-id="c0b65-166">Ее также могут использовать приложения на основе браузера (также называемые пассивными клиентами).</span><span class="sxs-lookup"><span data-stu-id="c0b65-166">Browser-based applications (also referred to as passive clients) can use it as well.</span></span> <span data-ttu-id="c0b65-167">Представленный ниже сценарий иллюстрирует принципы работы данной модели.</span><span class="sxs-lookup"><span data-stu-id="c0b65-167">The following scenario describes how this works.</span></span>  
  
 <span data-ttu-id="c0b65-168">Сначала пользователь указывает браузер в качестве веб-приложения, поддерживающего утверждения (приложения проверяющей стороны).</span><span class="sxs-lookup"><span data-stu-id="c0b65-168">First, the user points a browser at a claims-aware Web application (the relying party application).</span></span> <span data-ttu-id="c0b65-169">Веб-приложение перенаправляет браузер в службу STS для аутентификации пользователя.</span><span class="sxs-lookup"><span data-stu-id="c0b65-169">The Web application redirects the browser to the STS so the user can be authenticated.</span></span> <span data-ttu-id="c0b65-170">STS размещается в простом веб-приложении, которое считывает входящие запросы, выполняет аутентификацию пользователя при помощи стандартных механизмов HTTP, а затем создает токен SAML и отвечает фрагментом кода JavaScript, благодаря которому браузер инициирует HTTP POST, передающий токен SAML обратно в приложение проверяющей стороны.</span><span class="sxs-lookup"><span data-stu-id="c0b65-170">The STS is hosted in a simple web application that reads the incoming request, authenticates the user using standard HTTP mechanisms, and then creates a SAML token and replies with a piece of JavaScript code that causes the browser to initiate an HTTP POST that sends the SAML token back to the RP.</span></span> <span data-ttu-id="c0b65-171">Текст данного POST содержит утверждения, которые запросила проверяющая сторона.</span><span class="sxs-lookup"><span data-stu-id="c0b65-171">The body of this POST contains the claims that the RP requested.</span></span> <span data-ttu-id="c0b65-172">На этом этапе приложение проверяющей стороны, как правило, инкапсулирует утверждения в файл Cookie, чтобы пользователя не нужно было перенаправлять для каждого запроса.</span><span class="sxs-lookup"><span data-stu-id="c0b65-172">At this point, it is common for the RP to package the claims into a cookie so that the user doesn’t have to be redirected for each request.</span></span>  
  
<a name="BKMK_2"></a>   
## <a name="basic-scenario-for-a-claims-based-identity-model"></a><span data-ttu-id="c0b65-173">Базовый сценарий для модели удостоверения на основе утверждений</span><span class="sxs-lookup"><span data-stu-id="c0b65-173">Basic Scenario for a Claims-Based Identity Model</span></span>  
 <span data-ttu-id="c0b65-174">Ниже показан пример системы на основе утверждений.</span><span class="sxs-lookup"><span data-stu-id="c0b65-174">The following is an example of a claims-based system.</span></span>  
  
 <span data-ttu-id="c0b65-175">![Поток аутентификации с проверяющей стороной](../../../docs/framework/security/media/conc-relying-partner-processc.png "conc_relying_partner_processc")</span><span class="sxs-lookup"><span data-stu-id="c0b65-175">![Relying Partner Authentication Flow](../../../docs/framework/security/media/conc-relying-partner-processc.png "conc_relying_partner_processc")</span></span>  
  
 <span data-ttu-id="c0b65-176">На этой схеме представлен веб-сайт (приложение проверяющей стороны), настроенный для применения WIF в целях аутентификации, а также клиент, веб-браузер, желающий использовать данный сайт.</span><span class="sxs-lookup"><span data-stu-id="c0b65-176">This diagram shows a Web site (the relying party application, RP) that has been configured to use WIF for authentication and a client, a web browser, that wants to use that site.</span></span>  
  
1. <span data-ttu-id="c0b65-177">Когда не прошедший проверку пользователь запрашивает страницу, свой браузер перенаправляется на страницах identity provider (IdP).</span><span class="sxs-lookup"><span data-stu-id="c0b65-177">When an unauthenticated user requests a page, their browser is redirected to the identity provider (IdP) pages.</span></span>  
  
2. <span data-ttu-id="c0b65-178">Поставщик удостоверений требуется пользователь должен предоставить свои учетные данные, такие как имя пользователя и пароль или проверки подлинности Kerberos.</span><span class="sxs-lookup"><span data-stu-id="c0b65-178">The IdP requires the user to present their credentials, such as username/password or Kerberos authentication.</span></span>  
  
3. <span data-ttu-id="c0b65-179">Проблемы поставщика удостоверений, маркер снова возвращается в браузер.</span><span class="sxs-lookup"><span data-stu-id="c0b65-179">The IdP issues a token back to that is returned to the browser.</span></span>  
  
4. <span data-ttu-id="c0b65-180">После этого браузер перенаправляется обратно на исходную запрошенную страницу, на которой WIF определяет, соответствует ли токен условиям доступа к данной странице.</span><span class="sxs-lookup"><span data-stu-id="c0b65-180">The browser is now redirected back to the originally requested page where WIF determines if the token satisfies the requirements to access the page.</span></span> <span data-ttu-id="c0b65-181">Если для создания сеанса выводится файл Cookie, аутентификацию необходимо пройти только один раз, а затем контроль передается приложению.</span><span class="sxs-lookup"><span data-stu-id="c0b65-181">If so a cookie is issued to establish a session so the authentication only needs to occur once, and control is passed to the application.</span></span>
