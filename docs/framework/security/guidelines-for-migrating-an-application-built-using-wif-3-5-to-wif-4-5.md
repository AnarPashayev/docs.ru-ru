---
title: Рекомендации по миграции приложения, созданного с использованием WIF 3.5, в WIF 4.5
ms.date: 03/30/2017
ms.assetid: 7a32fe6e-5f68-4693-9371-19411fa8063c
author: BrucePerlerMS
ms.openlocfilehash: 645fd09de91d8190384faea9df2ef18511162c2f
ms.sourcegitcommit: 8a0fe8a2227af612f8b8941bdb8b19d6268748e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/03/2019
ms.locfileid: "71834526"
---
# <a name="guidelines-for-migrating-an-application-built-using-wif-35-to-wif-45"></a><span data-ttu-id="6a96e-102">Рекомендации по миграции приложения, созданного с использованием WIF 3.5, в WIF 4.5</span><span class="sxs-lookup"><span data-stu-id="6a96e-102">Guidelines for Migrating an Application Built Using WIF 3.5 to WIF 4.5</span></span>

## <a name="applies-to"></a><span data-ttu-id="6a96e-103">Применение</span><span class="sxs-lookup"><span data-stu-id="6a96e-103">Applies To</span></span>

- <span data-ttu-id="6a96e-104">Microsoft® Windows® Identity Foundation (WIF) 3.5 и 4.5.</span><span class="sxs-lookup"><span data-stu-id="6a96e-104">Microsoft® Windows® Identity Foundation (WIF) 3.5 and 4.5.</span></span>

## <a name="overview"></a><span data-ttu-id="6a96e-105">Обзор</span><span class="sxs-lookup"><span data-stu-id="6a96e-105">Overview</span></span>

<span data-ttu-id="6a96e-106">Платформа Windows Identity Foundation (WIF) была изначально выпущена одновременно с пакетом обновления 1 (SP1) для .NET 3.5.</span><span class="sxs-lookup"><span data-stu-id="6a96e-106">Windows Identity Foundation (WIF) was originally released in the .NET 3.5 SP1 timeframe.</span></span> <span data-ttu-id="6a96e-107">При первичном выпуске эта платформа получила версию WIF 3.5.</span><span class="sxs-lookup"><span data-stu-id="6a96e-107">That version of WIF is referred to as WIF 3.5.</span></span> <span data-ttu-id="6a96e-108">Платформа была выпущена в виде отдельной среды выполнения и пакета SDK. Таким образом, на каждом компьютере, где выполняются приложения с поддержкой WIF, должна была быть установлена среда выполнения WIF. Кроме того, разработчикам было необходимо скачать и установить пакет SDK WIF для получения шаблонов и средств Visual Studio, необходимых для разработки приложений с поддержкой WIF.</span><span class="sxs-lookup"><span data-stu-id="6a96e-108">It was released as a separate runtime and SDK, which meant that every computer on which a WIF-enabled application ran had to have the WIF runtime installed and developers had to download and install the WIF SDK to get the Visual Studio templates and tooling that enabled development of WIF-enabled applications.</span></span> <span data-ttu-id="6a96e-109">Начиная с .NET 4.5, платформа WIF полностью интегрирована в .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="6a96e-109">Beginning with .NET 4.5, WIF has been fully integrated into the .NET Framework.</span></span> <span data-ttu-id="6a96e-110">Отдельная среда выполнения более не нужна, а средства WIF можно установить в Visual Studio 2012, используя диспетчер расширений Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="6a96e-110">A separate runtime is no longer needed and the WIF tooling can be installed in Visual Studio 2012 by using the Visual Studio Extensions Manager.</span></span> <span data-ttu-id="6a96e-111">Эта версия WIF называется WIF 4.5.</span><span class="sxs-lookup"><span data-stu-id="6a96e-111">This version of WIF is referred to as WIF 4.5.</span></span>

<span data-ttu-id="6a96e-112">Интеграция платформы WIF с .NET была связана с рядом изменений в поверхности API WIF.</span><span class="sxs-lookup"><span data-stu-id="6a96e-112">The integration of WIF into .NET necessitated several changes in the WIF API surface.</span></span> <span data-ttu-id="6a96e-113">Версия WIF 4.5 включает новые пространства имен, определенные изменения в элементах конфигурации, а также новые средства для Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="6a96e-113">WIF 4.5 includes new namespaces, some changes to configuration elements, and new tooling for Visual Studio.</span></span> <span data-ttu-id="6a96e-114">В этом разделе приводятся рекомендации по переносу приложений, построенных с использованием версии WIF 3.5, на платформу WIF 4.5.</span><span class="sxs-lookup"><span data-stu-id="6a96e-114">This topic provides guidance that you can use to help you migrate applications built using WIF 3.5 to WIF 4.5.</span></span> <span data-ttu-id="6a96e-115">В некоторых сценариях требуется выполнять прежние версии приложений, построенных с использованием WIF 3.5, на компьютерах под управлением ОС Windows 8 или Windows Server 2012.</span><span class="sxs-lookup"><span data-stu-id="6a96e-115">There may be scenarios in which you need to run legacy applications built using WIF 3.5 on computers that are running Windows 8 or Windows Server 2012.</span></span> <span data-ttu-id="6a96e-116">В этом разделе также приводятся рекомендации по обеспечению поддержки WIF 3.5 в этих операционных системах.</span><span class="sxs-lookup"><span data-stu-id="6a96e-116">This topic also provides guidance about how to enable WIF 3.5 for these operating systems.</span></span>

## <a name="changes-required-for-wif-45"></a><span data-ttu-id="6a96e-117">Необходимые изменения для версии WIF 4.5</span><span class="sxs-lookup"><span data-stu-id="6a96e-117">Changes Required for WIF 4.5</span></span>

<span data-ttu-id="6a96e-118">В этом разделе описаны изменения, которые необходимы для переноса приложения WIF 3.5 на платформу WIF 4.5.</span><span class="sxs-lookup"><span data-stu-id="6a96e-118">This section describes the changes that are required to migrate a WIF 3.5 application to WIF 4.5.</span></span>

### <a name="assembly-and-namespace-changes"></a><span data-ttu-id="6a96e-119">Изменения сборок и пространств имен</span><span class="sxs-lookup"><span data-stu-id="6a96e-119">Assembly and Namespace Changes</span></span>

<span data-ttu-id="6a96e-120">В версии WIF 3.5 все классы платформы WIF находились в сборке `Microsoft.IdentityModel` (microsoft.identitymicrosoft.identitymodel.dll).</span><span class="sxs-lookup"><span data-stu-id="6a96e-120">In WIF 3.5, all of the WIF classes were contained in the `Microsoft.IdentityModel` assembly (microsoft.identitymicrosoft.identitymodel.dll).</span></span> <span data-ttu-id="6a96e-121">В WIF 4.5 классы WIF размещаются в следующих сборках: `mscorlib` (mscorlib.dll), `System.IdentityModel` (System.IdentityModel.dll), `System.IdentityModel.Services` (System.IdentityModel.Services.dll) и `System.ServiceModel` (System.ServiceModel.dll).</span><span class="sxs-lookup"><span data-stu-id="6a96e-121">In WIF 4.5, the WIF classes have been split across the following assemblies: `mscorlib` (mscorlib.dll), `System.IdentityModel` (System.IdentityModel.dll), `System.IdentityModel.Services` (System.IdentityModel.Services.dll), and `System.ServiceModel` (System.ServiceModel.dll).</span></span>

<span data-ttu-id="6a96e-122">Классы WIF 3.5 ранее содержались в одном из пространств имен `Microsoft.IdentityModel`, например `Microsoft.IdentityModel`, `Microsoft.IdentityModel.Tokens`, `Microsoft.IdentityModel.Web` и т. д.</span><span class="sxs-lookup"><span data-stu-id="6a96e-122">The WIF 3.5 classes were all contained in one of the `Microsoft.IdentityModel` namespaces; for example, `Microsoft.IdentityModel`, `Microsoft.IdentityModel.Tokens`, `Microsoft.IdentityModel.Web`, and so on.</span></span> <span data-ttu-id="6a96e-123">В WIF 4.5 классы WIF размещаются в пространствах имен [System.IdentityModel](https://go.microsoft.com/fwlink/?LinkId=272004): <xref:System.Security.Claims?displayProperty=nameWithType> и <xref:System.ServiceModel.Security?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6a96e-123">In WIF 4.5, the WIF classes are now spread across the [System.IdentityModel](https://go.microsoft.com/fwlink/?LinkId=272004) namespaces, the <xref:System.Security.Claims?displayProperty=nameWithType> namespace, and the <xref:System.ServiceModel.Security?displayProperty=nameWithType> namespace.</span></span> <span data-ttu-id="6a96e-124">Помимо этих структурных изменений, в версии WIF 4.5 были исключены некоторые классы WIF 3.5.</span><span class="sxs-lookup"><span data-stu-id="6a96e-124">In addition to this reorganization, some WIF 3.5 classes have been dropped in WIF 4.5.</span></span>

<span data-ttu-id="6a96e-125">В следующей таблице описываются основные пространства имен платформы WIF 4.5 и виды содержащихся в них классов.</span><span class="sxs-lookup"><span data-stu-id="6a96e-125">The following table shows some of the more important WIF 4.5 namespaces and the kind of classes they contain.</span></span> <span data-ttu-id="6a96e-126">Дополнительные сведения о сопоставлении пространств имен между версиями WIF 3.5 и WIF 4.5, а также об исключенных из WIF 4.5 пространствах имен и классах см. в разделе [Сопоставление пространств имен между WIF 3.5 и WIF 4.5](namespace-mapping-between-wif-3-5-and-wif-4-5.md).</span><span class="sxs-lookup"><span data-stu-id="6a96e-126">For more detailed information about how namespaces map between WIF 3.5 and WIF 4.5 and about namespaces and classes that have been dropped in WIF 4.5, see [Namespace Mapping between WIF 3.5 and WIF 4.5](namespace-mapping-between-wif-3-5-and-wif-4-5.md).</span></span>

|<span data-ttu-id="6a96e-127">Пространство имен WIF 4.5</span><span class="sxs-lookup"><span data-stu-id="6a96e-127">WIF 4.5 Namespace</span></span>|<span data-ttu-id="6a96e-128">Описание</span><span class="sxs-lookup"><span data-stu-id="6a96e-128">Description</span></span>|
|-----------------------|-----------------|
|<xref:System.IdentityModel?displayProperty=nameWithType>|<span data-ttu-id="6a96e-129">Содержит классы, представляющие преобразования файлов cookie, службы маркеров безопасности, а также средства чтения словарей XML.</span><span class="sxs-lookup"><span data-stu-id="6a96e-129">Contains classes that represent cookie transforms, security token services, and specialized XML dictionary readers.</span></span> <span data-ttu-id="6a96e-130">Содержит классы из следующих пространств имен WIF 3.5: `Microsoft.IdentityModel`, `Microsoft.IdentityModel.SecurityTokenService` и `Microsoft.IdentityModel.Threading`.</span><span class="sxs-lookup"><span data-stu-id="6a96e-130">Contains classes from the following WIF 3.5 namespaces: `Microsoft.IdentityModel`, `Microsoft.IdentityModel.SecurityTokenService`, and `Microsoft.IdentityModel.Threading`.</span></span>|
|<xref:System.Security.Claims?displayProperty=nameWithType>|<span data-ttu-id="6a96e-131">Содержит классы, представляющие утверждения, удостоверения на основе утверждений, субъекты на основе утверждений, а также другие артефакты модели на основе утверждений.</span><span class="sxs-lookup"><span data-stu-id="6a96e-131">Contains classes that represent claims, claims-based identities, claims based principals, and other claims based identity model artifacts.</span></span> <span data-ttu-id="6a96e-132">Содержит классы из пространства имен `Microsoft.IdentityModel.Claims`.</span><span class="sxs-lookup"><span data-stu-id="6a96e-132">Contains classes from the `Microsoft.IdentityModel.Claims` namespace.</span></span>|
|<xref:System.IdentityModel.Tokens?displayProperty=nameWithType>|<span data-ttu-id="6a96e-133">Содержит классы, представляющие маркеры безопасности, обработчики маркеров безопасности, а также другие артефакты маркеров безопасности.</span><span class="sxs-lookup"><span data-stu-id="6a96e-133">Contains classes that represent security tokens, security token handlers, and other security token artifacts.</span></span> <span data-ttu-id="6a96e-134">Содержит классы из следующих пространств имен WIF 3.5: `Microsoft.IdentityModel.Tokens`, `Microsoft.IdentityModel.Tokens.Saml11` и `Microsoft.IdentityModel.Tokens.Saml2`.</span><span class="sxs-lookup"><span data-stu-id="6a96e-134">Contains classes from the following WIF 3.5 namespaces: `Microsoft.IdentityModel.Tokens`, `Microsoft.IdentityModel.Tokens.Saml11`, and `Microsoft.IdentityModel.Tokens.Saml2`.</span></span>|
|<xref:System.IdentityModel.Services?displayProperty=nameWithType>|<span data-ttu-id="6a96e-135">Содержит классы, используемые в пассивных сценариях (WS-Federation).</span><span class="sxs-lookup"><span data-stu-id="6a96e-135">Contains classes that are used in passive (WS-Federation) scenarios.</span></span> <span data-ttu-id="6a96e-136">Содержит классы из пространства имен `Microsoft.IdentityModel.Web`.</span><span class="sxs-lookup"><span data-stu-id="6a96e-136">Contains classes from the `Microsoft.IdentityModel.Web` namespace.</span></span>|
|<xref:System.ServiceModel.Security?displayProperty=nameWithType>|<span data-ttu-id="6a96e-137">В это пространство имен теперь входят классы, представляющие контракты, каналы, узлы службы и другие артефакты WCF, которые используются в активных сценариях (WS-Trust).</span><span class="sxs-lookup"><span data-stu-id="6a96e-137">Classes that represent WCF contracts, channels, service hosts and other artifacts that are used in active (WS-Trust) scenarios are now in this namespace.</span></span> <span data-ttu-id="6a96e-138">На платформе WIF 3.5 эти классы находились в пространстве имен `Microsoft.IdentityModel.Protocols.WSTrust`.</span><span class="sxs-lookup"><span data-stu-id="6a96e-138">In WIF 3.5 , these classes were in the `Microsoft.IdentityModel.Protocols.WSTrust` namespace.</span></span>|

> [!IMPORTANT]
> <span data-ttu-id="6a96e-139">Следующие пространства имен `System.IdentityModel` содержат классы, которые реализуют модель удостоверений WCF на основе утверждений: <xref:System.IdentityModel.Claims?displayProperty=nameWithType>, <xref:System.IdentityModel.Policy?displayProperty=nameWithType> и <xref:System.IdentityModel.Selectors?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6a96e-139">The following `System.IdentityModel` namespaces contain classes that implement the WCF claims-based identity model: <xref:System.IdentityModel.Claims?displayProperty=nameWithType>, <xref:System.IdentityModel.Policy?displayProperty=nameWithType>, and <xref:System.IdentityModel.Selectors?displayProperty=nameWithType>.</span></span> <span data-ttu-id="6a96e-140">Модель удостоверений WCF на базе утверждений заменяется WIF.</span><span class="sxs-lookup"><span data-stu-id="6a96e-140">The WCF claims-based identity model is superseded by WIF.</span></span> <span data-ttu-id="6a96e-141">При создании решений на основе WIF не следует использовать классы из этих трех пространств имен.</span><span class="sxs-lookup"><span data-stu-id="6a96e-141">You should not use classes in these three namespaces when building solutions based on WIF.</span></span>

### <a name="changes-due-to-net-integration"></a><span data-ttu-id="6a96e-142">Изменения в связи с интеграцией с .NET</span><span class="sxs-lookup"><span data-stu-id="6a96e-142">Changes Due to .NET Integration</span></span>

<span data-ttu-id="6a96e-143">Теперь платформа WIF интегрирована с .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="6a96e-143">WIF is now integrated into the .NET Framework.</span></span> <span data-ttu-id="6a96e-144">С этого момента большинство классов удостоверений и субъектов .NET являются производными от <xref:System.Security.Claims.ClaimsIdentity?displayProperty=nameWithType> и <xref:System.Security.Claims.ClaimsPrincipal?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6a96e-144">Most .NET identity and principal classes now derive from <xref:System.Security.Claims.ClaimsIdentity?displayProperty=nameWithType> and <xref:System.Security.Claims.ClaimsPrincipal?displayProperty=nameWithType>.</span></span> <span data-ttu-id="6a96e-145">В связи с этим в версии WIF 4.5 были произведены следующие изменения:</span><span class="sxs-lookup"><span data-stu-id="6a96e-145">The results in the following changes in WIF 4.5:</span></span>

- <span data-ttu-id="6a96e-146">Классы WIF, представляющие утверждения, удостоверения и субъекты, теперь находятся в пространстве имен <xref:System.Security.Claims?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6a96e-146">WIF classes that represent claims, identities, and principals now exist in the <xref:System.Security.Claims?displayProperty=nameWithType> namespace.</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="6a96e-147">Пространство имен <xref:System.IdentityModel.Claims?displayProperty=nameWithType> содержит классы, представляющие артефакты в модели удостоверений WCF на основе утверждений.</span><span class="sxs-lookup"><span data-stu-id="6a96e-147">The <xref:System.IdentityModel.Claims?displayProperty=nameWithType> namespace contains classes that represent artifacts in the WCF claims-based identity model.</span></span> <span data-ttu-id="6a96e-148">В большинстве случаев имена этих классов совпадают с именами классов WIF, например `Claims`.</span><span class="sxs-lookup"><span data-stu-id="6a96e-148">Many of these classes have names that are the same as WIF classes; for example, `Claims`.</span></span> <span data-ttu-id="6a96e-149">Не используйте эти классы при построении решений на основе WIF.</span><span class="sxs-lookup"><span data-stu-id="6a96e-149">Do not use these classes when building solutions based on WIF.</span></span>

- <span data-ttu-id="6a96e-150">Классы удостоверений и субъектов .NET теперь являются производными непосредственно от классов <xref:System.Security.Claims.ClaimsIdentity?displayProperty=nameWithType> и <xref:System.Security.Claims.ClaimsPrincipal?displayProperty=nameWithType>, которые представляют удостоверения и субъекты на основе утверждений.</span><span class="sxs-lookup"><span data-stu-id="6a96e-150">.NET identity and principal classes now derive directly from <xref:System.Security.Claims.ClaimsIdentity?displayProperty=nameWithType> and <xref:System.Security.Claims.ClaimsPrincipal?displayProperty=nameWithType>, which represent claims-based identities and principals.</span></span> <span data-ttu-id="6a96e-151">По этой причине интерфейсы `IClaimsIdentity` и `IClaimsPrincipal` из версии WIF 3.5 больше не нужны и недоступны на платформе WIF 4.5.</span><span class="sxs-lookup"><span data-stu-id="6a96e-151">For this reason, the WIF 3.5 interfaces `IClaimsIdentity` and `IClaimsPrincipal` are no longer needed and are not available in WIF 4.5.</span></span>

- <span data-ttu-id="6a96e-152">Поскольку классы удостоверений и субъектов .NET, такие как <xref:System.Security.Principal.WindowsIdentity?displayProperty=nameWithType> и <xref:System.Security.Principal.WindowsPrincipal?displayProperty=nameWithType>, теперь являются производными от <xref:System.Security.Claims.ClaimsIdentity> и <xref:System.Security.Claims.ClaimsPrincipal>, они реализуют встроенные функции работы с утверждениями.</span><span class="sxs-lookup"><span data-stu-id="6a96e-152">Because.NET identity and principal classes such as <xref:System.Security.Principal.WindowsIdentity?displayProperty=nameWithType> and <xref:System.Security.Principal.WindowsPrincipal?displayProperty=nameWithType> now derive from <xref:System.Security.Claims.ClaimsIdentity> and <xref:System.Security.Claims.ClaimsPrincipal>, they have claims functionality built-in.</span></span> <span data-ttu-id="6a96e-153">По этой причине больше не нужны классы для работы с удостоверениями и субъектами на основе утверждений из версии WIF 3.5 (`WindowsClaimsIdentity` и `WindowsClaimsPrincipal`), которые исключены из WIF 4.5.</span><span class="sxs-lookup"><span data-stu-id="6a96e-153">For this reason, claims-specific identity and principal classes such as `WindowsClaimsIdentity` and `WindowsClaimsPrincipal` that were present in WIF 3.5 are no longer needed and do not exist in WIF 4.5.</span></span>

### <a name="other-changes-to-wif-functionality"></a><span data-ttu-id="6a96e-154">Другие изменения в функциях WIF</span><span class="sxs-lookup"><span data-stu-id="6a96e-154">Other Changes to WIF Functionality</span></span>

<span data-ttu-id="6a96e-155">Помимо изменений, связанных с пространствами имен и интеграцией с .NET, в версии WIF 4.5 реализованы следующие изменения функций WIF.</span><span class="sxs-lookup"><span data-stu-id="6a96e-155">In addition to the namespace changes and the changes due to integration with .NET, the following general changes to WIF functionality occur in WIF 4.5.</span></span>

- <span data-ttu-id="6a96e-156">Исключен класс `Microsoft.IdentityModel.ExceptionMapper`, в котором были представлены функции для сопоставления исключений с конкретными ошибками SOAP.</span><span class="sxs-lookup"><span data-stu-id="6a96e-156">The `Microsoft.IdentityModel.ExceptionMapper` class, which provided functionality that enabled you to map exceptions to specific SOAP Faults, is removed.</span></span>

- <span data-ttu-id="6a96e-157">Поверхность исключения значительно сокращена.</span><span class="sxs-lookup"><span data-stu-id="6a96e-157">The exception surface has been greatly reduced.</span></span>

- <span data-ttu-id="6a96e-158">Исключено большинство классов, в которых определялись специальные константы протокола или WS-\*, например класс `Microsoft.IdentityModel.WSAddressing10Constants`, где были определены константы для WS-Addressing 1.0.</span><span class="sxs-lookup"><span data-stu-id="6a96e-158">Many of the classes that defined protocol or WS-\* specific constants have been removed; for example, the `Microsoft.IdentityModel.WSAddressing10Constants` class, which defined constants related to WS-Addressing 1.0.</span></span>

- <span data-ttu-id="6a96e-159">Исключены служба утверждений для службы маркеров Windows (c2wts) и связанные с ней классы пространства имен `Microsoft.IdentityModel.WindowsTokenService`.</span><span class="sxs-lookup"><span data-stu-id="6a96e-159">The Claims to Windows Token Service (c2wts) and its associated classes in the `Microsoft.IdentityModel.WindowsTokenService` namespace are removed.</span></span>

### <a name="wif-configuration-changes"></a><span data-ttu-id="6a96e-160">Изменения конфигурации WIF</span><span class="sxs-lookup"><span data-stu-id="6a96e-160">WIF Configuration Changes</span></span>

<span data-ttu-id="6a96e-161">Основные изменения в файле конфигурации связаны с обновлениями пространств имен в WIF 4.5.</span><span class="sxs-lookup"><span data-stu-id="6a96e-161">Many of the changes in the configuration file have been caused by namespace updates in WIF 4.5.</span></span> <span data-ttu-id="6a96e-162">Например, рассмотрим следующую запись WIF 3.5 в разделе `<httpModules>`, которая добавляет в приложение диспетчер проверки подлинности WS-Federation:</span><span class="sxs-lookup"><span data-stu-id="6a96e-162">For example, consider the following WIF 3.5 entry in the `<httpModules>` section to add the WS-Federation Authentication Manager to an application:</span></span>

```xml
<add name="WSFederationAuthenticationModule" type="Microsoft.IdentityModel.Web.WSFederationAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=abcd … 5678" />
```

<span data-ttu-id="6a96e-163">В версии WIF 4.5 эта запись обновлена и включает новые версии пространств имен и сборки:</span><span class="sxs-lookup"><span data-stu-id="6a96e-163">This entry has been updated in WIF 4.5 to include the new namespaces and assembly version:</span></span>

```xml
<add name="WSFederationAuthenticationModule" type="System.IdentityModel.Services.WSFederationAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=abcd … 5678"/>
```

<span data-ttu-id="6a96e-164">В следующем списке перечислены основные изменения в файле конфигурации для WIF 4.5.</span><span class="sxs-lookup"><span data-stu-id="6a96e-164">The following list enumerates the major changes to the configuration file for WIF 4.5.</span></span>

- <span data-ttu-id="6a96e-165">Раздел `<microsoft.identityModel>` переименован в [\<system.identityModel>](../configure-apps/file-schema/windows-identity-foundation/system-identitymodel.md).</span><span class="sxs-lookup"><span data-stu-id="6a96e-165">The `<microsoft.identityModel>` section is now the [\<system.identityModel>](../configure-apps/file-schema/windows-identity-foundation/system-identitymodel.md) section.</span></span>

- <span data-ttu-id="6a96e-166">Элемент `<service>` переименован в [\<identityConfiguration>](../configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md).</span><span class="sxs-lookup"><span data-stu-id="6a96e-166">The `<service>` element is now the [\<identityConfiguration>](../configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md) element.</span></span>

- <span data-ttu-id="6a96e-167">Добавлен новый раздел [\<system.identityModel.services>](../configure-apps/file-schema/windows-identity-foundation/system-identitymodel-services.md), который определяет поведение в пассивных сценариях (WS-Federation).</span><span class="sxs-lookup"><span data-stu-id="6a96e-167">A new section, [\<system.identityModel.services>](../configure-apps/file-schema/windows-identity-foundation/system-identitymodel-services.md), has been added to specify settings that control behavior in passive (WS-Federation) scenarios.</span></span>

- <span data-ttu-id="6a96e-168">Элемент [\<federationConfiguration>](../configure-apps/file-schema/windows-identity-foundation/federationconfiguration.md) и его дочерние элементы перенесены из элемента `<service>` (WIF 3.5) в новый элемент `<system.identityModel.services>`.</span><span class="sxs-lookup"><span data-stu-id="6a96e-168">The [\<federationConfiguration>](../configure-apps/file-schema/windows-identity-foundation/federationconfiguration.md) element and its child elements have been moved from the `<service>` element in WIF 3.5 to the new `<system.identityModel.services>` element .</span></span>

- <span data-ttu-id="6a96e-169">Некоторые элементы, которые могли задаваться на уровне службы непосредственно в элементе `<service>` (WIF 3.5), были ограничены и теперь задаются в элементе [\<securityTokenHandlerConfiguration>](../configure-apps/file-schema/windows-identity-foundation/securitytokenhandlerconfiguration.md).</span><span class="sxs-lookup"><span data-stu-id="6a96e-169">Several elements that could be specified at the service-level directly under the `<service>` element in WIF 3.5 have been restricted to being specified under the [\<securityTokenHandlerConfiguration>](../configure-apps/file-schema/windows-identity-foundation/securitytokenhandlerconfiguration.md) element.</span></span> <span data-ttu-id="6a96e-170">(Для обеспечения обратной совместимости они по-прежнему могут задаваться в элементе [\<identityConfiguration>](../configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md) на платформе WIF 4.5.)</span><span class="sxs-lookup"><span data-stu-id="6a96e-170">(They may still be specified under the [\<identityConfiguration>](../configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md) element in WIF 4.5 for backward compatibility.)</span></span>

<span data-ttu-id="6a96e-171">Полный список элементов конфигурации WIF 4.5 см. в разделе [Схема конфигурации WIF](../configure-apps/file-schema/windows-identity-foundation/index.md).</span><span class="sxs-lookup"><span data-stu-id="6a96e-171">For a complete list of the WIF 4.5 configuration elements, see [WIF Configuration Schema](../configure-apps/file-schema/windows-identity-foundation/index.md).</span></span>

### <a name="visual-studio-tooling-changes"></a><span data-ttu-id="6a96e-172">Изменения в средствах Visual Studio</span><span class="sxs-lookup"><span data-stu-id="6a96e-172">Visual Studio Tooling Changes</span></span>

<span data-ttu-id="6a96e-173">В пакете SDK WIF 3.5 была представлена автономная служебная программа федерации FedUtil.exe (FedUtil), с помощью которой можно было передавать функции управления удостоверениями в приложениях с поддержкой WIF службе маркеров безопасности (STS).</span><span class="sxs-lookup"><span data-stu-id="6a96e-173">The WIF 3.5 SDK offered a stand-alone federation utility, FedUtil.exe (FedUtil), that you could use to outsource identity management in WIF-enabled applications to a security token service (STS).</span></span> <span data-ttu-id="6a96e-174">Это средство добавляло в файл конфигурации приложения параметры WIF, которые позволяли получать маркеры безопасности от одной или нескольких служб маркеров безопасности, и было представлено в Visual Studio кнопкой **Добавить ссылку на службу STS**.</span><span class="sxs-lookup"><span data-stu-id="6a96e-174">This tool added WIF settings to the application configuration file to enable the application to get security tokens from one or more STSs, and was surfaced in Visual Studio through the **Add STS Service Reference** button.</span></span> <span data-ttu-id="6a96e-175">Служебная программа FedUtil не входит в состав WIF 4.5.</span><span class="sxs-lookup"><span data-stu-id="6a96e-175">FedUtil does not ship with WIF 4.5.</span></span> <span data-ttu-id="6a96e-176">Вместо нее платформа WIF 4.5 поддерживает новое расширение Visual Studio с именем Identity and Access Tool для Visual Studio 2012, которое позволяет добавлять в файл конфигурации приложения параметры WIF, необходимые для передачи функций управления удостоверениями службе маркеров безопасности.</span><span class="sxs-lookup"><span data-stu-id="6a96e-176">Instead, WIF 4.5 supports a new Visual Studio extension named the Identity and Access Tool for Visual Studio 2012 that you can use to modify your application’s configuration file with the WIF settings required to outsource identity management to an STS.</span></span> <span data-ttu-id="6a96e-177">Средство Identity and Access Tool также реализует локальную службу маркеров безопасности, которую можно использовать для тестирования приложений с поддержкой WIF.</span><span class="sxs-lookup"><span data-stu-id="6a96e-177">The Identity and Access Tool also implements an STS called Local STS that you can use to test your WIF-enabled applications.</span></span> <span data-ttu-id="6a96e-178">Во многих случаях этот компонент избавляет от необходимости создавать настраиваемые службы маркеров безопасности, которые зачастую требовались в версии WIF 3.5 для тестирования разрабатываемых решений.</span><span class="sxs-lookup"><span data-stu-id="6a96e-178">In many cases, this feature obviates the need to build custom STSs that were often necessary in WIF 3.5 to test solutions under development.</span></span> <span data-ttu-id="6a96e-179">По этой причине в Visual Studio 2012 больше не поддерживаются шаблоны службы маркеров безопасности, однако в версии WIF 4.5 по-прежнему доступны классы, обеспечивающие разработку служб маркеров безопасности.</span><span class="sxs-lookup"><span data-stu-id="6a96e-179">For this reason, the STS templates are no longer supported in Visual Studio 2012; however, the classes that support the development of STSs are still available in WIF 4.5.</span></span>

<span data-ttu-id="6a96e-180">Средство идентификации и доступа можно установить из диспетчера расширений и обновлений в Visual Studio, или скачать его можно на следующей странице в коллекции кода: [Средство идентификации и доступа для Visual Studio 2012 в коллекции кода](https://go.microsoft.com/fwlink/?LinkID=245849).</span><span class="sxs-lookup"><span data-stu-id="6a96e-180">You can install the Identity and Access Tool from the Extensions and Updates Manager in Visual Studio or you can download it from the following page on Code Gallery: [Identity and Access Tool for Visual Studio 2012 on Code Gallery](https://go.microsoft.com/fwlink/?LinkID=245849).</span></span> <span data-ttu-id="6a96e-181">Ниже описываются изменения в средствах Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="6a96e-181">The Visual Studio tooling changes are summarized in the following list:</span></span>

- <span data-ttu-id="6a96e-182">Исключена функция "Добавить ссылку на службу STS".</span><span class="sxs-lookup"><span data-stu-id="6a96e-182">The Add STS Service Reference functionality is removed.</span></span> <span data-ttu-id="6a96e-183">Вместо нее используется средство Identity and Access Tool.</span><span class="sxs-lookup"><span data-stu-id="6a96e-183">The replacement is the Identity and Access Tool.</span></span>

- <span data-ttu-id="6a96e-184">Исключены шаблоны служб маркеров безопасности Visual Studio STS.</span><span class="sxs-lookup"><span data-stu-id="6a96e-184">The Visual Studio STS templates are removed.</span></span> <span data-ttu-id="6a96e-185">Для тестирования решений, разрабатываемых с поддержкой WIF, можно использовать локальную службу маркеров безопасности, которая доступна в средстве Identity and Access Tool.</span><span class="sxs-lookup"><span data-stu-id="6a96e-185">You can use the Local STS that is available through the Identity and Access Tool to test identity solutions that you develop with WIF.</span></span> <span data-ttu-id="6a96e-186">Можно изменить конфигурацию локальной службы маркеров безопасности для настройки обрабатываемых с ее помощью утверждений.</span><span class="sxs-lookup"><span data-stu-id="6a96e-186">The Local STS configuration can be modified to customize the claims that it serves.</span></span>

- <span data-ttu-id="6a96e-187">В версии WIF 4.5 недоступна автономная служебная программа федерации (FedUtil).</span><span class="sxs-lookup"><span data-stu-id="6a96e-187">The stand-alone Federation Utility (FedUtil) is not available in WIF 4.5.</span></span> <span data-ttu-id="6a96e-188">С помощью средства Identity and Access Tool можно изменить файлы конфигурации для передачи функций управления удостоверениями службе маркеров безопасности.</span><span class="sxs-lookup"><span data-stu-id="6a96e-188">You can use the Identity and Access Tool to modify your configuration files to outsource identity management to an STS.</span></span>

<span data-ttu-id="6a96e-189">Дополнительные сведения о средстве идентификации и доступа см. в разделе [средство идентификации и доступа для Visual Studio 2012](identity-and-access-tool-for-vs.md).</span><span class="sxs-lookup"><span data-stu-id="6a96e-189">For more information about the Identity and Access Tool, see [Identity and Access Tool for Visual Studio 2012](identity-and-access-tool-for-vs.md).</span></span>

<a name="BKMK_ToolingChanges"></a>

### <a name="passive-ws-federation-scenarios"></a><span data-ttu-id="6a96e-190">Пассивные сценарии (WS-Federation):</span><span class="sxs-lookup"><span data-stu-id="6a96e-190">Passive (WS-Federation) Scenarios:</span></span>

- <span data-ttu-id="6a96e-191">Классы, поддерживающие пассивные сценарии, перенесены в пространство имен <xref:System.IdentityModel.Services?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6a96e-191">Classes that support passive scenarios have been moved to the <xref:System.IdentityModel.Services?displayProperty=nameWithType> namespace.</span></span> <span data-ttu-id="6a96e-192">На платформе WIF 3.5 эти классы находились в пространстве имен `Microsoft.IdentityModel.Web`.</span><span class="sxs-lookup"><span data-stu-id="6a96e-192">In WIF 3.5 these classes were in the `Microsoft.IdentityModel.Web` namespace.</span></span>

- <span data-ttu-id="6a96e-193">Классы из пространства имен `Microsoft.IdentityModel.Web.Configuration` перенесены в <xref:System.IdentityModel.Services.Configuration?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6a96e-193">The classes in the `Microsoft.IdentityModel.Web.Configuration` namespace have been moved to <xref:System.IdentityModel.Services.Configuration?displayProperty=nameWithType>.</span></span> <span data-ttu-id="6a96e-194">Эти классы представляют объекты, относящиеся к конфигурации в пассивных сценариях.</span><span class="sxs-lookup"><span data-stu-id="6a96e-194">These classes represent objects specific to configuration in passive scenarios.</span></span>

- <span data-ttu-id="6a96e-195">`FederatedPassiveSignInControl` больше не поддерживается. Из версии WIF 4.5 исключены все классы из пространства имен `Microsoft.IdentityModel.Web.Controls`.</span><span class="sxs-lookup"><span data-stu-id="6a96e-195">The `FederatedPassiveSignInControl` is no longer supported; all classes in the `Microsoft.IdentityModel.Web.Controls` namespace have been removed from WIF 4.5.</span></span>

- <span data-ttu-id="6a96e-196">Функции выхода из модуля проверки подлинности WS-Federation (<xref:System.IdentityModel.Services.WSFederationAuthenticationModule>) отличаются от представленных в WIF 3.5.</span><span class="sxs-lookup"><span data-stu-id="6a96e-196">The WS-Federation Authentication Module (<xref:System.IdentityModel.Services.WSFederationAuthenticationModule>) sign-out functionality is different than WIF 3.5.</span></span> <span data-ttu-id="6a96e-197">Дополнительные сведения о функциях выхода на платформе WIF 4.5 см. в разделе, посвященном классу <xref:System.IdentityModel.Services.WSFederationAuthenticationModule>.</span><span class="sxs-lookup"><span data-stu-id="6a96e-197">For more details about how sign-out works in WIF 4.5, see the <xref:System.IdentityModel.Services.WSFederationAuthenticationModule> class topic.</span></span>

### <a name="active-wcfws-trust-scenarios"></a><span data-ttu-id="6a96e-198">Активные сценарии (WCF/WS-Trust):</span><span class="sxs-lookup"><span data-stu-id="6a96e-198">Active (WCF/WS-Trust) Scenarios:</span></span>

- <span data-ttu-id="6a96e-199">В версии WIF 4.5 пространство имен `Microsoft.IdentityModel.Protocols.WSTrust` разбито на два пространства имен.</span><span class="sxs-lookup"><span data-stu-id="6a96e-199">The `Microsoft.IdentityModel.Protocols.WSTrust` namespace has been split mainly into two namespaces in WIF 4.5.</span></span> <span data-ttu-id="6a96e-200">Классы, представляющие связанные с протоколом WS-Trust артефакты, теперь находятся в <xref:System.IdentityModel.Protocols.WSTrust?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6a96e-200">Classes that represent artifacts that are specific to the WS-Trust protocol are now in <xref:System.IdentityModel.Protocols.WSTrust?displayProperty=nameWithType>.</span></span> <span data-ttu-id="6a96e-201">К ним относятся такие классы, как <xref:System.IdentityModel.Protocols.WSTrust.RequestSecurityToken>.</span><span class="sxs-lookup"><span data-stu-id="6a96e-201">This includes classes like <xref:System.IdentityModel.Protocols.WSTrust.RequestSecurityToken>.</span></span> <span data-ttu-id="6a96e-202">Классы, которые представляют контракты служб, каналы, узлы служб и другие артефакты, связанные с применением WS-Trust в приложениях WCF, перенесены в <xref:System.ServiceModel.Security?displayProperty=nameWithType> (например, интерфейс <xref:System.ServiceModel.Security.IWSTrust13AsyncContract>).</span><span class="sxs-lookup"><span data-stu-id="6a96e-202">Classes that represent service contracts, channels, service hosts and other artifacts that are involved in using WS-Trust in WCF applications have been moved to <xref:System.ServiceModel.Security?displayProperty=nameWithType>; for example, the <xref:System.ServiceModel.Security.IWSTrust13AsyncContract> interface.</span></span>

- <span data-ttu-id="6a96e-203">Значительно упрощена настройка приложения WCF для работы с платформой WIF.</span><span class="sxs-lookup"><span data-stu-id="6a96e-203">Configuring a WCF application to use WIF has been greatly simplified.</span></span> <span data-ttu-id="6a96e-204">Ранее в качестве расширения поведения добавлялось `Microsoft.IdentityModel.Configuration.ConfigureServiceHostBehaviorExtensionElement`, после чего эта функция использовалась для добавления возможностей WIF в службу с помощью элемента `<federatedServiceHostConfiguration>`.</span><span class="sxs-lookup"><span data-stu-id="6a96e-204">Previously the `Microsoft.IdentityModel.Configuration.ConfigureServiceHostBehaviorExtensionElement` had to be added as a behavior extension and this functionality was then used to wedge WIF into the service behavior by specifying a `<federatedServiceHostConfiguration>` element.</span></span> <span data-ttu-id="6a96e-205">Версия WIF 4.5 обеспечивает более тесную интеграцию с WCF.</span><span class="sxs-lookup"><span data-stu-id="6a96e-205">WIF 4.5 has been more tightly integrated with WCF.</span></span> <span data-ttu-id="6a96e-206">Теперь функции WIF для службы WCF можно реализовать с помощью атрибута `useIdentityConfiguration` элемента `<system.serviceModel>`/`<behaviors>`/`<serviceBehaviors>`/`<serviceCredentials>`, как показано в следующем коде XML:</span><span class="sxs-lookup"><span data-stu-id="6a96e-206">Now you enable WIF on a WCF service by specifying the `useIdentityConfiguration` attribute on the `<system.serviceModel>`/`<behaviors>`/`<serviceBehaviors>`/`<serviceCredentials>` element as in the following XML:</span></span>

    ```xml
    <serviceCredentials useIdentityConfiguration="true">
        <!--Certificate added by Identity And Access VS Package.  Subject='CN=localhost', Issuer='CN=localhost'. Make sure you have this certificate installed. The Identity and Access tool does not install this certificate.-->
        <serviceCertificate findValue="CN=localhost" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectDistinguishedName" />
    </serviceCredentials>
    ```

- <span data-ttu-id="6a96e-207">В версии WIF 4.5 сертификат службы, используемый активной службой (WCF), необходимо указывать на узле службы.</span><span class="sxs-lookup"><span data-stu-id="6a96e-207">In WIF 4.5 the service certificate used by an active (WCF) service must be specified on the service host.</span></span> <span data-ttu-id="6a96e-208">В файле конфигурации это можно сделать с помощью элемента `<system.serviceModel>`/`<behaviors>`/`<serviceBehaviors>`/`<serviceCredentials>`/`<serviceCertificate>`, как показано в предыдущем примере.</span><span class="sxs-lookup"><span data-stu-id="6a96e-208">In configuration, you can do this through the `<system.serviceModel>`/`<behaviors>`/`<serviceBehaviors>`/`<serviceCredentials>`/`<serviceCertificate>` element as shown in the preceding example.</span></span> <span data-ttu-id="6a96e-209">В версии WIF 3.5 сертификат службы можно было указать с помощью дочернего элемента `<serviceCertificate>` в элементе WIF `<service>`.</span><span class="sxs-lookup"><span data-stu-id="6a96e-209">In WIF 3.5 the service certificate could be specified through the `<serviceCertificate>` child element of the WIF `<service>` element.</span></span> <span data-ttu-id="6a96e-210">В версии WIF 4.5 эта функция отсутствует. Вместо нее элемент `<serviceCertificate>` следует задавать в элементе `<serviceCredentials>`.</span><span class="sxs-lookup"><span data-stu-id="6a96e-210">This functionality does not exist in WIF 4.5; specify the `<serviceCertificate>` element under the `<serviceCredentials>` element instead.</span></span>

- <span data-ttu-id="6a96e-211">Классы, используемые для добавления возможностей WIF 3.5 в WCF, больше не существуют.</span><span class="sxs-lookup"><span data-stu-id="6a96e-211">The classes used to wedge WIF 3.5 into WCF no longer exist.</span></span> <span data-ttu-id="6a96e-212">К ним относятся следующие классы в пространстве имен `Microsoft.IdentityModel.Tokens`: `FederatedSecurityTokenManager`, `FederatedServiceCredentials` и `IdentityModelServiceAuthorizationManager`, а также класс `Microsoft.IdentityModel.Configuration.ConfigureServiceHostBehaviorExtensionElement`.</span><span class="sxs-lookup"><span data-stu-id="6a96e-212">This includes the following classes in the `Microsoft.IdentityModel.Tokens` namespace: `FederatedSecurityTokenManager`, `FederatedServiceCredentials`, and `IdentityModelServiceAuthorizationManager`, as well as the `Microsoft.IdentityModel.Configuration.ConfigureServiceHostBehaviorExtensionElement` class.</span></span>

## <a name="enabling-wif-35-in-windows-8"></a><span data-ttu-id="6a96e-213">Поддержка WIF 3.5 в ОС Windows 8</span><span class="sxs-lookup"><span data-stu-id="6a96e-213">Enabling WIF 3.5 in Windows 8</span></span>

<span data-ttu-id="6a96e-214">Поскольку платформа WIF 4.5 входит в состав .NET 4.5, она автоматически поддерживается на компьютерах под управлением ОС Windows 8 и Windows Server 2012. Поэтому приложения, построенные с использованием WIF 4.5, по умолчанию будут выполняться в ОС Windows 8 или Windows Server 2012.</span><span class="sxs-lookup"><span data-stu-id="6a96e-214">Because WIF 4.5 is part of .NET 4.5, it is automatically enabled on computers running Windows 8 and Windows Server 2012 and applications that are built using WIF 4.5 will run under Windows 8 or Windows Server 2012 by default.</span></span> <span data-ttu-id="6a96e-215">В некоторых случаях требуется запускать приложения, созданные с помощью WIF 3.5, на компьютерах под управлением ОС Windows 8 или Windows Server 2012.</span><span class="sxs-lookup"><span data-stu-id="6a96e-215">However, you may need to run applications that were built using WIF 3.5 on a computer that is running Windows 8 or Windows Server 2012.</span></span> <span data-ttu-id="6a96e-216">В таких ситуациях на целевом компьютере необходимо включить поддержку WIF 3.5.</span><span class="sxs-lookup"><span data-stu-id="6a96e-216">In this case, you need to enable WIF 3.5 on the target computer.</span></span> <span data-ttu-id="6a96e-217">На компьютере под управлением Windows 8 это можно сделать с помощью системы обслуживания образов развертывания и управления ими (DISM).</span><span class="sxs-lookup"><span data-stu-id="6a96e-217">On a computer running Windows 8, you can do this by using the Deployment Image Servicing and Management (DISM) tool.</span></span> <span data-ttu-id="6a96e-218">На компьютере под управлением Windows Server 2012 для этих целей можно использовать средство DISM или командлет `Add-WindowsFeature` в Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6a96e-218">On a computer running Windows Server 2012, you can use the DISM tool or you can use the Windows PowerShell `Add-WindowsFeature` cmdlet.</span></span> <span data-ttu-id="6a96e-219">В обоих случаях соответствующие команды могут вызываться из командной строки или из среды Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6a96e-219">In both cases, the appropriate commands can be invoked either at the command line or from inside the Windows PowerShell environment.</span></span>

<span data-ttu-id="6a96e-220">Ниже показано, как использовать средство DISM из командной строки или среды Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6a96e-220">The following commands show how to use the DISM tool from either the command line or from inside the Windows PowerShell environment.</span></span> <span data-ttu-id="6a96e-221">По умолчанию модуль DISM PowerShell входит в состав Windows 8 и Windows Server 2012. Импортировать его не требуется.</span><span class="sxs-lookup"><span data-stu-id="6a96e-221">By default, the DISM PowerShell module is included in Windows 8 and Windows Server 2012 and does not need to be imported.</span></span> <span data-ttu-id="6a96e-222">Дополнительные сведения об использовании DISM в Windows PowerShell см. в разделе [Использование средства DISM в Windows PowerShell](https://go.microsoft.com/fwlink/?LinkId=254419).</span><span class="sxs-lookup"><span data-stu-id="6a96e-222">For more information about using DISM with Windows PowerShell, see [How to Use DISM in Windows PowerShell](https://go.microsoft.com/fwlink/?LinkId=254419).</span></span>

<span data-ttu-id="6a96e-223">Включение поддержки WIF 3.5 с помощью DISM:</span><span class="sxs-lookup"><span data-stu-id="6a96e-223">To enable WIF 3.5 using DISM:</span></span>

```console
dism /online /enable-feature:windows-identity-foundation
```

<span data-ttu-id="6a96e-224">Отключение поддержки WIF 3.5 с помощью DISM:</span><span class="sxs-lookup"><span data-stu-id="6a96e-224">To disable WIF 3.5 using DISM:</span></span>

```console
dism /online /disable-feature:windows-identity-foundation
```

<span data-ttu-id="6a96e-225">Проверка включаемых и выключаемых с помощью средства DISM функций:</span><span class="sxs-lookup"><span data-stu-id="6a96e-225">To check which features are enabled or disabled using DISM:</span></span>

```console
dism /online /get-features
```

<span data-ttu-id="6a96e-226">Кроме того, на компьютерах под управлением Windows Server 2012 поддержку WIF 3.5 можно включить с помощью командлета `Add-WindowsFeature` в Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6a96e-226">Alternatively, on computers running Windows Server 2012, you can enable WIF 3.5 by using the Windows PowerShell `Add-WindowsFeature` cmdlet.</span></span> <span data-ttu-id="6a96e-227">Для этого введите следующую команду в командной строке:</span><span class="sxs-lookup"><span data-stu-id="6a96e-227">To do so from the command line, you can enter the following command:</span></span>

```console
powershell "add-windowsfeature windows-identity-foundation"
```

 <span data-ttu-id="6a96e-228">В среде Windows PowerShell можно ввести следующую команду напрямую:</span><span class="sxs-lookup"><span data-stu-id="6a96e-228">From inside the Windows PowerShell environment, you can enter the command directly:</span></span>

```powershell
Add-WindowsFeature windows-identity-foundation
```

> [!NOTE]
> <span data-ttu-id="6a96e-229">Поскольку многие классы в WIF 3.5 и WIF 4.5 имеют одинаковые имена, для проведения различий между ними при совместном использовании версий WIF 3.5 и WIF 4.5 необходимо использовать полные имена классов или псевдонимы пространств имен.</span><span class="sxs-lookup"><span data-stu-id="6a96e-229">Because many of the classes in WIF 3.5 and WIF 4.5 share the same names, when you are using both WIF 3.5 and WIF 4.5 together, be sure to either use fully qualified class names or use namespace aliases to distinguish between classes in WIF 3.5 and WIF 4.5.</span></span>

## <a name="see-also"></a><span data-ttu-id="6a96e-230">См. также</span><span class="sxs-lookup"><span data-stu-id="6a96e-230">See also</span></span>

- [<span data-ttu-id="6a96e-231">Схема конфигурации WIF</span><span class="sxs-lookup"><span data-stu-id="6a96e-231">WIF Configuration Schema</span></span>](../configure-apps/file-schema/windows-identity-foundation/index.md)
- [<span data-ttu-id="6a96e-232">Сопоставление пространств имен между WIF 3.5 и WIF 4.5</span><span class="sxs-lookup"><span data-stu-id="6a96e-232">Namespace Mapping between WIF 3.5 and WIF 4.5</span></span>](namespace-mapping-between-wif-3-5-and-wif-4-5.md)
- [<span data-ttu-id="6a96e-233">Новые возможности Windows Identity Foundation 4.5</span><span class="sxs-lookup"><span data-stu-id="6a96e-233">What's New in Windows Identity Foundation 4.5</span></span>](whats-new-in-wif.md)
- [<span data-ttu-id="6a96e-234">Средство Identity and Access Tool для Visual Studio 2012</span><span class="sxs-lookup"><span data-stu-id="6a96e-234">Identity and Access Tool for Visual Studio 2012</span></span>](identity-and-access-tool-for-vs.md)
