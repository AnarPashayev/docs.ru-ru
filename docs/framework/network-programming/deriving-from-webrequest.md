---
title: Наследование от WebResponse
ms.date: 03/30/2017
helpviewer_keywords:
- WebRequest class, pluggable protocols
- protocol-specific request handler
- sending data, pluggable protocols
- pluggable protocols, class criteria
- Internet, pluggable protocols
- receiving data, pluggable protocols
- protocols, pluggable
ms.assetid: 9810c177-973e-43d7-823c-14960bd625ea
ms.openlocfilehash: 6bee864f8d24076d16f226c29d61801e856739d9
ms.sourcegitcommit: 289e06e904b72f34ac717dbcc5074239b977e707
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/17/2019
ms.locfileid: "71048602"
---
# <a name="deriving-from-webrequest"></a><span data-ttu-id="4a0fc-102">Наследование от WebResponse</span><span class="sxs-lookup"><span data-stu-id="4a0fc-102">Deriving from WebRequest</span></span>
<span data-ttu-id="4a0fc-103"><xref:System.Net.WebRequest> — это абстрактный базовый класс, который предоставляет базовые методы и свойства для создания обработчика запросов определенного протокола в соответствии с требованиями модели подключаемых протоколов .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-103">The <xref:System.Net.WebRequest> class is an abstract base class that provides the basic methods and properties for creating a protocol-specific request handler that fits the .NET Framework pluggable protocol model.</span></span> <span data-ttu-id="4a0fc-104">Приложения, использующие класс **WebRequest**, могут запрашивать данные с использованием любого поддерживаемого протокола, не указывая конкретный протокол.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-104">Applications that use the **WebRequest** class can request data using any supported protocol without needing to specify the protocol used.</span></span>  
  
 <span data-ttu-id="4a0fc-105">Чтобы использовать класс определенного протокола в качестве подключаемого протокола, должны соблюдаться два условия: класс должен реализовывать интерфейс <xref:System.Net.IWebRequestCreate> и выполнять регистрацию с использованием метода <xref:System.Net.WebRequest.RegisterPrefix%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-105">Two criteria must be met in order for a protocol-specific class to be used as a pluggable protocol: The class must implement the <xref:System.Net.IWebRequestCreate> interface, and it must register with the <xref:System.Net.WebRequest.RegisterPrefix%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="4a0fc-106">Для предоставления подключаемого интерфейса класс должен переопределять все абстрактные методы и свойства класса **WebRequest**.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-106">The class must override all the abstract methods and properties of **WebRequest** to provide the pluggable interface.</span></span>  
  
 <span data-ttu-id="4a0fc-107">Экземпляры **WebRequest** предназначены для однократного использования. Чтобы выполнить другой запрос, необходимо создать новый экземпляр **WebRequest**.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-107">**WebRequest** instances are intended for one-time use; if you want to make another request, create a new **WebRequest**.</span></span> <span data-ttu-id="4a0fc-108">Класс **WebRequest** поддерживает интерфейс <xref:System.Runtime.Serialization.ISerializable>, с помощью которого разработчик может выполнить сериализацию шаблона **WebRequest**, а затем воссоздать шаблон для дополнительных запросов.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-108">**WebRequest** supports the <xref:System.Runtime.Serialization.ISerializable> interface to enable developers to serialize a template **WebRequest** and then reconstruct the template for additional requests.</span></span>  
  
## <a name="iwebrequest-create-method"></a><span data-ttu-id="4a0fc-109">Метод IWebRequest Create</span><span class="sxs-lookup"><span data-stu-id="4a0fc-109">IWebRequest Create Method</span></span>  
 <span data-ttu-id="4a0fc-110">Метод <xref:System.Net.IWebRequestCreate.Create%2A> используется для инициализации нового экземпляра класса определенного протокола.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-110">The <xref:System.Net.IWebRequestCreate.Create%2A> method is responsible for initializing a new instance of the protocol-specific class.</span></span> <span data-ttu-id="4a0fc-111">При создании нового экземпляра **WebRequest** метод <xref:System.Net.WebRequest.Create%2A?displayProperty=nameWithType> сопоставляет запрашиваемый URI с префиксами URI, зарегистрированными с помощью метода **RegisterPrefix**.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-111">When a new **WebRequest** is created, the <xref:System.Net.WebRequest.Create%2A?displayProperty=nameWithType> method matches the requested URI with the URI prefixes registered with the **RegisterPrefix** method.</span></span> <span data-ttu-id="4a0fc-112">Метод **Create** соответствующего потомка класса определенного протокола должен возвращать инициализированный экземпляр потомка, который может выполнить стандартную операцию запроса-ответа для протокола, не изменяя при этом соответствующие протоколу поля.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-112">The **Create** method of the proper protocol-specific descendant must return an initialized instance of the descendant capable of performing a standard request/response transaction for the protocol without needing any protocol-specific fields modified.</span></span>  
  
## <a name="connectiongroupname-property"></a><span data-ttu-id="4a0fc-113">Свойство ConnectionGroupName</span><span class="sxs-lookup"><span data-stu-id="4a0fc-113">ConnectionGroupName Property</span></span>  
 <span data-ttu-id="4a0fc-114">Свойство <xref:System.Net.WebRequest.ConnectionGroupName%2A> используется для присваивания имени группе подключений к ресурсу, чтобы выполнять несколько запросов с применением одного подключения.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-114">The <xref:System.Net.WebRequest.ConnectionGroupName%2A> property is used to name a group of connections to a resource so that multiple requests can be made over a single connection.</span></span> <span data-ttu-id="4a0fc-115">Чтобы реализовать совместное использование подключения, необходимо применить метод определенного протокола для опроса и присваивания подключений.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-115">To implement connection-sharing, you must use a protocol-specific method of pooling and assigning connections.</span></span> <span data-ttu-id="4a0fc-116">Например, предоставленный класс <xref:System.Net.ServicePointManager> реализует совместное использование подключения для класса <xref:System.Net.HttpWebRequest>.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-116">For example, the provided <xref:System.Net.ServicePointManager> class implements connection sharing for the <xref:System.Net.HttpWebRequest> class.</span></span> <span data-ttu-id="4a0fc-117">Класс **ServicePointManager** создает <xref:System.Net.ServicePoint>, который предоставляет подключение к конкретному серверу для каждой группы подключений.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-117">The **ServicePointManager** class creates a <xref:System.Net.ServicePoint> that provides a connection to a specific server for each connection group.</span></span>  
  
## <a name="contentlength-property"></a><span data-ttu-id="4a0fc-118">Свойство ContentLength</span><span class="sxs-lookup"><span data-stu-id="4a0fc-118">ContentLength Property</span></span>  
 <span data-ttu-id="4a0fc-119">Свойство <xref:System.Net.WebRequest.ContentLength%2A> задает число байтов, которое будет передаваться на сервер при загрузке данных.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-119">The <xref:System.Net.WebRequest.ContentLength%2A> property specifies the number of bytes of data that will be sent to the server when uploading data.</span></span>  
  
 <span data-ttu-id="4a0fc-120">Как правило, свойство <xref:System.Net.WebRequest.Method%2A> передается, указывая на идущий процесс загрузки, а свойству **ContentLength** присваивается значение больше нуля.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-120">Typically the <xref:System.Net.WebRequest.Method%2A> property must be set to indicate that an upload is taking place when the **ContentLength** property is set to a value greater than zero.</span></span>  
  
## <a name="contenttype-property"></a><span data-ttu-id="4a0fc-121">Свойство ContentType</span><span class="sxs-lookup"><span data-stu-id="4a0fc-121">ContentType Property</span></span>  
 <span data-ttu-id="4a0fc-122">Свойство <xref:System.Net.WebRequest.ContentType%2A> предоставляет особые сведения, которые необходимы протоколу для отправки на сервер, чтобы идентифицировать тип отправляемого содержимого.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-122">The <xref:System.Net.WebRequest.ContentType%2A> property provides any special information that your protocol requires you to send to the server to identify the type of content that you are sending.</span></span> <span data-ttu-id="4a0fc-123">Обычно это тип MIME загружаемых данных.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-123">Typically this is the MIME content type of any data uploaded.</span></span>  
  
## <a name="credentials-property"></a><span data-ttu-id="4a0fc-124">Свойство Credentials</span><span class="sxs-lookup"><span data-stu-id="4a0fc-124">Credentials Property</span></span>  
 <span data-ttu-id="4a0fc-125">Свойство <xref:System.Net.WebRequest.Credentials%2A> содержит информацию, необходимую для проверки подлинности запроса к серверу.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-125">The <xref:System.Net.WebRequest.Credentials%2A> property contains information needed to authenticate the request with the server.</span></span> <span data-ttu-id="4a0fc-126">Необходимо указать сведения о процессе проверки подлинности для протокола.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-126">You must implement the details of the authentication process for your protocol.</span></span> <span data-ttu-id="4a0fc-127">Класс <xref:System.Net.AuthenticationManager> обеспечивает проверку подлинности запросов и предоставляет маркер проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-127">The <xref:System.Net.AuthenticationManager> class is responsible for authenticating requests and providing an authentication token.</span></span> <span data-ttu-id="4a0fc-128">Класс, который предоставляет учетные данные, используемые протоколом, должен реализовывать интерфейс <xref:System.Net.ICredentials>.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-128">The class that provides the credentials used by your protocol must implement the <xref:System.Net.ICredentials> interface.</span></span>  
  
## <a name="headers-property"></a><span data-ttu-id="4a0fc-129">Свойство Headers</span><span class="sxs-lookup"><span data-stu-id="4a0fc-129">Headers Property</span></span>  
 <span data-ttu-id="4a0fc-130">Свойство <xref:System.Net.WebRequest.Headers%2A> содержит произвольную коллекцию пар "имя-значение" для метаданных, связанных с запросом.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-130">The <xref:System.Net.WebRequest.Headers%2A> property contains an arbitrary collection of name/value pairs of metadata associated with the request.</span></span> <span data-ttu-id="4a0fc-131">В свойство **Headers** можно включать любые метаданные для протокола, которые могут быть выражены в виде пар "имя-значение".</span><span class="sxs-lookup"><span data-stu-id="4a0fc-131">Any metadata needed by the protocol that can be expressed as a name/value pair can be included in the **Headers** property.</span></span> <span data-ttu-id="4a0fc-132">Как правило, эти сведения необходимо передавать до вызова методов <xref:System.Net.WebRequest.GetRequestStream%2A> или <xref:System.Net.WebRequest.GetResponse%2A>. После выполнения запроса метаданные будут доступны только для чтения.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-132">Typically this information must be set before calling the <xref:System.Net.WebRequest.GetRequestStream%2A> or <xref:System.Net.WebRequest.GetResponse%2A> methods; once the request has been made, the metadata is considered read-only.</span></span>  
  
 <span data-ttu-id="4a0fc-133">Чтобы использовать метаданные заголовка, применять свойство **Headers** необязательно.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-133">You are not required to use the **Headers** property to use header metadata.</span></span> <span data-ttu-id="4a0fc-134">Относящиеся к протоколу метаданные могут предоставляться в виде свойств. Например, свойство <xref:System.Net.HttpWebRequest.UserAgent%2A?displayProperty=nameWithType> предоставляет заголовок HTTP **User-Agent**.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-134">Protocol-specific metadata can be exposed as properties; for example, the <xref:System.Net.HttpWebRequest.UserAgent%2A?displayProperty=nameWithType> property exposes the **User-Agent** HTTP header.</span></span> <span data-ttu-id="4a0fc-135">Если метаданные заголовка предоставляются в виде свойства, необходимо запретить установку этого свойства с использованием свойства **Headers**.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-135">When you expose header metadata as a property, you should not allow the same property to be set using the **Headers** property.</span></span>  
  
## <a name="method-property"></a><span data-ttu-id="4a0fc-136">Свойство Method</span><span class="sxs-lookup"><span data-stu-id="4a0fc-136">Method Property</span></span>  
 <span data-ttu-id="4a0fc-137">Свойство <xref:System.Net.WebRequest.Method%2A> содержит команду или операцию, которую должен выполнить сервер при получении запроса.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-137">The <xref:System.Net.WebRequest.Method%2A> property contains the verb or action that the request is asking the server to perform.</span></span> <span data-ttu-id="4a0fc-138">Значение свойства **Method** по умолчанию должно обеспечивать выполнение стандартной операции запроса-ответа без установки относящихся к протоколу свойств.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-138">The default for the **Method** property must enable a standard request/response action without requiring any protocol-specific properties to be set.</span></span> <span data-ttu-id="4a0fc-139">Например, в качестве метода <xref:System.Net.HttpWebResponse.Method%2A> по умолчанию устанавливается GET, который запрашивает ресурс с веб-сервера и возвращает ответ.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-139">For example, the <xref:System.Net.HttpWebResponse.Method%2A> method defaults to GET, which requests a resource from a Web server and returns the response.</span></span>  
  
 <span data-ttu-id="4a0fc-140">Как правило, свойству **ContentLength** присваивается положительное значение, а свойство **Method** содержит команду или операцию, указывая на идущий процесс загрузки.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-140">Typically the **ContentLength** property must be set to a value greater than zero when the **Method** property is set to a verb or action that indicates that an upload is taking place.</span></span>  
  
## <a name="preauthenticate-property"></a><span data-ttu-id="4a0fc-141">Свойство PreAuthenticate</span><span class="sxs-lookup"><span data-stu-id="4a0fc-141">PreAuthenticate Property</span></span>  
 <span data-ttu-id="4a0fc-142">Свойство <xref:System.Net.WebRequest.PreAuthenticate%2A> задается приложениями, указывая на то, что данные для проверки подлинности должны отправляться с первоначальным запросом, не дожидаясь встречного запроса проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-142">Applications set the <xref:System.Net.WebRequest.PreAuthenticate%2A> property to indicate that authentication information should be sent with the initial request rather than waiting for an authentication challenge.</span></span> <span data-ttu-id="4a0fc-143">Свойство **PreAuthenticate** учитывается только в том случае, если протокол поддерживает передачу учетных данных проверки подлинности вместе с первоначальным запросом.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-143">The **PreAuthenticate** property is only meaningful if the protocol supports authentication credentials sent with the initial request.</span></span>  
  
## <a name="proxy-property"></a><span data-ttu-id="4a0fc-144">Свойство Proxy</span><span class="sxs-lookup"><span data-stu-id="4a0fc-144">Proxy Property</span></span>  
 <span data-ttu-id="4a0fc-145">Свойство <xref:System.Net.WebRequest.Proxy%2A> содержит интерфейс <xref:System.Net.IWebProxy>, который используется для доступа к запрашиваемому ресурсу.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-145">The <xref:System.Net.WebRequest.Proxy%2A> property contains an <xref:System.Net.IWebProxy> interface that is used to access the requested resource.</span></span> <span data-ttu-id="4a0fc-146">Свойство **Proxy** учитывается только в том случае, если протокол поддерживает запросы через прокси.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-146">The **Proxy** property is meaningful only if your protocol supports proxied requests.</span></span> <span data-ttu-id="4a0fc-147">Если этого требует протокол, необходимо задать прокси-сервер по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-147">You must set the default proxy if one is required by your protocol.</span></span>  
  
 <span data-ttu-id="4a0fc-148">В некоторых средах, например, защищенных корпоративным брандмауэром, использование прокси-сервера протоколом может быть обязательным.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-148">In some environments, such as behind a corporate firewall, your protocol might be required to use a proxy.</span></span> <span data-ttu-id="4a0fc-149">В этом случае необходимо реализовать интерфейс **IWebProxy**, чтобы создать прокси-класс для работы с протоколом.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-149">In that case, you must implement the **IWebProxy** interface to create a proxy class that will work for your protocol.</span></span>  
  
## <a name="requesturi-property"></a><span data-ttu-id="4a0fc-150">Свойство RequestUri</span><span class="sxs-lookup"><span data-stu-id="4a0fc-150">RequestUri Property</span></span>  
 <span data-ttu-id="4a0fc-151">Свойство <xref:System.Net.WebRequest.RequestUri%2A> содержит URI, который был передан в метод **WebRequest.Create**.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-151">The <xref:System.Net.WebRequest.RequestUri%2A> property contains the URI that was passed to the **WebRequest.Create** method.</span></span> <span data-ttu-id="4a0fc-152">После создания экземпляра **WebRequest** это свойство будет доступно только для чтения и не может быть изменено.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-152">It is read-only and cannot be changed once the **WebRequest** has been created.</span></span> <span data-ttu-id="4a0fc-153">Если протокол поддерживает перенаправление, ответ может поступать от ресурса с другим URI.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-153">If your protocol supports redirection, the response can come from a resource identified by a different URI.</span></span> <span data-ttu-id="4a0fc-154">Если требуется предоставить доступ к URI, от которого поступил ответ, необходимо предоставить дополнительное свойство, содержащее этот URI.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-154">If you need to provide access to the URI that responded, you must provide an additional property containing that URI.</span></span>  
  
## <a name="timeout-property"></a><span data-ttu-id="4a0fc-155">Свойство времени ожидания</span><span class="sxs-lookup"><span data-stu-id="4a0fc-155">Timeout Property</span></span>  
 <span data-ttu-id="4a0fc-156">Свойство <xref:System.Net.WebRequest.Timeout%2A> содержит продолжительность периода ожидания запроса в миллисекундах, по истечении которого возникает исключение.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-156">The <xref:System.Net.WebRequest.Timeout%2A> property contains the length of time, in milliseconds, to wait before the request times out and throws an exception.</span></span> <span data-ttu-id="4a0fc-157">Свойство **Timeout** применяется только к синхронным запросам, выполняемым с помощью метода <xref:System.Net.WebRequest.GetResponse%2A>. Чтобы отменить ожидающий асинхронный запрос, следует использовать метод <xref:System.Net.WebRequest.Abort%2A>.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-157">**Timeout** applies only to synchronous requests made with the <xref:System.Net.WebRequest.GetResponse%2A> method; asynchronous requests must use the <xref:System.Net.WebRequest.Abort%2A> method to cancel a pending request.</span></span>  
  
 <span data-ttu-id="4a0fc-158">Свойство **Timeout** учитывается только в том случае, если в классе определенного протокола реализуется процесс управления временем ожидания.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-158">Setting the **Timeout** property is meaningful only if the protocol-specific class implements a time-out process.</span></span>  
  
## <a name="abort-method"></a><span data-ttu-id="4a0fc-159">Метод Abort</span><span class="sxs-lookup"><span data-stu-id="4a0fc-159">Abort Method</span></span>  
 <span data-ttu-id="4a0fc-160">Метод <xref:System.Net.WebRequest.Abort%2A> отменяет ожидающий асинхронный запрос к серверу.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-160">The <xref:System.Net.WebRequest.Abort%2A> method cancels a pending asynchronous request to a server.</span></span> <span data-ttu-id="4a0fc-161">Если после отмены запроса вызвать метод **GetResponse**, **BeginGetResponse**, **EndGetResponse**, **GetRequestStream**, **BeginGetRequestStream** или **EndGetRequestStream**, возникнет исключение <xref:System.Net.WebException>, а свойству <xref:System.Net.WebException.Status%2A> будет присвоено значение <xref:System.Net.WebExceptionStatus>.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-161">After the request has been canceled, calling **GetResponse**, **BeginGetResponse**, **EndGetResponse**, **GetRequestStream**, **BeginGetRequestStream**, or **EndGetRequestStream** will throw a <xref:System.Net.WebException> with the <xref:System.Net.WebException.Status%2A> property set to <xref:System.Net.WebExceptionStatus>.</span></span>  
  
## <a name="begingetrequeststream-and-endgetrequeststream-methods"></a><span data-ttu-id="4a0fc-162">Методы BeginGetRequestStream и EndGetRequestStream</span><span class="sxs-lookup"><span data-stu-id="4a0fc-162">BeginGetRequestStream and EndGetRequestStream Methods</span></span>  
 <span data-ttu-id="4a0fc-163">Метод <xref:System.Net.WebRequest.BeginGetRequestStream%2A> начинает выполнение асинхронного запроса для потока, который используется для загрузки данных на сервер.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-163">The <xref:System.Net.WebRequest.BeginGetRequestStream%2A> method starts an asynchronous request for the stream that is used to upload data to the server.</span></span> <span data-ttu-id="4a0fc-164">Метод <xref:System.Net.WebRequest.EndGetRequestStream%2A> завершает асинхронный запрос и возвращает запрошенный поток.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-164">The <xref:System.Net.WebRequest.EndGetRequestStream%2A> method completes the asynchronous request and returns the requested stream.</span></span> <span data-ttu-id="4a0fc-165">Эти методы реализуют метод **GetRequestStream** с использованием стандартной асинхронной модели .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-165">These methods implement the **GetRequestStream** method using the standard .NET Framework asynchronous pattern.</span></span>  
  
## <a name="begingetresponse-and-endgetresponse-methods"></a><span data-ttu-id="4a0fc-166">Методы BeginGetResponse и EndGetResponse</span><span class="sxs-lookup"><span data-stu-id="4a0fc-166">BeginGetResponse and EndGetResponse Methods</span></span>  
 <span data-ttu-id="4a0fc-167">Метод <xref:System.Net.WebRequest.BeginGetResponse%2A> начинает выполнение асинхронного запроса к серверу.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-167">The <xref:System.Net.WebRequest.BeginGetResponse%2A> method starts an asynchronous request to a server.</span></span> <span data-ttu-id="4a0fc-168">Метод <xref:System.Net.WebRequest.EndGetResponse%2A> завершает выполнение асинхронного запроса и возвращает запрошенный ответ.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-168">The <xref:System.Net.WebRequest.EndGetResponse%2A> method completes the asynchronous request and returns the requested response.</span></span> <span data-ttu-id="4a0fc-169">Эти методы реализуют метод **GetResponse** с использованием стандартной асинхронной модели .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-169">These methods implement the **GetResponse** method using the standard .NET Framework asynchronous pattern.</span></span>  
  
## <a name="getrequeststream-method"></a><span data-ttu-id="4a0fc-170">Метод GetRequestStream</span><span class="sxs-lookup"><span data-stu-id="4a0fc-170">GetRequestStream Method</span></span>  
 <span data-ttu-id="4a0fc-171">Метод <xref:System.Net.WebRequest.GetRequestStream%2A> возвращает поток, который используется для записи данных на запрашиваемый сервер.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-171">The <xref:System.Net.WebRequest.GetRequestStream%2A> method returns a stream that is used to write data to the requested server.</span></span> <span data-ttu-id="4a0fc-172">Возвращаемый поток должен быть доступен только для записи и не должен осуществлять поиск. Это однонаправленный поток данных, предназначенный для записи на сервер.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-172">The stream returned should be a write-only stream that does not seek; it is intended as a one-way stream of data that is written to the server.</span></span> <span data-ttu-id="4a0fc-173">Этот поток возвращает значение false для свойств <xref:System.IO.Stream.CanRead%2A> или <xref:System.IO.Stream.CanSeek%2A> и значение true для свойства <xref:System.IO.Stream.CanWrite%2A>.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-173">The stream returns false for the <xref:System.IO.Stream.CanRead%2A> and <xref:System.IO.Stream.CanSeek%2A> properties and true for the <xref:System.IO.Stream.CanWrite%2A> property.</span></span>  
  
 <span data-ttu-id="4a0fc-174">Метод **GetRequestStream** обычно открывает подключение к серверу и, прежде чем вернуть поток, отправляет данные заголовка, указывающие на то, что на сервер передаются данные.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-174">The **GetRequestStream** method typically opens a connection to the server and, before returning the stream, sends header information that indicates that data is being sent to the server.</span></span> <span data-ttu-id="4a0fc-175">Поскольку метод **GetRequestStream** начинает выполнение запроса, свойства **Header** или **ContentLength**, как правило, нельзя устанавливать после вызова метода **GetRequestStream**.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-175">Because **GetRequestStream** begins the request, setting any **Header** properties or the **ContentLength** property is typically not allowed after calling **GetRequestStream**.</span></span>  
  
## <a name="getresponse-method"></a><span data-ttu-id="4a0fc-176">Метод GetResponse</span><span class="sxs-lookup"><span data-stu-id="4a0fc-176">GetResponse Method</span></span>  
 <span data-ttu-id="4a0fc-177">Метод <xref:System.Net.WebRequest.GetResponse%2A> возвращает потомок класса определенного протокола <xref:System.Net.WebResponse>, который представляет ответ сервера.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-177">The <xref:System.Net.WebRequest.GetResponse%2A> method returns a protocol-specific descendant of the <xref:System.Net.WebResponse> class that represents the response from the server.</span></span> <span data-ttu-id="4a0fc-178">Если запрос не был ранее инициирован методом **GetRequestStream**, метод **GetResponse** создает подключение к ресурсу, на который указывает **RequestUri**, отправляет данные заголовка с типом выполняемого запроса, после чего принимает ответ ресурса.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-178">Unless the request has already been initiated by the **GetRequestStream** method, the **GetResponse** method creates a connection to the resource identified by **RequestUri**, sends header information indicating the type of request being made, and then receives the response from the resource.</span></span>  
  
 <span data-ttu-id="4a0fc-179">После вызова метода **GetResponse** все свойства обрабатываются как доступные только для чтения.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-179">Once the **GetResponse** method is called, all properties should be considered read-only.</span></span> <span data-ttu-id="4a0fc-180">Экземпляры **WebRequest** предназначены для однократного использования. Чтобы выполнить другой запрос, необходимо создать новый экземпляр **WebRequest**.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-180">**WebRequest** instances are intended for one-time use; if you want to make another request, you should create a new **WebRequest**.</span></span>  
  
 <span data-ttu-id="4a0fc-181">Метод **GetResponse** используется для создания соответствующего потомка класса **WebResponse**, который содержит полученный ответ.</span><span class="sxs-lookup"><span data-stu-id="4a0fc-181">The **GetResponse** method is responsible for creating an appropriate **WebResponse** descendant to contain the incoming response.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4a0fc-182">См. также</span><span class="sxs-lookup"><span data-stu-id="4a0fc-182">See also</span></span>

- <xref:System.Net.WebRequest>
- <xref:System.Net.HttpWebRequest>
- <xref:System.Net.FileWebRequest>
- [<span data-ttu-id="4a0fc-183">Программирование подключаемых протоколов</span><span class="sxs-lookup"><span data-stu-id="4a0fc-183">Programming Pluggable Protocols</span></span>](programming-pluggable-protocols.md)
- [<span data-ttu-id="4a0fc-184">Наследование от класса WebResponse</span><span class="sxs-lookup"><span data-stu-id="4a0fc-184">Deriving from WebResponse</span></span>](deriving-from-webresponse.md)
