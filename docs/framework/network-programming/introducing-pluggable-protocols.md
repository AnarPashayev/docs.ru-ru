---
title: Введение в подключаемые протоколы
ms.date: 03/30/2017
helpviewer_keywords:
- data requests, pluggable protocols
- WebRequest class, pluggable protocols
- response to Internet request, pluggable protocols
- URI
- Windows Sockets
- request/response model
- sending data, pluggable protocols
- pluggable protocols
- WebClient class, about WebClient class
- pluggable protocols, about pluggable protocols
- Internet, pluggable protocols
- path identifiers
- Uniform Resource Identifier
- application development [.NET Framework], pluggable protocols
- requesting data from Internet, pluggable protocols
- receiving data, pluggable protocols
- protocols, pluggable
- server identifiers
- scheme identifiers
ms.assetid: 4b48e22d-e4e5-48f0-be80-d549bda97415
ms.openlocfilehash: 25d7b0e8b8b98d68a0fb4a3cadab3d9f3e8747bd
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2019
ms.locfileid: "59146150"
---
# <a name="introducing-pluggable-protocols"></a>Введение в подключаемые протоколы
Microsoft .NET Framework обеспечивает многоуровневую, расширяемую и управляемую реализацию служб Интернета, которую можно легко и быстро интегрировать в приложения. Классы доступа к Интернету в пространствах имен <xref:System.Net> и <xref:System.Net.Sockets> можно использовать для реализации веб-приложений и интернет-приложений.  
  
## <a name="internet-applications"></a>Интернет-приложения  
 Интернет-приложения можно разделить на два вида: клиентские приложения, запрашивающие сведения, и серверные приложения, которые отвечают на информационные запросы от клиентов. Классическим клиент-серверным приложением является Интернет, где пользователи с помощью браузеров получают доступ к документам и другим данным, хранящимся на веб-серверах по всему миру.  
  
 Приложения не ограничиваются только одной из этих ролей. Например, известный сервер приложений среднего уровня отвечает на запросы клиентов, запрашивая данные с другого сервера. В этом случае он выступает и как сервер, и как клиент.  
  
 Клиентское приложение выполняет запрос, идентифицируя запрашиваемый интернет-ресурс и протокол связи, используемый для запроса и ответа. При необходимости клиент также предоставляет любые дополнительные данные, необходимые для выполнения запроса, например расположение прокси-сервера или сведения для проверки подлинности (имя пользователя, пароль и т. д.). Как только запрос сформирован, его можно отправить на сервер.  
  
## <a name="identifying-resources"></a>Определение ресурсов  
 Для идентификации запрашиваемого интернет-ресурса и протокола связи .NET Framework использует универсальный код ресурса (URI). URI состоит по крайней мере из трех, а, возможно, и из четырех фрагментов: идентификатора схемы, который определяет протокол связи для запроса и ответа, идентификатора сервера, который состоит из имени узла DNS или TCP-адреса, однозначно определяющего сервер в Интернете, идентификатора пути, который находит запрошенные данные на сервере, и необязательной строки запроса, которая передает информацию от клиента серверу. Например, универсальный код ресурса (URI) `http://www.contoso.com/whatsnew.aspx?date=today` состоит из идентификатора схемы `http`, идентификатора сервера `www.contoso.com`, пути `/whatsnew.aspx` и строки запроса `?date=today`.  
  
 После того как сервер получит и обработает запрос, он возвращает ответ клиентскому приложению. Ответ содержит дополнительную информацию, например тип содержимого (к примеру, необработанный текст или XML-данные).  
  
## <a name="requests-and-responses-in-the-net-framework"></a>Запросы и ответы в .NET Framework  
 .NET Framework использует определенные классы для предоставления трех видов сведений, необходимые для доступа к интернет-ресурсам по модели запрос-ответ: класс <xref:System.Uri>, который содержит URI нужного интернет-ресурса, класс <xref:System.Net.WebRequest>, который содержит запрос для ресурса, и класс <xref:System.Net.WebResponse>, предоставляющий контейнер для входящего ответа.  
  
 Клиентские приложения создают экземпляры `WebRequest` путем передачи URI сетевого ресурса в метод <xref:System.Net.WebRequest.Create%2A>. Этот статический метод создает `WebRequest` для конкретного протокола, например HTTP. Возвращаемый `WebRequest` предоставляет доступ к свойствам, которые управляют запросом к серверу и доступом к потоку данных, отправляемому при выполнении запроса. Метод <xref:System.Net.WebRequest.GetResponse%2A> класса `WebRequest` отправляет запрос от клиентского приложения на сервер, указанный в URI. В случаях, когда ответ может быть задержан, запрос может быть выполнен асинхронно с помощью метода <xref:System.Net.WebRequest.BeginGetResponse%2A> класса **WebRequest** и ответ может быть возвращен позднее с помощью метода <xref:System.Net.WebRequest.EndGetResponse%2A>.  
  
 Методы **GetResponse** и **EndGetResponse** возвращают **WebResponse**, предоставляющий доступ к данным, возвращенным сервером. Так как эти данные указываются для запрашивающего приложения в виде потока методом <xref:System.Net.WebResponse.GetResponseStream%2A>, он может использоваться в приложении везде, где поддерживаются потоки данных.  
  
 Классы **WebRequest** и **WebResponse** являются основой для подключаемых протоколов — они представляют реализацию сетевых служб, которые позволяют разрабатывать приложения, использующие интернет-ресурсы, не беспокоясь об особенностях протокола, используемого каждым ресурсом. Классы-потомки класса **WebRequest** регистрируются с классом **WebRequest** для управления сведениями по установке фактических подключений к интернет-ресурсам.  
  
 Например, класс <xref:System.Net.HttpWebRequest> управляет сведениями подключения к интернет-ресурсу по протоколу HTTP. По умолчанию, когда метод **WebRequest.Create** обнаруживает URI, который начинается с "http:" или "https:" (идентификаторы протокола HTTP и безопасного HTTP), возвращаемый **WebRequest** можно использовать как есть либо его можно привести к **HttpWebRequest** для доступа к свойствам, связанным с определенным протоколом. В большинстве случаев **WebRequest** предоставляет все данные, необходимые для создания запроса.  
  
 В **WebRequest** можно использовать любой протокол, который может быть представлен в виде транзакции "запрос-ответ". Из **WebRequest** и **WebResponse** можно создать производные классы, связанные с определенным протоколом, и затем зарегистрировать их для использования приложением с помощью статического метода <xref:System.Net.WebRequest.RegisterPrefix%2A?displayProperty=nameWithType>.  
  
 Когда требуется авторизация клиента для интернет-запросов, свойство <xref:System.Net.WebRequest.Credentials%2A> класса **WebRequest** предоставляет необходимые учетные данные. Эти учетные данные могут представлять простую пару "имя-пароль" для базовой HTTP или дайджест-проверки подлинности или набор "имя-пароль-домен" для проверки подлинности NTLM или Kerberos. Один набор учетных данных может храниться в экземпляре <xref:System.Net.NetworkCredential>. Несколько наборов могут храниться одновременно в экземпляре <xref:System.Net.CredentialCache>. **CredentialCache** использует URI запроса и схему проверки подлинности, которую поддерживает сервер, чтобы определить, какие учетные данные следует отправить на сервер.  
  
## <a name="simple-requests-with-webclient"></a>Простые запросы с использованием WebClient  
 Для приложений, которым необходимо выполнять простые запросы интернет-ресурсов, класс <xref:System.Net.WebClient> предоставляет общие методы для отправки данных на интернет-сервер или для скачивания их с него. Класс **WebClient** использует класс **WebRequest** для предоставления доступа к интернет-ресурсам, поэтому класс **WebClient** может применять любой зарегистрированный подключаемый протокол.  
  
 Для приложений, которые не могут использовать модель "запрос-ответ ", или для приложений, которые должны прослушивать сеть, а также отправлять запросы, пространство имен **System.Net.Sockets** предоставляет классы <xref:System.Net.Sockets.TcpClient>, <xref:System.Net.Sockets.TcpListener> и <xref:System.Net.Sockets.UdpClient>. Эти классы обрабатывают сведения об установке подключений с использованием различных транспортных протоколов и предоставляют сетевое подключение приложению в виде потока.  
  
 Разработчикам, знакомым с интерфейсом сокетов Windows, или пользователям, которым требуется управление, предоставляемое программированием на уровне сокетов, окажутся полезны классы **System.Net.Sockets**. Классы **System.Net.Sockets** являются точкой перехода из управляемого кода в машинный код в раках классов **System.Net**. В большинстве случаев классы **System.Net.Sockets** выполняют маршалинг данных в свои 32-разрядные аналоги Windows, а также обрабатывают все необходимые проверки безопасности.  
  
## <a name="see-also"></a>См. также

- [Программирование подключаемых протоколов](../../../docs/framework/network-programming/programming-pluggable-protocols.md)
- [Сетевое программирование в .NET Framework](../../../docs/framework/network-programming/index.md)
- [Примеры сетевого программирования](../../../docs/framework/network-programming/network-programming-samples.md)
- [Примеры сетевых приложений для .NET в галерее кода MSDN](https://code.msdn.microsoft.com/Wiki/View.aspx?ProjectName=nclsamples)
