---
title: Введение в подключаемые протоколы
ms.date: 03/30/2017
helpviewer_keywords:
- data requests, pluggable protocols
- WebRequest class, pluggable protocols
- response to Internet request, pluggable protocols
- URI
- Windows Sockets
- request/response model
- sending data, pluggable protocols
- pluggable protocols
- WebClient class, about WebClient class
- pluggable protocols, about pluggable protocols
- Internet, pluggable protocols
- path identifiers
- Uniform Resource Identifier
- application development [.NET Framework], pluggable protocols
- requesting data from Internet, pluggable protocols
- receiving data, pluggable protocols
- protocols, pluggable
- server identifiers
- scheme identifiers
ms.assetid: 4b48e22d-e4e5-48f0-be80-d549bda97415
ms.openlocfilehash: 72b47b8159f9f6f0dc3a19c5cbf94335507d9e7d
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/15/2020
ms.locfileid: "71047865"
---
# <a name="introducing-pluggable-protocols"></a><span data-ttu-id="cf90a-102">Введение в подключаемые протоколы</span><span class="sxs-lookup"><span data-stu-id="cf90a-102">Introducing Pluggable Protocols</span></span>
<span data-ttu-id="cf90a-103">Microsoft .NET Framework обеспечивает многоуровневую, расширяемую и управляемую реализацию служб Интернета, которую можно легко и быстро интегрировать в приложения.</span><span class="sxs-lookup"><span data-stu-id="cf90a-103">The Microsoft .NET Framework provides a layered, extensible, and managed implementation of Internet services that can be integrated quickly and easily into your applications.</span></span> <span data-ttu-id="cf90a-104">Классы доступа к Интернету в пространствах имен <xref:System.Net> и <xref:System.Net.Sockets> можно использовать для реализации веб-приложений и интернет-приложений.</span><span class="sxs-lookup"><span data-stu-id="cf90a-104">The Internet access classes in the <xref:System.Net> and <xref:System.Net.Sockets> namespaces can be used to implement both Web-based and Internet-based applications.</span></span>  
  
## <a name="internet-applications"></a><span data-ttu-id="cf90a-105">Интернет-приложения</span><span class="sxs-lookup"><span data-stu-id="cf90a-105">Internet Applications</span></span>  
 <span data-ttu-id="cf90a-106">Интернет-приложения можно разделить на два вида: клиентские приложения, запрашивающие сведения, и серверные приложения, которые отвечают на информационные запросы от клиентов.</span><span class="sxs-lookup"><span data-stu-id="cf90a-106">Internet applications can be classified broadly into two kinds: client applications that request information and server applications that respond to information requests from clients.</span></span> <span data-ttu-id="cf90a-107">Классическим клиент-серверным приложением является Интернет, где пользователи с помощью браузеров получают доступ к документам и другим данным, хранящимся на веб-серверах по всему миру.</span><span class="sxs-lookup"><span data-stu-id="cf90a-107">The classic Internet client-server application is the World Wide Web, where people use browsers to access documents and other data stored on Web servers worldwide.</span></span>  
  
 <span data-ttu-id="cf90a-108">Приложения не ограничиваются только одной из этих ролей. Например, известный сервер приложений среднего уровня отвечает на запросы клиентов, запрашивая данные с другого сервера. В этом случае он выступает и как сервер, и как клиент.</span><span class="sxs-lookup"><span data-stu-id="cf90a-108">Applications are not limited to just one of these roles; for instance, the familiar middle-tier application server responds to requests from clients by requesting data from another server, in which case it is acting as both a server and a client.</span></span>  
  
 <span data-ttu-id="cf90a-109">Клиентское приложение выполняет запрос, идентифицируя запрашиваемый интернет-ресурс и протокол связи, используемый для запроса и ответа.</span><span class="sxs-lookup"><span data-stu-id="cf90a-109">The client application makes a request by identifying the requested Internet resource and the communication protocol to use for the request and response.</span></span> <span data-ttu-id="cf90a-110">При необходимости клиент также предоставляет любые дополнительные данные, необходимые для выполнения запроса, например расположение прокси-сервера или сведения для проверки подлинности (имя пользователя, пароль и т. д.).</span><span class="sxs-lookup"><span data-stu-id="cf90a-110">If necessary, the client also provides any additional data required to complete the request, such as proxy location or authentication information (user name, password, and so on).</span></span> <span data-ttu-id="cf90a-111">Как только запрос сформирован, его можно отправить на сервер.</span><span class="sxs-lookup"><span data-stu-id="cf90a-111">Once the request is formed, the request can be sent to the server.</span></span>  
  
## <a name="identifying-resources"></a><span data-ttu-id="cf90a-112">Определение ресурсов</span><span class="sxs-lookup"><span data-stu-id="cf90a-112">Identifying Resources</span></span>  
 <span data-ttu-id="cf90a-113">Для идентификации запрашиваемого интернет-ресурса и протокола связи .NET Framework использует универсальный код ресурса (URI).</span><span class="sxs-lookup"><span data-stu-id="cf90a-113">The .NET Framework uses a Uniform Resource Identifier (URI) to identify the requested Internet resource and communication protocol.</span></span> <span data-ttu-id="cf90a-114">URI состоит по крайней мере из трех, а, возможно, и из четырех фрагментов: идентификатора схемы, который определяет протокол связи для запроса и ответа, идентификатора сервера, который состоит из имени узла DNS или TCP-адреса, однозначно определяющего сервер в Интернете, идентификатора пути, который находит запрошенные данные на сервере, и необязательной строки запроса, которая передает информацию от клиента серверу.</span><span class="sxs-lookup"><span data-stu-id="cf90a-114">The URI consists of at least three, and possibly four, fragments: the scheme identifier, which identifies the communications protocol for the request and response; the server identifier, which consists of either a Domain Name System (DNS) host name or a TCP address that uniquely identifies the server on the Internet; the path identifier, which locates the requested information on the server; and an optional query string, which passes information from the client to the server.</span></span> <span data-ttu-id="cf90a-115">Например, универсальный код ресурса (URI) `http://www.contoso.com/whatsnew.aspx?date=today` состоит из идентификатора схемы `http`, идентификатора сервера `www.contoso.com`, пути `/whatsnew.aspx` и строки запроса `?date=today`.</span><span class="sxs-lookup"><span data-stu-id="cf90a-115">For example, the URI `http://www.contoso.com/whatsnew.aspx?date=today` consists of the scheme identifier `http`, the server identifier `www.contoso.com`, the path `/whatsnew.aspx`, and the query string `?date=today`.</span></span>  
  
 <span data-ttu-id="cf90a-116">После того как сервер получит и обработает запрос, он возвращает ответ клиентскому приложению.</span><span class="sxs-lookup"><span data-stu-id="cf90a-116">After the server has received the request and processed the response, it returns the response to the client application.</span></span> <span data-ttu-id="cf90a-117">Ответ содержит дополнительную информацию, например тип содержимого (к примеру, необработанный текст или XML-данные).</span><span class="sxs-lookup"><span data-stu-id="cf90a-117">The response includes supplemental information, such as the type of the content (raw text or XML data, for example).</span></span>  
  
## <a name="requests-and-responses-in-the-net-framework"></a><span data-ttu-id="cf90a-118">Запросы и ответы в .NET Framework</span><span class="sxs-lookup"><span data-stu-id="cf90a-118">Requests and Responses in the .NET Framework</span></span>  
 <span data-ttu-id="cf90a-119">.NET Framework использует определенные классы для предоставления трех видов сведений, необходимые для доступа к интернет-ресурсам по модели запрос-ответ: класс <xref:System.Uri>, который содержит URI нужного интернет-ресурса, класс <xref:System.Net.WebRequest>, который содержит запрос для ресурса, и класс <xref:System.Net.WebResponse>, предоставляющий контейнер для входящего ответа.</span><span class="sxs-lookup"><span data-stu-id="cf90a-119">The .NET Framework uses specific classes to provide the three pieces of information required to access Internet resources through a request/response model: the <xref:System.Uri> class, which contains the URI of the Internet resource you are seeking; the <xref:System.Net.WebRequest> class, which contains a request for the resource; and the <xref:System.Net.WebResponse> class, which provides a container for the incoming response.</span></span>  
  
 <span data-ttu-id="cf90a-120">Клиентские приложения создают экземпляры `WebRequest` путем передачи URI сетевого ресурса в метод <xref:System.Net.WebRequest.Create%2A>.</span><span class="sxs-lookup"><span data-stu-id="cf90a-120">Client applications create `WebRequest` instances by passing the URI of the network resource to the <xref:System.Net.WebRequest.Create%2A> method.</span></span> <span data-ttu-id="cf90a-121">Этот статический метод создает `WebRequest` для конкретного протокола, например HTTP.</span><span class="sxs-lookup"><span data-stu-id="cf90a-121">This static method creates a `WebRequest` for a specific protocol, such as HTTP.</span></span> <span data-ttu-id="cf90a-122">Возвращаемый `WebRequest` предоставляет доступ к свойствам, которые управляют запросом к серверу и доступом к потоку данных, отправляемому при выполнении запроса.</span><span class="sxs-lookup"><span data-stu-id="cf90a-122">The `WebRequest` that is returned provides access to properties that control both the request to the server and access to the data stream that is sent when the request is made.</span></span> <span data-ttu-id="cf90a-123">Метод <xref:System.Net.WebRequest.GetResponse%2A> класса `WebRequest` отправляет запрос от клиентского приложения на сервер, указанный в URI.</span><span class="sxs-lookup"><span data-stu-id="cf90a-123">The <xref:System.Net.WebRequest.GetResponse%2A> method on the `WebRequest` sends the request from the client application to the server identified in the URI.</span></span> <span data-ttu-id="cf90a-124">В случаях, когда ответ может быть задержан, запрос может быть выполнен асинхронно с помощью метода <xref:System.Net.WebRequest.BeginGetResponse%2A> класса **WebRequest** и ответ может быть возвращен позднее с помощью метода <xref:System.Net.WebRequest.EndGetResponse%2A>.</span><span class="sxs-lookup"><span data-stu-id="cf90a-124">In cases in which the response might be delayed, the request can be made asynchronously using the <xref:System.Net.WebRequest.BeginGetResponse%2A> method on the **WebRequest**, and the response can be returned at a later time using the <xref:System.Net.WebRequest.EndGetResponse%2A> method.</span></span>  
  
 <span data-ttu-id="cf90a-125">Методы **GetResponse** и **EndGetResponse** возвращают **WebResponse**, предоставляющий доступ к данным, возвращенным сервером.</span><span class="sxs-lookup"><span data-stu-id="cf90a-125">The **GetResponse** and **EndGetResponse** methods return a **WebResponse** that provides access to the data returned by the server.</span></span> <span data-ttu-id="cf90a-126">Так как эти данные указываются для запрашивающего приложения в виде потока методом <xref:System.Net.WebResponse.GetResponseStream%2A>, он может использоваться в приложении везде, где поддерживаются потоки данных.</span><span class="sxs-lookup"><span data-stu-id="cf90a-126">Because this data is provided to the requesting application as a stream by the <xref:System.Net.WebResponse.GetResponseStream%2A> method, it can be used in an application anywhere data streams are used.</span></span>  
  
 <span data-ttu-id="cf90a-127">Классы **WebRequest** и **WebResponse** являются основой для подключаемых протоколов — они представляют реализацию сетевых служб, которые позволяют разрабатывать приложения, использующие интернет-ресурсы, не беспокоясь об особенностях протокола, используемого каждым ресурсом.</span><span class="sxs-lookup"><span data-stu-id="cf90a-127">The **WebRequest** and **WebResponse** classes are the basis of pluggable protocols — an implementation of network services that enables you to develop applications that use Internet resources without worrying about the specific details of the protocol that each resource uses.</span></span> <span data-ttu-id="cf90a-128">Классы-потомки класса **WebRequest** регистрируются с классом **WebRequest** для управления сведениями по установке фактических подключений к интернет-ресурсам.</span><span class="sxs-lookup"><span data-stu-id="cf90a-128">Descendant classes of **WebRequest** are registered with the **WebRequest** class to manage the details of making the actual connections to Internet resources.</span></span>  
  
 <span data-ttu-id="cf90a-129">Например, класс <xref:System.Net.HttpWebRequest> управляет сведениями подключения к интернет-ресурсу по протоколу HTTP.</span><span class="sxs-lookup"><span data-stu-id="cf90a-129">As an example, the <xref:System.Net.HttpWebRequest> class manages the details of connecting to an Internet resource using HTTP.</span></span> <span data-ttu-id="cf90a-130">По умолчанию, когда метод **WebRequest.Create** обнаруживает URI, который начинается с "http:" или "https:" (идентификаторы протокола HTTP и безопасного HTTP), возвращаемый **WebRequest** можно использовать как есть либо его можно привести к **HttpWebRequest** для доступа к свойствам, связанным с определенным протоколом.</span><span class="sxs-lookup"><span data-stu-id="cf90a-130">By default, when the **WebRequest.Create** method encounters a URI that begins with "http:" or "https:" (the protocol identifiers for HTTP and secure HTTP), the **WebRequest** that is returned can be used as is, or it can be typecast to **HttpWebRequest** to access protocol-specific properties.</span></span> <span data-ttu-id="cf90a-131">В большинстве случаев **WebRequest** предоставляет все данные, необходимые для создания запроса.</span><span class="sxs-lookup"><span data-stu-id="cf90a-131">In most cases, the **WebRequest** provides all the necessary information for making a request.</span></span>  
  
 <span data-ttu-id="cf90a-132">В **WebRequest** можно использовать любой протокол, который может быть представлен в виде транзакции "запрос-ответ".</span><span class="sxs-lookup"><span data-stu-id="cf90a-132">Any protocol that can be represented as a request/response transaction can be used in a **WebRequest**.</span></span> <span data-ttu-id="cf90a-133">Из **WebRequest** и **WebResponse** можно создать производные классы, связанные с определенным протоколом, и затем зарегистрировать их для использования приложением с помощью статического метода <xref:System.Net.WebRequest.RegisterPrefix%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="cf90a-133">You can derive protocol-specific classes from **WebRequest** and **WebResponse** and then register them for use by the application with the static <xref:System.Net.WebRequest.RegisterPrefix%2A?displayProperty=nameWithType> method.</span></span>  
  
 <span data-ttu-id="cf90a-134">Когда требуется авторизация клиента для интернет-запросов, свойство <xref:System.Net.WebRequest.Credentials%2A> класса **WebRequest** предоставляет необходимые учетные данные.</span><span class="sxs-lookup"><span data-stu-id="cf90a-134">When client authorization for Internet requests is required, the <xref:System.Net.WebRequest.Credentials%2A> property of the **WebRequest** supplies the necessary credentials.</span></span> <span data-ttu-id="cf90a-135">Эти учетные данные могут представлять простую пару "имя-пароль" для базовой HTTP или дайджест-проверки подлинности или набор "имя-пароль-домен" для проверки подлинности NTLM или Kerberos.</span><span class="sxs-lookup"><span data-stu-id="cf90a-135">These credentials can be a simple name/password pair for basic HTTP or digest authentication, or a name/password/domain set for NTLM or Kerberos authentication.</span></span> <span data-ttu-id="cf90a-136">Один набор учетных данных может храниться в экземпляре <xref:System.Net.NetworkCredential>. Несколько наборов могут храниться одновременно в экземпляре <xref:System.Net.CredentialCache>.</span><span class="sxs-lookup"><span data-stu-id="cf90a-136">One set of credentials can be stored in a <xref:System.Net.NetworkCredential> instance, or multiple sets can be stored simultaneously in a <xref:System.Net.CredentialCache> instance.</span></span> <span data-ttu-id="cf90a-137">**CredentialCache** использует URI запроса и схему проверки подлинности, которую поддерживает сервер, чтобы определить, какие учетные данные следует отправить на сервер.</span><span class="sxs-lookup"><span data-stu-id="cf90a-137">The **CredentialCache** uses the URI of the request and the authentication scheme that the server supports to determine which credentials to send to the server.</span></span>  
  
## <a name="simple-requests-with-webclient"></a><span data-ttu-id="cf90a-138">Простые запросы с использованием WebClient</span><span class="sxs-lookup"><span data-stu-id="cf90a-138">Simple Requests with WebClient</span></span>  
 <span data-ttu-id="cf90a-139">Для приложений, которым необходимо выполнять простые запросы интернет-ресурсов, класс <xref:System.Net.WebClient> предоставляет общие методы для отправки данных на интернет-сервер или для скачивания их с него.</span><span class="sxs-lookup"><span data-stu-id="cf90a-139">For applications that need to make simple requests for Internet resources, the <xref:System.Net.WebClient> class provides common methods for uploading data to or downloading data from an Internet server.</span></span> <span data-ttu-id="cf90a-140">Класс **WebClient** использует класс **WebRequest** для предоставления доступа к интернет-ресурсам, поэтому класс **WebClient** может применять любой зарегистрированный подключаемый протокол.</span><span class="sxs-lookup"><span data-stu-id="cf90a-140">**WebClient** relies on the **WebRequest** class to provide access to Internet resources; therefore, the **WebClient** class can use any registered pluggable protocol.</span></span>  
  
 <span data-ttu-id="cf90a-141">Для приложений, которые не могут использовать модель "запрос-ответ ", или для приложений, которые должны прослушивать сеть, а также отправлять запросы, пространство имен **System.Net.Sockets** предоставляет классы <xref:System.Net.Sockets.TcpClient>, <xref:System.Net.Sockets.TcpListener> и <xref:System.Net.Sockets.UdpClient>.</span><span class="sxs-lookup"><span data-stu-id="cf90a-141">For applications that cannot use the request/response model, or for applications that need to listen on the network as well as send requests, the **System.Net.Sockets** namespace provides the <xref:System.Net.Sockets.TcpClient>, <xref:System.Net.Sockets.TcpListener>, and <xref:System.Net.Sockets.UdpClient> classes.</span></span> <span data-ttu-id="cf90a-142">Эти классы обрабатывают сведения об установке подключений с использованием различных транспортных протоколов и предоставляют сетевое подключение приложению в виде потока.</span><span class="sxs-lookup"><span data-stu-id="cf90a-142">These classes handle the details of making connections using different transport protocols and expose the network connection to the application as a stream.</span></span>  
  
 <span data-ttu-id="cf90a-143">Разработчикам, знакомым с интерфейсом сокетов Windows, или пользователям, которым требуется управление, предоставляемое программированием на уровне сокетов, окажутся полезны классы **System.Net.Sockets**.</span><span class="sxs-lookup"><span data-stu-id="cf90a-143">Developers familiar with the Windows Sockets interface or those who need the control provided by programming at the socket level will find that the **System.Net.Sockets** classes meet their needs.</span></span> <span data-ttu-id="cf90a-144">Классы **System.Net.Sockets** являются точкой перехода из управляемого кода в машинный код в раках классов **System.Net**.</span><span class="sxs-lookup"><span data-stu-id="cf90a-144">The **System.Net.Sockets** classes are a transition point from managed to native code within the **System.Net** classes.</span></span> <span data-ttu-id="cf90a-145">В большинстве случаев классы **System.Net.Sockets** выполняют маршалинг данных в свои 32-разрядные аналоги Windows, а также обрабатывают все необходимые проверки безопасности.</span><span class="sxs-lookup"><span data-stu-id="cf90a-145">In most cases, **System.Net.Sockets** classes marshal data into their Windows 32-bit counterparts, as well as handling any necessary security checks.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cf90a-146">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="cf90a-146">See also</span></span>

- [<span data-ttu-id="cf90a-147">Программирование подключаемых протоколов</span><span class="sxs-lookup"><span data-stu-id="cf90a-147">Programming Pluggable Protocols</span></span>](programming-pluggable-protocols.md)
- [<span data-ttu-id="cf90a-148">Сетевое программирование в .NET Framework</span><span class="sxs-lookup"><span data-stu-id="cf90a-148">Network Programming in the .NET Framework</span></span>](index.md)
- [<span data-ttu-id="cf90a-149">Примеры сетевого программирования</span><span class="sxs-lookup"><span data-stu-id="cf90a-149">Network Programming Samples</span></span>](network-programming-samples.md)
