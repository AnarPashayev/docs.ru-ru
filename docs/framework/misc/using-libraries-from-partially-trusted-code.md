---
title: Использование библиотек из не вполне надежного кода
ms.date: 03/30/2017
helpviewer_keywords:
- security [.NET Framework], partially trusted code
- partially trusted code
- partial trust
- AllowPartiallyTrustedCallersAttribute attribute
- code access security, partially trusted code
- APTCA
ms.assetid: dd66cd4c-b087-415f-9c3e-94e3a1835f74
author: mairaw
ms.author: mairaw
ms.openlocfilehash: 6d858ef4c2f70c55b0a36e845f90d9a8e08f5e2d
ms.sourcegitcommit: 155012a8a826ee8ab6aa49b1b3a3b532e7b7d9bd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2019
ms.locfileid: "66487823"
---
# <a name="using-libraries-from-partially-trusted-code"></a>Использование библиотек из не вполне надежного кода
[!INCLUDE[net_security_note](../../../includes/net-security-note-md.md)]  
  
> [!NOTE]
>  Этот раздел описывает поведение сборок со строгими именами и применяется только к [уровня 1](../../../docs/framework/misc/security-transparent-code-level-1.md) сборок. [Прозрачный с точки зрения безопасности код, уровень 2](../../../docs/framework/misc/security-transparent-code-level-2.md) сборок в .NET Framework 4 или более поздней версии не зависят от строгих имен. Дополнительные сведения об изменениях системы безопасности см. в разделе [изменения системы безопасности](../../../docs/framework/security/security-changes.md).  
  
 Приложения, которые не получают полное доверие со стороны узла или песочницы, не могут вызывать общие управляемые библиотеки, если только автор библиотеки не разрешил это специально при помощи атрибута <xref:System.Security.AllowPartiallyTrustedCallersAttribute>. Таким образом, авторы приложений должны иметь в виду, что некоторые библиотеки будут им недоступны в контексте частичного доверия. По умолчанию весь код, выполняемый в частично доверенной ["песочницы"](../../../docs/framework/misc/how-to-run-partially-trusted-code-in-a-sandbox.md) и не входит в список полностью доверенных сборок является частично доверенным. Если не предполагается, что код будет запускаться в частично доверенном контексте или вызываться кодом с частичным доверием, данный раздел можно игнорировать. Однако при написании кода, который должен взаимодействовать с частично доверенным кодом или работать из частично доверенного контекста, следует учитывать следующие факторы.  
  
- Библиотеки должны быть подписаны строгим именем, чтобы их могли совместно использовать несколько приложений. Строгие имена позволяют помещать код в глобальный кэш сборок или добавлять его в список полного доверия песочницы <xref:System.AppDomain>, а также позволяют потребителям удостовериться, что данный фрагмент мобильного кода действительно исходит от вас.  
  
- По умолчанию со строгими именами [уровня 1](../../../docs/framework/misc/security-transparent-code-level-1.md) общие библиотеки выполняют неявную [LinkDemand](../../../docs/framework/misc/link-demands.md) для полного доверия автоматически, не требуя никаких действий от автора библиотеки.  
  
- Если вызывающий объект не имеет полного доверия, однако пытается вызывать такую библиотеку, среда выполнения создает <xref:System.Security.SecurityException>, а вызывающему объекту запрещается связь с библиотекой.  
  
- Чтобы отключить автоматическое **LinkDemand** и предотвратить возникновение исключения, исключение, можно поместить **AllowPartiallyTrustedCallersAttribute** атрибут на область действия сборки общей Библиотека. Этот атрибут позволяет вызывать библиотеки из частично доверенного управляемого кода.  
  
- На частично доверенный код, получающий доступ к библиотеке при помощи этого атрибута, по-прежнему налагаются дополнительные ограничения, определяемые <xref:System.AppDomain>.  
  
- Нет программного метода для частично доверенного кода для вызова библиотеки, которая не имеет **AllowPartiallyTrustedCallersAttribute** атрибута.  
  
 Библиотеки, являющиеся собственными для определенного приложения не требуют строгого имени или **AllowPartiallyTrustedCallersAttribute** атрибут и не может ссылаться потенциально вредоносный код извне приложения. Такой код защищен от преднамеренного или непреднамеренного неправильного использования со стороны мобильного кода с частичным доверием, и никаких дополнительных действий со стороны разработчика не требуется.  
  
 Рекомендуется явно разрешить использование частично доверенным кодом для следующих типов кода.  
  
- Код, который был тщательно протестирован для уязвимости системы безопасности и соответствует рекомендациям, приведенным в [правил написания безопасного кода](../../../docs/standard/security/secure-coding-guidelines.md).  
  
- Строго именованные библиотеки кода, специально написанные для частично доверенных сценариев.  
  
- Все компоненты (с частичным или полным доверием), подписанные строгим именем, которые будут вызываться кодом, скачанным из Интернета.  
  
> [!NOTE]
>  Некоторые классы в библиотеке классов .NET Framework не имеют **AllowPartiallyTrustedCallersAttribute** атрибут и не может вызываться кодом с частичным доверием.  
  
## <a name="see-also"></a>См. также

- [Управление доступом для кода](../../../docs/framework/misc/code-access-security.md)
