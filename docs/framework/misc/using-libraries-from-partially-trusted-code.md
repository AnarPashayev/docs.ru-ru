---
title: Использование библиотек из не вполне надежного кода
ms.date: 03/30/2017
helpviewer_keywords:
- security [.NET Framework], partially trusted code
- partially trusted code
- partial trust
- AllowPartiallyTrustedCallersAttribute attribute
- code access security, partially trusted code
- APTCA
ms.assetid: dd66cd4c-b087-415f-9c3e-94e3a1835f74
ms.openlocfilehash: 61291a07639c3f92a05f78dff49f6b20f1aee77e
ms.sourcegitcommit: 62285ec11fa8e8424bab00511a90760c60e63c95
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/20/2020
ms.locfileid: "81645720"
---
# <a name="using-libraries-from-partially-trusted-code"></a>Использование библиотек из не вполне надежного кода
[!INCLUDE[net_security_note](../../../includes/net-security-note-md.md)]  
  
> [!NOTE]
> Эта тема посвящена поведению сильных собраний и применяется только к собраниям [уровня 1.](security-transparent-code-level-1.md) [Прозрачный код безопасности,](security-transparent-code-level-2.md) сборки уровня 2 в рамках .NET 4 или позже не затрагиваются сильными именами. Для получения дополнительной информации об изменениях в системе безопасности [см.](https://docs.microsoft.com/previous-versions/dotnet/framework/security/security-changes)  
  
 Приложения, которые не получают полное доверие со стороны узла или песочницы, не могут вызывать общие управляемые библиотеки, если только автор библиотеки не разрешил это специально при помощи атрибута <xref:System.Security.AllowPartiallyTrustedCallersAttribute>. Таким образом, авторы приложений должны иметь в виду, что некоторые библиотеки будут им недоступны в контексте частичного доверия. По умолчанию, все коды, которые выполняются в частидоверия [песочнице](how-to-run-partially-trusted-code-in-a-sandbox.md) и не в списке полностью доверительных сборок частично доверяют частично доверяют частично доверяют. Если не предполагается, что код будет запускаться в частично доверенном контексте или вызываться кодом с частичным доверием, данный раздел можно игнорировать. Однако при написании кода, который должен взаимодействовать с частично доверенным кодом или работать из частично доверенного контекста, следует учитывать следующие факторы.  
  
- Библиотеки должны быть подписаны строгим именем, чтобы их могли совместно использовать несколько приложений. Строгие имена позволяют помещать код в глобальный кэш сборок или добавлять его в список полного доверия песочницы <xref:System.AppDomain>, а также позволяют потребителям удостовериться, что данный фрагмент мобильного кода действительно исходит от вас.  
  
- По умолчанию, сильные названные [уровень 1](security-transparent-code-level-1.md) общие библиотеки выполняют неявное [LinkDemand](link-demands.md) для полного доверия автоматически, без библиотеки писатель того, чтобы сделать что-нибудь.  
  
- Если вызывающий объект не имеет полного доверия, однако пытается вызывать такую библиотеку, среда выполнения создает <xref:System.Security.SecurityException>, а вызывающему объекту запрещается связь с библиотекой.  
  
- Для того, чтобы отключить автоматический **LinkDemand** и предотвратить исключение, можно разместить атрибут **AllowPartiallyTrustedCallersAttribute** в области сборки общей библиотеки. Этот атрибут позволяет вызывать библиотеки из частично доверенного управляемого кода.  
  
- На частично доверенный код, получающий доступ к библиотеке при помощи этого атрибута, по-прежнему налагаются дополнительные ограничения, определяемые <xref:System.AppDomain>.  
  
- Частично доверенный код не может позвонить в библиотеку, которая не имеет атрибута **AllowPartiallyTrustedCallersAttribute.**  
  
 Библиотеки, которые являются частными для конкретного приложения, не требуют сильного имени или атрибута **AllowPartiallyTrustedCallersAttribute** и не могут быть отсылкой потенциально вредоносным кодом за пределами приложения. Такой код защищен от преднамеренного или непреднамеренного неправильного использования со стороны мобильного кода с частичным доверием, и никаких дополнительных действий со стороны разработчика не требуется.  
  
 Рекомендуется явно разрешить использование частично доверенным кодом для следующих типов кода.  
  
- Код, который был тщательно протестирован на уязвимости безопасности и соответствует руководящим принципам, описанным в [Руководящих принципах безопасного кодирования.](../../standard/security/secure-coding-guidelines.md)  
  
- Строго именованные библиотеки кода, специально написанные для частично доверенных сценариев.  
  
- Все компоненты (с частичным или полным доверием), подписанные строгим именем, которые будут вызываться кодом, скачанным из Интернета.  
  
> [!NOTE]
> Некоторые классы в библиотеке класса .NET Framework не имеют атрибута **AllowPartiallyTrustedCallersAttribute** и не могут быть вызваны частично доверенным кодом.  
  
## <a name="see-also"></a>См. также раздел

- [Безопасность доступа к коду](code-access-security.md)
