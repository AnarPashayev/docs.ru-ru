---
title: Общие сведения о дереве модели автоматизации пользовательского интерфейса
ms.date: 03/30/2017
helpviewer_keywords:
- automation tree
- UI Automation, tree
ms.assetid: 03b98058-bdb3-47a0-8ff7-45e6cdf67166
ms.openlocfilehash: a88822d6aed5af04ecf7deffe6936cfc4ebe296e
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2019
ms.locfileid: "59225954"
---
# <a name="ui-automation-tree-overview"></a><span data-ttu-id="0e90a-102">Общие сведения о дереве модели автоматизации пользовательского интерфейса</span><span class="sxs-lookup"><span data-stu-id="0e90a-102">UI Automation Tree Overview</span></span>
> [!NOTE]
>  <span data-ttu-id="0e90a-103">Эта документация предназначена для разработчиков .NET Framework, желающих использовать управляемые классы [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] , заданные в пространстве имен <xref:System.Windows.Automation> .</span><span class="sxs-lookup"><span data-stu-id="0e90a-103">This documentation is intended for .NET Framework developers who want to use the managed [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] classes defined in the <xref:System.Windows.Automation> namespace.</span></span> <span data-ttu-id="0e90a-104">Для получения последних сведений о [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)], см. в разделе [API автоматизации Windows: Модели автоматизации пользовательского интерфейса](https://go.microsoft.com/fwlink/?LinkID=156746).</span><span class="sxs-lookup"><span data-stu-id="0e90a-104">For the latest information about [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)], see [Windows Automation API: UI Automation](https://go.microsoft.com/fwlink/?LinkID=156746).</span></span>  
  
 <span data-ttu-id="0e90a-105">Продукты и скрипты тестов специальных возможностей выполняют навигацию по дереву [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] для сбора сведений о [!INCLUDE[TLA#tla_ui](../../../includes/tlasharptla-ui-md.md)] и его элементах.</span><span class="sxs-lookup"><span data-stu-id="0e90a-105">Assistive technology products and test scripts navigate the [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] tree to gather information about the [!INCLUDE[TLA#tla_ui](../../../includes/tlasharptla-ui-md.md)] and its elements.</span></span>  
  
 <span data-ttu-id="0e90a-106">В рамках [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] дерево является корневой элемент (<xref:System.Windows.Automation.AutomationElement.RootElement%2A>), представляющий текущий рабочий стол и дочерние элементы представляют окна приложений.</span><span class="sxs-lookup"><span data-stu-id="0e90a-106">Within the [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] tree there is a root element (<xref:System.Windows.Automation.AutomationElement.RootElement%2A>) that represents the current desktop and whose child elements represent application windows.</span></span> <span data-ttu-id="0e90a-107">Каждый из этих дочерних элементов может содержать элементы, представляющие части [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)], такие как меню, кнопки, панели инструментов и списки.</span><span class="sxs-lookup"><span data-stu-id="0e90a-107">Each of these child elements can contain elements representing pieces of [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)] such as menus, buttons, toolbars, and list boxes.</span></span> <span data-ttu-id="0e90a-108">В свою очередь эти элементы тоже могут содержать элементы, такие как элементы списка.</span><span class="sxs-lookup"><span data-stu-id="0e90a-108">These elements in turn can contain elements such as list items.</span></span>  
  
 <span data-ttu-id="0e90a-109">Дерево [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] не является фиксированной структурой и редко отображается полностью, так как оно может содержать тысячи элементов.</span><span class="sxs-lookup"><span data-stu-id="0e90a-109">The [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] tree is not a fixed structure and is seldom seen in its totality because it might contain thousands of elements.</span></span> <span data-ttu-id="0e90a-110">Его части создаются по необходимости, и дерево может претерпевать изменения при добавлении, перемещении или удалении элементов.</span><span class="sxs-lookup"><span data-stu-id="0e90a-110">Parts of it are built as they are needed, and it can undergo changes as elements are added, moved, or removed.</span></span>  
  
 <span data-ttu-id="0e90a-111">Поставщики автоматизации пользовательского интерфейса поддерживают дерево [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)], реализуя навигацию между элементами внутри фрагмента, который состоит из корня (как правило, размещенного в окне) и поддерева.</span><span class="sxs-lookup"><span data-stu-id="0e90a-111">UI Automation providers support the [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] tree by implementing navigation among items within a fragment, which consists of a root (usually hosted in a window) and a subtree.</span></span> <span data-ttu-id="0e90a-112">Однако поставщики не интересуются переходами из одного элемента управления в другой.</span><span class="sxs-lookup"><span data-stu-id="0e90a-112">However, providers are not concerned with navigation from one control to another.</span></span> <span data-ttu-id="0e90a-113">Такие переходы управляются ядром [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] с помощью сведений из поставщиков окна по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="0e90a-113">This is managed by the [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] core, using information from the default window providers.</span></span>  
  
<a name="uiautomation_tree_view"></a>   
## <a name="views-of-the-automation-tree"></a><span data-ttu-id="0e90a-114">Представления дерева автоматизации</span><span class="sxs-lookup"><span data-stu-id="0e90a-114">Views of the Automation Tree</span></span>  
 <span data-ttu-id="0e90a-115">Дерево [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] может быть отфильтровано для создания представлений, содержащих только те объекты <xref:System.Windows.Automation.AutomationElement>, которые соответствуют конкретному клиенту.</span><span class="sxs-lookup"><span data-stu-id="0e90a-115">The [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] tree can be filtered to create views that contain only those <xref:System.Windows.Automation.AutomationElement> objects relevant for a particular client.</span></span> <span data-ttu-id="0e90a-116">Такой подход позволяет клиентам настроить структуру, представленную с помощью [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)], для их конкретных нужд.</span><span class="sxs-lookup"><span data-stu-id="0e90a-116">This approach allows clients to customize the structure presented through [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] to their particular needs.</span></span>  
  
 <span data-ttu-id="0e90a-117">Клиент может настроить представление двумя способами: определением области и фильтрацией.</span><span class="sxs-lookup"><span data-stu-id="0e90a-117">The client has two ways of customizing the view: by scoping and by filtering.</span></span> <span data-ttu-id="0e90a-118">Определение области — это определение пространства представления, начиная от базового элемента: например, приложению может требоваться найти только прямой дочерний элемент рабочего стола или найти все потомки окна приложения.</span><span class="sxs-lookup"><span data-stu-id="0e90a-118">Scoping is defining the extent of the view, starting from a base element: for example, the application might want to find only direct children of the desktop, or all descendants of an application window.</span></span> <span data-ttu-id="0e90a-119">Фильтрацией является определение типов элементов, которые должны быть включены в представление.</span><span class="sxs-lookup"><span data-stu-id="0e90a-119">Filtering is defining the types of elements that are to be included in the view.</span></span>  
  
 <span data-ttu-id="0e90a-120">Поставщики автоматизации пользовательского интерфейса поддерживают фильтрацию путем определения свойств элементов, включая свойства <xref:System.Windows.Automation.AutomationElementIdentifiers.IsControlElementProperty> и <xref:System.Windows.Automation.AutomationElementIdentifiers.IsContentElementProperty>.</span><span class="sxs-lookup"><span data-stu-id="0e90a-120">UI Automation providers support filtering by defining properties on elements, including the <xref:System.Windows.Automation.AutomationElementIdentifiers.IsControlElementProperty> and <xref:System.Windows.Automation.AutomationElementIdentifiers.IsContentElementProperty> properties.</span></span>  
  
 [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] <span data-ttu-id="0e90a-121">предоставляет три представления по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="0e90a-121">provides three default views.</span></span> <span data-ttu-id="0e90a-122">Эти представления определяются типом выполняемой фильтрации; область любого представления задается приложением.</span><span class="sxs-lookup"><span data-stu-id="0e90a-122">These views are defined by the type of filtering performed; the scope of any view is defined by the application.</span></span> <span data-ttu-id="0e90a-123">Кроме того, приложение может применять к свойствам другие фильтры; например, чтобы включить только включенные элементы управления в представление элемента управления.</span><span class="sxs-lookup"><span data-stu-id="0e90a-123">In addition, the application can apply other filters on properties; for example, to include only enabled controls in a control view.</span></span>  
  
<a name="uiautomation_raw_view"></a>   
### <a name="raw-view"></a><span data-ttu-id="0e90a-124">Базовое представление</span><span class="sxs-lookup"><span data-stu-id="0e90a-124">Raw View</span></span>  
 <span data-ttu-id="0e90a-125">Базовое представление дерева [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] — это полное дерево объектов <xref:System.Windows.Automation.AutomationElement>, для которого корнем является рабочий стол.</span><span class="sxs-lookup"><span data-stu-id="0e90a-125">The raw view of the [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] tree is the full tree of <xref:System.Windows.Automation.AutomationElement> objects for which the desktop is the root.</span></span> <span data-ttu-id="0e90a-126">Базовое представление точно следует собственной программной структуре приложения и таким образом является наиболее подробным доступным представлением.</span><span class="sxs-lookup"><span data-stu-id="0e90a-126">The raw view closely follows the native programmatic structure of an application and therefore is the most detailed view available.</span></span> <span data-ttu-id="0e90a-127">Оно также является основой, на которой строятся другие представления дерева.</span><span class="sxs-lookup"><span data-stu-id="0e90a-127">It is also the base on which the other views of the tree are built.</span></span> <span data-ttu-id="0e90a-128">Поскольку это представление зависит от базовой инфраструктуры [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)], базовое представление кнопки [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] будет отличаться от базового представления кнопки [!INCLUDE[TLA2#tla_win32](../../../includes/tla2sharptla-win32-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0e90a-128">Because this view depends on the underlying [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)] framework, the raw view of a [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] button will have a different raw view than a [!INCLUDE[TLA2#tla_win32](../../../includes/tla2sharptla-win32-md.md)] button.</span></span>  
  
 <span data-ttu-id="0e90a-129">Базовое представление можно получить путем поиска элементов без указания свойств или с помощью <xref:System.Windows.Automation.TreeWalker.RawViewWalker> для навигации по дереву.</span><span class="sxs-lookup"><span data-stu-id="0e90a-129">The raw view is obtained by searching for elements without specifying properties or by using the <xref:System.Windows.Automation.TreeWalker.RawViewWalker> to navigate the tree.</span></span>  
  
<a name="uiautomation_control_view"></a>   
### <a name="control-view"></a><span data-ttu-id="0e90a-130">Представление элемента управления</span><span class="sxs-lookup"><span data-stu-id="0e90a-130">Control View</span></span>  
 <span data-ttu-id="0e90a-131">Представление элемента управления дерева [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] дерева упрощает задачу продукта поддержки специальных возможностей по описанию [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)] и помощи ему по взаимодействию с приложением, поскольку оно точно сопоставлено со структурой [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)], воспринимаемой конечным пользователем.</span><span class="sxs-lookup"><span data-stu-id="0e90a-131">The control view of the [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] tree simplifies the assistive technology product's task of describing the [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)] to the end user and helping that end user interact with the application because it closely maps to the [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)] structure perceived by an end user.</span></span>  
  
 <span data-ttu-id="0e90a-132">Представление элемента управления является подмножеством базового представления.</span><span class="sxs-lookup"><span data-stu-id="0e90a-132">The control view is a subset of the raw view.</span></span> <span data-ttu-id="0e90a-133">Оно содержит все элементы [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)] элементы из базового представления, которые конечный пользователь будет воспринимать как интерактивные или участвующие в логической структуре элемента управления в [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0e90a-133">It includes all [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)] items from the raw view that an end user would understand as interactive or contributing to the logical structure of the control in the [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)].</span></span> <span data-ttu-id="0e90a-134">Примеры элементов [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)], которые участвуют в логической структуре [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)], но сами не являются интерактивными, — это контейнеры элементов, такие как заголовки представлений списков, панели инструментов, меню и строки состояния.</span><span class="sxs-lookup"><span data-stu-id="0e90a-134">Examples of [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)] items that contribute to the logical structure of the [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)], but are not interactive themselves, are item containers such as list view headers, toolbars, menus, and the status bar.</span></span> <span data-ttu-id="0e90a-135">Неинтерактивные элементы, используемые просто для разметки в декоративных целях, не будут отображаться в представлении элемента управления.</span><span class="sxs-lookup"><span data-stu-id="0e90a-135">Non-interactive items used simply for layout or decorative purposes will not be seen in the control view.</span></span> <span data-ttu-id="0e90a-136">В качестве примера можно привести панель, которая используется только для размещения элементов управления в диалоговом окне, но сама не содержит никакой информации.</span><span class="sxs-lookup"><span data-stu-id="0e90a-136">An example is a panel that was used only to lay out the controls in a dialog but does not itself contain any information.</span></span> <span data-ttu-id="0e90a-137">Неинтерактивными элементами, которые будут отображаться в представлении элемента управления, являются графики с данными и статический текст в диалоговом окне.</span><span class="sxs-lookup"><span data-stu-id="0e90a-137">Non-interactive items that will be seen in the control view are graphics with information and static text in a dialog.</span></span> <span data-ttu-id="0e90a-138">Неинтерактивные элементы, включенные в представление элемента управления, не могут получать фокус клавиатуры.</span><span class="sxs-lookup"><span data-stu-id="0e90a-138">Non-interactive items that are included in the control view cannot receive keyboard focus.</span></span>  
  
 <span data-ttu-id="0e90a-139">Представление элемента управления можно получить путем поиска элементов, свойство <xref:System.Windows.Automation.AutomationElement.AutomationElementInformation.IsControlElement%2A> которых имеет значение `true`, или используя <xref:System.Windows.Automation.TreeWalker.ControlViewWalker> для навигации по дереву.</span><span class="sxs-lookup"><span data-stu-id="0e90a-139">The control view is obtained by searching for elements that have the <xref:System.Windows.Automation.AutomationElement.AutomationElementInformation.IsControlElement%2A> property set to `true`, or by using the <xref:System.Windows.Automation.TreeWalker.ControlViewWalker> to navigate the tree.</span></span>  
  
<a name="uiautomation_content_view"></a>   
### <a name="content-view"></a><span data-ttu-id="0e90a-140">Представление содержимого</span><span class="sxs-lookup"><span data-stu-id="0e90a-140">Content View</span></span>  
 <span data-ttu-id="0e90a-141">Представление содержимого дерева [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] является подмножеством представления элемента управления.</span><span class="sxs-lookup"><span data-stu-id="0e90a-141">The content view of the [!INCLUDE[TLA2#tla_uiautomation](../../../includes/tla2sharptla-uiautomation-md.md)] tree is a subset of the control view.</span></span> <span data-ttu-id="0e90a-142">Оно содержит элементы [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)], которые передают достоверную информацию в пользовательский интерфейс, включая элементы [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)], которые могут получать фокус клавиатуры, и текст, который не является меткой элемента [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0e90a-142">It contains [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)] items that convey the true information in a user interface, including [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)] items that can receive keyboard focus and some text that is not a label on a [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)] item.</span></span> <span data-ttu-id="0e90a-143">Например, значения в раскрывающемся поле со списком будут отображаться в представлении содержимого, так как они представляют информацию конечному пользователю.</span><span class="sxs-lookup"><span data-stu-id="0e90a-143">For example, the values in a drop-down combo box will appear in the content view because they represent the information being used by an end user.</span></span> <span data-ttu-id="0e90a-144">В представлении содержимого поле со списком и список представляются в виде коллекции элементов [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)], в которой можно выбрать один или несколько элементов.</span><span class="sxs-lookup"><span data-stu-id="0e90a-144">In the content view, a combo box and list box are both represented as a collection of [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)] items where one, or perhaps more than one, item can be selected.</span></span> <span data-ttu-id="0e90a-145">Тот факт, что один их них всегда открыт, а другой можно развернуть и свернуть, не имеет значения в представлении содержимого, поскольку оно предназначено для отображения данных или содержимого для пользователя.</span><span class="sxs-lookup"><span data-stu-id="0e90a-145">The fact that one is always open and one can expand and collapse is irrelevant in the content view because it is designed to show the data, or content, that is being presented to the user.</span></span>  
  
 <span data-ttu-id="0e90a-146">Представление содержимого можно получить путем поиска элементов, свойство <xref:System.Windows.Automation.AutomationElement.AutomationElementInformation.IsContentElement%2A> которых имеет значение `true`, или используя <xref:System.Windows.Automation.TreeWalker.ContentViewWalker> для навигации по дереву.</span><span class="sxs-lookup"><span data-stu-id="0e90a-146">The content view is obtained by searching for elements that have the <xref:System.Windows.Automation.AutomationElement.AutomationElementInformation.IsContentElement%2A> property set to `true`, or by using the <xref:System.Windows.Automation.TreeWalker.ContentViewWalker> to navigate the tree.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0e90a-147">См. также</span><span class="sxs-lookup"><span data-stu-id="0e90a-147">See also</span></span>

- <xref:System.Windows.Automation.AutomationElement>
- [<span data-ttu-id="0e90a-148">Общие сведения о модели автоматизации пользовательского интерфейса</span><span class="sxs-lookup"><span data-stu-id="0e90a-148">UI Automation Overview</span></span>](../../../docs/framework/ui-automation/ui-automation-overview.md)
