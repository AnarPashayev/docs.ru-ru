---
title: Пустые переменные — руководство по языку C#
description: В этой статье приведены сведения о поддержке в C# пустых переменных (переменных, которым не присваиваются значения) и описаны способы их использования.
ms.technology: csharp-fundamentals
ms.date: 09/22/2020
ms.openlocfilehash: 4de48aebaeb896b198b2e9f2431c6a38ba11469e
ms.sourcegitcommit: d2db216e46323f73b32ae312c9e4135258e5d68e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/22/2020
ms.locfileid: "90869328"
---
# <a name="discards---c-guide"></a>Пустые переменные — руководство по языку C#

Начиная с версии 7.0 язык C# поддерживает пустые переменные. Это временные фиктивные переменные, которые намеренно не используются в коде приложения. Пустые переменные эквивалентны переменным, которым не присвоены значения; пустые переменные не имеют значений. Так как пустая переменная по сути всего одна и этой переменной может даже не выделяться память, пустые переменные помогают расходовать память более экономно. Эти переменные делают код яснее, повышают его читаемость и упрощают его поддержку.

Чтобы использовать пустую переменную, назначьте ей в качестве имени символ подчеркивания (`_`). Например, следующий вызов метода возвращает трехкомпонентный кортеж, в котором первое и второе значения являются пустыми переменными, а *area* представляет собой ранее объявленную переменную, задаваемую для соответствующего третьего компонента, возвращенного  *GetCityInformation*:

```csharp
(_, _, area) = city.GetCityInformation(cityName);
```

В C# 7.0 и более поздних версий пустые переменные поддерживаются в присваиваниях в следующих контекстах:

- [Деконструкция](deconstruct.md) кортежей и объектов.
- Сопоставление шаблонов с операторами [is](language-reference/keywords/is.md) и [switch](language-reference/keywords/switch.md).
- Вызовы методов с параметрами `out`.
- Автономная переменная `_`, если в области отсутствуют `_`.

Начиная с C# 9.0, можно использовать пустые переменные для указания неиспользуемых входных параметров лямбда-выражения. Дополнительные сведения см. в разделе [Входные параметры лямбда-выражения](language-reference/operators/lambda-expressions.md#input-parameters-of-a-lambda-expression) статьи о [лямбда-выражениях](language-reference/operators/lambda-expressions.md).

Если `_` является допустимой пустой переменной, при попытке получить ее значение или использовать ее в операции присваивания компилятор выдаст ошибку CS0301: "Имя "\_" не существует в текущем контексте". Это вызвано тем, что переменной `_` не присвоено значение и, возможно, даже не выделена память. Если бы это была настоящая переменная, вам бы не удалось удалить более одного значения, как в предыдущем примере.

## <a name="tuple-and-object-deconstruction"></a>Деконструкция кортежей и объектов

Пустые переменные особенно удобны при работе с кортежами, когда код вашего приложения использует одни элементы кортежа и игнорирует другие. Например, следующий метод `QueryCityDataForYears` возвращает кортеж из шести элементов: название города, его площадь, год, численность населения города в этом году, другой год и численность населения города в том году. В примере показано изменение численности населения за эти два года. Из доступных в кортеже данных нас не интересует площадь города, а название города и две даты известны нам уже на этапе разработки. Следовательно, нас интересуют только два значения численности населения, которые хранятся в кортеже. Остальные значения можно обработать как пустые переменные.  

[!code-csharp[Tuple-discard](../../samples/snippets/csharp/programming-guide/deconstructing-tuples/discard-tuple1.cs)]

Подробнее о деконструкции кортежей с помощью пустых переменных: [Деконструкция кортежей и других типов](deconstruct.md#deconstructing-tuple-elements-with-discards).

Метод `Deconstruct` класса, структуры или интерфейса также позволяет извлекать и деконструировать определенный набор данных из объекта. Пустые переменные можно использовать, когда вы хотите работать только с подмножеством деконструируемых значений. В следующем примере показана деконструкция объекта `Person` на четыре строки (имя, фамилия, город и область), но для фамилии и области используются пустые переменные.

[!code-csharp[Class-discard](../../samples/snippets/csharp/programming-guide/deconstructing-tuples/class-discard1.cs)]

Подробнее о деконструкции пользовательских типов с помощью пустых переменных: [Деконструкция кортежей и других типов](deconstruct.md#deconstructing-a-user-defined-type-with-discards).

## <a name="pattern-matching-with-switch-and-is"></a>Сопоставление шаблонов с операторами `switch` и `is`

*Шаблон пустой переменной* можно использовать в сопоставлении шаблонов с ключевыми словами [is](language-reference/keywords/is.md) и [switch](language-reference/keywords/switch.md). Каждое выражение всегда соответствует шаблону пустой переменной.

В следующем примере определяется метод `ProvidesFormatInfo`, который использует операторы [is](language-reference/keywords/is.md), чтобы узнать, предоставляет ли объект реализацию <xref:System.IFormatProvider> и не является ли он `null`. В примере также используется шаблон пустой переменной для обработки объектов любого другого типа с определенным значением.

[!code-csharp[discard-pattern](../../samples/snippets/csharp/programming-guide/discards/discard-pattern2.cs)]

## <a name="calls-to-methods-with-out-parameters"></a>Вызовы методов с параметрами "out"

При вызове метода `Deconstruct` для деконструкции пользовательского типа (экземпляра класса, структуры или интерфейса) вы можете сделать пустыми значения отдельных аргументов `out`. Но при вызове метода с параметром "out" вы также можете сделать пустыми значения аргументов `out`.

В следующем примере вызывается метод [DateTime.TryParse(String, out DateTime)](<xref:System.DateTime.TryParse(System.String,System.DateTime@)>), который определяет, является ли строковое представление даты допустимым для текущего языка и региональных параметров. Так как этот пример связан только с проверкой строки даты и не включает анализ этой строки для получения самой даты, аргумент `out` метода является пустым.

[!code-csharp[discard-with-out](../../samples/snippets/csharp/programming-guide/discards/discard-out1.cs)]

## <a name="a-standalone-discard"></a>Отдельная пустая переменная

Вы можете использовать отдельную пустую переменную, чтобы указать, что переменную необходимо игнорировать. В следующем примере отдельная пустая переменная используется, чтобы игнорировать объект <xref:System.Threading.Tasks.Task>, возвращаемый асинхронной операцией. При этом подавляется исключение, которое выдает операция перед завершением.

[!code-csharp[standalone-discard](../../samples/snippets/csharp/programming-guide/discards/standalone-discard1.cs)]

Обратите внимание, что `_` также является допустимым идентификатором. При использовании вне поддерживаемого контекста `_` считается не пустой, а действительной переменной. Если в области уже есть идентификатор с именем `_`, использование `_` в качестве отдельной пустой переменной может привести к следующим результатам:

- Случайное изменение значения переменной `_` в области из-за присвоения ей значения пустой переменной. Пример:

   [!code-csharp[standalone-discard](../../samples/snippets/csharp/programming-guide/discards/standalone-discard2.cs#1)]

- Ошибка компилятора из-за нарушения безопасности типов. Пример:

   [!code-csharp[standalone-discard](../../samples/snippets/csharp/programming-guide/discards/standalone-discard2.cs#2)]

- Ошибка компилятора CS0136 "Невозможно объявить локальную переменную или параметр с именем \_ в этой области, так как это имя используется для определения локальной переменной или параметра во включающей локальной области". Пример:

   [!code-csharp[standalone-discard](../../samples/snippets/csharp/programming-guide/discards/standalone-discard2.cs#3)]

## <a name="see-also"></a>См. также раздел

- [Деконструкция кортежей и других типов](deconstruct.md)
- [Ключевое слово `is`](language-reference/keywords/is.md)
- [Ключевое слово `switch`](language-reference/keywords/switch.md)
