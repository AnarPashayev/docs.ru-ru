---
title: Структуры | Руководство по C#
description: Сведения о типах структур и их создании
ms.date: 10/12/2016
ms.assetid: a7094b8c-7229-4b6f-82fc-824d0ea0ec40
ms.openlocfilehash: fbaa7fcc26009fe3117784b411941d30af0ba3c5
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "64608011"
---
# <a name="structs"></a>Структуры
Тип *struct* является типом значения. При создании структуры переменная, которой назначена структура, содержит фактические данные структуры. Если структура присваивается новой переменной, все данные копируются. Таким образом, новая переменная и исходная переменная содержат две отдельные копии одинаковых данных. Изменения, внесенные в одну копию, не влияют на другую.

Переменные типа значения напрямую содержат свои значения, что означает, что память выделяется в любом контексте объявления переменной. Нет раздельного размещения в куче или накладных расходов при сборке мусора для переменных типа значения.  
  
Существует две категории типов значений: [структура](./language-reference/keywords/struct.md) и [перечисление](./language-reference/keywords/enum.md).  
  
Встроенные числовые типы являются структурами и имеют свойства и методы, к которым можно обращаться.  
  
[!code-csharp[Static Method](../../samples/snippets/csharp/concepts/structs/static-method.cs)]
  
Но объявление и присвоение значений вы выполняете для них так, как если бы они были простыми нестатистическими типами.  
  
[!code-csharp[Assign Values](../../samples/snippets/csharp/concepts/structs/assign-value.cs)] 
  
Типы значений являются *запечатанными*, что означает, например, что нельзя наследовать тип от <xref:System.Int32> и нельзя определить структуру для наследования от любого пользовательского класса или структуры, поскольку структура может наследовать только от <xref:System.ValueType>. Тем не менее структура может реализовывать один или несколько интерфейсов. Можно выполнить приведение типа структуры к типу интерфейса; это приведет к операции *упаковки-преобразования*, которая создаст программу-оболочку для структуры внутри объекта ссылочного типа в управляемой куче. Операции упаковки-преобразования возникают при передаче типа значения в метод, принимающий <xref:System.Object> в качестве входного параметра. Дополнительные сведения см. в разделе [Упаковка-преобразование и распаковка-преобразование](./programming-guide/types/boxing-and-unboxing.md ).  
  
Используйте ключевое слово [struct](./language-reference/keywords/struct.md), чтобы создать собственные пользовательские типы значений. Как правило, структура используется как контейнер для небольшого набора связанных переменных, как показано в следующем примере:  
  
[!code-csharp[Struct Keyword](../../samples/snippets/csharp/concepts/structs/struct-keyword.cs)]  
  
Дополнительные сведения о типах значений в .NET Framework см. в разделе [Система общих типов](../standard/common-type-system.md).  
    
Структуры используют большую часть того же синтаксиса, что и классы, однако они более ограничены по сравнению с ними.  
  
- В объявлении структуры поля не могут быть инициализированы до тех пор, пока они будут объявлены как `const` или `static`.  
  
- Структура не может объявлять конструктор без параметров или метод завершения.  
  
- Структуры копируются при присваивании. При присваивании структуры к новой переменной выполняется копирование всех данных, а любое изменение новой копии не влияет на данные в исходной копии. Это важно помнить при работе с коллекциями типов значений, такими как Dictionary<string, myStruct>.  
  
- Структуры являются типами значений, а классы — ссылочными типами.  
  
- В отличие от классов структуры можно создавать без использования оператора `new`.  
  
- Структуры могут объявлять конструкторы, имеющие параметры.  
  
- Структура не может наследовать от другой структуры или класса и не может быть базовой для класса. Все структуры наследуют непосредственно от <xref:System.ValueType>, который наследует от <xref:System.Object>.  
  
- Структуры могут реализовывать интерфейсы.

## <a name="literal-values"></a>Литеральные значения  
В C# литеральные значения получают тип от компилятора. Вы можете указать способ типизации числового литерала, добавив букву в конце числа. Например, чтобы указать, что значение 4,56 должно рассматриваться как значение с плавающей запятой, добавьте "f" или "F" после числа: `4.56f`. Если буква не добавлена, компилятор определит для литерала тип `double`. Дополнительные сведения о том, какие типы могут быть указаны с буквенными суффиксами, см. на страницах справки по отдельным типам в разделе [Типы значений](./language-reference/keywords/value-types.md).  
  
Поскольку литералы являются типизированными и все типы в конечном счете являются производными от <xref:System.Object>, можно написать и скомпилировать следующий код:  
  
[!code-csharp[Literal Values](../../samples/snippets/csharp/concepts/structs/literals.cs)]

В последних двух примерах показаны функции языка, появившиеся в C# 7.0. В первом примере знак подчеркивания используется как *разделитель цифр* внутри числовых литералов. Его можно помещать в любом месте между цифрами, чтобы повысить удобочитаемость. Он не оказывает влияния на значение.

Во втором примере показаны *двоичные литералы*, которые позволяют напрямую указывать битовые шаблоны, а не использовать шестнадцатеричное представление.

## <a name="nullable-types"></a>Типы, допускающие значения NULL  
Обычные типы значений не могут иметь значение [NULL](./language-reference/keywords/null.md). Тем не менее можно создать типы, допускающие значения NULL, добавив **?** после типа. Например **int?** является типом **int**, который также может иметь значение [NULL](./language-reference/keywords/null.md). Типы, допускающие значения NULL, в системе общих типов представляют собой экземпляры универсального типа структуры <xref:System.Nullable%601>. Типы, допускающие значения NULL, особенно полезны при передаче данных в базы данных и из них, где числовые значения могут иметь значение NULL. Дополнительные сведения см. в разделе [Типы, допускающие значение NULL (руководство по программированию на C#) ](./programming-guide/nullable-types/index.md).

## <a name="see-also"></a>См. также

- [Классы](classes.md)
- [Базовые типы](basic-types.md)
