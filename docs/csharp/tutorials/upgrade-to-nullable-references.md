---
title: Разработка с использованием ссылочных типов, допускающих значение null
description: В этом расширенном руководстве содержатся общие сведения о ссылочных типах, допускающих значение null. Вы научитесь выражать проектный замысел относительно того, когда ссылочные значения могут иметь значение null, и используете компилятор, который будет применять соответствующее поведение, когда они не могут иметь значение null.
ms.date: 02/19/2019
ms.custom: mvc
ms.openlocfilehash: 0c95065e6c380fab6ba33432a32b3297e78027a3
ms.sourcegitcommit: 33c8d6f7342a4bb2c577842b7f075b0e20a2fa40
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/12/2019
ms.locfileid: "70926629"
---
# <a name="tutorial-migrate-existing-code-with-nullable-reference-types"></a><span data-ttu-id="838b6-104">Учебник. Перенос существующего кода со ссылочными типами, допускающими значение null</span><span class="sxs-lookup"><span data-stu-id="838b6-104">Tutorial: Migrate existing code with nullable reference types</span></span>

<span data-ttu-id="838b6-105">В C# 8 вводятся **ссылочные типы, допускающие значение null**, которые дополняют ссылочные типы таким же образом, как типы значений, допускающие значение null, дополняют другие типы значений.</span><span class="sxs-lookup"><span data-stu-id="838b6-105">C# 8 introduces **nullable reference types**, which complement reference types the same way nullable value types complement value types.</span></span> <span data-ttu-id="838b6-106">Чтобы объявить переменную как имеющую **ссылочный тип, допускающий значение null**, добавьте `?` к типу.</span><span class="sxs-lookup"><span data-stu-id="838b6-106">You declare a variable to be a **nullable reference type** by appending a `?` to the type.</span></span> <span data-ttu-id="838b6-107">Например, `string?` соответствует типу `string`, допускающему значение null.</span><span class="sxs-lookup"><span data-stu-id="838b6-107">For example, `string?` represents a nullable `string`.</span></span> <span data-ttu-id="838b6-108">Эти новые типы можно использовать для более четкого выражения проектного замысла: некоторые переменные *всегда должны содержать значение*, а в других *они могут отсутствовать*.</span><span class="sxs-lookup"><span data-stu-id="838b6-108">You can use these new types to more clearly express your design intent: some variables *must always have a value*, others *may be missing a value*.</span></span> <span data-ttu-id="838b6-109">Любые существующие переменные ссылочного типа будут интерпретироваться как не допускающие значение null.</span><span class="sxs-lookup"><span data-stu-id="838b6-109">Any existing variables of a reference type would be interpreted as a non-nullable reference type.</span></span> 

<span data-ttu-id="838b6-110">В этом руководстве вы узнаете, как:</span><span class="sxs-lookup"><span data-stu-id="838b6-110">In this tutorial, you'll learn how to:</span></span>

> [!div class="checklist"]
>
> - <span data-ttu-id="838b6-111">включить проверку пустых ссылок при работе с кодом;</span><span class="sxs-lookup"><span data-stu-id="838b6-111">Enable null reference checks as you work with code.</span></span>
> - <span data-ttu-id="838b6-112">выполнить диагностику и устранение различных предупреждений, связанных со значениями null;</span><span class="sxs-lookup"><span data-stu-id="838b6-112">Diagnose and correct different warnings related to null values.</span></span>
> - <span data-ttu-id="838b6-113">управлять интерфейсом между контекстами, допускающими значение null и не допускающими его;</span><span class="sxs-lookup"><span data-stu-id="838b6-113">Manage the interface between nullable enabled and nullable disabled contexts.</span></span>
> - <span data-ttu-id="838b6-114">контролировать контекст заметок, допускающих значение null.</span><span class="sxs-lookup"><span data-stu-id="838b6-114">Control nullable annotation contexts.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="838b6-115">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="838b6-115">Prerequisites</span></span>

<span data-ttu-id="838b6-116">Вам нужно настроить свой компьютер для выполнения .NET Core, включая бета-компилятор C# 8.0.</span><span class="sxs-lookup"><span data-stu-id="838b6-116">You'll need to set up your machine to run .NET Core, including the C# 8.0 beta compiler.</span></span> <span data-ttu-id="838b6-117">Бета-компилятор C# 8 доступен в [Visual Studio 2019](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link&utm_content=download+vs2019) или в последней [предварительной версии .NET Core 3.0](https://dotnet.microsoft.com/download/dotnet-core/3.0).</span><span class="sxs-lookup"><span data-stu-id="838b6-117">The C# 8 beta compiler is available with [Visual Studio 2019](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link&utm_content=download+vs2019), or the latest [.NET Core 3.0 preview](https://dotnet.microsoft.com/download/dotnet-core/3.0).</span></span>

<span data-ttu-id="838b6-118">В этом руководстве предполагается, что вы знакомы с C# и .NET, включая Visual Studio или .NET Core CLI.</span><span class="sxs-lookup"><span data-stu-id="838b6-118">This tutorial assumes you're familiar with C# and .NET, including either Visual Studio or the .NET Core CLI.</span></span>

## <a name="explore-the-sample-application"></a><span data-ttu-id="838b6-119">Изучение примера приложения</span><span class="sxs-lookup"><span data-stu-id="838b6-119">Explore the sample application</span></span>

<span data-ttu-id="838b6-120">Пример приложения, который вы будете переносить, представляет собой веб-приложение для чтения RSS-каналов.</span><span class="sxs-lookup"><span data-stu-id="838b6-120">The sample application that you'll migrate is an RSS feed reader web app.</span></span> <span data-ttu-id="838b6-121">Оно читает один RSS-канал и отображает сводки самых последних статей.</span><span class="sxs-lookup"><span data-stu-id="838b6-121">It reads from a single RSS feed and displays summaries for the most recent articles.</span></span> <span data-ttu-id="838b6-122">Вы можете щелкнуть любую статью, чтобы перейти на страницу сайта.</span><span class="sxs-lookup"><span data-stu-id="838b6-122">You can click on any of the articles to visit the site.</span></span> <span data-ttu-id="838b6-123">Приложение относительно новое, но было написано до того, как ссылочные типы, допускающие значение null, стали доступными.</span><span class="sxs-lookup"><span data-stu-id="838b6-123">The application is relatively new but was written before nullable reference types were available.</span></span> <span data-ttu-id="838b6-124">Проектные решения для приложения представляют разумные принципы, но не используют преимущества этой важной функции языка.</span><span class="sxs-lookup"><span data-stu-id="838b6-124">The design decisions for the application represented sound principles, but don't take advantage of this important language feature.</span></span>

<span data-ttu-id="838b6-125">Пример приложения содержит библиотеку модульных тестов, которые проверяют основную функциональность приложения.</span><span class="sxs-lookup"><span data-stu-id="838b6-125">The sample application includes a unit test library that validates the major functionality of the app.</span></span> <span data-ttu-id="838b6-126">Этот проект облегчит безопасное обновление, если вы измените любую из реализаций на основе сгенерированных предупреждений.</span><span class="sxs-lookup"><span data-stu-id="838b6-126">That project will make it easier to upgrade safely, if you change any of the implementation based on the warnings generated.</span></span> <span data-ttu-id="838b6-127">Скачать начальный код можно из репозитория GitHub [dotnet/samples](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/start).</span><span class="sxs-lookup"><span data-stu-id="838b6-127">You can download the starter code from the [dotnet/samples](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/start) GitHub repository.</span></span>

<span data-ttu-id="838b6-128">Целью переноса проекта является использование новых возможностей языка, позволяющих четко выразить свои намерения относительно переменных, допускающих значение null, таким образом, чтобы компилятор не генерировал предупреждения в случае контекста заметок, допускающих значение null, и установки для контекста предупреждений о допустимости значения null значения `enabled`.</span><span class="sxs-lookup"><span data-stu-id="838b6-128">Your goal migrating a project should be to leverage the new language features so that you clearly express your intent on the nullability of variables, and do so in such a way that the compiler doesn't generate warnings when you have the nullable annotation context and nullable warning context set to `enabled`.</span></span>

## <a name="upgrade-the-projects-to-c-8"></a><span data-ttu-id="838b6-129">Переход проекта на C# 8</span><span class="sxs-lookup"><span data-stu-id="838b6-129">Upgrade the projects to C# 8</span></span>

<span data-ttu-id="838b6-130">Сначала рекомендуется определить область задачи перехода.</span><span class="sxs-lookup"><span data-stu-id="838b6-130">A good first step is to determine the scope of the migration task.</span></span> <span data-ttu-id="838b6-131">В первую очередь мы перейдем на использование C# 8.0 (или более поздней версии).</span><span class="sxs-lookup"><span data-stu-id="838b6-131">Start by upgrading the project to C# 8.0 (or newer).</span></span> <span data-ttu-id="838b6-132">Добавьте элемент `LangVersion` в два CSPROJ-файла: веб-проекта и проекта модульных тестов.</span><span class="sxs-lookup"><span data-stu-id="838b6-132">Add the `LangVersion` element to both csproj files for the web project and the unit test project:</span></span>

```xml
<LangVersion>8.0</LangVersion>
```

<span data-ttu-id="838b6-133">Версия языка обновляется до C# 8.0, но без включения контекста заметок, допускающих значение null, или контекста предупреждений о допустимости значения null.</span><span class="sxs-lookup"><span data-stu-id="838b6-133">Upgrading the language version selects C# 8.0, but does not enable the nullable annotation context or the nullable warning context.</span></span> <span data-ttu-id="838b6-134">Перестройте проект так, чтобы сборка выполнялась без предупреждений.</span><span class="sxs-lookup"><span data-stu-id="838b6-134">Rebuild the project to ensure that it builds without warnings.</span></span>

<span data-ttu-id="838b6-135">Следующим шагом является включение контекста заметок, допускающих значение null, и просмотр количества генерируемых предупреждений.</span><span class="sxs-lookup"><span data-stu-id="838b6-135">A good next step is to turn on the nullable annotation context and see how many warnings are generated.</span></span> <span data-ttu-id="838b6-136">Добавьте следующий элемент прямо под элементом `LangVersion` в оба CSPROJ-файла решения:</span><span class="sxs-lookup"><span data-stu-id="838b6-136">Add the following element to both csproj files in the solution, directly under the `LangVersion` element:</span></span>

```xml
<Nullable>enable</Nullable>
```

> [!IMPORTANT]
> <span data-ttu-id="838b6-137">Элемент `Nullable` ранее назывался `NullableContextOptions`.</span><span class="sxs-lookup"><span data-stu-id="838b6-137">The `Nullable` element was previously named `NullableContextOptions`.</span></span> <span data-ttu-id="838b6-138">Он был переименован в Visual Studio 2019 версии 16.2-p1.</span><span class="sxs-lookup"><span data-stu-id="838b6-138">The rename ships with Visual Studio 2019, 16.2-p1.</span></span> <span data-ttu-id="838b6-139">Это изменение отсутствует в пакете SDK для .NET Core версии 3.0.100-preview5-011568.</span><span class="sxs-lookup"><span data-stu-id="838b6-139">The .NET Core SDK 3.0.100-preview5-011568 does not have this change.</span></span> <span data-ttu-id="838b6-140">Если вы используете .NET Core CLI, вам потребуется применять `NullableContextOptions` до выпуска следующей предварительной версии.</span><span class="sxs-lookup"><span data-stu-id="838b6-140">If you are using the .NET Core CLI, you'll need to use `NullableContextOptions` until the next preview is available.</span></span>

<span data-ttu-id="838b6-141">Выполните тестовую сборку и обратите внимание на список предупреждений.</span><span class="sxs-lookup"><span data-stu-id="838b6-141">Do a test build, and notice the warning list.</span></span> <span data-ttu-id="838b6-142">В этом небольшом приложении компилятор генерирует пять предупреждений, так что, скорее всего, вы оставите контекст заметок, допускающих значение null, включенным и начнете исправлять предупреждения для всего проекта.</span><span class="sxs-lookup"><span data-stu-id="838b6-142">In this small application, the compiler generates five warnings, so it's likely you'd leave the nullable annotation context enabled and start fixing warnings for the entire project.</span></span>

<span data-ttu-id="838b6-143">Эта стратегия работает только для небольших проектов.</span><span class="sxs-lookup"><span data-stu-id="838b6-143">That strategy works only for smaller projects.</span></span> <span data-ttu-id="838b6-144">Для крупных проектов из-за включения контекста заметок, допускающих значение null, для всей базы кода генерируется большое количество предупреждений. Это затрудняет систематическое исправление этих предупреждений.</span><span class="sxs-lookup"><span data-stu-id="838b6-144">For any larger projects, the number of warnings generated by enabling the nullable annotation context for the entire codebase makes it harder to fix the warnings systematically.</span></span> <span data-ttu-id="838b6-145">Для крупных корпоративных проектов часто нужно будет переносить один проект за раз.</span><span class="sxs-lookup"><span data-stu-id="838b6-145">For larger enterprise projects, you'll often want to migrate one project at a time.</span></span> <span data-ttu-id="838b6-146">В каждом проекте переносите один класс или файл за раз.</span><span class="sxs-lookup"><span data-stu-id="838b6-146">In each project, migrate one class or file at a time.</span></span>

## <a name="warnings-help-discover-original-design-intent"></a><span data-ttu-id="838b6-147">Предупреждения помогают определить исходное намерение проекта</span><span class="sxs-lookup"><span data-stu-id="838b6-147">Warnings help discover original design intent</span></span>

<span data-ttu-id="838b6-148">Существует два класса, которые генерируют предупреждения.</span><span class="sxs-lookup"><span data-stu-id="838b6-148">There are two classes that generate multiple warnings.</span></span> <span data-ttu-id="838b6-149">Начнем с класса `NewsStoryViewModel`.</span><span class="sxs-lookup"><span data-stu-id="838b6-149">Start with the `NewsStoryViewModel` class.</span></span> <span data-ttu-id="838b6-150">Удалите элемент `Nullable` из обоих CSPROJ-файлов, чтобы ограничить область предупреждений до фрагментов кода, над которыми вы работаете.</span><span class="sxs-lookup"><span data-stu-id="838b6-150">Remove the `Nullable` element from both csproj files so that you can limit the scope of warnings to the sections of code you're working with.</span></span> <span data-ttu-id="838b6-151">Откройте файл *NewsStoryViewModel.cs* и добавьте следующие директивы, чтобы включить контекст заметок, допускающих значение null, для класса `NewsStoryViewModel`, и восстановите класс в соответствии со следующим определением:</span><span class="sxs-lookup"><span data-stu-id="838b6-151">Open the *NewsStoryViewModel.cs* file and add the following directives to enable the nullable annotation context for the `NewsStoryViewModel` and restore it following that class definition:</span></span>

```csharp
#nullable enable
public class NewsStoryViewModel
{
    public DateTimeOffset Published { get; set; }
    public string Title { get; set; }
    public string Uri { get; set; }
}
#nullable restore
```

<span data-ttu-id="838b6-152">Эти две директивы помогут сфокусировать трудозатраты перехода.</span><span class="sxs-lookup"><span data-stu-id="838b6-152">These two directives help you focus your migration efforts.</span></span> <span data-ttu-id="838b6-153">Предупреждения о допустимости значений null генерируются для той области кода, над которой вы активно работаете.</span><span class="sxs-lookup"><span data-stu-id="838b6-153">The nullable warnings are generated for the area of code you're actively working on.</span></span> <span data-ttu-id="838b6-154">Оставьте так до тех пор, пока не будете готовы включить предупреждения для всего проекта.</span><span class="sxs-lookup"><span data-stu-id="838b6-154">You'll leave them on until you're ready to turn on the warnings for the entire project.</span></span> <span data-ttu-id="838b6-155">Необходимо использовать значение `restore`, а не `disable`, чтобы случайно не отключить контекст, когда вы включите заметки, допускающие значение null, для всего проекта.</span><span class="sxs-lookup"><span data-stu-id="838b6-155">You should use the `restore` rather than `disable` value so that you don't accidentally disable the context later when you've turned on nullable annotations for the entire project.</span></span> <span data-ttu-id="838b6-156">После включения контекста заметок, допускающих значение null, для всего проекта вы можете удалить все прагмы-директивы `#nullable` из проекта.</span><span class="sxs-lookup"><span data-stu-id="838b6-156">Once you've turned on the nullable annotation context for the entire project, you can remove all the `#nullable` pragmas from that project.</span></span>

<span data-ttu-id="838b6-157">Класс `NewsStoryViewModel` является объектом передачи данных (DTO), а двое из его свойств — строками чтения и записи:</span><span class="sxs-lookup"><span data-stu-id="838b6-157">The `NewsStoryViewModel` class is a data transfer object (DTO) and two of the properties are read/write strings:</span></span>

[!code-csharp[InitialViewModel](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/ViewModels/NewsStoryViewModel.cs#StarterViewModel)]

<span data-ttu-id="838b6-158">Эти два свойства вызывают ошибку `CS8618`: "Non-nullable property is uninitialized" (Отменена инициализация свойства, которое не является свойством необязательной определенности).</span><span class="sxs-lookup"><span data-stu-id="838b6-158">These two properties cause `CS8618`, "Non-nullable property is uninitialized".</span></span> <span data-ttu-id="838b6-159">Это очевидно: оба свойства `string` при создании объекта `NewsStoryViewModel` имеют значение по умолчанию `null`.</span><span class="sxs-lookup"><span data-stu-id="838b6-159">That's clear enough: both `string` properties have the default value of `null` when a `NewsStoryViewModel` is constructed.</span></span> <span data-ttu-id="838b6-160">Важно выяснить, как создаются объекты `NewsStoryViewModel`.</span><span class="sxs-lookup"><span data-stu-id="838b6-160">What's important to discover is how `NewsStoryViewModel` objects are constructed.</span></span> <span data-ttu-id="838b6-161">Глядя на этот класс, невозможно определить то, является ли значение `null` частью решения разработки, или то, устанавливаются ли для этих объектов ненулевые значения во время их создания.</span><span class="sxs-lookup"><span data-stu-id="838b6-161">Looking at this class, you can't tell if the `null` value is part of the design, or if these objects are set to non-null values whenever one is created.</span></span> <span data-ttu-id="838b6-162">Новости (newsStory) создаются в методе `GetNews` класса `NewsService`:</span><span class="sxs-lookup"><span data-stu-id="838b6-162">The news stories are created in the `GetNews` method of the `NewsService` class:</span></span>

[!code-csharp[StarterCreateNewsItem](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Services/NewsService.cs#CreateNewsItem)]

<span data-ttu-id="838b6-163">В предыдущем блоке кода довольно много важного.</span><span class="sxs-lookup"><span data-stu-id="838b6-163">There's quite a bit going on in the preceding block of code.</span></span> <span data-ttu-id="838b6-164">Это приложение использует пакет NuGet [AutoMapper](https://automapper.org/) для создания элемента новостей на основе элемента `ISyndicationItem`.</span><span class="sxs-lookup"><span data-stu-id="838b6-164">This application uses the [AutoMapper](https://automapper.org/) NuGet package to construct a news item from an `ISyndicationItem`.</span></span> <span data-ttu-id="838b6-165">Видно также, что в этом одном операторе и создаются элементы новостей, и задаются свойства.</span><span class="sxs-lookup"><span data-stu-id="838b6-165">You've discovered that the news story items are constructed and the properties are set in that one statement.</span></span> <span data-ttu-id="838b6-166">Это означает, что проектное решение класса `NewsStoryViewModel` указывает, что эти свойства никогда не должны иметь значение `null`.</span><span class="sxs-lookup"><span data-stu-id="838b6-166">That means the design for the `NewsStoryViewModel` indicates that these properties should never have the `null` value.</span></span> <span data-ttu-id="838b6-167">Эти свойства должны быть **ссылочного типа, не допускающего значение null**.</span><span class="sxs-lookup"><span data-stu-id="838b6-167">These properties should be **nonnullable reference types**.</span></span> <span data-ttu-id="838b6-168">Это лучше всего выражает исходное намерение проекта.</span><span class="sxs-lookup"><span data-stu-id="838b6-168">That best expresses the original design intent.</span></span> <span data-ttu-id="838b6-169">Фактически, любой объект `NewsStoryViewModel` *правильно* создается с ненулевыми значениями.</span><span class="sxs-lookup"><span data-stu-id="838b6-169">In fact, any `NewsStoryViewModel` *is* correctly instantiated with non-null values.</span></span> <span data-ttu-id="838b6-170">Следующий код инициализации является допустимым исправлением:</span><span class="sxs-lookup"><span data-stu-id="838b6-170">That makes the following initialization code a valid fix:</span></span>

```csharp
public class NewsStoryViewModel
{
    public DateTimeOffset Published { get; set; }
    public string Title { get; set; } = default!;
    public string Uri { get; set; } = default!;
}
```

<span data-ttu-id="838b6-171">Присвоение строкам `Title` и `Uri` значения `default`, которое является `null` для типа `string`, не изменяет поведение программы во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="838b6-171">The assignment of `Title` and `Uri` to `default` which is `null` for the `string` type doesn't change the runtime behavior of the program.</span></span> <span data-ttu-id="838b6-172">Объекты класса `NewsStoryViewModel` все еще создаются с нулевыми значениями, но теперь компилятор не выдает предупреждений.</span><span class="sxs-lookup"><span data-stu-id="838b6-172">The `NewsStoryViewModel` is still constructed with null values, but now the compiler reports no warnings.</span></span> <span data-ttu-id="838b6-173">**Оператором, разрешающим значение null**, является символ `!`. В этом примере он стоит после выражения `default` и сообщает компилятору, что предыдущее выражение не является нулевым.</span><span class="sxs-lookup"><span data-stu-id="838b6-173">The **null-forgiving operator**, the `!` character following the `default` expression tells the compiler that the preceding expression is not null.</span></span> <span data-ttu-id="838b6-174">Эта методика может быть целесообразной, если другие изменения вызывают гораздо большие изменения базы кода, но в этом приложении есть лучшее и относительно быстрое решение. Оно состоит в том, чтобы сделать класс `NewsStoryViewModel` неизменным типом, где все свойства устанавливаются в конструкторе.</span><span class="sxs-lookup"><span data-stu-id="838b6-174">This technique may be expedient when other changes force much larger changes to a code base, but in this application there is a relatively quick and better solution: Make the `NewsStoryViewModel` an immutable type where all the properties are set in the constructor.</span></span> <span data-ttu-id="838b6-175">Внесите следующие изменения в класс `NewsStoryViewModel`:</span><span class="sxs-lookup"><span data-stu-id="838b6-175">Make the following changes to the `NewsStoryViewModel`:</span></span>

[!code-csharp[FinishedViewModel](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/ViewModels/NewsStoryViewModel.cs#FinishedViewModel)]

<span data-ttu-id="838b6-176">После этого нужно обновить код, который настраивает AutoMapper так, чтобы тот использовал конструктор, а не инициализировал свойства.</span><span class="sxs-lookup"><span data-stu-id="838b6-176">Once that's done, you need to update the code that configures the AutoMapper so that it uses the constructor rather than setting properties.</span></span> <span data-ttu-id="838b6-177">Откройте файл `NewsService.cs` и найдите следующий код в нижней части:</span><span class="sxs-lookup"><span data-stu-id="838b6-177">Open `NewsService.cs` and look for the following code at the bottom of the file:</span></span>

[!code-csharp[StarterAutoMapper](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Services/NewsService.cs#ConfigureAutoMapper)]

<span data-ttu-id="838b6-178">Этот код сопоставляет свойства объектов `ISyndicationItem` и `NewsStoryViewModel`.</span><span class="sxs-lookup"><span data-stu-id="838b6-178">That code maps properties of the `ISyndicationItem` object to the `NewsStoryViewModel` properties.</span></span> <span data-ttu-id="838b6-179">Нам нужно, чтобы AutoMapper предоставил сопоставление, используя вместо этого конструктор.</span><span class="sxs-lookup"><span data-stu-id="838b6-179">You want the AutoMapper to provide the mapping using a constructor instead.</span></span> <span data-ttu-id="838b6-180">Замените приведенный выше код на следующую конфигурацию AutoMapper:</span><span class="sxs-lookup"><span data-stu-id="838b6-180">Replace the above code with the following automapper configuration:</span></span>

[!code-csharp[FinishedViewModel](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Services/NewsService.cs#ConfigureAutoMapper)]

<span data-ttu-id="838b6-181">Обратите внимание, так как этот класс небольшой и вы внимательно изучили его, необходимо включить директиву `#nullable enable` над объявлением класса.</span><span class="sxs-lookup"><span data-stu-id="838b6-181">Notice that because this class is small, and you've examined carefully, you should turn on the `#nullable enable` directive above this class declaration.</span></span> <span data-ttu-id="838b6-182">Изменение в конструкторе могло нарушить какой-то код, поэтому стоит выполнить все тесты и протестировать приложение, прежде чем двигаться дальше.</span><span class="sxs-lookup"><span data-stu-id="838b6-182">The change to the constructor could have broken something, so it's worthwhile to run all the tests and test the application before moving on.</span></span>

<span data-ttu-id="838b6-183">Первый набор изменений показал, как определить, что в исходном намерении для переменных не должно устанавливаться значение `null`.</span><span class="sxs-lookup"><span data-stu-id="838b6-183">The first set of changes showed you how to discover when the original design indicated that variables shouldn't be set to `null`.</span></span> <span data-ttu-id="838b6-184">Это методика называется **правильным конструированием**.</span><span class="sxs-lookup"><span data-stu-id="838b6-184">The technique is referred to as **correct by construction**.</span></span> <span data-ttu-id="838b6-185">Вы объявляете, что объект и его свойства не могут иметь значение `null` при создании.</span><span class="sxs-lookup"><span data-stu-id="838b6-185">You declare that an object and its properties cannot be `null` when it's constructed.</span></span> <span data-ttu-id="838b6-186">Анализ потока компилятором гарантирует, что для этих свойств не будет задано значение `null` после создания.</span><span class="sxs-lookup"><span data-stu-id="838b6-186">The compiler's flow analysis provides assurance that those properties aren't set to `null` after construction.</span></span> <span data-ttu-id="838b6-187">Обратите внимание, что конструктор вызывается внешним кодом, который **не обращает внимания на допустимость значений null**.</span><span class="sxs-lookup"><span data-stu-id="838b6-187">Note that this constructor is called by external code, and that code is **nullable oblivious**.</span></span> <span data-ttu-id="838b6-188">Новый синтаксис не обеспечивает проверку во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="838b6-188">The new syntax doesn't provide runtime checking.</span></span> <span data-ttu-id="838b6-189">Внешний код может обойти анализ потока компилятором.</span><span class="sxs-lookup"><span data-stu-id="838b6-189">External code might circumvent the compiler's flow analysis.</span></span> 

<span data-ttu-id="838b6-190">В других случаях структура класса предоставляет различные подсказки к пониманию намерения.</span><span class="sxs-lookup"><span data-stu-id="838b6-190">Other times, the structure of a class provides different clues to the intent.</span></span> <span data-ttu-id="838b6-191">Откройте файл *Error.cshtml.cs* в папке *Pages*.</span><span class="sxs-lookup"><span data-stu-id="838b6-191">Open the *Error.cshtml.cs* file in the *Pages* folder.</span></span> <span data-ttu-id="838b6-192">Класс `ErrorViewModel` содержит следующий код:</span><span class="sxs-lookup"><span data-stu-id="838b6-192">The `ErrorViewModel` contains the following code:</span></span>

[!code-csharp[StarterErrorModel](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Pages/Error.cshtml.cs#StartErrorModel)]

<span data-ttu-id="838b6-193">Добавьте директиву `#nullable enable` перед объявлением класса и директиву `#nullable restore` после объявления.</span><span class="sxs-lookup"><span data-stu-id="838b6-193">Add the `#nullable enable` directive before the class declaration, and a `#nullable restore` directive after it.</span></span> <span data-ttu-id="838b6-194">Вы получите одно предупреждение о том, что `RequestId` не инициализирован.</span><span class="sxs-lookup"><span data-stu-id="838b6-194">You'll get one warning that `RequestId` is not initialized.</span></span> <span data-ttu-id="838b6-195">Посмотрев на класс, вы должны решить, что в некоторых случаях свойство `RequestId` должно быть со значением null.</span><span class="sxs-lookup"><span data-stu-id="838b6-195">By looking at the class, you should decide that the `RequestId` property should be null in some cases.</span></span> <span data-ttu-id="838b6-196">Наличие свойства `ShowRequestId` указывает, что возможны пропущенные значения.</span><span class="sxs-lookup"><span data-stu-id="838b6-196">The existence of the `ShowRequestId` property indicates that missing values are possible.</span></span> <span data-ttu-id="838b6-197">Так как значение `null` является допустимым, добавьте `?` в тип `string`, чтобы указать, что свойство `RequestId` является *ссылочного типа, допускающего значение null*.</span><span class="sxs-lookup"><span data-stu-id="838b6-197">Because `null` is valid, add the `?` on the `string` type to indicate the `RequestId` property is a *nullable reference type*.</span></span> <span data-ttu-id="838b6-198">Окончательное определение класса выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="838b6-198">The final class looks like the following example:</span></span>

[!code-csharp[FinishedErrorModel](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Error.cshtml.cs#ErrorModel)]

<span data-ttu-id="838b6-199">Проверьте использование свойства. Вы увидите, что перед отображением свойства в исправлении оно проверяется на значение null на соответствующей странице.</span><span class="sxs-lookup"><span data-stu-id="838b6-199">Check for the uses of the property, and you see that in the associated page, the property is checked for null before rendering it in markup.</span></span> <span data-ttu-id="838b6-200">Это безопасное использование ссылочного типа, допускающего значение null, поэтому мы закончим работу с этим классом.</span><span class="sxs-lookup"><span data-stu-id="838b6-200">That's a safe use of a nullable reference type, so you're done with this class.</span></span>

## <a name="fixing-nulls-causes-change"></a><span data-ttu-id="838b6-201">Исправление значений null приводит к изменениям</span><span class="sxs-lookup"><span data-stu-id="838b6-201">Fixing nulls causes change</span></span>

<span data-ttu-id="838b6-202">Часто исправление одного набора предупреждений создает новые предупреждения в связанном коде.</span><span class="sxs-lookup"><span data-stu-id="838b6-202">Frequently, the fix for one set of warnings creates new warnings in related code.</span></span> <span data-ttu-id="838b6-203">Давайте посмотрим на предупреждения в действии, исправив класс `index.cshtml.cs`.</span><span class="sxs-lookup"><span data-stu-id="838b6-203">Let's see the warnings in action by fixing the `index.cshtml.cs` class.</span></span> <span data-ttu-id="838b6-204">Откройте файл `index.cshtml.cs` и изучите код.</span><span class="sxs-lookup"><span data-stu-id="838b6-204">Open the `index.cshtml.cs` file and examine the code.</span></span> <span data-ttu-id="838b6-205">В этом файле содержится код для страницы индексов:</span><span class="sxs-lookup"><span data-stu-id="838b6-205">This file contains the code behind for the index page:</span></span>

[!code-csharp[StarterIndexModel](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Pages/Index.cshtml.cs#IndexModelStart)]

<span data-ttu-id="838b6-206">Добавьте директиву `#nullable enable`, и вы увидите два предупреждения.</span><span class="sxs-lookup"><span data-stu-id="838b6-206">Add the `#nullable enable` directive and you'll see two warnings.</span></span> <span data-ttu-id="838b6-207">Ни свойство `ErrorText`, ни свойство `NewsItems` не инициализированы.</span><span class="sxs-lookup"><span data-stu-id="838b6-207">Neither the `ErrorText` property nor the `NewsItems` property is initialized.</span></span> <span data-ttu-id="838b6-208">Изучив этот класс, вы придете к выводу, что оба свойства должны быть ссылочного типа, допускающего значение null: оба имеют частные методы задания.</span><span class="sxs-lookup"><span data-stu-id="838b6-208">An examination of this class would lead you to believe that both properties should be nullable reference types: Both have private setters.</span></span> <span data-ttu-id="838b6-209">Один из этих методов назначается в методе `OnGet`.</span><span class="sxs-lookup"><span data-stu-id="838b6-209">Exactly one is assigned in the `OnGet` method.</span></span> <span data-ttu-id="838b6-210">Прежде чем вносить изменения, посмотрите на объекты-получатели обоих свойств.</span><span class="sxs-lookup"><span data-stu-id="838b6-210">Before making changes, look at the consumers of both properties.</span></span> <span data-ttu-id="838b6-211">На самой странице объект `ErrorText` проверяется на значение null перед созданием исправления ошибок.</span><span class="sxs-lookup"><span data-stu-id="838b6-211">In the page itself, the `ErrorText` is checked against null before generating markup for any errors.</span></span> <span data-ttu-id="838b6-212">Коллекция `NewsItems` проверяется на значение `null`, а также на наличие в ней элементов.</span><span class="sxs-lookup"><span data-stu-id="838b6-212">The `NewsItems` collection is checked against `null`, and checked to ensure the collection has items.</span></span> <span data-ttu-id="838b6-213">Чтобы быстро решить эту проблему, можно присвоить этим свойствам ссылочные типы, допускающие значение null.</span><span class="sxs-lookup"><span data-stu-id="838b6-213">A quick fix would be to make both properties nullable reference types.</span></span> <span data-ttu-id="838b6-214">Но лучше было бы сделать коллекцию ссылочного типа, не допускающего значение null, и добавлять элементы в существующую коллекцию при получении новостей.</span><span class="sxs-lookup"><span data-stu-id="838b6-214">A better fix would be to make the collection a nonnullable reference type, and add items to the existing collection when retrieving news.</span></span> <span data-ttu-id="838b6-215">Первое исправление заключается в добавлении `?` к типу `string` для свойства `ErrorText`:</span><span class="sxs-lookup"><span data-stu-id="838b6-215">The first fix is to add the `?` to the `string` type for the `ErrorText`:</span></span>

[!code-csharp[UpdateErrorText](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Index.cshtml.cs#UpdateErrorText)]

<span data-ttu-id="838b6-216">Это изменение не будет распространяться на другой код, потому что любой доступ к свойству `ErrorText` уже защищен проверками на значение null.</span><span class="sxs-lookup"><span data-stu-id="838b6-216">That change won't ripple through other code, because any access to the `ErrorText` property was already guarded by null checks.</span></span> <span data-ttu-id="838b6-217">Далее инициализируйте список `NewsItems` и удалите метод задания свойств, сделав этот список свойством, доступным только для чтения:</span><span class="sxs-lookup"><span data-stu-id="838b6-217">Next, initialize the `NewsItems` list and remove the property setter, making it a readonly property:</span></span>

[!code-csharp[InitializeNewsItems](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Index.cshtml.cs#InitializeNewsItems)]

<span data-ttu-id="838b6-218">Это исправило предупреждение, но внесло ошибку.</span><span class="sxs-lookup"><span data-stu-id="838b6-218">That fixed the warning but introduced an error.</span></span> <span data-ttu-id="838b6-219">Список `NewsItems` теперь **правильно сконструирован**, но код, который устанавливает список в `OnGet`, нужно изменить, чтобы соответствовать новому API.</span><span class="sxs-lookup"><span data-stu-id="838b6-219">The `NewsItems` list is now **correct by construction**, but the code that sets the list in `OnGet` must change to match the new API.</span></span> <span data-ttu-id="838b6-220">Вместо присваивания вызовите метод `AddRange`, чтобы добавить элементы новостей в существующий список:</span><span class="sxs-lookup"><span data-stu-id="838b6-220">Instead of an assignment, call `AddRange` to add the news items to the existing list:</span></span>

[!code-csharp[AddRange](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Index.cshtml.cs#AddRange)]

<span data-ttu-id="838b6-221">Использование метода `AddRange` вместо присваивания означает, что метод `GetNews` может вернуть `IEnumerable` вместо `List`.</span><span class="sxs-lookup"><span data-stu-id="838b6-221">Using `AddRange` instead of an assignment means that the `GetNews` method can return an `IEnumerable` instead of a `List`.</span></span> <span data-ttu-id="838b6-222">Это экономит одно распределение.</span><span class="sxs-lookup"><span data-stu-id="838b6-222">That saves one allocation.</span></span> <span data-ttu-id="838b6-223">Измените сигнатуру метода и удалите вызов `ToList`, как показано в следующем примере кода:</span><span class="sxs-lookup"><span data-stu-id="838b6-223">Change the signature of the method, and remove the `ToList` call, as shown in the following code sample:</span></span>

[!code-csharp[GetNews](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Services/NewsService.cs#GetNewsFinished)]

<span data-ttu-id="838b6-224">Изменение сигнатуры также прерывает один из тестов.</span><span class="sxs-lookup"><span data-stu-id="838b6-224">Changing the signature breaks one of tests as well.</span></span> <span data-ttu-id="838b6-225">Откройте файл `NewsServiceTests.cs` в папке `Services` проекта `SimpleFeedReader.Tests`.</span><span class="sxs-lookup"><span data-stu-id="838b6-225">Open the `NewsServiceTests.cs` file in the `Services` folder of the `SimpleFeedReader.Tests` project.</span></span> <span data-ttu-id="838b6-226">Перейдите к тесту `Returns_News_Stories_Given_Valid_Uri` и измените тип переменной `result` на `IEnumerable<NewsItem>`.</span><span class="sxs-lookup"><span data-stu-id="838b6-226">Navigate to the `Returns_News_Stories_Given_Valid_Uri` test and change the type of the `result` variable to `IEnumerable<NewsItem>`.</span></span> <span data-ttu-id="838b6-227">Изменение типа означает, что свойство `Count` больше недоступно, поэтому замените свойство `Count` в классе `Assert` вызовом метода `Any()`:</span><span class="sxs-lookup"><span data-stu-id="838b6-227">Changing the type means the `Count` property is no longer available, so replace the `Count` property in the `Assert` with a call to `Any()`:</span></span>

[!code-csharp[FixTests](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader.Tests/Services/NewsServiceTests.cs#FixTestSignature)]

<span data-ttu-id="838b6-228">Необходимо также добавить оператор `using System.Linq` в начало файла.</span><span class="sxs-lookup"><span data-stu-id="838b6-228">You'll need to add a `using System.Linq` statement to the beginning of the file as well.</span></span>

<span data-ttu-id="838b6-229">Этот набор изменений уделяет особое внимание обновлению кода, который включает создание универсальных экземпляров.</span><span class="sxs-lookup"><span data-stu-id="838b6-229">This set of changes highlights special consideration when updating code that includes generic instantiations.</span></span> <span data-ttu-id="838b6-230">И список, и элементы в списке типов, не допускающих значение null.</span><span class="sxs-lookup"><span data-stu-id="838b6-230">Both the list and the elements in the list of non-nullable types.</span></span> <span data-ttu-id="838b6-231">Любой из них или оба могут быть типа, допускающего значение null.</span><span class="sxs-lookup"><span data-stu-id="838b6-231">Either or both could be nullable types.</span></span> <span data-ttu-id="838b6-232">Разрешены следующие объявления:</span><span class="sxs-lookup"><span data-stu-id="838b6-232">All the following declarations are allowed:</span></span>

- <span data-ttu-id="838b6-233">`List<NewsStoryViewModel>`: список, не допускающий значение null, моделей представлений, не допускающих значение null;</span><span class="sxs-lookup"><span data-stu-id="838b6-233">`List<NewsStoryViewModel>`: nonnullable list of nonullable view models.</span></span>
- <span data-ttu-id="838b6-234">`List<NewsStoryViewModel?>`: список, не допускающий значение null, моделей представлений, допускающих значение null;</span><span class="sxs-lookup"><span data-stu-id="838b6-234">`List<NewsStoryViewModel?>`: nonnullable list of nullable view models.</span></span>
- <span data-ttu-id="838b6-235">`List<NewsStoryViewModel>?`: список, допускающий значение null, моделей представлений, не допускающих значение null;</span><span class="sxs-lookup"><span data-stu-id="838b6-235">`List<NewsStoryViewModel>?`: nullable list of nonnullable view models.</span></span>
- <span data-ttu-id="838b6-236">`List<NewsStoryViewModel?>?`: список, допускающий значение null, моделей представлений, допускающих значение null.</span><span class="sxs-lookup"><span data-stu-id="838b6-236">`List<NewsStoryViewModel?>?`: nullable list of nullable view models.</span></span>

## <a name="interfaces-with-external-code"></a><span data-ttu-id="838b6-237">Интерфейсы с внешним кодом</span><span class="sxs-lookup"><span data-stu-id="838b6-237">Interfaces with external code</span></span>

<span data-ttu-id="838b6-238">Вы внесли изменения в класс `NewsService`, поэтому включите для него заметку `#nullable enable`.</span><span class="sxs-lookup"><span data-stu-id="838b6-238">You've made changes to the `NewsService` class, so turn on the `#nullable enable` annotation for that class.</span></span> <span data-ttu-id="838b6-239">После этого новые предупреждения больше не будут генерироваться.</span><span class="sxs-lookup"><span data-stu-id="838b6-239">This won't generate any new warnings.</span></span> <span data-ttu-id="838b6-240">Однако тщательное изучение класса помогает проиллюстрировать некоторые ограничения анализа потоков компилятором.</span><span class="sxs-lookup"><span data-stu-id="838b6-240">However, careful examination of the class helps to illustrate some of the limitations of the compiler's flow analysis.</span></span> <span data-ttu-id="838b6-241">Изучите следующий конструктор:</span><span class="sxs-lookup"><span data-stu-id="838b6-241">Examine the constructor:</span></span>

[!code-csharp[ServiceConstructor](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Services/NewsService.cs#ServiceConstructor)]

<span data-ttu-id="838b6-242">Параметр `IMapper` вводится в качестве ссылки, не допускающей значение null.</span><span class="sxs-lookup"><span data-stu-id="838b6-242">The `IMapper` parameter is typed as a nonnullable reference.</span></span> <span data-ttu-id="838b6-243">Он вызывается кодом инфраструктуры ASP.NET Core, поэтому компилятор не знает, что `IMapper` никогда не будет иметь значение null.</span><span class="sxs-lookup"><span data-stu-id="838b6-243">It's called by ASP.NET Core infrastructure code, so the compiler doesn't really know that the `IMapper` will never be null.</span></span> <span data-ttu-id="838b6-244">Контейнер по умолчанию для внедрения зависимостей ASP.NET Core генерирует исключение, если не может устранить необходимую службу, чтобы код оставался правильным.</span><span class="sxs-lookup"><span data-stu-id="838b6-244">The default ASP.NET Core dependency injection (DI) container throws an exception if it can't resolve a necessary service, so the code is correct.</span></span> <span data-ttu-id="838b6-245">Компилятор не может проверить все вызовы ваших общедоступных API, даже если код скомпилирован с включенными контекстами заметок, допускающих значение null.</span><span class="sxs-lookup"><span data-stu-id="838b6-245">The compiler can't validate all calls to your public APIs, even if your code is compiled with nullable annotation contexts enabled.</span></span> <span data-ttu-id="838b6-246">Кроме того, библиотеки могут использоваться в проектах, которые еще не перешли на ссылочные типы, допускающие значение null.</span><span class="sxs-lookup"><span data-stu-id="838b6-246">Furthermore, your libraries may be consumed by projects that have not yet opted into using nullable reference types.</span></span> <span data-ttu-id="838b6-247">Проверяйте входные данные для общедоступных API, даже если вы объявили их как типы, не допускающие значение null.</span><span class="sxs-lookup"><span data-stu-id="838b6-247">Validate inputs to public APIs even though you've declared them as nonnullable types.</span></span>

## <a name="get-the-code"></a><span data-ttu-id="838b6-248">Получение кода</span><span class="sxs-lookup"><span data-stu-id="838b6-248">Get the code</span></span>

<span data-ttu-id="838b6-249">Вы исправили предупреждения, полученные в начальной тестовой компиляции, поэтому теперь можете включить контекст заметок, допускающих значение null, в обоих проектах.</span><span class="sxs-lookup"><span data-stu-id="838b6-249">You've fixed the warnings you identified in the initial test compile, so now you can turn on the nullable annotation context for both projects.</span></span> <span data-ttu-id="838b6-250">Перестройте проекты. Компилятор не выдаст ни одного предупреждения.</span><span class="sxs-lookup"><span data-stu-id="838b6-250">Rebuild the projects; the compiler reports no warnings.</span></span> <span data-ttu-id="838b6-251">Получить код готового проекта можно в репозитории GitHub [dotnet/samples](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/finished).</span><span class="sxs-lookup"><span data-stu-id="838b6-251">You can get the code for the finished project in the [dotnet/samples](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/finished) GitHub repository.</span></span>

<span data-ttu-id="838b6-252">Новые возможности, поддерживающие ссылочные типы, допускающие значение null, помогают находить и исправлять потенциальные ошибки в обработке значений `null` в коде.</span><span class="sxs-lookup"><span data-stu-id="838b6-252">The new features that support nullable reference types help you find and fix potential errors in how you handle `null` values in your code.</span></span> <span data-ttu-id="838b6-253">Включение контекста заметок, допускающих значение null, позволяет выразить намерение проекта: некоторые переменные никогда не должны быть нулевыми, тогда как другие могут.</span><span class="sxs-lookup"><span data-stu-id="838b6-253">Enabling the nullable annotation context allows you to express your design intent: some variables should never be null, other variables may contain null values.</span></span> <span data-ttu-id="838b6-254">Используя эти возможности, проще выразить намерение проекта.</span><span class="sxs-lookup"><span data-stu-id="838b6-254">These features make it easier for you to declare your design intent.</span></span> <span data-ttu-id="838b6-255">Аналогичным образом контекст предупреждений о допустимости значения null указывает компилятору выдавать предупреждения при нарушении намерения проекта.</span><span class="sxs-lookup"><span data-stu-id="838b6-255">Similarly, the nullable warning context instructs the compiler to issue warnings when you have violated that intent.</span></span> <span data-ttu-id="838b6-256">Благодаря этим предупреждениям вы сможете внести обновления, которые сделают код более устойчивым и уменьшат вероятность создания исключений `NullReferenceException` во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="838b6-256">Those warnings guide you to make updates that make your code more resilient and less likely to throw a `NullReferenceException` during execution.</span></span> <span data-ttu-id="838b6-257">Вы можете контролировать область этих контекстов, чтобы сосредоточиться на локальных областях кода, которые нужно перенести, пока оставшаяся база кода остается без изменений.</span><span class="sxs-lookup"><span data-stu-id="838b6-257">You can control the scope of these contexts so that you can focus on local areas of code to migrate while the remaining codebase is untouched.</span></span> <span data-ttu-id="838b6-258">На практике можно сделать эту задачу перехода частью регулярного обслуживания классов.</span><span class="sxs-lookup"><span data-stu-id="838b6-258">In practice, you can make this migration task a part of regular maintenance to your classes.</span></span> <span data-ttu-id="838b6-259">В этом руководстве продемонстрирован процесс перехода приложения на использование ссылочных типов, допускающих значение null.</span><span class="sxs-lookup"><span data-stu-id="838b6-259">This tutorial demonstrated the process to migrate an application to use nullable reference types.</span></span> <span data-ttu-id="838b6-260">Вы можете ознакомиться с гораздо большим реальным примером этого процесса, изучив запрос на вытягивание [Джона Скита](https://github.com/jskeet), созданный для перехода на ссылочные типы, допускающие значение null, в [NodaTime](https://github.com/nodatime/nodatime/pull/1240/commits).</span><span class="sxs-lookup"><span data-stu-id="838b6-260">You can explore a larger real-world example of this process by examining the PR [Jon Skeet](https://github.com/jskeet) made to incorporate nullable reference types into [NodaTime](https://github.com/nodatime/nodatime/pull/1240/commits).</span></span>
