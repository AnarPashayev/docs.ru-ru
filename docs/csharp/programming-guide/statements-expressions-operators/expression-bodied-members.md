---
title: Руководство по программированию на C#. Элементы, воплощающие выражения
ms.custom: seodec18
ms.date: 02/06/2019
helpviewer_keywords:
- expression-bodied members[C#]
- C# language, expresion-bodied members
ms.openlocfilehash: 45dcc58b252963e80798ba86ca5c4f461d493fac
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2019
ms.locfileid: "73120147"
---
# <a name="expression-bodied-members-c-programming-guide"></a>Члены, воплощающие выражения (руководство по программированию на C#)

Определения тела выражений позволяют предоставлять реализацию члена самым быстрым и удобочитаемым способом. Определение тела выражения можно использовать, когда логика для любого поддерживаемого члена, такого как метод или свойство, состоит из одного выражения. Определение тела выражения имеет следующий общий синтаксис:

```csharp
member => expression;
```

здесь *expression* является допустимым выражением.

В C# 6 была представлена поддержка для определений тела выражений для методов и свойств только для чтения. В C# 7.0 эта поддержка была расширена. Определения тела выражений можно использовать с членами типа, указанными в следующей таблице.

|Член  |Поддерживается как... |
|---------|---------|
|[Метод](#methods)  |C# 6 |
|[Свойство только для чтения](#read-only-properties)   |C# 6  |
|[Property](#properties)  |C# 7.0 |
|[Конструктор](#constructors)   |C# 7.0 |
|[Метод завершения](#finalizers)     |C# 7.0 |
|[Индексатор](#indexers)       |C# 7.0 |

## <a name="methods"></a>Методы

Метод, воплощающий выражение, состоит из одного выражения, возвращающего значение, тип которого соответствует возвращаемому типу метода, или методов, возвращающих `void`, который выполняет некоторые операции. Например, типы, переопределяющие метод <xref:System.Object.ToString%2A>, обычно содержат одно выражение, которое возвращает строковое представление текущего объекта.

В следующем примере определяется класс `Person`, который переопределяет метод <xref:System.Object.ToString%2A> с помощью определения тела выражения. Он также определяет метод `DisplayName`, который отображает имя в консоли. Обратите внимание, что ключевое слово `return` не используется в определении тела выражения `ToString`.

[!code-csharp[expression-bodied-methods](../../../../samples/snippets/csharp/programming-guide/classes-and-structs/expr-bodied-methods.cs)]  

Дополнительные сведения см. в разделе [Методы (руководство по программированию на C#)](../classes-and-structs/methods.md).

## <a name="read-only-properties"></a>Свойства только для чтения

Начиная с C# 6 определение тела выражения можно использовать для реализации свойства только для чтения. Для этого используйте следующий синтаксис:

```csharp
PropertyType PropertyName => expression;
```

В следующем примере определяется класс `Location`, свойство `Name` только для чтения которого реализуется как определение тела выражения, возвращающее значение закрытого поля `locationName`:

[!code-csharp[expression-bodied-read-only-property](../../../../samples/snippets/csharp/programming-guide/classes-and-structs/expr-bodied-readonly.cs#1)]  

Дополнительные сведения о свойствах см. в разделе [Свойства (руководство по программированию на C#)](../classes-and-structs/properties.md).

## <a name="properties"></a>Свойства

Начиная с C# 7.0 определения тела выражения можно использовать для реализации методов доступа `get` и `set` свойства. В следующем примере показано, как это сделать:

[!code-csharp[expression-bodied-property-get-set](../../../../samples/snippets/csharp/programming-guide/classes-and-structs/expr-bodied-ctor.cs#1)]

Дополнительные сведения о свойствах см. в разделе [Свойства (руководство по программированию на C#)](../classes-and-structs/properties.md).

## <a name="constructors"></a>Конструкторы

Определение тела выражения для конструктора обычно состоит из одного выражения присваивания или вызова метода, который обрабатывает аргументы конструктора или инициализирует состояние экземпляра.

В следующем примере определяется класс `Location`, конструктор которого имеет один строковый параметр *name*. Определение тела выражения присваивает аргумент свойству `Name`.

[!code-csharp[expression-bodied-constructor](../../../../samples/snippets/csharp/programming-guide/classes-and-structs/expr-bodied-ctor.cs#1)]  

Дополнительные сведения см. в разделе [Конструкторы (руководство по программированию на C#)](../classes-and-structs/constructors.md).

## <a name="finalizers"></a>Методы завершения

Определение тела выражения для метода завершения обычно содержит операторы очистки, например операторы, высвобождающие неуправляемые ресурсы.

В следующем примере определяется метод завершения, который использует определение тела выражения для указания того, что был вызван метод завершения.

[!code-csharp[expression-bodied-finalizer](../../../../samples/snippets/csharp/programming-guide/classes-and-structs/expr-bodied-destructor.cs#1)]  

Дополнительные сведения см. в разделе [Методы завершения (руководство по программированию на C#)](../classes-and-structs/destructors.md).

## <a name="indexers"></a>Индексаторы

Как при использовании свойств, методы доступа `get` и `set` индексатора состоят из определений тела выражений, если метод доступа `get` состоит из одного выражения, которое возвращает значение, или метод доступа `set` выполняет простое присваивание.

В следующем примере определяется класс с именем `Sports`, включающий внутренний массив <xref:System.String>, который содержит названия нескольких видов спорта. Методы доступа `get` и `set` индексатора реализуются как определения тела выражений.

[!code-csharp[expression-bodied-indexer](../../../../samples/snippets/csharp/programming-guide/classes-and-structs/expr-bodied-indexers.cs#1)]

Дополнительные сведения см. в разделе [Индексаторы (руководство по программированию на C#)](../indexers/index.md).
