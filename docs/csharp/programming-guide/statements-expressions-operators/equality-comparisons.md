---
title: Руководство по программированию на C#. Проверка равенства
ms.custom: seodec18
ms.date: 07/20/2015
helpviewer_keywords:
- object equality [C#]
ms.assetid: 10b865ea-4e7b-4127-9242-c9b8f57d9f04
ms.openlocfilehash: 50b1cdb8b7e5087f1fd6669e7163e2c15e9b23bf
ms.sourcegitcommit: 9b1ac36b6c80176fd4e20eb5bfcbd9d56c3264cf
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/28/2019
ms.locfileid: "67423648"
---
# <a name="equality-comparisons-c-programming-guide"></a>Проверка равенства (руководство по программированию на C#)

Иногда возникает необходимость проверить равенство двух значений. В некоторых случаях проверяется *равенство значений*, которое также называют их *эквивалентностью*, что означает, что содержащиеся в двух переменных значения равны. В других случаях требуется определить, ссылаются ли две переменные на один и тот же объект в памяти. Такой тип равенства называется *равенством ссылок* или *идентичностью*. В этом разделе описаны эти два типа равенства и приведены ссылки на разделы, содержащие дополнительные сведения.  
  
## <a name="reference-equality"></a>Равенство ссылок

 Равенство ссылок означает, что два объекта ссылаются на один и тот же объект. Это может произойти при простом присваивании, как показано в следующем примере.  
  
 [!code-csharp[csProgGuideStatements#18](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideStatements/CS/Statements.cs#18)]  
  
 В этом фрагменте кода создается два объекта, но после инструкции присваивания они оба ссылаются на один и тот же объект. Поэтому между ними устанавливается равенство ссылок. Метод <xref:System.Object.ReferenceEquals%2A> позволяет определить, ссылаются ли две ссылки на один и тот же объект.  
  
 Концепция равенства ссылок применима только к ссылочным типам. Объекты типа значения не могут иметь равенство ссылок, поскольку переменной присваивается экземпляр типа значения, создается копия этого значения. Поэтому две распакованные структуры никогда не могут ссылаться на одно и то же расположение в памяти. Более того, для сравнения двух типов значений <xref:System.Object.ReferenceEquals%2A> всегда будет возвращаться результат `false`, даже если содержащиеся в объектах значения идентичны. Это связано с тем, что каждая переменная запакована в отдельный экземпляр объекта. Дополнительные сведения см. в разделе [Практическое руководство. Проверка на ссылочное равенство (идентичность)](../../../csharp/programming-guide/statements-expressions-operators/how-to-test-for-reference-equality-identity.md).  

## <a name="value-equality"></a>Равенство значений

 Равенство значений означает, что два объекта содержат одинаковое значение или одинаковые значения. Для примитивных типов значений, таких как [int](../../../csharp/language-reference/builtin-types/integral-numeric-types.md) или [bool](../../../csharp/language-reference/keywords/bool.md), проверка на равенство значений представляет собой очевидную задачу. Можно использовать оператор [==](../../../csharp/language-reference/operators/equality-operators.md#equality-operator-), как показано в следующем примере.  
  
```csharp  
int a = GetOriginalValue();  
int b = GetCurrentValue();  
  
// Test for value equality.   
if( b == a)   
{  
    // The two integers are equal.  
}  
```  
  
 Для большинства других типов проверка равенства значений является более сложной, поскольку при этом необходимо понимать, как равенство определено в типе. Для всех классов и структур, имеющих несколько полей или свойств, равенство значений часто определяется как равенство значений всех полей и свойств. Например, два объекта `Point` могут быть определены как равные, если значение pointA.X равняется pointB.X, а значение pointA.Y равняется pointB.Y.  
  
 Однако общего требования о том, что равенство должно определяться на основе всех полей в типе, нет. Оно может определяться и на основе части полей. При сравнении значений типов сторонних разработчиков необходимо понимать, как именно реализовано равенство для таких типов. Дополнительные сведения об определении равенства значений в собственных классах и структурах см. в практическом руководстве по [ определению равенства значений для типа](../../../csharp/programming-guide/statements-expressions-operators/how-to-define-value-equality-for-a-type.md).  
  
### <a name="value-equality-for-floating-point-values"></a>Равенство значений с плавающей запятой

 Проверка равенства значений с плавающей запятой ([double](../../../csharp/language-reference/keywords/double.md) и [float](../../../csharp/language-reference/keywords/float.md)) представляет проблему из-за неточности арифметических операций с плавающей запятой на двоичных компьютерах. Дополнительные сведения можно найти в заметках в разделе <xref:System.Double?displayProperty=nameWithType>.  
  
## <a name="related-topics"></a>См. также  
  
|Заголовок|ОПИСАНИЕ|  
|-----------|-----------------|  
|[Практическое руководство. Проверка на ссылочное равенство (идентичность)](../../../csharp/programming-guide/statements-expressions-operators/how-to-test-for-reference-equality-identity.md)|Описание процедуры проверки равенства ссылок двух переменных.|  
|[Практическое руководство. Определение равенства значений для типа](../../../csharp/programming-guide/statements-expressions-operators/how-to-define-value-equality-for-a-type.md)|Описание предоставления пользовательского определения равенства значений для типа.|  
|[Руководство по программированию на C#](../../../csharp/programming-guide/index.md)|Ссылки на подробные сведения о важных элементах языка C#, а также об элементах, доступных в этом языке благодаря .NET Framework.|  
|[Типы](../../../csharp/programming-guide/types/index.md)|Сведения о системе типов C# и ссылки на дополнительные сведения.|  
  
## <a name="see-also"></a>См. также

- [Руководство по программированию на C#](../../../csharp/programming-guide/index.md)
