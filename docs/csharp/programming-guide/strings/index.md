---
title: Руководство по программированию на C#. Строки
ms.custom: seodec18
ms.date: 06/27/2019
helpviewer_keywords:
- C# language, strings
- strings [C#]
ms.assetid: 21580405-cb25-4541-89d5-037846a38b07
ms.openlocfilehash: ad8d7075e609a1b03ec403b91126bbce7084923f
ms.sourcegitcommit: 14ad34f7c4564ee0f009acb8bfc0ea7af3bc9541
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/01/2019
ms.locfileid: "73423155"
---
# <a name="strings-c-programming-guide"></a><span data-ttu-id="a9ba8-102">Строки (Руководство по программированию на C#)</span><span class="sxs-lookup"><span data-stu-id="a9ba8-102">Strings (C# Programming Guide)</span></span>
<span data-ttu-id="a9ba8-103">Строка — это объект типа <xref:System.String>, значением которого является текст.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-103">A string is an object of type <xref:System.String> whose value is text.</span></span> <span data-ttu-id="a9ba8-104">Внутри программы текст хранится в виде упорядоченной коллекции объектов <xref:System.Char> только для чтения.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-104">Internally, the text is stored as a sequential read-only collection of <xref:System.Char> objects.</span></span> <span data-ttu-id="a9ba8-105">В конце строки C# нет нуль-символов. Поэтому строка C# может содержать любое число внедренных нуль-символов ('\0').</span><span class="sxs-lookup"><span data-stu-id="a9ba8-105">There is no null-terminating character at the end of a C# string; therefore a C# string can contain any number of embedded null characters ('\0').</span></span> <span data-ttu-id="a9ba8-106">Свойство <xref:System.String.Length%2A> строки соответствует числу содержащихся в ней объектов `Char`, но не числу символов Юникода.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-106">The <xref:System.String.Length%2A> property of a string represents the number of `Char` objects it contains, not the number of Unicode characters.</span></span> <span data-ttu-id="a9ba8-107">Для доступа к отдельным кодовым точкам Юникода в строке используйте объект <xref:System.Globalization.StringInfo>.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-107">To access the individual Unicode code points in a string, use the <xref:System.Globalization.StringInfo> object.</span></span>  
  
## <a name="string-vs-systemstring"></a><span data-ttu-id="a9ba8-108">Сравнение строки и System.String</span><span class="sxs-lookup"><span data-stu-id="a9ba8-108">string vs. System.String</span></span>  
 <span data-ttu-id="a9ba8-109">В C# ключевое слово `string` является псевдонимом для <xref:System.String>.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-109">In C#, the `string` keyword is an alias for <xref:System.String>.</span></span> <span data-ttu-id="a9ba8-110">Таким образом, `String` и `string` эквивалентны, их можно использовать независимо от используемого соглашения об именовании.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-110">Therefore, `String` and `string` are equivalent, and you can use whichever naming convention you prefer.</span></span> <span data-ttu-id="a9ba8-111">Класс `String` предоставляет множество методов для безопасного создания, обработки и сравнения строк.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-111">The `String` class provides many methods for safely creating, manipulating, and comparing strings.</span></span> <span data-ttu-id="a9ba8-112">Кроме того, язык C# перегружает некоторые операторы для упрощения типичных операций со строками.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-112">In addition, the C# language overloads some operators to simplify common string operations.</span></span> <span data-ttu-id="a9ba8-113">Дополнительные сведения о ключевых словах см. в статье, посвященной [строкам](../../language-reference/builtin-types/reference-types.md).</span><span class="sxs-lookup"><span data-stu-id="a9ba8-113">For more information about the keyword, see [string](../../language-reference/builtin-types/reference-types.md).</span></span> <span data-ttu-id="a9ba8-114">Дополнительные сведения о типе и его методах см. здесь: <xref:System.String>.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-114">For more information about the type and its methods, see <xref:System.String>.</span></span>  
  
## <a name="declaring-and-initializing-strings"></a><span data-ttu-id="a9ba8-115">Объявление и инициализация строк</span><span class="sxs-lookup"><span data-stu-id="a9ba8-115">Declaring and Initializing Strings</span></span>  
 <span data-ttu-id="a9ba8-116">Вы можете объявлять и инициализировать строки различными способами, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="a9ba8-116">You can declare and initialize strings in various ways, as shown in the following example:</span></span>  
  
 [!code-csharp[csProgGuideStrings#1](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideStrings/CS/Strings.cs#1)]  
  
 <span data-ttu-id="a9ba8-117">Обратите внимание, что вы не используете оператор [new](../../language-reference/operators/new-operator.md) для создания объекта строки, за исключением случаев инициализации строки с помощью массива символов.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-117">Note that you do not use the [new](../../language-reference/operators/new-operator.md) operator to create a string object except when initializing the string with an array of chars.</span></span>  
  
 <span data-ttu-id="a9ba8-118">Инициализируйте строку с константным значением <xref:System.String.Empty> для создания нового объекта <xref:System.String>, строка которого имеет нулевую длину.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-118">Initialize a string with the <xref:System.String.Empty> constant value to create a new <xref:System.String> object whose string is of zero length.</span></span> <span data-ttu-id="a9ba8-119">Представлением строкового литерала строки с нулевой длиной является "".</span><span class="sxs-lookup"><span data-stu-id="a9ba8-119">The string literal representation of a zero-length string is "".</span></span> <span data-ttu-id="a9ba8-120">Если вы инициализируете строки со значением <xref:System.String.Empty> вместо [NULL](../../language-reference/keywords/null.md), вы снизите вероятность появления исключения <xref:System.NullReferenceException>.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-120">By initializing strings with the <xref:System.String.Empty> value instead of [null](../../language-reference/keywords/null.md), you can reduce the chances of a <xref:System.NullReferenceException> occurring.</span></span> <span data-ttu-id="a9ba8-121">Используйте статический метод <xref:System.String.IsNullOrEmpty%28System.String%29>, чтобы проверить значение строки, прежде чем пытаться получить к ней доступ.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-121">Use the static <xref:System.String.IsNullOrEmpty%28System.String%29> method to verify the value of a string before you try to access it.</span></span>  
  
## <a name="immutability-of-string-objects"></a><span data-ttu-id="a9ba8-122">Неизменность строковых объектов</span><span class="sxs-lookup"><span data-stu-id="a9ba8-122">Immutability of String Objects</span></span>  
 <span data-ttu-id="a9ba8-123">Строковые объекты являются *неизменяемыми*: их нельзя изменить после создания.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-123">String objects are *immutable*: they cannot be changed after they have been created.</span></span> <span data-ttu-id="a9ba8-124">Может показаться, что все методы <xref:System.String> и операторы C# изменяют строку, но в действительности они возвращают результаты в новый строковый объект.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-124">All of the <xref:System.String> methods and C# operators that appear to modify a string actually return the results in a new string object.</span></span> <span data-ttu-id="a9ba8-125">Когда содержимое `s1` и `s2` объединяется для формирования одной строки, две исходные строки не изменяются, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-125">In the following example, when the contents of `s1` and `s2` are concatenated to form a single string, the two original strings are unmodified.</span></span> <span data-ttu-id="a9ba8-126">Оператор `+=` создает новую строку, которая содержит объединенное содержимое.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-126">The `+=` operator creates a new string that contains the combined contents.</span></span> <span data-ttu-id="a9ba8-127">Этот новый объект присваивается переменной `s1`, а исходный объект, который был присвоен `s1`, освобождается для сборки мусора, так как ни одна переменная не ссылается на него.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-127">That new object is assigned to the variable `s1`, and the original object that was assigned to `s1` is released for garbage collection because no other variable holds a reference to it.</span></span>  
  
 [!code-csharp[csProgGuideStrings#2](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideStrings/CS/Strings.cs#2)]  
  
 <span data-ttu-id="a9ba8-128">Так как "изменение" строки на самом деле является созданием новой строки, создавать ссылки на строки следует с осторожностью.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-128">Because a string "modification" is actually a new string creation, you must use caution when you create references to strings.</span></span> <span data-ttu-id="a9ba8-129">Если вы создадите ссылку на строку, а затем "измените" исходную строку, ссылка будет по-прежнему указывать на исходный объект, а не на новый объект, который был создан при изменении строки.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-129">If you create a reference to a string, and then "modify" the original string, the reference will continue to point to the original object instead of the new object that was created when the string was modified.</span></span> <span data-ttu-id="a9ba8-130">Это поведение проиллюстрировано в следующем коде:</span><span class="sxs-lookup"><span data-stu-id="a9ba8-130">The following code illustrates this behavior:</span></span>  
  
 [!code-csharp[csProgGuideStrings#25](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideStrings/CS/Strings.cs#25)]  
  
 <span data-ttu-id="a9ba8-131">Инструкции по созданию новых строк, основанных на таких изменениях, как операции поиска и замены исходной строки, см. в [практическом руководстве по изменению содержимого строки](../../how-to/modify-string-contents.md).</span><span class="sxs-lookup"><span data-stu-id="a9ba8-131">For more information about how to create new strings that are based on modifications such as search and replace operations on the original string, see [How to: Modify String Contents](../../how-to/modify-string-contents.md).</span></span>  
  
## <a name="regular-and-verbatim-string-literals"></a><span data-ttu-id="a9ba8-132">Регулярные и буквальные строковые литералы</span><span class="sxs-lookup"><span data-stu-id="a9ba8-132">Regular and Verbatim String Literals</span></span>  
 <span data-ttu-id="a9ba8-133">Используйте регулярные строковые литералы, когда вам нужно внедрить escape-символы, доступные в C#, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="a9ba8-133">Use regular string literals when you must embed escape characters provided by C#, as shown in the following example:</span></span>  
  
 [!code-csharp[csProgGuideStrings#3](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideStrings/CS/Strings.cs#3)]  
  
 <span data-ttu-id="a9ba8-134">Буквальные строковые литералы используются для удобства и читабельности, если текст строки содержит символы обратной косой черты, например в путях к файлам.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-134">Use verbatim strings for convenience and better readability when the string text contains backslash characters, for example in file paths.</span></span> <span data-ttu-id="a9ba8-135">Так как буквальные строки сохраняют символы новой строки как часть текста строки, их можно использовать для инициализации многострочных строк.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-135">Because verbatim strings preserve new line characters as part of the string text, they can be used to initialize multiline strings.</span></span> <span data-ttu-id="a9ba8-136">Используйте двойные кавычки, чтобы вставить кавычки в буквальной строке.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-136">Use double quotation marks to embed a quotation mark inside a verbatim string.</span></span> <span data-ttu-id="a9ba8-137">В следующем примере показаны наиболее часто используемым буквальные строки:</span><span class="sxs-lookup"><span data-stu-id="a9ba8-137">The following example shows some common uses for verbatim strings:</span></span>  
  
 [!code-csharp[csProgGuideStrings#4](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideStrings/CS/Strings.cs#4)]  
  
## <a name="string-escape-sequences"></a><span data-ttu-id="a9ba8-138">Escape-последовательности строк</span><span class="sxs-lookup"><span data-stu-id="a9ba8-138">String Escape Sequences</span></span>  
  
|<span data-ttu-id="a9ba8-139">Escape-последовательность</span><span class="sxs-lookup"><span data-stu-id="a9ba8-139">Escape sequence</span></span>|<span data-ttu-id="a9ba8-140">Имя символа</span><span class="sxs-lookup"><span data-stu-id="a9ba8-140">Character name</span></span>|<span data-ttu-id="a9ba8-141">Кодировка Юникод</span><span class="sxs-lookup"><span data-stu-id="a9ba8-141">Unicode encoding</span></span>|  
|---------------------|--------------------|----------------------|  
|<span data-ttu-id="a9ba8-142">\\'</span><span class="sxs-lookup"><span data-stu-id="a9ba8-142">\\'</span></span>|<span data-ttu-id="a9ba8-143">Одинарная кавычка</span><span class="sxs-lookup"><span data-stu-id="a9ba8-143">Single quote</span></span>|<span data-ttu-id="a9ba8-144">0x0027</span><span class="sxs-lookup"><span data-stu-id="a9ba8-144">0x0027</span></span>|  
|<span data-ttu-id="a9ba8-145">\\"</span><span class="sxs-lookup"><span data-stu-id="a9ba8-145">\\"</span></span>|<span data-ttu-id="a9ba8-146">Двойная кавычка</span><span class="sxs-lookup"><span data-stu-id="a9ba8-146">Double quote</span></span>|<span data-ttu-id="a9ba8-147">0x0022</span><span class="sxs-lookup"><span data-stu-id="a9ba8-147">0x0022</span></span>|  
|\\\\ |<span data-ttu-id="a9ba8-148">Обратная косая черта</span><span class="sxs-lookup"><span data-stu-id="a9ba8-148">Backslash</span></span>|<span data-ttu-id="a9ba8-149">0x005C</span><span class="sxs-lookup"><span data-stu-id="a9ba8-149">0x005C</span></span>|  
|<span data-ttu-id="a9ba8-150">\0</span><span class="sxs-lookup"><span data-stu-id="a9ba8-150">\0</span></span>|<span data-ttu-id="a9ba8-151">Null</span><span class="sxs-lookup"><span data-stu-id="a9ba8-151">Null</span></span>|<span data-ttu-id="a9ba8-152">0x0000</span><span class="sxs-lookup"><span data-stu-id="a9ba8-152">0x0000</span></span>|  
|<span data-ttu-id="a9ba8-153">\a</span><span class="sxs-lookup"><span data-stu-id="a9ba8-153">\a</span></span>|<span data-ttu-id="a9ba8-154">Предупреждение</span><span class="sxs-lookup"><span data-stu-id="a9ba8-154">Alert</span></span>|<span data-ttu-id="a9ba8-155">0x0007</span><span class="sxs-lookup"><span data-stu-id="a9ba8-155">0x0007</span></span>|  
|<span data-ttu-id="a9ba8-156">\b</span><span class="sxs-lookup"><span data-stu-id="a9ba8-156">\b</span></span>|<span data-ttu-id="a9ba8-157">Backspace</span><span class="sxs-lookup"><span data-stu-id="a9ba8-157">Backspace</span></span>|<span data-ttu-id="a9ba8-158">0x0008</span><span class="sxs-lookup"><span data-stu-id="a9ba8-158">0x0008</span></span>|  
|<span data-ttu-id="a9ba8-159">\f</span><span class="sxs-lookup"><span data-stu-id="a9ba8-159">\f</span></span>|<span data-ttu-id="a9ba8-160">Перевод страницы</span><span class="sxs-lookup"><span data-stu-id="a9ba8-160">Form feed</span></span>|<span data-ttu-id="a9ba8-161">0x000C</span><span class="sxs-lookup"><span data-stu-id="a9ba8-161">0x000C</span></span>|  
|<span data-ttu-id="a9ba8-162">\n</span><span class="sxs-lookup"><span data-stu-id="a9ba8-162">\n</span></span>|<span data-ttu-id="a9ba8-163">Новая строка</span><span class="sxs-lookup"><span data-stu-id="a9ba8-163">New line</span></span>|<span data-ttu-id="a9ba8-164">0x000A</span><span class="sxs-lookup"><span data-stu-id="a9ba8-164">0x000A</span></span>|  
|<span data-ttu-id="a9ba8-165">\r</span><span class="sxs-lookup"><span data-stu-id="a9ba8-165">\r</span></span>|<span data-ttu-id="a9ba8-166">Возврат каретки</span><span class="sxs-lookup"><span data-stu-id="a9ba8-166">Carriage return</span></span>|<span data-ttu-id="a9ba8-167">0x000D</span><span class="sxs-lookup"><span data-stu-id="a9ba8-167">0x000D</span></span>|  
|<span data-ttu-id="a9ba8-168">\t</span><span class="sxs-lookup"><span data-stu-id="a9ba8-168">\t</span></span>|<span data-ttu-id="a9ba8-169">Горизонтальная табуляция</span><span class="sxs-lookup"><span data-stu-id="a9ba8-169">Horizontal tab</span></span>|<span data-ttu-id="a9ba8-170">0x0009</span><span class="sxs-lookup"><span data-stu-id="a9ba8-170">0x0009</span></span>|  
|<span data-ttu-id="a9ba8-171">\v</span><span class="sxs-lookup"><span data-stu-id="a9ba8-171">\v</span></span>|<span data-ttu-id="a9ba8-172">Вертикальная табуляция</span><span class="sxs-lookup"><span data-stu-id="a9ba8-172">Vertical tab</span></span>|<span data-ttu-id="a9ba8-173">0x000B</span><span class="sxs-lookup"><span data-stu-id="a9ba8-173">0x000B</span></span>|  
|<span data-ttu-id="a9ba8-174">\u</span><span class="sxs-lookup"><span data-stu-id="a9ba8-174">\u</span></span>|<span data-ttu-id="a9ba8-175">Escape-последовательность Юникода (UTF-16)</span><span class="sxs-lookup"><span data-stu-id="a9ba8-175">Unicode escape sequence (UTF-16)</span></span>|<span data-ttu-id="a9ba8-176">`\uHHHH` (диапазон: 0000–FFFF; пример: `\u00E7` = "ç")</span><span class="sxs-lookup"><span data-stu-id="a9ba8-176">`\uHHHH` (range: 0000 - FFFF; example: `\u00E7` = "ç")</span></span>|  
|<span data-ttu-id="a9ba8-177">\U</span><span class="sxs-lookup"><span data-stu-id="a9ba8-177">\U</span></span>|<span data-ttu-id="a9ba8-178">Escape-последовательность Юникода (UTF-32)</span><span class="sxs-lookup"><span data-stu-id="a9ba8-178">Unicode escape sequence (UTF-32)</span></span>|<span data-ttu-id="a9ba8-179">`\U00HHHHHH` (диапазон: 000000–10FFFF; пример: `\U0001F47D` = "&#x1F47D;")</span><span class="sxs-lookup"><span data-stu-id="a9ba8-179">`\U00HHHHHH` (range: 000000 - 10FFFF; example: `\U0001F47D` = "&#x1F47D;")</span></span>|  
|<span data-ttu-id="a9ba8-180">\x</span><span class="sxs-lookup"><span data-stu-id="a9ba8-180">\x</span></span>|<span data-ttu-id="a9ba8-181">Escape-последовательность Юникода аналогична "\u", она отличается только длиной переменной</span><span class="sxs-lookup"><span data-stu-id="a9ba8-181">Unicode escape sequence similar to "\u" except with variable length</span></span>|<span data-ttu-id="a9ba8-182">`\xH[H][H][H]` (диапазон: 0–FFFF; пример: `\x00E7` или `\x0E7` или `\xE7` = "ç")</span><span class="sxs-lookup"><span data-stu-id="a9ba8-182">`\xH[H][H][H]` (range: 0 - FFFF; example: `\x00E7` or `\x0E7` or `\xE7` = "ç")</span></span>|  
  
> [!WARNING]
> <span data-ttu-id="a9ba8-183">Если вы используете escape-последовательность `\x` с менее чем четырьмя шестнадцатеричными цифрами, то когда непосредственно следующие за ней символы также являются допустимыми шестнадцатеричными цифрами (т. е. 0–9, A–F и a–f), они будут интерпретированы как часть этой escape-последовательности.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-183">When using the `\x` escape sequence and specifying less than 4 hex digits, if the characters that immediately follow the escape sequence are valid hex digits (i.e. 0-9, A-F, and a-f), they will be interpreted as being part of the escape sequence.</span></span> <span data-ttu-id="a9ba8-184">Например, `\xA1` дает результат "&#161;", являющийся кодовой точкой U+00A1.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-184">For example, `\xA1` produces "&#161;", which is code point U+00A1.</span></span> <span data-ttu-id="a9ba8-185">Однако если следующий символ — "A" или "a", тогда escape-последовательность будет интерпретироваться как `\xA1A` и даст результат "&#x0A1A;", являющийся кодовой точкой U+0A1A.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-185">However, if the next character is "A" or "a", then the escape sequence will instead be interpreted as being `\xA1A` and produce "&#x0A1A;", which is code point U+0A1A.</span></span> <span data-ttu-id="a9ba8-186">В таких случаях, чтобы избежать некорректной интерпретации, указывайте все четыре шестнадцатеричных знака (например, `\x00A1`).</span><span class="sxs-lookup"><span data-stu-id="a9ba8-186">In such cases, specifying all 4 hex digits (e.g. `\x00A1` ) will prevent any possible misinterpretation.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="a9ba8-187">Во время компиляции буквальные строки преобразуются в обычные строки с теми же escape-последовательностями.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-187">At compile time, verbatim strings are converted to ordinary strings with all the same escape sequences.</span></span> <span data-ttu-id="a9ba8-188">Поэтому, если вы просматриваете буквальную строку в окне контрольных значений отладчика, вы увидите escape-символы, добавленные компилятором, а не буквальную версию из исходного кода.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-188">Therefore, if you view a verbatim string in the debugger watch window, you will see the escape characters that were added by the compiler, not the verbatim version from your source code.</span></span> <span data-ttu-id="a9ba8-189">Например, буквальная строка `@"C:\files.txt"`будет отображаться в окне контрольных значений как "C:\\\files.txt".</span><span class="sxs-lookup"><span data-stu-id="a9ba8-189">For example, the verbatim string `@"C:\files.txt"` will appear in the watch window as "C:\\\files.txt".</span></span>  
  
## <a name="format-strings"></a><span data-ttu-id="a9ba8-190">Строки формата</span><span class="sxs-lookup"><span data-stu-id="a9ba8-190">Format Strings</span></span>  
 <span data-ttu-id="a9ba8-191">Строка формата — это строка, содержимое которой можно определить динамически во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-191">A format string is a string whose contents are determined dynamically at runtime.</span></span> <span data-ttu-id="a9ba8-192">Строки формата создаются путем внедрения *интерполированных выражений* или заполнителей внутри фигурных скобок в строке.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-192">Format strings are created by embedding *interpolated expressions* or placeholders inside of braces within a string.</span></span> <span data-ttu-id="a9ba8-193">Весь код внутри фигурных скобок (`{...}`) будет преобразован в значение и выходные данные как отформатированная строка во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-193">Everything inside the braces (`{...}`) will be resolved to a value and output as a formatted string at runtime.</span></span> <span data-ttu-id="a9ba8-194">Существует два способа создания строк формата: интерполяция строк и составное форматирование.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-194">There are two methods to create format strings: string interpolation and composite formatting.</span></span>

### <a name="string-interpolation"></a><span data-ttu-id="a9ba8-195">Интерполяция строк</span><span class="sxs-lookup"><span data-stu-id="a9ba8-195">String Interpolation</span></span>
<span data-ttu-id="a9ba8-196">В C# 6.0 и более поздних версий [ *интерполированные строки*](../../language-reference/tokens/interpolated.md) определяются по специальному символу `$`. Они включают интерполированные выражения в фигурных скобках.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-196">Available in C# 6.0 and later, [*interpolated strings*](../../language-reference/tokens/interpolated.md) are identified by the `$` special character and include interpolated expressions in braces.</span></span> <span data-ttu-id="a9ba8-197">См. дополнительные сведения в интерактивном руководстве по [ интерполяции строк в C#](../../tutorials/exploration/interpolated-strings.yml).</span><span class="sxs-lookup"><span data-stu-id="a9ba8-197">If you are new to string interpolation, see the [String interpolation - C# interactive tutorial](../../tutorials/exploration/interpolated-strings.yml) for a quick overview.</span></span>

<span data-ttu-id="a9ba8-198">Используйте интерполяцию для повышения удобства чтения и обслуживаемости кода.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-198">Use string interpolation to improve the readability and maintainability of your code.</span></span> <span data-ttu-id="a9ba8-199">Интерполяция строк позволяет достичь тех же результатов, что и использование метода `String.Format`, но более простым и понятным способом.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-199">String interpolation achieves the same results as the `String.Format` method, but improves ease of use and inline clarity.</span></span>

[!code-csharp[csProgGuideFormatStrings](~/samples/snippets/csharp/programming-guide/strings/Strings_1.cs#StringInterpolation)]

### <a name="composite-formatting"></a><span data-ttu-id="a9ba8-200">Составное форматирование</span><span class="sxs-lookup"><span data-stu-id="a9ba8-200">Composite Formatting</span></span>
<span data-ttu-id="a9ba8-201"><xref:System.String.Format%2A?displayProperty=nameWithType> использует заполнители в фигурных скобках, чтобы создать строку формата.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-201">The <xref:System.String.Format%2A?displayProperty=nameWithType> utilizes placeholders in braces to create a format string.</span></span> <span data-ttu-id="a9ba8-202">В этом примере результат аналогичен выходным данным, получаемым с помощью метода интерполяции строк, описанного выше.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-202">This example results in similar output to the string interpolation method used above.</span></span>
  
[!code-csharp[csProgGuideFormatStrings](~/samples/snippets/csharp/programming-guide/strings/Strings_1.cs#StringFormat)]

<span data-ttu-id="a9ba8-203">См. дополнительные сведения о [типах форматирования в .NET](../../../standard/base-types/formatting-types.md).</span><span class="sxs-lookup"><span data-stu-id="a9ba8-203">For more information on formatting .NET types see [Formatting Types in .NET](../../../standard/base-types/formatting-types.md).</span></span>
  
## <a name="substrings"></a><span data-ttu-id="a9ba8-204">Подстроки</span><span class="sxs-lookup"><span data-stu-id="a9ba8-204">Substrings</span></span>  
 <span data-ttu-id="a9ba8-205">Подстрока — это последовательность символов, содержащихся в строке.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-205">A substring is any sequence of characters that is contained in a string.</span></span> <span data-ttu-id="a9ba8-206">Используйте метод <xref:System.String.Substring%2A>, чтобы создать новую строку из части исходной строки.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-206">Use the <xref:System.String.Substring%2A> method to create a new string from a part of the original string.</span></span> <span data-ttu-id="a9ba8-207">Одно вхождение подстроки или несколько можно найти с помощью метода <xref:System.String.IndexOf%2A>.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-207">You can search for one or more occurrences of a substring by using the <xref:System.String.IndexOf%2A> method.</span></span> <span data-ttu-id="a9ba8-208">Используйте метод <xref:System.String.Replace%2A>, чтобы заменить все вхождения указанной подстроки новой строкой.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-208">Use the <xref:System.String.Replace%2A> method to replace all occurrences of a specified substring with a new string.</span></span> <span data-ttu-id="a9ba8-209">Как и метод <xref:System.String.Substring%2A>, метод <xref:System.String.Replace%2A> фактически возвращает новую строку и не изменяет исходную строку.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-209">Like the <xref:System.String.Substring%2A> method, <xref:System.String.Replace%2A> actually returns a new string and does not modify the original string.</span></span> <span data-ttu-id="a9ba8-210">Дополнительные сведения см. в [практическом руководстве по поиску строк](../../how-to/search-strings.md) и [практическом руководстве по изменению содержимого строк](../../how-to/modify-string-contents.md).</span><span class="sxs-lookup"><span data-stu-id="a9ba8-210">For more information, see [How to: search strings](../../how-to/search-strings.md) and [How to: Modify String Contents](../../how-to/modify-string-contents.md).</span></span>  
  
 [!code-csharp[csProgGuideStrings#9](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideStrings/CS/Strings.cs#9)]  
  
## <a name="accessing-individual-characters"></a><span data-ttu-id="a9ba8-211">Доступ к отдельным символам</span><span class="sxs-lookup"><span data-stu-id="a9ba8-211">Accessing Individual Characters</span></span>  
 <span data-ttu-id="a9ba8-212">Используя нотацию массива со значением индекса, можно получить доступ только для чтения к отдельным символам, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="a9ba8-212">You can use array notation with an index value to acquire read-only access to individual characters, as in the following example:</span></span>  
  
 [!code-csharp[csProgGuideStrings#8](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideStrings/CS/Strings.cs#8)]  
  
 <span data-ttu-id="a9ba8-213">Если вам необходимо изменить отдельные символы в строке и функций методов <xref:System.String> вам недостаточно, используйте объект <xref:System.Text.StringBuilder>, чтобы изменить отдельные символы "на месте", а затем создайте новую строку для сохранения результатов с помощью методов <xref:System.Text.StringBuilder>.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-213">If the <xref:System.String> methods do not provide the functionality that you must have to modify individual characters in a string, you can use a <xref:System.Text.StringBuilder> object to modify the individual chars "in-place", and then create a new string to store the results by using the <xref:System.Text.StringBuilder> methods.</span></span> <span data-ttu-id="a9ba8-214">В следующем примере предположим, что необходимо определенным образом изменить исходную строку, а затем сохранить результаты для дальнейшего использования:</span><span class="sxs-lookup"><span data-stu-id="a9ba8-214">In the following example, assume that you must modify the original string in a particular way and then store the results for future use:</span></span>  
  
 [!code-csharp[csProgGuideStrings#27](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideStrings/CS/Strings.cs#27)]  
  
## <a name="null-strings-and-empty-strings"></a><span data-ttu-id="a9ba8-215">Строки NULL и пустые строки</span><span class="sxs-lookup"><span data-stu-id="a9ba8-215">Null Strings and Empty Strings</span></span>  
 <span data-ttu-id="a9ba8-216">Пустая строка — это экземпляр объекта <xref:System.String?displayProperty=nameWithType>, который содержит нуль символов.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-216">An empty string is an instance of a <xref:System.String?displayProperty=nameWithType> object that contains zero characters.</span></span> <span data-ttu-id="a9ba8-217">Пустые строки часто используются в различных сценариях программирования для представления пустого текстового поля.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-217">Empty strings are used often in various programming scenarios to represent a blank text field.</span></span> <span data-ttu-id="a9ba8-218">Вы можете вызывать методы для пустых строк, так как они являются допустимыми объектами <xref:System.String?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-218">You can call methods on empty strings because they are valid <xref:System.String?displayProperty=nameWithType> objects.</span></span> <span data-ttu-id="a9ba8-219">Пустые строки инициализируются следующим образом:</span><span class="sxs-lookup"><span data-stu-id="a9ba8-219">Empty strings are initialized as follows:</span></span>  
  
```csharp  
string s = String.Empty;  
```  
  
 <span data-ttu-id="a9ba8-220">В отличие от пустых строк строка NULL не ссылается на экземпляр объекта <xref:System.String?displayProperty=nameWithType>, поэтому любая попытка вызвать метод для строки NULL приводит к исключению <xref:System.NullReferenceException>.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-220">By contrast, a null string does not refer to an instance of a <xref:System.String?displayProperty=nameWithType> object and any attempt to call a method on a null string causes a <xref:System.NullReferenceException>.</span></span> <span data-ttu-id="a9ba8-221">Но вы можете использовать строки NULL в операциях объединения и сравнения с другими строками.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-221">However, you can use null strings in concatenation and comparison operations with other strings.</span></span> <span data-ttu-id="a9ba8-222">В следующих примерах показаны случаи, в которых ссылка на строку NULL вызывает и не вызывает исключение:</span><span class="sxs-lookup"><span data-stu-id="a9ba8-222">The following examples illustrate some cases in which a reference to a null string does and does not cause an exception to be thrown:</span></span>  
  
 [!code-csharp[csProgGuideStrings#20](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideStrings/CS/Strings.cs#20)]  
  
## <a name="using-stringbuilder-for-fast-string-creation"></a><span data-ttu-id="a9ba8-223">Использование класса StringBuilder для быстрого создания строк</span><span class="sxs-lookup"><span data-stu-id="a9ba8-223">Using StringBuilder for Fast String Creation</span></span>  
 <span data-ttu-id="a9ba8-224">Операции со строками в .NET хорошо оптимизированы, и в большинстве случаев они не снижают производительность.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-224">String operations in .NET are highly optimized and in most cases do not significantly impact performance.</span></span> <span data-ttu-id="a9ba8-225">Но в некоторых сценариях, например в сплошных циклах, которые выполняются сотни и тысячи раз, операции со строками могут повлиять на производительность.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-225">However, in some scenarios such as tight loops that are executing many hundreds or thousands of times, string operations can affect performance.</span></span> <span data-ttu-id="a9ba8-226">Класс <xref:System.Text.StringBuilder> создает строковый буфер, который ускоряет работу, если программа выполняет много операций над строками.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-226">The <xref:System.Text.StringBuilder> class creates a string buffer that offers better performance if your program performs many string manipulations.</span></span> <span data-ttu-id="a9ba8-227">Строка <xref:System.Text.StringBuilder> также позволяет заново присваивать отдельные символы, что не поддерживает встроенный строковый тип данных.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-227">The <xref:System.Text.StringBuilder> string also enables you to reassign individual characters, something the built-in string data type does not support.</span></span> <span data-ttu-id="a9ba8-228">Например, этот код изменяет содержимое строки без создания новой строки:</span><span class="sxs-lookup"><span data-stu-id="a9ba8-228">This code, for example, changes the content of a string without creating a new string:</span></span>  
  
 [!code-csharp[csProgGuideStrings#15](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideStrings/CS/Strings.cs#15)]  
  
 <span data-ttu-id="a9ba8-229">В этом примере объект <xref:System.Text.StringBuilder> используется для создания строки из набора числовых типов:</span><span class="sxs-lookup"><span data-stu-id="a9ba8-229">In this example, a <xref:System.Text.StringBuilder> object is used to create a string from a set of numeric types:</span></span>  
  
 [!code-csharp[TestStringBuilder#1](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideStrings/CS/TestStringBuilder.cs)]
  
## <a name="strings-extension-methods-and-linq"></a><span data-ttu-id="a9ba8-230">Строки, методы расширения и LINQ</span><span class="sxs-lookup"><span data-stu-id="a9ba8-230">Strings, Extension Methods and LINQ</span></span>  
 <span data-ttu-id="a9ba8-231">Так как тип <xref:System.String> использует <xref:System.Collections.Generic.IEnumerable%601>, вы можете применять методы расширения, определенные для строк в классе <xref:System.Linq.Enumerable>.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-231">Because the <xref:System.String> type implements <xref:System.Collections.Generic.IEnumerable%601>, you can use the extension methods defined in the <xref:System.Linq.Enumerable> class on strings.</span></span> <span data-ttu-id="a9ba8-232">Чтобы избежать визуального загромождения, эти методы исключены из IntelliSense для типа <xref:System.String>, но все равно доступны.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-232">To avoid visual clutter, these methods are excluded from IntelliSense for the <xref:System.String> type, but they are available nevertheless.</span></span> <span data-ttu-id="a9ba8-233">Можно также использовать выражения запроса [!INCLUDE[vbteclinq](~/includes/vbteclinq-md.md)] в строках.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-233">You can also use [!INCLUDE[vbteclinq](~/includes/vbteclinq-md.md)] query expressions on strings.</span></span> <span data-ttu-id="a9ba8-234">Дополнительные сведения см. в документации по [LINQ и строкам](../concepts/linq/linq-and-strings.md).</span><span class="sxs-lookup"><span data-stu-id="a9ba8-234">For more information, see [LINQ and Strings](../concepts/linq/linq-and-strings.md).</span></span>  
  
## <a name="related-topics"></a><span data-ttu-id="a9ba8-235">См. также</span><span class="sxs-lookup"><span data-stu-id="a9ba8-235">Related Topics</span></span>  
  
|<span data-ttu-id="a9ba8-236">Раздел</span><span class="sxs-lookup"><span data-stu-id="a9ba8-236">Topic</span></span>|<span data-ttu-id="a9ba8-237">ОПИСАНИЕ</span><span class="sxs-lookup"><span data-stu-id="a9ba8-237">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="a9ba8-238">Практическое руководство. Изменение содержимого строки</span><span class="sxs-lookup"><span data-stu-id="a9ba8-238">How to: Modify String Contents</span></span>](../../how-to/modify-string-contents.md)|<span data-ttu-id="a9ba8-239">Описание методов преобразования строк и изменения их содержимого.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-239">Illustrates techniques to transform strings and modify the contents of strings.</span></span>|  
|[<span data-ttu-id="a9ba8-240">Практическое руководство. Сравнение строк</span><span class="sxs-lookup"><span data-stu-id="a9ba8-240">How to: Compare Strings</span></span>](../../how-to/compare-strings.md)|<span data-ttu-id="a9ba8-241">Рассказывает, как строки сравниваются по языку, региональным параметрам и порядку.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-241">Shows how to perform ordinal and culture specific comparisons of strings.</span></span>|  
|[<span data-ttu-id="a9ba8-242">Практическое руководство. Сцепка нескольких строк</span><span class="sxs-lookup"><span data-stu-id="a9ba8-242">How to: Concatenate Multiple Strings</span></span>](../../how-to/concatenate-multiple-strings.md)|<span data-ttu-id="a9ba8-243">Демонстрирует разные способы соединения нескольких строк в одну.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-243">Demonstrates various ways to join multiple strings into one.</span></span>|
|[<span data-ttu-id="a9ba8-244">Практическое руководство. Анализ строк с помощью метода String.Split</span><span class="sxs-lookup"><span data-stu-id="a9ba8-244">How to: Parse Strings Using String.Split</span></span>](../../how-to/parse-strings-using-split.md)|<span data-ttu-id="a9ba8-245">Содержит примеры кода, демонстрирующие использование метода `String.Split` для анализа строк.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-245">Contains code examples that illustrate how to use the `String.Split` method to parse strings.</span></span>|  
|[<span data-ttu-id="a9ba8-246">Практическое руководство. Поиск по строкам</span><span class="sxs-lookup"><span data-stu-id="a9ba8-246">How to: Search Strings</span></span>](../../how-to/search-strings.md)|<span data-ttu-id="a9ba8-247">Описание использования поиска для нахождения в строках определенных шаблонов или текста.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-247">Explains how to use search for specific text or patterns in strings.</span></span>|  
|[<span data-ttu-id="a9ba8-248">Практическое руководство. Определение представления числового значения в строке</span><span class="sxs-lookup"><span data-stu-id="a9ba8-248">How to: Determine Whether a String Represents a Numeric Value</span></span>](./how-to-determine-whether-a-string-represents-a-numeric-value.md)|<span data-ttu-id="a9ba8-249">Объясняет, как безопасно проанализировать строку, чтобы проверить, содержит ли она допустимое числовое значение.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-249">Shows how to safely parse a string to see whether it has a valid numeric value.</span></span>|  
|[<span data-ttu-id="a9ba8-250">Интерполяция строк</span><span class="sxs-lookup"><span data-stu-id="a9ba8-250">String interpolation</span></span>](../../language-reference/tokens/interpolated.md)|<span data-ttu-id="a9ba8-251">Описывает функцию интерполяции строк, которая предоставляет удобный синтаксис для форматирования строк.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-251">Describes the string interpolation feature that provides a convenient syntax to format strings.</span></span>|
|[<span data-ttu-id="a9ba8-252">Базовые операции со строками в .NET Framework</span><span class="sxs-lookup"><span data-stu-id="a9ba8-252">Basic String Operations</span></span>](../../../standard/base-types/basic-string-operations.md)|<span data-ttu-id="a9ba8-253">Содержит ссылки на статьи, в которых показаны базовые операции над строками с помощью методов <xref:System.String?displayProperty=nameWithType> и <xref:System.Text.StringBuilder?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-253">Provides links to topics that use <xref:System.String?displayProperty=nameWithType> and <xref:System.Text.StringBuilder?displayProperty=nameWithType> methods to perform basic string operations.</span></span>|  
|[<span data-ttu-id="a9ba8-254">Parsing Strings</span><span class="sxs-lookup"><span data-stu-id="a9ba8-254">Parsing Strings</span></span>](../../../standard/base-types/parsing-strings.md)|<span data-ttu-id="a9ba8-255">Описывает, как преобразовать строковые представления базовых типов .NET в экземпляры соответствующих типов.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-255">Describes how to convert string representations of .NET base types to instances of the corresponding types.</span></span>|  
|[<span data-ttu-id="a9ba8-256">Синтаксический анализ строк даты и времени в .NET</span><span class="sxs-lookup"><span data-stu-id="a9ba8-256">Parsing Date and Time Strings in .NET</span></span>](../../../standard/base-types/parsing-datetime.md)|<span data-ttu-id="a9ba8-257">Показывает, как преобразовать строку, например "01/24/2008", в объект <xref:System.DateTime?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-257">Shows how to convert a string such as "01/24/2008" to a <xref:System.DateTime?displayProperty=nameWithType> object.</span></span>|  
|[<span data-ttu-id="a9ba8-258">Сравнение строк в .NET Framework</span><span class="sxs-lookup"><span data-stu-id="a9ba8-258">Comparing Strings</span></span>](../../../standard/base-types/comparing.md)|<span data-ttu-id="a9ba8-259">Объясняет, как сравнивать строки, и содержит примеры на языках C# и Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-259">Includes information about how to compare strings and provides examples in C# and Visual Basic.</span></span>|  
|<span data-ttu-id="a9ba8-260">[Using the StringBuilder class](../../../standard/base-types/stringbuilder.md) (Использование класса StringBuilder)</span><span class="sxs-lookup"><span data-stu-id="a9ba8-260">[Using the StringBuilder Class](../../../standard/base-types/stringbuilder.md)</span></span>|<span data-ttu-id="a9ba8-261">Описывает создание и изменение динамических строковых объектов с помощью класса <xref:System.Text.StringBuilder>.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-261">Describes how to create and modify dynamic string objects by using the <xref:System.Text.StringBuilder> class.</span></span>|  
|[<span data-ttu-id="a9ba8-262">LINQ и строки</span><span class="sxs-lookup"><span data-stu-id="a9ba8-262">LINQ and Strings</span></span>](../concepts/linq/linq-and-strings.md)|<span data-ttu-id="a9ba8-263">Содержит инструкции по выполнению различных операций со строками с помощью запросов LINQ.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-263">Provides information about how to perform various string operations by using LINQ queries.</span></span>|  
|[<span data-ttu-id="a9ba8-264">Руководство по программированию на C#</span><span class="sxs-lookup"><span data-stu-id="a9ba8-264">C# Programming Guide</span></span>](../index.md)|<span data-ttu-id="a9ba8-265">Содержит ссылки на статьи с конструкциями программирования на C#.</span><span class="sxs-lookup"><span data-stu-id="a9ba8-265">Provides links to topics that explain programming constructs in C#.</span></span>|  
