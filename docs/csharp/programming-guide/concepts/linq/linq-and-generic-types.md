---
title: LINQ и универсальные типы (C#)
description: Изучите основные принципы универсальных типов в C#, которые поддерживают запросы.  Запросы LINQ основаны на универсальных типах.
ms.date: 07/20/2015
helpviewer_keywords:
- LINQ [C#], generic types
- generic types [LINQ]
- generics [LINQ]
ms.assetid: 660e3799-25ca-462c-8c4a-8bce04fbb031
ms.openlocfilehash: a71957eabea788fb06195df1ef026390947f013d
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2020
ms.locfileid: "91170471"
---
# <a name="linq-and-generic-types-c"></a><span data-ttu-id="ee1a3-104">LINQ и универсальные типы (C#)</span><span class="sxs-lookup"><span data-stu-id="ee1a3-104">LINQ and Generic Types (C#)</span></span>

<span data-ttu-id="ee1a3-105">Запросы LINQ основаны на универсальных типах, которые впервые появились в .NET Framework 2.0.</span><span class="sxs-lookup"><span data-stu-id="ee1a3-105">LINQ queries are based on generic types, which were introduced in version 2.0 of .NET Framework.</span></span> <span data-ttu-id="ee1a3-106">Для того чтобы приступить к написанию запросов, не требуется глубокое знание универсальных типов.</span><span class="sxs-lookup"><span data-stu-id="ee1a3-106">You do not need an in-depth knowledge of generics before you can start writing queries.</span></span> <span data-ttu-id="ee1a3-107">Тем не менее необходимо понимание двух основных принципов.</span><span class="sxs-lookup"><span data-stu-id="ee1a3-107">However, you may want to understand two basic concepts:</span></span>  
  
1. <span data-ttu-id="ee1a3-108">При создании экземпляра универсального класса коллекции, такого как <xref:System.Collections.Generic.List%601>, замените "T" типом объектов, которые будут храниться в списке.</span><span class="sxs-lookup"><span data-stu-id="ee1a3-108">When you create an instance of a generic collection class such as <xref:System.Collections.Generic.List%601>, you replace the "T" with the type of objects that the list will hold.</span></span> <span data-ttu-id="ee1a3-109">Например, список строк выражается как `List<string>`, а список объектов `Customer` — как `List<Customer>`.</span><span class="sxs-lookup"><span data-stu-id="ee1a3-109">For example, a list of strings is expressed as `List<string>`, and a list of `Customer` objects is expressed as `List<Customer>`.</span></span> <span data-ttu-id="ee1a3-110">Универсальный список является строго типизированным и предоставляет ряд преимуществ по сравнению с коллекциями, которые хранят свои элементы как <xref:System.Object>.</span><span class="sxs-lookup"><span data-stu-id="ee1a3-110">A generic list is strongly typed and provides many benefits over collections that store their elements as <xref:System.Object>.</span></span> <span data-ttu-id="ee1a3-111">При попытке добавить `Customer` в `List<string>` будет выдана ошибка во время компиляции.</span><span class="sxs-lookup"><span data-stu-id="ee1a3-111">If you try to add a `Customer` to a `List<string>`, you will get an error at compile time.</span></span> <span data-ttu-id="ee1a3-112">Универсальные коллекции просты в использовании, поскольку нет необходимости выполнять приведение типов во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="ee1a3-112">It is easy to use generic collections because you do not have to perform run-time type-casting.</span></span>  
  
2. <span data-ttu-id="ee1a3-113"><xref:System.Collections.Generic.IEnumerable%601> — это интерфейс, поддерживающий перечисление универсальных классов коллекций с помощью оператора `foreach`.</span><span class="sxs-lookup"><span data-stu-id="ee1a3-113"><xref:System.Collections.Generic.IEnumerable%601> is the interface that enables generic collection classes to be enumerated by using the `foreach` statement.</span></span> <span data-ttu-id="ee1a3-114">Универсальные классы коллекций поддерживают <xref:System.Collections.Generic.IEnumerable%601> так же, как неуниверсальные классы коллекций (например <xref:System.Collections.ArrayList>) поддерживают <xref:System.Collections.IEnumerable>.</span><span class="sxs-lookup"><span data-stu-id="ee1a3-114">Generic collection classes support <xref:System.Collections.Generic.IEnumerable%601> just as non-generic collection classes such as <xref:System.Collections.ArrayList> support <xref:System.Collections.IEnumerable>.</span></span>  
  
 <span data-ttu-id="ee1a3-115">Дополнительные сведения об универсальных классах см. в разделе [Универсальные шаблоны](../../generics/index.md).</span><span class="sxs-lookup"><span data-stu-id="ee1a3-115">For more information about generics, see [Generics](../../generics/index.md).</span></span>  
  
## <a name="ienumerablet-variables-in-linq-queries"></a><span data-ttu-id="ee1a3-116">Переменные IEnumerable<T\> в запросах LINQ</span><span class="sxs-lookup"><span data-stu-id="ee1a3-116">IEnumerable<T\> variables in LINQ Queries</span></span>  

 <span data-ttu-id="ee1a3-117">Переменные запроса LINQ типизированы как <xref:System.Collections.Generic.IEnumerable%601> или производный тип, например <xref:System.Linq.IQueryable%601>.</span><span class="sxs-lookup"><span data-stu-id="ee1a3-117">LINQ query variables are typed as <xref:System.Collections.Generic.IEnumerable%601> or a derived type such as <xref:System.Linq.IQueryable%601>.</span></span> <span data-ttu-id="ee1a3-118">Если появляется переменная запроса, которая типизируется как `IEnumerable<Customer>`, это просто означает, что запрос при выполнении выведет последовательность из нуля или более объектов `Customer`.</span><span class="sxs-lookup"><span data-stu-id="ee1a3-118">When you see a query variable that is typed as `IEnumerable<Customer>`, it just means that the query, when it is executed, will produce a sequence of zero or more `Customer` objects.</span></span>  
  
 [!code-csharp[csLINQGettingStarted#34](~/samples/snippets/csharp/VS_Snippets_VBCSharp/CsLINQGettingStarted/CS/Class1.cs#34)]  
  
 <span data-ttu-id="ee1a3-119">Дополнительные сведения см. в разделе [Связи типов в операциях запроса LINQ](./type-relationships-in-linq-query-operations.md).</span><span class="sxs-lookup"><span data-stu-id="ee1a3-119">For more information, see [Type Relationships in LINQ Query Operations](./type-relationships-in-linq-query-operations.md).</span></span>  
  
## <a name="letting-the-compiler-handle-generic-type-declarations"></a><span data-ttu-id="ee1a3-120">Передача обработки объявлений универсальных типов компилятору</span><span class="sxs-lookup"><span data-stu-id="ee1a3-120">Letting the Compiler Handle Generic Type Declarations</span></span>  

 <span data-ttu-id="ee1a3-121">При желании можно отказаться от обычного синтаксиса универсальных типов, используя ключевое слово [var](../../../language-reference/keywords/var.md).</span><span class="sxs-lookup"><span data-stu-id="ee1a3-121">If you prefer, you can avoid generic syntax by using the [var](../../../language-reference/keywords/var.md) keyword.</span></span> <span data-ttu-id="ee1a3-122">Ключевое слово `var` дает компилятору указание вывести тип переменной запроса путем поиска в источнике данных, указанном в предложении `from`.</span><span class="sxs-lookup"><span data-stu-id="ee1a3-122">The `var` keyword instructs the compiler to infer the type of a query variable by looking at the data source specified in the `from` clause.</span></span> <span data-ttu-id="ee1a3-123">В следующем примере создается тот же скомпилированный код, что и в предыдущем примере:</span><span class="sxs-lookup"><span data-stu-id="ee1a3-123">The following example produces the same compiled code as the previous example:</span></span>  
  
 [!code-csharp[csLINQGettingStarted#35](~/samples/snippets/csharp/VS_Snippets_VBCSharp/CsLINQGettingStarted/CS/Class1.cs#35)]  
  
 <span data-ttu-id="ee1a3-124">Ключевое слово `var` удобно, если тип переменной является очевидным, или если не требуется явно указывать вложенные универсальные типы, например создаваемые групповыми запросами.</span><span class="sxs-lookup"><span data-stu-id="ee1a3-124">The `var` keyword is useful when the type of the variable is obvious or when it is not that important to explicitly specify nested generic types such as those that are produced by group queries.</span></span> <span data-ttu-id="ee1a3-125">Как правило, рекомендуется помнить о том, что использование `var` делает код более сложным для чтения.</span><span class="sxs-lookup"><span data-stu-id="ee1a3-125">In general, we recommend that if you use `var`, realize that it can make your code more difficult for others to read.</span></span> <span data-ttu-id="ee1a3-126">Дополнительные сведения см. в статье [Неявно типизированные локальные переменные (руководство по программированию на C#)](../../classes-and-structs/implicitly-typed-local-variables.md).</span><span class="sxs-lookup"><span data-stu-id="ee1a3-126">For more information, see [Implicitly Typed Local Variables](../../classes-and-structs/implicitly-typed-local-variables.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ee1a3-127">См. также</span><span class="sxs-lookup"><span data-stu-id="ee1a3-127">See also</span></span>

- [<span data-ttu-id="ee1a3-128">Универсальные шаблоны</span><span class="sxs-lookup"><span data-stu-id="ee1a3-128">Generics</span></span>](../../generics/index.md)
