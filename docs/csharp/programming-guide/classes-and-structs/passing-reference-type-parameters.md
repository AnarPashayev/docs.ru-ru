---
title: Руководство по программированию на C#. Передача параметров ссылочного типа
description: При передаче параметра ссылочного типа по значению в C# могут измениться данные в упоминаемом объекте, но не значение самой ссылки.
ms.date: 07/20/2015
helpviewer_keywords:
- method parameters [C#], reference types
- parameters [C#], reference
ms.assetid: 9e6eb65c-942e-48ab-920a-b7ba9df4ea20
ms.openlocfilehash: 64a4735eded7a468549862b3221b4fbd0966e64d
ms.sourcegitcommit: 3d84eac0818099c9949035feb96bbe0346358504
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/21/2020
ms.locfileid: "86864713"
---
# <a name="passing-reference-type-parameters-c-programming-guide"></a>Передача параметров ссылочного типа (Руководство по программированию в C#)
Переменная [ссылочного типа](../../language-reference/keywords/reference-types.md) содержит не сами данные, а ссылку на них. При передаче параметра ссылочного типа по значению можно изменять данные, относящиеся к объекту, на который указывает ссылка, например, значение члена класса. Тем не менее вы не можете изменить значение самой ссылки. Например, вы не можете использовать одну и ту же ссылку, чтобы выделить память для нового объекта и сохранить его вне этого метода. Для этого необходимо передать параметр с использованием ключевого слова [ref](../../language-reference/keywords/ref.md) или [out](../../language-reference/keywords/out-parameter-modifier.md). В следующих примерах мы для простоты используем `ref`.  
  
## <a name="passing-reference-types-by-value"></a>Передача ссылочных типов по значению  
 В следующем примере демонстрируется передача параметра ссылочного типа `arr` по значению в метод `Change`. Поскольку этот параметр является ссылкой на `arr`, можно изменять элементы массива. Тем не менее переназначение параметра другому блоку памяти возможно только внутри самого метода и не влияет на исходную переменную `arr`.  
  
 [!code-csharp[csProgGuideParameters#7](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideParameters/CS/Parameters.cs#7)]  
  
 В предыдущем примере массив `arr` имеет ссылочный тип и передается в метод без параметра `ref`. В таком случае в метод будет передана копия ссылки, которая указывает на `arr`. Как видно из выходных данных, метод может изменять содержимое элемента массива (в данном случае с `1` на `888`). Тем не менее при выделении нового блока памяти с помощью оператора [new](../../language-reference/operators/new-operator.md) внутри метода `Change` переменная `pArray` будет ссылаться на новый массив. Таким образом, любые выполненные после этого изменения не будут отражаться в исходном массиве `arr`, который был создан внутри `Main`. Фактически, в этом примере создается два массива: один внутри `Main`, а другой — в методе `Change`.  
  
## <a name="passing-reference-types-by-reference"></a>Передача ссылочных типов по ссылке  
 Следующий пример аналогичен предыдущему, однако в нем в заголовок и вызов метода добавляется ключевое слово `ref`. Любые изменения, выполняемые в методе, влияют на исходную переменную в вызывающей программе.  
  
 [!code-csharp[csProgGuideParameters#8](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideParameters/CS/Parameters.cs#8)]  
  
 Все изменения, выполняемые внутри метода, влияют на исходный массив в `Main`. Фактически, происходит перемещение исходного массива с помощью оператора `new`. Таким образом, после вызова метода `Change` любые ссылки на `arr` будут указывать на массив из пяти элементов, который создается в методе `Change`.  
  
## <a name="swapping-two-strings"></a>Перестановка двух строк  
 Перестановка строк представляет собой наглядный пример передачи параметров ссылочного типа по ссылке. В этом примере две строки (`str1` и `str2`) инициализируются в `Main`, а затем передаются в метод `SwapStrings` в качестве параметров, измененных по ключевому слову `ref`. Перестановка двух строк выполняется как в этом методе, так и в `Main`.  
  
 [!code-csharp[csProgGuideParameters#9](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideParameters/CS/Parameters.cs#9)]  
  
 В этом примере параметры должны передаваться по ссылке, чтобы обеспечить изменение переменных в вызывающей программе. Если удалить ключевое слово `ref` из заголовка и вызова метода, в вызывающей программе не будут выполнены никакие изменения.  
  
 Дополнительные сведения о строках см. в [этом разделе](../../language-reference/builtin-types/reference-types.md).  
  
## <a name="see-also"></a>См. также

- [Руководство по программированию на C#](../index.md)
- [Передача параметров](./passing-parameters.md)
- [ref](../../language-reference/keywords/ref.md)
- [in](../../language-reference/keywords/in-parameter-modifier.md)
- [out](../../language-reference/keywords/out.md)
- [Ссылочные типы](../../language-reference/keywords/reference-types.md)
