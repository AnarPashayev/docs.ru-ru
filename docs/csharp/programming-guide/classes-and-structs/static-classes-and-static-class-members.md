---
title: Руководство по программированию на C#. Статические классы и члены статических классов
description: В C# нельзя создавать экземпляры статических классов. Доступ к членам статического класса осуществляется с использованием самого имени класса.
ms.date: 07/20/2015
helpviewer_keywords:
- C# language, static members
- static members [C#]
- static classes [C#]
- C# language, static classes
- static class members [C#]
ms.assetid: 235614b5-1371-4dbd-9abd-b406a8b0298b
ms.openlocfilehash: 4f187d772d2f2e4375fbe3cfdc8c48af691f1c7c
ms.sourcegitcommit: 3d84eac0818099c9949035feb96bbe0346358504
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/21/2020
ms.locfileid: "86863881"
---
# <a name="static-classes-and-static-class-members-c-programming-guide"></a><span data-ttu-id="965d5-104">Статические классы и члены статических классов (Руководство по программированию в C#)</span><span class="sxs-lookup"><span data-stu-id="965d5-104">Static Classes and Static Class Members (C# Programming Guide)</span></span>

<span data-ttu-id="965d5-105">[Статический](../../language-reference/keywords/static.md) класс в основном такой же, как и нестатический класс, но имеется одно отличие: нельзя создавать экземпляры статического класса.</span><span class="sxs-lookup"><span data-stu-id="965d5-105">A [static](../../language-reference/keywords/static.md) class is basically the same as a non-static class, but there is one difference: a static class cannot be instantiated.</span></span> <span data-ttu-id="965d5-106">Другими словами, нельзя использовать оператор [new](../../language-reference/operators/new-operator.md) для создания переменной типа класса.</span><span class="sxs-lookup"><span data-stu-id="965d5-106">In other words, you cannot use the [new](../../language-reference/operators/new-operator.md) operator to create a variable of the class type.</span></span> <span data-ttu-id="965d5-107">Поскольку нет переменной экземпляра, доступ к членам статического класса осуществляется с использованием самого имени класса.</span><span class="sxs-lookup"><span data-stu-id="965d5-107">Because there is no instance variable, you access the members of a static class by using the class name itself.</span></span> <span data-ttu-id="965d5-108">Например, если есть статический класс, называемый `UtilityClass`, имеющий открытый статический метод с именем `MethodA`, вызов метода выполняется, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="965d5-108">For example, if you have a static class that is named `UtilityClass` that has a public static method named `MethodA`, you call the method as shown in the following example:</span></span>  
  
```csharp  
UtilityClass.MethodA();  
```  
  
 <span data-ttu-id="965d5-109">Статический класс может использоваться как обычный контейнер для наборов методов, работающих на входных параметрах, и не должен возвращать или устанавливать каких-либо внутренних полей экземпляра.</span><span class="sxs-lookup"><span data-stu-id="965d5-109">A static class can be used as a convenient container for sets of methods that just operate on input parameters and do not have to get or set any internal instance fields.</span></span> <span data-ttu-id="965d5-110">Например, в библиотеке классов .NET статический класс <xref:System.Math?displayProperty=nameWithType> содержит методы, выполняющие математические операции, без требования сохранять или извлекать данные, уникальные для конкретного экземпляра класса <xref:System.Math>.</span><span class="sxs-lookup"><span data-stu-id="965d5-110">For example, in the .NET Class Library, the static <xref:System.Math?displayProperty=nameWithType> class contains methods that perform mathematical operations, without any requirement to store or retrieve data that is unique to a particular instance of the <xref:System.Math> class.</span></span> <span data-ttu-id="965d5-111">Это значит, что члены класса применяются путем задания имени класса и имени метода, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="965d5-111">That is, you apply the members of the class by specifying the class name and the method name, as shown in the following example.</span></span>  
  
```csharp  
double dub = -3.14;  
Console.WriteLine(Math.Abs(dub));  
Console.WriteLine(Math.Floor(dub));  
Console.WriteLine(Math.Round(Math.Abs(dub)));  
  
// Output:  
// 3.14  
// -4  
// 3  
```  
  
 <span data-ttu-id="965d5-112">Как и в случае с типами всех классов, сведения о типе для статического класса загружаются средой выполнения .NET, когда загружается программа, которая ссылается на класс.</span><span class="sxs-lookup"><span data-stu-id="965d5-112">As is the case with all class types, the type information for a static class is loaded by the .NET runtime when the program that references the class is loaded.</span></span> <span data-ttu-id="965d5-113">Программа не может точно указать, когда загружается класс.</span><span class="sxs-lookup"><span data-stu-id="965d5-113">The program cannot specify exactly when the class is loaded.</span></span> <span data-ttu-id="965d5-114">Однако гарантируется загрузка этого класса, инициализация его полей и вызов статического конструктора перед первым обращением к классу в программе.</span><span class="sxs-lookup"><span data-stu-id="965d5-114">However, it is guaranteed to be loaded and to have its fields initialized and its static constructor called before the class is referenced for the first time in your program.</span></span> <span data-ttu-id="965d5-115">Статический конструктор вызывается только один раз, и статический класс остается в памяти на время существования домена приложения, в котором находится программа.</span><span class="sxs-lookup"><span data-stu-id="965d5-115">A static constructor is only called one time, and a static class remains in memory for the lifetime of the application domain in which your program resides.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="965d5-116">Создание нестатического класса, который допускает создание только одного экземпляра самого себя, см. в документе [Реализация Singleton в C#](https://docs.microsoft.com/previous-versions/msp-n-p/ff650316%28v=pandp.10%29).</span><span class="sxs-lookup"><span data-stu-id="965d5-116">To create a non-static class that allows only one instance of itself to be created, see [Implementing Singleton in C#](https://docs.microsoft.com/previous-versions/msp-n-p/ff650316%28v=pandp.10%29).</span></span>  
  
 <span data-ttu-id="965d5-117">Ниже приведены основные возможности статического класса.</span><span class="sxs-lookup"><span data-stu-id="965d5-117">The following list provides the main features of a static class:</span></span>  
  
- <span data-ttu-id="965d5-118">Содержит только статические члены.</span><span class="sxs-lookup"><span data-stu-id="965d5-118">Contains only static members.</span></span>  
  
- <span data-ttu-id="965d5-119">Создавать его экземпляры нельзя.</span><span class="sxs-lookup"><span data-stu-id="965d5-119">Cannot be instantiated.</span></span>  
  
- <span data-ttu-id="965d5-120">Является запечатанным.</span><span class="sxs-lookup"><span data-stu-id="965d5-120">Is sealed.</span></span>  
  
- <span data-ttu-id="965d5-121">Не может содержать [конструкторы экземпляров](./instance-constructors.md).</span><span class="sxs-lookup"><span data-stu-id="965d5-121">Cannot contain [Instance Constructors](./instance-constructors.md).</span></span>  
  
 <span data-ttu-id="965d5-122">По сути, создание статического класса аналогично созданию класса, содержащего только статические члены и закрытый конструктор.</span><span class="sxs-lookup"><span data-stu-id="965d5-122">Creating a static class is therefore basically the same as creating a class that contains only static members and a private constructor.</span></span> <span data-ttu-id="965d5-123">Закрытый конструктор не допускает создания экземпляров класса.</span><span class="sxs-lookup"><span data-stu-id="965d5-123">A private constructor prevents the class from being instantiated.</span></span> <span data-ttu-id="965d5-124">Преимущество применения статических классов заключается в том, что компилятор может проверить отсутствие случайно добавленных членов экземпляров.</span><span class="sxs-lookup"><span data-stu-id="965d5-124">The advantage of using a static class is that the compiler can check to make sure that no instance members are accidentally added.</span></span> <span data-ttu-id="965d5-125">Таким образом, компилятор гарантирует невозможность создания экземпляров таких классов.</span><span class="sxs-lookup"><span data-stu-id="965d5-125">The compiler will guarantee that instances of this class cannot be created.</span></span>  
  
 <span data-ttu-id="965d5-126">Статические классы запечатаны, поэтому их нельзя наследовать.</span><span class="sxs-lookup"><span data-stu-id="965d5-126">Static classes are sealed and therefore cannot be inherited.</span></span> <span data-ttu-id="965d5-127">Они не могут наследовать ни от каких классов, кроме <xref:System.Object>.</span><span class="sxs-lookup"><span data-stu-id="965d5-127">They cannot inherit from any class except <xref:System.Object>.</span></span> <span data-ttu-id="965d5-128">Статические классы не могут содержать конструктор экземпляров.</span><span class="sxs-lookup"><span data-stu-id="965d5-128">Static classes cannot contain an instance constructor.</span></span> <span data-ttu-id="965d5-129">Однако они могут содержать статический конструктор.</span><span class="sxs-lookup"><span data-stu-id="965d5-129">However, they can contain a static constructor.</span></span> <span data-ttu-id="965d5-130">Нестатические классы также должен определять статический конструктор, если класс содержит статические члены, для которых нужна нетривиальная инициализация.</span><span class="sxs-lookup"><span data-stu-id="965d5-130">Non-static classes should also define a static constructor if the class contains static members that require non-trivial initialization.</span></span> <span data-ttu-id="965d5-131">Дополнительные сведения см. в разделе [Статические конструкторы](./static-constructors.md).</span><span class="sxs-lookup"><span data-stu-id="965d5-131">For more information, see [Static Constructors](./static-constructors.md).</span></span>  
  
## <a name="example"></a><span data-ttu-id="965d5-132">Пример</span><span class="sxs-lookup"><span data-stu-id="965d5-132">Example</span></span>  
 <span data-ttu-id="965d5-133">Ниже приведен пример статического класса, содержащего два метода, преобразующих температуру по Цельсию в температуру по Фаренгейту и наоборот.</span><span class="sxs-lookup"><span data-stu-id="965d5-133">Here is an example of a static class that contains two methods that convert temperature from Celsius to Fahrenheit and from Fahrenheit to Celsius:</span></span>  
  
 [!code-csharp[csProgGuideObjects#31](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideObjects/CS/Objects.cs#31)]  
  
## <a name="static-members"></a><span data-ttu-id="965d5-134">Статический члены</span><span class="sxs-lookup"><span data-stu-id="965d5-134">Static Members</span></span>  
 <span data-ttu-id="965d5-135">Нестатический класс может содержать статические методы, поля, свойства или события.</span><span class="sxs-lookup"><span data-stu-id="965d5-135">A non-static class can contain static methods, fields, properties, or events.</span></span> <span data-ttu-id="965d5-136">Статический член вызывается для класса даже в том случае, если не создан экземпляр класса.</span><span class="sxs-lookup"><span data-stu-id="965d5-136">The static member is callable on a class even when no instance of the class has been created.</span></span> <span data-ttu-id="965d5-137">Доступ к статическому члены всегда выполняется по имени класса, а не экземпляра.</span><span class="sxs-lookup"><span data-stu-id="965d5-137">The static member is always accessed by the class name, not the instance name.</span></span> <span data-ttu-id="965d5-138">Существует только одна копия статического члена, независимо от того, сколько создано экземпляров класса.</span><span class="sxs-lookup"><span data-stu-id="965d5-138">Only one copy of a static member exists, regardless of how many instances of the class are created.</span></span> <span data-ttu-id="965d5-139">Статические методы и свойства не могут обращаться к нестатическим полям и событиям в их содержащем типе, и они не могут обращаться к переменной экземпляра объекта, если он не передается явно в параметре метода.</span><span class="sxs-lookup"><span data-stu-id="965d5-139">Static methods and properties cannot access non-static fields and events in their containing type, and they cannot access an instance variable of any object unless it's explicitly passed in a method parameter.</span></span>  
  
 <span data-ttu-id="965d5-140">Более привычно объявление нестатического класса с несколькими статическими членами, чем объявление всего класса как статического.</span><span class="sxs-lookup"><span data-stu-id="965d5-140">It is more typical to declare a non-static class with some static members, than to declare an entire class as static.</span></span> <span data-ttu-id="965d5-141">Статические поля обычно используются для следующих двух целей: хранение счетчика числа созданных объектов или хранение значения, которое должно совместно использоваться всеми экземплярами.</span><span class="sxs-lookup"><span data-stu-id="965d5-141">Two common uses of static fields are to keep a count of the number of objects that have been instantiated, or to store a value that must be shared among all instances.</span></span>  
  
 <span data-ttu-id="965d5-142">Статические методы могут быть перегружены, но не переопределены, поскольку они относятся к классу, а не к экземпляру класса.</span><span class="sxs-lookup"><span data-stu-id="965d5-142">Static methods can be overloaded but not overridden, because they belong to the class, and not to any instance of the class.</span></span>  
  
 <span data-ttu-id="965d5-143">Несмотря на то, что поле не может быть объявлено как `static const`, поле [const](../../language-reference/keywords/const.md) по своему поведению является статическим.</span><span class="sxs-lookup"><span data-stu-id="965d5-143">Although a field cannot be declared as `static const`, a [const](../../language-reference/keywords/const.md) field is essentially static in its behavior.</span></span> <span data-ttu-id="965d5-144">Он относится к типу, а не к экземплярам типа.</span><span class="sxs-lookup"><span data-stu-id="965d5-144">It belongs to the type, not to instances of the type.</span></span> <span data-ttu-id="965d5-145">Поэтому к полям `const` можно обращаться с использованием той же нотации `ClassName.MemberName`, что и для статических полей.</span><span class="sxs-lookup"><span data-stu-id="965d5-145">Therefore, `const` fields can be accessed by using the same `ClassName.MemberName` notation that's used for static fields.</span></span> <span data-ttu-id="965d5-146">Экземпляр объекта не требуется.</span><span class="sxs-lookup"><span data-stu-id="965d5-146">No object instance is required.</span></span>  
  
 <span data-ttu-id="965d5-147">C# не поддерживает статические локальные переменные (то есть переменные, объявленные в области действия метода).</span><span class="sxs-lookup"><span data-stu-id="965d5-147">C# does not support static local variables (that is, variables that are declared in method scope).</span></span>  
  
 <span data-ttu-id="965d5-148">Для объявления статических методов класса используется ключевое слово `static` перед возвращаемым типом члена, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="965d5-148">You declare static class members by using the `static` keyword before the return type of the member, as shown in the following example:</span></span>  
  
 [!code-csharp[csProgGuideObjects#29](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideObjects/CS/Objects.cs#29)]  
  
 <span data-ttu-id="965d5-149">Статические члены инициализируются перед первым доступом к статическому члену и перед вызовом статического конструктора, если таковой имеется.</span><span class="sxs-lookup"><span data-stu-id="965d5-149">Static members are initialized before the static member is accessed for the first time and before the static constructor, if there is one, is called.</span></span> <span data-ttu-id="965d5-150">Для доступа к члену статического класса следует использовать имя класса, а не имя переменной, указывая расположение члена, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="965d5-150">To access a static class member, use the name of the class instead of a variable name to specify the location of the member, as shown in the following example:</span></span>  
  
 [!code-csharp[csProgGuideObjects#30](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideObjects/CS/Objects.cs#30)]  
  
 <span data-ttu-id="965d5-151">Если класс содержит статические поля, должен быть указан статический конструктор, который инициализирует эти поля при загрузке класса.</span><span class="sxs-lookup"><span data-stu-id="965d5-151">If your class contains static fields, provide a static constructor that initializes them when the class is loaded.</span></span>  
  
 <span data-ttu-id="965d5-152">Вызов статического метода генерирует инструкцию вызова в промежуточном языке Microsoft (MSIL), в то время как вызов метода экземпляра генерирует инструкцию `callvirt`, которая также проверяет наличие ссылок на пустые объекты.</span><span class="sxs-lookup"><span data-stu-id="965d5-152">A call to a static method generates a call instruction in Microsoft intermediate language (MSIL), whereas a call to an instance method generates a `callvirt` instruction, which also checks for null object references.</span></span> <span data-ttu-id="965d5-153">Однако в большинстве случаев разница в производительности двух видов вызовов несущественна.</span><span class="sxs-lookup"><span data-stu-id="965d5-153">However, most of the time the performance difference between the two is not significant.</span></span>  
  
## <a name="c-language-specification"></a><span data-ttu-id="965d5-154">Спецификация языка C#</span><span class="sxs-lookup"><span data-stu-id="965d5-154">C# Language Specification</span></span>  

<span data-ttu-id="965d5-155">Дополнительные сведения см. в разделах [Статические классы](~/_csharplang/spec/classes.md#static-classes) и [Члены экземпляра и статические члены](~/_csharplang/spec/classes.md#static-and-instance-members) в документации [Предварительная спецификация C# 6.0](/dotnet/csharp/language-reference/language-specification/introduction).</span><span class="sxs-lookup"><span data-stu-id="965d5-155">For more information, see [Static classes](~/_csharplang/spec/classes.md#static-classes) and [Static and instance members](~/_csharplang/spec/classes.md#static-and-instance-members) in the [C# Language Specification](/dotnet/csharp/language-reference/language-specification/introduction).</span></span> <span data-ttu-id="965d5-156">Спецификация языка является предписывающим источником информации о синтаксисе и использовании языка C#.</span><span class="sxs-lookup"><span data-stu-id="965d5-156">The language specification is the definitive source for C# syntax and usage.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="965d5-157">См. также</span><span class="sxs-lookup"><span data-stu-id="965d5-157">See also</span></span>

- [<span data-ttu-id="965d5-158">Руководство по программированию на C#</span><span class="sxs-lookup"><span data-stu-id="965d5-158">C# Programming Guide</span></span>](../index.md)
- [<span data-ttu-id="965d5-159">static</span><span class="sxs-lookup"><span data-stu-id="965d5-159">static</span></span>](../../language-reference/keywords/static.md)
- [<span data-ttu-id="965d5-160">Классы</span><span class="sxs-lookup"><span data-stu-id="965d5-160">Classes</span></span>](./classes.md)
- [<span data-ttu-id="965d5-161">class</span><span class="sxs-lookup"><span data-stu-id="965d5-161">class</span></span>](../../language-reference/keywords/class.md)
- [<span data-ttu-id="965d5-162">Статические конструкторы</span><span class="sxs-lookup"><span data-stu-id="965d5-162">Static Constructors</span></span>](./static-constructors.md)
- [<span data-ttu-id="965d5-163">Конструкторы экземпляров</span><span class="sxs-lookup"><span data-stu-id="965d5-163">Instance Constructors</span></span>](./instance-constructors.md)
