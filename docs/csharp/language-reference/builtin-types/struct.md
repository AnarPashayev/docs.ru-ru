---
title: Типы структур — справочник по C#
ms.date: 02/24/2020
f1_keywords:
- struct_CSharpKeyword
helpviewer_keywords:
- struct keyword [C#]
- struct type [C#]
- structure type [C#]
ms.assetid: ff3dd9b7-dc93-4720-8855-ef5558f65c7c
ms.openlocfilehash: 6113912f176d2d7b68c77ff2e78a361b373ca31a
ms.sourcegitcommit: 44a7cd8687f227fc6db3211ccf4783dc20235e51
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/26/2020
ms.locfileid: "77634641"
---
# <a name="structure-types-c-reference"></a>Типы структур (справочник по C#)

*Тип структуры*  представляет собой [тип значения](value-types.md), который может инкапсулировать данные и связанные функции. Для определения типа структуры используется ключевое слово `struct`:

[!code-csharp[struct example](~/samples/csharp/language-reference/builtin-types/StructType.cs#StructExample)]

Типы структуры имеют *семантики значений*. То есть переменная типа структуры содержит экземпляр этого типа. По умолчанию значения переменных копируются при назначении, передаче аргумента в метод и возврате результата метода. В случае переменной типа структуры копируется экземпляр типа. Дополнительные сведения см. в разделе [Типы значений](value-types.md).

Как правило, типы структуры используются для проектирования небольших ориентированных на данные типов, которые предоставляют минимум поведения или не предоставляют его вовсе. Например, платформа .NET использует типы структуры для представления числа (как [целого](integral-numeric-types.md), так и [вещественного](floating-point-numeric-types.md)), [логического значения](bool.md), [символа Юникода](char.md), [экземпляра времени](xref:System.DateTime). Если вы сконцентрированы на поведении типа, рекомендуется определить [класс](../keywords/class.md). Типы классов имеют *семантики ссылок*. То есть переменная типа класса содержит ссылку на экземпляр этого типа, а не сам экземпляр.

## <a name="limitations-with-the-design-of-a-structure-type"></a>Ограничения при проектировании типа структуры

При проектировании типа структуры вы будете располагать теми же возможностями, что и для типа [класса](../keywords/class.md), за исключением следующих аспектов:

- Вы не можете объявить конструктор без параметров. Каждый тип структуры уже предоставляет неявный конструктор без параметров, который создает [значение по умолчанию](default-values.md) типа.

- Вы не можете инициализировать поле экземпляра или свойство при его объявлении. Однако можно инициализировать [статическое](../keywords/static.md) поле или поле [константы](../keywords/const.md) или статическое свойство при его объявлении.

- Конструктор типа структуры должен инициализировать все поля экземпляров данного типа.

- Тип структуры не может наследовать от другого типа класса или структуры и не может быть базовым для класса. Однако тип структуры может реализовывать [интерфейсы](../keywords/interface.md).

- Вы не можете объявить [метод завершения](../../programming-guide/classes-and-structs/destructors.md) в типе структуры.

## <a name="instantiation-of-a-structure-type"></a>Создание экземпляра типа структуры

В C# необходимо инициализировать объявленную переменную, прежде чем ее можно будет использовать. Так как переменная типа структуры не может быть `null` (если только это не переменная [типа значения, допускающего значение NULL](nullable-value-types.md)), необходимо создать экземпляр соответствующего типа. Для этого можно использовать несколько способов.

Как правило, экземпляр типа структуры создается посредством вызова соответствующего конструктора с помощью оператора [`new`](../operators/new-operator.md). Каждый тип структуры имеет по крайней мере один конструктор. Это неявный конструктор без параметров, который создает [значение по умолчанию](default-values.md) данного типа. Можно использовать оператор или литерал [по умолчанию](../operators/default.md) для создания значения по умолчанию для типа.

Если все поля экземпляров типа структуры доступны, можно также создать его экземпляр без оператора `new`. В этом случае необходимо инициализировать все поля экземпляров перед первым использованием экземпляра. Следующий пример показывает, как это сделать:

[!code-csharp[without new](~/samples/csharp/language-reference/builtin-types/StructType.cs#WithoutNew)]

В случае [встроенных типов значения](value-types.md#built-in-value-types) используйте соответствующие литералы, чтобы указать значение типа.

## <a name="passing-structure-type-variables-by-reference"></a>Передача переменных типа структуры по ссылке

При передаче переменной типа структуры в метод в качестве аргумента или возврате значения типа структуры из метода копируется весь экземпляр типа структуры. Это может повлиять на производительность кода в высокопроизводительных сценариях, где используются большие типы структуры. Копирования значений можно избежать, передав переменную типа структуры по ссылке. Используйте модификаторы параметра метода [`ref`](../keywords/ref.md#passing-an-argument-by-reference), [`out`](../keywords/out-parameter-modifier.md) или [`in`](../keywords/in-parameter-modifier.md), чтобы указать, что аргумент должен передаваться по ссылке. Чтобы возвратить результат метода по ссылке, используйте [ref returns](../../programming-guide/classes-and-structs/ref-returns.md). Дополнительные сведения см. в статье [Написание безопасного и эффективного кода C#](../../write-safe-efficient-code.md).

## <a name="conversions"></a>Преобразования

Для любого типа структуры существует [упаковка-преобразование и распаковка-преобразование](../../programming-guide/types/boxing-and-unboxing.md) в типы <xref:System.ValueType?displayProperty=nameWithType> и <xref:System.Object?displayProperty=nameWithType> и из них. Существуют упаковка-преобразование и распаковка-преобразование между типом структуры и любым интерфейсом, который он реализует.

## <a name="c-language-specification"></a>Спецификация языка C#

Дополнительные сведения см. в разделе [Структуры](~/_csharplang/spec/structs.md) в [спецификации языка C#](~/_csharplang/spec/introduction.md).

## <a name="see-also"></a>См. также

- [справочник по C#](../index.md)
- [Рекомендации по проектированию — выбор между классом и структурой](../../../standard/design-guidelines/choosing-between-class-and-struct.md)
- [Рекомендации по проектированию — проектирование структуры](../../../standard/design-guidelines/struct.md)
- [Классы и структуры](../../programming-guide/classes-and-structs/index.md)
