---
title: Выбор версии языка C#. Руководство по C#
description: Настройка компилятора для выполнения проверки синтаксиса с помощью конкретной версии компилятора
ms.date: 02/28/2019
ms.openlocfilehash: feb3e51a107f9830071b55c7985f202edc842f4a
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2019
ms.locfileid: "59770884"
---
# <a name="select-the-c-language-version"></a><span data-ttu-id="1161a-103">Выбор версии языка C#</span><span class="sxs-lookup"><span data-stu-id="1161a-103">Select the C# language version</span></span>

<span data-ttu-id="1161a-104">Компилятор C# определяет версию языка по умолчанию на основе целевой платформы или платформ проекта.</span><span class="sxs-lookup"><span data-stu-id="1161a-104">The C# compiler determines a default language version based on your project's target framework or frameworks.</span></span> <span data-ttu-id="1161a-105">Если проект предназначен для платформы в предварительной версии с поддержкой соответствующего языка в предварительной версии, будет использоваться язык, поддерживаемый в предварительной версии.</span><span class="sxs-lookup"><span data-stu-id="1161a-105">When your project targets a preview framework that has a corresponding preview language version, the language version used is the preview language version.</span></span> <span data-ttu-id="1161a-106">Если же проект не предназначен для платформы в предварительной версии, используется последняя дополнительная версия.</span><span class="sxs-lookup"><span data-stu-id="1161a-106">When your project doesn't target a preview framework, the language version used is the latest minor version.</span></span>

<span data-ttu-id="1161a-107">Например, в период действия предварительной версии .NET Core 3.0 в любом проекте, предназначенном для `netcoreapp3.0` или `netstandard2.1` (поддерживаются в предварительной версии), будет использоваться язык C# 8.0 (также в предварительной версии).</span><span class="sxs-lookup"><span data-stu-id="1161a-107">For example, during the preview period for .NET Core 3.0, any project that targets `netcoreapp3.0` or `netstandard2.1` (both in preview) will use the C# 8.0 language (also in preview).</span></span> <span data-ttu-id="1161a-108">В проектах, предназначенных для любой выпущенной версии, будет использоваться C# 7.3 (последняя выпущенная версия).</span><span class="sxs-lookup"><span data-stu-id="1161a-108">Projects targeting any released version will use C# 7.3 (the latest released version).</span></span> <span data-ttu-id="1161a-109">Это означает, что в любом проекте, предназначенном для .NET Framework будет использоваться последняя версия (C# 7.3).</span><span class="sxs-lookup"><span data-stu-id="1161a-109">This behavior means that any project targeting .NET Framework will use latest (C# 7.3).</span></span> 

<span data-ttu-id="1161a-110">Эта возможность разделяет установку новых версий пакета SDK и средств в среде разработки и включение новых возможностей языка в проект.</span><span class="sxs-lookup"><span data-stu-id="1161a-110">This capability decouples the decision to install new versions of the SDK and tools in your development environment from the decision to incorporate new language features in a project.</span></span> <span data-ttu-id="1161a-111">Вы можете установить последнюю версию пакета SDK и средств на компьютер сборки.</span><span class="sxs-lookup"><span data-stu-id="1161a-111">You can install the latest SDK and tools on your build machine.</span></span> <span data-ttu-id="1161a-112">В каждом проекте можно настроить использование определенной версии языка для сборки.</span><span class="sxs-lookup"><span data-stu-id="1161a-112">Each project can be configured to use a specific version of the language for its build.</span></span> <span data-ttu-id="1161a-113">По умолчанию любые функции языка, основанные на новых типах или новом поведении среды CLR, будут включены, только если проекты предназначены для этих платформ.</span><span class="sxs-lookup"><span data-stu-id="1161a-113">The default behavior means that any language features that rely on new types or new CLR behavior are enabled only when projects target those frameworks.</span></span>

<span data-ttu-id="1161a-114">Поведение по умолчанию можно переопределить, указав версию языка.</span><span class="sxs-lookup"><span data-stu-id="1161a-114">You can override the default behavior by specifying a language version.</span></span> <span data-ttu-id="1161a-115">Существует несколько способов задания языковой версии:</span><span class="sxs-lookup"><span data-stu-id="1161a-115">There are several ways to set the language version:</span></span>

- <span data-ttu-id="1161a-116">использование [быстрого действия Visual Studio](#visual-studio-quick-action);</span><span class="sxs-lookup"><span data-stu-id="1161a-116">Rely on a [Visual Studio quick action](#visual-studio-quick-action).</span></span>
- <span data-ttu-id="1161a-117">установка версии языка в [пользовательском интерфейсе Visual Studio](#set-the-language-version-in-visual-studio);</span><span class="sxs-lookup"><span data-stu-id="1161a-117">Set the language version in the [Visual Studio UI](#set-the-language-version-in-visual-studio).</span></span>
- <span data-ttu-id="1161a-118">ручное редактирование [**CSPROJ**-файла](#edit-the-csproj-file);</span><span class="sxs-lookup"><span data-stu-id="1161a-118">Manually edit your [**.csproj** file](#edit-the-csproj-file).</span></span>
- <span data-ttu-id="1161a-119">задание языковой версии [для нескольких проектов в подкаталоге](#configure-multiple-projects);</span><span class="sxs-lookup"><span data-stu-id="1161a-119">Set the language version [for multiple projects in a subdirectory](#configure-multiple-projects).</span></span>
- <span data-ttu-id="1161a-120">настройка [параметра компилятора `-langversion`](#set-the-langversion-compiler-option).</span><span class="sxs-lookup"><span data-stu-id="1161a-120">Configure the [`-langversion` compiler option](#set-the-langversion-compiler-option).</span></span>

## <a name="visual-studio-quick-action"></a><span data-ttu-id="1161a-121">Быстрое действие Visual Studio</span><span class="sxs-lookup"><span data-stu-id="1161a-121">Visual Studio quick action</span></span>

<span data-ttu-id="1161a-122">Visual Studio позволяет определить требуемую версию языка.</span><span class="sxs-lookup"><span data-stu-id="1161a-122">Visual Studio helps you determine the language version you need.</span></span> <span data-ttu-id="1161a-123">При использовании функции языка, которая недоступна для текущей выбранной версии, Visual Studio отображает возможное решение для изменения версии языка для проекта.</span><span class="sxs-lookup"><span data-stu-id="1161a-123">If you use a language feature that is not available for the currently configured version, Visual Studio shows a potential fix to update the language version for the project.</span></span>

## <a name="set-the-language-version-in-visual-studio"></a><span data-ttu-id="1161a-124">Установка версии языка в Visual Studio</span><span class="sxs-lookup"><span data-stu-id="1161a-124">Set the language version in Visual Studio</span></span>

<span data-ttu-id="1161a-125">Вы можете задать версию в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1161a-125">You can set the version in Visual Studio.</span></span> <span data-ttu-id="1161a-126">В обозревателе решений щелкните узел проекта правой кнопкой мыши и выберите пункт **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="1161a-126">Right-click on the project node in Solution Explorer and select **Properties**.</span></span> <span data-ttu-id="1161a-127">Откройте вкладку **Сборка** и нажмите на кнопку **Дополнительно**.</span><span class="sxs-lookup"><span data-stu-id="1161a-127">Select the **Build** tab and select the **Advanced** button.</span></span> <span data-ttu-id="1161a-128">В раскрывающемся списке выберите версию.</span><span class="sxs-lookup"><span data-stu-id="1161a-128">In the dropdown, select the version.</span></span> <span data-ttu-id="1161a-129">На следующем рисунке показаны "последние" параметры:</span><span class="sxs-lookup"><span data-stu-id="1161a-129">The following image shows the "latest" setting:</span></span>

![Снимок экрана: дополнительные параметры сборки, в которых можно указать версию языка](./media/configure-language-version/advanced-build-settings.png)

> [!NOTE]
> <span data-ttu-id="1161a-131">Если вы используете интегрированную среду разработки Visual Studio для обновления CSPROJ-файлов, IDE создает отдельные узлы для каждой конфигурации сборки.</span><span class="sxs-lookup"><span data-stu-id="1161a-131">If you use the Visual Studio IDE to update your csproj files, the IDE creates separate nodes for each build configuration.</span></span> <span data-ttu-id="1161a-132">Как правило, вы устанавливаете одинаковое значение во всех конфигурациях сборки, но необходимо задать его явным образом для каждой конфигурации сборки или выбрать "Все конфигурации" при изменении этого параметра.</span><span class="sxs-lookup"><span data-stu-id="1161a-132">You'll typically set the value the same in all build configurations, but you need to set it explicitly for each build configuration, or select "All Configurations" when you modify this setting.</span></span> <span data-ttu-id="1161a-133">В CSPROJ-файле вы увидите следующий код:</span><span class="sxs-lookup"><span data-stu-id="1161a-133">You'll see the following in your csproj file:</span></span>
>
>```xml
> <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|AnyCPU'">
>  <LangVersion>latest</LangVersion>
></PropertyGroup>
>
> <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
>  <LangVersion>latest</LangVersion>
> </PropertyGroup>
> ```
>

## <a name="edit-the-csproj-file"></a><span data-ttu-id="1161a-134">Редактирование CSPROJ-файла</span><span class="sxs-lookup"><span data-stu-id="1161a-134">Edit the csproj file</span></span>

<span data-ttu-id="1161a-135">Версию языка можно задать в **CSPROJ**-файле.</span><span class="sxs-lookup"><span data-stu-id="1161a-135">You can set the language version in your **.csproj** file.</span></span> <span data-ttu-id="1161a-136">Добавьте элемент следующим образом:</span><span class="sxs-lookup"><span data-stu-id="1161a-136">Add an element like the following:</span></span>

```xml
<PropertyGroup>
   <LangVersion>latest</LangVersion>
</PropertyGroup>
```

<span data-ttu-id="1161a-137">Значение параметра `latest` использует последнюю дополнительную версию языка C#.</span><span class="sxs-lookup"><span data-stu-id="1161a-137">The value `latest` uses the latest minor version of the C# language.</span></span> <span data-ttu-id="1161a-138">Допустимые значения:</span><span class="sxs-lookup"><span data-stu-id="1161a-138">Valid values are:</span></span>

|<span data-ttu-id="1161a-139">Значение</span><span class="sxs-lookup"><span data-stu-id="1161a-139">Value</span></span>|<span data-ttu-id="1161a-140">Значение</span><span class="sxs-lookup"><span data-stu-id="1161a-140">Meaning</span></span>|
|------------|-------------|
|<span data-ttu-id="1161a-141">preview</span><span class="sxs-lookup"><span data-stu-id="1161a-141">preview</span></span>|<span data-ttu-id="1161a-142">Компилятор допускает использование любого допустимого синтаксиса языка из последней предварительной версии.</span><span class="sxs-lookup"><span data-stu-id="1161a-142">The compiler accepts all valid language syntax from the latest preview version.</span></span>|
|<span data-ttu-id="1161a-143">latest</span><span class="sxs-lookup"><span data-stu-id="1161a-143">latest</span></span>|<span data-ttu-id="1161a-144">Компилятор принимает синтаксис из последней выпущенной версии компилятора (включая дополнительный номер версии).</span><span class="sxs-lookup"><span data-stu-id="1161a-144">The compiler accepts syntax from the latest released version of the compiler (including minor version).</span></span>|
|<span data-ttu-id="1161a-145">latestMajor</span><span class="sxs-lookup"><span data-stu-id="1161a-145">latestMajor</span></span>|<span data-ttu-id="1161a-146">Компилятор принимает синтаксис из последней основной версии компилятора.</span><span class="sxs-lookup"><span data-stu-id="1161a-146">The compiler accepts syntax from the latest released major version of the compiler.</span></span>|
|<span data-ttu-id="1161a-147">8.0</span><span class="sxs-lookup"><span data-stu-id="1161a-147">8.0</span></span>|<span data-ttu-id="1161a-148">Компилятор принимает только синтаксис, включенный в спецификацию C# 8.0 или более ранней версии.</span><span class="sxs-lookup"><span data-stu-id="1161a-148">The compiler accepts only syntax that is included in C# 8.0 or lower.</span></span>|
|<span data-ttu-id="1161a-149">7.3</span><span class="sxs-lookup"><span data-stu-id="1161a-149">7.3</span></span>|<span data-ttu-id="1161a-150">Компилятор принимает только синтаксис, включенный в спецификацию C# 7.3 или более ранней версии.</span><span class="sxs-lookup"><span data-stu-id="1161a-150">The compiler accepts only syntax that is included in C# 7.3 or lower.</span></span>|
|<span data-ttu-id="1161a-151">7.2</span><span class="sxs-lookup"><span data-stu-id="1161a-151">7.2</span></span>|<span data-ttu-id="1161a-152">Компилятор принимает только синтаксис, включенный в спецификацию C# 7.2 или более ранней версии.</span><span class="sxs-lookup"><span data-stu-id="1161a-152">The compiler accepts only syntax that is included in C# 7.2 or lower.</span></span>|
|<span data-ttu-id="1161a-153">7.1</span><span class="sxs-lookup"><span data-stu-id="1161a-153">7.1</span></span>|<span data-ttu-id="1161a-154">Компилятор принимает только синтаксис, включенный в спецификацию C# 7.1 или более ранней версии.</span><span class="sxs-lookup"><span data-stu-id="1161a-154">The compiler accepts only syntax that is included in C# 7.1 or lower.</span></span>|
|<span data-ttu-id="1161a-155">7</span><span class="sxs-lookup"><span data-stu-id="1161a-155">7</span></span>|<span data-ttu-id="1161a-156">Компилятор принимает только синтаксис, включенный в спецификацию C# 7.0 или более ранней версии.</span><span class="sxs-lookup"><span data-stu-id="1161a-156">The compiler accepts only syntax that is included in C# 7.0 or lower.</span></span>|
|<span data-ttu-id="1161a-157">6</span><span class="sxs-lookup"><span data-stu-id="1161a-157">6</span></span>|<span data-ttu-id="1161a-158">Компилятор принимает только синтаксис, включенный в спецификацию C# 6.0 или более ранней версии.</span><span class="sxs-lookup"><span data-stu-id="1161a-158">The compiler accepts only syntax that is included in C# 6.0 or lower.</span></span>|
|<span data-ttu-id="1161a-159">5</span><span class="sxs-lookup"><span data-stu-id="1161a-159">5</span></span>|<span data-ttu-id="1161a-160">Компилятор принимает только синтаксис, включенный в спецификацию C# 5.0 или более ранней версии.</span><span class="sxs-lookup"><span data-stu-id="1161a-160">The compiler accepts only syntax that is included in C# 5.0 or lower.</span></span>|
|<span data-ttu-id="1161a-161">4</span><span class="sxs-lookup"><span data-stu-id="1161a-161">4</span></span>|<span data-ttu-id="1161a-162">Компилятор принимает только синтаксис, включенный в спецификацию C# 4.0 или более ранней версии.</span><span class="sxs-lookup"><span data-stu-id="1161a-162">The compiler accepts only syntax that is included in C# 4.0 or lower.</span></span>|
|<span data-ttu-id="1161a-163">3</span><span class="sxs-lookup"><span data-stu-id="1161a-163">3</span></span>|<span data-ttu-id="1161a-164">Компилятор принимает только синтаксис, включенный в спецификацию C# 3.0 или более ранней версии.</span><span class="sxs-lookup"><span data-stu-id="1161a-164">The compiler accepts only syntax that is included in C# 3.0 or lower.</span></span>|
|<span data-ttu-id="1161a-165">ISO-2</span><span class="sxs-lookup"><span data-stu-id="1161a-165">ISO-2</span></span>|<span data-ttu-id="1161a-166">Компилятор принимает только синтаксис, включенный в спецификацию ISO/IEC 23270:2006 C# (2.0)</span><span class="sxs-lookup"><span data-stu-id="1161a-166">The compiler accepts only syntax that is included in ISO/IEC 23270:2006 C# (2.0)</span></span> |
|<span data-ttu-id="1161a-167">ISO-1</span><span class="sxs-lookup"><span data-stu-id="1161a-167">ISO-1</span></span>|<span data-ttu-id="1161a-168">Компилятор принимает только синтаксис, включенный в спецификацию ISO/IEC 23270:2003 C# (1.0/1.2)</span><span class="sxs-lookup"><span data-stu-id="1161a-168">The compiler accepts only syntax that is included in ISO/IEC 23270:2003 C# (1.0/1.2)</span></span> |

## <a name="configure-multiple-projects"></a><span data-ttu-id="1161a-169">Настройка нескольких проектов</span><span class="sxs-lookup"><span data-stu-id="1161a-169">Configure multiple projects</span></span>

<span data-ttu-id="1161a-170">Можно создать файл **Directory.Build.props**, содержащий элемент `<LangVersion>`, чтобы настроить несколько каталогов.</span><span class="sxs-lookup"><span data-stu-id="1161a-170">You can create a **Directory.Build.props** file that contains the `<LangVersion>` element to configure multiple directories.</span></span> <span data-ttu-id="1161a-171">Обычно это делается в каталоге решения.</span><span class="sxs-lookup"><span data-stu-id="1161a-171">You typically do that in your solution directory.</span></span> <span data-ttu-id="1161a-172">Добавьте следующий код в файл **Directory.Build.props** в каталоге решения:</span><span class="sxs-lookup"><span data-stu-id="1161a-172">Add the following to a **Directory.Build.props** file in your solution directory:</span></span>

```xml
<Project>
 <PropertyGroup>
   <LangVersion>7.3</LangVersion>
 </PropertyGroup>
</Project>
```

<span data-ttu-id="1161a-173">Теперь сборки в каждом подкаталоге каталога, который содержит этот файл, будут использовать синтаксис C# версии 7.3.</span><span class="sxs-lookup"><span data-stu-id="1161a-173">Now, builds in every subdirectory of the directory containing that file will use C# version 7.3 syntax.</span></span> <span data-ttu-id="1161a-174">Дополнительные сведения см. в статье о [настройке сборки](/visualstudio/msbuild/customize-your-build).</span><span class="sxs-lookup"><span data-stu-id="1161a-174">For more information, see the article on [Customize your build](/visualstudio/msbuild/customize-your-build).</span></span>

## <a name="set-the-langversion-compiler-option"></a><span data-ttu-id="1161a-175">Задание параметра компилятора langversion</span><span class="sxs-lookup"><span data-stu-id="1161a-175">Set the langversion compiler option</span></span>

<span data-ttu-id="1161a-176">Вы можете использовать параметр командной строки `-langversion`.</span><span class="sxs-lookup"><span data-stu-id="1161a-176">You can use the `-langversion` command-line option.</span></span> <span data-ttu-id="1161a-177">Дополнительные сведения см. в статье, посвященной параметру компилятора [-langversion](../language-reference/compiler-options/langversion-compiler-option.md).</span><span class="sxs-lookup"><span data-stu-id="1161a-177">For more information, see the article on the [-langversion](../language-reference/compiler-options/langversion-compiler-option.md) compiler option.</span></span> <span data-ttu-id="1161a-178">Чтобы просмотреть список допустимых значений, введите `csc -langversion:?`.</span><span class="sxs-lookup"><span data-stu-id="1161a-178">You can see a list of the valid values by typing  `csc -langversion:?`.</span></span>
