---
title: Стили и шаблоны
description: Сведения о ресурсах XAML в Windows Presentation Foundation (WPF) для .NET Core. Ознакомьтесь с общими сведениями о типах ресурсов XAML, связанных со стилями и темами.
author: adegeo
ms.author: adegeo
ms.date: 09/09/2019
dev_langs:
- csharp
- vb
ms.openlocfilehash: faa54e0a3c827717114ca6ca4f033c1c4c3acfa8
ms.sourcegitcommit: dc2feef0794cf41dbac1451a13b8183258566c0e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/24/2020
ms.locfileid: "85325784"
---
# <a name="styles-and-templates-in-wpf"></a><span data-ttu-id="2edea-104">Стили и шаблоны в WPF</span><span class="sxs-lookup"><span data-stu-id="2edea-104">Styles and templates in WPF</span></span>

<span data-ttu-id="2edea-105">Стилизация и использование шаблонов Windows Presentation Foundation (WPF) относятся к набору возможностей, которые позволяют разработчикам и дизайнерам создавать визуально привлекательные эффекты и согласованный внешний вид своих продуктов.</span><span class="sxs-lookup"><span data-stu-id="2edea-105">Windows Presentation Foundation (WPF) styling and templating refer to a suite of features that let developers and designers create visually compelling effects and a consistent appearance for their product.</span></span> <span data-ttu-id="2edea-106">При настройке внешнего вида приложения необходима строгая модель стилизации и шаблонов, обеспечивающая обслуживание и совместное использование внешнего вида в приложениях и между ними.</span><span class="sxs-lookup"><span data-stu-id="2edea-106">When customizing the appearance of an app, you want a strong styling and templating model that enables maintenance and sharing of appearance within and among apps.</span></span> <span data-ttu-id="2edea-107">WPF предоставляет такую модель.</span><span class="sxs-lookup"><span data-stu-id="2edea-107">WPF provides that model.</span></span>

<span data-ttu-id="2edea-108">Еще одной возможностью модели стилизации WPF является разделение представления и логики.</span><span class="sxs-lookup"><span data-stu-id="2edea-108">Another feature of the WPF styling model is the separation of presentation and logic.</span></span> <span data-ttu-id="2edea-109">Дизайнеры могут создавать внешний вид приложения только с помощью XAML в то же самое время, когда разработчики работают над логикой программы, используя языки C# или Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="2edea-109">Designers can work on the appearance of an app by using only XAML at the same time that developers work on the programming logic by using C# or Visual Basic.</span></span>

<span data-ttu-id="2edea-110">В этом обзоре основное внимание уделяется аспектам стилизации и использования шаблонов приложения и не рассматриваются концепции привязки данных.</span><span class="sxs-lookup"><span data-stu-id="2edea-110">This overview focuses on the styling and templating aspects of the app and doesn't discuss any data-binding concepts.</span></span> <span data-ttu-id="2edea-111">Подробнее о привязке данных см. в разделе [Общие сведения о привязке данных](../data/data-binding-overview.md).</span><span class="sxs-lookup"><span data-stu-id="2edea-111">For information about data binding, see [Data Binding Overview](../data/data-binding-overview.md).</span></span>

<span data-ttu-id="2edea-112">Важно иметь представление о ресурсах, которые позволяют повторно использовать стили и шаблоны.</span><span class="sxs-lookup"><span data-stu-id="2edea-112">It's important to understand resources, which are what enable styles and templates to be reused.</span></span> <span data-ttu-id="2edea-113">Дополнительные сведения о ресурсах см. в разделе [Ресурсы XAML](xaml-resources-define.md).</span><span class="sxs-lookup"><span data-stu-id="2edea-113">For more information about resources, see [XAML Resources](xaml-resources-define.md).</span></span>

[!INCLUDE [desktop guide under construction](../../../includes/desktop-guide-preview-note.md)]

## <a name="sample"></a><span data-ttu-id="2edea-114">Пример</span><span class="sxs-lookup"><span data-stu-id="2edea-114">Sample</span></span>

<span data-ttu-id="2edea-115">В примере кода, приведенного в этом обзоре, используется [простое приложение для просмотра фотографий](https://github.com/Microsoft/WPF-Samples/tree/master/Styles%20&%20Templates/IntroToStylingAndTemplating), показанное ниже.</span><span class="sxs-lookup"><span data-stu-id="2edea-115">The sample code provided in this overview is based on a [simple photo browsing application](https://github.com/Microsoft/WPF-Samples/tree/master/Styles%20&%20Templates/IntroToStylingAndTemplating) shown in the following illustration.</span></span>

<span data-ttu-id="2edea-116">![Стилизированный ListView](./media/styles-and-templates-overview/stylingintro-triggers.png "StylingIntro_triggers")</span><span class="sxs-lookup"><span data-stu-id="2edea-116">![Styled ListView](./media/styles-and-templates-overview/stylingintro-triggers.png "StylingIntro_triggers")</span></span>

<span data-ttu-id="2edea-117">В этом простом примере фото стилизация и шаблоны применяются для создания привлекательного интерфейса.</span><span class="sxs-lookup"><span data-stu-id="2edea-117">This simple photo sample uses styling and templating to create a visually compelling user experience.</span></span> <span data-ttu-id="2edea-118">Пример содержит два элемента <xref:System.Windows.Controls.TextBlock> и элемент управления <xref:System.Windows.Controls.ListBox>, привязанный к списку изображений.</span><span class="sxs-lookup"><span data-stu-id="2edea-118">The sample has two <xref:System.Windows.Controls.TextBlock> elements and a <xref:System.Windows.Controls.ListBox> control that is bound to a list of images.</span></span>

<span data-ttu-id="2edea-119">Полный пример см. в разделе [Вводная часть примера стилизации и использования шаблонов](https://github.com/Microsoft/WPF-Samples/tree/master/Styles%20&%20Templates/IntroToStylingAndTemplating).</span><span class="sxs-lookup"><span data-stu-id="2edea-119">For the complete sample, see [Introduction to Styling and Templating Sample](https://github.com/Microsoft/WPF-Samples/tree/master/Styles%20&%20Templates/IntroToStylingAndTemplating).</span></span>

## <a name="styles"></a><span data-ttu-id="2edea-120">Стили</span><span class="sxs-lookup"><span data-stu-id="2edea-120">Styles</span></span>

<span data-ttu-id="2edea-121">Элемент <xref:System.Windows.Style> можно рассматривать как удобный способ применения набора значений свойств к нескольким элементам.</span><span class="sxs-lookup"><span data-stu-id="2edea-121">You can think of a <xref:System.Windows.Style> as a convenient way to apply a set of property values to multiple elements.</span></span> <span data-ttu-id="2edea-122">Стиль можно использовать для любого элемента, производного от <xref:System.Windows.FrameworkElement> или <xref:System.Windows.FrameworkContentElement>, например <xref:System.Windows.Window> или <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="2edea-122">You can use a style on any element that derives from <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement> such as a <xref:System.Windows.Window> or a <xref:System.Windows.Controls.Button>.</span></span>

<span data-ttu-id="2edea-123">Чаще всего стиль объявляется как ресурс в разделе `Resources` файла XAML.</span><span class="sxs-lookup"><span data-stu-id="2edea-123">The most common way to declare a style is as a resource in the `Resources` section in a XAML file.</span></span> <span data-ttu-id="2edea-124">Так как стили являются ресурсами, для них действуют те же правила определения области, что и для всех других ресурсов.</span><span class="sxs-lookup"><span data-stu-id="2edea-124">Because styles are resources, they obey the same scoping rules that apply to all resources.</span></span> <span data-ttu-id="2edea-125">Проще говоря, то, где вы объявляете стиль, влияет на то, где этот стиль может быть применен.</span><span class="sxs-lookup"><span data-stu-id="2edea-125">Put simply, where you declare a style affects where the style can be applied.</span></span> <span data-ttu-id="2edea-126">Например, если объявить стиль в корневом элементе файла XAML определения приложения, стиль может использоваться в любом месте приложения.</span><span class="sxs-lookup"><span data-stu-id="2edea-126">For example, if you declare the style in the root element of your app definition XAML file, the style can be used anywhere in your app.</span></span>

<span data-ttu-id="2edea-127">Например, в следующем коде XAML объявляются два стиля для `TextBlock`, один из которых автоматически применяется ко всем элементам `TextBlock`, а для другого необходимы явные ссылки.</span><span class="sxs-lookup"><span data-stu-id="2edea-127">For example, the following XAML code declares two styles for a `TextBlock`, one automatically applied to all `TextBlock` elements, and another that must be explicitly referenced.</span></span>

[!code-xaml[SnippetDefaultTextBlockStyleBasedOn](~/samples/snippets/desktop-guide/wpf/styles-and-templates-intro/csharp/Window2.xaml#SnippetDefaultTextBlockStyleBasedOn)]

<span data-ttu-id="2edea-128">Ниже приведен пример стилей, объявленных выше.</span><span class="sxs-lookup"><span data-stu-id="2edea-128">Here is an example of the styles declared above being used.</span></span>

[!code-xaml[SnippetTextBlocksExplicit](~/samples/snippets/desktop-guide/wpf/styles-and-templates-intro/csharp/Window2.xaml#SnippetTextBlocksExplicit)]

![TextBlock со стилизацией](./media/styles-and-templates-overview/stylingintro-textblocks.png)

<span data-ttu-id="2edea-130">Дополнительные сведения см. в статье [Создание стиля элемента управления в WPF](styles-templates-create-apply-style.md).</span><span class="sxs-lookup"><span data-stu-id="2edea-130">For more information, see [Create a style for a control](styles-templates-create-apply-style.md).</span></span>

## <a name="controltemplates"></a><span data-ttu-id="2edea-131">ControlTemplates</span><span class="sxs-lookup"><span data-stu-id="2edea-131">ControlTemplates</span></span>

<span data-ttu-id="2edea-132">В WPF <xref:System.Windows.Controls.ControlTemplate> элемента управления определяет внешний вид этого элемента управления.</span><span class="sxs-lookup"><span data-stu-id="2edea-132">In WPF, the <xref:System.Windows.Controls.ControlTemplate> of a control defines the appearance of the control.</span></span> <span data-ttu-id="2edea-133">Структуру и внешний вид элемента управления можно изменить, определив и назначив для него новый объект <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="2edea-133">You can change the structure and appearance of a control by defining a new <xref:System.Windows.Controls.ControlTemplate> and assigning it to a control.</span></span> <span data-ttu-id="2edea-134">Во многих случаях шаблоны являются достаточно гибким средством, и вам не придется писать собственные пользовательские элементы управления.</span><span class="sxs-lookup"><span data-stu-id="2edea-134">In many cases, templates give you enough flexibility so that you do not have to write your own custom controls.</span></span>

<span data-ttu-id="2edea-135">Каждый элемент управления имеет шаблон по умолчанию, назначенный свойству [Control.Template](xref:System.Windows.Controls.Control.Template).</span><span class="sxs-lookup"><span data-stu-id="2edea-135">Each control has a default template assigned to the [Control.Template](xref:System.Windows.Controls.Control.Template) property.</span></span> <span data-ttu-id="2edea-136">Шаблон соединяет визуальное представление элемента управления с его возможностями.</span><span class="sxs-lookup"><span data-stu-id="2edea-136">The template connects the visual presentation of the control with the control's capabilities.</span></span> <span data-ttu-id="2edea-137">Путем определения шаблона в XAML можно изменить внешний вид элемента управления без написания какого-либо кода.</span><span class="sxs-lookup"><span data-stu-id="2edea-137">Because you define a template in XAML, you can change the control's appearance without writing any code.</span></span> <span data-ttu-id="2edea-138">Каждый шаблон предназначен для конкретного элемента управления, например <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="2edea-138">Each template is designed for a specific control, such as a <xref:System.Windows.Controls.Button>.</span></span>

<span data-ttu-id="2edea-139">Обычно шаблон объявляется как ресурс в разделе `Resources` файла XAML.</span><span class="sxs-lookup"><span data-stu-id="2edea-139">Commonly you declare a template as a resource on the `Resources` section of a XAML file.</span></span> <span data-ttu-id="2edea-140">Как и для всех ресурсов применяются правила области.</span><span class="sxs-lookup"><span data-stu-id="2edea-140">As with all resources, scoping rules apply.</span></span>

<span data-ttu-id="2edea-141">Шаблоны элементов управления более сложные, чем стиль.</span><span class="sxs-lookup"><span data-stu-id="2edea-141">Control templates are a lot more involved than a style.</span></span> <span data-ttu-id="2edea-142">Это связано с тем, что шаблон элемента управления перезаписывает весь его внешний вид, в то время как стиль просто применяет изменения свойств к существующему элементу управления.</span><span class="sxs-lookup"><span data-stu-id="2edea-142">This is because the control template rewrites the visual appearance of the entire control, while a style simply applies property changes to the existing control.</span></span> <span data-ttu-id="2edea-143">Однако, так как шаблон элемента управления применяется путем установки свойства [Control.Template](xref:System.Windows.Controls.Control.Template), можно использовать стиль для определения или установки шаблона.</span><span class="sxs-lookup"><span data-stu-id="2edea-143">However, since the template of a control is applied by setting the [Control.Template](xref:System.Windows.Controls.Control.Template) property, you can use a style to define or set a template.</span></span>

<span data-ttu-id="2edea-144">Обычно разработчики позволяют создать копию существующего шаблона и изменить ее.</span><span class="sxs-lookup"><span data-stu-id="2edea-144">Designers generally allow you to create a copy of an existing template and modify it.</span></span> <span data-ttu-id="2edea-145">Например, в конструкторе WPF в Visual Studio выберите элемент управления `CheckBox`, а затем щелкните правой кнопкой мыши и последовательно выберите **Изменить шаблон** > **Создать копию**.</span><span class="sxs-lookup"><span data-stu-id="2edea-145">For example, in the Visual Studio WPF designer, select a `CheckBox` control, and then right-click and select **Edit template** > **Create a copy**.</span></span> <span data-ttu-id="2edea-146">Эта команда создает *стиль, который определяет шаблон*.</span><span class="sxs-lookup"><span data-stu-id="2edea-146">This command generates a *style that defines a template*.</span></span>

```xaml
<Style x:Key="CheckBoxStyle1" TargetType="{x:Type CheckBox}">
    <Setter Property="FocusVisualStyle" Value="{StaticResource FocusVisual1}"/>
    <Setter Property="Background" Value="{StaticResource OptionMark.Static.Background1}"/>
    <Setter Property="BorderBrush" Value="{StaticResource OptionMark.Static.Border1}"/>
    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
    <Setter Property="BorderThickness" Value="1"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type CheckBox}">
                <Grid x:Name="templateRoot" Background="Transparent" SnapsToDevicePixels="True">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Border x:Name="checkBoxBorder" Background="{TemplateBinding Background}" BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="1" VerticalAlignment="{TemplateBinding VerticalContentAlignment}">
                        <Grid x:Name="markGrid">
                            <Path x:Name="optionMark" Data="F1 M 9.97498,1.22334L 4.6983,9.09834L 4.52164,9.09834L 0,5.19331L 1.27664,3.52165L 4.255,6.08833L 8.33331,1.52588e-005L 9.97498,1.22334 Z " Fill="{StaticResource OptionMark.Static.Glyph1}" Margin="1" Opacity="0" Stretch="None"/>
                            <Rectangle x:Name="indeterminateMark" Fill="{StaticResource OptionMark.Static.Glyph1}" Margin="2" Opacity="0"/>
                        </Grid>
                    </Border>
                    <ContentPresenter x:Name="contentPresenter" Grid.Column="1" Focusable="False" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="HasContent" Value="true">
                        <Setter Property="FocusVisualStyle" Value="{StaticResource OptionMarkFocusVisual1}"/>
                        <Setter Property="Padding" Value="4,-1,0,0"/>

... content removed to save space ...
```

<span data-ttu-id="2edea-147">Редактирование копии шаблона — отличный способ научиться работать с шаблонами.</span><span class="sxs-lookup"><span data-stu-id="2edea-147">Editing a copy of a template is a great way to learn how templates work.</span></span> <span data-ttu-id="2edea-148">Вместо создания пустого шаблона проще редактировать копию и изменять некоторые аспекты визуального представления.</span><span class="sxs-lookup"><span data-stu-id="2edea-148">Instead of creating a new blank template, it's easier to edit a copy and change a few aspects of the visual presentation.</span></span>

<span data-ttu-id="2edea-149">Пример см. в статье [Создание шаблона элемента управления](../themes/how-to-create-apply-template.md).</span><span class="sxs-lookup"><span data-stu-id="2edea-149">For an example, see [Create a template for a control](../themes/how-to-create-apply-template.md).</span></span>

### <a name="templatebinding"></a><span data-ttu-id="2edea-150">TemplateBinding</span><span class="sxs-lookup"><span data-stu-id="2edea-150">TemplateBinding</span></span>

<span data-ttu-id="2edea-151">Возможно, вы заметили, что ресурс шаблона, определенный в предыдущем разделе, использует [расширение разметки TemplateBinding](../../framework/wpf/advanced/templatebinding-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="2edea-151">You may have noticed that the template resource defined in the previous section uses the [TemplateBinding Markup Extension](../../framework/wpf/advanced/templatebinding-markup-extension.md).</span></span> <span data-ttu-id="2edea-152">`TemplateBinding` является оптимизированной формой привязки для сценариев шаблонов, аналогичных привязке, созданной с помощью `{Binding RelativeSource={RelativeSource TemplatedParent}}`.</span><span class="sxs-lookup"><span data-stu-id="2edea-152">A `TemplateBinding` is an optimized form of a binding for template scenarios, analogous to a binding constructed with `{Binding RelativeSource={RelativeSource TemplatedParent}}`.</span></span> <span data-ttu-id="2edea-153">`TemplateBinding` может использоваться для привязки частей шаблона к свойствам элемента управления.</span><span class="sxs-lookup"><span data-stu-id="2edea-153">`TemplateBinding` is useful for binding parts of the template to properties of the control.</span></span> <span data-ttu-id="2edea-154">Например, каждый элемент управления имеет свойство <xref:System.Windows.Controls.Control.BorderThickness>.</span><span class="sxs-lookup"><span data-stu-id="2edea-154">For example, each control has a <xref:System.Windows.Controls.Control.BorderThickness> property.</span></span> <span data-ttu-id="2edea-155">Используйте `TemplateBinding`, чтобы управлять элементом шаблона, затрагиваемым параметром элемента управления.</span><span class="sxs-lookup"><span data-stu-id="2edea-155">Use a `TemplateBinding` to manage which element in the template is affected by this control setting.</span></span>

### <a name="contentcontrol-and-itemscontrol"></a><span data-ttu-id="2edea-156">ContentControl и ItemsControl</span><span class="sxs-lookup"><span data-stu-id="2edea-156">ContentControl and ItemsControl</span></span>

<span data-ttu-id="2edea-157">Если в элементе <xref:System.Windows.Controls.ControlTemplate> <xref:System.Windows.Controls.ContentControl> объявляется <xref:System.Windows.Controls.ContentPresenter>, элемент <xref:System.Windows.Controls.ContentPresenter> будет автоматически привязан к свойствам <xref:System.Windows.Controls.ContentControl.ContentTemplate%2A> и <xref:System.Windows.Controls.ContentControl.Content%2A>.</span><span class="sxs-lookup"><span data-stu-id="2edea-157">If a <xref:System.Windows.Controls.ContentPresenter> is declared in the <xref:System.Windows.Controls.ControlTemplate> of a <xref:System.Windows.Controls.ContentControl>, the <xref:System.Windows.Controls.ContentPresenter> will automatically bind to the <xref:System.Windows.Controls.ContentControl.ContentTemplate%2A> and <xref:System.Windows.Controls.ContentControl.Content%2A> properties.</span></span> <span data-ttu-id="2edea-158">Аналогичным образом элемент <xref:System.Windows.Controls.ItemsPresenter>, который находится в <xref:System.Windows.Controls.ControlTemplate> <xref:System.Windows.Controls.ItemsControl>, автоматически привязывается к свойствам <xref:System.Windows.Controls.ItemsControl.ItemTemplate%2A> и <xref:System.Windows.Controls.ItemsControl.Items%2A>.</span><span class="sxs-lookup"><span data-stu-id="2edea-158">Likewise, an <xref:System.Windows.Controls.ItemsPresenter> that is in the <xref:System.Windows.Controls.ControlTemplate> of an <xref:System.Windows.Controls.ItemsControl> will automatically bind to the <xref:System.Windows.Controls.ItemsControl.ItemTemplate%2A> and <xref:System.Windows.Controls.ItemsControl.Items%2A> properties.</span></span>

## <a name="datatemplates"></a><span data-ttu-id="2edea-159">DataTemplates</span><span class="sxs-lookup"><span data-stu-id="2edea-159">DataTemplates</span></span>

<span data-ttu-id="2edea-160">В этом примере приложения имеется элемент управления <xref:System.Windows.Controls.ListBox>, связанный со списком фотографий.</span><span class="sxs-lookup"><span data-stu-id="2edea-160">In this sample app, there is a <xref:System.Windows.Controls.ListBox> control that is bound to a list of photos.</span></span>

[!code-xaml[ListBox](~/samples/snippets/desktop-guide/wpf/styles-and-templates-intro/csharp/Window3.xaml#SnippetListBox)]

<span data-ttu-id="2edea-161">Теперь <xref:System.Windows.Controls.ListBox> выглядит так.</span><span class="sxs-lookup"><span data-stu-id="2edea-161">This <xref:System.Windows.Controls.ListBox> currently looks like the following.</span></span>

<span data-ttu-id="2edea-162">![ListBox до применения шаблона](./media/styles-and-templates-overview/stylingintro-listboxbefore.png "StylingIntro_ListBoxBefore")</span><span class="sxs-lookup"><span data-stu-id="2edea-162">![ListBox before applying template](./media/styles-and-templates-overview/stylingintro-listboxbefore.png "StylingIntro_ListBoxBefore")</span></span>

<span data-ttu-id="2edea-163">Большинство элементов управления имеют некое содержимое, и это содержимое часто поступает из данных, к которым осуществляется привязка.</span><span class="sxs-lookup"><span data-stu-id="2edea-163">Most controls have some type of content, and that content often comes from data that you are binding to.</span></span> <span data-ttu-id="2edea-164">В этом примере такими данными является список фотографий.</span><span class="sxs-lookup"><span data-stu-id="2edea-164">In this sample, the data is the list of photos.</span></span> <span data-ttu-id="2edea-165">В WPF для определения визуального представления данных можно использовать <xref:System.Windows.DataTemplate>.</span><span class="sxs-lookup"><span data-stu-id="2edea-165">In WPF, you use a <xref:System.Windows.DataTemplate> to define the visual representation of data.</span></span> <span data-ttu-id="2edea-166">По сути, то, что вы поместите в <xref:System.Windows.DataTemplate>, определяет визуальное представление данных в отображаемом приложении.</span><span class="sxs-lookup"><span data-stu-id="2edea-166">Basically, what you put into a <xref:System.Windows.DataTemplate> determines what the data looks like in the rendered app.</span></span>

<span data-ttu-id="2edea-167">В нашем примере приложения каждый пользовательский объект `Photo` имеет свойство `Source` строкового типа, которое задает путь к файлу изображения.</span><span class="sxs-lookup"><span data-stu-id="2edea-167">In our sample app, each custom `Photo` object has a `Source` property of type string that specifies the file path of the image.</span></span> <span data-ttu-id="2edea-168">Сейчас объекты фотографий отображаются как пути к файлам.</span><span class="sxs-lookup"><span data-stu-id="2edea-168">Currently, the photo objects appear as file paths.</span></span>

[!code-csharp[PhotoClass](~/samples/snippets/desktop-guide/wpf/styles-and-templates-intro/csharp/Photo.cs#PhotoClass)]
[!code-vb[PhotoClass](~/samples/snippets/desktop-guide/wpf/styles-and-templates-intro/vb/Photo.vb#PhotoClass)]

<span data-ttu-id="2edea-169">Чтобы фотографии отображались как изображения, необходимо создать <xref:System.Windows.DataTemplate> в качестве ресурса.</span><span class="sxs-lookup"><span data-stu-id="2edea-169">For the photos to appear as images, you create a <xref:System.Windows.DataTemplate> as a resource.</span></span>

[!code-xaml[DataTemplate](~/samples/snippets/desktop-guide/wpf/styles-and-templates-intro/csharp/Window4.xaml#SnippetDataTemplate)]

<span data-ttu-id="2edea-170">Обратите внимание, что свойство <xref:System.Windows.DataTemplate.DataType%2A> подобно свойству <xref:System.Windows.Style.TargetType%2A> <xref:System.Windows.Style>.</span><span class="sxs-lookup"><span data-stu-id="2edea-170">Notice that the <xref:System.Windows.DataTemplate.DataType%2A> property is similar to the <xref:System.Windows.Style.TargetType%2A> property of the <xref:System.Windows.Style>.</span></span> <span data-ttu-id="2edea-171">Если <xref:System.Windows.DataTemplate> находится в разделе ресурсов, когда вы указываете свойство <xref:System.Windows.DataTemplate.DataType%2A> для типа и не назначаете ему атрибут `x:Key`, <xref:System.Windows.DataTemplate> будет применяться каждый раз при появлении этого типа.</span><span class="sxs-lookup"><span data-stu-id="2edea-171">If your <xref:System.Windows.DataTemplate> is in the resources section, when you specify the <xref:System.Windows.DataTemplate.DataType%2A> property to a type and omit an `x:Key`, the <xref:System.Windows.DataTemplate> is applied whenever that type appears.</span></span> <span data-ttu-id="2edea-172">Вы всегда можете назначить <xref:System.Windows.DataTemplate> атрибут `x:Key`, а затем задать его в качестве `StaticResource` для свойств, которые принимают типы <xref:System.Windows.DataTemplate> (например, свойство <xref:System.Windows.Controls.ItemsControl.ItemTemplate%2A> или <xref:System.Windows.Controls.ContentControl.ContentTemplate%2A>).</span><span class="sxs-lookup"><span data-stu-id="2edea-172">You always have the option to assign the <xref:System.Windows.DataTemplate> with an `x:Key` and then set it as a `StaticResource` for properties that take <xref:System.Windows.DataTemplate> types, such as the <xref:System.Windows.Controls.ItemsControl.ItemTemplate%2A> property or the <xref:System.Windows.Controls.ContentControl.ContentTemplate%2A> property.</span></span>

<span data-ttu-id="2edea-173">По существу <xref:System.Windows.DataTemplate> в приведенном выше примере определяет, что при наличии объекта `Photo` он должен отображаться в качестве элемента <xref:System.Windows.Controls.Image> в рамках <xref:System.Windows.Controls.Border>.</span><span class="sxs-lookup"><span data-stu-id="2edea-173">Essentially, the <xref:System.Windows.DataTemplate> in the above example defines that whenever there is a `Photo` object, it should appear as an <xref:System.Windows.Controls.Image> within a <xref:System.Windows.Controls.Border>.</span></span> <span data-ttu-id="2edea-174">С этим шаблоном <xref:System.Windows.DataTemplate> приложение теперь выглядит так.</span><span class="sxs-lookup"><span data-stu-id="2edea-174">With this <xref:System.Windows.DataTemplate>, our app now looks like this.</span></span>

<span data-ttu-id="2edea-175">![Фото](./media/styles-and-templates-overview/stylingintro-photosasimages.png "StylingIntro_PhotosAsImages")</span><span class="sxs-lookup"><span data-stu-id="2edea-175">![Photo image](./media/styles-and-templates-overview/stylingintro-photosasimages.png "StylingIntro_PhotosAsImages")</span></span>

<span data-ttu-id="2edea-176">Модель использования шаблонов данных предоставляет и другие возможности.</span><span class="sxs-lookup"><span data-stu-id="2edea-176">The data templating model provides other features.</span></span> <span data-ttu-id="2edea-177">Например, для отображения данных коллекции, содержащей другие коллекции, с помощью типа <xref:System.Windows.Controls.HeaderedItemsControl>, например <xref:System.Windows.Controls.Menu> или <xref:System.Windows.Controls.TreeView>, имеется шаблон <xref:System.Windows.HierarchicalDataTemplate>.</span><span class="sxs-lookup"><span data-stu-id="2edea-177">For example, if you are displaying collection data that contains other collections using a <xref:System.Windows.Controls.HeaderedItemsControl> type such as a <xref:System.Windows.Controls.Menu> or a <xref:System.Windows.Controls.TreeView>, there is the <xref:System.Windows.HierarchicalDataTemplate>.</span></span> <span data-ttu-id="2edea-178">Другой возможностью использования шаблонов данных является элемент<xref:System.Windows.Controls.DataTemplateSelector>, который позволяет выбрать <xref:System.Windows.DataTemplate> для использования на основе пользовательской логики.</span><span class="sxs-lookup"><span data-stu-id="2edea-178">Another data templating feature is the <xref:System.Windows.Controls.DataTemplateSelector>, which allows you to choose a <xref:System.Windows.DataTemplate> to use based on custom logic.</span></span> <span data-ttu-id="2edea-179">Дополнительные сведения см. в разделе [Общие сведения о шаблонах данных](../../framework/wpf/data/data-templating-overview.md), в котором более подробно рассматриваются различные возможности использования шаблонов данных.</span><span class="sxs-lookup"><span data-stu-id="2edea-179">For more information, see [Data Templating Overview](../../framework/wpf/data/data-templating-overview.md), which provides a more in-depth discussion of the different data templating features.</span></span>

## <a name="triggers"></a><span data-ttu-id="2edea-180">Триггеры</span><span class="sxs-lookup"><span data-stu-id="2edea-180">Triggers</span></span>

<span data-ttu-id="2edea-181">Триггер задает значения свойств или активирует различные действия (например, анимацию) при изменении значения свойства или при возникновении какого-либо события.</span><span class="sxs-lookup"><span data-stu-id="2edea-181">A trigger sets properties or starts actions, such as an animation, when a property value changes or when an event is raised.</span></span> <span data-ttu-id="2edea-182">В <xref:System.Windows.Style>, <xref:System.Windows.Controls.ControlTemplate>и <xref:System.Windows.DataTemplate> есть свойство `Triggers`, которое может содержать набор триггеров.</span><span class="sxs-lookup"><span data-stu-id="2edea-182"><xref:System.Windows.Style>, <xref:System.Windows.Controls.ControlTemplate>, and <xref:System.Windows.DataTemplate> all have a `Triggers` property that can contain a set of triggers.</span></span> <span data-ttu-id="2edea-183">Существует несколько типов триггеров.</span><span class="sxs-lookup"><span data-stu-id="2edea-183">There are several types of triggers.</span></span>

### <a name="propertytriggers"></a><span data-ttu-id="2edea-184">PropertyTriggers</span><span class="sxs-lookup"><span data-stu-id="2edea-184">PropertyTriggers</span></span>

<span data-ttu-id="2edea-185">Объект <xref:System.Windows.Trigger>, который задает значения свойств или активирует действия на основе значения свойства, называется триггером свойств.</span><span class="sxs-lookup"><span data-stu-id="2edea-185">A <xref:System.Windows.Trigger> that sets property values or starts actions based on the value of a property is called a property trigger.</span></span>

<span data-ttu-id="2edea-186">Чтобы продемонстрировать использование триггеров свойств, можно сделать каждый элемент <xref:System.Windows.Controls.ListBoxItem> частично прозрачным, если он не выбран.</span><span class="sxs-lookup"><span data-stu-id="2edea-186">To demonstrate how to use property triggers, you can make each <xref:System.Windows.Controls.ListBoxItem> partially transparent unless it is selected.</span></span> <span data-ttu-id="2edea-187">В следующем стиле для свойства <xref:System.Windows.UIElement.Opacity%2A> типа <xref:System.Windows.Controls.ListBoxItem> задается значение `0.5`.</span><span class="sxs-lookup"><span data-stu-id="2edea-187">The following style sets the <xref:System.Windows.UIElement.Opacity%2A> value of a <xref:System.Windows.Controls.ListBoxItem> to `0.5`.</span></span> <span data-ttu-id="2edea-188">Если свойство <xref:System.Windows.Controls.ListBoxItem.IsSelected%2A> имеет значение`true`, то, несмотря на это, для <xref:System.Windows.UIElement.Opacity%2A> присваивается значение `1.0`.</span><span class="sxs-lookup"><span data-stu-id="2edea-188">When the <xref:System.Windows.Controls.ListBoxItem.IsSelected%2A> property is `true`, however, the <xref:System.Windows.UIElement.Opacity%2A> is set to `1.0`.</span></span>

[!code-xaml[PropertyTrigger](~/samples/snippets/desktop-guide/wpf/styles-and-templates-intro/csharp/Window5.xaml#SnippetPropertyTrigger)]

<span data-ttu-id="2edea-189">В этом примере объект <xref:System.Windows.Trigger> используется для установки значения свойства, но обратите внимание, что у класса <xref:System.Windows.Trigger> также есть свойства <xref:System.Windows.TriggerBase.EnterActions%2A> и <xref:System.Windows.TriggerBase.ExitActions%2A>, которые позволяют триггеру выполнять действия.</span><span class="sxs-lookup"><span data-stu-id="2edea-189">This example uses a <xref:System.Windows.Trigger> to set a property value, but note that the <xref:System.Windows.Trigger> class also has the <xref:System.Windows.TriggerBase.EnterActions%2A> and <xref:System.Windows.TriggerBase.ExitActions%2A> properties that enable a trigger to perform actions.</span></span>

<span data-ttu-id="2edea-190">Обратите внимание, что свойство <xref:System.Windows.FrameworkElement.MaxHeight%2A> типа <xref:System.Windows.Controls.ListBoxItem> имеет значение `75`.</span><span class="sxs-lookup"><span data-stu-id="2edea-190">Notice that the <xref:System.Windows.FrameworkElement.MaxHeight%2A> property of the <xref:System.Windows.Controls.ListBoxItem> is set to `75`.</span></span> <span data-ttu-id="2edea-191">На следующем рисунке третий элемент является выбранным.</span><span class="sxs-lookup"><span data-stu-id="2edea-191">In the following illustration, the third item is the selected item.</span></span>

<span data-ttu-id="2edea-192">![Стилизированный ListView](./media/styles-and-templates-overview/stylingintro-triggers.png "StylingIntro_triggers")</span><span class="sxs-lookup"><span data-stu-id="2edea-192">![Styled ListView](./media/styles-and-templates-overview/stylingintro-triggers.png "StylingIntro_triggers")</span></span>

### <a name="eventtriggers-and-storyboards"></a><span data-ttu-id="2edea-193">Объекты EventTrigger и раскадровки</span><span class="sxs-lookup"><span data-stu-id="2edea-193">EventTriggers and Storyboards</span></span>

<span data-ttu-id="2edea-194">Еще один тип триггера — это объект <xref:System.Windows.EventTrigger>, который активирует набор действий по возникновению события.</span><span class="sxs-lookup"><span data-stu-id="2edea-194">Another type of trigger is the <xref:System.Windows.EventTrigger>, which starts a set of actions based on the occurrence of an event.</span></span> <span data-ttu-id="2edea-195">Например, следующие объекты <xref:System.Windows.EventTrigger> определяют, что при наведении указателя мыши на элемент <xref:System.Windows.Controls.ListBoxItem> выполняется анимированный переход свойства <xref:System.Windows.FrameworkElement.MaxHeight%2A> к значению `90` в течение `0.2` сек.</span><span class="sxs-lookup"><span data-stu-id="2edea-195">For example, the following <xref:System.Windows.EventTrigger> objects specify that when the mouse pointer enters the <xref:System.Windows.Controls.ListBoxItem>, the <xref:System.Windows.FrameworkElement.MaxHeight%2A> property animates to a value of `90` over a `0.2` second period.</span></span> <span data-ttu-id="2edea-196">Когда указатель мыши перемещается за пределы этого элемента, свойство возвращается к исходному значению в течение `1` сек.</span><span class="sxs-lookup"><span data-stu-id="2edea-196">When the mouse moves away from the item, the property returns to the original value over a period of `1` second.</span></span> <span data-ttu-id="2edea-197">Обратите внимание, что нет необходимости указывать значение <xref:System.Windows.Media.Animation.DoubleAnimation.To%2A> для анимации <xref:System.Windows.ContentElement.MouseLeave>.</span><span class="sxs-lookup"><span data-stu-id="2edea-197">Note how it is not necessary to specify a <xref:System.Windows.Media.Animation.DoubleAnimation.To%2A> value for the <xref:System.Windows.ContentElement.MouseLeave> animation.</span></span> <span data-ttu-id="2edea-198">Анимация сама может отслеживать исходное значение.</span><span class="sxs-lookup"><span data-stu-id="2edea-198">This is because the animation is able to keep track of the original value.</span></span>

[!code-xaml[StyleEventTriggers](~/samples/snippets/desktop-guide/wpf/styles-and-templates-intro/csharp/Window6.xaml#SnippetStyleEventTriggers)]

<span data-ttu-id="2edea-199">Подробнее см. в статье [Общие сведения о Storyboard](../../framework/wpf/graphics-multimedia/storyboards-overview.md).</span><span class="sxs-lookup"><span data-stu-id="2edea-199">For more information, see the [Storyboards overview](../../framework/wpf/graphics-multimedia/storyboards-overview.md).</span></span>

<span data-ttu-id="2edea-200">На следующем рисунке указатель мыши наведен на третий элемент.</span><span class="sxs-lookup"><span data-stu-id="2edea-200">In the following illustration, the mouse is pointing to the third item.</span></span>

<span data-ttu-id="2edea-201">![Снимок экрана: пример стилизации](./media/styles-and-templates-overview/stylingintro-eventtriggers.png "StylingIntro_EventTriggers")</span><span class="sxs-lookup"><span data-stu-id="2edea-201">![Styling sample screenshot](./media/styles-and-templates-overview/stylingintro-eventtriggers.png "StylingIntro_EventTriggers")</span></span>

### <a name="multitriggers-datatriggers-and-multidatatriggers"></a><span data-ttu-id="2edea-202">Объекты MultiTrigger, DataTrigger и MultiDataTrigger</span><span class="sxs-lookup"><span data-stu-id="2edea-202">MultiTriggers, DataTriggers, and MultiDataTriggers</span></span>

<span data-ttu-id="2edea-203">Помимо триггеров <xref:System.Windows.Trigger> и <xref:System.Windows.EventTrigger>, существуют и другие типы триггеров.</span><span class="sxs-lookup"><span data-stu-id="2edea-203">In addition to <xref:System.Windows.Trigger> and <xref:System.Windows.EventTrigger>, there are other types of triggers.</span></span> <span data-ttu-id="2edea-204">Триггер <xref:System.Windows.MultiTrigger> позволяет задавать значения свойств на основании нескольких условий.</span><span class="sxs-lookup"><span data-stu-id="2edea-204"><xref:System.Windows.MultiTrigger> allows you to set property values based on multiple conditions.</span></span> <span data-ttu-id="2edea-205">Используйте триггеры <xref:System.Windows.DataTrigger> и <xref:System.Windows.MultiDataTrigger>, когда свойство условия имеет привязку к данным.</span><span class="sxs-lookup"><span data-stu-id="2edea-205">You use <xref:System.Windows.DataTrigger> and <xref:System.Windows.MultiDataTrigger> when the property of your condition is data-bound.</span></span>

## <a name="visual-states"></a><span data-ttu-id="2edea-206">Визуальные состояния</span><span class="sxs-lookup"><span data-stu-id="2edea-206">Visual States</span></span>

<span data-ttu-id="2edea-207">Элементы управления всегда находятся в определенном **состоянии**.</span><span class="sxs-lookup"><span data-stu-id="2edea-207">Controls are always in a specific **state**.</span></span> <span data-ttu-id="2edea-208">Например, когда указатель мышь перемещается над элементом управления, то считается, что элемент управления находится в обычном состоянии `MouseOver`.</span><span class="sxs-lookup"><span data-stu-id="2edea-208">For example, when the mouse moves over the surface of a control, the control is considered to be in a common state of `MouseOver`.</span></span> <span data-ttu-id="2edea-209">Элемент управления без определенного состояния рассматривается как элемент управления с обычным состоянием `Normal`.</span><span class="sxs-lookup"><span data-stu-id="2edea-209">A control without a specific state is considered to be in the common `Normal` state.</span></span> <span data-ttu-id="2edea-210">Состояния разбиваются на группы, а упомянутые выше состояния являются частью группы состояний `CommonStates`.</span><span class="sxs-lookup"><span data-stu-id="2edea-210">States are broken into groups, and the previously mentioned states are part of the state group `CommonStates`.</span></span> <span data-ttu-id="2edea-211">Большинство элементов управления имеют две группы состояний: `CommonStates` и `FocusStates`.</span><span class="sxs-lookup"><span data-stu-id="2edea-211">Most controls have two state groups: `CommonStates` and `FocusStates`.</span></span> <span data-ttu-id="2edea-212">Для каждой группы состояний, применяемой к элементу управления, элемент управления всегда находится в одном из состояний каждой группы, например `CommonStates.MouseOver` и `FocusStates.Unfocused`.</span><span class="sxs-lookup"><span data-stu-id="2edea-212">Of each state group applied to a control, a control is always in one state of each group, such as `CommonStates.MouseOver` and `FocusStates.Unfocused`.</span></span> <span data-ttu-id="2edea-213">Элемент управления не может находиться в двух разных состояниях в рамках одной группы, например `CommonStates.Normal` и `CommonStates.Disabled`.</span><span class="sxs-lookup"><span data-stu-id="2edea-213">However, a control can't be in two different states within the same group, such as `CommonStates.Normal` and `CommonStates.Disabled`.</span></span> <span data-ttu-id="2edea-214">Ниже приведена таблица состояний, которые большинство элементов управления распознают и используют.</span><span class="sxs-lookup"><span data-stu-id="2edea-214">Here is a table of states most controls recognize and use.</span></span>

| <span data-ttu-id="2edea-215">Имя VisualState</span><span class="sxs-lookup"><span data-stu-id="2edea-215">VisualState Name</span></span> | <span data-ttu-id="2edea-216">Имя VisualStateGroup</span><span class="sxs-lookup"><span data-stu-id="2edea-216">VisualStateGroup Name</span></span> | <span data-ttu-id="2edea-217">Описание</span><span class="sxs-lookup"><span data-stu-id="2edea-217">Description</span></span> |
| ---------------- | --------------------- | ----------- |
| <span data-ttu-id="2edea-218">Норм.</span><span class="sxs-lookup"><span data-stu-id="2edea-218">Normal</span></span>           | <span data-ttu-id="2edea-219">CommonStates</span><span class="sxs-lookup"><span data-stu-id="2edea-219">CommonStates</span></span>          | <span data-ttu-id="2edea-220">Состояние по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="2edea-220">The default state.</span></span> |
| <span data-ttu-id="2edea-221">MouseOver</span><span class="sxs-lookup"><span data-stu-id="2edea-221">MouseOver</span></span>        | <span data-ttu-id="2edea-222">CommonStates</span><span class="sxs-lookup"><span data-stu-id="2edea-222">CommonStates</span></span>          | <span data-ttu-id="2edea-223">Указатель мыши расположен в элементе управления.</span><span class="sxs-lookup"><span data-stu-id="2edea-223">The mouse pointer is positioned over the control.</span></span> |
| <span data-ttu-id="2edea-224">Нажато</span><span class="sxs-lookup"><span data-stu-id="2edea-224">Pressed</span></span>          | <span data-ttu-id="2edea-225">CommonStates</span><span class="sxs-lookup"><span data-stu-id="2edea-225">CommonStates</span></span>          | <span data-ttu-id="2edea-226">Элемент управления нажат.</span><span class="sxs-lookup"><span data-stu-id="2edea-226">The control is pressed.</span></span> |
| <span data-ttu-id="2edea-227">Отключено</span><span class="sxs-lookup"><span data-stu-id="2edea-227">Disabled</span></span>         | <span data-ttu-id="2edea-228">CommonStates</span><span class="sxs-lookup"><span data-stu-id="2edea-228">CommonStates</span></span>          | <span data-ttu-id="2edea-229">Элемент управления отключен.</span><span class="sxs-lookup"><span data-stu-id="2edea-229">The control is disabled.</span></span> |
| <span data-ttu-id="2edea-230">Focused</span><span class="sxs-lookup"><span data-stu-id="2edea-230">Focused</span></span>          | <span data-ttu-id="2edea-231">FocusStates</span><span class="sxs-lookup"><span data-stu-id="2edea-231">FocusStates</span></span>           | <span data-ttu-id="2edea-232">Элемент управления имеет фокус.</span><span class="sxs-lookup"><span data-stu-id="2edea-232">The control has focus.</span></span> |
| <span data-ttu-id="2edea-233">Без фокуса ввода</span><span class="sxs-lookup"><span data-stu-id="2edea-233">Unfocused</span></span>        | <span data-ttu-id="2edea-234">FocusStates</span><span class="sxs-lookup"><span data-stu-id="2edea-234">FocusStates</span></span>           | <span data-ttu-id="2edea-235">Элемент управления не имеет фокуса.</span><span class="sxs-lookup"><span data-stu-id="2edea-235">The control does not have focus.</span></span> |

<span data-ttu-id="2edea-236">Определив <xref:System.Windows.VisualStateManager?displayProperty=fullName> в корневом элементе шаблона элемента управления, вы можете активировать анимации при переходе элемента управления в определенное состояние.</span><span class="sxs-lookup"><span data-stu-id="2edea-236">By defining a <xref:System.Windows.VisualStateManager?displayProperty=fullName> on the root element of a control template, you can trigger animations when a control enters a specific state.</span></span> <span data-ttu-id="2edea-237">`VisualStateManager` объявляет, какие сочетания <xref:System.Windows.VisualStateGroup> и <xref:System.Windows.VisualState> отслеживать.</span><span class="sxs-lookup"><span data-stu-id="2edea-237">The `VisualStateManager` declares which combinations of <xref:System.Windows.VisualStateGroup> and <xref:System.Windows.VisualState> to watch.</span></span> <span data-ttu-id="2edea-238">Когда элемент управления переходит в состояние отслеживания, запускается анимация, определенная `VisaulStateManager`.</span><span class="sxs-lookup"><span data-stu-id="2edea-238">When the control enters a watched state, the animation defined by the `VisaulStateManager` is started.</span></span>

<span data-ttu-id="2edea-239">Например, следующий код XAML отслеживает состояние `CommonStates.MouseOver`, чтобы анимировать цвет заливки элемента `backgroundElement`.</span><span class="sxs-lookup"><span data-stu-id="2edea-239">For example, the following XAML code watches the `CommonStates.MouseOver` state to animate the fill color of the element named `backgroundElement`.</span></span> <span data-ttu-id="2edea-240">Когда элемент управления возвращается в состояние `CommonStates.Normal`, восстанавливается цвет заливки элемента `backgroundElement`.</span><span class="sxs-lookup"><span data-stu-id="2edea-240">When the control returns to the `CommonStates.Normal` state, the fill color of the element named `backgroundElement` is restored.</span></span>

```xaml
<ControlTemplate x:Key="roundbutton" TargetType="Button">
    <Grid>
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup Name="CommonStates">
                <VisualState Name="Normal">
                    <ColorAnimation Storyboard.TargetName="backgroundElement"
                                    Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)"
                                    To="{TemplateBinding Background}"
                                    Duration="0:0:0.3"/>
                </VisualState>
                <VisualState Name="MouseOver">
                    <ColorAnimation Storyboard.TargetName="backgroundElement"
                                    Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)"
                                    To="Yellow"
                                    Duration="0:0:0.3"/>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>

        ...
```

<span data-ttu-id="2edea-241">Дополнительные сведения о раскадровках см. в статье [Общие сведения о Storyboard](../../framework/wpf/graphics-multimedia/storyboards-overview.md).</span><span class="sxs-lookup"><span data-stu-id="2edea-241">For more information about storyboards, see [Storyboards Overview](../../framework/wpf/graphics-multimedia/storyboards-overview.md).</span></span>

## <a name="shared-resources-and-themes"></a><span data-ttu-id="2edea-242">Общие ресурсы и темы</span><span class="sxs-lookup"><span data-stu-id="2edea-242">Shared resources and themes</span></span>

<span data-ttu-id="2edea-243">Типичное приложение WPF может иметь несколько ресурсов пользовательского интерфейса, которые применяются в рамках всего приложения.</span><span class="sxs-lookup"><span data-stu-id="2edea-243">A typical WPF app might have multiple UI resources that are applied throughout the app.</span></span> <span data-ttu-id="2edea-244">В совокупности этот набор ресурсов можно рассматривать как тему приложения.</span><span class="sxs-lookup"><span data-stu-id="2edea-244">Collectively, this set of resources can be considered the theme for the app.</span></span> <span data-ttu-id="2edea-245">WPF поддерживает упаковку ресурсов пользовательского интерфейса в виде темы, используя словарь ресурсов, который инкапсулируется как класс <xref:System.Windows.ResourceDictionary>.</span><span class="sxs-lookup"><span data-stu-id="2edea-245">WPF provides support for packaging UI resources as a theme by using a resource dictionary that is encapsulated as the <xref:System.Windows.ResourceDictionary> class.</span></span>

<span data-ttu-id="2edea-246">Темы WPF задаются с помощью механизмов стилизации и использования шаблонов, которые WPF предоставляет для настройки отображения любого элемента.</span><span class="sxs-lookup"><span data-stu-id="2edea-246">WPF themes are defined by using the styling and templating mechanism that WPF exposes for customizing the visuals of any element.</span></span>

<span data-ttu-id="2edea-247">Ресурсы темы WPF хранятся в словарях внедренных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="2edea-247">WPF theme resources are stored in embedded resource dictionaries.</span></span> <span data-ttu-id="2edea-248">Эти словари ресурсов должны быть внедрены в подписанную сборку и могут быть внедрены либо в ту же сборку, что и сам код, либо в параллельную сборку.</span><span class="sxs-lookup"><span data-stu-id="2edea-248">These resource dictionaries must be embedded within a signed assembly, and can either be embedded in the same assembly as the code itself or in a side-by-side assembly.</span></span> <span data-ttu-id="2edea-249">Для библиотеки PresentationFramework.dll (сборки, содержащей элементы управления WPF) ресурсы тем находятся в ряде параллельных сборок.</span><span class="sxs-lookup"><span data-stu-id="2edea-249">For PresentationFramework.dll, the assembly that contains WPF controls, theme resources are in a series of side-by-side assemblies.</span></span>

<span data-ttu-id="2edea-250">Тема становится последним местом поиска стиля элемента.</span><span class="sxs-lookup"><span data-stu-id="2edea-250">The theme becomes the last place to look when searching for the style of an element.</span></span> <span data-ttu-id="2edea-251">Как правило, процесс поиска начинается с прохода вверх по дереву элементов в поисках соответствующего ресурса, затем выполняется поиск в коллекции ресурсов приложения и, наконец, в последнюю очередь осуществляется запрос к системе.</span><span class="sxs-lookup"><span data-stu-id="2edea-251">Typically, the search will begin by walking up the element tree searching for an appropriate resource, then look in the app resource collection and finally query the system.</span></span> <span data-ttu-id="2edea-252">Это дает разработчикам приложений возможность переопределить стиль для любого объекта на уровне дерева или приложения до достижения темы.</span><span class="sxs-lookup"><span data-stu-id="2edea-252">This gives app developers a chance to redefine the style for any object at the tree or app level before reaching the theme.</span></span>

<span data-ttu-id="2edea-253">Словари ресурсов, оформленные в виде отдельных файлов, позволяют повторно использовать тему в нескольких приложениях.</span><span class="sxs-lookup"><span data-stu-id="2edea-253">You can define resource dictionaries as individual files that enable you to reuse a theme across multiple apps.</span></span> <span data-ttu-id="2edea-254">Также можно создать изменяемые темы, определив несколько словарей ресурсов, которые обеспечивают одни и те же типы ресурсов, но с разными значениями.</span><span class="sxs-lookup"><span data-stu-id="2edea-254">You can also create swappable themes by defining multiple resource dictionaries that provide the same types of resources but with different values.</span></span> <span data-ttu-id="2edea-255">Переопределение этих стилей или других ресурсов на уровне приложения является рекомендуемым способом смены тем приложения.</span><span class="sxs-lookup"><span data-stu-id="2edea-255">Redefining these styles or other resources at the app level is the recommended approach for skinning an app.</span></span>

<span data-ttu-id="2edea-256">Для совместного использования набора ресурсов (в том числе стилей и шаблонов) в приложениях можно создать файл XAML и определить объект <xref:System.Windows.ResourceDictionary>, который содержит ссылку на файл `shared.xaml`.</span><span class="sxs-lookup"><span data-stu-id="2edea-256">To share a set of resources, including styles and templates, across apps, you can create a XAML file and define a <xref:System.Windows.ResourceDictionary> that includes reference to a `shared.xaml` file.</span></span>

```xaml
<ResourceDictionary.MergedDictionaries>
  <ResourceDictionary Source="Shared.xaml" />
</ResourceDictionary.MergedDictionaries>
```

<span data-ttu-id="2edea-257">Это совместное использование файла `shared.xaml`, который определяет объект <xref:System.Windows.ResourceDictionary>, содержащий набор стилей и ресурсов кисти, что позволяет придать согласованный вид элементам управления приложения.</span><span class="sxs-lookup"><span data-stu-id="2edea-257">It is the sharing of `shared.xaml`, which itself defines a <xref:System.Windows.ResourceDictionary> that contains a set of style and brush resources, that enables the controls in an app to have a consistent look.</span></span>

<span data-ttu-id="2edea-258">Подробнее см. в статье [Объединенные словари ресурсов](../../framework/wpf/advanced/merged-resource-dictionaries.md).</span><span class="sxs-lookup"><span data-stu-id="2edea-258">For more information, see [Merged resource dictionaries](../../framework/wpf/advanced/merged-resource-dictionaries.md).</span></span>

<span data-ttu-id="2edea-259">Если вы создаете тему для пользовательского элемента управления, ознакомьтесь с разделом **Определение ресурсов на уровне темы** в статье [Общие сведения о разработке элементов управления](../../framework/wpf/controls/control-authoring-overview.md#defining-resources-at-the-theme-level).</span><span class="sxs-lookup"><span data-stu-id="2edea-259">If you are creating a theme for your custom control, see the **Defining resources at the theme level** section of the [Control authoring overview](../../framework/wpf/controls/control-authoring-overview.md#defining-resources-at-the-theme-level).</span></span>

## <a name="see-also"></a><span data-ttu-id="2edea-260">См. также</span><span class="sxs-lookup"><span data-stu-id="2edea-260">See also</span></span>

- [<span data-ttu-id="2edea-261">URI типа "pack" в WPF</span><span class="sxs-lookup"><span data-stu-id="2edea-261">Pack URIs in WPF</span></span>](../../framework/wpf/app-development/pack-uris-in-wpf.md)
- [<span data-ttu-id="2edea-262">Практическое руководство. Поиск элемента, созданного шаблоном ControlTemplate</span><span class="sxs-lookup"><span data-stu-id="2edea-262">How to: Find ControlTemplate-Generated Elements</span></span>](../../framework/wpf/controls/how-to-find-controltemplate-generated-elements.md)
- [<span data-ttu-id="2edea-263">Поиск элементов, созданных с использованием шаблона DataTemplate</span><span class="sxs-lookup"><span data-stu-id="2edea-263">Find DataTemplate-Generated Elements</span></span>](../../framework/wpf/data/how-to-find-datatemplate-generated-elements.md)
