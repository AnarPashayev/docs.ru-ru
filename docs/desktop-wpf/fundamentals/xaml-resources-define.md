---
title: Определение ресурсов XAML
description: Узнайте о ресурсах XAML в WPF для .NET Core. Поймите типы ресурсов XAML и узнайте, как определить ресурсы XAML.
author: thraka
ms.author: adegeo
ms.date: 08/21/2019
ms.openlocfilehash: b278bb92afc308578d60e347871e0150b26a95db
ms.sourcegitcommit: f8c36054eab877de4d40a705aacafa2552ce70e9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/31/2019
ms.locfileid: "81432572"
---
# <a name="overview-of-xaml-resources"></a><span data-ttu-id="cfc59-104">Обзор ресурсов XAML</span><span class="sxs-lookup"><span data-stu-id="cfc59-104">Overview of XAML resources</span></span>

<span data-ttu-id="cfc59-105">Ресурс — это объект, который можно повторно использовать в разных местах вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="cfc59-105">A resource is an object that can be reused in different places in your app.</span></span> <span data-ttu-id="cfc59-106">Примерами ресурсов являются кисти и стили.</span><span class="sxs-lookup"><span data-stu-id="cfc59-106">Examples of resources include brushes and styles.</span></span> <span data-ttu-id="cfc59-107">В этом обзоре описывается, как использовать ресурсы в языке разметки приложений (XAML).</span><span class="sxs-lookup"><span data-stu-id="cfc59-107">This overview describes how to use resources in Extensible Application Markup Language (XAML).</span></span> <span data-ttu-id="cfc59-108">Вы также можете создавать и получать доступ к ресурсам с помощью кода.</span><span class="sxs-lookup"><span data-stu-id="cfc59-108">You can also create and access resources by using code.</span></span>

> [!NOTE]
> <span data-ttu-id="cfc59-109">Ресурсы XAML, описанные в этой статье, отличаются от *ресурсов приложения,* которые обычно добавляются в приложение, такие как содержимое, данные или встроенные файлы.</span><span class="sxs-lookup"><span data-stu-id="cfc59-109">XAML resources described in this article are different from *app resources* which are generally files added to an app, such as content, data, or embedded files.</span></span>

<!-- TODO: File redirect from docs\framework\wpf\advanced\xaml-resources.md -->

[!INCLUDE [desktop guide under construction](../../../includes/desktop-guide-preview-note.md)]

## <a name="using-resources-in-xaml"></a><span data-ttu-id="cfc59-110">Использование ресурсов в XAML</span><span class="sxs-lookup"><span data-stu-id="cfc59-110">Using resources in XAML</span></span>

<span data-ttu-id="cfc59-111">Следующий пример определяет <xref:System.Windows.Media.SolidColorBrush> ресурс на корневом элементе страницы.</span><span class="sxs-lookup"><span data-stu-id="cfc59-111">The following example defines a <xref:System.Windows.Media.SolidColorBrush> as a resource on the root element of a page.</span></span> <span data-ttu-id="cfc59-112">Затем в примере ссылается ресурс и он использует его <xref:System.Windows.Shapes.Ellipse>для <xref:System.Windows.Controls.TextBlock>набора свойств <xref:System.Windows.Controls.Button>нескольких элементов ребенка, включая a, a и a.</span><span class="sxs-lookup"><span data-stu-id="cfc59-112">The example then references the resource and uses it to set properties of several child elements, including an <xref:System.Windows.Shapes.Ellipse>, a <xref:System.Windows.Controls.TextBlock>, and a <xref:System.Windows.Controls.Button>.</span></span>

[!code-xaml[FEResourceSH_snip#XAML](~/samples/snippets/csharp/VS_Snippets_Wpf/FEResourceSH_snip/CS/page1.xaml#xaml)]

<span data-ttu-id="cfc59-113">Каждый элемент уровня<xref:System.Windows.FrameworkElement> <xref:System.Windows.FrameworkContentElement>фреймворка (или) имеет свойство, <xref:System.Windows.FrameworkElement.Resources%2A> которое является типом, <xref:System.Windows.ResourceDictionary> содержащим определенные ресурсы.</span><span class="sxs-lookup"><span data-stu-id="cfc59-113">Every framework-level element (<xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>) has a <xref:System.Windows.FrameworkElement.Resources%2A> property, which is a <xref:System.Windows.ResourceDictionary> type that contains defined resources.</span></span> <span data-ttu-id="cfc59-114">Вы можете определить ресурсы по <xref:System.Windows.Controls.Button>любому элементу, например</span><span class="sxs-lookup"><span data-stu-id="cfc59-114">You can define resources on any element, such as a <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="cfc59-115">Однако ресурсы чаще всего определяются на <xref:System.Windows.Controls.Page> корневом элементе, который находится в примере.</span><span class="sxs-lookup"><span data-stu-id="cfc59-115">However, resources are most often defined on the root element, which is <xref:System.Windows.Controls.Page> in the example.</span></span>

<span data-ttu-id="cfc59-116">Каждый ресурс в словаре ресурсов должен иметь уникальный ключ.</span><span class="sxs-lookup"><span data-stu-id="cfc59-116">Each resource in a resource dictionary must have a unique key.</span></span> <span data-ttu-id="cfc59-117">При определении ресурсов в разметке вы назначаете уникальный ключ через [директиву x:Key.](../xaml-services/xkey-directive.md)</span><span class="sxs-lookup"><span data-stu-id="cfc59-117">When you define resources in markup, you assign the unique key through the [x:Key Directive](../xaml-services/xkey-directive.md).</span></span> <span data-ttu-id="cfc59-118">Как правило, ключ является строкой. Однако можно задать его как другой тип объекта с помощью соответствующих расширений разметки.</span><span class="sxs-lookup"><span data-stu-id="cfc59-118">Typically, the key is a string; however, you can also set it to other object types by using the appropriate markup extensions.</span></span> <span data-ttu-id="cfc59-119">Нестрокие для ресурсов используются определенными областями функций в WPF, в частности для стилей, ресурсов компонентов и укладки данных.</span><span class="sxs-lookup"><span data-stu-id="cfc59-119">Non-string keys for resources are used by certain feature areas in WPF, notably for styles, component resources, and data styling.</span></span>

<span data-ttu-id="cfc59-120">Можно использовать определенный ресурс с синтаксисом расширения разметки ресурсов, определяющим ключевое имя ресурса.</span><span class="sxs-lookup"><span data-stu-id="cfc59-120">You can use a defined resource with the resource markup extension syntax that specifies the key name of the resource.</span></span> <span data-ttu-id="cfc59-121">Например, используйте ресурс в качестве значения свойства на другом элементе.</span><span class="sxs-lookup"><span data-stu-id="cfc59-121">For example, use the resource as the value of a property on another element.</span></span>

[!code-xaml[FEResourceSH_snip#KeyNameUsage](~/samples/snippets/csharp/VS_Snippets_Wpf/FEResourceSH_snip/CS/page2.xaml#keynameusage)]

<span data-ttu-id="cfc59-122">В предыдущем примере, когда загрузчик XAML <xref:System.Windows.Controls.Control.Background%2A> обрабатывает <xref:System.Windows.Controls.Button>значение `{StaticResource MyBrush}` для свойства на, логика поиска <xref:System.Windows.Controls.Button> ресурсов сначала проверяет словарь ресурсов для элемента.</span><span class="sxs-lookup"><span data-stu-id="cfc59-122">In the preceding example, when the XAML loader processes the value `{StaticResource MyBrush}` for the <xref:System.Windows.Controls.Control.Background%2A> property on <xref:System.Windows.Controls.Button>, the resource lookup logic first checks the resource dictionary for the <xref:System.Windows.Controls.Button> element.</span></span> <span data-ttu-id="cfc59-123">Если <xref:System.Windows.Controls.Button> нет определения ключа `MyBrush` ресурса (в этом примере он не делает; его коллекция ресурсов пуста), <xref:System.Windows.Controls.Button>поиск <xref:System.Windows.Controls.Page>следующий проверяет родительский элемент , который находится .</span><span class="sxs-lookup"><span data-stu-id="cfc59-123">If <xref:System.Windows.Controls.Button> doesn't have a definition of the resource key `MyBrush` (in that example it doesn't; its resource collection is empty), the lookup next checks the parent element of <xref:System.Windows.Controls.Button>, which is <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="cfc59-124">Если вы определяете <xref:System.Windows.Controls.Page> ресурс на корневом элементе, <xref:System.Windows.Controls.Page> все элементы логического дерева могут получить к нему доступ.</span><span class="sxs-lookup"><span data-stu-id="cfc59-124">If you define a resource on the <xref:System.Windows.Controls.Page> root element, all the elements in the logical tree of the <xref:System.Windows.Controls.Page> can access it.</span></span> <span data-ttu-id="cfc59-125">И можно повторно использовать тот же ресурс для настройки значения любого свойства, которое принимает тот же тип, который представляет ресурс.</span><span class="sxs-lookup"><span data-stu-id="cfc59-125">And you can reuse the same resource for setting the value of any property that accepts the same type that the resource represents.</span></span> <span data-ttu-id="cfc59-126">В предыдущем примере `MyBrush` один и тот же <xref:System.Windows.Controls.Control.Background%2A> ресурс <xref:System.Windows.Controls.Button>устанавливает <xref:System.Windows.Shapes.Shape.Fill%2A> два <xref:System.Windows.Shapes.Rectangle>разных свойства: и .</span><span class="sxs-lookup"><span data-stu-id="cfc59-126">In the previous example, the same `MyBrush` resource sets two different properties: the <xref:System.Windows.Controls.Control.Background%2A> of a <xref:System.Windows.Controls.Button>, and the <xref:System.Windows.Shapes.Shape.Fill%2A> of a <xref:System.Windows.Shapes.Rectangle>.</span></span>

## <a name="static-and-dynamic-resources"></a><span data-ttu-id="cfc59-127">Статические и динамические ресурсы</span><span class="sxs-lookup"><span data-stu-id="cfc59-127">Static and dynamic resources</span></span>

<span data-ttu-id="cfc59-128">Ресурс можно отосвазать как статический или динамический.</span><span class="sxs-lookup"><span data-stu-id="cfc59-128">A resource can be referenced as either static or dynamic.</span></span> <span data-ttu-id="cfc59-129">Ссылки создаются с помощью либо [расширения StaticResource Markup,](../../framework/wpf/advanced/staticresource-markup-extension.md) либо [расширения DynamicResource Markup.](../../framework/wpf/advanced/dynamicresource-markup-extension.md)</span><span class="sxs-lookup"><span data-stu-id="cfc59-129">References are created by using either the [StaticResource Markup Extension](../../framework/wpf/advanced/staticresource-markup-extension.md) or the [DynamicResource Markup Extension](../../framework/wpf/advanced/dynamicresource-markup-extension.md).</span></span> <span data-ttu-id="cfc59-130">Расширение разметки — это функция XAML, которая позволяет указать ссылку на объект, имея процесс расширения разметки строки атрибута и вернуть объект погрузчику XAML.</span><span class="sxs-lookup"><span data-stu-id="cfc59-130">A markup extension is a XAML feature that lets you specify an object reference by having the markup extension process the attribute string and return the object to a XAML loader.</span></span> <span data-ttu-id="cfc59-131">Для получения дополнительной информации о поведении расширения разметки смотрите [расширения разметки и WPF XAML](../../framework/wpf/advanced/markup-extensions-and-wpf-xaml.md).</span><span class="sxs-lookup"><span data-stu-id="cfc59-131">For more information about markup extension behavior, see [Markup Extensions and WPF XAML](../../framework/wpf/advanced/markup-extensions-and-wpf-xaml.md).</span></span>

<span data-ttu-id="cfc59-132">При использовании расширения разметки обычно предоставляется один или несколько параметров в строке, которые обрабатываются этим конкретным расширением разметки.</span><span class="sxs-lookup"><span data-stu-id="cfc59-132">When you use a markup extension, you typically provide one or more parameters in string form that are processed by that particular markup extension.</span></span> <span data-ttu-id="cfc59-133">[Расширение StaticResource Markup](../../framework/wpf/advanced/staticresource-markup-extension.md) обрабатывает ключ, просматривая значение этого ключа во всех доступных словарях ресурсов.</span><span class="sxs-lookup"><span data-stu-id="cfc59-133">The [StaticResource Markup Extension](../../framework/wpf/advanced/staticresource-markup-extension.md) processes a key by looking up the value for that key in all available resource dictionaries.</span></span> <span data-ttu-id="cfc59-134">Обработка происходит во время нагрузки, когда процесс загрузки должен назначить значение свойства.</span><span class="sxs-lookup"><span data-stu-id="cfc59-134">Processing happens during load, which is when the loading process needs to assign the property value.</span></span> <span data-ttu-id="cfc59-135">Вместо этого [расширение DynamicResource Markup](../../framework/wpf/advanced/dynamicresource-markup-extension.md) обрабатывает ключ, создавая выражение, и это выражение остается неоцененным до тех пор, пока приложение не заработает, после чего выражение будет оценено и обеспечивает значение.</span><span class="sxs-lookup"><span data-stu-id="cfc59-135">The [DynamicResource Markup Extension](../../framework/wpf/advanced/dynamicresource-markup-extension.md) instead processes a key by creating an expression, and that expression remains unevaluated until the app runs, at which time the expression is evaluated and provides a value.</span></span>

<span data-ttu-id="cfc59-136">Приведенные ниже соображения могут повлиять на выбор использования ссылки на статический или динамический ресурс.</span><span class="sxs-lookup"><span data-stu-id="cfc59-136">When you reference a resource, the following considerations can influence whether you use a static resource reference or a dynamic resource reference:</span></span>

- <span data-ttu-id="cfc59-137">При определении общей конструкции создания ресурсов для приложения (на странице, в приложении, в свободном XAML или в сборке только для ресурсов) следует:</span><span class="sxs-lookup"><span data-stu-id="cfc59-137">When determining the overall design of how you create the resources for your app (per page, in the app, in loose XAML, or in a resource-only assembly), consider the following:</span></span>

- <span data-ttu-id="cfc59-138">Функциональность приложения.</span><span class="sxs-lookup"><span data-stu-id="cfc59-138">The app's functionality.</span></span> <span data-ttu-id="cfc59-139">Обновляется ли обновление ресурсов в режиме реального времени частью требований к приложению?</span><span class="sxs-lookup"><span data-stu-id="cfc59-139">Are updating resources in real-time part of your app requirements?</span></span>
- <span data-ttu-id="cfc59-140">Соответствующее поведение подстановки этого ссылочного типа ресурса.</span><span class="sxs-lookup"><span data-stu-id="cfc59-140">The respective lookup behavior of that resource reference type.</span></span>
- <span data-ttu-id="cfc59-141">Конкретное свойство или тип ресурса и собственное поведение этих типов.</span><span class="sxs-lookup"><span data-stu-id="cfc59-141">The particular property or resource type, and the native behavior of those types.</span></span>

## <a name="static-resources"></a><span data-ttu-id="cfc59-142">Статические ресурсы</span><span class="sxs-lookup"><span data-stu-id="cfc59-142">Static resources</span></span>

<span data-ttu-id="cfc59-143">Ссылки на статические ресурсы лучше всего использовать в указанных ниже случаях.</span><span class="sxs-lookup"><span data-stu-id="cfc59-143">Static resource references work best for the following circumstances:</span></span>

- <span data-ttu-id="cfc59-144">Дизайн приложения концентрирует большую часть своих ресурсов в словарях ресурсов на странице или уровне приложения.</span><span class="sxs-lookup"><span data-stu-id="cfc59-144">Your app design concentrates most of its resources into page or application-level resource dictionaries.</span></span> <span data-ttu-id="cfc59-145">Статические ссылки ресурсов не переоцениваются на основе поведения времени выполнения, например перезагрузки страницы.</span><span class="sxs-lookup"><span data-stu-id="cfc59-145">Static resource references aren't reevaluated based on runtime behaviors, such as reloading a page.</span></span> <span data-ttu-id="cfc59-146">Таким образом, может быть некоторое преимущество производительности, чтобы избежать большого числа динамических ссылок ресурсов, когда они не являются необходимыми на основе вашего ресурса и дизайна приложения.</span><span class="sxs-lookup"><span data-stu-id="cfc59-146">So there can be some performance benefit to avoiding large numbers of dynamic resource references when they aren't necessary based on your resource and app design.</span></span>

- <span data-ttu-id="cfc59-147">Вы устанавливаете значение свойства, которое не <xref:System.Windows.DependencyObject> на <xref:System.Windows.Freezable>или .</span><span class="sxs-lookup"><span data-stu-id="cfc59-147">You're setting the value of a property that isn't on a <xref:System.Windows.DependencyObject> or a <xref:System.Windows.Freezable>.</span></span>

- <span data-ttu-id="cfc59-148">Вы создаете словарь ресурсов, который будет компилирован в DLL и упакован как часть приложения или совместно между приложениями.</span><span class="sxs-lookup"><span data-stu-id="cfc59-148">You're creating a resource dictionary that will be compiled into a DLL and packaged as part of the app or shared between apps.</span></span>

- <span data-ttu-id="cfc59-149">Вы создаете тему для пользовательского управления и определяете ресурсы, которые используются в темах.</span><span class="sxs-lookup"><span data-stu-id="cfc59-149">You're creating a theme for a custom control and are defining resources that are used within the themes.</span></span> <span data-ttu-id="cfc59-150">В этом случае обычно не требуется динамическое поведение поиска ссылки ресурса; вместо этого требуется поведение ссылки статического ресурса, чтобы поиск был предсказуемым и автономным для темы.</span><span class="sxs-lookup"><span data-stu-id="cfc59-150">For this case, you typically do not want the dynamic resource reference lookup behavior; you instead want the static resource reference behavior so that the lookup is predictable and self-contained to the theme.</span></span> <span data-ttu-id="cfc59-151">С динамической ссылкой ресурса, даже ссылка в теме остается неоцененной до времени выполнения.</span><span class="sxs-lookup"><span data-stu-id="cfc59-151">With a dynamic resource reference, even a reference within a theme is left unevaluated until run-time.</span></span> <span data-ttu-id="cfc59-152">и есть шанс, что, когда тема применяется, некоторые местные элементы будут переопределять ключ, что ваша тема пытается ссылаться, и локальный элемент будет падать до самой темы в поиске.</span><span class="sxs-lookup"><span data-stu-id="cfc59-152">and there is a chance that when the theme is applied, some local element will redefine a key that your theme is trying to reference, and the local element will fall prior to the theme itself in the lookup.</span></span> <span data-ttu-id="cfc59-153">Если это произойдет, ваша тема не будет вести себя, как ожидалось.</span><span class="sxs-lookup"><span data-stu-id="cfc59-153">If that happens, your theme will not behave as expected.</span></span>

- <span data-ttu-id="cfc59-154">Вы используете ресурсы для установки большого количества свойств зависимостей.</span><span class="sxs-lookup"><span data-stu-id="cfc59-154">You're using resources to set large numbers of dependency properties.</span></span> <span data-ttu-id="cfc59-155">Свойства зависимости имеют эффективное кэширование значений, включенное системой свойств, поэтому, если вы предоставляете значение для свойства зависимости, которое может быть оценено во время загрузки, свойство зависимости не обязано проверять переоцененное выражение и может вернуть последнее эффективное значение.</span><span class="sxs-lookup"><span data-stu-id="cfc59-155">Dependency properties have effective value caching as enabled by the property system, so if you provide a value for a dependency property that can be evaluated at load time, the dependency property doesn't have to check for a reevaluated expression and can return the last effective value.</span></span> <span data-ttu-id="cfc59-156">Этот метод может обеспечить выигрыш в производительности.</span><span class="sxs-lookup"><span data-stu-id="cfc59-156">This technique can be a performance benefit.</span></span>

- <span data-ttu-id="cfc59-157">Вы хотите изменить базовый ресурс для всех потребителей, или вы хотите сохранить отдельные экземпляры для каждого потребителя с помощью [x:Shared Attribute](../xaml-services/xshared-attribute.md).</span><span class="sxs-lookup"><span data-stu-id="cfc59-157">You want to change the underlying resource for all consumers, or you want to maintain separate writable instances for each consumer by using the [x:Shared Attribute](../xaml-services/xshared-attribute.md).</span></span>

### <a name="static-resource-lookup-behavior"></a><span data-ttu-id="cfc59-158">Поведение подстановки статического ресурса</span><span class="sxs-lookup"><span data-stu-id="cfc59-158">Static resource lookup behavior</span></span>

<span data-ttu-id="cfc59-159">Ниже описывается процесс поиска, который автоматически происходит, когда на статический ресурс ссылается свойство или элемент:</span><span class="sxs-lookup"><span data-stu-id="cfc59-159">The following describes the lookup process that automatically happens when a static resource is referenced by a property or element:</span></span>

01. <span data-ttu-id="cfc59-160">Процесс подстановки ищет запрошенный ключ в словаре ресурсов, определенном элементом, который устанавливает это свойство.</span><span class="sxs-lookup"><span data-stu-id="cfc59-160">The lookup process checks for the requested key within the resource dictionary defined by the element that sets the property.</span></span>

01. <span data-ttu-id="cfc59-161">Затем процесс поиска пересекает логическое дерево вверх к родительскому элементу и его словарю ресурсов.</span><span class="sxs-lookup"><span data-stu-id="cfc59-161">The lookup process then traverses the logical tree upward to the parent element and its resource dictionary.</span></span> <span data-ttu-id="cfc59-162">Этот процесс продолжается до тех пор, пока не будет достигнут корневой элемент.</span><span class="sxs-lookup"><span data-stu-id="cfc59-162">This process continues until the root element is reached.</span></span>

01. <span data-ttu-id="cfc59-163">Ресурсы приложений проверяются.</span><span class="sxs-lookup"><span data-stu-id="cfc59-163">App resources are checked.</span></span> <span data-ttu-id="cfc59-164">Ресурсы приложения — это те ресурсы в <xref:System.Windows.Application> словаре ресурсов, который определяется объектом для приложения WPF.</span><span class="sxs-lookup"><span data-stu-id="cfc59-164">App resources are those resources within the resource dictionary that is defined by the <xref:System.Windows.Application> object for your WPF app.</span></span>

<span data-ttu-id="cfc59-165">Ссылки на статический ресурс из словаря ресурсов должны указывать на ресурс, уже определенный лексически до ссылки на ресурс.</span><span class="sxs-lookup"><span data-stu-id="cfc59-165">Static resource references from within a resource dictionary must reference a resource that has already been defined lexically before the resource reference.</span></span> <span data-ttu-id="cfc59-166">Опережающие ссылки не могут быть разрешены ссылкой на статический ресурс.</span><span class="sxs-lookup"><span data-stu-id="cfc59-166">Forward references cannot be resolved by a static resource reference.</span></span> <span data-ttu-id="cfc59-167">По этой причине спроектируйте структуру словаря ресурсов таким образом, чтобы ресурсы определялись в начале или вблизи каждого соответствующего словаря ресурсов.</span><span class="sxs-lookup"><span data-stu-id="cfc59-167">For this reason, design your resource dictionary structure such that resources are defined at or near the beginning of each respective resource dictionary.</span></span>

<span data-ttu-id="cfc59-168">Статический поиск ресурсов может распространяться на темы или на системные ресурсы, но этот поиск поддерживается только потому, что загрузчик XAML откладывает запрос.</span><span class="sxs-lookup"><span data-stu-id="cfc59-168">Static resource lookup can extend into themes or into system resources, but this lookup is supported only because the XAML loader defers the request.</span></span> <span data-ttu-id="cfc59-169">Отсрочка необходима для того, чтобы тема выполнения в момент загрузки страницы была правильно применима к приложению.</span><span class="sxs-lookup"><span data-stu-id="cfc59-169">The deferral is necessary so that the runtime theme at the time the page loads applies properly to the app.</span></span> <span data-ttu-id="cfc59-170">Тем не менее, статические ссылки ресурсов на ключи, которые, как известно, существуют только в темах или как системные ресурсы не рекомендуется, потому что такие ссылки не переоцениваются, если тема изменена пользователем в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="cfc59-170">However, static resource references to keys that are known to only exist in themes or as system resources aren't recommended, because such references aren't reevaluated if the theme is changed by the user in real time.</span></span> <span data-ttu-id="cfc59-171">Ссылки на динамические ресурсы более надежны при запросе темы или системных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="cfc59-171">A dynamic resource reference is more reliable when you request theme or system resources.</span></span> <span data-ttu-id="cfc59-172">Исключением является случай, когда элемент темы сам запрашивает другой ресурс.</span><span class="sxs-lookup"><span data-stu-id="cfc59-172">The exception is when a theme element itself requests another resource.</span></span> <span data-ttu-id="cfc59-173">Такие ссылки должны быть статическими по причинам, упомянутым выше.</span><span class="sxs-lookup"><span data-stu-id="cfc59-173">These references should be static resource references, for the reasons mentioned earlier.</span></span>

<span data-ttu-id="cfc59-174">Поведение исключения, если не найдена ссылка статического ресурса, изменяется.</span><span class="sxs-lookup"><span data-stu-id="cfc59-174">The exception behavior if a static resource reference isn't found varies.</span></span> <span data-ttu-id="cfc59-175">Если ресурс был задержан, то исключение возникнет во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="cfc59-175">If the resource was deferred, then the exception occurs at runtime.</span></span> <span data-ttu-id="cfc59-176">Если ресурс не был задержан, исключение возникнет во время загрузки.</span><span class="sxs-lookup"><span data-stu-id="cfc59-176">If the resource was not deferred, the exception occurs at load time.</span></span>

## <a name="dynamic-resources"></a><span data-ttu-id="cfc59-177">Динамические ресурсы</span><span class="sxs-lookup"><span data-stu-id="cfc59-177">Dynamic resources</span></span>

<span data-ttu-id="cfc59-178">Динамические ресурсы работают лучше всего, когда:</span><span class="sxs-lookup"><span data-stu-id="cfc59-178">Dynamic resources work best when:</span></span>

- <span data-ttu-id="cfc59-179">Значение ресурса, включая системные ресурсы, или ресурсы, которые в противном случае пользовательские наборы, зависит от условий, которые не известны до времени выполнения.</span><span class="sxs-lookup"><span data-stu-id="cfc59-179">The value of the resource, including system resources, or resources that are otherwise user settable, depends on conditions that aren't known until runtime.</span></span> <span data-ttu-id="cfc59-180">Например, можно создать значения сеттера, которые относятся <xref:System.Windows.SystemFonts>к <xref:System.Windows.SystemParameters>свойствам системы как подверженные, <xref:System.Windows.SystemColors>или.</span><span class="sxs-lookup"><span data-stu-id="cfc59-180">For example, you can create setter values that refer to system properties as exposed by <xref:System.Windows.SystemColors>, <xref:System.Windows.SystemFonts>, or <xref:System.Windows.SystemParameters>.</span></span> <span data-ttu-id="cfc59-181">Эти значения являются действительно динамическими, так как они в конечном счете берутся из среды выполнения пользователя и операционной системы.</span><span class="sxs-lookup"><span data-stu-id="cfc59-181">These values are truly dynamic because they ultimately come from the runtime environment of the user and operating system.</span></span> <span data-ttu-id="cfc59-182">Кроме того, возможны темы уровня приложения, которые могут изменяться, когда при доступе к ресурсу уровня страницы также необходимо отследить изменения.</span><span class="sxs-lookup"><span data-stu-id="cfc59-182">You might also have application-level themes that can change, where page-level resource access must also capture the change.</span></span>

- <span data-ttu-id="cfc59-183">Вы создаете или ссылаетесь на тематические стили для пользовательского управления.</span><span class="sxs-lookup"><span data-stu-id="cfc59-183">You're creating or referencing theme styles for a custom control.</span></span>

- <span data-ttu-id="cfc59-184">Вы намерены настроить содержимое приложения <xref:System.Windows.ResourceDictionary> в течение всего срока службы приложения.</span><span class="sxs-lookup"><span data-stu-id="cfc59-184">You intend to adjust the contents of a <xref:System.Windows.ResourceDictionary> during an app lifetime.</span></span>

- <span data-ttu-id="cfc59-185">Когда имеется сложная структура ресурсов с взаимозависимостями, где могут потребоваться опережающие ссылки.</span><span class="sxs-lookup"><span data-stu-id="cfc59-185">You have a complicated resource structure that has interdependencies, where a forward reference may be required.</span></span> <span data-ttu-id="cfc59-186">Статические ссылки на ресурсы не поддерживают передние ссылки, но динамические ссылки на ресурсы поддерживают их, поскольку ресурс не нуждается в оценке до времени выполнения, и поэтому передние ссылки не являются соответствующей концепцией.</span><span class="sxs-lookup"><span data-stu-id="cfc59-186">Static resource references do not support forward references, but dynamic resource references do support them because the resource doesn't need to be evaluated until runtime, and forward references are therefore not a relevant concept.</span></span>

- <span data-ttu-id="cfc59-187">Вы ссылаетесь на ресурс, который является большим с точки зрения компиляции или рабочего набора, и ресурс может быть использован не сразу, когда страница загружается.</span><span class="sxs-lookup"><span data-stu-id="cfc59-187">You're referencing a resource that is large from the perspective of a compile or working set, and the resource might not be used immediately when the page loads.</span></span> <span data-ttu-id="cfc59-188">Статические ссылки на ресурсы всегда загружаются с XAML при загрузке страницы.</span><span class="sxs-lookup"><span data-stu-id="cfc59-188">Static resource references always load from XAML when the page loads.</span></span> <span data-ttu-id="cfc59-189">Тем не менее, динамическая ссылка ресурса не загружается до тех пор, пока она не будет использована.</span><span class="sxs-lookup"><span data-stu-id="cfc59-189">However, a dynamic resource reference doesn't load until it's used.</span></span>

- <span data-ttu-id="cfc59-190">Вы создаете стиль, в котором значения сеттера могут исходить от других значений, на которые влияют темы или другие настройки пользователя.</span><span class="sxs-lookup"><span data-stu-id="cfc59-190">You're creating a style where setter values might come from other values that are influenced by themes or other user settings.</span></span>

- <span data-ttu-id="cfc59-191">Ресурсы применяются к элементам, которые могут быть восстановлены в логическом дереве в течение жизни приложения.</span><span class="sxs-lookup"><span data-stu-id="cfc59-191">You're applying resources to elements that might be reparented in the logical tree during app lifetime.</span></span> <span data-ttu-id="cfc59-192">Изменение родительского элемента также потенциально изменяет область подстановки ресурса, так что, если необходим пересчет ресурса в новой области элемента с измененным порядком наследования, всегда следует использовать ссылку на динамический ресурс.</span><span class="sxs-lookup"><span data-stu-id="cfc59-192">Changing the parent also potentially changes the resource lookup scope, so if you want the resource for a reparented element to be reevaluated based on the new scope, always use a dynamic resource reference.</span></span>

### <a name="dynamic-resource-lookup-behavior"></a><span data-ttu-id="cfc59-193">Поведение подстановки динамического ресурса</span><span class="sxs-lookup"><span data-stu-id="cfc59-193">Dynamic resource lookup behavior</span></span>

<span data-ttu-id="cfc59-194">Поведение поиска ресурсов для динамической ссылки ресурса параллели <xref:System.Windows.FrameworkElement.FindResource%2A> поведение <xref:System.Windows.FrameworkElement.SetResourceReference%2A>поиска в коде, если вы звоните или:</span><span class="sxs-lookup"><span data-stu-id="cfc59-194">Resource lookup behavior for a dynamic resource reference parallels the lookup behavior in your code if you call <xref:System.Windows.FrameworkElement.FindResource%2A> or <xref:System.Windows.FrameworkElement.SetResourceReference%2A>:</span></span>

01. <span data-ttu-id="cfc59-195">Проверка поиска запрашиваемого ключа в словаре ресурса, определяемом элементом, который устанавливает свойство:</span><span class="sxs-lookup"><span data-stu-id="cfc59-195">The lookup checks for the requested key within the resource dictionary defined by the element that sets the property:</span></span>

    - <span data-ttu-id="cfc59-196">Если элемент определяет <xref:System.Windows.FrameworkElement.Style%2A> свойство, <xref:System.Windows.FrameworkElement.Style?displayProperty=fullName> элемент имеет <xref:System.Windows.Style.Resources> свой словарь проверен.</span><span class="sxs-lookup"><span data-stu-id="cfc59-196">If the element defines a <xref:System.Windows.FrameworkElement.Style%2A> property, the <xref:System.Windows.FrameworkElement.Style?displayProperty=fullName> of the element has its <xref:System.Windows.Style.Resources> dictionary checked.</span></span>

    - <span data-ttu-id="cfc59-197">Если элемент определяет <xref:System.Windows.Controls.Control.Template%2A> свойство, <xref:System.Windows.FrameworkTemplate.Resources?displayProperty=fullName> проверяется словарь элемента.</span><span class="sxs-lookup"><span data-stu-id="cfc59-197">If the element defines a <xref:System.Windows.Controls.Control.Template%2A> property, the <xref:System.Windows.FrameworkTemplate.Resources?displayProperty=fullName> dictionary of the element is checked.</span></span>

01. <span data-ttu-id="cfc59-198">Поиск пересекает логическое дерево вверх к родительскому элементу и его словарю ресурсов.</span><span class="sxs-lookup"><span data-stu-id="cfc59-198">The lookup traverses the logical tree upward to the parent element and its resource dictionary.</span></span> <span data-ttu-id="cfc59-199">Этот процесс продолжается до тех пор, пока не будет достигнут корневой элемент.</span><span class="sxs-lookup"><span data-stu-id="cfc59-199">This process continues until the root element is reached.</span></span>

01. <span data-ttu-id="cfc59-200">Ресурсы приложений проверяются.</span><span class="sxs-lookup"><span data-stu-id="cfc59-200">App resources are checked.</span></span> <span data-ttu-id="cfc59-201">Ресурсы приложений являются теми ресурсами в <xref:System.Windows.Application> словаре ресурсов, которые определяются объектом для приложения WPF.</span><span class="sxs-lookup"><span data-stu-id="cfc59-201">App resources are those resources within the resource dictionary that are defined by the <xref:System.Windows.Application> object for your WPF app.</span></span>

01. <span data-ttu-id="cfc59-202">Словарь тематиного ресурса проверяется на активную тему.</span><span class="sxs-lookup"><span data-stu-id="cfc59-202">The theme resource dictionary is checked for the currently active theme.</span></span> <span data-ttu-id="cfc59-203">Если тема изменяется во время выполнения, значение будет повторно вычислено.</span><span class="sxs-lookup"><span data-stu-id="cfc59-203">If the theme changes at runtime, the value is reevaluated.</span></span>

01. <span data-ttu-id="cfc59-204">Проверяются системные ресурсы.</span><span class="sxs-lookup"><span data-stu-id="cfc59-204">System resources are checked.</span></span>

<span data-ttu-id="cfc59-205">Поведение исключения (если таковое имеется) варьируется.</span><span class="sxs-lookup"><span data-stu-id="cfc59-205">Exception behavior (if any) varies:</span></span>

- <span data-ttu-id="cfc59-206">Если ресурс был запрошен <xref:System.Windows.FrameworkElement.FindResource%2A> вызовом и не найден, выбрасывается исключение.</span><span class="sxs-lookup"><span data-stu-id="cfc59-206">If a resource was requested by a <xref:System.Windows.FrameworkElement.FindResource%2A> call and was not found, an exception is thrown.</span></span>

- <span data-ttu-id="cfc59-207">Если ресурс был запрошен <xref:System.Windows.FrameworkElement.TryFindResource%2A> вызовом и не найден, не выбрасывается исключение, а возвращенное значение . `null`</span><span class="sxs-lookup"><span data-stu-id="cfc59-207">If a resource was requested by a <xref:System.Windows.FrameworkElement.TryFindResource%2A> call and was not found, no exception is thrown, and the returned value is `null`.</span></span> <span data-ttu-id="cfc59-208">Если набор свойств не принимает, `null`то все еще возможно, что более глубокое исключение будет брошено, в зависимости от индивидуального свойства устанавливается.</span><span class="sxs-lookup"><span data-stu-id="cfc59-208">If the property being set doesn't accept `null`, then it's still possible that a deeper exception will be thrown, depending on the individual property being set.</span></span>

- <span data-ttu-id="cfc59-209">Если ресурс был запрошен динамической ссылкой ресурса в XAML и не найден, то поведение зависит от общей системы свойств.</span><span class="sxs-lookup"><span data-stu-id="cfc59-209">If a resource was requested by a dynamic resource reference in XAML and was not found, then the behavior depends on the general property system.</span></span> <span data-ttu-id="cfc59-210">Общее поведение, как будто не операция настройки свойства произошла на уровне, на котором существует ресурс.</span><span class="sxs-lookup"><span data-stu-id="cfc59-210">The general behavior is as if no property setting operation occurred at the level where the resource exists.</span></span> <span data-ttu-id="cfc59-211">Например, если вы попытаетесь установить фон на отдельном элементе кнопки с помощью ресурса, который не может быть оценен, то никакие результаты набора значений не могут быть получены от других участников системы свойств и приоритета значения.</span><span class="sxs-lookup"><span data-stu-id="cfc59-211">For instance, if you attempt to set the background on an individual button element using a resource that could not be evaluated, then no value set results, but the effective value can still come from other participants in the property system and value precedence.</span></span> <span data-ttu-id="cfc59-212">Например, фоновое значение может по-прежнему исходить от локально определенного стиля кнопок или от стиля темы.</span><span class="sxs-lookup"><span data-stu-id="cfc59-212">For instance, the background value might still come from a locally defined button style or from the theme style.</span></span> <span data-ttu-id="cfc59-213">Для свойств, не определяемых стилями тем, эффективное значение после неудачной оценки ресурсов может исходить от значения по умолчанию в метаданных свойств.</span><span class="sxs-lookup"><span data-stu-id="cfc59-213">For properties that aren't defined by theme styles, the effective value after a failed resource evaluation might come from the default value in the property metadata.</span></span>

### <a name="restrictions"></a><span data-ttu-id="cfc59-214">Ограничения</span><span class="sxs-lookup"><span data-stu-id="cfc59-214">Restrictions</span></span>

<span data-ttu-id="cfc59-215">Для ссылок на динамические ресурсы есть некоторые важные ограничения.</span><span class="sxs-lookup"><span data-stu-id="cfc59-215">Dynamic resource references have some notable restrictions.</span></span> <span data-ttu-id="cfc59-216">По крайней мере одно из следующих условий должно быть правдой:</span><span class="sxs-lookup"><span data-stu-id="cfc59-216">At least one of the following conditions must be true:</span></span>

- <span data-ttu-id="cfc59-217">Свойство устанавливается должно быть <xref:System.Windows.FrameworkElement> свойство на или <xref:System.Windows.FrameworkContentElement>.</span><span class="sxs-lookup"><span data-stu-id="cfc59-217">The property being set must be a property on a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="cfc59-218">Это свойство должно <xref:System.Windows.DependencyProperty>быть поддержано .</span><span class="sxs-lookup"><span data-stu-id="cfc59-218">That property must be backed by a <xref:System.Windows.DependencyProperty>.</span></span>

- <span data-ttu-id="cfc59-219">Ссылка предназначена для `StyleSetter`значения в пределах .</span><span class="sxs-lookup"><span data-stu-id="cfc59-219">The reference is for a value within a `StyleSetter`.</span></span>

- <span data-ttu-id="cfc59-220">Имущество, устанавливаемое должно быть <xref:System.Windows.Freezable> свойством на том, <xref:System.Windows.FrameworkElement> что <xref:System.Windows.FrameworkContentElement> предоставляется <xref:System.Windows.Setter> как стоимость либо имущества, или значение.</span><span class="sxs-lookup"><span data-stu-id="cfc59-220">The property being set must be a property on a <xref:System.Windows.Freezable> that is provided as a value of either a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement> property, or a <xref:System.Windows.Setter> value.</span></span>

<span data-ttu-id="cfc59-221">Поскольку набор свойств должен <xref:System.Windows.DependencyProperty> <xref:System.Windows.Freezable> быть свойством или свойством, большинство изменений свойств может распространяться на uI, поскольку изменение свойства (измененная динамическая ценность ресурса) признается системой свойств.</span><span class="sxs-lookup"><span data-stu-id="cfc59-221">Because the property being set must be a <xref:System.Windows.DependencyProperty> or <xref:System.Windows.Freezable> property, most property changes can propagate to the UI because a property change (the changed dynamic resource value) is acknowledged by the property system.</span></span> <span data-ttu-id="cfc59-222">Большинство элементов управления включают логику, которая <xref:System.Windows.DependencyProperty> заставит другой макет элемента управления, если изменение и свойство может повлиять на макет.</span><span class="sxs-lookup"><span data-stu-id="cfc59-222">Most controls include logic that will force another layout of a control if a <xref:System.Windows.DependencyProperty> changes and that property might affect layout.</span></span> <span data-ttu-id="cfc59-223">Однако не все свойства, которые имеют [расширение DynamicResource Markup,](../../framework/wpf/advanced/dynamicresource-markup-extension.md) поскольку их стоимость гарантированно обеспечивают обновления в режиме реального времени в uI.</span><span class="sxs-lookup"><span data-stu-id="cfc59-223">However, not all properties that have a [DynamicResource Markup Extension](../../framework/wpf/advanced/dynamicresource-markup-extension.md) as their value are guaranteed to provide real time updates in the UI.</span></span> <span data-ttu-id="cfc59-224">Эта функциональность по-прежнему может варьироваться в зависимости от свойства, а также в зависимости от типа, который владеет собственностью, или даже логической структуры вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="cfc59-224">That functionality still might vary depending on the property, as well as depending on the type that owns the property, or even the logical structure of your app.</span></span>

## <a name="styles-datatemplates-and-implicit-keys"></a><span data-ttu-id="cfc59-225">Стили, данныешаблоны и неявные клавиши</span><span class="sxs-lookup"><span data-stu-id="cfc59-225">Styles, DataTemplates, and implicit keys</span></span>

<span data-ttu-id="cfc59-226">Хотя все элементы в элементе <xref:System.Windows.ResourceDictionary> должны иметь ключ, это не `x:Key`означает, что все ресурсы должны иметь явный .</span><span class="sxs-lookup"><span data-stu-id="cfc59-226">Although all items in a <xref:System.Windows.ResourceDictionary> must have a key, that doesn't mean that all resources must have an explicit `x:Key`.</span></span> <span data-ttu-id="cfc59-227">Некоторые типы объектов поддерживают неявный ключ, если он определен как ресурс, где значение ключа связано со значением другого свойства.</span><span class="sxs-lookup"><span data-stu-id="cfc59-227">Several object types support an implicit key when defined as a resource, where the key value is tied to the value of another property.</span></span> <span data-ttu-id="cfc59-228">Этот тип ключа известен как неявный `x:Key` ключ, в то время как атрибут является явным ключом.</span><span class="sxs-lookup"><span data-stu-id="cfc59-228">This type of key is known as an implicit key, whereas an `x:Key` attribute is an explicit key.</span></span> <span data-ttu-id="cfc59-229">Любой неявный ключ можно перезаписать, указав явный ключ.</span><span class="sxs-lookup"><span data-stu-id="cfc59-229">You can overwrite any implicit key by specifying an explicit key.</span></span>

<span data-ttu-id="cfc59-230">Одним из важных сценариев <xref:System.Windows.Style>для ресурсов является определение .</span><span class="sxs-lookup"><span data-stu-id="cfc59-230">One important scenario for resources is when you define a <xref:System.Windows.Style>.</span></span> <span data-ttu-id="cfc59-231">В самом <xref:System.Windows.Style> деле, почти всегда определяется как запись в словаре ресурса, потому что стили по своей сути предназначены для повторного использования.</span><span class="sxs-lookup"><span data-stu-id="cfc59-231">In fact, a <xref:System.Windows.Style> is almost always defined as an entry in a resource dictionary, because styles are inherently intended for reuse.</span></span> <span data-ttu-id="cfc59-232">Для получения дополнительной информации о стилях, [см Стиль и Templating](styles-templates-overview.md).</span><span class="sxs-lookup"><span data-stu-id="cfc59-232">For more information about styles, see [Styling and Templating](styles-templates-overview.md).</span></span>

<span data-ttu-id="cfc59-233">С помощью неявного ключа можно создавать стили для элементов управления либо ссылаться на них.</span><span class="sxs-lookup"><span data-stu-id="cfc59-233">Styles for controls can be both created with and referenced with an implicit key.</span></span> <span data-ttu-id="cfc59-234">Стили темы, определяющие внешний вид элемента управления по умолчанию, используют этот неявный ключ.</span><span class="sxs-lookup"><span data-stu-id="cfc59-234">The theme styles that define the default appearance of a control rely on this implicit key.</span></span> <span data-ttu-id="cfc59-235">С точки зрения запроса, неявным <xref:System.Type> ключом является сам контроль.</span><span class="sxs-lookup"><span data-stu-id="cfc59-235">From the standpoint of requesting it, the implicit key is the <xref:System.Type> of the control itself.</span></span> <span data-ttu-id="cfc59-236">С точки зрения определения ресурсов, неявным ключом является <xref:System.Windows.Style.TargetType%2A> стиль.</span><span class="sxs-lookup"><span data-stu-id="cfc59-236">From the standpoint of defining the resources, the implicit key is the <xref:System.Windows.Style.TargetType%2A> of the style.</span></span> <span data-ttu-id="cfc59-237">Поэтому, если вы создаете темы для пользовательского управления или создаете стили, которые взаимодействуют с <xref:System.Windows.Style>существующими стилями тем, вам не нужно указывать [директиву x:Key](../xaml-services/xkey-directive.md) для этого.</span><span class="sxs-lookup"><span data-stu-id="cfc59-237">Therefore, if you're creating themes for custom controls or creating styles that interact with existing theme styles, you do not need to specify an [x:Key Directive](../xaml-services/xkey-directive.md) for that <xref:System.Windows.Style>.</span></span> <span data-ttu-id="cfc59-238">А если требуется использовать стили из тем, то вообще не нужно задавать стиль.</span><span class="sxs-lookup"><span data-stu-id="cfc59-238">And if you want to use the themed styles, you do not need to specify any style at all.</span></span> <span data-ttu-id="cfc59-239">Например, работает следующее определение стиля, даже если <xref:System.Windows.Style> у ресурса нет ключа:</span><span class="sxs-lookup"><span data-stu-id="cfc59-239">For instance, the following style definition works, even though the <xref:System.Windows.Style> resource doesn't appear to have a key:</span></span>

[!code-xaml[FEResourceSH_snip#ImplicitStyle](~/samples/snippets/csharp/VS_Snippets_Wpf/FEResourceSH_snip/CS/page2.xaml#implicitstyle)]

<span data-ttu-id="cfc59-240">Этот стиль действительно имеет ключ: `typeof(System.Windows.Controls.Button)`неявный ключ .</span><span class="sxs-lookup"><span data-stu-id="cfc59-240">That style really does have a key: the implicit key `typeof(System.Windows.Controls.Button)`.</span></span> <span data-ttu-id="cfc59-241">В разметке можно <xref:System.Windows.Style.TargetType%2A> указать непосредственно в качестве имени типа (или вы можете дополнительно использовать [«x:Type...»](../xaml-services/xtype-markup-extension.md)</span><span class="sxs-lookup"><span data-stu-id="cfc59-241">In markup, you can specify a <xref:System.Windows.Style.TargetType%2A> directly as the type name (or you can optionally use [{x:Type...}](../xaml-services/xtype-markup-extension.md)</span></span> <span data-ttu-id="cfc59-242">вернуть <xref:System.Type>.</span><span class="sxs-lookup"><span data-stu-id="cfc59-242">to return a <xref:System.Type>.</span></span>

<span data-ttu-id="cfc59-243">С помощью механизмов стиля темы по умолчанию, используемых WPF, этот стиль применяется как стиль выполнения <xref:System.Windows.Controls.Button> страницы, даже если <xref:System.Windows.Controls.Button> сам по себе не пытается указать свое <xref:System.Windows.FrameworkElement.Style%2A> свойство или конкретную ссылку ресурса на стиль.</span><span class="sxs-lookup"><span data-stu-id="cfc59-243">Through the default theme style mechanisms used by WPF, that style is applied as the runtime style of a <xref:System.Windows.Controls.Button> on the page, even though the <xref:System.Windows.Controls.Button> itself doesn't attempt to specify its <xref:System.Windows.FrameworkElement.Style%2A> property or a specific resource reference to the style.</span></span> <span data-ttu-id="cfc59-244">Ваш стиль, определяемый на странице, находится ранее в последовательности поиска, чем стиль словаря темы, используя тот же ключ, что стиль словаря темы.</span><span class="sxs-lookup"><span data-stu-id="cfc59-244">Your style defined in the page is found earlier in the lookup sequence than the theme dictionary style, using the same key that the theme dictionary style has.</span></span> <span data-ttu-id="cfc59-245">Вы можете `<Button>Hello</Button>` просто указать в любом месте <xref:System.Windows.Style.TargetType%2A> страницы, и стиль, который вы определили `Button` с будет применяться к этой кнопке.</span><span class="sxs-lookup"><span data-stu-id="cfc59-245">You could just specify `<Button>Hello</Button>` anywhere in the page, and the style you defined with <xref:System.Windows.Style.TargetType%2A> of `Button` would apply to that button.</span></span> <span data-ttu-id="cfc59-246">Если вы хотите, вы все еще можете явно ключ <xref:System.Windows.Style.TargetType%2A> стиль с тем же значением типа, как для ясности в разметке, но это необязательно.</span><span class="sxs-lookup"><span data-stu-id="cfc59-246">If you want, you can still explicitly key the style with the same type value as <xref:System.Windows.Style.TargetType%2A> for clarity in your markup, but that is optional.</span></span>

<span data-ttu-id="cfc59-247">Неявные ключи для стилей <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> `true`не применяются на элементе управления, если это .</span><span class="sxs-lookup"><span data-stu-id="cfc59-247">Implicit keys for styles do not apply on a control if <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> is `true`.</span></span> <span data-ttu-id="cfc59-248">(Также обратите <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> внимание, что может быть установлен как часть родного поведения для класса управления, а не явно на экземпляре элемента управления.) Кроме того, для поддержки неявных ключей для <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> сценариев производных классов элемент управления должен переопределять (все существующие элементы управления, предоставляемые в рамках WPF, включают этот переопределение).</span><span class="sxs-lookup"><span data-stu-id="cfc59-248">(Also note that <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> might be set as part of native behavior for the control class, rather than explicitly on an instance of the control.) Also, in order to support implicit keys for derived class scenarios, the control must override <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> (all existing controls provided as part of WPF include this override).</span></span> <span data-ttu-id="cfc59-249">Для получения дополнительной информации о стилях, темах и дизайне управления [см.](../../framework/wpf/controls/guidelines-for-designing-stylable-controls.md)</span><span class="sxs-lookup"><span data-stu-id="cfc59-249">For more information about styles, themes, and control design, see [Guidelines for Designing Stylable Controls](../../framework/wpf/controls/guidelines-for-designing-stylable-controls.md).</span></span>

<span data-ttu-id="cfc59-250"><xref:System.Windows.DataTemplate>также имеет неявный ключ.</span><span class="sxs-lookup"><span data-stu-id="cfc59-250"><xref:System.Windows.DataTemplate> also has an implicit key.</span></span> <span data-ttu-id="cfc59-251">Неявным <xref:System.Windows.DataTemplate> ключом <xref:System.Windows.DataTemplate.DataType%2A> для a является стоимость недвижимости.</span><span class="sxs-lookup"><span data-stu-id="cfc59-251">The implicit key for a <xref:System.Windows.DataTemplate> is the <xref:System.Windows.DataTemplate.DataType%2A> property value.</span></span> <span data-ttu-id="cfc59-252"><xref:System.Windows.DataTemplate.DataType%2A>также может быть указано как имя типа, а не явно с помощью [«x:Type...».](../xaml-services/xtype-markup-extension.md)</span><span class="sxs-lookup"><span data-stu-id="cfc59-252"><xref:System.Windows.DataTemplate.DataType%2A> can also be specified as the name of the type rather than explicitly using [{x:Type...}](../xaml-services/xtype-markup-extension.md).</span></span> <span data-ttu-id="cfc59-253">Для получения подробной информации [см.](../../framework/wpf/data/data-templating-overview.md)</span><span class="sxs-lookup"><span data-stu-id="cfc59-253">For details, see [Data Templating Overview](../../framework/wpf/data/data-templating-overview.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="cfc59-254">См. также</span><span class="sxs-lookup"><span data-stu-id="cfc59-254">See also</span></span>

- <xref:System.Windows.ResourceDictionary>
- [<span data-ttu-id="cfc59-255">Ресурсы приложений</span><span class="sxs-lookup"><span data-stu-id="cfc59-255">Application resources</span></span>](../../framework/wpf/advanced/optimizing-performance-application-resources.md)
- [<span data-ttu-id="cfc59-256">Ресурсы и код</span><span class="sxs-lookup"><span data-stu-id="cfc59-256">Resources and code</span></span>](../../framework/wpf/advanced/resources-and-code.md)
- [<span data-ttu-id="cfc59-257">Определение и ссылка ресурса</span><span class="sxs-lookup"><span data-stu-id="cfc59-257">Define and reference a resource</span></span>](../../framework/wpf/advanced/how-to-define-and-reference-a-resource.md)
- [<span data-ttu-id="cfc59-258">Обзор управления приложениями</span><span class="sxs-lookup"><span data-stu-id="cfc59-258">Application management overview</span></span>](../../framework/wpf/app-development/application-management-overview.md)
- [<span data-ttu-id="cfc59-259">x:Расширение разметки типа</span><span class="sxs-lookup"><span data-stu-id="cfc59-259">x:Type markup extension</span></span>](../xaml-services/xtype-markup-extension.md)
- [<span data-ttu-id="cfc59-260">Расширение разметки StaticResource</span><span class="sxs-lookup"><span data-stu-id="cfc59-260">StaticResource markup extension</span></span>](../../framework/wpf/advanced/staticresource-markup-extension.md)
- [<span data-ttu-id="cfc59-261">Расширение разметки DynamicResource</span><span class="sxs-lookup"><span data-stu-id="cfc59-261">DynamicResource markup extension</span></span>](../../framework/wpf/advanced/dynamicresource-markup-extension.md)
