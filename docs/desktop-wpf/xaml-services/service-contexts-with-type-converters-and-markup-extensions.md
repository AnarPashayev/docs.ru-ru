---
title: Служебные контексты, доступные для расширений разметки и преобразователей типов
ms.date: 03/30/2017
helpviewer_keywords:
- XAML [XAML Services], type converter services how-to
ms.assetid: b4dad00f-03da-4579-a4e9-d8d72d2ccbce
ms.openlocfilehash: 59c4385eb4df8c622be6164cdb0a1a911c445ca8
ms.sourcegitcommit: c2d9718996402993cf31541f11e95531bc68bad0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/27/2020
ms.locfileid: "81432896"
---
# <a name="service-contexts-available-to-type-converters-and-markup-extensions"></a><span data-ttu-id="9a81d-102">Служебные контексты, доступные для расширений разметки и преобразователей типов</span><span class="sxs-lookup"><span data-stu-id="9a81d-102">Service Contexts Available to Type Converters and Markup Extensions</span></span>
<span data-ttu-id="9a81d-103">Авторам типов, поддерживающих использование преобразователей типов и расширений разметки, часто необходимы контекстные сведения о расположении использования в разметке или в окружающей структуре графа объектов.</span><span class="sxs-lookup"><span data-stu-id="9a81d-103">Authors of the types that support type converter and markup extension usages must often have contextual information about where a usage is located in the markup, or in surrounding object graph structure.</span></span> <span data-ttu-id="9a81d-104">Сведения могут понадобиться, чтобы правильно создать экземпляр предоставленного объекта или чтобы объект ссылался на существующие объекты в графе объектов.</span><span class="sxs-lookup"><span data-stu-id="9a81d-104">Information might be needed so that the provided object is instantiated correctly or so that object references to existing objects in the object graph can be made.</span></span> <span data-ttu-id="9a81d-105">При использовании служб Ысипотов .NET XAML контекст, который может потребоваться, разоблачается как ряд интерфейсов служб.</span><span class="sxs-lookup"><span data-stu-id="9a81d-105">When using .NET XAML Services, the context that might be required is exposed as a series of service interfaces.</span></span> <span data-ttu-id="9a81d-106">Код поддержки преобразователей типов или разметки расширения может запросить службу, используя контекст поставщика службы, доступный и переданный из <xref:System.Xaml.XamlObjectWriter> или связанных типов.</span><span class="sxs-lookup"><span data-stu-id="9a81d-106">Type converter or markup extension support code can query for a service by using a service provider context that is available and passed through from <xref:System.Xaml.XamlObjectWriter> or related types.</span></span> <span data-ttu-id="9a81d-107">Контекст схемы XAML доступен напрямую через одну такую службу.</span><span class="sxs-lookup"><span data-stu-id="9a81d-107">The XAML schema context is directly available through one such service.</span></span> <span data-ttu-id="9a81d-108">В этом разделе описывается порядок доступа к контексту службы из реализации преобразователя значений и указывается список доступных служб и их роли.</span><span class="sxs-lookup"><span data-stu-id="9a81d-108">This topic describes how to access service contexts from a value converter implementation, and lists typically available services and their roles.</span></span>

## <a name="obtaining-services"></a><span data-ttu-id="9a81d-109">Получение служб</span><span class="sxs-lookup"><span data-stu-id="9a81d-109">Obtaining Services</span></span>

<span data-ttu-id="9a81d-110">При реализации преобразователя значений часто требуется доступ к определенному контексту, в котором он применяется.</span><span class="sxs-lookup"><span data-stu-id="9a81d-110">As an implementer of a value converter, you often need access to some type of context in which the value converter is applied.</span></span> <span data-ttu-id="9a81d-111">Этот контекст может включать информацию, такую как активный контекст схемы XAML, доступ к системе отображения типов, которую предоставляют контекст схемы XAML и автор объектов XAML, и так далее.</span><span class="sxs-lookup"><span data-stu-id="9a81d-111">This context might include information such as the active XAML schema context, access to the type-mapping system that the XAML schema context and XAML object writer provide, and so on.</span></span> <span data-ttu-id="9a81d-112">Службы, доступные для реализации расширения разметки или преобразователя типов, взаимодействуют с помощью параметров контекста, являющихся частью сигнатуры каждого виртуального метода.</span><span class="sxs-lookup"><span data-stu-id="9a81d-112">The services available for a markup extension or type converter implementation are communicated through the context parameters that are part of the signature of each virtual method.</span></span> <span data-ttu-id="9a81d-113">В каждом случае в контексте реализован класс <xref:System.IServiceProvider> , который может вызывать <xref:System.IServiceProvider.GetService%2A?displayProperty=nameWithType> для запроса службы.</span><span class="sxs-lookup"><span data-stu-id="9a81d-113">In every case, you have <xref:System.IServiceProvider> implemented in the context, and can call <xref:System.IServiceProvider.GetService%2A?displayProperty=nameWithType> to request a service.</span></span>

## <a name="services-for-a-markup-extension"></a><span data-ttu-id="9a81d-114">Службы для расширения разметки</span><span class="sxs-lookup"><span data-stu-id="9a81d-114">Services for a Markup Extension</span></span>

<span data-ttu-id="9a81d-115"><xref:System.Windows.Markup.MarkupExtension> содержит только один виртуальный метод <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="9a81d-115"><xref:System.Windows.Markup.MarkupExtension> has only one virtual method, <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>.</span></span> <span data-ttu-id="9a81d-116">Входной параметр `serviceProvider` определяет, как службы взаимодействуют с реализациями, когда расширение разметки вызывается обработчиком XAML.</span><span class="sxs-lookup"><span data-stu-id="9a81d-116">The input `serviceProvider` parameter is how the services are communicated to implementations when the markup extension is called by a XAML processor.</span></span> <span data-ttu-id="9a81d-117">В следующем псевдокоде показано, как реализация расширения разметки может запросить службы в <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>:</span><span class="sxs-lookup"><span data-stu-id="9a81d-117">The following pseudocode illustrates how a markup extension implementation might query for services in its <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>:</span></span>

```csharp
public override object ProvideValue(IServiceProvider serviceProvider)
{
...
    // Get the IXamlTypeResolver from the service provider
    if (serviceProvider == null)
    {
        throw new ArgumentNullException("serviceProvider");
    }
    IXamlTypeResolver xamlTypeResolver = serviceProvider.GetService(typeof(IXamlTypeResolver)) as IXamlTypeResolver;
    if (xamlTypeResolver == null)
   {
        throw new ArgumentException("IXamlTypeResolver"));
    }
...
}
```

## <a name="services-for-a-type-converter"></a><span data-ttu-id="9a81d-118">Службы для преобразователя типов</span><span class="sxs-lookup"><span data-stu-id="9a81d-118">Services for a Type Converter</span></span>

<span data-ttu-id="9a81d-119"><xref:System.ComponentModel.TypeConverter> содержит четыре виртуальных метода, использующих контекст службы и поддерживающих использование XAML.</span><span class="sxs-lookup"><span data-stu-id="9a81d-119"><xref:System.ComponentModel.TypeConverter> has four virtual methods that use a service context and that support XAML usages.</span></span> <span data-ttu-id="9a81d-120">Каждый из этих методов передает входной параметр `context` .</span><span class="sxs-lookup"><span data-stu-id="9a81d-120">Each of these methods passes an input `context` parameter.</span></span> <span data-ttu-id="9a81d-121">Этот параметр имеет тип <xref:System.ComponentModel.ITypeDescriptorContext>, но интерфейс наследует <xref:System.IServiceProvider>, поэтому вам доступен метод <xref:System.IServiceProvider.GetService%2A> для реализации преобразователя типов.</span><span class="sxs-lookup"><span data-stu-id="9a81d-121">This parameter is of type <xref:System.ComponentModel.ITypeDescriptorContext>, but that interface inherits <xref:System.IServiceProvider>, and therefore, there is a <xref:System.IServiceProvider.GetService%2A> method available to type converter implementations.</span></span>

<span data-ttu-id="9a81d-122">В следующем псевдокоде показано, как реализация преобразователя типов для использований XAML может запросить службы в одном из переопределенных методов, в данном случае это <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>:</span><span class="sxs-lookup"><span data-stu-id="9a81d-122">The following pseudocode illustrates how a type converter implementation for XAML usages might query for services in one of its overrides, in this case <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>:</span></span>

```csharp
public override object ConvertFrom(ITypeDescriptorContext typeDescriptorContext,
  CultureInfo cultureInfo,
  object source)
{
    IRootObjectProvider rootProvider = typeDescriptorContext.GetService(typeof(IRootObjectProvider)) as IRootObjectProvider;
    if (rootProvider != null && source is String)
    {
        //return something, else ...
    }
    throw GetConvertFromException(source);
}
```

## <a name="services-for-a-value-serializer"></a><span data-ttu-id="9a81d-123">Службы для сериализатора значений</span><span class="sxs-lookup"><span data-stu-id="9a81d-123">Services for a Value Serializer</span></span>

<span data-ttu-id="9a81d-124">Для контекста сериализатора значений используется тип поставщика службы, который относится к классу <xref:System.Windows.Markup.ValueSerializer> , <xref:System.Windows.Markup.IValueSerializerContext>.</span><span class="sxs-lookup"><span data-stu-id="9a81d-124">For value serializer context, you use a service provider type that is specific to the <xref:System.Windows.Markup.ValueSerializer> class, <xref:System.Windows.Markup.IValueSerializerContext>.</span></span> <span data-ttu-id="9a81d-125">Этот контекст передается переопределениям четырех виртуальных методов <xref:System.Windows.Markup.ValueSerializer> .</span><span class="sxs-lookup"><span data-stu-id="9a81d-125">That context is passed to overrides of the four <xref:System.Windows.Markup.ValueSerializer> virtual methods.</span></span> <span data-ttu-id="9a81d-126">Вызовите <xref:System.IServiceProvider.GetService%2A> из контекста для получения служб.</span><span class="sxs-lookup"><span data-stu-id="9a81d-126">Call <xref:System.IServiceProvider.GetService%2A> from the context to obtain services.</span></span>

## <a name="using-the-xaml-service-provider-contexts"></a><span data-ttu-id="9a81d-127">Использование контекстов поставщиков служб XAML</span><span class="sxs-lookup"><span data-stu-id="9a81d-127">Using the XAML Service Provider Contexts</span></span>

<span data-ttu-id="9a81d-128">Поставщик услуг <xref:System.IServiceProvider.GetService%2A> для доступа к службам XAML, доступным для расширения разметки или преобразователей типа, реализуется как внутренний класс, с экспозицией только через интерфейс и тем, как он передается в соответствующий контекст.</span><span class="sxs-lookup"><span data-stu-id="9a81d-128">The service provider for <xref:System.IServiceProvider.GetService%2A> access to XAML services available to markup extensions or type converters is implemented as an internal class, with exposure only through the interface and how it is passed into the relevant context.</span></span> <span data-ttu-id="9a81d-129">Всякий раз, когда операция обработки XAML в реализации по умолчанию .NET XAML Services пути нагрузки или сохранение пути вызывает соответствующие методы расширения разметки или преобразования типа, которые требуют контекста службы, этот внутренний объект передается.</span><span class="sxs-lookup"><span data-stu-id="9a81d-129">Whenever a XAML processing operation in the default .NET XAML Services implementations of load path or save path invokes the relevant markup extension or type converter methods that require a service context, this internal object is passed.</span></span> <span data-ttu-id="9a81d-130">В зависимости от ситуации контекст системной службы предоставляет `MarkupExtensionContext` или `TextSyntaxContext`, но различия этих классов не имеют значения для разработчика.</span><span class="sxs-lookup"><span data-stu-id="9a81d-130">Depending on the circumstance, the system service context provides either `MarkupExtensionContext` or `TextSyntaxContext`, but the specifics of both of these classes are internal.</span></span> <span data-ttu-id="9a81d-131">Вы взаимодействуете с ними, только запрашивая у них службы с помощью <xref:System.IServiceProvider.GetService%2A>.</span><span class="sxs-lookup"><span data-stu-id="9a81d-131">Your interaction with these classes is limited to requesting services from them, through <xref:System.IServiceProvider.GetService%2A>.</span></span>

## <a name="available-services-from-the-net-xaml-service-context"></a><span data-ttu-id="9a81d-132">Доступные услуги из контекста службы .NET XAML</span><span class="sxs-lookup"><span data-stu-id="9a81d-132">Available Services from the .NET XAML Service Context</span></span>

<span data-ttu-id="9a81d-133">Службы XAML .NET определяют службы для расширений разметки, преобразователей типов, сериализаторов значений и потенциально других обычаев.</span><span class="sxs-lookup"><span data-stu-id="9a81d-133">.NET XAML Services defines services for markup extensions, type converters, value serializers, and potentially other usages.</span></span> <span data-ttu-id="9a81d-134">В следующих разделах описана каждая из этих служб и предоставлены рекомендации по их использованию в реализации.</span><span class="sxs-lookup"><span data-stu-id="9a81d-134">The following sections describe each of these services and provide guidance about how the service might be used in an implementation.</span></span>

### <a name="iserviceprovider"></a><span data-ttu-id="9a81d-135">IServiceProvider</span><span class="sxs-lookup"><span data-stu-id="9a81d-135">IServiceProvider</span></span>

<span data-ttu-id="9a81d-136">**Справочная документация:**<xref:System.IServiceProvider></span><span class="sxs-lookup"><span data-stu-id="9a81d-136">**Reference documentation**: <xref:System.IServiceProvider></span></span>

<span data-ttu-id="9a81d-137">**Отношение к:** Базовая эксплуатация инфраструктуры на основе службы <xref:System.IServiceProvider.GetService%2A?displayProperty=nameWithType>в .NET, чтобы вы могли позвонить.</span><span class="sxs-lookup"><span data-stu-id="9a81d-137">**Relevant to:** Basic operation of a service-based infrastructure in .NET so that you can call <xref:System.IServiceProvider.GetService%2A?displayProperty=nameWithType>.</span></span>

### <a name="itypedescriptorcontext"></a><span data-ttu-id="9a81d-138">ITypeDescriptorContext</span><span class="sxs-lookup"><span data-stu-id="9a81d-138">ITypeDescriptorContext</span></span>

<span data-ttu-id="9a81d-139">**Справочная документация:**<xref:System.ComponentModel.ITypeDescriptorContext></span><span class="sxs-lookup"><span data-stu-id="9a81d-139">**Reference documentation**: <xref:System.ComponentModel.ITypeDescriptorContext></span></span>

<span data-ttu-id="9a81d-140">Происходит от <xref:System.IServiceProvider>.</span><span class="sxs-lookup"><span data-stu-id="9a81d-140">Derives from <xref:System.IServiceProvider>.</span></span> <span data-ttu-id="9a81d-141">Этот класс представляет контекст в стандартных сигнатурах <xref:System.ComponentModel.TypeConverter> . <xref:System.ComponentModel.TypeConverter> — это класс, существовавший начиная с .NET Framework 1.0.</span><span class="sxs-lookup"><span data-stu-id="9a81d-141">This class represents context in the standard <xref:System.ComponentModel.TypeConverter> signatures; <xref:System.ComponentModel.TypeConverter> is a class that has existed since .NET Framework 1.0.</span></span> <span data-ttu-id="9a81d-142">Эта реализация предшествовала XAML и сценариям XAML <xref:System.ComponentModel.TypeConverter> для преобразования строковых типов.</span><span class="sxs-lookup"><span data-stu-id="9a81d-142">It predates XAML and the XAML <xref:System.ComponentModel.TypeConverter> scenario for string-value type conversion.</span></span> <span data-ttu-id="9a81d-143">В контексте .NET XAML <xref:System.ComponentModel.TypeConverter> Services методы внедряются явно.</span><span class="sxs-lookup"><span data-stu-id="9a81d-143">In .NET XAML Services context, methods of <xref:System.ComponentModel.TypeConverter> are implemented explicitly.</span></span> <span data-ttu-id="9a81d-144">Явная реализация указывает вызывающим объектам, что <xref:System.ComponentModel.ITypeDescriptorContext> API не связан с системами типов XAML, а также чтением или записью объектов в XAML.</span><span class="sxs-lookup"><span data-stu-id="9a81d-144">The explicit implementation's behavior indicates to callers that the <xref:System.ComponentModel.ITypeDescriptorContext> API is not relevant for XAML type systems, or for reading or writing objects from XAML.</span></span> <span data-ttu-id="9a81d-145"><xref:System.ComponentModel.ITypeDescriptorContext.Container%2A>, <xref:System.ComponentModel.ITypeDescriptorContext.Instance%2A>и, <xref:System.ComponentModel.ITypeDescriptorContext.PropertyDescriptor%2A> `null` как правило, возврат из контекста услуг .NET XAML.</span><span class="sxs-lookup"><span data-stu-id="9a81d-145"><xref:System.ComponentModel.ITypeDescriptorContext.Container%2A>, <xref:System.ComponentModel.ITypeDescriptorContext.Instance%2A>, and <xref:System.ComponentModel.ITypeDescriptorContext.PropertyDescriptor%2A> generally return `null` from .NET XAML Services contexts.</span></span>

### <a name="ivalueserializercontext"></a><span data-ttu-id="9a81d-146">IValueSerializerContext</span><span class="sxs-lookup"><span data-stu-id="9a81d-146">IValueSerializerContext</span></span>

<span data-ttu-id="9a81d-147">**Справочная документация:**<xref:System.Windows.Markup.IValueSerializerContext></span><span class="sxs-lookup"><span data-stu-id="9a81d-147">**Reference documentation**: <xref:System.Windows.Markup.IValueSerializerContext></span></span>

<span data-ttu-id="9a81d-148">Это производный от <xref:System.ComponentModel.ITypeDescriptorContext> класс, который также использует явные реализации для подавления ложных выводов о системе типов XAML.</span><span class="sxs-lookup"><span data-stu-id="9a81d-148">Derives from <xref:System.ComponentModel.ITypeDescriptorContext> and also relies on explicit implementations to suppress false implications about the XAML type system.</span></span> <span data-ttu-id="9a81d-149">Поддерживает статические вспомогательные методы поиска в <xref:System.Windows.Markup.ValueSerializer>.</span><span class="sxs-lookup"><span data-stu-id="9a81d-149">Supports the static lookup helper methods on <xref:System.Windows.Markup.ValueSerializer>.</span></span>

### <a name="ixamltyperesolver"></a><span data-ttu-id="9a81d-150">IXamlTypeResolver</span><span class="sxs-lookup"><span data-stu-id="9a81d-150">IXamlTypeResolver</span></span>

<span data-ttu-id="9a81d-151">**Справочная документация:**<xref:System.Windows.Markup.IXamlTypeResolver></span><span class="sxs-lookup"><span data-stu-id="9a81d-151">**Reference documentation**: <xref:System.Windows.Markup.IXamlTypeResolver></span></span>

<span data-ttu-id="9a81d-152">**Определено:** <xref:System.Windows.Markup> пространство имен, сборка System.Xaml  </span><span class="sxs-lookup"><span data-stu-id="9a81d-152">**Defined by:**  <xref:System.Windows.Markup> namespace, System.Xaml assembly</span></span>

<span data-ttu-id="9a81d-153">**Область применения:** сценарии пути загрузки и взаимодействие с контекстом схемы языка XAML</span><span class="sxs-lookup"><span data-stu-id="9a81d-153">**Relevant to:** Load path scenarios, and interaction with XAML schema context</span></span>

<span data-ttu-id="9a81d-154">**API службы:**  <xref:System.Windows.Markup.IXamlTypeResolver.Resolve%2A></span><span class="sxs-lookup"><span data-stu-id="9a81d-154">**Service API:**  <xref:System.Windows.Markup.IXamlTypeResolver.Resolve%2A></span></span>

<span data-ttu-id="9a81d-155">Может влиять на сопоставление типов XAML в CLR, необходимое, когда средство записи XAML создает объект среды CLR в графе объектов.</span><span class="sxs-lookup"><span data-stu-id="9a81d-155">Can influence the XAML-to-CLR type mapping that is necessary when the XAML writer constructs a CLR object in an object graph.</span></span> <span data-ttu-id="9a81d-156"><xref:System.Windows.Markup.IXamlTypeResolver.Resolve%2A> обрабатывает потенциально содержащую префикс строку, которая соответствует имени типа XAML (<xref:System.Xaml.XamlType.Name%2A?displayProperty=nameWithType>) и возвращает <xref:System.Type>среды CLR.</span><span class="sxs-lookup"><span data-stu-id="9a81d-156"><xref:System.Windows.Markup.IXamlTypeResolver.Resolve%2A> processes a potentially prefix-qualified string that corresponds to a XAML type name (<xref:System.Xaml.XamlType.Name%2A?displayProperty=nameWithType>), and returns a CLR <xref:System.Type>.</span></span> <span data-ttu-id="9a81d-157">Разрешение типов обычно сильно зависит от контекста схемы XAML.</span><span class="sxs-lookup"><span data-stu-id="9a81d-157">Resolving types is typically heavily dependent on XAML schema context.</span></span> <span data-ttu-id="9a81d-158">Только контекст схемы языка XAML учитывает, какие сборки загружаются и какие из них можно или нужно использовать для разрешения типов.</span><span class="sxs-lookup"><span data-stu-id="9a81d-158">Only the XAML schema context is aware of considerations such as which assemblies are loaded, and which of these assemblies can or should be accessed for type resolution.</span></span>

### <a name="iuricontext"></a><span data-ttu-id="9a81d-159">IUriContext</span><span class="sxs-lookup"><span data-stu-id="9a81d-159">IUriContext</span></span>

<span data-ttu-id="9a81d-160">**Справочная документация:**<xref:System.Windows.Markup.IUriContext></span><span class="sxs-lookup"><span data-stu-id="9a81d-160">**Reference documentation**: <xref:System.Windows.Markup.IUriContext></span></span>

<span data-ttu-id="9a81d-161">**Определено:** <xref:System.Windows.Markup> пространство имен, сборка System.Xaml  </span><span class="sxs-lookup"><span data-stu-id="9a81d-161">**Defined by:**  <xref:System.Windows.Markup> namespace, System.Xaml assembly</span></span>

<span data-ttu-id="9a81d-162">**Область применения:** обработка пути загрузки и сохранения значений элементов, которые представляют собой URI или значения `x:Uri` .</span><span class="sxs-lookup"><span data-stu-id="9a81d-162">**Relevant to:** Load path and save path handling of member values that are URIs or `x:Uri` values.</span></span>

<span data-ttu-id="9a81d-163">**API службы:**  <xref:System.Windows.Markup.IUriContext.BaseUri%2A></span><span class="sxs-lookup"><span data-stu-id="9a81d-163">**Service API:**  <xref:System.Windows.Markup.IUriContext.BaseUri%2A></span></span>

<span data-ttu-id="9a81d-164">Эта служба сообщает глобально доступный корневой URI, если таковой имеется.</span><span class="sxs-lookup"><span data-stu-id="9a81d-164">This service reports a globally available URI root, if any.</span></span> <span data-ttu-id="9a81d-165">Корневой URI можно использовать для разрешения относительных URI в абсолютные или наоборот.</span><span class="sxs-lookup"><span data-stu-id="9a81d-165">The URI root can be used to resolve relative URIs to absolute URIs or vice versa.</span></span> <span data-ttu-id="9a81d-166">Этот сценарий, в основном, относится к службам приложений, предоставляемым конкретной платформой, или возможностям часто используемого класса корневого элемента в платформе.</span><span class="sxs-lookup"><span data-stu-id="9a81d-166">This scenario is mainly relevant to application services that are exposed by a particular framework, or capabilities of a frequently used root element class in a framework.</span></span> <span data-ttu-id="9a81d-167">Базовый URI может быть установлен как параметр средства чтения XAML, который затем передается объекту средства записи XAML и предоставляется этой службой.</span><span class="sxs-lookup"><span data-stu-id="9a81d-167">The base URI can be established as a XAML reader setting, which is then passed through to the XAML object writer and reported by this service.</span></span>

### <a name="iambientprovider"></a><span data-ttu-id="9a81d-168">IAmbientProvider</span><span class="sxs-lookup"><span data-stu-id="9a81d-168">IAmbientProvider</span></span>

<span data-ttu-id="9a81d-169">**Справочная документация:**<xref:System.Xaml.IAmbientProvider></span><span class="sxs-lookup"><span data-stu-id="9a81d-169">**Reference documentation**: <xref:System.Xaml.IAmbientProvider></span></span>

<span data-ttu-id="9a81d-170">**Определено:** <xref:System.Xaml> пространство имен, сборка System.Xaml  </span><span class="sxs-lookup"><span data-stu-id="9a81d-170">**Defined by:**  <xref:System.Xaml> namespace, System.Xaml assembly</span></span>

<span data-ttu-id="9a81d-171">**Область применения:** обработки пути загрузки и задержка или оптимизация поиска типов.</span><span class="sxs-lookup"><span data-stu-id="9a81d-171">**Relevant to:** Load path handling and type lookup deferrals or optimizations.</span></span>

<span data-ttu-id="9a81d-172">**Сервисные AIS:**  <xref:System.Xaml.IAmbientProvider.GetAllAmbientValues%2A>, три других.</span><span class="sxs-lookup"><span data-stu-id="9a81d-172">**Service APIs:**  <xref:System.Xaml.IAmbientProvider.GetAllAmbientValues%2A>, three others.</span></span>

<span data-ttu-id="9a81d-173">Понятие окружения в XAML — это метод пометки конкретного члена типа как внешнего.</span><span class="sxs-lookup"><span data-stu-id="9a81d-173">The ambience concept in XAML is a technique for marking a particular member of a type as ambient.</span></span> <span data-ttu-id="9a81d-174">Или же тип может быть внешним, чтобы все значения свойств, хранящих экземпляр типа, считались внешними свойствами.</span><span class="sxs-lookup"><span data-stu-id="9a81d-174">Alternatively, a type can be ambient so that all property values that hold an instance of the type should be considered ambient properties.</span></span> <span data-ttu-id="9a81d-175">Расширения разметки или преобразователи типов, находящиеся ниже вдоль потока узлов XAML и являющиеся потомками в графе объектов, могут получить доступ к внешнему свойству или экземпляру типа во время загрузки. Также они могут использовать знание внешней структуры, чтобы сэкономить время.</span><span class="sxs-lookup"><span data-stu-id="9a81d-175">Markup extensions or type converters that are further along the XAML node stream and that are descendants in the object graph can access the ambient property or type instance at load time; or they can use knowledge of the ambient structure at save time.</span></span> <span data-ttu-id="9a81d-176">Это может повлиять на степень определенности, необходимую для разрешения типов для других служб, таких как <xref:System.Windows.Markup.IXamlTypeResolver> или `x:Type`.</span><span class="sxs-lookup"><span data-stu-id="9a81d-176">This can affect the degree of qualification that is needed to resolve types for other services, such as for <xref:System.Windows.Markup.IXamlTypeResolver> or for `x:Type`.</span></span> <span data-ttu-id="9a81d-177">Ознакомьтесь с командой <xref:System.Xaml.AmbientPropertyValue>.</span><span class="sxs-lookup"><span data-stu-id="9a81d-177">See also <xref:System.Xaml.AmbientPropertyValue>.</span></span>

### <a name="ixamlschemacontextprovider"></a><span data-ttu-id="9a81d-178">IXamlSchemaContextProvider</span><span class="sxs-lookup"><span data-stu-id="9a81d-178">IXamlSchemaContextProvider</span></span>

<span data-ttu-id="9a81d-179">**Справочная документация:**<xref:System.Xaml.IXamlSchemaContextProvider></span><span class="sxs-lookup"><span data-stu-id="9a81d-179">**Reference documentation**: <xref:System.Xaml.IXamlSchemaContextProvider></span></span>

<span data-ttu-id="9a81d-180">**Определено:** <xref:System.Xaml> пространство имен, сборка System.Xaml  </span><span class="sxs-lookup"><span data-stu-id="9a81d-180">**Defined by:**  <xref:System.Xaml> namespace, System.Xaml assembly</span></span>

<span data-ttu-id="9a81d-181">**Область применения:** путь загрузки и любые операции, которым необходимо разрешить тип XAML в базовый тип.</span><span class="sxs-lookup"><span data-stu-id="9a81d-181">**Relevant to:** Load path, and any operation that must resolve a XAML type to a backing type.</span></span>

<span data-ttu-id="9a81d-182">**API службы:**  <xref:System.Xaml.IXamlSchemaContextProvider.SchemaContext%2A></span><span class="sxs-lookup"><span data-stu-id="9a81d-182">**Service API:**  <xref:System.Xaml.IXamlSchemaContextProvider.SchemaContext%2A></span></span>

<span data-ttu-id="9a81d-183">Контекст схемы XAML необходим для всех отложенных операций загрузки, так как этот же контекст схемы должен применяться в отложенной области, чтобы интегрировать отложенное содержимое.</span><span class="sxs-lookup"><span data-stu-id="9a81d-183">XAML schema context is necessary for any defer load operations, because the same schema context must act on the deferred area in order to integrate the deferred content.</span></span> <span data-ttu-id="9a81d-184">Дополнительные сведения о роли контекста схемы XAML см. в разделе [XAML Services](../../../api/index.md).</span><span class="sxs-lookup"><span data-stu-id="9a81d-184">For more information about the role of the XAML schema context, see [XAML Services](../../../api/index.md).</span></span>

### <a name="irootobjectprovider"></a><span data-ttu-id="9a81d-185">IRootObjectProvider</span><span class="sxs-lookup"><span data-stu-id="9a81d-185">IRootObjectProvider</span></span>

<span data-ttu-id="9a81d-186">**Справочная документация:**<xref:System.Xaml.IRootObjectProvider></span><span class="sxs-lookup"><span data-stu-id="9a81d-186">**Reference documentation**: <xref:System.Xaml.IRootObjectProvider></span></span>

<span data-ttu-id="9a81d-187">**Определено:** <xref:System.Xaml> пространство имен, сборка System.Xaml  </span><span class="sxs-lookup"><span data-stu-id="9a81d-187">**Defined by:**  <xref:System.Xaml> namespace, System.Xaml assembly</span></span>

<span data-ttu-id="9a81d-188">**Область применения:** путь загрузки.</span><span class="sxs-lookup"><span data-stu-id="9a81d-188">**Relevant to:** Load path.</span></span>

<span data-ttu-id="9a81d-189">**API службы:**  <xref:System.Xaml.IRootObjectProvider.RootObject%2A></span><span class="sxs-lookup"><span data-stu-id="9a81d-189">**Service API:**  <xref:System.Xaml.IRootObjectProvider.RootObject%2A></span></span>

<span data-ttu-id="9a81d-190">Эта служба относится к службам приложений, предоставляемым конкретной платформой, или возможностям часто используемого класса корневого элемента в платформе.</span><span class="sxs-lookup"><span data-stu-id="9a81d-190">The service is relevant to application services that are exposed by a particular framework or by capabilities of a frequently used root element class in a framework.</span></span> <span data-ttu-id="9a81d-191">Один из сценариев получения корневого объекта — подключение фонового кода и привязка событий.</span><span class="sxs-lookup"><span data-stu-id="9a81d-191">One scenario for obtaining the root object is connecting code-behind and event wiring.</span></span> <span data-ttu-id="9a81d-192">Например, реализация `x:Class` в WPF используется для компиляции разметки и привязки всех атрибутов обработчиков событий, находящихся в другом месте в разметке XAML.</span><span class="sxs-lookup"><span data-stu-id="9a81d-192">For example, the WPF implementation of `x:Class` is used for markup compile and wiring of any event handler attribute that is found at any other position in the XAML markup.</span></span> <span data-ttu-id="9a81d-193">Точка подключения разметки и определенных в фоновом коде разделяемых классов для компиляции разметки находится в корневом элементе.</span><span class="sxs-lookup"><span data-stu-id="9a81d-193">The connection point of markup and code-behind defined partial classes for markup compile is at the root element.</span></span>

### <a name="ixamlnamespaceresolver"></a><span data-ttu-id="9a81d-194">IXamlNamespaceResolver</span><span class="sxs-lookup"><span data-stu-id="9a81d-194">IXamlNamespaceResolver</span></span>

<span data-ttu-id="9a81d-195">**Справочная документация:**<xref:System.Xaml.IXamlNamespaceResolver></span><span class="sxs-lookup"><span data-stu-id="9a81d-195">**Reference documentation**: <xref:System.Xaml.IXamlNamespaceResolver></span></span>

<span data-ttu-id="9a81d-196">**Определено:** <xref:System.Xaml> пространство имен, сборка System.Xaml  </span><span class="sxs-lookup"><span data-stu-id="9a81d-196">**Defined by:**  <xref:System.Xaml> namespace, System.Xaml assembly</span></span>

<span data-ttu-id="9a81d-197">**Область применения:** путь загрузки, путь сохранения.</span><span class="sxs-lookup"><span data-stu-id="9a81d-197">**Relevant to:** Load path, save path.</span></span>

<span data-ttu-id="9a81d-198">**API службы:** <xref:System.Xaml.IXamlNamespaceResolver.GetNamespace%2A> для пути загрузки, <xref:System.Xaml.IXamlNamespaceResolver.GetNamespacePrefixes%2A> для пути сохранения.</span><span class="sxs-lookup"><span data-stu-id="9a81d-198">**Service API:** <xref:System.Xaml.IXamlNamespaceResolver.GetNamespace%2A> for load path, <xref:System.Xaml.IXamlNamespaceResolver.GetNamespacePrefixes%2A> for save path.</span></span>

<span data-ttu-id="9a81d-199"><xref:System.Xaml.IXamlNamespaceResolver> — это служба, которая может вернуть идентификатор или URI пространства имен XAML, используя его префикс, сопоставленный в исходной разметке XAML.</span><span class="sxs-lookup"><span data-stu-id="9a81d-199"><xref:System.Xaml.IXamlNamespaceResolver> is a service that can return a XAML namespace identifier / URI based on its prefix as mapped in the originating XAML markup.</span></span>

### <a name="iprovidevaluetarget"></a><span data-ttu-id="9a81d-200">IProvideValueTarget</span><span class="sxs-lookup"><span data-stu-id="9a81d-200">IProvideValueTarget</span></span>

<span data-ttu-id="9a81d-201">**Справочная документация:**<xref:System.Windows.Markup.IProvideValueTarget></span><span class="sxs-lookup"><span data-stu-id="9a81d-201">**Reference documentation**: <xref:System.Windows.Markup.IProvideValueTarget></span></span>

<span data-ttu-id="9a81d-202">**Определено:** <xref:System.Windows.Markup> пространство имен, сборка System.Xaml  </span><span class="sxs-lookup"><span data-stu-id="9a81d-202">**Defined by:**  <xref:System.Windows.Markup> namespace, System.Xaml assembly</span></span>

<span data-ttu-id="9a81d-203">**Область применения:** путь загрузки, путь сохранения.</span><span class="sxs-lookup"><span data-stu-id="9a81d-203">**Relevant to:** Load path and save path.</span></span>

<span data-ttu-id="9a81d-204">**Сервисные AIS:**<xref:System.Windows.Markup.IProvideValueTarget.TargetObject%2A>. <xref:System.Windows.Markup.IProvideValueTarget.TargetProperty%2A>  </span><span class="sxs-lookup"><span data-stu-id="9a81d-204">**Service APIs:**  <xref:System.Windows.Markup.IProvideValueTarget.TargetObject%2A>, <xref:System.Windows.Markup.IProvideValueTarget.TargetProperty%2A>.</span></span>

<span data-ttu-id="9a81d-205"><xref:System.Windows.Markup.IProvideValueTarget> позволяет преобразователям типов и расширениям разметки получать контекст расположения во время загрузки.</span><span class="sxs-lookup"><span data-stu-id="9a81d-205"><xref:System.Windows.Markup.IProvideValueTarget> enables a type converter or markup extension to obtain context about where it is acting at load time.</span></span> <span data-ttu-id="9a81d-206">Реализации могут применять этот контекст, чтобы сделать использование недействительным.</span><span class="sxs-lookup"><span data-stu-id="9a81d-206">Implementations might use this context to invalidate a usage.</span></span> <span data-ttu-id="9a81d-207">Например, WPF располагает логикой внутри некоторых расширений разметки, таких как <xref:System.Windows.DynamicResourceExtension>.</span><span class="sxs-lookup"><span data-stu-id="9a81d-207">For example, WPF has logic inside some of its markup extensions such as <xref:System.Windows.DynamicResourceExtension>.</span></span> <span data-ttu-id="9a81d-208">Эта логика проверяет <xref:System.Windows.Markup.IProvideValueTarget.TargetProperty%2A> , чтобы убедиться в том, что расширение используется только для задания свойств зависимостей (или краткого списка других свойств, не относящихся к зависимостям).</span><span class="sxs-lookup"><span data-stu-id="9a81d-208">The logic checks the <xref:System.Windows.Markup.IProvideValueTarget.TargetProperty%2A> to make sure that the extension is only used to set dependency properties (or a short list of other non-dependency properties).</span></span>

### <a name="ixamlnameresolver"></a><span data-ttu-id="9a81d-209">IXamlNameResolver</span><span class="sxs-lookup"><span data-stu-id="9a81d-209">IXamlNameResolver</span></span>

<span data-ttu-id="9a81d-210">**Справочная документация:**<xref:System.Xaml.IXamlNameResolver></span><span class="sxs-lookup"><span data-stu-id="9a81d-210">**Reference documentation**: <xref:System.Xaml.IXamlNameResolver></span></span>

<span data-ttu-id="9a81d-211">**Определено:** <xref:System.Xaml> пространство имен, сборка System.Xaml  </span><span class="sxs-lookup"><span data-stu-id="9a81d-211">**Defined by:**  <xref:System.Xaml> namespace, System.Xaml assembly</span></span>

<span data-ttu-id="9a81d-212">**Отношение к:** Определение диаграммы объекта нагрузки, `x:Name` `x:Reference`разрешение объектов, идентифицированных, или методы, связанные с рамками.</span><span class="sxs-lookup"><span data-stu-id="9a81d-212">**Relevant to:** Load path object graph definition, resolving objects identified by `x:Name`, `x:Reference`, or framework-specific techniques.</span></span>

<span data-ttu-id="9a81d-213">**API службы:**  <xref:System.Xaml.IXamlNameResolver.Resolve%2A>; другие интерфейсы API для более сложных сценариев, таких как работа с прямыми ссылками.</span><span class="sxs-lookup"><span data-stu-id="9a81d-213">**Service APIs:**  <xref:System.Xaml.IXamlNameResolver.Resolve%2A>; other APIs for more advanced scenarios such as dealing with forward references.</span></span>

<span data-ttu-id="9a81d-214">Реализация обработки `x:Reference` .NET XAML опирается на эту услугу.</span><span class="sxs-lookup"><span data-stu-id="9a81d-214">.NET XAML Services implementation of `x:Reference` handling relies on this service.</span></span> <span data-ttu-id="9a81d-215">Определенные платформы или средства, поддерживающие платформу, используют эту службу для обработки `x:Name` или эквивалентной обработки свойств (с атрибутами<xref:System.Windows.Markup.RuntimeNamePropertyAttribute> ).</span><span class="sxs-lookup"><span data-stu-id="9a81d-215">Specific frameworks or tools that support the framework use this service for `x:Name` handling or equivalent (<xref:System.Windows.Markup.RuntimeNamePropertyAttribute> attributed) property handling.</span></span>

### <a name="idestinationtypeprovider"></a><span data-ttu-id="9a81d-216">IDestinationTypeProvider</span><span class="sxs-lookup"><span data-stu-id="9a81d-216">IDestinationTypeProvider</span></span>

<span data-ttu-id="9a81d-217">**Справочная документация:**<xref:System.Xaml.IDestinationTypeProvider></span><span class="sxs-lookup"><span data-stu-id="9a81d-217">**Reference documentation**: <xref:System.Xaml.IDestinationTypeProvider></span></span>

<span data-ttu-id="9a81d-218">**Определено:** <xref:System.Xaml> пространство имен, сборка System.Xaml  </span><span class="sxs-lookup"><span data-stu-id="9a81d-218">**Defined by:**  <xref:System.Xaml> namespace, System.Xaml assembly</span></span>

<span data-ttu-id="9a81d-219">**Область применения:** разрешение пути загрузки дополнительных сведений о типе CLR.</span><span class="sxs-lookup"><span data-stu-id="9a81d-219">**Relevant to:** Load path resolution of indirect CLR type information.</span></span>

<span data-ttu-id="9a81d-220">**API службы:** <xref:System.Xaml.IDestinationTypeProvider.GetDestinationType%2A></span><span class="sxs-lookup"><span data-stu-id="9a81d-220">**Service API:** <xref:System.Xaml.IDestinationTypeProvider.GetDestinationType%2A></span></span>

<span data-ttu-id="9a81d-221">Для получения дополнительной информации см. <xref:System.Xaml.IDestinationTypeProvider>.</span><span class="sxs-lookup"><span data-stu-id="9a81d-221">For more information, see <xref:System.Xaml.IDestinationTypeProvider>.</span></span>

## <a name="see-also"></a><span data-ttu-id="9a81d-222">См. также</span><span class="sxs-lookup"><span data-stu-id="9a81d-222">See also</span></span>

- <xref:System.Windows.Markup.MarkupExtension>
- <xref:System.Xaml.XamlObjectWriter>
- [<span data-ttu-id="9a81d-223">Общие сведения о расширениях разметки для XAML</span><span class="sxs-lookup"><span data-stu-id="9a81d-223">Markup Extensions for XAML Overview</span></span>](markup-extensions-overview.md)
- [<span data-ttu-id="9a81d-224">Общие сведения о преобразователях типов для XAML</span><span class="sxs-lookup"><span data-stu-id="9a81d-224">Type Converters for XAML Overview</span></span>](type-converters-overview.md)
