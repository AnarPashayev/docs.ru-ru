---
title: Относящиеся к XAML атрибуты среды CLR для пользовательских типов и библиотек
ms.date: 03/30/2017
helpviewer_keywords:
- CLR attributes for custom types [XAML Services]
ms.assetid: 5dfb299a-b6e2-41b8-8694-e6ac987547f1
ms.openlocfilehash: a4b8a58ea2c7d9de2b59ed78dc37e4ce1c434b79
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/15/2020
ms.locfileid: "90535401"
---
# <a name="xaml-related-clr-attributes-for-custom-types-and-libraries"></a>Связанные с XAML атрибуты среды CLR для пользовательских типов и библиотек

В этом разделе описываются атрибуты среды CLR, определяемые службами XAML .NET. Здесь также описываются другие атрибуты среды CLR, определенные в .NET, которые имеют сценарий, связанный с XAML, для приложений в сборках или типах. При присвоении атрибутам сборок, типов или членов эти атрибуты среды CLR предоставляют сведения о системе типов XAML, связанные с типами. Информация предоставляется любому потребителю XAML, использующему службы XAML .NET для обработки потока узлов XAML напрямую или через выделенные средства чтения и записи XAML.

## <a name="xaml-related-clr-attributes-for-custom-types-and-custom-members"></a>Связанные с XAML атрибуты среды CLR для пользовательских типов и пользовательских элементов

Использование атрибутов CLR подразумевает, что вы используете общую среду CLR для определения типов, иначе такие атрибуты недоступны. Если для определения резервного типа используется среда CLR, контекст схемы XAML по умолчанию, используемый авторами XAML служб XAML .NET, может считывать атрибуты среды CLR посредством отражения для резервных сборок.

В следующих разделах описываются атрибуты, связанные с XAML, которые можно применять к пользовательским типам или пользовательским элементам. Каждый атрибут CLR передает сведения, относящиеся к системе типов XAML. В пути загрузки сведения об атрибутах позволяют средству чтения XAML сформировать допустимый поток узлов XAML или помочь модулю записи XAML создать допустимый граф объекта. В пути сохранения сведения об атрибутах позволяют средству чтения XAML формировать допустимый поток узлов XAML, который восстанавливает сведения о системе типов XAML. либо он объявляет указания сериализации или требования для модуля записи XAML или других потребителей XAML.

### <a name="ambientattribute"></a>амбиентаттрибуте

**Справочная документация:**<xref:System.Windows.Markup.AmbientAttribute>

**Применимо к:** Члены класса, свойства или `get` метода доступа, поддерживающие присоединяемые свойства.

**Аргументы:** None

<xref:System.Windows.Markup.AmbientAttribute> Указывает, что свойство или все свойства, принимающие атрибут Type, должны интерпретироваться в концепции свойства окружения в XAML. Концепция окружения относится к тому, как обработчики XAML определяют владельцев типов членов. Внешнее свойство — это свойство, в котором значение должно быть доступно в контексте средства синтаксического анализа при создании графа объекта, но если типичный Поиск члена типа приостанавливается для немедленного создания набора узлов XAML.

Концепцию окружающей среды можно применить к присоединяемым элементам, которые не представлены как свойства с точки зрения определения атрибутов в среде CLR <xref:System.AttributeTargets> . Использование атрибутов метода должно применяться только для `get` метода доступа, который поддерживает присоединяемое использование для XAML.

### <a name="constructorargumentattribute"></a>конструктораргументаттрибуте

**Справочная документация:**  <xref:System.Windows.Markup.ConstructorArgumentAttribute>

**Применимо к:** См

**Аргументы:** Строка, указывающая имя свойства, которое соответствует одному аргументу конструктора.

<xref:System.Windows.Markup.ConstructorArgumentAttribute> Указывает, что объект может быть инициализирован с помощью синтаксиса конструктора без параметров, а свойство указанного имени предоставляет сведения о конструкции. Эта информация предназначена главным образом для сериализации XAML. Для получения дополнительной информации см. <xref:System.Windows.Markup.ConstructorArgumentAttribute>.

### <a name="contentpropertyattribute"></a>Атрибут ContentPropertyAttribute

**Справочная документация:**  <xref:System.Windows.Markup.ContentPropertyAttribute>

**Применимо к:** См

**Аргументы:** Строка, указывающая имя члена типа с атрибутом.

<xref:System.Windows.Markup.ContentPropertyAttribute> Указывает, что свойство, именованное аргументом, должно выступать в качестве свойства содержимого XAML для этого типа. Определение свойства содержимого XAML наследуется на все производные типы, которые могут быть назначены определяющему типу. Определение для конкретного производного типа можно переопределить, применив <xref:System.Windows.Markup.ContentPropertyAttribute> к конкретному производному типу.

Для свойства, которое служит свойством содержимого XAML, теги элемента свойства можно опустить в использовании XAML. Как правило, вы указываете свойства содержимого XAML, повышающие упрощенную разметку XAML для модели содержимого и хранения. Так как свойство содержимого XAML может быть назначено только одному члену, у вас иногда есть варианты проектирования, определяющие, какое из нескольких свойств контейнера типа должно быть определено как свойство содержимого XAML. Другие свойства контейнера должны использоваться с явными элементами свойств.

В потоке узлов XAML свойства содержимого XAML по-прежнему создаются `StartMember` и `EndMember` узлы, используя имя свойства для <xref:System.Xaml.XamlMember> . Чтобы определить, является ли элемент свойством содержимого XAML, проверьте <xref:System.Xaml.XamlType> значение в `StartObject` положении и получите значение <xref:System.Xaml.XamlType.ContentProperty%2A> .

### <a name="contentwrapperattribute"></a>контентврапператтрибуте

**Справочная документация:**  <xref:System.Windows.Markup.ContentWrapperAttribute>

**Применимо к:** Класс, а именно типы коллекций.

**Аргументы:** Значение типа <xref:System.Type> , указывающее тип, используемый в качестве типа оболочки содержимого для внешнего содержимого.

<xref:System.Windows.Markup.ContentWrapperAttribute> Указывает один или несколько типов в связанном типе коллекции, которые будут использоваться для упаковки внешнего содержимого. Внешнее содержимое относится к случаям, когда ограничения системы типов для типа свойства содержимого не захватывают все возможные варианты содержимого, которые может поддерживать использование XAML для типа-владельца. Например, поддержка XAML для содержимого определенного типа может поддерживать строки в строго типизированном универсальном типе <xref:System.Collections.ObjectModel.Collection%601> . Оболочки содержимого полезны для переноса существовавших ранее соглашений о разметке в замысла XAML назначаемых значений для коллекций, например для переноса связанных с текстом моделей содержимого.

Чтобы указать более одного типа оболочки содержимого, примените атрибут несколько раз.

### <a name="dependsonattribute"></a>депендсонаттрибуте

**Справочная документация:**  <xref:System.Windows.Markup.DependsOnAttribute>

**Применимо к:** Свойства

**Аргументы:** Строка, указывающая имя другого члена типа с атрибутом.

<xref:System.Windows.Markup.DependsOnAttribute> Указывает, что свойство с атрибутом зависит от значения другого свойства. Применение этого атрибута к определению свойства гарантирует, что зависимые свойства обрабатываются первыми в написании объектов XAML. Использование <xref:System.Windows.Markup.DependsOnAttribute> определяет исключительные случаи свойств для типов, где необходимо следовать определенному порядку синтаксического анализа для создания допустимого объекта.

<xref:System.Windows.Markup.DependsOnAttribute>К определению свойства можно применить несколько вариантов.

### <a name="markupextensionreturntypeattribute"></a>маркупекстенсионретурнтипеаттрибуте

**Справочная документация:**  <xref:System.Windows.Markup.MarkupExtensionReturnTypeAttribute>

**Применимо к:** Класс, который должен быть <xref:System.Windows.Markup.MarkupExtension> производным типом.

**Аргументы:** Значение <xref:System.Type> типа, указывающее наиболее точный тип, который должен `ProvideValue` быть получен в результате атрибута <xref:System.Windows.Markup.MarkupExtension> .

Дополнительные сведения см. в статье [Общие сведения о расширениях разметки для XAML](markup-extensions-overview.md).

### <a name="namescopepropertyattribute"></a>намескопепропертяттрибуте

**Справочная документация:**  <xref:System.Windows.Markup.NameScopePropertyAttribute>

**Применимо к:** См

**Аргументы:** Поддерживает две формы атрибутов:

- Строка, указывающая имя свойства для типа с атрибутом.

- Строка, указывающая имя свойства и <xref:System.Type> для типа, определяющего именованное свойство. Эта форма предназначена для указания присоединяемого члена в качестве свойства области имен XAML.

<xref:System.Windows.Markup.NameScopePropertyAttribute> Указывает свойство, которое предоставляет значение области имен XAML для класса с атрибутами. Предполагается, что свойство области имен XAML должно ссылаться на объект, который реализует <xref:System.Windows.Markup.INameScope> и содержит фактическую область имен XAML, ее хранилище и поведение.

### <a name="runtimenamepropertyattribute"></a>рунтименамепропертяттрибуте

**Справочная документация:**  <xref:System.Windows.Markup.RuntimeNamePropertyAttribute>

**Применимо к:** См

**Аргументы:** Строка, указывающая имя свойства имени среды выполнения для типа с атрибутом.

<xref:System.Windows.Markup.RuntimeNamePropertyAttribute> сообщает свойство типа с атрибутом, которое соответствует [директиве XAML x:Name](xname-directive.md). Свойство должно иметь тип <xref:System.String> и должно быть доступно для чтения и записи.

Определение наследуется ко всем производным типам, которые могут быть назначены определяющему типу. Определение для конкретного производного типа можно переопределить, применив <xref:System.Windows.Markup.RuntimeNamePropertyAttribute> к конкретному производному типу.

### <a name="trimsurroundingwhitespaceattribute"></a>тримсурраундингвхитеспацеаттрибуте

**Справочная документация:**  <xref:System.Windows.Markup.TrimSurroundingWhitespaceAttribute>

**Применимо к:** Типов

**Аргументы:** None.

<xref:System.Windows.Markup.TrimSurroundingWhitespaceAttribute> применяется к конкретным типам, которые могут отображаться как дочерние элементы в значительном содержимом пустого пространства (содержимое, удерживаемое коллекцией <xref:System.Windows.Markup.WhitespaceSignificantCollectionAttribute> ). <xref:System.Windows.Markup.TrimSurroundingWhitespaceAttribute> в основном относится к пути сохранения, но доступно в системе типов XAML в пути загрузки путем проверки <xref:System.Xaml.XamlType.TrimSurroundingWhitespace%2A?displayProperty=nameWithType> . Дополнительные сведения см. [в разделе Обработка пробелов в XAML](white-space-processing.md).

### <a name="typeconverterattribute"></a>TypeConverterAttribute

**Справочная документация:**  <xref:System.ComponentModel.TypeConverterAttribute>

**Применимо к:** Класс, свойство, метод (единственный допустимый код XAML — метод `get` доступа, поддерживающий присоединяемый элемент).

**Аргументы:** Объект <xref:System.Type> класса <xref:System.ComponentModel.TypeConverter> .

<xref:System.ComponentModel.TypeConverterAttribute> в контексте XAML ссылается на пользовательский объект <xref:System.ComponentModel.TypeConverter> . Это <xref:System.ComponentModel.TypeConverter> обеспечивает поведение преобразования типов для пользовательских типов или членов этого типа.

Примените <xref:System.ComponentModel.TypeConverterAttribute> атрибут к типу, обратившись к реализации преобразователя типов. Можно определить преобразователи типов для XAML в классах, структурах или интерфейсах. Нет необходимости предоставлять преобразование типов для перечислений. это преобразование включено изначально.

Преобразователь типов должен иметь возможность преобразования из строки, используемой для атрибутов или текста инициализации в разметке, в предполагаемый целевой тип. Дополнительные сведения см. в разделе [TypeConverters и XAML](/dotnet/desktop/wpf/advanced/typeconverters-and-xaml).

Вместо применения ко всем значениям типа, поведение преобразователя типов для XAML также можно установить на конкретном свойстве. В этом случае вы примените <xref:System.ComponentModel.TypeConverterAttribute> к определению свойства (внешнее определение, а не конкретные `get` `set` определения и).

Поведение преобразователя типов для использования XAML настраиваемого присоединяемого члена можно назначить с помощью <xref:System.ComponentModel.TypeConverterAttribute> `get` метода доступа к методу, который поддерживает использование XAML.

Аналогично <xref:System.ComponentModel.TypeConverter> , <xref:System.ComponentModel.TypeConverterAttribute> существовал в .NET до существования XAML, а модель преобразователя типов обслужила другими целями. Для ссылки и использования <xref:System.ComponentModel.TypeConverterAttribute> необходимо полностью уточнить его или предоставить `using` инструкцию для <xref:System.ComponentModel> . Также включите в проект системную сборку.

### <a name="uidpropertyattribute"></a>уидпропертяттрибуте

**Справочная документация:**  <xref:System.Windows.Markup.UidPropertyAttribute>

**Применимо к:** См

**Аргументы:** Строка, которая ссылается на соответствующее свойство по имени.

Указывает свойство CLR класса, который является псевдонимом для [директивы x:UID](xuid-directive.md).

### <a name="usableduringinitializationattribute"></a>усабледурингинитиализатионаттрибуте

**Справочная документация:**  <xref:System.Windows.Markup.UsableDuringInitializationAttribute>

**Применимо к:** См

**Аргументы:** Логическое значение. Если используется для назначения атрибута, значение должно быть равно `true` .

Указывает, строится ли тип сверху вниз во время создания графа объектов XAML. Это сложная концепция, которая, вероятно, тесно связана с определением модели программирования. Для получения дополнительной информации см. <xref:System.Windows.Markup.UsableDuringInitializationAttribute>.

### <a name="valueserializerattribute"></a>валуесериализераттрибуте

**Справочная документация:**  <xref:System.Windows.Markup.ValueSerializerAttribute>

**Применимо к:** Класс, свойство, метод (единственный допустимый код XAML — метод `get` доступа, поддерживающий присоединяемый элемент).

**Аргументы:** Объект <xref:System.Type> , указывающий класс поддержки сериализатора значений для использования при сериализации всех свойств типа с атрибутом или определенного свойства с атрибутами.

<xref:System.Windows.Markup.ValueSerializer> Указывает класс сериализации значения, для которого требуется больше состояний и контекста, чем у <xref:System.ComponentModel.TypeConverter> . <xref:System.Windows.Markup.ValueSerializer> можно связать с присоединяемым членом, применив <xref:System.Windows.Markup.ValueSerializerAttribute> атрибут к статическому `get` методу доступа для присоединяемого элемента. Сериализация значений также применяется для перечислений, интерфейсов и структур, но не для делегатов.

### <a name="whitespacesignificantcollectionattribute"></a>вхитеспацесигнификантколлектионаттрибуте

**Справочная документация:**  <xref:System.Windows.Markup.WhitespaceSignificantCollectionAttribute>

**Применимо к:** Класс, а именно типы коллекций, которые должны размещать смешанное содержимое, где пробелы вокруг элементов объекта могут быть значительными для представления пользовательского интерфейса.

**Аргументы:** None.

<xref:System.Windows.Markup.WhitespaceSignificantCollectionAttribute> Указывает, что тип коллекции должен обрабатываться обработчиком XAML как значащий пробел, что влияет на построение узлов значений потока узлов XAML в коллекции. Дополнительные сведения см. [в разделе Обработка пробелов в XAML](white-space-processing.md).

### <a name="xamldeferloadattribute"></a>ксамлдеферлоадаттрибуте

**Справочная документация:**  <xref:System.Windows.Markup.XamlDeferLoadAttribute>

**Применимо к:** Класс, свойство.

**Аргументы:** Поддерживает два типа форм соотнесений в виде строк или типов как <xref:System.Type> . См. раздел <xref:System.Windows.Markup.XamlDeferLoadAttribute>.

Указывает, что классу или свойству соответствует использование отложенной загрузки для XAML (в частности, поведение шаблона), и сообщает о классе, включающем задержку, и о его типе назначения/содержимого.

### <a name="xamlsetmarkupextensionattribute"></a>XamlSetMarkupExtensionAttribute

**Справочная документация:**  <xref:System.Windows.Markup.XamlSetMarkupExtensionAttribute>

**Применимо к:** См

**Аргументы:** Присваивает имя обратному вызову.

Указывает, что класс может использовать расширение разметки для предоставления значения для одного или нескольких его свойств и ссылается на обработчик, который должен вызывать модуль записи XAML перед выполнением операции установки расширения разметки для любого свойства класса.

### <a name="xamlsettypeconverterattribute"></a>ксамлсеттипеконвертераттрибуте

**Справочная документация:**  <xref:System.Windows.Markup.XamlSetTypeConverterAttribute>

**Применимо к:** См

**Аргументы:** Присваивает имя обратному вызову.

Указывает, что класс может использовать преобразователь типов для предоставления значения для одного или нескольких его свойств и ссылается на обработчик, который должен вызывать модуль записи XAML перед выполнением операции преобразователя типов для любого свойства класса.

### <a name="xmllangpropertyattribute"></a>ксмллангпропертяттрибуте

**Справочная документация:**  <xref:System.Windows.Markup.XmlLangPropertyAttribute>

**Применимо к:** См

**Аргументы:** Строка, указывающая имя свойства для псевдонима в типе с `xml:lang` атрибутом.

<xref:System.Windows.Markup.XmlLangPropertyAttribute> сообщает свойство типа с атрибутом, которое сопоставляется с `lang` директивой XML. Свойство не обязательно должно иметь тип, <xref:System.String> но его необходимо назначить из строки (присваивание можно выполнить, связав преобразователь типов с типом свойства или с определенным свойством). Свойство должно быть доступно для чтения и записи.

Сценарий для сопоставления заключается в том `xml:lang` , что объектная модель времени выполнения имеет доступ к языковой информации, указанной в XML, без необходимости специальной обработки с помощью XMLDOM.

Определение наследуется ко всем производным типам, которые могут быть назначены определяющему типу. Определение для конкретного производного типа можно переопределить, применив к <xref:System.Windows.Markup.XmlLangPropertyAttribute> конкретному производному типу, хотя это нераспространенный сценарий.

## <a name="xaml-related-clr-attributes-at-the-assembly-level"></a>Связанные с XAML атрибуты среды CLR на уровне сборки

В следующих разделах описываются атрибуты, связанные с XAML, которые не применяются к типам или определениям элементов, а применяются к сборкам. Эти атрибуты относятся к общей цели определения библиотеки, содержащей пользовательские типы для использования в XAML. Некоторые атрибуты не обязательно влияют на поток узлов XAML напрямую, но передаются в потоке узла для использования другими потребителями. Потребители для информации включают среды разработки или процессы сериализации, которым требуются сведения о пространстве имен XAML и связанные сведения о префиксах. Контекст схемы XAML (включая по умолчанию службы XAML .NET) также использует эти сведения.

### <a name="xmlnscompatiblewithattribute"></a>ксмлнскомпатиблевисаттрибуте

**Справочная документация:**  <xref:System.Windows.Markup.XmlnsCompatibleWithAttribute>

**Аргументы:**

- Строка, указывающая идентификатор пространства имен XAML для субсуме.

- Строка, указывающая идентификатор пространства имен XAML, который может субсуме пространство имен XAML из предыдущего аргумента.

  <xref:System.Windows.Markup.XmlnsCompatibleWithAttribute> Указывает, что пространство имен XAML может быть относящиесяо другим пространством имен XAML. Как правило, поглощающее пространство имен XAML указывается в определенном ранее <xref:System.Windows.Markup.XmlnsDefinitionAttribute>. Этот метод можно использовать для управления версиями словаря XAML в библиотеке и обеспечения его совместимости с ранее заданной разметкой для словаря предыдущих версий.

### <a name="xmlnsdefinitionattribute"></a>XmlnsDefinitionAttribute

**Справочная документация:**  <xref:System.Windows.Markup.XmlnsDefinitionAttribute>

**Аргументы:**

- Строка, указывающая идентификатор пространства имен XAML для определения.

- Строка, которая именует пространство имен CLR. Пространство имен CLR должно определять открытые типы в сборке, и хотя бы один из типов пространств имен CLR должен быть предназначен для использования XAML.

  <xref:System.Windows.Markup.XmlnsDefinitionAttribute> Задает сопоставление для отдельных сборок между пространством имен XAML и пространством имен CLR, которое затем используется для разрешения типов с помощью средства записи объектов XAML или контекста схемы XAML.

  <xref:System.Windows.Markup.XmlnsDefinitionAttribute>К сборке можно применить более одного типа. Это может быть сделано по любой комбинации следующих причин.

- Структура библиотеки содержит несколько пространств имен среды CLR для логической организации доступа к API времени выполнения. Однако необходимо, чтобы все типы в этих пространствах имен были доступны для использования XAML с помощью ссылки на одно и то же пространство имен XAML. В этом случае вы примените несколько <xref:System.Windows.Markup.XmlnsDefinitionAttribute> атрибутов с одним и тем же <xref:System.Windows.Markup.XmlnsDefinitionAttribute.XmlNamespace%2A> значением, но разными <xref:System.Windows.Markup.XmlnsDefinitionAttribute.ClrNamespace%2A> значениями. Это особенно полезно при определении сопоставлений для пространства имен XAML, которое ваша платформа или приложение будет использовать в качестве пространства имен XAML по умолчанию в общем использовании.

- Структура библиотеки содержит несколько пространств имен CLR, и требуется разделять пространство имен XAML между использованием типов в этих пространствах имен CLR.

- Вы определяете пространство имен CLR в сборке и хотите, чтобы оно было доступно через несколько пространств имен XAML. Этот сценарий происходит при поддержке нескольких словари с одной и той же базой кода.

- Поддержка языка XAML определяется в одном или нескольких пространствах имен CLR. В этом случае <xref:System.Windows.Markup.XmlnsDefinitionAttribute.XmlNamespace%2A> значение должно быть `http://schemas.microsoft.com/winfx/2006/xaml` .

### <a name="xmlnsprefixattribute"></a>ксмлнспрефиксаттрибуте

**Справочная документация:**  <xref:System.Windows.Markup.XmlnsPrefixAttribute>

**Аргументы:**

- Строка, указывающая идентификатор пространства имен XAML.

- Строка, указывающая рекомендуемый префикс.

  <xref:System.Windows.Markup.XmlnsDefinitionAttribute> Задает рекомендуемый префикс, используемый для пространства имен XAML. Префикс полезен при записи элементов и атрибутов в XAML-файл, сериализованный службами XAML .NET <xref:System.Xaml.XamlXmlWriter> , или когда библиотека, реализующая XAML, взаимодействует с средой разработки, имеющей функции редактирования XAML.

  <xref:System.Windows.Markup.XmlnsPrefixAttribute>К сборке можно применить более одного типа. Это может быть сделано по любой комбинации следующих причин.

- Сборка определяет типы для более чем одного пространства имен XAML. В этом случае определите разные префиксные значения для каждого пространства имен XAML.

- Вы поддерживаете несколько словари и используете разные префиксы для каждого словаря и пространства имен XAML.

- Вы определяете поддержку языка XAML в сборке и обладаете <xref:System.Windows.Markup.XmlnsDefinitionAttribute> для `http://schemas.microsoft.com/winfx/2006/xaml` . В этом случае, как правило, следует повысить уровень префикса `x` .

> [!NOTE]
> Службы XAML .NET также определяют атрибут, связанный с XAML <xref:System.Windows.Markup.RootNamespaceAttribute> . Этот атрибут является атрибутом уровня сборки для поддержки системы проектов и не имеет отношения к настраиваемым типам XAML.

## <a name="see-also"></a>См. также

- <xref:System.Attribute>
- [Определение пользовательских типов для использования со службами XAML .NET](define-custom-types.md)
