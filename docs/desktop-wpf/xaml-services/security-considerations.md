---
title: Соображения безопасности XAML
ms.date: 03/30/2017
helpviewer_keywords:
- security [XAML Services], .NET XAML services
- XAML security [XAML Services]
ms.assetid: 544296d4-f38e-4498-af49-c9f4dad28964
ms.openlocfilehash: 1864910b339c74e3033fb4d6d8baebffada1a4f8
ms.sourcegitcommit: c2d9718996402993cf31541f11e95531bc68bad0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/27/2020
ms.locfileid: "81432920"
---
# <a name="xaml-security-considerations"></a><span data-ttu-id="11df3-102">Соображения безопасности XAML</span><span class="sxs-lookup"><span data-stu-id="11df3-102">XAML security considerations</span></span>

<span data-ttu-id="11df3-103">В этой статье описаны рекомендации по безопасности в приложениях при использовании API XAML и .NET XAML Services.</span><span class="sxs-lookup"><span data-stu-id="11df3-103">This article describes best practices for security in applications when you use XAML and .NET XAML Services API.</span></span>

## <a name="untrusted-xaml-in-applications"></a><span data-ttu-id="11df3-104">Недоверие XAML в приложениях</span><span class="sxs-lookup"><span data-stu-id="11df3-104">Untrusted XAML in Applications</span></span>

<span data-ttu-id="11df3-105">В самом общем смысле, ненадежный XAML является любым источником XAML, который ваше приложение специально не включало и не излучало.</span><span class="sxs-lookup"><span data-stu-id="11df3-105">In the most general sense, untrusted XAML is any XAML source that your application did not specifically include or emit.</span></span>

<span data-ttu-id="11df3-106">XAML, который компилируется `resx`или хранится в качестве ресурса типа -типа в доверенной и подписанной сборке, по своей сути не является ненадежным.</span><span class="sxs-lookup"><span data-stu-id="11df3-106">XAML that is compiled into or stored as a `resx`-type resource within a trusted and signed assembly is not inherently untrusted.</span></span> <span data-ttu-id="11df3-107">Вы можете доверять XAML столько, сколько вы доверяете сборки в целом.</span><span class="sxs-lookup"><span data-stu-id="11df3-107">You can trust the XAML as much as you trust the assembly as a whole.</span></span> <span data-ttu-id="11df3-108">В большинстве случаев вас беспокоят только аспекты доверия свободного XAML, который является источником XAML, который вы загружаете из потока или другого ввоза или другого ввоза.</span><span class="sxs-lookup"><span data-stu-id="11df3-108">In most cases, you are only concerned with the trust aspects of loose XAML, which is a XAML source that you load from a stream or other I/O.</span></span> <span data-ttu-id="11df3-109">Loose XAML не является специфическим компонентом или характеристикой модели приложения с инфраструктурой развертывания и упаковки.</span><span class="sxs-lookup"><span data-stu-id="11df3-109">Loose XAML is not a specific component or feature of an application model with a deployment and packaging infrastructure.</span></span> <span data-ttu-id="11df3-110">Тем не менее, сборка может реализовать поведение, которое включает в себя загрузку свободного XAML.</span><span class="sxs-lookup"><span data-stu-id="11df3-110">However, an assembly might implement a behavior that involves loading loose XAML.</span></span>

<span data-ttu-id="11df3-111">Для недоверчивого XAML, вы должны относиться к нему в целом так же, как если бы это был ненадежный код.</span><span class="sxs-lookup"><span data-stu-id="11df3-111">For untrusted XAML, you should treat it generally the same as if it were untrusted code.</span></span> <span data-ttu-id="11df3-112">Используйте песочницу или другие метафоры, чтобы предотвратить, возможно, ненадежный XAML от доступа к вашему доверенному коду.</span><span class="sxs-lookup"><span data-stu-id="11df3-112">Use sandboxing or other metaphors to prevent possibly untrusted XAML from accessing your trusted code.</span></span>

<span data-ttu-id="11df3-113">Характер возможностей XAML дает XAML право строить объекты и устанавливать их свойства.</span><span class="sxs-lookup"><span data-stu-id="11df3-113">The nature of XAML capabilities gives the XAML the right to construct objects and set their properties.</span></span> <span data-ttu-id="11df3-114">Эти возможности также включают доступ к преобразователям типов, картографирование и `x:Code` доступ к сборкам в домене приложения, использование расширений разметки, блоков и так далее.</span><span class="sxs-lookup"><span data-stu-id="11df3-114">These capabilities also include accessing type converters, mapping and accessing assemblies in the application domain, using markup extensions, `x:Code` blocks, and so on.</span></span>

<span data-ttu-id="11df3-115">В дополнение к своим возможностям на языковом уровне, XAML используется для определения uI во многих технологиях.</span><span class="sxs-lookup"><span data-stu-id="11df3-115">In addition to its language-level capabilities, XAML is used for UI definition in many technologies.</span></span> <span data-ttu-id="11df3-116">Загрузка ненадежного XAML может означать загрузку вредоносного пуль для спуфинга.</span><span class="sxs-lookup"><span data-stu-id="11df3-116">Loading untrusted XAML might mean loading a malicious spoofing UI.</span></span>

## <a name="sharing-context-between-readers-and-writers"></a><span data-ttu-id="11df3-117">Обмен контекстом между читателями и писателями</span><span class="sxs-lookup"><span data-stu-id="11df3-117">Sharing Context Between Readers and Writers</span></span>

<span data-ttu-id="11df3-118">Архитектура xAML Services .NET xAML для читателей XAML и авторов XAML часто требует обмена считывателя XAML для автора XAML или общего контекста схемы XAML.</span><span class="sxs-lookup"><span data-stu-id="11df3-118">.NET XAML Services architecture for XAML readers and XAML writers often requires sharing a XAML reader to a XAML writer, or a shared XAML schema context.</span></span> <span data-ttu-id="11df3-119">При написании логики цикла узлов XAML или предоставлении пользовательского пути сохранения может потребоваться совместное использование объектов или контекстов.</span><span class="sxs-lookup"><span data-stu-id="11df3-119">Sharing objects or contexts might be required if you are writing XAML node loop logic, or providing a custom save path.</span></span> <span data-ttu-id="11df3-120">Не делитесь экземплярами чтения XAML, нестандартным контекстом схемы XAML или настройками для классов чтения/записок XAML между доверенным и ненадежным кодом.</span><span class="sxs-lookup"><span data-stu-id="11df3-120">Don't share XAML reader instances, nondefault XAML schema context, or settings for XAML reader/writer classes between trusted and untrusted code.</span></span>

<span data-ttu-id="11df3-121">В большинстве сценариев и операций, связанных с записью объектов XAML для поддержки типа CLR, можно просто использовать контекст схемы XAML по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="11df3-121">Most scenarios and operations involving XAML object writing for a CLR-based type backing can just use default XAML schema context.</span></span> <span data-ttu-id="11df3-122">Контекст схемы XAML по умолчанию явно не включает параметры, которые могут поставить под угрозу полное доверие.</span><span class="sxs-lookup"><span data-stu-id="11df3-122">The default XAML schema context does not explicitly include settings that could compromise full trust.</span></span> <span data-ttu-id="11df3-123">Таким образом, безопасно делиться контекстом между надежными и ненадежными компонентами XAML reader/writer.</span><span class="sxs-lookup"><span data-stu-id="11df3-123">It is thus safe to share context between trusted and untrusted XAML reader/writer components.</span></span> <span data-ttu-id="11df3-124">Однако, если вы сделаете это, это все еще лучшая <xref:System.AppDomain> практика, чтобы держать таких читателей и писателей в отдельных областях, с одним из них специально предназначены / sandboxed для частичного доверия.</span><span class="sxs-lookup"><span data-stu-id="11df3-124">However, if you do this, it is still a best practice to keep such readers and writers in separate <xref:System.AppDomain> scopes, with one of them specifically intended/sandboxed for partial trust.</span></span>

## <a name="xaml-namespaces-and-assembly-trust"></a><span data-ttu-id="11df3-125">XAML Namespaces и доверие сборки</span><span class="sxs-lookup"><span data-stu-id="11df3-125">XAML Namespaces and Assembly Trust</span></span>

<span data-ttu-id="11df3-126">Основной неквалифицированный синтаксис и определение того, как XAML интерпретирует пользовательское отображение пространства имен XAML в сборке, не проводит различия между доверенной и ненадежной сборкой, загруженной в домен приложения.</span><span class="sxs-lookup"><span data-stu-id="11df3-126">The basic unqualified syntax and definition for how XAML interprets a custom XAML namespace mapping to an assembly does not distinguish between a trusted and untrusted assembly as loaded into the application domain.</span></span> <span data-ttu-id="11df3-127">Таким образом, технически возможно, чтобы ненадежная сборка подделать предназначенное отображение пространства имен XAML и захватить заявленную информацию об объекте и имуществе источника XAML.</span><span class="sxs-lookup"><span data-stu-id="11df3-127">Thus, it is technically possible for an untrusted assembly to spoof a trusted assembly's intended XAML namespace mapping and capture a XAML source's declared object and property information.</span></span> <span data-ttu-id="11df3-128">Если у вас есть требования к безопасности, чтобы избежать этой ситуации, предполагаемое отображение пространства имен XAML должно быть сделано с использованием одного из следующих методов:</span><span class="sxs-lookup"><span data-stu-id="11df3-128">If you have security requirements to avoid this situation, your intended XAML namespace mapping should be made using one of the following techniques:</span></span>

- <span data-ttu-id="11df3-129">Используйте полностью квалифицированное название сборки с сильным именем в любом отображении пространства имен XAML, сделанном XAML вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="11df3-129">Use a fully qualified assembly name with strong name in any XAML namespace mapping made by your application's XAML.</span></span>

- <span data-ttu-id="11df3-130">Ограничьте отображение сборки фиксированным набором референс-агрегатов, создав специфичную <xref:System.Xaml.XamlSchemaContext> для ваших читателей XAML и авторов объектов XAML.</span><span class="sxs-lookup"><span data-stu-id="11df3-130">Restrict assembly mapping to a fixed set of reference assemblies, by constructing a specific <xref:System.Xaml.XamlSchemaContext> for your XAML readers and XAML object writers.</span></span> <span data-ttu-id="11df3-131">См. раздел <xref:System.Xaml.XamlSchemaContext.%23ctor%28System.Collections.Generic.IEnumerable%7BSystem.Reflection.Assembly%7D%29>.</span><span class="sxs-lookup"><span data-stu-id="11df3-131">See <xref:System.Xaml.XamlSchemaContext.%23ctor%28System.Collections.Generic.IEnumerable%7BSystem.Reflection.Assembly%7D%29>.</span></span>

## <a name="xaml-type-mapping-and-type-system-access"></a><span data-ttu-id="11df3-132">Картирование типа XAML и доступ к системе типа</span><span class="sxs-lookup"><span data-stu-id="11df3-132">XAML Type Mapping and Type System Access</span></span>

<span data-ttu-id="11df3-133">XAML поддерживает свою собственную систему типов, которая во многом является одноранговой, как CLR реализует основную систему типа CLR.</span><span class="sxs-lookup"><span data-stu-id="11df3-133">XAML supports its own type system, which in many ways is a peer to how CLR implements the basic CLR type system.</span></span> <span data-ttu-id="11df3-134">Однако для некоторых аспектов осведомленности о типе, когда вы принимаете доверительные решения о типе, основанном на его типе информации, следует отложить информацию типа в типах поддержки CLR.</span><span class="sxs-lookup"><span data-stu-id="11df3-134">However, for certain aspects of type awareness where you are making trust decisions about a type based on its type information, you should defer to the type information in the CLR backing types.</span></span> <span data-ttu-id="11df3-135">Это объясняется тем, что некоторые из конкретных возможностей отчетности системы типа XAML остаются открытыми как виртуальные методы и поэтому не полностью контролируются первоначальными реализациями .NET XAML Services.</span><span class="sxs-lookup"><span data-stu-id="11df3-135">This is because some of the specific reporting capabilities of the XAML type system are left open as virtual methods and are therefore, not fully under the control of the original .NET XAML Services implementations.</span></span> <span data-ttu-id="11df3-136">Эти точки расширяемости существуют потому, что система типа XAML является расширительной, чтобы соответствовать расширяемости самого XAML и его возможных альтернативных стратегий отображения типов по сравнению с реализацией, поддерживаемой CLR по умолчанию, и контекстом схемы XAML по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="11df3-136">These extensibility points exist because the XAML type system is extensible, to match the extensibility of XAML itself and its possible alternative type-mapping strategies versus the default CLR-backed implementation and default XAML schema context.</span></span> <span data-ttu-id="11df3-137">Для получения дополнительной информации, см конкретные заметки о нескольких свойствах <xref:System.Xaml.XamlType> и <xref:System.Xaml.XamlMember>.</span><span class="sxs-lookup"><span data-stu-id="11df3-137">For more information, see the specific notes on several of the properties of <xref:System.Xaml.XamlType> and <xref:System.Xaml.XamlMember>.</span></span>

## <a name="see-also"></a><span data-ttu-id="11df3-138">См. также</span><span class="sxs-lookup"><span data-stu-id="11df3-138">See also</span></span>

- <xref:System.Xaml.Permissions.XamlAccessLevel>
