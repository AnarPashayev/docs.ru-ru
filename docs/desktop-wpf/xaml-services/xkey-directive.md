---
title: Директива x:Key
ms.date: 03/30/2017
f1_keywords:
- xKey
- Key
- x:Key
helpviewer_keywords:
- x:Key attribute [XAML Services]
- Key attribute in XAML [XAML Services]
- XAML [XAML Services], x:Key attribute
ms.assetid: 1985cd45-f197-42d5-b75e-886add64b248
ms.openlocfilehash: c05f98932ceceeb1530b34a09b1923f2af1378b5
ms.sourcegitcommit: c2d9718996402993cf31541f11e95531bc68bad0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/27/2020
ms.locfileid: "81432758"
---
# <a name="xkey-directive"></a>Директива x:Key
Уникально определяет элементы, которые создаются и ссылаются в словаре, определяемом XAML. Добавление `x:Key` значения к элементу объекта XAML является наиболее распространенным способом идентификации ресурса <xref:System.Windows.ResourceDictionary>в словаре ресурсов, например в WPF.  
  
## <a name="xaml-attribute-usage"></a>Использование атрибута XAML  
  
```xaml  
<object x:Key="stringKeyValue".../>  
-or-  
<object x:Key="{markupExtensionUsage}".../>  
```  
  
## <a name="xaml-attribute-usage-wpf-specific"></a>Использование атрибутов XAML (специфический WPF)  
  
```xaml  
<object.Resources>  
  <object x:Key="stringKeyValue".../>  
</object.Resources>  
-or-  
<object.Resources>  
  <object x:Key="{markupExtensionUsage}".../>  
</object.Resources>  
```  
  
## <a name="xaml-values"></a>Значения XAML  
  
|||  
|-|-|  
|`stringKeyValue`|Текстовая строка для использования в качестве ключа. Текстовая строка должна соответствовать [грамматике XamlName.](xamlname-grammar.md)|  
|`markupExtensionUsage`|В разграничителе {}расширения разметки , использование расширения разметки, которое обеспечивает объект для использования в качестве ключа. См. заметки.|  
  
## <a name="remarks"></a>Примечания  
 `x:Key`поддерживает концепцию словаря ресурсов XAML. XAML как язык не определяет реализацию словаря ресурсов, то есть остается за определенными инфраструктурами uI. Чтобы узнать больше о том, как словари ресурсов XAML реализуются в WPF, [см.](../fundamentals/xaml-resources-define.md)  
  
 В XAML 2006 и `x:Key` WPF, должны быть предоставлены в качестве атрибута. Вы все еще можете использовать неструнные клавиши, но для этого требуется использование расширения разметки, чтобы обеспечить неструнное значение в форме атрибута. Если вы используете XAML 2009, `x:Key` может быть указан в качестве элемента, чтобы явно поддерживать словари, свекретые типами объектов, кроме строк, не требуя промежуточного расширения разметки. Смотрите раздел "XAML 2009" в этой теме. Остальная часть раздела Замечания относится конкретно к осуществлению XAML 2006.  
  
 Значение атрибута `x:Key` может быть любой строкой, определенной в [грамматике XamlName](xamlname-grammar.md) или может быть объектом, оцениваемым с помощью расширения разметки. Например, в WPF можно ознакомиться на сайтах WPF.  
  
 Элементы родительских элементов, <xref:System.Collections.IDictionary> которые являются `x:Key` реализацией, обычно должны включать атрибут, который определяет уникальное ключевое значение в этом словаре. Рамки могут реализовывать псевдонимные `x:Key` ключевые свойства, чтобы заменить конкретные типы; типы, определяющие такие <xref:System.Windows.Markup.DictionaryKeyPropertyAttribute>свойства, следует отнести к .  
  
 Кодовый эквивалент `x:Key` указания — это ключ, <xref:System.Collections.IDictionary>используемый для базового. Например, `x:Key` значение, применяемое в разметке ресурса в `key` WPF, эквивалентно значению параметра <xref:System.Windows.ResourceDictionary.Add%2A?displayProperty=nameWithType> при добавлении ресурса в WPF <xref:System.Windows.ResourceDictionary> в коде.  
  
## <a name="wpf-usage-notes"></a>Примечания об использовании WPF  
 Детские объекты родительского <xref:System.Collections.IDictionary> объекта, который является <xref:System.Windows.ResourceDictionary>реализацией, такие `x:Key` как WPF, должны обычно включать атрибут, и ключевое значение должно быть уникальным в этом словаре. Есть два заметных исключения:  
  
- Некоторые типы WPF объявляют неявный ключ для использования словаря. Например, <xref:System.Windows.Style> с <xref:System.Windows.Style.TargetType%2A>, или <xref:System.Windows.DataTemplate> с <xref:System.Windows.DataTemplate.DataType%2A>, может <xref:System.Windows.ResourceDictionary> быть в и использовать неявный ключ.  
  
- WPF поддерживает концепцию объединенного словаря ресурсов. Ключи могут быть общими между объединенными словарями, и совместное поведение ключа можно получить с помощью <xref:System.Windows.FrameworkContentElement.FindResource%2A>. Подробнее см. в разделе [Объединенные словари ресурсов](../../framework/wpf/advanced/merged-resource-dictionaries.md).  
  
 В общей модели внедрения и применения WPF XAML уникальность ключей не проверяется компилятором разметки XAML. Вместо этого отсутствующие `x:Key` или неуникальные значения вызывают ошибки парсера времени XAML. Тем не менее, Visual Studio обработки словарей для WPF часто можно отметить такие ошибки на этапе проектирования.  
  
 Обратите внимание, что в <xref:System.Windows.ResourceDictionary> показанном синтаксисе объект подразумевает, как процессор WPF <xref:System.Windows.FrameworkElement.Resources%2A> XAML производит коллекцию для заполнения коллекции. A <xref:System.Windows.ResourceDictionary> обычно не предоставляется явно в качестве элемента в разметке, хотя в некоторых случаях <xref:System.Windows.FrameworkElement.Resources%2A> это может быть в случае необходимости для ясности (это будет элемент объекта сбора между элементом свойства и элементами в пределах этого заполнения словаря). Подробнее о том, почему объект сбора почти всегда является неявным элементом разметки, читайте [в материале XAML Syntax In Detail.](../../framework/wpf/advanced/xaml-syntax-in-detail.md)  
  
 В реализации WPF XAML обработка ключей словаря <xref:System.Windows.ResourceKey> ресурсов определяется абстрактным классом. Однако процессор WPF XAML производит различные базовые типы расширений для ключей в зависимости от их использования. Например, ключ для <xref:System.Windows.DataTemplate> одного или любого производного класса <xref:System.Windows.DataTemplateKey> обрабатывается отдельно и создает отдельный объект.  
  
 Ключи и имена используют различные`x:Key` директивы и языковые элементы (по сравнению с `x:Name`) в базовом определении XAML. Ключи и имена также используются в различных ситуациях в определении WPF и применении этих концепций. Для получения подробной информации [см.](../../framework/wpf/advanced/wpf-xaml-namescopes.md)  
  
 Как указывалось ранее, значение ключа может поставляться через расширение разметки и может быть не только строкой. Пример сценария WPF заключается `x:Key` в том, что значение может быть [компонентомResourceKey.](../../framework/wpf/advanced/componentresourcekey-markup-extension.md) Некоторые элементы управления разоблачают ключ стиля этого типа для пользовательского ресурса стиля, который влияет на часть внешнего вида и поведения этого элемента управления без полной замены стиля. Примером такого ключа <xref:System.Windows.Controls.ToolBar.ButtonStyleKey%2A>является .  
  
 Функция объединенного словаря WPF вводит дополнительные соображения для ключевой уникальности и ключевого поведения поиска. Подробнее см. в разделе [Объединенные словари ресурсов](../../framework/wpf/advanced/merged-resource-dictionaries.md).  
  
## <a name="xaml-2009"></a>XAML 2009  
 XAML 2009 ослабляет `x:Key` ограничение, которое всегда предоставляется в форме атрибута.  
  
 В WPF можно использовать функции XAML 2009, но только для XAML, который не составлен разметкой. Скомпилированный с разметкой XAML и форма BAML кода XAML в настоящее время не поддерживают ключевые слова и компоненты XAML 2009.  
  
 В соответствии с XAML 2009 можно указать `x:Key` элементы через следующее использование:  
  
### <a name="xaml-element-usage-xaml-2009-only"></a>Использование элементов XAML (только XAML 2009)  
  
```xaml  
<object>  
  <x:Key>  
keyObject  
  </x:Key>  
...  
</object>  
```  
  
### <a name="xaml-values"></a>Значения XAML  
  
|||  
|-|-|  
|`keyObject`|Элемент объекта для объекта, который используется в `object` качестве ключа для данного в специализированном словаре.|  
  
- Контейнер/родитель для такого вида использования здесь не отображается. `object`ожидается, что это будет дитя элемента объекта, представляющего собой специализированную реализацию словаря. `keyObject`ожидается, что экземпляр объекта (или значение типа значения), которое подходит в качестве ключа для этой конкретной специализированной реализации словаря.  
  
- WPF не реализует словари, требующие такого использования. Объектные клавиши являются более общей особенностью языка XAML, возможно, полезной для некоторых сценариев пользовательского словаря, где желательно создать словарь в XAML. Для функций WPF, таких как неявные стили, использующие неструнные ключи для ресурсов, существуют другие методы определения или указания ключей, поэтому использование ключа объекта не требуется.  
  
- `keyObject`также может быть использование расширения разметки в форме элемента объекта, а не экземпляр прямого объекта.  
  
## <a name="silverlight-usage-notes"></a>Примечания к использованию Silverlight  
 `x:Key`для Silverlight документируется отдельно. Для получения дополнительной информации [см. Языковые особенности (Silverlight)](https://docs.microsoft.com/previous-versions/windows/silverlight/dotnet-windows-silverlight/cc188995(v=vs.95)).  
  
## <a name="see-also"></a>См. также

- [Ресурсы XAML](../fundamentals/xaml-resources-define.md)
- [Ресурсы и код](../../framework/wpf/advanced/resources-and-code.md)
- [Расширение разметки StaticResource](../../framework/wpf/advanced/staticresource-markup-extension.md)
