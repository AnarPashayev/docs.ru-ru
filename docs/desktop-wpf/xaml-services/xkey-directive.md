---
title: Директива x:Key
ms.date: 03/30/2017
f1_keywords:
- xKey
- Key
- x:Key
helpviewer_keywords:
- x:Key attribute [XAML Services]
- Key attribute in XAML [XAML Services]
- XAML [XAML Services], x:Key attribute
ms.assetid: 1985cd45-f197-42d5-b75e-886add64b248
ms.openlocfilehash: 7e4e9cbded01297818f9f01df01e95e94d7dc4af
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/15/2020
ms.locfileid: "90548277"
---
# <a name="xkey-directive"></a>Директива x:Key
Уникально идентифицирует элементы, создаваемые и упоминаемые в словаре, определенном в XAML. Добавление `x:Key` значения в объектный элемент XAML является наиболее распространенным способом для обнаружения ресурса в словаре ресурсов, например в WPF <xref:System.Windows.ResourceDictionary> .  
  
## <a name="xaml-attribute-usage"></a>Использование атрибута XAML  
  
```xaml  
<object x:Key="stringKeyValue".../>  
-or-  
<object x:Key="{markupExtensionUsage}".../>  
```  
  
## <a name="xaml-attribute-usage-wpf-specific"></a>Использование атрибута XAML (только для WPF)  
  
```xaml  
<object.Resources>  
  <object x:Key="stringKeyValue".../>  
</object.Resources>  
-or-  
<object.Resources>  
  <object x:Key="{markupExtensionUsage}".../>  
</object.Resources>  
```  
  
## <a name="xaml-values"></a>Значения XAML  
  
|||  
|-|-|  
|`stringKeyValue`|Текстовая строка, используемая в качестве ключа. Текстовая строка должна соответствовать [грамматике имяxaml](xamlname-grammar.md).|  
|`markupExtensionUsage`|В разделителях расширения разметки {} Использование расширения разметки, которое предоставляет объект для использования в качестве ключа. См. заметки.|  
  
## <a name="remarks"></a>Примечания  
 `x:Key` поддерживает концепцию словаря ресурсов XAML. XAML в качестве языка не определяет реализацию словаря ресурсов, которая оставлена определенным платформам пользовательского интерфейса. Дополнительные сведения о реализации словарей ресурсов XAML в WPF см. в разделе [ресурсы XAML](../fundamentals/xaml-resources-define.md).  
  
 В XAML 2006 и WPF в `x:Key` качестве атрибута необходимо указать. Вы по-прежнему можете использовать Нестроковые ключи, но для этого требуется использование расширения разметки, чтобы предоставить нестроковое значение в форме атрибута. Если вы используете XAML 2009, `x:Key` можно указать в качестве элемента, чтобы явно поддерживать словари, ключи которых отличаются от типов строк, не требуя промежуточного расширения разметки. См. раздел "XAML 2009" этой статьи. Оставшаяся часть раздела «Примечания» относится только к реализации XAML 2006.  
  
 Значением атрибута `x:Key` может быть любая строка, определенная в [грамматике имяxaml](xamlname-grammar.md) или может быть объектом, вычисленным с помощью расширения разметки. Пример из WPF см. в разделе "Примечания об использовании WPF".  
  
 Дочерние элементы родительского элемента, который является <xref:System.Collections.IDictionary> реализацией, обычно включают в себя `x:Key` атрибут, задающий уникальное значение ключа в этом словаре. Платформы могут реализовывать свойства ключа с псевдонимами для замены `x:Key` в определенных типах; типы, определяющие такие свойства, должны иметь атрибуты <xref:System.Windows.Markup.DictionaryKeyPropertyAttribute> .  
  
 Код, эквивалентный указанию, `x:Key` является ключом, используемым для базового класса <xref:System.Collections.IDictionary> . Например, объект `x:Key` , применяемый в разметке для ресурса в WPF, эквивалентен значению `key` параметра <xref:System.Windows.ResourceDictionary.Add%2A?displayProperty=nameWithType> при добавлении ресурса в WPF <xref:System.Windows.ResourceDictionary> в коде.  
  
## <a name="wpf-usage-notes"></a>Примечания об использовании WPF  
 Дочерние объекты родительского объекта, который является <xref:System.Collections.IDictionary> реализацией, например WPF <xref:System.Windows.ResourceDictionary> , обычно должны включать `x:Key` атрибут, а значение ключа должно быть уникальным в пределах этого словаря. Существуют два важных исключения.  
  
- Некоторые типы WPF объявляют неявный ключ для использования словаря. Например, с параметром, <xref:System.Windows.Style> <xref:System.Windows.Style.TargetType%2A> или с <xref:System.Windows.DataTemplate> <xref:System.Windows.DataTemplate.DataType%2A> , может быть в <xref:System.Windows.ResourceDictionary> и использовать неявный ключ.  
  
- WPF поддерживает концепцию объединенного словаря ресурсов. Ключи могут совместно использоваться объединенными словарями, а поведение общего ключа можно получить с помощью <xref:System.Windows.FrameworkContentElement.FindResource%2A> . Дополнительные сведения см. в разделе [Объединенные словари ресурсов](/dotnet/desktop/wpf/advanced/merged-resource-dictionaries).  
  
 В общей реализации XAML и модели приложения WPF Уникальность ключа не проверяется компилятором разметки XAML. Вместо этого отсутствующие или неуникальные `x:Key` значения приводят к ошибкам средства синтаксического анализа XAML во время загрузки. Однако обработка словарей для WPF в Visual Studio часто может зазаметить такие ошибки на этапе проектирования.  
  
 Обратите внимание, что в приведенном синтаксисе <xref:System.Windows.ResourceDictionary> объект является неявным в том, как обработчик XAML WPF создает коллекцию для заполнения <xref:System.Windows.FrameworkElement.Resources%2A> коллекции. Как <xref:System.Windows.ResourceDictionary> правило, не предоставляется явно в качестве элемента в разметке, хотя в некоторых случаях это может быть для ясности (это будет элемент объекта коллекции между <xref:System.Windows.FrameworkElement.Resources%2A> элементом свойства и элементами внутри, заполняющими словарь). Сведения о том, почему объект коллекции почти всегда является неявным элементом в разметке, см. [в разделе Подробное описание синтаксиса XAML](/dotnet/desktop/wpf/advanced/xaml-syntax-in-detail).  
  
 В реализации WPF XAML обработка ключей словаря ресурсов определяется <xref:System.Windows.ResourceKey> абстрактным классом. Однако обработчик XAML WPF создает различные базовые типы расширений для ключей на основе их использования. Например, ключ для <xref:System.Windows.DataTemplate> или любого производного класса обрабатывается отдельно и создает отдельный <xref:System.Windows.DataTemplateKey> объект.  
  
 Ключи и имена используют разные директивы и языковые элементы ( `x:Key` и `x:Name` ) в базовом определении XAML. Ключи и имена также используются в различных ситуациях определения WPF и применения этих концепций. Дополнительные сведения см. в разделе [области имен XAML WPF](/dotnet/desktop/wpf/advanced/wpf-xaml-namescopes).  
  
 Как упоминалось ранее, значение ключа можно передать с помощью расширения разметки и может быть отличным от строкового значения. Примером сценария WPF является то, что значение `x:Key` может быть [ComponentResourceKey](/dotnet/desktop/wpf/advanced/componentresourcekey-markup-extension). Некоторые элементы управления предоставляют ключ стиля этого типа для пользовательского ресурса стиля, который влияет на часть внешнего вида и поведения этого элемента управления без полной замены стиля. Примером такого ключа является <xref:System.Windows.Controls.ToolBar.ButtonStyleKey%2A> .  
  
 Функция объединенного словаря WPF предоставляет дополнительные рекомендации по уникальности ключа и ведению поиска ключей. Дополнительные сведения см. в разделе [Объединенные словари ресурсов](/dotnet/desktop/wpf/advanced/merged-resource-dictionaries).  
  
## <a name="xaml-2009"></a>XAML 2009  
 XAML 2009 ослабляет ограничение, которое `x:Key` всегда предоставляется в форме атрибута.  
  
 В WPF можно использовать функции XAML 2009, но только для XAML, который не является компилированной разметкой. Скомпилированный с разметкой XAML и форма BAML кода XAML в настоящее время не поддерживают ключевые слова и компоненты XAML 2009.  
  
 В XAML 2009 можно указать `x:Key` элементы с помощью следующего использования:  
  
### <a name="xaml-element-usage-xaml-2009-only"></a>Использование элементов XAML (только для XAML 2009)  
  
```xaml  
<object>  
  <x:Key>  
keyObject  
  </x:Key>  
...  
</object>  
```  
  
### <a name="xaml-values"></a>Значения XAML  
  
|||  
|-|-|  
|`keyObject`|Объектный элемент для объекта, который используется в качестве ключа для заданного `object` в специализированном словаре.|  
  
- Контейнер/родитель для этого типа использования не показан здесь. `object` должен быть дочерним элементом элемента Object, представляющего специализированную реализацию словаря. `keyObject` должен быть экземпляром объекта (или значением типа значения), подходящим в качестве ключа для конкретной реализации специализированного словаря.  
  
- WPF не реализует словари, требующие такого использования. Объектные ключи — это более общий компонент языка XAML, который, возможно, полезен для некоторых сценариев пользовательских словарей, где желательно создать словарь в XAML. Для функций WPF, таких как неявные стили, которые используют Нестроковые ключи для ресурсов, существуют другие методы для установки или указания ключей, поэтому использование ключа объекта не требуется.  
  
- `keyObject` также может быть использованием расширения разметки в форме объектного элемента, а не непосредственного экземпляра объекта.  
  
## <a name="silverlight-usage-notes"></a>Заметки об использовании Silverlight  
 `x:Key` для Silverlight задокументировано отдельно. Дополнительные сведения см. в разделе [пространство имен XAML (x:). Функции языка (Silverlight)](/previous-versions/windows/silverlight/dotnet-windows-silverlight/cc188995(v=vs.95)).  
  
## <a name="see-also"></a>См. также

- [Ресурсы XAML](../fundamentals/xaml-resources-define.md)
- [Ресурсы и код](/dotnet/desktop/wpf/advanced/resources-and-code)
- [Расширение разметки StaticResource](/dotnet/desktop/wpf/advanced/staticresource-markup-extension)
