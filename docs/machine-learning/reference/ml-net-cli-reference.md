---
title: Справочник по командам интерфейса командной строки (CLI) ML.NET
description: Обзор, примеры и справочник по командам auto-train в программе командной строки ML.NET.
ms.date: 12/18/2019
ms.openlocfilehash: 5e59eba91721b26622360818a73adb07a654dc28
ms.sourcegitcommit: 7bc6887ab658550baa78f1520ea735838249345e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/03/2020
ms.locfileid: "75636124"
---
# <a name="the-mlnet-cli-command-reference"></a>Справочник по командам интерфейса командной строки ML.NET

Команда `auto-train` — это основная команда, предоставляемая программой командной строки ML.NET. Она позволяет создать модель ML.NET хорошего качества, используя автоматизированное машинное обучение (AutoML), а также пример кода на C# для выполнения и оценки модели. Кроме того, код C# для обучения модели создается для изучения алгоритма и параметров модели.

> [!NOTE]
> Этот раздел относится к ML.NET CLI и ML.NET AutoML, находящимся в данный момент в предварительной версии; материалы могут быть изменены.

## <a name="overview"></a>Обзор

Пример использования:

```console
mlnet auto-train --task regression --dataset "cars.csv" --label-column-name price
```

Команда `mlnet auto-train` создает следующие ресурсы:

- готовый к использованию ZIP-файл сериализованной модели ("модели высшего качества");
- код C# для выполнения или оценки созданной модели.
- код на C# с кодом обучения, используемый для создания этой модели.

Первые два ресурса можно использовать непосредственно в приложениях конечных пользователей (веб-приложениях и службах ASP.NET Core, классических приложениях и т. д.) для прогнозирования с помощью созданной модели.

Третий актив, код обучения, показывает, какой код API ML.NET использовало средство CLI для обучения созданной модели, поэтому можно определить конкретный алгоритм обучения и параметры модели.

## <a name="examples"></a>Примеры

Самый простой пример команды CLI для задачи бинарной классификации (ядро AutoML выведет большую часть параметров из предоставленных данных):

```console
mlnet auto-train --task binary-classification --dataset "customer-feedback.tsv" --label-column-name Sentiment
```

Другой простой пример команды интерфейса командной строки для решения задачи регрессии:

``` console
mlnet auto-train --task regression --dataset "cars.csv" --label-column-name Price
```

Создание и обучение модели бинарной классификации с набором данных для обучения, проверочным набором данных и дальнейшей настройкой явных аргументов:

```console
mlnet auto-train --task binary-classification --dataset "/MyDataSets/Population-Training.csv" --test-dataset "/MyDataSets/Population-Test.csv" --label-column-name "InsuranceRisk" --cache on --max-exploration-time 600
```

## <a name="command-options"></a>Параметры команды

`mlnet auto-train` обучает несколько моделей на основе предоставленного набора данных и наконец выбирает лучшую модель, сохраняет ее как сериализуемый ZIP-файл, а также создает связанный код на C# для оценки и обучения.

```console
mlnet auto-train

--task | --mltask | -T <value>

--dataset | -d <value>

[
 [--validation-dataset | -v <value>]
  --test-dataset | -t <value>
]

--label-column-name | -n <value>
|
--label-column-index | -i <value>

[--ignore-columns | -I <value>]

[--has-header | -h <value>]

[--max-exploration-time | -x <value>]

[--verbosity | -V <value>]

[--cache | -c <value>]

[--name | -N <value>]

[--output-path | -o <value>]

[--help | -h]

```

Недопустимые входные параметры приводят к тому, что средство CLI выдает список допустимых входных данных и сообщение об ошибке.

## <a name="task"></a>Задача

`--task | --mltask | -T` (строка)

Одна строка, описывающая задачу машинного обучения для решения. Например, это может быть любая из следующих задач (программа командной строки со временем будет поддерживать все задачи, поддерживаемые в AutoML):

- `regression` — выберите, если модель машинного обучения будет использоваться для прогнозирования числовых значений.
- `binary-classification` — выберите, если результат модели машинного обучения имеет два возможных категориальных логических значения (0 или 1).
- `multiclass-classification` — выберите, если результат модели машинного обучения имеет несколько возможных категориальных значений.

В этом аргументе должна указываться только одна задача машинного обучения.

## <a name="dataset"></a>Набор данных

`--dataset | -d` (строка)

Этот аргумент содержит путь к файлу в одном из следующих форматов:

- *А. Файл полного набора данных:* Если используется этот параметр и пользователь не задает `--test-dataset` и `--validation-dataset`, внутри для проверки модели используется кросс-валидация с K-сверткой или автоматизированное разделение данных. В этом случае пользователю будет достаточно указать путь к файлу набора данных.

- *Б. Файл набора данных для обучения:* Если пользователь также предоставляет наборы данных для валидации модели (с помощью `--test-dataset` и при необходимости `--validation-dataset`), то аргумент `--dataset` указывает лишь "набор данных для обучения". Например при использовании подхода 80–20 % для валидации качества модели и получения показателей точности "набор данных для обучения" будет содержать 80 % данных, а на "проверочный набор данных" придется 20 % данных.

## <a name="test-dataset"></a>Проверочный набор данных

`--test-dataset | -t` (строка)

Путь к файлу набора данных теста, например при использовании подхода 80–20 % при выполнении регулярных валидаций для получения показателей точности.

При использовании `--test-dataset` параметр `--dataset` также является обязательным.

Аргумент `--test-dataset` является необязательным, если только не используется --validation-dataset. В этом случае пользователь должен использовать три аргумента.

## <a name="validation-dataset"></a>Набор данных для проверки

`--validation-dataset | -v` (строка)

Путь к файлу валидационного набора данных. В любом случае валидационный набор данных является необязательным.

При использовании `validation dataset` должно быть следующее поведение:

- Аргументы `test-dataset` и `--dataset` также являются обязательными.

- Набор данных `validation-dataset` используется для оценки ошибки прогноза для выбора модели.

- `test-dataset` используется для оценки ошибки обобщения конечной выбранной модели. В идеале проверочный набор должен храниться в "хранилище" и добавляться только в конце анализа данных.

Обычно при использовании `validation dataset` с `test dataset` этап валидации состоит из двух частей.

1. В первой части вы просто смотрите на модели и выбираете наиболее эффективный подход с использованием проверочных данных (=валидация).
2. Затем можно оценить точность выбранного подхода (= проверка).

Таким образом, разделение данных может быть задано как 80-10-10 или 75-15-10. Пример:

- Файл `training-dataset` должен содержать 75 % данных.
- Файл `validation-dataset` должен содержать 15 % данных.
- Файл `test-dataset` должен содержать 10 % данных.

В любом случае эти проценты выбираются с помощью интерфейса командной строки, который будет предоставлять уже разделенные файлы.

## <a name="label-column-name"></a>Надпись "имя столбца"

`--label-column-name | -n` (строка)

С помощью этого аргумента можно указать определенную цель и целевой столбец (переменную, которую необходимо прогнозировать), используя имя столбца в заголовке набора данных.

Этот аргумент используется только для контролируемых задач машинного обучения, таких как *задачи классификации*. Он не может использоваться для задач машинного обучения без учителя, например *кластеризации*.

## <a name="label-column-index"></a>Надпись "индекс столбца"

`--label-column-index | -i` (int)

С помощью этого аргумента можно задать определенную цель и целевой столбца (переменную, которую требуется спрогнозировать) с помощью числового индекса столбца в файле набора данных (значения индексов столбцов начинаются с 1).

*Примечание.* Если пользователь также задал `--label-column-name`, используется `--label-column-name`.

Этот аргумент используется только для контролируемых задач машинного обучения, таких как *задачи классификации*. Он не может использоваться для задач машинного обучения без учителя, например *кластеризации*.

## <a name="ignore-columns"></a>Игнорировать столбцы

`--ignore-columns | -I` (строка)

С помощью этого аргумента можно игнорировать существующие столбцы в файле набора данных; они не загружаются и не используются процессами обучения.

Укажите имена столбцов, которые требуется игнорировать. Используйте ", " (запятая с пробелом) или " " (пробел) для разделения нескольких имен столбцов. Можно использовать кавычки для имен столбцов, содержащих пробелы (например, "Вход в систему").

Пример.

`--ignore-columns email, address, id, logged_in`

## <a name="has-header"></a>Имеет заголовок

`--has-header | -h` (логическое значение)

Укажите, содержат ли файлы набора данных строку заголовка.
Доступны следующие значения:

- `true`
- `false`

По умолчанию значение равно `true`, если этот аргумент не задан пользователем.

Чтобы использовать аргумент `--label-column-name`, необходимо указать заголовок в файле набора данных и задать `--has-header` как `true` (используется по умолчанию).

## <a name="max-exploration-time"></a>Максимальное время исследования

`--max-exploration-time | -x` (строка)

По умолчанию максимальное время исследования составляет 30 минут.

Этот аргумент задает максимальное время (в секундах) для процесса изучения различных учителей и конфигураций. Заданное время может быть превышено, если указанное время слишком мало (скажем, 2 секунды) для одной итерации. В этом случае фактическое время — это время, необходимое для создания одной модели конфигурации в одной итерации.

Требуемое время для итераций зависит от размера набора данных.

## <a name="cache"></a>Кэш

`--cache | -c` (строка)

При использовании кэширования весь обучающий набор данных будет загружен в память.

Для малых и средних наборов данных с помощью кэша можно существенно улучшить производительность обучения; это означает, что время обучения может быть короче, чем в ситуации, если кэш не используется.

Тем не менее на большие наборы данных загрузка всех данных в память может повлиять отрицательно, так как может возникнуть нехватка памяти. В случае обучения с большими файлами набора данных без использования кэша ML.NET будет потоком передавать блоки данных с диска при необходимости загрузить дополнительные данные во время обучения.

Можно указать следующие значения:

`on`. принудительно включает кэш при обучении;
`off`. принудительно отключает кэш при обучении;
`auto`. кэш будет использоваться в зависимости от эвристики AutoML. Как правило, для небольших и средних наборов данных будет использоваться кэш; большие наборы данных не будут использовать кэш, если вы укажете `auto`.

Если вы не укажете параметр `--cache`, то для кэша `auto` будет использована конфигурация по умолчанию.

## <a name="name"></a>name

`--name | -N` (строка)

Имя для создаваемых выходных проекта или решения. Если имя не задано, используется имя `sample-{mltask}`.

Файл модели ML.NET (ZIP-файл) получит то же имя.

## <a name="output-path"></a>Путь для создаваемых файлов

`--output-path | -o` (строка)

Корневое расположение или папка для размещения созданных выходных данных. Значением по умолчанию является текущий каталог.

## <a name="verbosity"></a>Уровень детализации

`--verbosity | -V` (строка)

Задает уровень детализации стандартных выходных данных.

Допустимыми значениями являются:

- `q[uiet]`
- `m[inimal]` (по умолчанию);
- `diag[nostic]` (уровень ведения журнала).

По умолчанию программа командной строки должна отображать минимальные выходные данные во время работы, например отметить, что она работает и (по возможности) сколько времени уйдет на завершение работы.

## <a name="help"></a>Справка

`-h|--help`

Выводит справку для команды с описанием каждого аргумента.

## <a name="see-also"></a>См. также

- [Установка интерфейса командной строки ML.NET](../how-to-guides/install-ml-net-cli.md)
- [Общие сведения о ML.NET CLI](../automate-training-with-cli.md)
- [Учебник. Анализ тональности с помощью интерфейса командной строки (CLI) ML.NET](../tutorials/sentiment-analysis-cli.md)
- [Данные телеметрии в интерфейсе командной строки ML.NET](../resources/ml-net-cli-telemetry.md)
