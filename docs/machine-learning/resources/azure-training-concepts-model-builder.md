---
title: Обучающие ресурсы Azure по построителям моделей
description: Руководство по ресурсам для службы "Машинное обучение Azure"
ms.topic: reference
ms.date: 06/01/2020
ms.author: luquinta
author: luisquintanilla
ms.openlocfilehash: 1321967cacdd373acc19923f992d30c5453ea869
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/15/2020
ms.locfileid: "90556223"
---
# <a name="model-builder-azure-training-resources"></a><span data-ttu-id="a49a1-103">Обучающие ресурсы Azure по построителям моделей</span><span class="sxs-lookup"><span data-stu-id="a49a1-103">Model Builder Azure Training Resources</span></span>

<span data-ttu-id="a49a1-104">Ниже приведено руководство с описанием ресурсов, используемых для обучения моделей в Azure с помощью построителя моделей.</span><span class="sxs-lookup"><span data-stu-id="a49a1-104">The following is a guide to help you learn more about resources used to train models in Azure with Model Builder.</span></span>

## <a name="what-is-an-azure-machine-learning-experiment"></a><span data-ttu-id="a49a1-105">Что такое эксперимент Машинного обучения Azure?</span><span class="sxs-lookup"><span data-stu-id="a49a1-105">What is an Azure Machine Learning experiment?</span></span>

<span data-ttu-id="a49a1-106">Эксперимент Машинного обучения Azure — это ресурс, который необходимо создать перед запуском обучения с помощью построителя моделей в Azure.</span><span class="sxs-lookup"><span data-stu-id="a49a1-106">An Azure Machine Learning experiment is a resource that needs to be created before running Model Builder training on Azure.</span></span>

<span data-ttu-id="a49a1-107">Эксперимент инкапсулирует конфигурацию и результаты одного или нескольких запусков обучения ML.</span><span class="sxs-lookup"><span data-stu-id="a49a1-107">The experiment encapsulates the configuration and results for one or more machine learning training runs.</span></span> <span data-ttu-id="a49a1-108">Эксперименты связаны с определенной рабочей областью.</span><span class="sxs-lookup"><span data-stu-id="a49a1-108">Experiments belong to a specific workspace.</span></span> <span data-ttu-id="a49a1-109">При первом создании эксперимента его имя регистрируется в рабочей области.</span><span class="sxs-lookup"><span data-stu-id="a49a1-109">The first time an experiment is created, its name is registered in the workspace.</span></span> <span data-ttu-id="a49a1-110">Все последующие запуски (при использовании одного и того же имени эксперимента) регистрируются как часть одного эксперимента.</span><span class="sxs-lookup"><span data-stu-id="a49a1-110">Any subsequent runs - if the same experiment name is used - are logged as part of the same experiment.</span></span> <span data-ttu-id="a49a1-111">В противном случае создается новый эксперимент.</span><span class="sxs-lookup"><span data-stu-id="a49a1-111">Otherwise, a new experiment is created.</span></span>

## <a name="what-is-an-azure-machine-learning-workspace"></a><span data-ttu-id="a49a1-112">Что такое рабочая область Машинного обучения Azure?</span><span class="sxs-lookup"><span data-stu-id="a49a1-112">What is an Azure Machine Learning workspace?</span></span>

<span data-ttu-id="a49a1-113">Рабочая область — это ресурс Машинного обучения Azure, который является централизованным расположением для всех ресурсов и артефактов Машинного обучения Azure, создаваемых в ходе обучения.</span><span class="sxs-lookup"><span data-stu-id="a49a1-113">A workspace is an Azure Machine Learning resource that provides a central place for all Azure Machine Learning resources and artifacts created as part of training run.</span></span>

<span data-ttu-id="a49a1-114">Чтобы создать рабочую область Машинного обучения Azure, необходимо указать следующие сведения.</span><span class="sxs-lookup"><span data-stu-id="a49a1-114">To create an Azure Machine Learning workspace, the following are required:</span></span>

- <span data-ttu-id="a49a1-115">Имя. Имя рабочей области длиной от 3 до 33 символов.</span><span class="sxs-lookup"><span data-stu-id="a49a1-115">Name: A name for your workspace between 3-33 characters.</span></span> <span data-ttu-id="a49a1-116">Имена могут содержать только буквы, цифры и дефисы.</span><span class="sxs-lookup"><span data-stu-id="a49a1-116">Names may only contain alphanumeric characters and hyphens.</span></span>
- <span data-ttu-id="a49a1-117">Регион: Географическое расположение центра обработки данных, в котором развертывается рабочая область и ресурсы.</span><span class="sxs-lookup"><span data-stu-id="a49a1-117">Region: The geographic location of the data center where your workspace and resources are deployed to.</span></span> <span data-ttu-id="a49a1-118">Рекомендуется выбрать ближайшее к вам или вашим клиентам расположение.</span><span class="sxs-lookup"><span data-stu-id="a49a1-118">It is recommended that you choose a location close to where you or your customers are.</span></span>
- <span data-ttu-id="a49a1-119">Группа ресурсов: Контейнер, содержащий все связанные ресурсы для решения Azure.</span><span class="sxs-lookup"><span data-stu-id="a49a1-119">Resource group: A container that contains all related resources for an Azure solution.</span></span>

## <a name="what-is-an-azure-machine-learning-compute"></a><span data-ttu-id="a49a1-120">Что такое вычислительная среда Машинного обучения Azure?</span><span class="sxs-lookup"><span data-stu-id="a49a1-120">What is an Azure Machine Learning compute?</span></span>

<span data-ttu-id="a49a1-121">Вычислительная среда Машинного обучения — это облачная виртуальная машина Linux, используемая для обучения.</span><span class="sxs-lookup"><span data-stu-id="a49a1-121">An Azure Machine Learning compute is a cloud-based Linux VM used for training.</span></span>

<span data-ttu-id="a49a1-122">Чтобы создать рабочую область Машинного обучения Azure, необходимо указать следующие сведения.</span><span class="sxs-lookup"><span data-stu-id="a49a1-122">To create an Azure Machine Learning workspace, the following are required:</span></span>

- <span data-ttu-id="a49a1-123">Имя. Имя рабочей области длиной от 2 до 16 символов.</span><span class="sxs-lookup"><span data-stu-id="a49a1-123">Name: A name for your workspace between 2-16 characters.</span></span> <span data-ttu-id="a49a1-124">Имена могут содержать только буквы, цифры и дефисы.</span><span class="sxs-lookup"><span data-stu-id="a49a1-124">Names may only contain alphanumeric characters and hyphens.</span></span>
- <span data-ttu-id="a49a1-125">Объем вычислительных ресурсов</span><span class="sxs-lookup"><span data-stu-id="a49a1-125">Compute size</span></span>

    <span data-ttu-id="a49a1-126">Построитель моделей может использовать один из следующих типов вычислений, оптимизированных для GPU.</span><span class="sxs-lookup"><span data-stu-id="a49a1-126">Model Builder can use one of the following GPU-optimized compute types:</span></span>

    | <span data-ttu-id="a49a1-127">Размер</span><span class="sxs-lookup"><span data-stu-id="a49a1-127">Size</span></span> | <span data-ttu-id="a49a1-128">vCPU</span><span class="sxs-lookup"><span data-stu-id="a49a1-128">vCPU</span></span> | <span data-ttu-id="a49a1-129">Память: ГиБ</span><span class="sxs-lookup"><span data-stu-id="a49a1-129">Memory: GiB</span></span> | <span data-ttu-id="a49a1-130">Временное хранилище (SSD): ГиБ</span><span class="sxs-lookup"><span data-stu-id="a49a1-130">Temp storage (SSD) GiB</span></span> | <span data-ttu-id="a49a1-131">Графический процессор</span><span class="sxs-lookup"><span data-stu-id="a49a1-131">GPU</span></span> | <span data-ttu-id="a49a1-132">Память GPU: ГиБ</span><span class="sxs-lookup"><span data-stu-id="a49a1-132">GPU memory: GiB</span></span> | <span data-ttu-id="a49a1-133">Максимальное число дисков данных</span><span class="sxs-lookup"><span data-stu-id="a49a1-133">Max data disks</span></span> | <span data-ttu-id="a49a1-134">Максимальное число сетевых адаптеров</span><span class="sxs-lookup"><span data-stu-id="a49a1-134">Max NICs</span></span> |
    |---|---|---|---|---|---|---|---|
    | <span data-ttu-id="a49a1-135">Standard_NC12</span><span class="sxs-lookup"><span data-stu-id="a49a1-135">Standard_NC12</span></span>   | <span data-ttu-id="a49a1-136">12</span><span class="sxs-lookup"><span data-stu-id="a49a1-136">12</span></span> | <span data-ttu-id="a49a1-137">112</span><span class="sxs-lookup"><span data-stu-id="a49a1-137">112</span></span> | <span data-ttu-id="a49a1-138">680</span><span class="sxs-lookup"><span data-stu-id="a49a1-138">680</span></span>  | <span data-ttu-id="a49a1-139">2</span><span class="sxs-lookup"><span data-stu-id="a49a1-139">2</span></span> | <span data-ttu-id="a49a1-140">24</span><span class="sxs-lookup"><span data-stu-id="a49a1-140">24</span></span> | <span data-ttu-id="a49a1-141">48</span><span class="sxs-lookup"><span data-stu-id="a49a1-141">48</span></span> | <span data-ttu-id="a49a1-142">2</span><span class="sxs-lookup"><span data-stu-id="a49a1-142">2</span></span> |
    | <span data-ttu-id="a49a1-143">Standard_NC24</span><span class="sxs-lookup"><span data-stu-id="a49a1-143">Standard_NC24</span></span>   | <span data-ttu-id="a49a1-144">24</span><span class="sxs-lookup"><span data-stu-id="a49a1-144">24</span></span> | <span data-ttu-id="a49a1-145">224</span><span class="sxs-lookup"><span data-stu-id="a49a1-145">224</span></span> | <span data-ttu-id="a49a1-146">1440</span><span class="sxs-lookup"><span data-stu-id="a49a1-146">1440</span></span> | <span data-ttu-id="a49a1-147">4</span><span class="sxs-lookup"><span data-stu-id="a49a1-147">4</span></span> | <span data-ttu-id="a49a1-148">48</span><span class="sxs-lookup"><span data-stu-id="a49a1-148">48</span></span> | <span data-ttu-id="a49a1-149">64</span><span class="sxs-lookup"><span data-stu-id="a49a1-149">64</span></span> | <span data-ttu-id="a49a1-150">4</span><span class="sxs-lookup"><span data-stu-id="a49a1-150">4</span></span> |

    <span data-ttu-id="a49a1-151">Дополнительные сведения о типах вычислений, оптимизированных для GPU, см. в [документации по виртуальным машинам Linux серии NC](/azure/virtual-machines/nc-series?bc=%252fazure%252fvirtual-machines%252flinux%252fbreadcrumb%252ftoc.json&toc=%252fazure%252fvirtual-machines%252flinux%252ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="a49a1-151">Visit the [NC-series Linux VM documentation](/azure/virtual-machines/nc-series?bc=%252fazure%252fvirtual-machines%252flinux%252fbreadcrumb%252ftoc.json&toc=%252fazure%252fvirtual-machines%252flinux%252ftoc.json) for more details on GPU optimized compute types.</span></span>
- <span data-ttu-id="a49a1-152">Приоритет вычислений</span><span class="sxs-lookup"><span data-stu-id="a49a1-152">Compute priority</span></span>

  - <span data-ttu-id="a49a1-153">Вычисления с низким приоритетом: подходят для задач с меньшим временем выполнения.</span><span class="sxs-lookup"><span data-stu-id="a49a1-153">Low-priority: Suited for tasks with shorter execution times.</span></span> <span data-ttu-id="a49a1-154">Могут подвергаться воздействию прерываний и недостатка доступности.</span><span class="sxs-lookup"><span data-stu-id="a49a1-154">May be impacted by interruptions and lack of availability.</span></span> <span data-ttu-id="a49a1-155">Обычно обходятся дешевле, так как используют преимущества избыточной емкости в Azure.</span><span class="sxs-lookup"><span data-stu-id="a49a1-155">Usually costs less because it takes advantage of surplus capacity in Azure.</span></span>
  - <span data-ttu-id="a49a1-156">Выделенные вычисления: подходят для задач с любым временем выполнения, но особенно для долго выполняющихся заданий.</span><span class="sxs-lookup"><span data-stu-id="a49a1-156">Dedicated: Suited for tasks of any duration, but especially long-running jobs.</span></span> <span data-ttu-id="a49a1-157">Не подвержены воздействию прерываний или недостатка доступности.</span><span class="sxs-lookup"><span data-stu-id="a49a1-157">Not impacted by interruptions or lack of availability.</span></span> <span data-ttu-id="a49a1-158">Обычно обходятся дороже, так как для таких задач резервируется выделенный набор вычислительных ресурсов в Azure.</span><span class="sxs-lookup"><span data-stu-id="a49a1-158">Usually costs more because it reserves a dedicated set of compute resources in Azure for your tasks.</span></span>

## <a name="training"></a><span data-ttu-id="a49a1-159">Обучение</span><span class="sxs-lookup"><span data-stu-id="a49a1-159">Training</span></span>

<span data-ttu-id="a49a1-160">Обучение в Azure доступно только для сценария классификации изображений с помощью построителя моделей.</span><span class="sxs-lookup"><span data-stu-id="a49a1-160">Training on Azure is only available for the Model Builder image classification scenario.</span></span> <span data-ttu-id="a49a1-161">Алгоритм, применяемый для обучения этих моделей, представляет собой глубокую нейронную сеть на основе архитектуры ResNet50.</span><span class="sxs-lookup"><span data-stu-id="a49a1-161">The algorithm used to train these models is a Deep Neural Network based on the ResNet50 architecture.</span></span> <span data-ttu-id="a49a1-162">Точная продолжительность обучения зависит от объема данных и выбранных вычислительных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="a49a1-162">The training process takes some time and the amount of time may vary depending on the size of compute selected as well as amount of data.</span></span> <span data-ttu-id="a49a1-163">Ход выполнения можно отслеживать, щелкнув ссылку "Monitor current run in Azure portal" (Мониторинг текущего выполнения на портале Azure) в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a49a1-163">You can track the progress of your runs by selecting the "Monitor current run in Azure portal" link in Visual Studio.</span></span>

## <a name="results"></a><span data-ttu-id="a49a1-164">Результаты</span><span class="sxs-lookup"><span data-stu-id="a49a1-164">Results</span></span>

<span data-ttu-id="a49a1-165">После завершения обучения в решение добавляются два проекта со следующими суффиксами:</span><span class="sxs-lookup"><span data-stu-id="a49a1-165">Once training is complete, two projects are added to your solution with the following suffixes:</span></span>

- <span data-ttu-id="a49a1-166">*ConsoleApp*. Консольное приложение на C# в .NET Core, которое предоставляет начальный код для создания конвейера прогнозирования и составления прогнозов.</span><span class="sxs-lookup"><span data-stu-id="a49a1-166">*ConsoleApp*: A C# .NET Core console application that provides starter code to build the prediction pipeline and make predictions.</span></span>
- <span data-ttu-id="a49a1-167">*Модель*: Приложение на C# в .NET Standard, которое содержит модели данных, определяющие схему входных и выходных данных модели, а также следующие ресурсы:</span><span class="sxs-lookup"><span data-stu-id="a49a1-167">*Model*: A C# .NET Standard application that contains the data models that define the schema of input and output model data as well as the following assets:</span></span>

  - <span data-ttu-id="a49a1-168">bestModel.onnx: сериализованная версия модели в формате ONNX (Open Neural Network Exchange).</span><span class="sxs-lookup"><span data-stu-id="a49a1-168">bestModel.onnx: A serialized version of the model in Open Neural Network Exchange (ONNX) format.</span></span> <span data-ttu-id="a49a1-169">ONNX — это формат с открытым кодом для моделей ИИ, который поддерживает взаимодействие между такими платформами, как ML.NET, PyTorch и TensorFlow.</span><span class="sxs-lookup"><span data-stu-id="a49a1-169">ONNX is an open source format for AI models that supports interoperability between frameworks like ML.NET, PyTorch and TensorFlow.</span></span>
  - <span data-ttu-id="a49a1-170">bestModelMap.json: список категорий, используемых при составлении прогнозов для сопоставления выходных данных модели с категорией текста;</span><span class="sxs-lookup"><span data-stu-id="a49a1-170">bestModelMap.json: A list of categories used when making predictions to map the model output to a text category.</span></span>
  - <span data-ttu-id="a49a1-171">MLModel.zip: сериализованная версия конвейера прогнозирования ML.NET, которая использует сериализованную версию модели *bestModel.onnx* для создания прогнозов и сопоставляет выходные данные с помощью файла `bestModelMap.json`.</span><span class="sxs-lookup"><span data-stu-id="a49a1-171">MLModel.zip: A serialized version of the ML.NET prediction pipeline that uses the serialized version of the model *bestModel.onnx* to make predictions and maps outputs using the `bestModelMap.json` file.</span></span>

## <a name="use-the-machine-learning-model"></a><span data-ttu-id="a49a1-172">Использование модели машинного обучения</span><span class="sxs-lookup"><span data-stu-id="a49a1-172">Use the machine learning model</span></span>

<span data-ttu-id="a49a1-173">Классы `ModelInput` и `ModelOutput` в проекте *Model* определяют схему ожидаемых входных и выходных данных модели, соответственно.</span><span class="sxs-lookup"><span data-stu-id="a49a1-173">The `ModelInput` and `ModelOutput` classes in the *Model* project define the schema of the model's expected input and output respectively.</span></span>

<span data-ttu-id="a49a1-174">В сценарии классификации изображений `ModelInput` содержит два столбца:</span><span class="sxs-lookup"><span data-stu-id="a49a1-174">In an image classification scenario, the `ModelInput` contains two columns:</span></span>

- <span data-ttu-id="a49a1-175">`ImageSource`. Строковый путь расположения изображения.</span><span class="sxs-lookup"><span data-stu-id="a49a1-175">`ImageSource`: The string path of the image location.</span></span>
- <span data-ttu-id="a49a1-176">`Label`. Фактическая категория, к которой относится это изображение.</span><span class="sxs-lookup"><span data-stu-id="a49a1-176">`Label`: The actual category the image belongs to.</span></span> <span data-ttu-id="a49a1-177">`Label` используется только в качестве входных данных при обучении и не требуется при создании прогнозов.</span><span class="sxs-lookup"><span data-stu-id="a49a1-177">`Label` is only used as an input when training and does not need to be provided when making predictions.</span></span>

<span data-ttu-id="a49a1-178">`ModelOutput` содержит два столбца:</span><span class="sxs-lookup"><span data-stu-id="a49a1-178">The `ModelOutput` contains two columns:</span></span>

- <span data-ttu-id="a49a1-179">`Prediction`. Прогнозируемая категория изображения.</span><span class="sxs-lookup"><span data-stu-id="a49a1-179">`Prediction`: The image's predicted category.</span></span>
- <span data-ttu-id="a49a1-180">`Score`. Список вероятностей для всех категорий (самый высокий уровень относится к `Prediction`).</span><span class="sxs-lookup"><span data-stu-id="a49a1-180">`Score`: The list of probabilities for all categories (the highest belongs to the `Prediction`).</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="a49a1-181">Устранение неполадок</span><span class="sxs-lookup"><span data-stu-id="a49a1-181">Troubleshooting</span></span>

### <a name="cannot-create-compute"></a><span data-ttu-id="a49a1-182">Невозможно создать вычислительную среду</span><span class="sxs-lookup"><span data-stu-id="a49a1-182">Cannot create compute</span></span>

<span data-ttu-id="a49a1-183">Если во время создания вычислительной среды Машинного обучения Azure возникает ошибка, возможно, уже существует вычислительный ресурс, который находится в состоянии сбоя.</span><span class="sxs-lookup"><span data-stu-id="a49a1-183">If an error occurs during Azure Machine Learning compute creation, the compute resource may still exist, in an errored state.</span></span> <span data-ttu-id="a49a1-184">При попытке повторного создания вычислительного ресурса с тем же именем операция завершается неудачей.</span><span class="sxs-lookup"><span data-stu-id="a49a1-184">If you try to re-create the compute resource with the same name, the operation fails.</span></span> <span data-ttu-id="a49a1-185">Чтобы устранить эту ошибку, выполните одно из указанных ниже действий.</span><span class="sxs-lookup"><span data-stu-id="a49a1-185">To fix this error, either:</span></span>

- <span data-ttu-id="a49a1-186">Создайте новую вычислительную среду с другим именем.</span><span class="sxs-lookup"><span data-stu-id="a49a1-186">Create the new compute with a different name</span></span>
- <span data-ttu-id="a49a1-187">Перейдите на портал Azure и удалите исходный вычислительный ресурс.</span><span class="sxs-lookup"><span data-stu-id="a49a1-187">Go to the Azure portal, and remove the original compute resource</span></span>
