---
title: Строгое именование и библиотеки .NET
description: Рекомендации по использованию строгого именования для библиотек .NET.
ms.date: 10/16/2018
ms.openlocfilehash: db268093b07a2ece7cdb8329fd789b52da9c5c32
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/15/2020
ms.locfileid: "76744533"
---
# <a name="strong-naming"></a>Строгое именование

Строгим именованием называется подписывание сборки с использованием ключа. Полученная сборка считается [сборкой со строгими именами](../assembly/strong-named.md). Сборка со строгими именами получает уникальный идентификатор, составленный из имени и номера версии этой сборки, предотвращая возникновение конфликтов сборок.

Строгое именование неудобно тем, что .NET Framework на платформе Windows принудительно применяет строгую загрузку для сборок со строгими именами. Ссылка на сборку со строгими именами должна точно соответствовать версии, которая указана в этой сборке. Это вынуждает разработчиков [настраивать переадресацию привязок](../../framework/configure-apps/redirect-assembly-versions.md) при использовании такой сборки:

```xml
<configuration>
   <runtime>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
         <dependentAssembly>
            <assemblyIdentity name="myAssembly" publicKeyToken="32ab4ba45e0a69a1" culture="neutral" />
            <bindingRedirect oldVersion="1.0.0.0" newVersion="2.0.0.0"/>
         </dependentAssembly>
      </assemblyBinding>
   </runtime>
</configuration>
```

Если разработчик .NET выражает недовольство строгим именованием, он скорее всего имеет в виду именно строгую загрузку сборок. К счастью, эта проблема касается только платформы .NET Framework. В .NET Core, Xamarin, универсальной платформе Windows и большинстве других реализаций .NET не применяется строгая загрузка сборок, что избавляет нас от основного недостатка строгого именования.

Еще один важный аспект строгого именования — оно "заразно", то есть любая сборка со строгими именами может содержать ссылки только на другие сборки со строгими именами. Если ваша библиотека не использует строгое именование, ее не смогут использовать другие разработчики, которые создают приложения или библиотеки с обязательным строгим именованием.

Ниже перечислены преимущества строгого именования:

1. Сборку можно указывать и использовать в других сборках со строгими именами.
2. Сборку можно хранить в глобальном кэше сборок.
3. Сборку можно загружать параллельно с другими версиями этой сборки. Параллельная загрузка нескольких версий сборки часто используется в приложениях с поддержкой подключаемых модулей.

## <a name="create-strong-named-net-libraries"></a>Создание библиотек .NET со строгими именами

Для всех библиотек .NET с открытым исходным кодом следует применять строгое именование. Строгое именование сборки позволяет большинству пользователей ее использовать, а проблема со строгой загрузкой касается только пользователей .NET Framework.

> [!NOTE]
> Это руководство относится ко всем свободно распространяемым библиотекам .NET, например к библиотекам .NET на сайте nuget.org. Строгое именование не является обязательным для большинства приложений .NET. По умолчанию его не следует использовать.

✔ РЕКОМЕНДУЕТСЯ использовать строгое именование для сборок библиотеки.

✔️ РЕКОМЕНДУЕТСЯ добавлять ключ строгого именования в систему управления версиями.

> Общедоступный ключ позволяет разработчикам изменять и повторно компилировать исходный код библиотеки с тем же ключом.
>
> Ключ строгого именования не следует делать открытым, если ранее он использовался для предоставления особых разрешений в [сценариях частичного доверия](../../framework/misc/using-libraries-from-partially-trusted-code.md). Такая публикация может поставить под угрозу существующие среды.

> [!IMPORTANT]
> Если важно поддерживать для кода идентификацию издателя, мы рекомендуем применить [Authenticode](/windows-hardware/drivers/install/authenticode) и [Подписывание пакетов NuGet](/nuget/create-packages/sign-a-package). Управление доступом для кода (CAS) не следует применять в качестве меры безопасности.

✔ РЕКОМЕНДУЕТСЯ увеличивать номер версии для сборки только при изменении основного номера версии, чтобы избавить пользователей от лишних переадресаций привязок и частого их обновления.

> См. сведения о [версиях сборок и управлении версиями](./versioning.md#assembly-version).

❌ НЕ СЛЕДУЕТ добавлять, удалять или изменять ключ строгого именования.

> Изменение указанного для сборки ключа строгого именования изменяет идентификатор сборки и нарушает работу любого скомпилированного кода, который использует эту сборку. См. сведения о [критических изменениях на уровне двоичного кода](./breaking-changes.md#binary-breaking-change).

❌ НЕ СЛЕДУЕТ публиковать версии библиотеки со строгим и нестрогим именем. Например, `Contoso.Api` и `Contoso.Api.StrongNamed`.

> Публикация двух вариантов пакета приводит к рассогласованию всей экосистемы разработки. Кроме того, если некоторому приложению потребуются оба варианта этого пакета, могут возникать конфликты имен. Платформа .NET рассматривает такие пакеты как разные типы из разных сборок.

>[!div class="step-by-step"]
>[Назад](cross-platform-targeting.md)
>[Вперед](nuget.md)
