---
title: Практическое руководство. Синхронизация параллельных операций с барьером
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- Barrier, how to use
ms.assetid: e1a253ff-e0fb-4df8-95ff-d01a90d4cb19
ms.openlocfilehash: 33098878764c2f8a8c1f83a122028da40b984243
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2019
ms.locfileid: "73137974"
---
# <a name="how-to-synchronize-concurrent-operations-with-a-barrier"></a>Практическое руководство. Синхронизация параллельных операций с барьером
В следующем примере показано, как синхронизировать параллельные задачи с помощью объекта <xref:System.Threading.Barrier>.  
  
## <a name="example"></a>Пример  
 Следующая программа подсчитывает количество итераций (или этапов), необходимых для того, чтобы каждый из двух потоков одновременно нашел свое частичное решение, используя алгоритм перемешивания слов. В каждом потоке перемешиваются свои слова, а затем операция барьера после этапа сравнивает два результата и проверяет, правильно ли собрано полное предложение.  
  
 [!code-csharp[CDS_Barrier#01](../../../samples/snippets/csharp/VS_Snippets_Misc/cds_barrier/cs/barrier.cs#01)]
 [!code-vb[CDS_Barrier#01](../../../samples/snippets/visualbasic/VS_Snippets_Misc/cds_barrier/vb/barrier_vb.vb#01)]  
  
 Объект <xref:System.Threading.Barrier> приостанавливает параллельное выполнение отдельных задач, пока все задачи не достигнут этого барьера. Это полезно в тех случаях, когда параллельная операция имеет четко определенные этапы, по каждому из которых требуется синхронизация между задачами. В нашем примере операция осуществляется в два этапа. На первом этапе каждая задача заполняет данными свой сегмент буфера. Каждая задача, которая завершает заполнение своего сегмента, сообщает барьеру о готовности и переходит в режим ожидания. Когда все задачи отправят барьеру сигналы, блокировка снимается и начинается второй этап. Этот барьер нужен для того, чтобы каждая задача на втором этапе получила доступ ко всем данным, созданным до этого момента. Без этого барьера первая задача, выполнившая свою работу, может начать чтение из буферов, которые еще не заполнены другими задачами. Этот подход позволяет синхронизировать любое количество этапов.  
  
## <a name="see-also"></a>См. также

- [Структуры данных для параллельного программирования](../../../docs/standard/parallel-programming/data-structures-for-parallel-programming.md)
