---
title: Развертывание существующих приложений .NET в качестве контейнеров Windows
description: Модернизация существующих приложений .NET с помощью облака Azure и Windows контейнерах | Развертывание существующих приложений .NET в качестве контейнеров Windows
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 04/29/2018
ms.openlocfilehash: ad0da9f7f0412c14b5362e3f631a7aa4af1f8260
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61812059"
---
# <a name="deploy-existing-net-apps-as-windows-containers"></a><span data-ttu-id="fd2e9-103">Развертывание существующих приложений .NET в качестве контейнеров Windows</span><span class="sxs-lookup"><span data-stu-id="fd2e9-103">Deploy existing .NET apps as Windows containers</span></span>

<span data-ttu-id="fd2e9-104">Развертывания, которые основаны на контейнеры Windows применимы к оптимизированную для облачных приложений и облачных приложений.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-104">Deployments that are based on Windows Containers are applicable to Cloud-Optimized applications and Cloud-Native applications.</span></span>

<span data-ttu-id="fd2e9-105">Тем не менее, в этом руководстве и особенно в следующих разделах, здесь главным образом рассматривается использование контейнеров Windows для *оптимизированную для облачных* приложений, где не требуется перепроектирование приложения.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-105">However, in this guide and especially in the following sections, it mostly focuses on using Windows Containers for *Cloud-Optimized* applications where you don’t need to rearchitect your application.</span></span>

## <a name="what-are-containers-linux-or-windows"></a><span data-ttu-id="fd2e9-106">Что такое контейнеры?</span><span class="sxs-lookup"><span data-stu-id="fd2e9-106">What are containers?</span></span> <span data-ttu-id="fd2e9-107">(Windows или Linux)</span><span class="sxs-lookup"><span data-stu-id="fd2e9-107">(Linux or Windows)</span></span>

<span data-ttu-id="fd2e9-108">Контейнеры — это способ переноса приложения в свой собственный пакет изолированной.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-108">Containers are a way to wrap up an application into its own isolated package.</span></span> <span data-ttu-id="fd2e9-109">В своем контейнере приложение не зависит от приложения или процессы, которые существуют вне контейнера.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-109">In its container, the application is not affected by applications or processes that exist outside of the container.</span></span> <span data-ttu-id="fd2e9-110">Все, что приложение от которых зависит запуск успешно как процесс — это внутри контейнера.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-110">Everything the application depends on to run successfully as a process is inside the container.</span></span> <span data-ttu-id="fd2e9-111">Везде, где может переместить контейнер, требования приложения всегда будет выполняться, с точки зрения прямые зависимости, так как он входит в состав все, что ее необходимо выполнять (зависимости библиотек среды выполнения и т. д.).</span><span class="sxs-lookup"><span data-stu-id="fd2e9-111">Wherever the container might move, the requirements of the application will always be met, in terms of direct dependencies, because it is bundled with everything that it needs to run (library dependencies, runtimes, and so on).</span></span>

<span data-ttu-id="fd2e9-112">Основной характеристикой контейнера является то, среде же в разных развертываниях, так как сам контейнер поставляется со всеми зависимостями, которые необходимы.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-112">The main characteristic of a container is that it makes the environment the same across different deployments because the container itself comes with all the dependencies it needs.</span></span> <span data-ttu-id="fd2e9-113">Можно отлаживать приложение на вашем компьютере и затем развернуть ее на другом компьютере, с той же среде гарантируется.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-113">You can debug the application on your machine, and then deploy it to another machine, with the same environment guaranteed.</span></span>

<span data-ttu-id="fd2e9-114">Контейнер — это экземпляр образа контейнера.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-114">A container is an instance of a container image.</span></span> <span data-ttu-id="fd2e9-115">Образ контейнера — это способ упаковки приложения или службы (например, моментальный снимок), а затем развернуть его в виде надежного и воспроизводимого.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-115">A container image is a way to package an app or service (like a snapshot), and then deploy it in a reliable and reproducible way.</span></span> <span data-ttu-id="fd2e9-116">Можно сказать, что Docker является не только технология его, также целой философией и процессом.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-116">You could say that Docker is not only a technology-it's also a philosophy and a process.</span></span>

<span data-ttu-id="fd2e9-117">По мере контейнеры ежедневно чаще, они становятся во всей отрасли «единица развертывания».</span><span class="sxs-lookup"><span data-stu-id="fd2e9-117">As containers daily become more common, they are becoming an industry-wide "unit of deployment."</span></span>

## <a name="benefits-of-containers-docker-engine-on-linux-or-windows"></a><span data-ttu-id="fd2e9-118">Преимущества контейнеров (подсистема Docker в Linux или Windows)</span><span class="sxs-lookup"><span data-stu-id="fd2e9-118">Benefits of containers (Docker Engine on Linux or Windows)</span></span>

<span data-ttu-id="fd2e9-119">Построение приложений с помощью контейнеров, которое также может быть определено упрощенных стандартных блоках offers существенное увеличение количества в как гибкость для создания, доставки и запускает приложение, по какой-либо инфраструктурой.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-119">Building applications by using containers-which also might be defined as lightweight building blocks-offers a significant increase in agility for building, shipping, and running any application, across any infrastructure.</span></span>

<span data-ttu-id="fd2e9-120">С контейнерами вы можете воспользоваться любое приложение от разработки в рабочую среду с незначительной или нулевой изменения кода, благодаря интеграции Docker средства для разработчиков, операционные системы, и в облаке.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-120">With containers, you can take any app from development to production with little or no code change, thanks to Docker integration across Microsoft developer tools, operating systems, and cloud.</span></span>

<span data-ttu-id="fd2e9-121">При развертывании на обычные виртуальные машины, у вас уже есть метод на месте для развертывания приложений ASP.NET на виртуальные машины.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-121">When you deploy to plain VMs, you probably already have a method in place for deploying ASP.NET apps to your VMs.</span></span> <span data-ttu-id="fd2e9-122">Вполне вероятно, однако, ваш метод включает в себя несколько действий вручную или сложные автоматизированные процессы с помощью средства развертывания, например Puppet или аналогичное средство.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-122">It's likely, though, that your method involves multiple manual steps or complex automated processes by using a deployment tool like Puppet, or a similar tool.</span></span> <span data-ttu-id="fd2e9-123">Может потребоваться для выполнения задач, таких как изменение элементов конфигурации, копирование содержимого приложения между серверами и выполнение интерактивной установки программ, основанных на MSI-файл настроек, следуют тестирования.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-123">You might need to perform tasks like modifying configuration items, copying application content between servers, and running interactive setup programs based on .msi setups, followed by testing.</span></span> <span data-ttu-id="fd2e9-124">Все эти окна мастеров в развертывании добавьте времени и риска развертываний.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-124">All those steps in the deployment add time and risk to deployments.</span></span> <span data-ttu-id="fd2e9-125">Каждый раз, когда зависимость отсутствует в целевой среде приведет к возникновению ошибок.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-125">You will get failures whenever a dependency is not present in the target environment.</span></span>

<span data-ttu-id="fd2e9-126">Процесс упаковки приложений полностью автоматизирована в контейнерах Windows.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-126">In Windows Containers, the process of packaging applications is fully automated.</span></span> <span data-ttu-id="fd2e9-127">Контейнеры Windows основана на платформе Docker, что обеспечивает автоматические обновления и откаты для развертываний контейнеров.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-127">Windows Containers is based on the Docker platform, which offers automatic updates and rollbacks for container deployments.</span></span> <span data-ttu-id="fd2e9-128">Основные улучшения, который можно получить с помощью подсистемы Docker является созданием образов, которые похожи на моментальные снимки, приложения, со всеми ее зависимостями.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-128">The main improvement you get from using the Docker engine is that you create images, which are like snapshots of your application, with all its dependencies.</span></span> <span data-ttu-id="fd2e9-129">Образы — это образы Docker (Windows образ контейнера, в данном случае).</span><span class="sxs-lookup"><span data-stu-id="fd2e9-129">The images are Docker images (a Windows container image, in this case).</span></span> <span data-ttu-id="fd2e9-130">Изображения, запускать приложения ASP.NET в контейнерах, без возврата к исходному коду.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-130">The images run ASP.NET apps in containers, without going back to source code.</span></span> <span data-ttu-id="fd2e9-131">Моментальный снимок контейнера становится единицей развертывания.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-131">The container snapshot becomes the unit of deployment.</span></span>

<span data-ttu-id="fd2e9-132">Во многих организациях создания контейнеров имеющиеся монолитные приложения по следующим причинам:</span><span class="sxs-lookup"><span data-stu-id="fd2e9-132">Many organizations are containerizing existing monolithic applications for the following reasons:</span></span>

- <span data-ttu-id="fd2e9-133">**Release маневренность за счет улучшенному развертыванию**.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-133">**Release agility through improved deployment**.</span></span> <span data-ttu-id="fd2e9-134">Контейнеры обеспечивают контракт о согласованном развертывании между разработкой и операциями.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-134">Containers offer a consistent deployment contract between development and operations.</span></span> <span data-ttu-id="fd2e9-135">При использовании контейнеров, не слышите разработчикам скажем, «Это работает на моем компьютере почему бы не в рабочей среде?»</span><span class="sxs-lookup"><span data-stu-id="fd2e9-135">When you use containers, you won't hear developers say, "It works on my machine, why not in production?"</span></span> <span data-ttu-id="fd2e9-136">Они сказать «Запускается как контейнер, чтобы он выполнялся в рабочей среде.»</span><span class="sxs-lookup"><span data-stu-id="fd2e9-136">They can say, "It runs as a container, so it will run in production."</span></span> <span data-ttu-id="fd2e9-137">Упакованные приложения, со всеми ее зависимостями, могут быть выполнены в любую поддерживаемую среду на базе контейнеров.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-137">The packaged application, with all its dependencies, can be executed in any supported container-based environment.</span></span> <span data-ttu-id="fd2e9-138">Он будет выполняться того, который он был предназначен для выполнения в всех целей сценариев развертывания (разработки, контроля Качества, промежуточная обработка, производство).</span><span class="sxs-lookup"><span data-stu-id="fd2e9-138">It will run the way it was intended to run in all deployment targets (dev, QA, staging, production).</span></span> <span data-ttu-id="fd2e9-139">Контейнеры устранить большинство ограничиваются, при их перемещении от одного этапа к другому, что значительно повышает развертывания, и быстрее доставляйте.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-139">Containers eliminate most frictions when they move from one stage to the next, which greatly improves deployment, and you can ship faster.</span></span>

- <span data-ttu-id="fd2e9-140">**Сокращение затрат**.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-140">**Cost reductions**.</span></span> <span data-ttu-id="fd2e9-141">Контейнеры привести к снижению затрат, либо путем консолидации и удаления существующего оборудования, или путем запуска приложения с более высокой плотностью на единицу оборудования.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-141">Containers lead to lower costs, either by the consolidation and removal of existing hardware, or from running applications at a higher density per unit of hardware.</span></span>

- <span data-ttu-id="fd2e9-142">**Переносимость**.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-142">**Portability**.</span></span> <span data-ttu-id="fd2e9-143">Контейнеры — модульность и портативных.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-143">Containers are modular and portable.</span></span> <span data-ttu-id="fd2e9-144">Контейнеры docker, поддерживаются на любой серверных операционных систем (Linux и Windows), в любой крупной общедоступной облачной (Microsoft Azure, Amazon AWS, Google, IBM) и в локальной и частной или гибридной облачной среды.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-144">Docker containers are supported on any server operating system (Linux and Windows), in any major public cloud (Microsoft Azure, Amazon AWS, Google, IBM), and in on-premises and private or hybrid cloud environments.</span></span>

- <span data-ttu-id="fd2e9-145">**Элемент управления**.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-145">**Control**.</span></span> <span data-ttu-id="fd2e9-146">Контейнеры обеспечивают гибкую и безопасную среду, в который контролируется на уровне контейнера.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-146">Containers offer a flexible and secure environment that's controlled at the container level.</span></span> <span data-ttu-id="fd2e9-147">Контейнер можно защитить, изолированной и даже ограничена из-за установки ограничения политики выполнения для контейнера.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-147">A container can be secured, isolated, and even limited by setting execution constraint policies on the container.</span></span> <span data-ttu-id="fd2e9-148">Как описано в разделе о контейнерах Windows Windows Server 2016 и Hyper-V контейнеры предоставляют варианты поддержки дополнительных корпоративных.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-148">As detailed in the section about Windows Containers, Windows Server 2016 and Hyper-V containers offer additional enterprise support options.</span></span>

<span data-ttu-id="fd2e9-149">Значительные улучшения в элемент управления, гибкость и переносимость в конечном итоге привести к значительному снижению расходов при использовании контейнеров для разработки и обслуживания приложений.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-149">Significant improvements in agility, portability, and control ultimately lead to significant cost reductions when you use containers to develop and maintain applications.</span></span>

## <a name="what-is-docker"></a><span data-ttu-id="fd2e9-150">Что такое Docker?</span><span class="sxs-lookup"><span data-stu-id="fd2e9-150">What is Docker?</span></span>

<span data-ttu-id="fd2e9-151">[Docker](https://www.docker.com/) — [проект с открытым кодом](https://github.com/docker/docker) , позволяет автоматизировать развертывание приложений как переносимых, самодостаточных контейнеры, которые могут выполняться в облаке или локально.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-151">[Docker](https://www.docker.com/) is an [open-source project](https://github.com/docker/docker) that automates the deployment of applications as portable, self-sufficient containers that can run in the cloud or on-premises.</span></span> <span data-ttu-id="fd2e9-152">Docker — это также [компания](https://www.docker.com/), разрабатывающая эту технологию.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-152">Docker is also a [company](https://www.docker.com/) that promotes and evolves this technology.</span></span> <span data-ttu-id="fd2e9-153">Компания работает в сотрудничестве с облака, Linux и поставщики Windows, включая Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-153">The company works in collaboration with cloud, Linux, and Windows vendors, including Microsoft.</span></span>

![](./media/image6.png)

> <span data-ttu-id="fd2e9-154">**Рис. 4-6.**</span><span class="sxs-lookup"><span data-stu-id="fd2e9-154">**Figure 4-6.**</span></span> <span data-ttu-id="fd2e9-155">Docker развертывает контейнеры на всех уровнях гибридного облака</span><span class="sxs-lookup"><span data-stu-id="fd2e9-155">Docker deploys containers at all layers of the hybrid cloud</span></span>

<span data-ttu-id="fd2e9-156">Кому-либо знакомы с виртуальными машинами, контейнеры могут оказаться весьма примерно.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-156">To someone familiar with virtual machines, containers might appear to be remarkably similar.</span></span> <span data-ttu-id="fd2e9-157">Контейнер с операционной системой, содержит файловую систему и может осуществляться по сети, так же, как система физический или виртуальный компьютер.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-157">A container runs an operating system, has a file system, and can be accessed over a network, just like a physical or virtual computer system.</span></span> <span data-ttu-id="fd2e9-158">Тем не менее технология и принцип контейнеры значительно отличаются от виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-158">However, the technology and concepts behind containers are vastly different from virtual machines.</span></span> <span data-ttu-id="fd2e9-159">С точки зрения разработчика контейнер должен считаться более одного процесса.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-159">From a developer point of view, a container must be treated more like a single process.</span></span> <span data-ttu-id="fd2e9-160">По сути контейнер имеет единую точку входа для одного процесса.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-160">In fact, a container has a single entry point for one process.</span></span>

<span data-ttu-id="fd2e9-161">Контейнеры docker (для простоты *контейнеры*) можно запустить в собственном коде в Linux и Windows.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-161">Docker containers (for simplicity, *containers*) can run natively on Linux and Windows.</span></span> <span data-ttu-id="fd2e9-162">При выполнении регулярного контейнеры, контейнеры Windows можно выполнять только на узлах Windows (на сервере узла или виртуальной Машины) и контейнеры Linux можно запустить только на узлах Linux.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-162">When running regular containers, Windows containers can run only on Windows hosts (a host server or a VM), and Linux containers can run only on Linux hosts.</span></span> <span data-ttu-id="fd2e9-163">Однако в последних версиях Windows Server и Hyper-V контейнеры, контейнере Linux также может запускать в собственном коде в Windows Server с помощью технологии изоляции Hyper-V, который в настоящее время доступна только в контейнеры Windows Server.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-163">However, in recent versions of Windows Server and Hyper-V containers, a Linux container also can run natively on Windows Server by using the Hyper-V isolation technology that currently is available only in Windows Server Containers.</span></span>

<span data-ttu-id="fd2e9-164">В ближайшем будущем смешанных средах, на которые у контейнеров Windows и Linux, будет возможно и даже распространенных.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-164">In the near future, mixed environments that have both Linux and Windows containers will be possible and even common.</span></span>

## <a name="benefits-of-windows-containers-for-your-existing-net-applications"></a><span data-ttu-id="fd2e9-165">Преимущества контейнеров Windows для переноса существующих приложений .NET</span><span class="sxs-lookup"><span data-stu-id="fd2e9-165">Benefits of Windows Containers for your existing .NET applications</span></span>

<span data-ttu-id="fd2e9-166">Преимущества использования контейнеров Windows, по сути те же преимущества, получаемых из контейнеров, в целом.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-166">The benefits of using Windows Containers are fundamentally the same benefits you get from containers in general.</span></span> <span data-ttu-id="fd2e9-167">С помощью контейнеров Windows — о значительно повышает гибкость, переносимость и управления.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-167">Using Windows Containers is about greatly improving agility, portability, and control.</span></span>

<span data-ttu-id="fd2e9-168">Существующих приложений .NET см. Эти приложения, которые были созданы с помощью .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-168">Existing .NET applications refer to those applications that were created using the .NET Framework.</span></span> <span data-ttu-id="fd2e9-169">Например, может быть традиционных веб-приложениях ASP.NET — они не используют .NET Core, который имеет более новую версию и выполнения на разных платформах в Linux, Windows и MacOS.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-169">For example, they might be traditional ASP.NET web applications-they don't use .NET Core, which is newer and runs cross-platform on Linux, Windows, and MacOS.</span></span>

<span data-ttu-id="fd2e9-170">Основные зависимости в .NET Framework — Windows.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-170">The main dependency in the .NET Framework is Windows.</span></span> <span data-ttu-id="fd2e9-171">Он также имеет дополнительный зависимости, такие как IIS и System.Web традиционные модели ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-171">It also has secondary dependencies, like IIS, and System.Web in traditional ASP.NET.</span></span>

<span data-ttu-id="fd2e9-172">Приложения .NET Framework необходимо запустить на Windows, период.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-172">A .NET Framework application must run on Windows, period.</span></span> <span data-ttu-id="fd2e9-173">Если нужно упаковать в контейнер существующих приложений .NET Framework, и нельзя или нежелательно вкладывать средства в миграции на .NET Core («если все работает правильно, не будут перемещаться его»), единственным вариантом для контейнеров, является использование контейнеров Windows.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-173">If you want to containerize existing .NET Framework applications and you can't or don't want to invest in a migration to .NET Core ("If it works properly, don't migrate it"), the only choice you have for containers is to use Windows Containers.</span></span>

<span data-ttu-id="fd2e9-174">Поэтому одно из основных преимуществ использования контейнеров Windows является, что они позволяют вам модернизировать существующие приложения .NET Framework, работающие на Windows через создание контейнеров.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-174">So, one of the main benefits of Windows Containers is that they offer you a way to modernize your existing .NET Framework applications that are running on Windows-through containerization.</span></span> <span data-ttu-id="fd2e9-175">В конечном счете контейнеры Windows получает преимущества, которые вы ищете, используя гибкости контейнеров, переносимость и улучшения контроля.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-175">Ultimately, Windows Containers gets you the benefits that you are looking for by using containers-agility, portability, and better control.</span></span>

## <a name="choose-an-os-to-target-with-net-based-containers"></a><span data-ttu-id="fd2e9-176">Выберите операционную Систему для нацеливания. Контейнеры на основе NET</span><span class="sxs-lookup"><span data-stu-id="fd2e9-176">Choose an OS to target with .NET-based containers</span></span>

<span data-ttu-id="fd2e9-177">Учитывая разнообразие операционных систем, поддерживаемых Docker, а также различия между .NET Framework и .NET Core, вы должны быть нацелены определенной ОС и определенные версии в зависимости от платформы, которую вы используете.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-177">Given the diversity of operating systems that are supported by Docker, as well as the differences between .NET Framework and .NET Core, you should target a specific OS and specific versions based on the framework you are using.</span></span>

<span data-ttu-id="fd2e9-178">Для Windows можно использовать Windows Server Core или Windows Nano Server.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-178">For Windows, you can use Windows Server Core or Windows Nano Server.</span></span> <span data-ttu-id="fd2e9-179">Эти версии Windows предоставляют разные характеристики (например, IIS и резидентный веб-сервер, такой как Kestrel), которые могут быть необходимы в .NET Framework или .NET Core.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-179">These Windows versions provide different characteristics (like IIS versus a self-hosted web server like Kestrel) that might be needed by .NET Framework or .NET Core applications.</span></span>

<span data-ttu-id="fd2e9-180">Для Linux доступно и поддерживается множество дистрибутивов в официальных образах Docker .NET (например, Debian).</span><span class="sxs-lookup"><span data-stu-id="fd2e9-180">For Linux, multiple distros are available and supported in official .NET Docker images (like Debian).</span></span>

<span data-ttu-id="fd2e9-181">Рис. 4-7 показаны версии ОС, которые можно создавать решения, в зависимости от версии приложения платформы .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-181">Figure 4-7 shows OS versions that you can target, depending on the app's version of the .NET Framework.</span></span>

![](./media/image7.png)

> <span data-ttu-id="fd2e9-182">**Рис. 4-7.**</span><span class="sxs-lookup"><span data-stu-id="fd2e9-182">**Figure 4-7.**</span></span> <span data-ttu-id="fd2e9-183">Операционные системы к целевому объекту, на основе версии .NET Framework</span><span class="sxs-lookup"><span data-stu-id="fd2e9-183">Operating systems to target based on .NET Framework version</span></span>

<span data-ttu-id="fd2e9-184">В сценарии миграции для существующих или устаревших приложений, с учетом приложений .NET Framework основных зависимостях находятся на Windows и IIS.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-184">In migration scenarios for existing or legacy applications that are based on .NET Framework applications, the main dependencies are on Windows and IIS.</span></span> <span data-ttu-id="fd2e9-185">Единственным вариантом является использование образов Docker на основе Windows Server Core и .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-185">Your only option is to use Docker images based on Windows Server Core and the .NET Framework.</span></span>

<span data-ttu-id="fd2e9-186">При добавлении имени образа в файл Dockerfile, можно выбрать операционную систему и версию с помощью тега, как показано в следующих примерах для образов контейнеров Windows на основе .NET Framework:</span><span class="sxs-lookup"><span data-stu-id="fd2e9-186">When you add the image name to your Dockerfile file, you can select the operating system and version by using a tag, as in the following examples for .NET Framework-based Windows container images:</span></span>

> | <span data-ttu-id="fd2e9-187">**Тег**</span><span class="sxs-lookup"><span data-stu-id="fd2e9-187">**Tag**</span></span> | <span data-ttu-id="fd2e9-188">**Система и версия**</span><span class="sxs-lookup"><span data-stu-id="fd2e9-188">**System and version**</span></span> |
> |---|---|
> | <span data-ttu-id="fd2e9-189">**microsoft/dotnet-framework:4.x-windowsservercore**</span><span class="sxs-lookup"><span data-stu-id="fd2e9-189">**microsoft/dotnet-framework:4.x-windowsservercore**</span></span> | <span data-ttu-id="fd2e9-190">.NET framework 4.x в Windows Server Core</span><span class="sxs-lookup"><span data-stu-id="fd2e9-190">.NET Framework 4.x on Windows Server Core</span></span> |
> | <span data-ttu-id="fd2e9-191">**microsoft/aspnet:4.x-windowsservercore**</span><span class="sxs-lookup"><span data-stu-id="fd2e9-191">**microsoft/aspnet:4.x-windowsservercore**</span></span> | <span data-ttu-id="fd2e9-192">.NET framework 4.x дополнительной настройки ASP.NET на Windows Server Core</span><span class="sxs-lookup"><span data-stu-id="fd2e9-192">.NET Framework 4.x with additional ASP.NET customization, on Windows Server Core</span></span> |

<span data-ttu-id="fd2e9-193">Для .NET Core (для нескольких платформ для Linux и Windows) теги будет выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="fd2e9-193">For .NET Core (cross-platform for Linux and Windows), the tags would look like the following:</span></span>

> | <span data-ttu-id="fd2e9-194">**Тег**</span><span class="sxs-lookup"><span data-stu-id="fd2e9-194">**Tag**</span></span> | <span data-ttu-id="fd2e9-195">**Система и версия**</span><span class="sxs-lookup"><span data-stu-id="fd2e9-195">**System and version**</span></span>
> |---|---|
> | <span data-ttu-id="fd2e9-196">**microsoft/dotnet:2.0.0-runtime**</span><span class="sxs-lookup"><span data-stu-id="fd2e9-196">**microsoft/dotnet:2.0.0-runtime**</span></span> | <span data-ttu-id="fd2e9-197">.NET core 2.0 доступны только для среды выполнения на платформе Linux</span><span class="sxs-lookup"><span data-stu-id="fd2e9-197">.NET Core 2.0 runtime-only on Linux</span></span> |
> | <span data-ttu-id="fd2e9-198">**microsoft/dotnet:2.0.0-runtime-nanoserver**</span><span class="sxs-lookup"><span data-stu-id="fd2e9-198">**microsoft/dotnet:2.0.0-runtime-nanoserver**</span></span> | <span data-ttu-id="fd2e9-199">На сервере Nano Server Windows только для среды выполнения .NET core 2.0</span><span class="sxs-lookup"><span data-stu-id="fd2e9-199">.NET Core 2.0 runtime-only on Windows Nano Server</span></span> |

### <a name="multi-arch-images"></a><span data-ttu-id="fd2e9-200">Мультиархитектурные образы</span><span class="sxs-lookup"><span data-stu-id="fd2e9-200">Multi-arch images</span></span>

<span data-ttu-id="fd2e9-201">Начиная с середины 2017 г., также можно использовать новую функцию в Docker с именем [мультиархитектурного](https://github.com/moby/moby/issues/15866) изображения.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-201">Beginning in mid-2017, you also can use a new feature in Docker called [multi-arch](https://github.com/moby/moby/issues/15866) images.</span></span> <span data-ttu-id="fd2e9-202">Образы Docker для .NET core можно использовать теги мультиархитектурности.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-202">.NET Core Docker images can use multi-arch tags.</span></span> <span data-ttu-id="fd2e9-203">Dockerfile файлы больше не требуется определять операционной системы, которая будет использоваться.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-203">Your Dockerfile files no longer need to define the operating system that you are targeting.</span></span> <span data-ttu-id="fd2e9-204">Мультиархитектурные позволяет одного тега, которое будет использоваться в нескольких конфигурациях компьютера.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-204">The multi-arch feature allows a single tag to be used across multiple machine configurations.</span></span> <span data-ttu-id="fd2e9-205">К примеру, с мультиархитектурного, можно использовать один обычный тег: **microsoft/dotnet:2.0.0-runtime**.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-205">For instance, with multi-arch, you can use one common tag: **microsoft/dotnet:2.0.0-runtime**.</span></span> <span data-ttu-id="fd2e9-206">Если этот тег из среды контейнеров Linux, запрашивать, вы получите образ на базе Debian.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-206">If you pull that tag from a Linux container environment, you get the Debian-based image.</span></span> <span data-ttu-id="fd2e9-207">Если этот тег из среды контейнеров Windows, запрашивать, вы получите образов на основе Nano Server.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-207">If you pull that tag from a Windows container environment, you get the Nano Server-based image.</span></span>

<span data-ttu-id="fd2e9-208">Для образов платформы .NET Framework так как в традиционном .NET Framework поддерживает только Windows, нельзя использовать функцию мультиархитектурные.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-208">For .NET Framework images, because the traditional .NET Framework supports only Windows, you cannot use the multi-arch feature.</span></span>

## <a name="windows-container-types"></a><span data-ttu-id="fd2e9-209">Типы контейнеров Windows</span><span class="sxs-lookup"><span data-stu-id="fd2e9-209">Windows container types</span></span>

<span data-ttu-id="fd2e9-210">Как и контейнеры Linux контейнеры Windows Server осуществляется с помощью подсистемы Docker.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-210">Like Linux containers, Windows Server containers are managed by using Docker Engine.</span></span> <span data-ttu-id="fd2e9-211">В отличие от контейнеров Linux контейнеры Windows включают два типа в другой контейнер или запустите раз Windows Server и изоляцию Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-211">Unlike Linux containers, Windows containers include two different container types, or run times-Windows Server containers and Hyper-V isolation.</span></span>

<span data-ttu-id="fd2e9-212">**Контейнеры Windows Server**: Обеспечивает изоляцию приложений благодаря изоляции процессов и пространств имен.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-212">**Windows Server containers**: Provides application isolation through process and namespace isolation technology.</span></span> <span data-ttu-id="fd2e9-213">Контейнер Windows Server использует ядро совместно с узлом контейнера и всех контейнеров, запущенных на узле.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-213">A Windows Server container shares a kernel with the container host and all containers that are running on the host.</span></span> <span data-ttu-id="fd2e9-214">Эти контейнеры не предоставляют границу неблагоприятных безопасности и не следует использовать для изоляции ненадежного кода.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-214">These containers do not provide a hostile security boundary and should not be used to isolate untrusted code.</span></span> <span data-ttu-id="fd2e9-215">Из-за пространство общего ядра эти контейнеры требуют той же версией ядра и конфигурации.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-215">Because of the shared kernel space, these containers require the same kernel version and configuration.</span></span>

<span data-ttu-id="fd2e9-216">**Изоляцию Hyper-V**: Расширяет возможности изоляции по сравнению с контейнерами Windows Server, каждый контейнер запускается на виртуальной Машине высокой степенью оптимизации.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-216">**Hyper-V isolation**: Expands on the isolation provided by Windows Server Containers by running each container on a highly optimized VM.</span></span> <span data-ttu-id="fd2e9-217">В этой конфигурации ядро узла контейнера не используется совместно с другими контейнерами на одном узле.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-217">In this configuration, the kernel of the container host is not shared with other containers on the same host.</span></span> <span data-ttu-id="fd2e9-218">Эти контейнеры предназначены для неблагоприятных мультитенантных размещения, с тем же гарантии безопасности виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-218">These containers are designed for hostile multitenant hosting, with the same security assurances of a VM.</span></span> <span data-ttu-id="fd2e9-219">Поскольку эти контейнеры не используют ядро узла или других контейнеров на узле, они могут выполняться ядра с различными версиями и конфигурации (с поддерживаемой версии).</span><span class="sxs-lookup"><span data-stu-id="fd2e9-219">Because these containers don't share the kernel with the host or other containers on the host, they can run kernels with different versions and configurations (with supported versions).</span></span> <span data-ttu-id="fd2e9-220">Например все контейнеры Windows в Windows 10 используйте изоляцию Hyper-V использовать версию ядра Windows Server и конфигурации.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-220">For example, all Windows containers on Windows 10 use Hyper-V isolation to utilize the Windows Server kernel version and configuration.</span></span>

<span data-ttu-id="fd2e9-221">Запуск контейнера в Windows с или без изоляции Hyper-V является решением во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-221">Running a container on Windows with or without Hyper-V isolation is a run-time decision.</span></span> <span data-ttu-id="fd2e9-222">Можно выбрать для первоначального создания контейнера с помощью изоляции Hyper-V и во время выполнения, решили запустить его как контейнер Windows Server.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-222">You might choose to create the container with Hyper-V isolation initially, and at run time, choose to run it as a Windows Server container instead.</span></span>

### <a name="additional-resources"></a><span data-ttu-id="fd2e9-223">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="fd2e9-223">Additional resources</span></span>

- <span data-ttu-id="fd2e9-224">**Документация по контейнерам Windows**</span><span class="sxs-lookup"><span data-stu-id="fd2e9-224">**Windows Containers documentation**</span></span>

    <https://docs.microsoft.com/virtualization/windowscontainers/>

- <span data-ttu-id="fd2e9-225">**Принципы работы контейнеров Windows**</span><span class="sxs-lookup"><span data-stu-id="fd2e9-225">**Windows Containers fundamentals**</span></span>

    <https://docs.microsoft.com/virtualization/windowscontainers/about/>

- <span data-ttu-id="fd2e9-226">**Инфографика: Корпорация Майкрософт и контейнеры**</span><span class="sxs-lookup"><span data-stu-id="fd2e9-226">**Infographic: Microsoft and containers**</span></span>

    <https://info.microsoft.com/rs/157-GQE-382/images/Container%20infographic%201.4.17.pdf>

## <a name="the-container-ecosystem-in-azure"></a><span data-ttu-id="fd2e9-227">Экосистема контейнеров в Azure</span><span class="sxs-lookup"><span data-stu-id="fd2e9-227">The container ecosystem in Azure</span></span>

<span data-ttu-id="fd2e9-228">В предыдущих разделах он были были изложены преимущества контейнеров Docker, а также сведения о образов контейнеров для конкретной для приложений .NET.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-228">In previous sections, it’s been explained what the benefits of Docker containers are as well as details on the specific container images for .NET applications.</span></span> <span data-ttu-id="fd2e9-229">Все, что к общим сведениям, — это основа для разработки или упаковать приложение в контейнер.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-229">All that generic information is fundamental in order to develop or containerize an application.</span></span>
<span data-ttu-id="fd2e9-230">Тем не менее при рассмотрении в рабочей среде развертывания или даже среде разработки и тестирования и контроля Качества, Microsoft Azure предоставляет открытым и масштабными разнообразные варианты, экосистемы полный контейнеров в облаке (показано на схеме ниже).</span><span class="sxs-lookup"><span data-stu-id="fd2e9-230">However, when thinking about the production deployment environment or even QA and Dev/Test environments, Microsoft Azure provides an open and broad variety of choices, a full container ecosystem in the cloud (shown in the diagram below).</span></span> <span data-ttu-id="fd2e9-231">В зависимости от потребностей конкретного приложения следует выбрать один или другой продукт Azure.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-231">Depending on your specific application’s needs, you should choose one or another Azure product.</span></span>

![](./media/image7.5.png)

> <span data-ttu-id="fd2e9-232">**Рис. 4-7.5.**</span><span class="sxs-lookup"><span data-stu-id="fd2e9-232">**Figure 4-7.5.**</span></span> <span data-ttu-id="fd2e9-233">Экосистема контейнеров в Azure</span><span class="sxs-lookup"><span data-stu-id="fd2e9-233">The container ecosystem in Azure</span></span>

<span data-ttu-id="fd2e9-234">В экосистеме контейнеров в Azure, следующие продукты поддерживаются контейнеры, которые считаются инфраструктуры:</span><span class="sxs-lookup"><span data-stu-id="fd2e9-234">From the container ecosystem in Azure, the following products supporting containers that are considered infrastructure:</span></span>
- <span data-ttu-id="fd2e9-235">**Экземпляры контейнеров Azure (ACI)**</span><span class="sxs-lookup"><span data-stu-id="fd2e9-235">**Azure Container Instances (ACI)**</span></span>
- <span data-ttu-id="fd2e9-236">**Виртуальные машины Azure** (с поддержкой контейнера)</span><span class="sxs-lookup"><span data-stu-id="fd2e9-236">**Azure Virtual Machines** (With container's support)</span></span>
- <span data-ttu-id="fd2e9-237">**Масштабируемые наборы виртуальных машин Azure** (с поддержкой контейнера)</span><span class="sxs-lookup"><span data-stu-id="fd2e9-237">**Azure Virtual Machine Scale Sets** (With container's support)</span></span>

<span data-ttu-id="fd2e9-238">Из этих трех ACI предоставляет большие преимущества, который является тот факт, что не требуется для поддержания базовой операционной системы, нет необходимости автоматически обновлять и исправлять, т. д., но по-прежнему находится на уровне инфраструктуры, как лучше описано в следующих разделах настоящей книги ACI.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-238">From those three, ACI provides a great benefit, which is the fact that you don't need to maintain the underlying OS, no need for you to upgrade/patch, etc. but ACI still is positioned in the infrastructure level, as better explained in the upcoming sections of this book.</span></span>

<span data-ttu-id="fd2e9-239">Продукты Azure вспомогательные контейнеров, которые находятся в то же время, более расположен в PaaS (платформа как услуга) уровне предназначены для:</span><span class="sxs-lookup"><span data-stu-id="fd2e9-239">The products in Azure supporting containers that are at the same time positioned more in the PaaS (Platform as a Service) level are:</span></span>

- <span data-ttu-id="fd2e9-240">**служба приложений Azure**;</span><span class="sxs-lookup"><span data-stu-id="fd2e9-240">**Azure App Service**</span></span>
- <span data-ttu-id="fd2e9-241">**Служба Azure Kubernetes (AKS и ACS)**</span><span class="sxs-lookup"><span data-stu-id="fd2e9-241">**Azure Kubernetes Service (AKS and ACS)**</span></span>
- <span data-ttu-id="fd2e9-242">**Azure Service Fabric**</span><span class="sxs-lookup"><span data-stu-id="fd2e9-242">**Azure Service Fabric**</span></span> 
- <span data-ttu-id="fd2e9-243">**Пакетная служба Azure**</span><span class="sxs-lookup"><span data-stu-id="fd2e9-243">**Azure Batch**</span></span> 

<span data-ttu-id="fd2e9-244">Затем реестр контейнеров Azure — это реестр высокой масштабируемой контейнера, размещенных в Azure, который можно использовать из всех предыдущих продуктов при регистрации и развертывания ваших образов настраиваемого контейнера.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-244">Then, Azure Container Registry is a high scalable container registry hosted in Azure that you can use from all the previous products when registering and deploying your custom container images.</span></span>

<span data-ttu-id="fd2e9-245">Кроме того, из контейнеров, вы можете использовать другими управляемыми службами в Azure, таких как базы данных SQL Azure, кэш Redis для Azure, Azure Cosmos DB, и т.д.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-245">In addition, from your containers, you can consume other managed services in Azure like Azure SQL Database, Azure Redis cache, Azure Cosmos DB, etc.</span></span> <span data-ttu-id="fd2e9-246">Кроме того, доступны сторонних решений и платформы в Azure Marketplace, например Cloud Foundry и OpenShift, где можно также использовать контейнеры в Azure.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-246">plus there are third-party solutions/platforms available in Azure Marketplace like Cloud Foundry and OpenShift where you can also use containers within Azure.</span></span> 

<span data-ttu-id="fd2e9-247">В следующих разделах вы можете изучить рекомендации корпорации Майкрософт о том, когда использовать каждый из этих продуктов и решений, специально ориентируясь на контейнеры Windows.</span><span class="sxs-lookup"><span data-stu-id="fd2e9-247">In the next sections, you can explore Microsoft's recommendations on when to use each of those Azure products and solutions specifically when targeting Windows Containers.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="fd2e9-248">[Назад](what-about-cloud-native-applications.md)
>[Вперед](when-not-to-deploy-to-windows-containers.md)</span><span class="sxs-lookup"><span data-stu-id="fd2e9-248">[Previous](what-about-cloud-native-applications.md)
[Next](when-not-to-deploy-to-windows-containers.md)</span></span>
