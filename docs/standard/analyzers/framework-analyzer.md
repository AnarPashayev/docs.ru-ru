---
title: Анализаторы безопасности .NET — .NET
description: Сведения об использовании анализаторов безопасности .NET в пакете анализаторов .NET Framework для поиска и устранения угроз безопасности
author: billwagner
ms.author: wiwagn
ms.date: 01/25/2018
ms.technology: dotnet-standard
ms.openlocfilehash: 03268375739b34a43f38c60fbfd2c993da9f3840
ms.sourcegitcommit: 5a28f8eb071fcc09b045b0c4ae4b96898673192e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2019
ms.locfileid: "73197959"
---
# <a name="the-net-framework-analyzer"></a>Анализатор .NET Framework

Анализатор .NET Framework можно использовать для поиска потенциальных проблем в коде приложения на основе .NET Framework. Этот анализатор находит потенциальные проблемы и предлагает решения по их устранению.

Анализатор запускается в интерактивном режиме в Visual Studio при написании кода или в составе сборки CI. В процессе разработки анализатор необходимо добавить в проект как можно раньше. Чем раньше вы обнаружите какие-либо потенциальные проблемы в коде, тем легче вы их исправите. Однако анализатор можно добавить в любое время на этапе разработки. Он выявляет проблемы с существующим кодом и предупреждает о новых проблемах в ходе разработки.

## <a name="installing-and-configuring-the-net-framework-analyzer"></a>Установка и настройка анализатора .NET Framework

Анализаторы безопасности .NET устанавливаются в виде пакета NuGet в каждом проекте, где они будут запускаться. Добавлять их в проект должен один разработчик. Пакет анализатора является зависимостью проекта и будет выполняться на каждом компьютере разработчика с обновленным решением.

Анализатор .NET Framework входит в пакет NuGet [Microsoft.NetFramework.Analyzers](https://www.nuget.org/packages/Microsoft.NetFramework.Analyzers/). Этот пакет содержит только анализаторы, соответствующие .NET Framework, в число которых входят анализаторы безопасности. В большинстве случаев требуется пакет NuGet [Microsoft.CodeAnalysis.FxCopAnalyzers](https://www.nuget.org/packages/Microsoft.CodeAnalysis.FxCopAnalyzers). Пакет FxCopAnalyzers содержит все анализаторы платформы, включенные в пакет Framework.Analyzers, а также следующие анализаторы:

- [Microsoft.CodeQuality.Analyzers](https://www.nuget.org/packages/Microsoft.CodeQuality.Analyzers): предоставляет общие рекомендации и инструкции по стандартным API .NET Standard.
- [Microsoft.NetCore.Analyzers](https://www.nuget.org/packages/Microsoft.NetCore.Analyzers): предоставляет анализаторы, соответствующие API .NET Core.
- [Text.Analyzers](https://www.nuget.org/packages/Text.Analyzers): предоставляет рекомендации по тексту, включаемому в виде кода, а также комментарии.

Чтобы установить его, щелкните правой кнопкой мыши проект и выберите пункт "Управление зависимостями".
В обозревателе NuGet найдите "Анализатор NetFramework" или "Анализатор Fx Cop". Установите последнюю стабильную версию во всех проектах в решении.

## <a name="using-the-net-framework-analyzer"></a>Использование анализатора .NET Framework

После установки пакета NuGet выполните сборку решения. Анализатор сообщит о любых проблемах, которые будут найдены в базе кода. Проблемы выводятся как предупреждения в окне списка ошибок в Visual Studio, как показано на следующем рисунке.

![Проблемы, о которых сообщает анализатор Framework](./media/framework-analyzers-2.png)

При написании кода потенциальные проблемы выделяются волнистыми линиями.
Наведите указатель мыши на любую проблему и просмотрите сведения о ней, а также предложения по возможному исправлению, как показано на следующем рисунке.

![интерактивный отчет о проблемах, обнаруженных анализатором платформы](./media/framework-analyzers-1.png)

Анализатор изучает код в решении и отображает список предупреждений по каждой найденной проблеме.

### <a name="ca1058-types-should-not-extend-certain-base-types"></a>CA1058. Типы не должны расширять определенные базовые типы

В .NET Framework существует незначительное количество типов, от которых не следует выполнять прямое наследование. 

**Категория**. Разработка

**Серьезность**. Предупреждение

Дополнительные сведения: [CA:1058. Типы не должны расширять определенные базовые типы](/visualstudio/code-quality/ca1058-types-should-not-extend-certain-base-types)

### <a name="ca2153-do-not-catch-corrupted-state-exceptions"></a>CA2153. Не перехватывайте исключения поврежденного состояния

Перехват исключений поврежденного состояния может маскировать ошибки (например, нарушение прав доступа), что приведет к несогласованному состоянию выполнения или упростит возможность нарушения безопасности системы злоумышленниками. Вместо этого следует перехватывать и обрабатывать более конкретный набор типов исключений или заново создать исключение.

**Категория**. Безопасность

**Серьезность**. Предупреждение

Дополнительные сведения: [## CA2153. Не перехватывайте исключения поврежденного состояния](/visualstudio/code-quality/ca2153-avoid-handling-corrupted-state-exceptions)

### <a name="ca2229-implement-serialization-constructors"></a>CA2229. Реализуйте конструкторы сериализации

Анализатор генерирует это предупреждение, когда вы создаете тип, реализующий интерфейс <xref:System.Runtime.Serialization.ISerializable>, но не определяющий необходимый конструктор сериализации. Чтобы устранить нарушение этого правила, реализуйте конструктор сериализации. Для запечатанного класса конструктор должен быть закрытым, а в иных случаях — защищенным. Конструктор сериализации имеет следующую сигнатуру:

```csharp
public class MyItemType
{
    // The special constructor is used to deserialize values.
    public MyItemType(SerializationInfo info, StreamingContext context)
    {
        // implementation removed.
    }
}
```

**Категория**. Использование

**Серьезность**. Предупреждение

Дополнительные сведения: [CA2229: реализуйте конструкторы сериализации](/visualstudio/code-quality/ca2229-implement-serialization-constructors)

### <a name="ca2235-mark-all-non-serializable-fields"></a>CA2235. Пометьте все несериализуемые поля

Экземпляр поля несериализуемого типа объявлен в сериализуемом типе. Необходимо явно пометить это поле с <xref:System.NonSerializedAttribute>, чтобы устранить это предупреждение.

**Категория**. Использование

**Серьезность**. Предупреждение

Дополнительные сведения: [CA2235. Пометьте все несериализуемые поля](/visualstudio/code-quality/ca2235-mark-all-non-serializable-fields)

### <a name="ca2237-mark-iserializable-types-with-serializable"></a>CA2237. Пометьте типы ISerializable атрибутом serializable

Чтобы среда CLR распознавала тип как сериализуемый, он должен быть помечен атрибутом <xref:System.SerializableAttribute>, даже если тип использует пользовательскую процедуру сериализации посредством реализации интерфейса <xref:System.Runtime.Serialization.ISerializable>.

**Категория**. Использование

**Серьезность**. Предупреждение

Дополнительные сведения: [CA2237. Пометьте типы ISerializable атрибутом serializable](/visualstudio/code-quality/ca2237-mark-iserializable-types-with-serializableattribute)

### <a name="ca3075-insecure-dtd-processing-in-xml"></a>CA3075. Небезопасная обработка DTD в формате XML

Если вы используете небезопасные экземпляры <xref:System.Xml.XmlReaderSettings.DtdProcessing%2A> или ссылаетесь на источники внешних сущностей, средство синтаксического анализа может принять недоверенные входные данные и раскрыть конфиденциальную информацию злоумышленникам.  

**Категория**. Безопасность

**Серьезность**. Предупреждение

Дополнительные сведения: [A3075. Небезопасная обработка DTD в формате XML](/visualstudio/code-quality/ca2237-mark-iserializable-types-with-serializableattribute)

### <a name="ca5350-do-not-use-weak-cryptographic-algorithms"></a>CA5350. Не используйте ненадежные алгоритмы шифрования

С течением времени надежность алгоритмов шифрования снижается, так как атаки становятся более сложными. В зависимости от типа и применения этого алгоритма шифрования дальнейшее снижение его криптографической стойкости может привести к тому, что злоумышленники смогут читать зашифрованные сообщения, искажать зашифрованные сообщения, подделывать цифровые подписи, незаконно использовать хэшированное содержимое или иным образом нарушать безопасность криптосистемы, основанной на данном алгоритме. В целях шифрования используйте алгоритм AES (AES-256, AES 192 и AES-128) с длиной ключа не меньше 128 бит. В целях хэширования используйте функцию хэширования семейства SHA-2, например SHA-2 512, SHA-2 384 или SHA-2 256.

**Категория**. Безопасность

**Серьезность**. Предупреждение

Дополнительные сведения: [CA5350. Не используйте ненадежные алгоритмы шифрования](/visualstudio/code-quality/ca5350-do-not-use-weak-cryptographic-algorithms)

### <a name="ca5351-do-not-use-broken-cryptographic-algorithms"></a>CA5351. Не используйте взломанные алгоритмы шифрования

Существует атака, допускающая нарушение этого алгоритма вычислительно выполнимым способом. С ее помощью злоумышленники могут разрушить возможности шифрования этого алгоритма. В этом случае в зависимости от типа и применения этого алгоритма шифрования злоумышленники смогут читать зашифрованные сообщения, искажать зашифрованные сообщения, подделывать цифровые подписи, незаконно использовать хэшированное содержимое или иным образом нарушать безопасность криптосистемы, основанной на данном алгоритме. В целях шифрования используйте алгоритм AES (AES-256, AES 192 и AES-128) с длиной ключа не меньше 128 бит. В целях хэширования используйте функцию хэширования семейства SHA-2, например SHA512, SHA384 или SHA256. Для цифровых подписей используйте RSA с длиной ключа не меньше 2048 бит или ECDSA с длиной ключа не меньше 256 бит.

**Категория**. Безопасность

**Серьезность**. Предупреждение

Дополнительные сведения: [CA5351. Не используйте взломанные алгоритмы шифрования](/visualstudio/code-quality/ca5351)
