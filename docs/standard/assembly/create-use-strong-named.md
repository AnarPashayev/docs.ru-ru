---
title: Создание и использование сборок со строгими именами
description: В этой статье показано, как подписать сборку в .NET с использованием строгого имени, а затем обращаться к ней по этому имени.
ms.date: 08/19/2019
helpviewer_keywords:
- strong-name bypass feature
- strong-named assemblies, about strong-named assemblies
- strong-named assemblies
- signing assemblies
- assemblies [.NET Framework], signing
- strong-named assemblies, scenarios
- assemblies [.NET Framework], strong-named
- strong-named assemblies, loading into trusted application domains
- assembly binding, strong-named
ms.assetid: ffbf6d9e-4a88-4a8a-9645-4ce0ee1ee5f9
ms.openlocfilehash: 79c8cf2c21210fd80392a8aacf92840c11a36e43
ms.sourcegitcommit: d6bd7903d7d46698e9d89d3725f3bb4876891aa3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/13/2020
ms.locfileid: "83378534"
---
# <a name="create-and-use-strong-named-assemblies"></a><span data-ttu-id="fee29-103">Создание и использование сборок со строгими именами</span><span class="sxs-lookup"><span data-stu-id="fee29-103">Create and use strong-named assemblies</span></span>

<span data-ttu-id="fee29-104">Строгое имя состоит из удостоверения сборки, включающего ее простое текстовое имя, номер версии и сведения о языке и региональных параметрах (если они имеются), а также открытый ключ и цифровую подпись.</span><span class="sxs-lookup"><span data-stu-id="fee29-104">A strong name consists of the assembly's identity—its simple text name, version number, and culture information (if provided)—plus a public key and a digital signature.</span></span> <span data-ttu-id="fee29-105">Оно создается из файла сборки с использованием соответствующего закрытого ключа.</span><span class="sxs-lookup"><span data-stu-id="fee29-105">It is generated from an assembly file using the corresponding private key.</span></span> <span data-ttu-id="fee29-106">(В файле сборки содержится манифест сборки, в котором указаны имена и хэши всех файлов, составляющих эту сборку.)</span><span class="sxs-lookup"><span data-stu-id="fee29-106">(The assembly file contains the assembly manifest, which contains the names and hashes of all the files that make up the assembly.)</span></span>

> [!WARNING]
> <span data-ttu-id="fee29-107">Строгие имена не являются средством обеспечения безопасности.</span><span class="sxs-lookup"><span data-stu-id="fee29-107">Do not rely on strong names for security.</span></span> <span data-ttu-id="fee29-108">Они служат только для однозначной идентификации.</span><span class="sxs-lookup"><span data-stu-id="fee29-108">They provide a unique identity only.</span></span>

<span data-ttu-id="fee29-109">Сборка со строгими именами может использовать только типы из других сборок со строгими именами.</span><span class="sxs-lookup"><span data-stu-id="fee29-109">A strong-named assembly can only use types from other strong-named assemblies.</span></span> <span data-ttu-id="fee29-110">В противном случае нарушается целостность сборки со строгими именами.</span><span class="sxs-lookup"><span data-stu-id="fee29-110">Otherwise, the integrity of the strong-named assembly would be compromised.</span></span>

> [!NOTE]
> <span data-ttu-id="fee29-111">Хотя .NET Core поддерживает сборки со строгими именами и все сборки в библиотеке .NET Core подписаны, большинству сборок сторонних разработчиков строгие имена не требуются.</span><span class="sxs-lookup"><span data-stu-id="fee29-111">Although .NET Core supports strong-named assemblies, and all assemblies in the .NET Core library are signed, the majority of third-party assemblies do not need strong names.</span></span> <span data-ttu-id="fee29-112">Дополнительные сведения см. в разделе [Подпись строгим именем](https://github.com/dotnet/runtime/blob/master/docs/project/strong-name-signing.md) в GitHub.</span><span class="sxs-lookup"><span data-stu-id="fee29-112">For more information, see [Strong Name Signing](https://github.com/dotnet/runtime/blob/master/docs/project/strong-name-signing.md) on GitHub.</span></span>

## <a name="strong-name-scenario"></a><span data-ttu-id="fee29-113">Сценарий со строгим именем</span><span class="sxs-lookup"><span data-stu-id="fee29-113">Strong name scenario</span></span>

<span data-ttu-id="fee29-114">В следующем сценарии описывается процедура подписи сборки со строгим именем и последующая ссылка на сборку с использованием этого имени.</span><span class="sxs-lookup"><span data-stu-id="fee29-114">The following scenario outlines the process of signing an assembly with a strong name and later referencing it by that name.</span></span>

1. <span data-ttu-id="fee29-115">Сборка A создается со строгим именем с помощью одного из следующих методов.</span><span class="sxs-lookup"><span data-stu-id="fee29-115">Assembly A is created with a strong name using one of the following methods:</span></span>

    - <span data-ttu-id="fee29-116">Использование среды разработки, поддерживающей создание строгих имен, например Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="fee29-116">Using a development environment that supports creating strong names, such as Visual Studio.</span></span>

    - <span data-ttu-id="fee29-117">Создание пары ключей шифрования с использованием [Программы строгих имен (Sn.exe)](../../framework/tools/sn-exe-strong-name-tool.md) и назначение этой пары ключей сборке с использованием компилятора командной строки или [компоновщика сборок (Al.exe)](../../framework/tools/al-exe-assembly-linker.md).</span><span class="sxs-lookup"><span data-stu-id="fee29-117">Creating a cryptographic key pair using the [Strong Name tool (Sn.exe)](../../framework/tools/sn-exe-strong-name-tool.md) and assigning that key pair to the assembly using either a command-line compiler or the [Assembly Linker (Al.exe)](../../framework/tools/al-exe-assembly-linker.md).</span></span> <span data-ttu-id="fee29-118">Windows SDK содержит оба инструмента: Sn.exe и Al.exe.</span><span class="sxs-lookup"><span data-stu-id="fee29-118">The Windows SDK provides both Sn.exe and Al.exe.</span></span>

2. <span data-ttu-id="fee29-119">Среда разработки или средство подписывает хэш файла, содержащего манифест сборки, закрытым ключом разработчика.</span><span class="sxs-lookup"><span data-stu-id="fee29-119">The development environment or tool signs the hash of the file containing the assembly's manifest with the developer's private key.</span></span> <span data-ttu-id="fee29-120">Эта цифровая подпись хранится в переносимом исполняемом файле (PE), который содержит манифест сборки А.</span><span class="sxs-lookup"><span data-stu-id="fee29-120">This digital signature is stored in the portable executable (PE) file that contains Assembly A's manifest.</span></span>

3. <span data-ttu-id="fee29-121">Сборка B является потребителем сборки A. Раздел ссылок манифеста сборки B содержит токен, представляющий открытый ключ сборки А.</span><span class="sxs-lookup"><span data-stu-id="fee29-121">Assembly B is a consumer of Assembly A. The reference section of Assembly B's manifest includes a token that represents Assembly A's public key.</span></span> <span data-ttu-id="fee29-122">Токен является частью полного открытого ключа и используется вместо самого ключа в целях экономии пространства.</span><span class="sxs-lookup"><span data-stu-id="fee29-122">A token is a portion of the full public key and is used rather than the key itself to save space.</span></span>

4. <span data-ttu-id="fee29-123">Среда CLR проверяет подпись строгого имени, когда сборка помещается в глобальный кэш сборок.</span><span class="sxs-lookup"><span data-stu-id="fee29-123">The common language runtime verifies the strong name signature when the assembly is placed in the global assembly cache.</span></span> <span data-ttu-id="fee29-124">При привязке по строгому имени во время выполнения среда CLR сравнивает ключ, сохраненный в манифесте сборки B, с ключом, используемым для создания строгого имени для сборки А. Если проверки безопасности .NET Framework пройдены и привязка выполнена успешно, у сборки B есть гарантия, что биты сборки A не были изменены и действительно получены от разработчиков сборки А.</span><span class="sxs-lookup"><span data-stu-id="fee29-124">When binding by strong name at run time, the common language runtime compares the key stored in Assembly B's manifest with the key used to generate the strong name for Assembly A. If the .NET Framework security checks pass and the bind succeeds, Assembly B has a guarantee that Assembly A's bits have not been tampered with and that these bits actually come from the developers of Assembly A.</span></span>

> [!NOTE]
> <span data-ttu-id="fee29-125">В этом сценарии не рассматриваются вопросы доверия.</span><span class="sxs-lookup"><span data-stu-id="fee29-125">This scenario doesn't address trust issues.</span></span> <span data-ttu-id="fee29-126">Помимо строгого имени сборки могут содержать полные подписи кода аутентификации Microsoft Authenticode.</span><span class="sxs-lookup"><span data-stu-id="fee29-126">Assemblies can carry full Microsoft Authenticode signatures in addition to a strong name.</span></span> <span data-ttu-id="fee29-127">Подписи Authenticode включают сертификат, который устанавливает отношения доверия.</span><span class="sxs-lookup"><span data-stu-id="fee29-127">Authenticode signatures include a certificate that establishes trust.</span></span> <span data-ttu-id="fee29-128">Важно отметить, что строгие имена не требуют подписи кода таким способом.</span><span class="sxs-lookup"><span data-stu-id="fee29-128">It's important to note that strong names don't require code to be signed in this way.</span></span> <span data-ttu-id="fee29-129">Строгие имена служат только для однозначной идентификации.</span><span class="sxs-lookup"><span data-stu-id="fee29-129">Strong names only provide a unique identity.</span></span>

## <a name="bypass-signature-verification-of-trusted-assemblies"></a><span data-ttu-id="fee29-130">Обход проверки подписей в доверенных сборках</span><span class="sxs-lookup"><span data-stu-id="fee29-130">Bypass signature verification of trusted assemblies</span></span>

<span data-ttu-id="fee29-131">Начиная с .NET Framework 3.5 с пакетом обновления 1 (SP1), подписи строгого имени не проверяются, если сборка загружается в домен приложения с полным доверием, например в домен приложения по умолчанию для зоны `MyComputer`.</span><span class="sxs-lookup"><span data-stu-id="fee29-131">Starting with the .NET Framework 3.5 Service Pack 1, strong-name signatures are not validated when an assembly is loaded into a full-trust application domain, such as the default application domain for the `MyComputer` zone.</span></span> <span data-ttu-id="fee29-132">Это называется функцией обхода строгих имен.</span><span class="sxs-lookup"><span data-stu-id="fee29-132">This is referred to as the strong-name bypass feature.</span></span> <span data-ttu-id="fee29-133">В среде с полным доверием всегда успешно обрабатываются запросы <xref:System.Security.Permissions.StrongNameIdentityPermission> для подписанных сбором с полным доверием независимо от их подписи.</span><span class="sxs-lookup"><span data-stu-id="fee29-133">In a full-trust environment, demands for <xref:System.Security.Permissions.StrongNameIdentityPermission> always succeed for signed, full-trust assemblies, regardless of their signature.</span></span> <span data-ttu-id="fee29-134">Функция обхода строгих имен позволяет избежать ненужных затрат ресурсов для проверки подписей строгих имен в сборках с полным доверием, что позволяет быстрее загружать такие сборки.</span><span class="sxs-lookup"><span data-stu-id="fee29-134">The strong-name bypass feature avoids the unnecessary overhead of strong-name signature verification of full-trust assemblies in this situation, allowing the assemblies to load faster.</span></span>

<span data-ttu-id="fee29-135">Функция обхода применима к любой сборке, подписанной со строгим именем и имеющей следующие характеристики.</span><span class="sxs-lookup"><span data-stu-id="fee29-135">The bypass feature applies to any assembly that is signed with a strong name and that has the following characteristics:</span></span>

- <span data-ttu-id="fee29-136">Полное доверие без доказательства <xref:System.Security.Policy.StrongName> (например, при наличии доказательства зоны `MyComputer`).</span><span class="sxs-lookup"><span data-stu-id="fee29-136">Fully trusted without <xref:System.Security.Policy.StrongName> evidence (for example, has `MyComputer` zone evidence).</span></span>

- <span data-ttu-id="fee29-137">Загрузка в домен <xref:System.AppDomain> с полным доверием.</span><span class="sxs-lookup"><span data-stu-id="fee29-137">Loaded into a fully trusted <xref:System.AppDomain>.</span></span>

- <span data-ttu-id="fee29-138">Загрузка из расположения со свойством <xref:System.AppDomainSetup.ApplicationBase%2A> домена <xref:System.AppDomain>.</span><span class="sxs-lookup"><span data-stu-id="fee29-138">Loaded from a location under the <xref:System.AppDomainSetup.ApplicationBase%2A> property of that <xref:System.AppDomain>.</span></span>

- <span data-ttu-id="fee29-139">Подпись осуществлена без задержки.</span><span class="sxs-lookup"><span data-stu-id="fee29-139">Not delay-signed.</span></span>

<span data-ttu-id="fee29-140">Эту возможность можно отключить для отдельных приложений или для компьютера.</span><span class="sxs-lookup"><span data-stu-id="fee29-140">This feature can be disabled for individual applications or for a computer.</span></span> <span data-ttu-id="fee29-141">См. практическое руководство по [ Отключение функции пропуска строгих имен](disable-strong-name-bypass-feature.md).</span><span class="sxs-lookup"><span data-stu-id="fee29-141">See [How to: Disable the strong-name bypass feature](disable-strong-name-bypass-feature.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="fee29-142">См. также</span><span class="sxs-lookup"><span data-stu-id="fee29-142">Related topics</span></span>

|<span data-ttu-id="fee29-143">Заголовок</span><span class="sxs-lookup"><span data-stu-id="fee29-143">Title</span></span>|<span data-ttu-id="fee29-144">Описание</span><span class="sxs-lookup"><span data-stu-id="fee29-144">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="fee29-145">Практическое руководство. Создание пары открытого и закрытого ключей</span><span class="sxs-lookup"><span data-stu-id="fee29-145">How to: Create a public-private key pair</span></span>](create-public-private-key-pair.md)|<span data-ttu-id="fee29-146">Описывает способ создания пары криптографических ключей для подписи сборки.</span><span class="sxs-lookup"><span data-stu-id="fee29-146">Describes how to create a cryptographic key pair for signing an assembly.</span></span>|
|[<span data-ttu-id="fee29-147">Практическое руководство. Подписание сборки строгим именем</span><span class="sxs-lookup"><span data-stu-id="fee29-147">How to: Sign an assembly with a strong name</span></span>](sign-strong-name.md)|<span data-ttu-id="fee29-148">Описывает способ создания сборки со строгим именем.</span><span class="sxs-lookup"><span data-stu-id="fee29-148">Describes how to create a strong-named assembly.</span></span>|
|[<span data-ttu-id="fee29-149">Усовершенствованное строгое именование</span><span class="sxs-lookup"><span data-stu-id="fee29-149">Enhanced strong naming</span></span>](enhanced-strong-naming.md)|<span data-ttu-id="fee29-150">Описывает усовершенствования в использовании строгих имен в .NET Framework 4.5.</span><span class="sxs-lookup"><span data-stu-id="fee29-150">Describes enhancements to strong-names in the .NET Framework 4.5.</span></span>|
|[<span data-ttu-id="fee29-151">Практическое руководство. Ссылка на сборку со строгим именем</span><span class="sxs-lookup"><span data-stu-id="fee29-151">How to: Reference a strong-named assembly</span></span>](reference-strong-named.md)|<span data-ttu-id="fee29-152">Содержит инструкции по созданию ссылок на типы или ресурсы в сборке со строгим именем во время компиляции или выполнения.</span><span class="sxs-lookup"><span data-stu-id="fee29-152">Describes how to reference types or resources in a strong-named assembly at compile time or run time.</span></span>|
|[<span data-ttu-id="fee29-153">Практическое руководство. Отключение функции пропуска строгих имен</span><span class="sxs-lookup"><span data-stu-id="fee29-153">How to: Disable the strong-name bypass feature</span></span>](disable-strong-name-bypass-feature.md)|<span data-ttu-id="fee29-154">Содержит инструкции по отключению возможности обхода проверки подписей строгих имен.</span><span class="sxs-lookup"><span data-stu-id="fee29-154">Describes how to disable the feature that bypasses the validation of strong-name signatures.</span></span> <span data-ttu-id="fee29-155">Эту возможность можно отключить для всех приложений или только для некоторых из них.</span><span class="sxs-lookup"><span data-stu-id="fee29-155">This feature can be disabled for all or for specific applications.</span></span>|
|[<span data-ttu-id="fee29-156">Создание сборок</span><span class="sxs-lookup"><span data-stu-id="fee29-156">Create assemblies</span></span>](create.md)|<span data-ttu-id="fee29-157">Содержит обзор однофайловых и многофайловых сборок.</span><span class="sxs-lookup"><span data-stu-id="fee29-157">Provides an overview of single-file and multifile assemblies.</span></span>|
|[<span data-ttu-id="fee29-158">Использование задержки при подписи сборки в Visual Studio</span><span class="sxs-lookup"><span data-stu-id="fee29-158">How to delay sign an assembly in Visual Studio</span></span>](/visualstudio/ide/managing-assembly-and-manifest-signing#how-to-sign-an-assembly-in-visual-studio)|<span data-ttu-id="fee29-159">Содержит инструкции по подписи сборки строгим именем после создания сборки.</span><span class="sxs-lookup"><span data-stu-id="fee29-159">Explains how to sign an assembly with a strong name after the assembly has been created.</span></span>|
|[<span data-ttu-id="fee29-160">Sn.exe (средство строгих имен)</span><span class="sxs-lookup"><span data-stu-id="fee29-160">Sn.exe (Strong Name tool)</span></span>](../../framework/tools/sn-exe-strong-name-tool.md)|<span data-ttu-id="fee29-161">Описывает средство в составе .NET Framework, которое помогает создавать сборки со строгими именами.</span><span class="sxs-lookup"><span data-stu-id="fee29-161">Describes the tool included in the .NET Framework that helps create assemblies with strong names.</span></span> <span data-ttu-id="fee29-162">Это средство предусматривает параметры для управления ключами, генерации подписи и ее проверки.</span><span class="sxs-lookup"><span data-stu-id="fee29-162">This tool provides options for key management, signature generation, and signature verification.</span></span>|
|[<span data-ttu-id="fee29-163">Al.exe (компоновщик сборок)</span><span class="sxs-lookup"><span data-stu-id="fee29-163">Al.exe (Assembly linker)</span></span>](../../framework/tools/al-exe-assembly-linker.md)|<span data-ttu-id="fee29-164">Описывает средство, включенное в .NET Framework, которое создает файл с манифестом сборки из модулей или файлов ресурсов.</span><span class="sxs-lookup"><span data-stu-id="fee29-164">Describes the tool included in the .NET Framework that generates a file that has an assembly manifest from modules or resource files.</span></span>|
