---
title: Управление версиями сборок
ms.date: 08/20/2019
helpviewer_keywords:
- informational versions
- version numbers, assemblies
- assemblies [.NET Framework], versioning
- resolving assembly binding requests
- versioning, assemblies
ms.assetid: 775ad4fb-914f-453c-98ef-ce1089b6f903
ms.openlocfilehash: bbb3dae2ce66c93d05a2a1c0f7e426901fa7b2e0
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2019
ms.locfileid: "73140179"
---
# <a name="assembly-versioning"></a><span data-ttu-id="6b5ae-102">Управление версиями сборок</span><span class="sxs-lookup"><span data-stu-id="6b5ae-102">Assembly versioning</span></span>

<span data-ttu-id="6b5ae-103">Управление версиями сборок, использующих среду CLR, производится полностью на уровне сборки.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-103">All versioning of assemblies that use the common language runtime is done at the assembly level.</span></span> <span data-ttu-id="6b5ae-104">Конкретная версия сборки и версии зависимых от нее сборок указываются в манифесте сборки.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-104">The specific version of an assembly and the versions of dependent assemblies are recorded in the assembly's manifest.</span></span> <span data-ttu-id="6b5ae-105">Политика управления версиями по умолчанию для среды выполнения заключается в том, что приложения могут выполняться только с версиями, с которыми они были разработаны и протестированы, если иное не переопределено явной политикой использования версий в файлах конфигурации (в файле конфигурации приложения, файле политики издателя и файле конфигурации администратора компьютера).</span><span class="sxs-lookup"><span data-stu-id="6b5ae-105">The default version policy for the runtime is that applications run only with the versions they were built and tested with, unless overridden by explicit version policy in configuration files (the application configuration file, the publisher policy file, and the computer's administrator configuration file).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="6b5ae-106">Управление версиями выполняется только для сборок со строгими именами.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-106">Versioning is done only on assemblies with strong names.</span></span>  
  
<span data-ttu-id="6b5ae-107">Среда выполнения предпринимает несколько шагов для разрешения запроса привязки сборок.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-107">The runtime performs several steps to resolve an assembly binding request:</span></span>  
  
1. <span data-ttu-id="6b5ae-108">Проверяет исходную ссылку на сборку для определения версии сборки, с которой будет связано приложение.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-108">Checks the original assembly reference to determine the version of the assembly to be bound.</span></span>  
  
2. <span data-ttu-id="6b5ae-109">Проверяет все применимые файлы конфигурации для использования политики управления версиями.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-109">Checks for all applicable configuration files to apply version policy.</span></span>  
  
3. <span data-ttu-id="6b5ae-110">Определяет правильную сборку на основании исходной ссылки на сборку и любого указанного в файлах конфигурации перенаправления, а также версию, которая должна связываться с вызывающей сборкой.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-110">Determines the correct assembly from the original assembly reference and any redirection specified in the configuration files, and determines the version that should be bound to the calling assembly.</span></span>  
  
4. <span data-ttu-id="6b5ae-111">Проверяет глобальный кэш сборок и указанные в файлах конфигурации базы кода, а затем проверяет папку приложения и вложенные папки с помощью правил проверки, описанных в разделе [Обнаружение сборок в среде выполнения](../../framework/deployment/how-the-runtime-locates-assemblies.md).</span><span class="sxs-lookup"><span data-stu-id="6b5ae-111">Checks the global assembly cache, codebases specified in configuration files, and then checks the application's directory and subdirectories using the probing rules explained in [How the runtime locates assemblies](../../framework/deployment/how-the-runtime-locates-assemblies.md).</span></span>  
  
<span data-ttu-id="6b5ae-112">Указанные шаги показаны на следующей иллюстрации:</span><span class="sxs-lookup"><span data-stu-id="6b5ae-112">The following illustration shows these steps:</span></span>  
  
![Схема, показывающая шаги по разрешению запроса привязки сборки.](./media/versioning/resolve-assembly-binding-request.gif)
  
<span data-ttu-id="6b5ae-114">Дополнительные сведения о настройке приложений см. в разделе [Настройка приложений](../../framework/configure-apps/index.md).</span><span class="sxs-lookup"><span data-stu-id="6b5ae-114">For more information about configuring applications, see [Configure apps](../../framework/configure-apps/index.md).</span></span> <span data-ttu-id="6b5ae-115">Дополнительные сведения о политике привязки см. в разделе [Обнаружение сборок в среде выполнения](../../framework/deployment/how-the-runtime-locates-assemblies.md).</span><span class="sxs-lookup"><span data-stu-id="6b5ae-115">For more information about binding policy, see [How the runtime locates assemblies](../../framework/deployment/how-the-runtime-locates-assemblies.md).</span></span>  
  
## <a name="version-information"></a><span data-ttu-id="6b5ae-116">Информация о версии</span><span class="sxs-lookup"><span data-stu-id="6b5ae-116">Version information</span></span>  

<span data-ttu-id="6b5ae-117">В каждой сборке есть два различных способа задания сведений о версии.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-117">Each assembly has two distinct ways of expressing version information:</span></span>  
  
- <span data-ttu-id="6b5ae-118">Номер версии сборки, который наряду с именем сборки и сведениями о языке и региональных параметрах является частью удостоверения сборки.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-118">The assembly's version number, which, together with the assembly name and culture information, is part of the assembly's identity.</span></span> <span data-ttu-id="6b5ae-119">Это номер используется средой выполнения для применения политики управления версиями и играет ключевую роль в процессе разрешения типов на этапе выполнения.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-119">This number is used by the runtime to enforce version policy and plays a key part in the type resolution process at run time.</span></span>  
  
- <span data-ttu-id="6b5ae-120">Информационная версия, которая представляет собой строку с дополнительными сведениями о версии, служащую исключительно в информационных целях.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-120">An informational version, which is a string that represents additional version information included for informational purposes only.</span></span>  
  
### <a name="assembly-version-number"></a><span data-ttu-id="6b5ae-121">Номер версии сборки</span><span class="sxs-lookup"><span data-stu-id="6b5ae-121">Assembly version number</span></span>  

<span data-ttu-id="6b5ae-122">Каждая сборка имеет номер версии, являющийся частью ее удостоверения.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-122">Each assembly has a version number as part of its identity.</span></span> <span data-ttu-id="6b5ae-123">Следовательно, две сборки, имеющие разные номера версий, рассматриваются средой выполнения как совершенно разные сборки.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-123">As such, two assemblies that differ by version number are considered by the runtime to be completely different assemblies.</span></span> <span data-ttu-id="6b5ae-124">Этот номер версии физически представляется в виде строки из четырех частей следующего формата:</span><span class="sxs-lookup"><span data-stu-id="6b5ae-124">This version number is physically represented as a four-part string with the following format:</span></span>  
  
<span data-ttu-id="6b5ae-125">\<*основной номер версии*>.\< *дополнительный номер версии*>.\< *номер сборки*>.\< *номер редакции*></span><span class="sxs-lookup"><span data-stu-id="6b5ae-125">\<*major version*>.\<*minor version*>.\<*build number*>.\<*revision*></span></span>  
  
<span data-ttu-id="6b5ae-126">Например, в версии "1.5.1254.0" число "1" представляет основную версию, "5" — младший номер версии, "1254" — номер построения, а "0" — номер редакции.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-126">For example, version 1.5.1254.0 indicates 1 as the major version, 5 as the minor version, 1254 as the build number, and 0 as the revision number.</span></span>  
  
<span data-ttu-id="6b5ae-127">Номер версии сохраняется в манифесте сборки вместе с другими данными удостоверения, включая имя сборки и открытый ключ, а также сведения о связях и удостоверениях других подключаемых к приложению сборок.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-127">The version number is stored in the assembly manifest along with other identity information, including the assembly name and public key, as well as information on relationships and identities of other assemblies connected with the application.</span></span>  
  
<span data-ttu-id="6b5ae-128">При построении сборки средство разработки записывает сведения о зависимостях каждой сборки, на которую имеется ссылка, в манифест сборки.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-128">When an assembly is built, the development tool records dependency information for each assembly that is referenced in the assembly manifest.</span></span> <span data-ttu-id="6b5ae-129">Среда выполнения использует эти номера версий вместе с конфигурационными данными, установленными администратором, приложением или издателем для загрузки нужной версии сборки, на которую имеется ссылка.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-129">The runtime uses these version numbers, in conjunction with configuration information set by an administrator, an application, or a publisher, to load the proper version of a referenced assembly.</span></span>  
  
<span data-ttu-id="6b5ae-130">С целью управления версиями среда выполнения разделяет обычные сборки и сборки со строгими именами.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-130">The runtime distinguishes between regular and strong-named assemblies for the purposes of versioning.</span></span> <span data-ttu-id="6b5ae-131">Проверка версий производится только для сборок со строгими именами.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-131">Version checking only occurs with strong-named assemblies.</span></span>  
  
<span data-ttu-id="6b5ae-132">Сведения о политиках привязки версий см. в разделе [Настройка приложений](../../framework/configure-apps/index.md).</span><span class="sxs-lookup"><span data-stu-id="6b5ae-132">For information about specifying version binding policies, see [Configure apps](../../framework/configure-apps/index.md).</span></span> <span data-ttu-id="6b5ae-133">Дополнительные сведения о способе использования средой выполнения сведений о версии для поиска определенной сборки см. в разделе [Обнаружение сборок в среде выполнения](../../framework/deployment/how-the-runtime-locates-assemblies.md).</span><span class="sxs-lookup"><span data-stu-id="6b5ae-133">For information about how the runtime uses version information to find a particular assembly, see [How the runtime locates assemblies](../../framework/deployment/how-the-runtime-locates-assemblies.md).</span></span>  
  
### <a name="assembly-informational-version"></a><span data-ttu-id="6b5ae-134">Информационная версия сборки</span><span class="sxs-lookup"><span data-stu-id="6b5ae-134">Assembly informational version</span></span>  

<span data-ttu-id="6b5ae-135">Информационная версия сборки представляет собой строку, которая добавляет к сборке дополнительные данные и служит только для информации. Она не используется на этапе выполнения.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-135">The informational version is a string that attaches additional version information to an assembly for informational purposes only; this information is not used at run time.</span></span> <span data-ttu-id="6b5ae-136">Информационная версия (в текстовом формате) соответствует описанию продукта на рынке, данным о комплектации или названии продукта. Эта версия не используется средой выполнения.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-136">The text-based informational version corresponds to the product's marketing literature, packaging, or product name and is not used by the runtime.</span></span> <span data-ttu-id="6b5ae-137">Так, информационная версия может быть задана как "Среда CLR версии 1.0" или "Элемент управления NET с пакетом обновления 2".</span><span class="sxs-lookup"><span data-stu-id="6b5ae-137">For example, an informational version could be "Common Language Runtime version 1.0" or "NET Control SP 2".</span></span> <span data-ttu-id="6b5ae-138">В Microsoft Windows эта информация отображается в элементе "Версия продукта" на вкладке "Версии" в диалоговом окне свойств файла.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-138">On the Version tab of the file properties dialog in Microsoft Windows, this information appears in the item "Product Version".</span></span>  
  
> [!NOTE]
> <span data-ttu-id="6b5ae-139">Хотя можно задать любой текст, при компиляции появится предупреждение, если строка имеет формат отличный от формата номера версии сборки или если она имеет правильный формат, но содержит подстановочные знаки.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-139">Although you can specify any text, a warning message appears on compilation if the string is not in the format used by the assembly version number, or if it is in that format but contains wildcards.</span></span> <span data-ttu-id="6b5ae-140">Это не опасное предупреждение.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-140">This warning is harmless.</span></span>  
  
<span data-ttu-id="6b5ae-141">Информационная версия представляется с помощью пользовательского атрибута <xref:System.Reflection.AssemblyInformationalVersionAttribute?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6b5ae-141">The informational version is represented using the custom attribute <xref:System.Reflection.AssemblyInformationalVersionAttribute?displayProperty=nameWithType>.</span></span> <span data-ttu-id="6b5ae-142">Дополнительные сведения об атрибуте информационной версии см. в разделе [Настройка атрибутов сборки](set-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="6b5ae-142">For more information about the informational version attribute, see [Set assembly attributes](set-attributes.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6b5ae-143">См. также</span><span class="sxs-lookup"><span data-stu-id="6b5ae-143">See also</span></span>

- [<span data-ttu-id="6b5ae-144">Обнаружение сборок в среде выполнения</span><span class="sxs-lookup"><span data-stu-id="6b5ae-144">How the runtime locates assemblies</span></span>](../../framework/deployment/how-the-runtime-locates-assemblies.md)
- [<span data-ttu-id="6b5ae-145">Настройка приложений</span><span class="sxs-lookup"><span data-stu-id="6b5ae-145">Configure apps</span></span>](../../framework/configure-apps/index.md)
- [<span data-ttu-id="6b5ae-146">Настройка атрибутов сборки</span><span class="sxs-lookup"><span data-stu-id="6b5ae-146">Set assembly attributes</span></span>](set-attributes.md)
- [<span data-ttu-id="6b5ae-147">Сборки в .NET</span><span class="sxs-lookup"><span data-stu-id="6b5ae-147">Assemblies in .NET</span></span>](index.md)
