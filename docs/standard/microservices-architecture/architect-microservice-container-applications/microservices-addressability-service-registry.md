---
title: Возможность адресации микрослужб и реестр служб
description: Понимание роли реестров образов контейнера в архитектуре микрослужб.
ms.date: 09/20/2018
ms.openlocfilehash: 5b601f19b60a8e989977e7135138add7644bd7b6
ms.sourcegitcommit: 8699383914c24a0df033393f55db3369db728a7b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/15/2019
ms.locfileid: "65639967"
---
# <a name="microservices-addressability-and-the-service-registry"></a>Возможность адресации микрослужб и реестр служб

Каждая микрослужба имеет уникальное имя (URL-адрес), по которому разрешается ее расположение. Возможность адресации микрослужбы должна существовать независимо от того, где она находится. Если вы не можете легко определить, на каком компьютере выполняется та или иная микрослужба, очень скоро могут возникнуть проблемы. Микрослужба должна иметь уникальное имя, чтобы ее текущее расположение можно было установить аналогично тому, как служба DNS сопоставляет URL-адрес с определенным компьютером. Микрослужбам требуются адресуемые имена, которые делают их независимыми от базовой инфраструктуры. Это означает наличие связи между развертыванием службы и ее обнаружением, то есть необходим [реестр служб](https://microservices.io/patterns/service-registry.html). Аналогичным образом, когда происходит сбой компьютера, служба реестра должна сообщать, где теперь выполняется служба.

[Шаблон реестра служб](https://microservices.io/patterns/service-registry.html) является ключевым элементом обнаружения служб. Он представляет собой базу данных, содержащую сетевые расположения экземпляров служб. Реестр служб должен обладать высокой доступностью и быть актуальным. Клиенты могут кэшировать сетевые расположения, полученные из реестра служб. Однако эти сведения со временем устаревают, и в результате клиенты больше не могут обнаружить экземпляры служб. Поэтому реестр служб представляет собой кластер серверов, которые используют протокол репликации для обеспечения согласованности.

В некоторых средах развертывания микрослужб (называемых кластерами и рассматриваемых далее) функция обнаружения служб встроена. Например, служба контейнеров Azure в среде Kubernetes (AKS) обрабатывает регистрацию и отмену регистрации экземпляров служб. Она также запускает прокси-сервер в каждом узле кластера, который выступает в роли маршрутизатора обнаружения на стороне сервера. Еще одним примером может служить платформа Azure Service Fabric, которая также предоставляет реестр служб посредством входящей в ее состав службы именования.

Обратите внимание на то, что по своему назначению реестр служб пересекается с шаблоном шлюза API, который помогает решать аналогичную проблему. Например, [обратный прокси-сервер Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-reverseproxy) является вариантом реализации шлюза API, основанным на службе именования Service Fabric, который помогает преобразовывать адреса в расположения внутренних служб.

## <a name="additional-resources"></a>Дополнительные ресурсы

- **Крис Ричардсон (Chris Richardson). Шаблон: Реестр служб** \
  <https://microservices.io/patterns/service-registry.html>

- **Auth0. Реестр служб** \
  <https://auth0.com/blog/an-introduction-to-microservices-part-3-the-service-registry/>

- **Габриэль Шенкер (Gabriel Schenker). Обнаружение служб** \
  <https://lostechies.com/gabrielschenker/2016/01/27/service-discovery/>

>[!div class="step-by-step"]
>[Назад](maintain-microservice-apis.md)
>[Вперед](microservice-based-composite-ui-shape-layout.md)
