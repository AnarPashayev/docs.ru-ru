---
title: .NET Standard
description: Сведения о .NET Standard, ее версиях и реализациях .NET, которые ее поддерживают.
ms.date: 10/05/2020
ms.technology: dotnet-standard
ms.custom: updateeachrelease
ms.assetid: c044882c-af15-45f2-96d1-534557a5ee9b
ms.openlocfilehash: a4a59fea3ab1a6bc93a12e3f0aa13dea726d8121
ms.sourcegitcommit: 39b1d5f2978be15409c189a66ab30781d9082cd8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/14/2020
ms.locfileid: "92050405"
---
# <a name="net-standard"></a><span data-ttu-id="db05d-103">.NET Standard</span><span class="sxs-lookup"><span data-stu-id="db05d-103">.NET Standard</span></span>

<span data-ttu-id="db05d-104">[.NET Standard](https://github.com/dotnet/standard) — это официальная спецификация для API .NET, которые должны быть доступны во всех реализациях .NET.</span><span class="sxs-lookup"><span data-stu-id="db05d-104">[.NET Standard](https://github.com/dotnet/standard) is a formal specification of .NET APIs that are available on multiple .NET implementations.</span></span> <span data-ttu-id="db05d-105">.NET Standard была создана для того, чтобы повысить согласованность в экосистеме .NET.</span><span class="sxs-lookup"><span data-stu-id="db05d-105">The motivation behind .NET Standard was to establish greater uniformity in the .NET ecosystem.</span></span> <span data-ttu-id="db05d-106">Тем не менее в .NET 5 реализован другой подход к обеспечению единообразия, в рамках которого во многих сценариях отсутствует необходимость использовать .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="db05d-106">However, .NET 5 adopts a different approach to establishing uniformity, and this new approach eliminates the need for .NET Standard in many scenarios.</span></span> <span data-ttu-id="db05d-107">Дополнительные сведения см. в разделе [.NET 5 и .NET Standard](#net-5-and-net-standard) этой статьи.</span><span class="sxs-lookup"><span data-stu-id="db05d-107">For more information, see [.NET 5 and .NET Standard](#net-5-and-net-standard) later in this article.</span></span>

## <a name="net-implementation-support"></a><span data-ttu-id="db05d-108">Поддержка реализации .NET</span><span class="sxs-lookup"><span data-stu-id="db05d-108">.NET implementation support</span></span>

<span data-ttu-id="db05d-109">Различные реализации .NET реализуют конкретные версии .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="db05d-109">The various .NET implementations target specific versions of .NET Standard.</span></span> <span data-ttu-id="db05d-110">Каждая версия реализации .NET ориентирована на использование максимальной поддерживаемой ею версии .NET Standard. Это также означает, что она поддерживает и предыдущие версии.</span><span class="sxs-lookup"><span data-stu-id="db05d-110">Each .NET implementation version advertises the highest .NET Standard version it supports, a statement that means it also supports previous versions.</span></span> <span data-ttu-id="db05d-111">Например, .NET Framework 4.6 реализует .NET Standard 1.3, то есть предоставляет все API, определенные в стандартах .NET Standard версий 1.0–1.3.</span><span class="sxs-lookup"><span data-stu-id="db05d-111">For example, .NET Framework 4.6 implements .NET Standard 1.3, which means that it exposes all APIs defined in .NET Standard versions 1.0 through 1.3.</span></span> <span data-ttu-id="db05d-112">Аналогичным образом .NET Framework 4.6.1 реализует .NET Standard 1.4, а .NET 5.0 — .NET Standard 2.1.</span><span class="sxs-lookup"><span data-stu-id="db05d-112">Similarly, .NET Framework 4.6.1 implements .NET Standard 1.4, while .NET 5.0 implements .NET Standard 2.1.</span></span>

<span data-ttu-id="db05d-113">В следующей таблице перечислены **минимальные** версии реализаций, которые поддерживают каждую версию .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="db05d-113">The following table lists the **minimum** implementation versions that support each .NET Standard version.</span></span> <span data-ttu-id="db05d-114">Это означает, что более поздние версии перечисленных реализаций также поддерживают соответствующую версию .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="db05d-114">That means that later versions of a listed implementation also support the corresponding .NET Standard version.</span></span> <span data-ttu-id="db05d-115">Например, .NET Core 2.1 и более поздних версий поддерживает .NET Standard 2.0 и более ранних версий.</span><span class="sxs-lookup"><span data-stu-id="db05d-115">For example, .NET Core 2.1 and later versions support .NET Standard 2.0 and earlier versions.</span></span>

[!INCLUDE [net-standard-table](../../includes/net-standard-table.md)]

<span data-ttu-id="db05d-116">Чтобы найти самую позднюю версию .NET Standard, на которую можно ориентироваться, выполните следующее:</span><span class="sxs-lookup"><span data-stu-id="db05d-116">To find the highest version of .NET Standard that you can target, do the following steps:</span></span>

1. <span data-ttu-id="db05d-117">Найдите строку, которая соответствует вашей реализации .NET.</span><span class="sxs-lookup"><span data-stu-id="db05d-117">Find the row that indicates the .NET implementation you want to run on.</span></span>
1. <span data-ttu-id="db05d-118">Двигаясь по этой строке справа налево, найдите столбец, который содержит вашу версию платформы.</span><span class="sxs-lookup"><span data-stu-id="db05d-118">Find the column in that row that indicates your version starting from right to left.</span></span>
1. <span data-ttu-id="db05d-119">Заголовок столбца указывает версию .NET Standard, которую поддерживает ваша целевая платформа.</span><span class="sxs-lookup"><span data-stu-id="db05d-119">The column header indicates the .NET Standard version that your target supports.</span></span> <span data-ttu-id="db05d-120">Соответственно, поддерживаются и все более ранние версии .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="db05d-120">You may also target any lower .NET Standard version.</span></span> <span data-ttu-id="db05d-121">Более поздние версии .NET Standard также будет поддерживать текущую реализацию.</span><span class="sxs-lookup"><span data-stu-id="db05d-121">Higher .NET Standard versions will also support your implementation.</span></span>
1. <span data-ttu-id="db05d-122">Повторите эту процедуру для всех платформ, с которыми вы будете работать.</span><span class="sxs-lookup"><span data-stu-id="db05d-122">Repeat this process for each platform you want to target.</span></span> <span data-ttu-id="db05d-123">Если целевых платформ несколько, выберите из них самую младшую версию.</span><span class="sxs-lookup"><span data-stu-id="db05d-123">If you have more than one target platform, you should pick the smaller version among them.</span></span> <span data-ttu-id="db05d-124">Например, если вы хотите работать с .NET Framework 4.8 и .NET 5.0, наивысшей доступной версией .NET Standard будет .NET Standard 2.0.</span><span class="sxs-lookup"><span data-stu-id="db05d-124">For example, if you want to run on .NET Framework 4.8 and .NET 5.0, the highest .NET Standard version you can use is .NET Standard 2.0.</span></span>

### <a name="which-net-standard-version-to-target"></a><span data-ttu-id="db05d-125">Какую версию .NET Standard выбрать в качестве целевой</span><span class="sxs-lookup"><span data-stu-id="db05d-125">Which .NET Standard version to target</span></span>

<span data-ttu-id="db05d-126">При выборе целевой версии .NET Standard перед вами стоит такая дилемма:</span><span class="sxs-lookup"><span data-stu-id="db05d-126">When choosing a .NET Standard version to target, consider this trade-off:</span></span>

- <span data-ttu-id="db05d-127">Чем выше версия, тем больше вам доступно интерфейсов API для библиотеки кода.</span><span class="sxs-lookup"><span data-stu-id="db05d-127">The higher the version, the more APIs are available to your library's code.</span></span>
- <span data-ttu-id="db05d-128">Чем ниже версия, тем больше приложений и библиотек смогут использовать вашу библиотеку.</span><span class="sxs-lookup"><span data-stu-id="db05d-128">The lower the version, the more apps and libraries can use your library.</span></span>

<span data-ttu-id="db05d-129">Мы рекомендуем выбирать *наименьшую* из возможных версий .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="db05d-129">We recommend you target the *lowest* version of .NET Standard possible.</span></span> <span data-ttu-id="db05d-130">После того, как вы определите номер наибольшей возможной версии .NET Standard, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="db05d-130">So, after you find the highest .NET Standard version you can target, follow these steps:</span></span>

1. <span data-ttu-id="db05d-131">Выберите предыдущую версию .NET Standard, создайте и соберите проект для нее.</span><span class="sxs-lookup"><span data-stu-id="db05d-131">Target the next lower version of .NET Standard and build your project.</span></span>
2. <span data-ttu-id="db05d-132">Если сборка проекта пройдет успешно, повторите шаг 1.</span><span class="sxs-lookup"><span data-stu-id="db05d-132">If your project builds successfully, repeat step 1.</span></span> <span data-ttu-id="db05d-133">В противном случае вернитесь к предыдущей, более высокой, версии, и используйте именно ее.</span><span class="sxs-lookup"><span data-stu-id="db05d-133">Otherwise, retarget to the next higher version and that's the version you should use.</span></span>

<span data-ttu-id="db05d-134">Но при выборе более ранних версий .NET Standard предоставляются различные возможности для поддержки зависимостей.</span><span class="sxs-lookup"><span data-stu-id="db05d-134">However, targeting lower .NET Standard versions introduces a number of support dependencies.</span></span> <span data-ttu-id="db05d-135">Если проект предназначен для .NET Standard 1.x, мы рекомендуем вам *также* выбрать .NET Standard 2.0.</span><span class="sxs-lookup"><span data-stu-id="db05d-135">If your project targets .NET Standard 1.x, we recommend that you *also* target .NET Standard 2.0.</span></span> <span data-ttu-id="db05d-136">Это упростит схему зависимостей для пользователей библиотеки, выполняющейся на совместимых реализациях с .NET Standard 2.0, и сократит количество пакетов, которые необходимо скачать.</span><span class="sxs-lookup"><span data-stu-id="db05d-136">This simplifies the dependency graph for users of your library that run on .NET Standard 2.0 compatible implementations, and it reduces the number of packages they need to download.</span></span>

### <a name="net-standard-versioning-rules"></a><span data-ttu-id="db05d-137">Правила управления версиями .NET Standard</span><span class="sxs-lookup"><span data-stu-id="db05d-137">.NET Standard versioning rules</span></span>

<span data-ttu-id="db05d-138">Существует два основных правила управления версиями.</span><span class="sxs-lookup"><span data-stu-id="db05d-138">There are two primary versioning rules:</span></span>

- <span data-ttu-id="db05d-139">Аддитивность. Все версии .NET Standard логически расширяются, то есть более поздние версии содержат все интерфейсы API предыдущих версий.</span><span class="sxs-lookup"><span data-stu-id="db05d-139">Additive: .NET Standard versions are logically concentric circles: higher versions incorporate all APIs from previous versions.</span></span> <span data-ttu-id="db05d-140">Отсутствуют критические изменения между версиями.</span><span class="sxs-lookup"><span data-stu-id="db05d-140">There are no breaking changes between versions.</span></span>
- <span data-ttu-id="db05d-141">Неизменяемость. Версии .NET после выпуска закрепляются в определенном состоянии.</span><span class="sxs-lookup"><span data-stu-id="db05d-141">Immutable: Once shipped, .NET Standard versions are frozen.</span></span>

<span data-ttu-id="db05d-142">После .NET Standard 2.1 выпуск новых версий не планируется.</span><span class="sxs-lookup"><span data-stu-id="db05d-142">There will be no new .NET Standard versions after 2.1.</span></span> <span data-ttu-id="db05d-143">Дополнительные сведения см. в разделе [.NET 5 и .NET Standard](#net-5-and-net-standard) этой статьи.</span><span class="sxs-lookup"><span data-stu-id="db05d-143">For more information, see [.NET 5 and .NET Standard](#net-5-and-net-standard) later in this article.</span></span>

## <a name="specification"></a><span data-ttu-id="db05d-144">Спецификация</span><span class="sxs-lookup"><span data-stu-id="db05d-144">Specification</span></span>

<span data-ttu-id="db05d-145">Спецификация .NET Standard представляет собой стандартизированный набор API.</span><span class="sxs-lookup"><span data-stu-id="db05d-145">The .NET Standard specification is a standardized set of APIs.</span></span> <span data-ttu-id="db05d-146">Она поддерживается реализаторами .NET, в частности корпорацией Майкрософт (для платформ .NET Framework, .NET Core и Mono) и Unity.</span><span class="sxs-lookup"><span data-stu-id="db05d-146">The specification is maintained by .NET implementors, specifically Microsoft (includes .NET Framework, .NET Core, and Mono) and Unity.</span></span>

### <a name="official-artifacts"></a><span data-ttu-id="db05d-147">Официальные артефакты</span><span class="sxs-lookup"><span data-stu-id="db05d-147">Official artifacts</span></span>

<span data-ttu-id="db05d-148">Официальная спецификация — это набор *CS-файлов*, которые определяют API, входящие в стандарт.</span><span class="sxs-lookup"><span data-stu-id="db05d-148">The official specification is a set of *.cs* files that define the APIs that are part of the standard.</span></span> <span data-ttu-id="db05d-149">[ref directory](https://github.com/dotnet/standard/tree/master/src/netstandard/ref) в [репозиторий dotnet/standard](https://github.com/dotnet/standard) определяет стандартные API-интерфейсы .NET.</span><span class="sxs-lookup"><span data-stu-id="db05d-149">The [ref directory](https://github.com/dotnet/standard/tree/master/src/netstandard/ref) in the [dotnet/standard repository](https://github.com/dotnet/standard) defines the .NET Standard APIs.</span></span>

<span data-ttu-id="db05d-150">Метапакет [NETStandard.Library](https://www.nuget.org/packages/NETStandard.Library) ([источник](https://github.com/dotnet/standard/blob/master/src/netstandard/pkg/NETStandard.Library.dependencies.props)) описывает набор библиотек, определяющих (частично) одну версию .NET Standard.или несколько.</span><span class="sxs-lookup"><span data-stu-id="db05d-150">The [NETStandard.Library](https://www.nuget.org/packages/NETStandard.Library) metapackage ([source](https://github.com/dotnet/standard/blob/master/src/netstandard/pkg/NETStandard.Library.dependencies.props)) describes the set of libraries that define (in part) one or more .NET Standard versions.</span></span>

<span data-ttu-id="db05d-151">Отдельный компонент, например `System.Runtime`, описывает следующее:</span><span class="sxs-lookup"><span data-stu-id="db05d-151">A given component, like `System.Runtime`, describes:</span></span>

- <span data-ttu-id="db05d-152">часть .NET Standard (только область действия);</span><span class="sxs-lookup"><span data-stu-id="db05d-152">Part of .NET Standard (just its scope).</span></span>
- <span data-ttu-id="db05d-153">несколько версий .NET Standard для данной области.</span><span class="sxs-lookup"><span data-stu-id="db05d-153">Multiple versions of .NET Standard, for that scope.</span></span>

<span data-ttu-id="db05d-154">Доступны производные артефакты, упрощающие чтение и реализующие определенные сценарии для разработчика (например, использование компилятора).</span><span class="sxs-lookup"><span data-stu-id="db05d-154">Derivative artifacts are provided to enable more convenient reading and to enable certain developer scenarios (for example, using a compiler).</span></span>

- [<span data-ttu-id="db05d-155">Список API с разметкой</span><span class="sxs-lookup"><span data-stu-id="db05d-155">API list in markdown</span></span>](https://github.com/dotnet/standard/tree/master/docs/versions)
- <span data-ttu-id="db05d-156">Ссылочные сборки, распространяемые в виде пакетов NuGet и указанные в ссылках метапакета [NETStandard.Library](https://www.nuget.org/packages/NETStandard.Library/).</span><span class="sxs-lookup"><span data-stu-id="db05d-156">Reference assemblies, distributed as NuGet packages and referenced by the [NETStandard.Library](https://www.nuget.org/packages/NETStandard.Library/) metapackage.</span></span>

### <a name="package-representation"></a><span data-ttu-id="db05d-157">Представление пакетов</span><span class="sxs-lookup"><span data-stu-id="db05d-157">Package representation</span></span>

<span data-ttu-id="db05d-158">Основным средством распространения ссылочных сборок .NET Standard являются пакеты NuGet.</span><span class="sxs-lookup"><span data-stu-id="db05d-158">The primary distribution vehicle for the .NET Standard reference assemblies is NuGet packages.</span></span> <span data-ttu-id="db05d-159">Соответствующие реализации предоставляются различными способами, наиболее уместными для каждой реализации .NET.</span><span class="sxs-lookup"><span data-stu-id="db05d-159">Implementations are delivered in a variety of ways, appropriate for each .NET implementation.</span></span>

<span data-ttu-id="db05d-160">Пакеты NuGet нацелены на одну или несколько [платформ](frameworks.md).</span><span class="sxs-lookup"><span data-stu-id="db05d-160">NuGet packages target one or more [frameworks](frameworks.md).</span></span> <span data-ttu-id="db05d-161">Пакеты библиотеки .NET Standard нацелены на платформу ".NET Standard".</span><span class="sxs-lookup"><span data-stu-id="db05d-161">The .NET Standard packages target the ".NET Standard" framework.</span></span> <span data-ttu-id="db05d-162">Настроить использование .NET Standard можно с помощью [компактного моникера целевой платформы](frameworks.md) `netstandard` (например, `netstandard1.4`).</span><span class="sxs-lookup"><span data-stu-id="db05d-162">You can target the .NET Standard framework using the `netstandard` [compact TFM](frameworks.md) (for example, `netstandard1.4`).</span></span> <span data-ttu-id="db05d-163">Библиотеки, предназначенные для различных реализаций .NET, должны быть нацелены на эту платформу.</span><span class="sxs-lookup"><span data-stu-id="db05d-163">Libraries that are intended to run on multiple implementations of .NET should target this framework.</span></span> <span data-ttu-id="db05d-164">Для самого широкого набора API-интерфейсов выберите `netstandard2.0`, так как количество доступных API-интерфейсов увеличилось более чем вдвое между версиями .NET Standard 1.6 и 2.0.</span><span class="sxs-lookup"><span data-stu-id="db05d-164">For the broadest set of APIs, target `netstandard2.0` since the number of available APIs more than doubled between .NET Standard 1.6 and 2.0.</span></span>

<span data-ttu-id="db05d-165">Метапакет [`NETStandard.Library`](https://www.nuget.org/packages/NETStandard.Library/) ссылается на полный набор пакетов NuGet, определяющих библиотеку .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="db05d-165">The [`NETStandard.Library`](https://www.nuget.org/packages/NETStandard.Library/) metapackage references the complete set of NuGet packages that define .NET Standard.</span></span>  <span data-ttu-id="db05d-166">Наиболее распространенным способом нацеливания на `netstandard` является ссылка на этот метапакет.</span><span class="sxs-lookup"><span data-stu-id="db05d-166">The most common way to target `netstandard` is by referencing this metapackage.</span></span> <span data-ttu-id="db05d-167">Он описывает и предоставляет доступ примерно к 40 библиотекам .NET и связанным интерфейсам API, которые определяют библиотеку .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="db05d-167">It describes and provides access to the ~40 .NET libraries and associated APIs that define .NET Standard.</span></span> <span data-ttu-id="db05d-168">Вы можете ссылаться на другие пакеты, предназначенные для `netstandard`, чтобы получить доступ к дополнительным интерфейсам API.</span><span class="sxs-lookup"><span data-stu-id="db05d-168">You can reference additional packages that target `netstandard` to get access to additional APIs.</span></span>

### <a name="versioning"></a><span data-ttu-id="db05d-169">Управление версиями</span><span class="sxs-lookup"><span data-stu-id="db05d-169">Versioning</span></span>

<span data-ttu-id="db05d-170">Это не отдельная спецификация, а набор API с линейно возрастающими номерами версий.</span><span class="sxs-lookup"><span data-stu-id="db05d-170">The specification is not singular, but a linearly versioned set of APIs.</span></span> <span data-ttu-id="db05d-171">Первая версия стандарта устанавливает базовый набор API.</span><span class="sxs-lookup"><span data-stu-id="db05d-171">The first version of the standard establishes a baseline set of APIs.</span></span> <span data-ttu-id="db05d-172">Последующие версии добавляют API и наследуют API, определенные в предыдущих версиях.</span><span class="sxs-lookup"><span data-stu-id="db05d-172">Subsequent versions add APIs and inherit APIs defined by previous versions.</span></span> <span data-ttu-id="db05d-173">Не существует установленных процедур для удаления API из стандарта.</span><span class="sxs-lookup"><span data-stu-id="db05d-173">There is no established provision for removing APIs from the Standard.</span></span>

<span data-ttu-id="db05d-174">.NET Standard не связывается с какой-либо одной реализацией .NET и не зависит от схем управления версиями любой из этих реализаций.</span><span class="sxs-lookup"><span data-stu-id="db05d-174">.NET Standard is not specific to any one .NET implementation, nor does it match the versioning scheme of any of those implementations.</span></span>

<span data-ttu-id="db05d-175">Как отмечалось ранее, после .NET Standard 2.1 выпуск новых версий не планируется.</span><span class="sxs-lookup"><span data-stu-id="db05d-175">As noted earlier, there will be no new .NET Standard versions after 2.1.</span></span>

## <a name="target-net-standard"></a><span data-ttu-id="db05d-176">Нацеливание на .NET Standard</span><span class="sxs-lookup"><span data-stu-id="db05d-176">Target .NET Standard</span></span>

<span data-ttu-id="db05d-177">Вы можете [создавать библиотеки .NET Standard](../core/tutorials/libraries.md) с помощью сочетания платформы `netstandard` и метапакета `NETStandard.Library`.</span><span class="sxs-lookup"><span data-stu-id="db05d-177">You can [build .NET Standard Libraries](../core/tutorials/libraries.md) using a combination of the `netstandard` framework and the `NETStandard.Library` metapackage.</span></span>

## <a name="net-framework-compatibility-mode"></a><span data-ttu-id="db05d-178">Режим совместимости .NET Framework</span><span class="sxs-lookup"><span data-stu-id="db05d-178">.NET Framework compatibility mode</span></span>

<span data-ttu-id="db05d-179">Начиная с .NET Standard 2.0, доступен режим совместимости .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="db05d-179">Starting with .NET Standard 2.0, the .NET Framework compatibility mode was introduced.</span></span> <span data-ttu-id="db05d-180">Этот режим совместимости позволяет проектам .NET Standard ссылаться на библиотеки .NET Framework, как если бы они были скомпилированы для .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="db05d-180">This compatibility mode allows .NET Standard projects to reference .NET Framework libraries as if they were compiled for .NET Standard.</span></span> <span data-ttu-id="db05d-181">Создание ссылок на библиотеки .NET Framework не работает для всех проектов, например таких, где библиотека использует API Windows Presentation Foundation (WPF).</span><span class="sxs-lookup"><span data-stu-id="db05d-181">Referencing .NET Framework libraries doesn't work for all projects, such as libraries that use Windows Presentation Foundation (WPF) APIs.</span></span>

<span data-ttu-id="db05d-182">Дополнительные сведения см. в разделе [Режим совместимости .NET Framework](../core/porting/third-party-deps.md#net-framework-compatibility-mode).</span><span class="sxs-lookup"><span data-stu-id="db05d-182">For more information, see [.NET Framework compatibility mode](../core/porting/third-party-deps.md#net-framework-compatibility-mode).</span></span>

## <a name="net-standard-libraries-and-visual-studio"></a><span data-ttu-id="db05d-183">Библиотеки .NET Standard и Visual Studio</span><span class="sxs-lookup"><span data-stu-id="db05d-183">.NET Standard libraries and Visual Studio</span></span>

<span data-ttu-id="db05d-184">Чтобы создавать библиотеки .NET Standard в Visual Studio, убедитесь, что у вас установлена [Visual Studio 2019](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link&utm_content=download+vs2019), или Visual Studio 2017 версии 15.3 или более поздней (для Windows), или [Visual Studio для Mac версии 7.1](https://visualstudio.microsoft.com/vs/mac/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link) или более поздней (для macOS).</span><span class="sxs-lookup"><span data-stu-id="db05d-184">In order to build .NET Standard libraries in Visual Studio, make sure you have [Visual Studio 2019](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link&utm_content=download+vs2019) or Visual Studio 2017 version 15.3 or later installed on Windows, or [Visual Studio for Mac version 7.1](https://visualstudio.microsoft.com/vs/mac/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link) or later installed on macOS.</span></span>

<span data-ttu-id="db05d-185">Если вам нужно использовать только библиотеки .NET Standard 2.0 в своих проектах, это также можно сделать в Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="db05d-185">If you only need to consume .NET Standard 2.0 libraries in your projects, you can also do that in Visual Studio 2015.</span></span> <span data-ttu-id="db05d-186">Но у вас должен быть установлен клиент NuGet версии 3.6 или более поздней.</span><span class="sxs-lookup"><span data-stu-id="db05d-186">However, you need NuGet client 3.6 or higher installed.</span></span> <span data-ttu-id="db05d-187">Можно скачать клиент NuGet для Visual Studio 2015 со страницы [загрузок NuGet](https://www.nuget.org/downloads).</span><span class="sxs-lookup"><span data-stu-id="db05d-187">You can download the NuGet client for Visual Studio 2015 from the [NuGet downloads](https://www.nuget.org/downloads) page.</span></span>

## <a name="net-5-and-net-standard"></a><span data-ttu-id="db05d-188">.NET 5 и .NET Standard</span><span class="sxs-lookup"><span data-stu-id="db05d-188">.NET 5 and .NET Standard</span></span>

<span data-ttu-id="db05d-189">.NET 5 — это реализация .NET, которая активно разрабатывается корпорацией Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="db05d-189">.NET 5 is the implementation of .NET that Microsoft is actively developing.</span></span> <span data-ttu-id="db05d-190">Это отдельный продукт с единым набором возможностей и API, которые можно использовать для разработки классических приложений Windows, а также кроссплатформенных консольных приложений, облачных служб и веб-сайтов.</span><span class="sxs-lookup"><span data-stu-id="db05d-190">It's a single product with a uniform set of capabilities and APIs that can be used for Windows desktop apps and cross-platform console apps, cloud services, and websites.</span></span> <span data-ttu-id="db05d-191">Столь широкий спектр сценариев применения отражается с помощью моникеров целевой платформы ([TFM](frameworks.md)) .NET 5.0:</span><span class="sxs-lookup"><span data-stu-id="db05d-191">The .NET 5.0 [TFMs](frameworks.md) reflect this broad range of scenarios:</span></span>

* `net5.0`

  <span data-ttu-id="db05d-192">Этот TFM предназначен для кода, который может выполняться везде.</span><span class="sxs-lookup"><span data-stu-id="db05d-192">This TFM is for code that runs everywhere.</span></span> <span data-ttu-id="db05d-193">За некоторыми исключениями он включает только кроссплатформенные технологии.</span><span class="sxs-lookup"><span data-stu-id="db05d-193">With a few exceptions, it includes only technologies that work cross-platform.</span></span> <span data-ttu-id="db05d-194">Для кода .NET 5 `net5.0` заменяет моникеры целевой платформы `netcoreapp` и `netstandard`.</span><span class="sxs-lookup"><span data-stu-id="db05d-194">For .NET 5 code, `net5.0` replaces both `netcoreapp` and `netstandard` TFMs.</span></span>

* `net5.0-windows`

  <span data-ttu-id="db05d-195">Это пример [моникеров целевой платформы для конкретной ОС](frameworks.md#net-5-os-specific-tfms), которые добавляют функции соответствующей ОС в любые компоненты, на которые ссылается `net5.0`.</span><span class="sxs-lookup"><span data-stu-id="db05d-195">This is an example of [OS-specific TFMs](frameworks.md#net-5-os-specific-tfms) that add OS-specific functionality to everything that `net5.0` refers to.</span></span>

### <a name="when-to-target-net50-vs-netstandard"></a><span data-ttu-id="db05d-196">Выбор целевой платформы net5.0 или netstandard</span><span class="sxs-lookup"><span data-stu-id="db05d-196">When to target net5.0 vs. netstandard</span></span>

<span data-ttu-id="db05d-197">Для существующего кода, который предназначен для `netstandard`, нет необходимости изменять TFM на `net5.0`.</span><span class="sxs-lookup"><span data-stu-id="db05d-197">For existing code that targets `netstandard`, there's no need to change the TFM to `net5.0`.</span></span> <span data-ttu-id="db05d-198">.NET 5.0 реализует .NET Standard 2.1 и более ранних версий.</span><span class="sxs-lookup"><span data-stu-id="db05d-198">.NET 5.0 implements .NET Standard 2.1 and earlier.</span></span> <span data-ttu-id="db05d-199">Единственная причина для изменения целевой платформы с .NET Standard на .NET 5.0 состоит в том, чтобы получить доступ к большему количеству функций среды выполнения, языков или API.</span><span class="sxs-lookup"><span data-stu-id="db05d-199">The only reason to retarget from .NET Standard to .NET 5.0 would be to gain access to more runtime features, language features, or APIs.</span></span> <span data-ttu-id="db05d-200">Например, чтобы использовать C# 9, необходимо указывать в качестве целевой платформы .NET 5.0.</span><span class="sxs-lookup"><span data-stu-id="db05d-200">For example, in order to use C# 9, you need to target .NET 5.0.</span></span> <span data-ttu-id="db05d-201">Вы можете указывать несколько целевых платформ (.NET 5.0 и .NET Standard), чтобы иметь возможность использовать самые новые функции и при этом по-прежнему обеспечивать доступность вашей библиотеки для других реализаций .NET.</span><span class="sxs-lookup"><span data-stu-id="db05d-201">You can multitarget .NET 5.0 and .NET Standard to get access to newer features and still have your library available to other .NET implementations.</span></span>

<span data-ttu-id="db05d-202">Ниже приводятся некоторые рекомендации в отношении нового кода для .NET 5:</span><span class="sxs-lookup"><span data-stu-id="db05d-202">Here are some guidelines for new code for .NET 5:</span></span>

* <span data-ttu-id="db05d-203">Компоненты приложения</span><span class="sxs-lookup"><span data-stu-id="db05d-203">App components</span></span>

  <span data-ttu-id="db05d-204">Если вы используете библиотеки для разбиения приложения на несколько компонентов, рекомендуется указывать целевую платформу `net5.x`, где `5.x` определяет самую раннюю версию .NET 5, для которой может быть предназначено приложение.</span><span class="sxs-lookup"><span data-stu-id="db05d-204">If you're using libraries to break down an application into several components, we recommend you target `net5.x` where `5.x` is the earliest .NET 5 version that your application can target.</span></span> <span data-ttu-id="db05d-205">Для простоты рекомендуется использовать для всех проектов, входящих в состав приложения, одну версию .NET.</span><span class="sxs-lookup"><span data-stu-id="db05d-205">For simplicity, it's best to keep all projects that make up your application on the same version of .NET.</span></span> <span data-ttu-id="db05d-206">Впоследствии вы можете полагать, что везде используются одни и те же функции библиотеки базовых классов.</span><span class="sxs-lookup"><span data-stu-id="db05d-206">Then you can assume the same BCL features everywhere.</span></span>

* <span data-ttu-id="db05d-207">Повторно используемые библиотеки</span><span class="sxs-lookup"><span data-stu-id="db05d-207">Reusable libraries</span></span>

  <span data-ttu-id="db05d-208">Если вы создаете повторно используемые библиотеки, которые планируется поставлять в составе пакетов NuGet, следует выбирать оптимальное сочетание широты охвата и доступного набора функций.</span><span class="sxs-lookup"><span data-stu-id="db05d-208">If you're building reusable libraries that you plan to ship on NuGet, consider the trade-off between reach and available feature set.</span></span> <span data-ttu-id="db05d-209">Последней версией, которую поддерживает .NET Framework, является .NET Standard 2.0, благодаря чему обеспечивается необходимая широта охвата платформ и достаточно полный набор доступных функций.</span><span class="sxs-lookup"><span data-stu-id="db05d-209">.NET Standard 2.0 is the latest version that is supported by .NET Framework, so it gives good reach with a fairly large feature set.</span></span> <span data-ttu-id="db05d-210">Мы не рекомендуем указывать в качестве целевой платформы .NET Standard 1.x, так как в этом случае вы ограничиваете набор доступных функций при минимальном увеличении широты охвата.</span><span class="sxs-lookup"><span data-stu-id="db05d-210">We don't recommend targeting .NET Standard 1.x, as you'd limit the available feature set for a minimal increase in reach.</span></span>

  <span data-ttu-id="db05d-211">Если вам не требуется поддержка .NET Framework, вы можете использовать .NET Standard 2.1 или .NET 5.</span><span class="sxs-lookup"><span data-stu-id="db05d-211">If you don’t need to support .NET Framework, you could go with .NET Standard 2.1 or .NET 5.</span></span> <span data-ttu-id="db05d-212">Мы рекомендуем пропустить .NET Standard 2.1 и перейти непосредственно к .NET 5.</span><span class="sxs-lookup"><span data-stu-id="db05d-212">We recommend you skip .NET Standard 2.1 and go straight to .NET 5.</span></span> <span data-ttu-id="db05d-213">Большинство широко распространенных библиотек предназначены одновременно для .NET Standard 2.0 и .NET 5.</span><span class="sxs-lookup"><span data-stu-id="db05d-213">Most widely used libraries will end up multi-targeting for both .NET Standard 2.0 and .NET 5.</span></span> <span data-ttu-id="db05d-214">Поддержка .NET Standard 2.0 обеспечивает максимальную широту охвата, в то время как поддержка .NET 5 позволяет использовать новейшие функции платформы для клиентов, которые уже работают с .NET 5.</span><span class="sxs-lookup"><span data-stu-id="db05d-214">Supporting .NET Standard 2.0 gives you the most reach, while supporting .NET 5 ensures you can leverage the latest platform features for customers that are already on .NET 5.</span></span>

### <a name="net-standard-problems"></a><span data-ttu-id="db05d-215">Проблемы, связанные с .NET Standard</span><span class="sxs-lookup"><span data-stu-id="db05d-215">.NET Standard problems</span></span>

<span data-ttu-id="db05d-216">В этом разделе описываются некоторые связанные с .NET Standard проблемы, которые позволяют понять, почему .NET 5 является предпочтительной платформой для совместного использования кода между разными платформами и рабочими нагрузками:</span><span class="sxs-lookup"><span data-stu-id="db05d-216">Here are some problems with .NET Standard that help explain why .NET 5 is the better way to share code across platforms and workloads:</span></span>

- <span data-ttu-id="db05d-217">Задержки с добавлением новых API</span><span class="sxs-lookup"><span data-stu-id="db05d-217">Slowness to add new APIs</span></span>

  <span data-ttu-id="db05d-218">Платформа .NET Standard была создана как набор API, который должен поддерживать все реализации .NET, поэтому был определен процесс проверки предложений по добавлению новых API.</span><span class="sxs-lookup"><span data-stu-id="db05d-218">.NET Standard was created as an API set that all .NET implementations would have to support, so there was a review process for proposals to add new APIs.</span></span> <span data-ttu-id="db05d-219">Цель заключалась в том, чтобы стандартизировать только те API, которые могут быть реализованы на всех текущих и будущих платформах .NET.</span><span class="sxs-lookup"><span data-stu-id="db05d-219">The goal was to standardize only APIs that could be implemented in all current and future .NET platforms.</span></span> <span data-ttu-id="db05d-220">В результате, если был пропущен определенный выпуск функции, на ее добавление в версию Standard может уйти несколько лет.</span><span class="sxs-lookup"><span data-stu-id="db05d-220">The result was that if a feature missed a particular release, you might have to wait for a couple of years before it got added to a version of the Standard.</span></span> <span data-ttu-id="db05d-221">При этом ожидание того, что новая версия .NET Standard получит всеобщую поддержку, может длиться еще дольше.</span><span class="sxs-lookup"><span data-stu-id="db05d-221">Then you'd wait even longer for the new version of .NET Standard to be widely supported.</span></span>

  <span data-ttu-id="db05d-222">**Решение в .NET 5:** Благодаря использованию общей базы кода после реализации функция будет сразу же доступна всем приложениям и библиотекам .NET 5.</span><span class="sxs-lookup"><span data-stu-id="db05d-222">**Solution in .NET 5:** When a feature is implemented, it's already available for every .NET 5 app and library because the code base is shared.</span></span> <span data-ttu-id="db05d-223">А поскольку различия между спецификацией API и его реализацией отсутствуют, вы можете воспользоваться преимуществами новых функций гораздо быстрее, чем в случае с .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="db05d-223">And since there's no difference between the API specification and its implementation, you're able to take advantage of new features much quicker than with .NET Standard.</span></span>

- <span data-ttu-id="db05d-224">Сложная система управления версиями</span><span class="sxs-lookup"><span data-stu-id="db05d-224">Complex versioning</span></span>

  <span data-ttu-id="db05d-225">Разделение спецификации API и его реализации приводит к сложному сопоставлению между версиями спецификаций API и их реализаций.</span><span class="sxs-lookup"><span data-stu-id="db05d-225">The separation of the API specification from its implementations results in complex mapping between API specification versions and implementation versions.</span></span> <span data-ttu-id="db05d-226">Эта видно из приведенной ранее в этой статье таблицы и инструкций по ее интерпретации.</span><span class="sxs-lookup"><span data-stu-id="db05d-226">This complexity is evident in the table shown earlier in this article and the instructions for how to interpret it.</span></span>

  <span data-ttu-id="db05d-227">**Решение в .NET 5:** В .NET 5.x отсутствует разделение между спецификацией и реализацией API.</span><span class="sxs-lookup"><span data-stu-id="db05d-227">**Solution in .NET 5:** There's no separation between a .NET 5.x API specification and its implementation.</span></span> <span data-ttu-id="db05d-228">Это позволяет получить упрощенную схему моникеров целевой платформы.</span><span class="sxs-lookup"><span data-stu-id="db05d-228">The result is a simplified TFM scheme.</span></span> <span data-ttu-id="db05d-229">Для всех рабочих нагрузок (библиотеки, консольные приложения и веб-приложения) используется один префикс моникера целевой платформы: `net5.0`.</span><span class="sxs-lookup"><span data-stu-id="db05d-229">There's one TFM prefix for all workloads: `net5.0` is used for libraries, console apps, and web apps.</span></span> <span data-ttu-id="db05d-230">Изменения касаются только [суффикса, который определяет API, предназначенные для конкретной платформы](frameworks.md#net-5-os-specific-tfms), например `net5.0-windows`.</span><span class="sxs-lookup"><span data-stu-id="db05d-230">The only variation is a [suffix that specifies platform-specific APIs](frameworks.md#net-5-os-specific-tfms) for a particular platform, such as `net5.0-windows`.</span></span> <span data-ttu-id="db05d-231">Благодаря этому соглашению об именовании TFM можно легко определить, способно ли данное приложение использовать указанную библиотеку.</span><span class="sxs-lookup"><span data-stu-id="db05d-231">Thanks to this TFM naming convention, you can easily tell whether a given app can use a given library.</span></span> <span data-ttu-id="db05d-232">При этом не требуется использовать какую-либо таблицу эквивалентности номеров версий, как в случае с .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="db05d-232">No version number equivalents table like the one for .NET Standard is needed.</span></span>

- <span data-ttu-id="db05d-233">Не поддерживаемые платформой исключения во время выполнения</span><span class="sxs-lookup"><span data-stu-id="db05d-233">Platform-unsupported exceptions at run time</span></span>

  <span data-ttu-id="db05d-234">.NET Standard предоставляет интерфейсы API для конкретных платформ.</span><span class="sxs-lookup"><span data-stu-id="db05d-234">.NET Standard exposes platform-specific APIs.</span></span> <span data-ttu-id="db05d-235">При этом ваш код может компилироваться без ошибок и выглядеть доступным для переноса на любую платформу, в то время как на самом деле это не так.</span><span class="sxs-lookup"><span data-stu-id="db05d-235">Your code might compile without errors and appear to be portable to any platform even if it isn't portable.</span></span> <span data-ttu-id="db05d-236">При запуске на платформе, на которой отсутствует реализация для данного API, во время выполнения будут возникать ошибки.</span><span class="sxs-lookup"><span data-stu-id="db05d-236">When it runs on a platform that doesn’t have an implementation for a given API, you get run-time errors.</span></span>

  <span data-ttu-id="db05d-237">**Решение в .NET 5:** Пакет SDK для .NET 5 включает анализаторы кода, которые по умолчанию включены.</span><span class="sxs-lookup"><span data-stu-id="db05d-237">**Solution in .NET 5:** The .NET 5 SDK includes code analyzers that are enabled by default.</span></span> <span data-ttu-id="db05d-238">Анализатор совместимости платформ обнаруживает непреднамеренное использование API, которые не поддерживаются на платформах, на которых предполагается работать.</span><span class="sxs-lookup"><span data-stu-id="db05d-238">The platform compatibility analyzer detects unintentional use of APIs that aren't supported on the platforms you intend to run on.</span></span> <span data-ttu-id="db05d-239">Дополнительные сведения см.в разделе [Анализатор совместимости платформ](analyzers/platform-compat-analyzer.md).</span><span class="sxs-lookup"><span data-stu-id="db05d-239">For more information, see [Platform compatibility analyzer](analyzers/platform-compat-analyzer.md).</span></span>

### <a name="net-standard-not-deprecated"></a><span data-ttu-id="db05d-240">Платформа .NET Standard не является устаревшей</span><span class="sxs-lookup"><span data-stu-id="db05d-240">.NET Standard not deprecated</span></span>

<span data-ttu-id="db05d-241">.NET Standard по-прежнему требуется для библиотек, которые могут использоваться несколькими реализациями .NET.</span><span class="sxs-lookup"><span data-stu-id="db05d-241">.NET Standard is still needed for libraries that can be used by multiple .NET implementations.</span></span> <span data-ttu-id="db05d-242">Указывать в качестве целевой платформы .NET Standard рекомендуется в следующих сценариях:</span><span class="sxs-lookup"><span data-stu-id="db05d-242">We recommend you target .NET Standard in the following scenarios:</span></span>

* <span data-ttu-id="db05d-243">Используйте `netstandard2.0` для совместного использования кода между .NET Framework и другими реализациями .NET.</span><span class="sxs-lookup"><span data-stu-id="db05d-243">Use `netstandard2.0` to share code between .NET Framework and all other implementations of .NET.</span></span>
* <span data-ttu-id="db05d-244">Используйте `netstandard2.1` для совместного использования кода между Mono, Xamarin и .NET Core 3.x.</span><span class="sxs-lookup"><span data-stu-id="db05d-244">Use `netstandard2.1` to share code between Mono, Xamarin, and .NET Core 3.x.</span></span>

## <a name="see-also"></a><span data-ttu-id="db05d-245">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="db05d-245">See also</span></span>

- [<span data-ttu-id="db05d-246">Версии .NET Standard (исходный код)</span><span class="sxs-lookup"><span data-stu-id="db05d-246">.NET Standard versions (source)</span></span>](https://github.com/dotnet/standard/blob/master/docs/versions.md)
- [<span data-ttu-id="db05d-247">Версии .NET Standard (интерактивный пользовательский интерфейс)</span><span class="sxs-lookup"><span data-stu-id="db05d-247">.NET Standard versions (interactive UI)</span></span>](https://dotnet.microsoft.com/platform/dotnet-standard#versions)
- [<span data-ttu-id="db05d-248">Создание библиотеки .NET Standard</span><span class="sxs-lookup"><span data-stu-id="db05d-248">Build a .NET Standard library</span></span>](../core/tutorials/library-with-visual-studio.md)
- [<span data-ttu-id="db05d-249">Разработка для различных платформ</span><span class="sxs-lookup"><span data-stu-id="db05d-249">Cross-platform targeting</span></span>](./library-guidance/cross-platform-targeting.md)
