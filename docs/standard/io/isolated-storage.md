---
title: Изолированное хранилище
description: Сведения об изолированном хранилище, которое представляет собой механизм хранения данных, обеспечивающий изоляцию и безопасность путем определения стандартизованных способов сопоставления кода с сохраненными данными.
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- data storage using isolated storage
- stores
- storing data using isolated storage
- isolated storage
- location of isolated storage in file system
- standardizing storage systems
- storing data using isolated storage, when not to use
- code, isolated storage
- isolated storage, options
- data storage using isolated storage, when not to use
- storing data using isolated storage, options
- isolated storage, when not to use
- data storage using isolated storage, options
- isolation
ms.assetid: aff939d7-9e49-46f2-a8cd-938d3020e94e
ms.openlocfilehash: 3699edda6cce24adb8e932d6e8b8a0a5bb977142
ms.sourcegitcommit: 74d05613d6c57106f83f82ce8ee71176874ea3f0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/03/2020
ms.locfileid: "93282031"
---
# <a name="isolated-storage"></a><span data-ttu-id="281ab-103">Изолированное хранилище</span><span class="sxs-lookup"><span data-stu-id="281ab-103">Isolated storage</span></span>

<span data-ttu-id="281ab-104">Если речь идет о классических приложениях, изолированное хранилище — это механизм хранения данных, обеспечивающий изоляцию и безопасность путем определения стандартизованных способов сопоставления кода с сохраненными данными.</span><span class="sxs-lookup"><span data-stu-id="281ab-104">For desktop apps, isolated storage is a data storage mechanism that provides isolation and safety by defining standardized ways of associating code with saved data.</span></span> <span data-ttu-id="281ab-105">Стандартизация также имеет и другие преимущества.</span><span class="sxs-lookup"><span data-stu-id="281ab-105">Standardization provides other benefits as well.</span></span> <span data-ttu-id="281ab-106">Администраторы могут использовать инструменты управления изолированным хранением для конфигурирования пространства хранения файлов, установки политики безопасности и удаления неиспользуемых данных.</span><span class="sxs-lookup"><span data-stu-id="281ab-106">Administrators can use tools designed to manipulate isolated storage to configure file storage space, set security policies, and delete unused data.</span></span> <span data-ttu-id="281ab-107">При изолированном хранении нет необходимости указывать уникальные пути для безопасного размещения кода в файловой системе, и данные защищены от других приложений, имеющих доступ только к изолированному хранению.</span><span class="sxs-lookup"><span data-stu-id="281ab-107">With isolated storage, your code no longer needs unique paths to specify safe locations in the file system, and data is protected from other applications that only have isolated storage access.</span></span> <span data-ttu-id="281ab-108">Нет необходимости в аппаратно закодированной информации, указывающей место размещения области хранения данных приложения.</span><span class="sxs-lookup"><span data-stu-id="281ab-108">Hard-coded information that indicates where an application's storage area is located is unnecessary.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="281ab-109">Изолированное хранилище недоступно для приложений Магазина Windows 8.x.</span><span class="sxs-lookup"><span data-stu-id="281ab-109">Isolated storage is not available for Windows 8.x Store apps.</span></span> <span data-ttu-id="281ab-110">Вместо этого используйте классы данных приложений в пространствах имен `Windows.Storage`, включенных в API среды выполнения Windows для хранения локальных данных и файлов.</span><span class="sxs-lookup"><span data-stu-id="281ab-110">Instead, use the application data classes in the `Windows.Storage` namespaces included in the Windows Runtime API to store local data and files.</span></span> <span data-ttu-id="281ab-111">Дополнительные сведения см. в статье [Доступ к данным приложения](/previous-versions/windows/apps/hh464917(v=win.10)) в Центре разработки для Windows.</span><span class="sxs-lookup"><span data-stu-id="281ab-111">For more information, see [Application data](/previous-versions/windows/apps/hh464917(v=win.10)) in the Windows Dev Center.</span></span>

<a name="data_compartments_and_stores"></a>

## <a name="data-compartments-and-stores"></a><span data-ttu-id="281ab-112">Секции данных и хранилища</span><span class="sxs-lookup"><span data-stu-id="281ab-112">Data Compartments and Stores</span></span>

<span data-ttu-id="281ab-113">Когда приложение сохраняет данные в файле, выбирать имя файла и место его хранения следует так, чтобы минимизировать вероятность того, что место хранения данных будет доступно другим приложениям и, следовательно, станет уязвимым к повреждению.</span><span class="sxs-lookup"><span data-stu-id="281ab-113">When an application stores data in a file, the file name and storage location must be carefully chosen to minimize the possibility that the storage location will be known to another application and, therefore, vulnerable to corruption.</span></span> <span data-ttu-id="281ab-114">В отсутствие стандартной системы для решения подобных проблем импровизированная разработка средств минимизации конфликтов хранения может стать чрезмерно сложной, а ее результаты — ненадежными.</span><span class="sxs-lookup"><span data-stu-id="281ab-114">Without a standard system in place to manage these problems, improvising techniques that minimize storage conflicts can be complex, and the results can be unreliable.</span></span>

<span data-ttu-id="281ab-115">В изолированном хранилище данные всегда изолированы по пользователю или сборке.</span><span class="sxs-lookup"><span data-stu-id="281ab-115">With isolated storage, data is always isolated by user and by assembly.</span></span> <span data-ttu-id="281ab-116">Сборка идентифицируется учетными данными, такими как источник или строгое имя.</span><span class="sxs-lookup"><span data-stu-id="281ab-116">Credentials such as the origin or the strong name of the assembly determine assembly identity.</span></span> <span data-ttu-id="281ab-117">Данные также могут быть изолированы по домену приложения при помощи подобных учетных данных.</span><span class="sxs-lookup"><span data-stu-id="281ab-117">Data can also be isolated by application domain, using similar credentials.</span></span>

<span data-ttu-id="281ab-118">В изолированном хранилище приложение сохраняет данные в уникальной ячейке данных, привязанной к одному из аспектов, идентифицирующих код, например к издателю или подписи.</span><span class="sxs-lookup"><span data-stu-id="281ab-118">When you use isolated storage, your application saves data to a unique data compartment that is associated with some aspect of the code's identity, such as its publisher or signature.</span></span> <span data-ttu-id="281ab-119">Ячейка данных — это абстракция, а не определенное место хранения. Она состоит из одного или нескольких файлов для изолированного хранения, называемых хранилищами, которые содержат действительные адреса каталогов, в которых хранятся данные.</span><span class="sxs-lookup"><span data-stu-id="281ab-119">The data compartment is an abstraction, not a specific storage location; it consists of one or more isolated storage files, called stores, which contain the actual directory locations where data is stored.</span></span> <span data-ttu-id="281ab-120">Например, приложение может иметь связанную с ним ячейку данных, а действительное хранение данных для этого приложения может осуществляться в каталоге файловой системы.</span><span class="sxs-lookup"><span data-stu-id="281ab-120">For example, an application might have a data compartment associated with it, and a directory in the file system would implement the store that actually preserves the data for that application.</span></span> <span data-ttu-id="281ab-121">Данные, сохраняемые в хранилище, могут быть любого типа, от информации о пользовательских настройках до состояния приложения.</span><span class="sxs-lookup"><span data-stu-id="281ab-121">The data saved in the store can be any kind of data, from user preference information to application state.</span></span> <span data-ttu-id="281ab-122">Для разработчика расположение ячейки данных является прозрачным.</span><span class="sxs-lookup"><span data-stu-id="281ab-122">For the developer, the location of the data compartment is transparent.</span></span> <span data-ttu-id="281ab-123">Хранилища обычно находятся на клиенте, но серверное приложение может использовать изолированные хранилища для информации путем олицетворения пользователя, от лица которого оно действует.</span><span class="sxs-lookup"><span data-stu-id="281ab-123">Stores usually reside on the client, but a server application could use isolated stores to store information by impersonating the user on whose behalf it is functioning.</span></span> <span data-ttu-id="281ab-124">В изолированном хранилище информация также может храниться на сервере с перемещаемым профилем пользователя, что обеспечивает ее перемещение вместе с пользователем.</span><span class="sxs-lookup"><span data-stu-id="281ab-124">Isolated storage can also store information on a server with a user's roaming profile so that the information will travel with the roaming user.</span></span>

<a name="quotas"></a>

## <a name="quotas-for-isolated-storage"></a><span data-ttu-id="281ab-125">Квоты для изолированного хранилища</span><span class="sxs-lookup"><span data-stu-id="281ab-125">Quotas for Isolated Storage</span></span>

<span data-ttu-id="281ab-126">Квота — это ограничение доступного для использования объема изолированного хранилища.</span><span class="sxs-lookup"><span data-stu-id="281ab-126">A quota is a limit on the amount of isolated storage that can be used.</span></span> <span data-ttu-id="281ab-127">Квота учитывает байты файлового пространства, а также служебные данные, связанные с каталогом и другой информацией в хранилище.</span><span class="sxs-lookup"><span data-stu-id="281ab-127">The quota includes bytes of file space as well as the overhead associated with the directory and other information in the store.</span></span> <span data-ttu-id="281ab-128">Изолированное хранилище использует квоты разрешения, которые представляют собой допустимые пределы хранения, устанавливаемые посредством объектов <xref:System.Security.Permissions.IsolatedStoragePermission> .</span><span class="sxs-lookup"><span data-stu-id="281ab-128">Isolated storage uses permission quotas, which are storage limits that are set by using <xref:System.Security.Permissions.IsolatedStoragePermission> objects.</span></span> <span data-ttu-id="281ab-129">При попытке записать данные в превышение квоты возникает исключение <xref:System.IO.IsolatedStorage.IsolatedStorageException> .</span><span class="sxs-lookup"><span data-stu-id="281ab-129">If you try to write data that exceeds the quota, an <xref:System.IO.IsolatedStorage.IsolatedStorageException> exception is thrown.</span></span>  <span data-ttu-id="281ab-130">Какие разрешения даются коду, определяет политика безопасности, которую можно менять с помощью средства настройки .NET Framework (Mscorcfg.msc).</span><span class="sxs-lookup"><span data-stu-id="281ab-130">Security policy, which can be modified using the .NET Framework Configuration Tool (Mscorcfg.msc), determines which permissions are granted to code.</span></span> <span data-ttu-id="281ab-131">Для кода, которому предоставлено разрешение <xref:System.Security.Permissions.IsolatedStoragePermission> , выделяется хранилище, максимальный размер которого определяется свойством <xref:System.Security.Permissions.IsolatedStoragePermission.UserQuota%2A> .</span><span class="sxs-lookup"><span data-stu-id="281ab-131">Code that has been granted <xref:System.Security.Permissions.IsolatedStoragePermission> is restricted to using no more storage than the <xref:System.Security.Permissions.IsolatedStoragePermission.UserQuota%2A> property allows.</span></span> <span data-ttu-id="281ab-132">Тем не менее, поскольку код может обходить квоты разрешения, используя различные удостоверения пользователя, эти квоты в большей степени имеют характер рекомендаций по работе кода, нежели выступают в роли строгих ограничений.</span><span class="sxs-lookup"><span data-stu-id="281ab-132">However, because code can bypass permission quotas by presenting different user identities, permission quotas serve as guidelines for how code should behave rather than as a firm limit on code behavior.</span></span>

<span data-ttu-id="281ab-133">К перемещаемым хранилищам квоты не применяются.</span><span class="sxs-lookup"><span data-stu-id="281ab-133">Quotas are not enforced on roaming stores.</span></span> <span data-ttu-id="281ab-134">По этой причине для их использования код должен располагать разрешениями несколько более высокого уровня.</span><span class="sxs-lookup"><span data-stu-id="281ab-134">Because of this, a slightly higher level of permission is required for code to use them.</span></span> <span data-ttu-id="281ab-135">Значения перечисления <xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByRoamingUser> и <xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByRoamingUser> определяют разрешение на использование изолированного хранилища для перемещаемого профиля пользователя.</span><span class="sxs-lookup"><span data-stu-id="281ab-135">The enumeration values <xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByRoamingUser> and <xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByRoamingUser> specify a permission to use isolated storage for a roaming user.</span></span>

<a name="secure_access"></a>

## <a name="secure-access"></a><span data-ttu-id="281ab-136">Безопасный доступ</span><span class="sxs-lookup"><span data-stu-id="281ab-136">Secure Access</span></span>

<span data-ttu-id="281ab-137">Использование изолированного хранения позволяет частично доверенным приложениям сохранять данные под контролем политики безопасности компьютера.</span><span class="sxs-lookup"><span data-stu-id="281ab-137">Using isolated storage enables partially trusted applications to store data in a manner that is controlled by the computer's security policy.</span></span> <span data-ttu-id="281ab-138">Это особенно удобно при работе с загружаемыми компонентами, которые не вызывают у пользователя полного доверия.</span><span class="sxs-lookup"><span data-stu-id="281ab-138">This is especially useful for downloaded components that a user might want to run cautiously.</span></span> <span data-ttu-id="281ab-139">Политика безопасности редко предоставляет такому коду право доступа к файловой системе с использованием стандартных механизмов ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="281ab-139">Security policy rarely grants this kind of code permission when you access the file system by using standard I/O mechanisms.</span></span> <span data-ttu-id="281ab-140">Однако по умолчанию код, запускаемый с локального компьютера, из локальной или глобальной сети получает право на использование изолированного хранилища.</span><span class="sxs-lookup"><span data-stu-id="281ab-140">However, by default, code running from the local computer, a local network, or the Internet is granted the right to use isolated storage.</span></span>

<span data-ttu-id="281ab-141">Администраторы могут ограничивать размеры изолированного хранилища, доступного приложению или пользователю, в зависимости от соответствующего уровня доверия.</span><span class="sxs-lookup"><span data-stu-id="281ab-141">Administrators can limit how much isolated storage an application or a user has available, based on an appropriate trust level.</span></span> <span data-ttu-id="281ab-142">Кроме того, администраторы могут удалить все хранящиеся данные.</span><span class="sxs-lookup"><span data-stu-id="281ab-142">In addition, administrators can remove a user's persisted data completely.</span></span> <span data-ttu-id="281ab-143">Чтобы создать изолированное хранилище или получить доступ к нему, коду необходимо предоставить соответствующее разрешение <xref:System.Security.Permissions.IsolatedStorageFilePermission> .</span><span class="sxs-lookup"><span data-stu-id="281ab-143">To create or access isolated storage, code must be granted the appropriate <xref:System.Security.Permissions.IsolatedStorageFilePermission> permission.</span></span>

<span data-ttu-id="281ab-144">Для доступа к изолированному хранилищу коду должны быть назначены все необходимые права операционной системы собственной платформы.</span><span class="sxs-lookup"><span data-stu-id="281ab-144">To access isolated storage, code must have all necessary native platform operating system rights.</span></span> <span data-ttu-id="281ab-145">Должны быть выполнены требования списков управления доступом, которые определяют, какие пользователи имеют права на пользование файловой системой.</span><span class="sxs-lookup"><span data-stu-id="281ab-145">The access control lists (ACLs) that control which users have the rights to use the file system must be satisfied.</span></span> <span data-ttu-id="281ab-146">Приложения .NET по умолчанию имеют права доступа к изолированному хранилищу на уровне операционной системы, если только они не выполняют олицетворение (специфическое для платформы).</span><span class="sxs-lookup"><span data-stu-id="281ab-146">.NET applications already have operating system rights to access isolated storage unless they perform (platform-specific) impersonation.</span></span> <span data-ttu-id="281ab-147">В таком случае ответственность за обеспечение наличия у олицетворяемого пользователя прав, необходимых для доступа к изолированному хранилищу, несет приложение.</span><span class="sxs-lookup"><span data-stu-id="281ab-147">In this case, the application is responsible for ensuring that the impersonated user identity has the proper operating system rights to access isolated storage.</span></span> <span data-ttu-id="281ab-148">Такой доступ позволяет коду, запускаемому или загружаемому через Интернет, выполнять чтение и запись в области хранения, относящейся к конкретному пользователю.</span><span class="sxs-lookup"><span data-stu-id="281ab-148">This access provides a convenient way for code that is run or downloaded from the web to read and write to a storage area related to a particular user.</span></span>

<span data-ttu-id="281ab-149">Для управления доступом к изолированному хранилищу среда CLR использует объекты <xref:System.Security.Permissions.IsolatedStorageFilePermission> .</span><span class="sxs-lookup"><span data-stu-id="281ab-149">To control access to isolated storage, the common language runtime uses <xref:System.Security.Permissions.IsolatedStorageFilePermission> objects.</span></span> <span data-ttu-id="281ab-150">Каждый объект имеет свойства, которые определяют следующие значения:</span><span class="sxs-lookup"><span data-stu-id="281ab-150">Each object has properties that specify the following values:</span></span>

- <span data-ttu-id="281ab-151">Разрешенное использование, которое указывает тип разрешенного доступа.</span><span class="sxs-lookup"><span data-stu-id="281ab-151">Allowed usage, which indicates the type of access that is allowed.</span></span> <span data-ttu-id="281ab-152">Значения являются членами перечисления <xref:System.Security.Permissions.IsolatedStorageContainment> .</span><span class="sxs-lookup"><span data-stu-id="281ab-152">The values are members of the <xref:System.Security.Permissions.IsolatedStorageContainment> enumeration.</span></span> <span data-ttu-id="281ab-153">Дополнительные сведения об этих значениях см. в таблице в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="281ab-153">For more information about these values, see the table in the next section.</span></span>

- <span data-ttu-id="281ab-154">Квота хранилища, описанная в предыдущем разделе.</span><span class="sxs-lookup"><span data-stu-id="281ab-154">Storage quota, as discussed in the preceding section.</span></span>

<span data-ttu-id="281ab-155">Среда выполнения требует разрешения <xref:System.Security.Permissions.IsolatedStorageFilePermission> при первой попытке открыть хранилище.</span><span class="sxs-lookup"><span data-stu-id="281ab-155">The runtime demands <xref:System.Security.Permissions.IsolatedStorageFilePermission> permission when code first attempts to open a store.</span></span> <span data-ttu-id="281ab-156">Решение о предоставлении этого разрешения определяется с учетом надежности кода.</span><span class="sxs-lookup"><span data-stu-id="281ab-156">It decides whether to grant this permission, based on how much the code is trusted.</span></span> <span data-ttu-id="281ab-157">Если разрешение выдается, значения квоты использования и хранилища определяются политикой безопасности и запросом кода на получение разрешения <xref:System.Security.Permissions.IsolatedStorageFilePermission>.</span><span class="sxs-lookup"><span data-stu-id="281ab-157">If the permission is granted, the allowed usage and storage quota values are determined by security policy and by the code's request for <xref:System.Security.Permissions.IsolatedStorageFilePermission>.</span></span> <span data-ttu-id="281ab-158">Политика безопасности задается с помощью средства настройки .NET Framework (Mscorcfg.msc).</span><span class="sxs-lookup"><span data-stu-id="281ab-158">Security policy is set by using the .NET Framework Configuration Tool (Mscorcfg.msc).</span></span> <span data-ttu-id="281ab-159">Все вызывающие программы в стеке вызовов проверяются на наличие по меньшей мере одного соответствующего разрешения на использования.</span><span class="sxs-lookup"><span data-stu-id="281ab-159">All callers in the call stack are checked to ensure that each caller has at least the appropriate allowed usage.</span></span> <span data-ttu-id="281ab-160">Среда выполнения также проверяет наличие квоты у кода, открывшего или создавшего хранилище, в которое записывается файл.</span><span class="sxs-lookup"><span data-stu-id="281ab-160">The runtime also checks the quota imposed on the code that opened or created the store in which the file is to be saved.</span></span> <span data-ttu-id="281ab-161">Если все эти условия выполнены, то выдается разрешение.</span><span class="sxs-lookup"><span data-stu-id="281ab-161">If these conditions are satisfied, permission is granted.</span></span> <span data-ttu-id="281ab-162">Квота проверяется каждый раз при записи файла в хранилище.</span><span class="sxs-lookup"><span data-stu-id="281ab-162">The quota is checked again every time a file is written to the store.</span></span>

<span data-ttu-id="281ab-163">Коду приложения не нужно запрашивать разрешение, поскольку среда CLR выдаст соответствующее разрешение <xref:System.Security.Permissions.IsolatedStorageFilePermission> , исходя из политики безопасности.</span><span class="sxs-lookup"><span data-stu-id="281ab-163">Application code is not required to request permission because the common language runtime will grant whatever <xref:System.Security.Permissions.IsolatedStorageFilePermission> is appropriate based on security policy.</span></span> <span data-ttu-id="281ab-164">Однако имеет смысл запрашивать определенные разрешения для своего приложения, включая <xref:System.Security.Permissions.IsolatedStorageFilePermission>.</span><span class="sxs-lookup"><span data-stu-id="281ab-164">However, there are good reasons to request specific permissions that your application needs, including <xref:System.Security.Permissions.IsolatedStorageFilePermission>.</span></span>

<a name="allowed_usage"></a>

## <a name="allowed-usage-and-security-risks"></a><span data-ttu-id="281ab-165">Разрешенное использование и угрозы безопасности</span><span class="sxs-lookup"><span data-stu-id="281ab-165">Allowed Usage and Security Risks</span></span>

<span data-ttu-id="281ab-166">Разрешенное использование, заданное при помощи <xref:System.Security.Permissions.IsolatedStorageFilePermission> , определяет степень, в которой коду разрешено создавать и использовать изолированное хранилище.</span><span class="sxs-lookup"><span data-stu-id="281ab-166">The allowed usage specified by <xref:System.Security.Permissions.IsolatedStorageFilePermission> determines the degree to which code will be allowed to create and use isolated storage.</span></span> <span data-ttu-id="281ab-167">В следующей таблице приведено соответствие между разрешенным использованием и типами изоляции, а также кратко описаны риски безопасности, связанные с каждым из видов разрешенного использования.</span><span class="sxs-lookup"><span data-stu-id="281ab-167">The following table shows how the allowed usage specified in the permission corresponds to types of isolation and summarizes the security risks associated with each allowed usage.</span></span>

|<span data-ttu-id="281ab-168">Разрешенное использование</span><span class="sxs-lookup"><span data-stu-id="281ab-168">Allowed usage</span></span>|<span data-ttu-id="281ab-169">Типы изоляции</span><span class="sxs-lookup"><span data-stu-id="281ab-169">Isolation types</span></span>|<span data-ttu-id="281ab-170">Риски безопасности</span><span class="sxs-lookup"><span data-stu-id="281ab-170">Security impact</span></span>|
|-------------------|---------------------|---------------------|
|<xref:System.Security.Permissions.IsolatedStorageContainment.None>|<span data-ttu-id="281ab-171">Нет разрешения на изолированное хранилище.</span><span class="sxs-lookup"><span data-stu-id="281ab-171">No isolated storage use is allowed.</span></span>|<span data-ttu-id="281ab-172">Влияния на безопасность нет.</span><span class="sxs-lookup"><span data-stu-id="281ab-172">There is no security impact.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByUser>|<span data-ttu-id="281ab-173">Изоляция по пользователям, доменам и сборкам.</span><span class="sxs-lookup"><span data-stu-id="281ab-173">Isolation by user, domain, and assembly.</span></span> <span data-ttu-id="281ab-174">Каждая сборка имеет отдельное вложенное хранилище внутри домена.</span><span class="sxs-lookup"><span data-stu-id="281ab-174">Each assembly has a separate substore within the domain.</span></span> <span data-ttu-id="281ab-175">Хранилища, использующие это разрешение, также неявно изолируются компьютером.</span><span class="sxs-lookup"><span data-stu-id="281ab-175">Stores that use this permission are also implicitly isolated by computer.</span></span>|<span data-ttu-id="281ab-176">Этот уровень разрешения оставляет возможность несанкционированного чрезмерного использования ресурсов, хотя применение квот делает это затруднительным.</span><span class="sxs-lookup"><span data-stu-id="281ab-176">This permission level leaves resources open to unauthorized overuse, although enforced quotas make it more difficult.</span></span> <span data-ttu-id="281ab-177">Этот процесс называется атакой типа "отказ в обслуживании".</span><span class="sxs-lookup"><span data-stu-id="281ab-177">This is called a denial of service attack.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByRoamingUser>|<span data-ttu-id="281ab-178">То же, что и `DomainIsolationByUser`, однако хранилище сохраняется в перемещаемое расположение, если применяются перемещаемые профили пользователей и не применяются квоты.</span><span class="sxs-lookup"><span data-stu-id="281ab-178">Same as `DomainIsolationByUser`, but store is saved to a location that will roam if roaming user profiles are enabled and quotas are not enforced.</span></span>|<span data-ttu-id="281ab-179">Поскольку квоты приходится отключать, то ресурсы хранения более уязвимы к атаке типа "отказ в обслуживании".</span><span class="sxs-lookup"><span data-stu-id="281ab-179">Because quotas must be disabled, storage resources are more vulnerable to a denial of service attack.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByUser>|<span data-ttu-id="281ab-180">Изоляция по пользователям и сборкам.</span><span class="sxs-lookup"><span data-stu-id="281ab-180">Isolation by user and assembly.</span></span> <span data-ttu-id="281ab-181">Хранилища, использующие это разрешение, также неявно изолируются компьютером.</span><span class="sxs-lookup"><span data-stu-id="281ab-181">Stores that use this permission are also implicitly isolated by computer.</span></span>|<span data-ttu-id="281ab-182">На этом уровне применяются квоты для предотвращения атак типа "отказ в обслуживании".</span><span class="sxs-lookup"><span data-stu-id="281ab-182">Quotas are enforced at this level to help prevent a denial of service attack.</span></span> <span data-ttu-id="281ab-183">Та же сборка в другом домене может иметь доступ к хранилищу, что может привести к утечке информации между приложениями.</span><span class="sxs-lookup"><span data-stu-id="281ab-183">The same assembly in another domain can access this store, opening the possibility that information could be leaked between applications.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByRoamingUser>|<span data-ttu-id="281ab-184">То же, что и `AssemblyIsolationByUser`, однако хранилище сохраняется в перемещаемое расположение, если применяются перемещаемые профили пользователей и не применяются квоты.</span><span class="sxs-lookup"><span data-stu-id="281ab-184">Same as `AssemblyIsolationByUser`, but store is saved to a location that will roam if roaming user profiles are enabled and quotas are not enforced.</span></span>|<span data-ttu-id="281ab-185">То же, что и `AssemblyIsolationByUser`, но без квот; риск атак типа "отказ в обслуживании" возрастает.</span><span class="sxs-lookup"><span data-stu-id="281ab-185">Same as in `AssemblyIsolationByUser`, but without quotas, the risk of a denial of service attack increases.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.AdministerIsolatedStorageByUser>|<span data-ttu-id="281ab-186">Изоляция по пользователям.</span><span class="sxs-lookup"><span data-stu-id="281ab-186">Isolation by user.</span></span> <span data-ttu-id="281ab-187">Обычно этот уровень разрешения используют только средства администрирования или отладки.</span><span class="sxs-lookup"><span data-stu-id="281ab-187">Typically, only administrative or debugging tools use this level of permission.</span></span>|<span data-ttu-id="281ab-188">Доступ с этим уровнем разрешения позволяет коду просматривать или удалять любые файлы и каталоги изолированного хранилища пользователя (независимо от изоляции сборки).</span><span class="sxs-lookup"><span data-stu-id="281ab-188">Access with this permission allows code to view or delete any of a user's isolated storage files or directories (regardless of assembly isolation).</span></span> <span data-ttu-id="281ab-189">Риски, помимо прочего, включают утечку информации и потерю данных.</span><span class="sxs-lookup"><span data-stu-id="281ab-189">Risks include, but are not limited to, leaking information and data loss.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.UnrestrictedIsolatedStorage>|<span data-ttu-id="281ab-190">Изоляция по всем пользователям, доменам и сборкам.</span><span class="sxs-lookup"><span data-stu-id="281ab-190">Isolation by all users, domains, and assemblies.</span></span> <span data-ttu-id="281ab-191">Обычно этот уровень разрешения используют только средства администрирования или отладки.</span><span class="sxs-lookup"><span data-stu-id="281ab-191">Typically, only administrative or debugging tools use this level of permission.</span></span>|<span data-ttu-id="281ab-192">Это разрешение может привести к потере защищенной информации всех изолированных хранилищ для всех пользователей.</span><span class="sxs-lookup"><span data-stu-id="281ab-192">This permission creates the potential for a total compromise of all isolated stores for all users.</span></span>|

## <a name="safety-of-isolated-storage-components-with-regard-to-untrusted-data"></a><span data-ttu-id="281ab-193">Безопасность компонентов изолированного хранилища по отношению к ненадежным данным</span><span class="sxs-lookup"><span data-stu-id="281ab-193">Safety of isolated storage components with regard to untrusted data</span></span>

<span data-ttu-id="281ab-194">__Этот раздел применяется к следующим платформам.__</span><span class="sxs-lookup"><span data-stu-id="281ab-194">__This section applies to the following frameworks:__</span></span>

- <span data-ttu-id="281ab-195">.NET Framework (все версии)</span><span class="sxs-lookup"><span data-stu-id="281ab-195">.NET Framework (all versions)</span></span>
- <span data-ttu-id="281ab-196">.NET Core 2.1+</span><span class="sxs-lookup"><span data-stu-id="281ab-196">.NET Core 2.1+</span></span>
- <span data-ttu-id="281ab-197">.NET 5.0+</span><span class="sxs-lookup"><span data-stu-id="281ab-197">.NET 5.0+</span></span>

<span data-ttu-id="281ab-198">.NET Framework и .NET Core предлагают изолированное хранилище в качестве механизма сохранения данных для пользователя, приложения или компонента.</span><span class="sxs-lookup"><span data-stu-id="281ab-198">.NET Framework and .NET Core offer isolated storage as a mechanism to persist data for a user, an application, or a component.</span></span> <span data-ttu-id="281ab-199">Это устаревший компонент, изначально разрабатывавшийся для сценариев управления доступом для кода, которые сейчас объявлены нерекомендуемыми.</span><span class="sxs-lookup"><span data-stu-id="281ab-199">This is a legacy component primarily designed for now-deprecated Code Access Security scenarios.</span></span>

<span data-ttu-id="281ab-200">Для считывания данных через границы доверия можно использовать различные средства и интерфейсы API изолированного хранилища.</span><span class="sxs-lookup"><span data-stu-id="281ab-200">Various isolated storage APIs and tools can be used to read data across trust boundaries.</span></span> <span data-ttu-id="281ab-201">Например, считывание данных из области на уровне компьютера может агрегировать данные из других, возможно, менее доверенных учетных записей пользователей на компьютере.</span><span class="sxs-lookup"><span data-stu-id="281ab-201">For example, reading data from a machine-wide scope can aggregate data from other, possibly less-trusted user accounts on the machine.</span></span> <span data-ttu-id="281ab-202">Компоненты или приложения, которые считывают данные из областей изолированного хранилища на уровне компьютера, должны быть осведомлены о последствиях такого считывания.</span><span class="sxs-lookup"><span data-stu-id="281ab-202">Components or applications that read from machine-wide isolated storage scopes should be aware of the consequences of reading this data.</span></span>

### <a name="security-sensitive-apis-that-can-read-from-the-machine-wide-scope"></a><span data-ttu-id="281ab-203">Чувствительные к безопасности API, которые могут считывать данные из области на уровне компьютера</span><span class="sxs-lookup"><span data-stu-id="281ab-203">Security-sensitive APIs that can read from the machine-wide scope</span></span>

<span data-ttu-id="281ab-204">Компоненты или приложения, вызывающие любой из следующих интерфейсов API, считывают данные из области на уровне компьютера.</span><span class="sxs-lookup"><span data-stu-id="281ab-204">Components or applications that call any of the following APIs read from the machine-wide scope:</span></span>

* <span data-ttu-id="281ab-205">[IsolatedStorageFile.GetEnumerator](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getenumerator) с передачей области, включающей флаг IsolatedStorageScope.Machine</span><span class="sxs-lookup"><span data-stu-id="281ab-205">[IsolatedStorageFile.GetEnumerator](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getenumerator), passing a scope that includes the IsolatedStorageScope.Machine flag</span></span>
* [<span data-ttu-id="281ab-206">IsolatedStorageFile.GetMachineStoreForApplication</span><span class="sxs-lookup"><span data-stu-id="281ab-206">IsolatedStorageFile.GetMachineStoreForApplication</span></span>](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getmachinestoreforapplication)
* [<span data-ttu-id="281ab-207">IsolatedStorageFile.GetMachineStoreForAssembly</span><span class="sxs-lookup"><span data-stu-id="281ab-207">IsolatedStorageFile.GetMachineStoreForAssembly</span></span>](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getmachinestoreforassembly)
* [<span data-ttu-id="281ab-208">IsolatedStorageFile.GetMachineStoreForDomain</span><span class="sxs-lookup"><span data-stu-id="281ab-208">IsolatedStorageFile.GetMachineStoreForDomain</span></span>](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getmachinestorefordomain)
* <span data-ttu-id="281ab-209">[IsolatedStorageFile.GetStore](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getstore) с передачей области, включающей флаг IsolatedStorageScope.Machine</span><span class="sxs-lookup"><span data-stu-id="281ab-209">[IsolatedStorageFile.GetStore](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getstore), passing a scope that includes the IsolatedStorageScope.Machine flag</span></span>
* <span data-ttu-id="281ab-210">[IsolatedStorageFile.Remove](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.remove) с передачей области, включающей флаг `IsolatedStorageScope.Machine`</span><span class="sxs-lookup"><span data-stu-id="281ab-210">[IsolatedStorageFile.Remove](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.remove), passing a scope that includes the `IsolatedStorageScope.Machine` flag</span></span>

<span data-ttu-id="281ab-211">[Средство изолированного хранилища](../../framework/tools/storeadm-exe-isolated-storage-tool.md) `storeadm.exe` используется при вызове с параметром `/machine`, как показано в следующем коде.</span><span class="sxs-lookup"><span data-stu-id="281ab-211">The [isolated storage tool](../../framework/tools/storeadm-exe-isolated-storage-tool.md) `storeadm.exe` is impacted if called with the `/machine` switch, as shown in the following code:</span></span>

```txt
storeadm.exe /machine [any-other-switches]
```

<span data-ttu-id="281ab-212">Это средство изолированного хранилища предоставляется в составе Visual Studio и пакета SDK для .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="281ab-212">The isolated storage tool is provided as part of Visual Studio and the .NET Framework SDK.</span></span>

<span data-ttu-id="281ab-213">Если приложение не связано с вызовами предыдущих API или если рабочий процесс не подразумевает вызов `storeadm.exe` подобным образом, этот документ не применяется.</span><span class="sxs-lookup"><span data-stu-id="281ab-213">If the application doesn't involve calls to the preceding APIs, or if the workflow doesn't involve calling `storeadm.exe` in this manner, this document doesn't apply.</span></span>

### <a name="impact-in-multi-user-environments"></a><span data-ttu-id="281ab-214">Влияние в многопользовательских средах</span><span class="sxs-lookup"><span data-stu-id="281ab-214">Impact in multi-user environments</span></span>

<span data-ttu-id="281ab-215">Как упоминалось ранее, влияние этих API на безопасность связано с тем, что данные, записанные из одной среды доверия, считываются из другой среды доверия.</span><span class="sxs-lookup"><span data-stu-id="281ab-215">As mentioned previously, the security impact from these APIs results from data written from one trust environment is read from a different trust environment.</span></span> <span data-ttu-id="281ab-216">Изолированное хранилище обычно использует для чтения и записи данных одно из трех расположений.</span><span class="sxs-lookup"><span data-stu-id="281ab-216">Isolated storage generally uses one of three locations to read and write data:</span></span>

1. <span data-ttu-id="281ab-217">`%LOCALAPPDATA%\IsolatedStorage\`. Например, `C:\Users\<username>\AppData\Local\IsolatedStorage\` для области `User`.</span><span class="sxs-lookup"><span data-stu-id="281ab-217">`%LOCALAPPDATA%\IsolatedStorage\`: For example, `C:\Users\<username>\AppData\Local\IsolatedStorage\`, for `User` scope.</span></span>
2. <span data-ttu-id="281ab-218">`%APPDATA%\IsolatedStorage\`. Например, `C:\Users\<username>\AppData\Roaming\IsolatedStorage\` для области `User|Roaming`.</span><span class="sxs-lookup"><span data-stu-id="281ab-218">`%APPDATA%\IsolatedStorage\`: For example, `C:\Users\<username>\AppData\Roaming\IsolatedStorage\`, for `User|Roaming` scope.</span></span>
3. <span data-ttu-id="281ab-219">`%PROGRAMDATA%\IsolatedStorage\`. Например, `C:\ProgramData\IsolatedStorage\` для области `Machine`.</span><span class="sxs-lookup"><span data-stu-id="281ab-219">`%PROGRAMDATA%\IsolatedStorage\`: For example, `C:\ProgramData\IsolatedStorage\`, for `Machine` scope.</span></span>

<span data-ttu-id="281ab-220">Два первых расположения изолированы для каждого пользователя.</span><span class="sxs-lookup"><span data-stu-id="281ab-220">The first two locations are isolated per-user.</span></span> <span data-ttu-id="281ab-221">Windows гарантирует, что разные учетные записи пользователей на одном компьютере не смогут получить доступ к папкам профиля других пользователей.</span><span class="sxs-lookup"><span data-stu-id="281ab-221">Windows ensures that different user accounts on the same machine cannot access each other's user profile folders.</span></span> <span data-ttu-id="281ab-222">Две разные учетные записи пользователей, использующие хранилища `User` или `User|Roaming`, не будут видеть данные друг друга и не смогут повлиять на них.</span><span class="sxs-lookup"><span data-stu-id="281ab-222">Two different user accounts who use the `User` or `User|Roaming` stores will not see each other's data and cannot interfere with each other's data.</span></span>

<span data-ttu-id="281ab-223">Третье расположение является общим для всех учетных записей пользователей на компьютере.</span><span class="sxs-lookup"><span data-stu-id="281ab-223">The third location is shared across all user accounts on the machine.</span></span> <span data-ttu-id="281ab-224">Различные учетные записи могут считывать данные из этого расположения и записывать их в него, а также просматривать данные друг друга.</span><span class="sxs-lookup"><span data-stu-id="281ab-224">Different accounts can read from and write to this location, and they're able to see each other's data.</span></span>

<span data-ttu-id="281ab-225">Указанные выше пути могут отличаться в зависимости от используемой версии Windows.</span><span class="sxs-lookup"><span data-stu-id="281ab-225">The preceding paths may differ based on the version of Windows in use.</span></span>

<span data-ttu-id="281ab-226">Теперь давайте рассмотрим многопользовательскую систему с двумя зарегистрированными пользователями — _Мэллори_ и _Бобом_.</span><span class="sxs-lookup"><span data-stu-id="281ab-226">Now consider a multi-user system with two registered users _Mallory_ and _Bob_.</span></span> <span data-ttu-id="281ab-227">Мэллори имеет доступ к своему каталогу профиля пользователя `C:\Users\Mallory\` и может получить доступ к общему расположению хранилища на уровне компьютера `C:\ProgramData\IsolatedStorage\`.</span><span class="sxs-lookup"><span data-stu-id="281ab-227">Mallory has the ability to access her user profile directory `C:\Users\Mallory\`, and she can access the shared machine-wide storage location `C:\ProgramData\IsolatedStorage\`.</span></span> <span data-ttu-id="281ab-228">Она не может получить доступ к каталогу профиля пользователя Боба `C:\Users\Bob\`.</span><span class="sxs-lookup"><span data-stu-id="281ab-228">She cannot access Bob's user profile directory `C:\Users\Bob\`.</span></span>

<span data-ttu-id="281ab-229">Если Мэллори захочет атаковать Боба, она может записать данные в расположение хранилища на уровне компьютера, а затем попытаться вынудить Боба выполнить чтение из этого хранилища.</span><span class="sxs-lookup"><span data-stu-id="281ab-229">If Mallory wishes to attack Bob, she might write data to the machine-wide storage location, then attempt to influence Bob into reading from the machine-wide store.</span></span> <span data-ttu-id="281ab-230">Когда Боб запускает считанное из этого хранилища приложение, оно будет работать с данными, помещенными туда Мэллори, но в контексте учетной записи пользователя Боба.</span><span class="sxs-lookup"><span data-stu-id="281ab-230">When Bob runs an app that reads from this store, that app will operate on the data Mallory placed there, but from within the context of Bob's user account.</span></span> <span data-ttu-id="281ab-231">В оставшейся части этого документа описаны различные векторы атаки, а также действия, которые приложения могут предпринимать для снижения риска таких атак.</span><span class="sxs-lookup"><span data-stu-id="281ab-231">The remainder of this document contemplates various attack vectors and what steps apps can do to minimize their risk to these attacks.</span></span>

> [!NOTE]
> <span data-ttu-id="281ab-232">Чтобы произвести подобную атаку, Мэллори потребуется следующее.</span><span class="sxs-lookup"><span data-stu-id="281ab-232">In order for such an attack to take place, Mallory requires:</span></span>
>
> * <span data-ttu-id="281ab-233">Учетная запись пользователя на компьютере.</span><span class="sxs-lookup"><span data-stu-id="281ab-233">A user account on the machine.</span></span>
> * <span data-ttu-id="281ab-234">Возможность поместить файл в известное расположение в файловой системе.</span><span class="sxs-lookup"><span data-stu-id="281ab-234">The ability to place a file into a known location on the file system.</span></span>
> * <span data-ttu-id="281ab-235">Знание того, что в определенный момент Боб запустит приложение, которое попытается считать эти данные.</span><span class="sxs-lookup"><span data-stu-id="281ab-235">Knowledge that Bob will at some point run an app that attempts to read this data.</span></span>
>
> <span data-ttu-id="281ab-236">Это не те векторы угроз, которые применяются к стандартным настольным системам с одним пользователем, таким как домашние компьютеры или однопользовательские корпоративные рабочие станции.</span><span class="sxs-lookup"><span data-stu-id="281ab-236">These are not threat vectors that apply to standard single-user desktop environments like home PCs or single-employee enterprise workstations.</span></span>

#### <a name="elevation-of-privilege"></a><span data-ttu-id="281ab-237">Несанкционированное повышение привилегий</span><span class="sxs-lookup"><span data-stu-id="281ab-237">Elevation of privilege</span></span>

<span data-ttu-id="281ab-238">Атака, основанная на __повышении привилегий__ , происходит, когда приложение Боба считывает файл Мэллори и автоматически пытается предпринять определенные действия на основе содержимого этих полезных данных.</span><span class="sxs-lookup"><span data-stu-id="281ab-238">An __elevation of privilege__ attack occurs when Bob's app reads Mallory's file and automatically tries to take some action based on the contents of that payload.</span></span> <span data-ttu-id="281ab-239">Представьте себе приложение, которое считывает содержимое сценария запуска из хранилища на уровне компьютера и передает эти данные в `Process.Start`.</span><span class="sxs-lookup"><span data-stu-id="281ab-239">Consider an app that reads the contents of a startup script from the machine-wide store and passes those contents to `Process.Start`.</span></span> <span data-ttu-id="281ab-240">Если Мэллори может поместить вредоносный сценарий в хранилище на уровне компьютера, то при запуске Бобом его приложения происходит следующее.</span><span class="sxs-lookup"><span data-stu-id="281ab-240">If Mallory can place a malicious script inside the machine-wide store, when Bob launches his app:</span></span>

* <span data-ttu-id="281ab-241">Его приложение анализирует и запускает вредоносный сценарий Мэллори _в контексте профиля пользователя Боба_.</span><span class="sxs-lookup"><span data-stu-id="281ab-241">His app parses and launches Mallory's malicious script _under the context of Bob's user profile_.</span></span>
* <span data-ttu-id="281ab-242">Мэллори получает доступ к учетной записи Боба на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="281ab-242">Mallory gains access to Bob's account on the local machine.</span></span>

#### <a name="denial-of-service"></a><span data-ttu-id="281ab-243">Отказ в обслуживании</span><span class="sxs-lookup"><span data-stu-id="281ab-243">Denial of service</span></span>

<span data-ttu-id="281ab-244">Атака типа __отказ в обслуживании__ происходит, когда приложение Боба считывает файл Мэллори и аварийно завершает работу либо перестает работать правильно.</span><span class="sxs-lookup"><span data-stu-id="281ab-244">A __denial of service__ attack occurs when Bob's app reads Mallory's file and crashes or otherwise stops functioning correctly.</span></span> <span data-ttu-id="281ab-245">Снова представьте себе приложение, упомянутое ранее, которое пытается проанализировать сценарий запуска из хранилища на уровне компьютера.</span><span class="sxs-lookup"><span data-stu-id="281ab-245">Consider again the app mentioned previously, which attempts to parse a startup script from the machine-wide store.</span></span> <span data-ttu-id="281ab-246">Если Мэллори может поместить файл с некорректным содержимым в хранилище на уровне компьютера, она может:</span><span class="sxs-lookup"><span data-stu-id="281ab-246">If Mallory can place a file with malformed contents inside the machine-wide store, she might:</span></span>

* <span data-ttu-id="281ab-247">заставить приложение Боба вызывать исключение на раннем этапе процедуры запуска;</span><span class="sxs-lookup"><span data-stu-id="281ab-247">Cause Bob's app to throw an exception early in the startup path.</span></span>
* <span data-ttu-id="281ab-248">предотвратить успешный запуск приложения из-за этого исключения.</span><span class="sxs-lookup"><span data-stu-id="281ab-248">Prevent the app from launching successfully because of the exception.</span></span>

<span data-ttu-id="281ab-249">Таким образом, она помешала Бобу запустить приложение под его учетной записью пользователя.</span><span class="sxs-lookup"><span data-stu-id="281ab-249">She has then denied Bob the ability to launch the app under his own user account.</span></span>

#### <a name="information-disclosure"></a><span data-ttu-id="281ab-250">Раскрытие информации</span><span class="sxs-lookup"><span data-stu-id="281ab-250">Information disclosure</span></span>

<span data-ttu-id="281ab-251">Атака, основанная на __раскрытии информации__ , происходит, когда Мэллори может вынудить Боба раскрыть содержимое файла, к которому у Мэллори в общем случае нет доступа.</span><span class="sxs-lookup"><span data-stu-id="281ab-251">An __information disclosure__ attack occurs when Mallory can trick Bob into disclosing the contents of a file that Mallory does not normally have access to.</span></span> <span data-ttu-id="281ab-252">Представьте себе, что Боб имеет секретный файл *C:\Users\Bob\secret.txt* , который Мэллори хочет прочитать.</span><span class="sxs-lookup"><span data-stu-id="281ab-252">Consider that Bob has a secret file *C:\Users\Bob\secret.txt* that Mallory wants to read.</span></span> <span data-ttu-id="281ab-253">Она знает путь к этому файлу, но не может прочитать его, так как Windows не позволяет ей получить доступ к каталогу профиля пользователя Боба.</span><span class="sxs-lookup"><span data-stu-id="281ab-253">She knows the path to this file, but she cannot read it because Windows forbids her from gaining access to Bob's user profile directory.</span></span>

<span data-ttu-id="281ab-254">Вместо этого Мэллори помещает в хранилище на уровне компьютера жесткую связь.</span><span class="sxs-lookup"><span data-stu-id="281ab-254">Instead, Mallory places a hard link into the machine-wide store.</span></span> <span data-ttu-id="281ab-255">Это особый тип файла, который не имеет содержимого, а указывает на другой файл на диске.</span><span class="sxs-lookup"><span data-stu-id="281ab-255">This is a special kind of file that itself does not contain any contents, rather, it points to another file on disk.</span></span> <span data-ttu-id="281ab-256">Попытка считать такой файл с жесткой связью приведет к считыванию содержимого файла, на который эта связь ссылается.</span><span class="sxs-lookup"><span data-stu-id="281ab-256">Attempting to read the hard link file will instead read the contents of the file targeted by the link.</span></span> <span data-ttu-id="281ab-257">После создания жесткой связи Мэллори по-прежнему не может прочитать содержимое файла, так как у нее нет доступа к целевому объекту (`C:\Users\Bob\secret.txt`) этой связи.</span><span class="sxs-lookup"><span data-stu-id="281ab-257">After creating the hard link, Mallory still cannot read the file contents because she does not have access to the target (`C:\Users\Bob\secret.txt`) of the link.</span></span> <span data-ttu-id="281ab-258">Однако у Боба такой доступ _есть_.</span><span class="sxs-lookup"><span data-stu-id="281ab-258">However, Bob _does_ have access to this file.</span></span>

<span data-ttu-id="281ab-259">Когда приложение Боба считывает данные из хранилища на уровне компьютера, оно непреднамеренно считывает содержимое его файла `secret.txt`, как если бы этот файл находился в хранилище на уровне компьютера.</span><span class="sxs-lookup"><span data-stu-id="281ab-259">When Bob's app reads from the machine-wide store, it now inadvertently reads the contents of his `secret.txt` file, just as if the file itself had been present in the machine-wide store.</span></span> <span data-ttu-id="281ab-260">Если при завершении работы приложение Боба попытается повторно сохранить файл в хранилище на уровне компьютера, это приведет к помещению копии данного файла в каталог \*C:\ProgramData\IsolatedStorage\*.</span><span class="sxs-lookup"><span data-stu-id="281ab-260">When Bob's app exits, if it attempts to resave the file to the machine-wide store, it will end up placing an actual copy of the file in the \*C:\ProgramData\IsolatedStorage\* directory.</span></span> <span data-ttu-id="281ab-261">Так как этот каталог доступен для чтения любым пользователем на компьютере, Мэллори может читать содержимое файла.</span><span class="sxs-lookup"><span data-stu-id="281ab-261">Since this directory is readable by any user on the machine, Mallory can now read the contents of the file.</span></span>

### <a name="best-practices-to-defend-against-these-attacks"></a><span data-ttu-id="281ab-262">Рекомендации по защите от подобных атак</span><span class="sxs-lookup"><span data-stu-id="281ab-262">Best practices to defend against these attacks</span></span>

<span data-ttu-id="281ab-263">__Внимание!__ Если в вашей среде работает несколько пользователей, не обладающих взаимным доверием, __не__ вызывайте API `IsolatedStorageFile.GetEnumerator(IsolatedStorageScope.Machine)` или средство `storeadm.exe /machine /list`.</span><span class="sxs-lookup"><span data-stu-id="281ab-263">__Important:__ If your environment has multiple mutually untrusted users, __do not__ call the API `IsolatedStorageFile.GetEnumerator(IsolatedStorageScope.Machine)` or invoke the tool `storeadm.exe /machine /list`.</span></span> <span data-ttu-id="281ab-264">Оба этих компонента предполагают работу с надежными данными.</span><span class="sxs-lookup"><span data-stu-id="281ab-264">Both of these assume that they're operating on trusted data.</span></span> <span data-ttu-id="281ab-265">Если злоумышленник может поместить вредоносные данные в хранилище на уровне компьютера, они могут использоваться для атаки с повышением привилегий в контексте того пользователя, который выполняет эти команды.</span><span class="sxs-lookup"><span data-stu-id="281ab-265">If an attacker can seed a malicious payload in the machine-wide store, that payload can lead to an elevation of privilege attack under the context of the user who runs these commands.</span></span>

<span data-ttu-id="281ab-266">При работе в многопользовательской среде рекомендуется рассмотреть возможность использования функций изолированного хранилища, предназначенных для области _Компьютер_.</span><span class="sxs-lookup"><span data-stu-id="281ab-266">If operating in a multi-user environment, reconsider use of isolated storage features that target the _Machine_ scope.</span></span> <span data-ttu-id="281ab-267">Если приложение должно считывать данные из расположения на уровне компьютера, рекомендуется считывать данные из такого расположения, которое доступно для записи только учетным записям администратора.</span><span class="sxs-lookup"><span data-stu-id="281ab-267">If an app must read data from a machine-wide location, prefer to read the data from a location that's writable only by admin accounts.</span></span> <span data-ttu-id="281ab-268">Каталог `%PROGRAMFILES%` и куст реестра `HKLM` являются примерами расположений, которые доступны для записи только администраторам, а для чтения — всем пользователям.</span><span class="sxs-lookup"><span data-stu-id="281ab-268">The `%PROGRAMFILES%` directory and the `HKLM` registry hive are examples of locations that are writable by only administrators and readable by everyone.</span></span> <span data-ttu-id="281ab-269">Поэтому данные, считанные из этих расположений, считаются надежными.</span><span class="sxs-lookup"><span data-stu-id="281ab-269">Data read from those locations is therefore considered trustworthy.</span></span>

<span data-ttu-id="281ab-270">Если приложение должно использовать область _Компьютер_ в многопользовательской среде, проверяйте содержимое любого файла, считываемого из хранилища на уровне компьютера.</span><span class="sxs-lookup"><span data-stu-id="281ab-270">If an app must use the _Machine_ scope in a multi-user environment, validate the contents of any file that you read from the machine-wide store.</span></span> <span data-ttu-id="281ab-271">Если приложение десериализует графы объектов из таких файлов, рекомендуется использовать более безопасные сериализаторы, такие как `XmlSerializer`, вместо опасных, таких как `BinaryFormatter` или `NetDataContractSerializer`.</span><span class="sxs-lookup"><span data-stu-id="281ab-271">If the app deserializing object graphs from these files, consider using safer serializers like `XmlSerializer` instead of dangerous serializers like `BinaryFormatter` or `NetDataContractSerializer`.</span></span> <span data-ttu-id="281ab-272">Соблюдайте осторожность при работе с глубоко вложенными графами объектов или графами объектов, выделяющими ресурсы на основе содержимого файла.</span><span class="sxs-lookup"><span data-stu-id="281ab-272">Use caution with deeply nested object graphs or object graphs that perform resource allocation based on the file contents.</span></span>

<a name="isolated_storage_locations"></a>

## <a name="isolated-storage-locations"></a><span data-ttu-id="281ab-273">Расположения изолированных хранилищ</span><span class="sxs-lookup"><span data-stu-id="281ab-273">Isolated Storage Locations</span></span>

<span data-ttu-id="281ab-274">В некоторых случаях рекомендуется проверять изменения в изолированном хранилище, используя файловую систему операционной системы.</span><span class="sxs-lookup"><span data-stu-id="281ab-274">Sometimes it is helpful to verify a change to isolated storage by using the file system of the operating system.</span></span> <span data-ttu-id="281ab-275">Могут потребоваться сведения о размещении файлов изолированного хранилища.</span><span class="sxs-lookup"><span data-stu-id="281ab-275">You might also want to know the location of isolated storage files.</span></span> <span data-ttu-id="281ab-276">Место их размещения зависит от операционной системы.</span><span class="sxs-lookup"><span data-stu-id="281ab-276">This location is different depending on the operating system.</span></span> <span data-ttu-id="281ab-277">Ниже в таблице приведены корневые адреса файлов изолированного хранилища для некоторых распространенных операционных систем.</span><span class="sxs-lookup"><span data-stu-id="281ab-277">The following table shows the root locations where isolated storage is created on a few common operating systems.</span></span> <span data-ttu-id="281ab-278">В корневых адресах см. каталоги Microsoft\IsolatedStorage.</span><span class="sxs-lookup"><span data-stu-id="281ab-278">Look for Microsoft\IsolatedStorage directories under this root location.</span></span> <span data-ttu-id="281ab-279">Для того чтобы отобразить изолированное хранилище в файловой системе, нужно изменить настройки папки, установив для нее отображение скрытых файлов и папок.</span><span class="sxs-lookup"><span data-stu-id="281ab-279">You must change folder settings to show hidden files and folders in order to see isolated storage in the file system.</span></span>

|<span data-ttu-id="281ab-280">Операционная система</span><span class="sxs-lookup"><span data-stu-id="281ab-280">Operating system</span></span>|<span data-ttu-id="281ab-281">Местоположение в файловой системе</span><span class="sxs-lookup"><span data-stu-id="281ab-281">Location in file system</span></span>|
|----------------------|-----------------------------|
|<span data-ttu-id="281ab-282">Windows 2000, Windows XP, Windows Server 2003 (обновление Windows NT 4.0)</span><span class="sxs-lookup"><span data-stu-id="281ab-282">Windows 2000, Windows XP, Windows Server 2003  (upgrade from Windows NT 4.0)</span></span>|<span data-ttu-id="281ab-283">Перемещаемые хранилища =</span><span class="sxs-lookup"><span data-stu-id="281ab-283">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="281ab-284">\<SYSTEMROOT>\Profiles\\<user\>\Application Data</span><span class="sxs-lookup"><span data-stu-id="281ab-284">\<SYSTEMROOT>\Profiles\\<user\>\Application Data</span></span><br /><br /> <span data-ttu-id="281ab-285">Неперемещаемые хранилища =</span><span class="sxs-lookup"><span data-stu-id="281ab-285">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="281ab-286">\<SYSTEMROOT>\Profiles\\<user\>\Local Settings\Application Data</span><span class="sxs-lookup"><span data-stu-id="281ab-286">\<SYSTEMROOT>\Profiles\\<user\>\Local Settings\Application Data</span></span>|
|<span data-ttu-id="281ab-287">Windows 2000 — чистая установка (и обновление с Windows 98 и Windows NT 3.51)</span><span class="sxs-lookup"><span data-stu-id="281ab-287">Windows 2000  - clean installation (and upgrades from Windows 98 and Windows NT 3.51)</span></span>|<span data-ttu-id="281ab-288">Перемещаемые хранилища =</span><span class="sxs-lookup"><span data-stu-id="281ab-288">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="281ab-289">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Application Data</span><span class="sxs-lookup"><span data-stu-id="281ab-289">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Application Data</span></span><br /><br /> <span data-ttu-id="281ab-290">Неперемещаемые хранилища =</span><span class="sxs-lookup"><span data-stu-id="281ab-290">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="281ab-291">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Local Settings\Application Data</span><span class="sxs-lookup"><span data-stu-id="281ab-291">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Local Settings\Application Data</span></span>|
|<span data-ttu-id="281ab-292">Windows XP, Windows Server 2003 — чистая установка (или обновление с Windows 2000 и Windows 98)</span><span class="sxs-lookup"><span data-stu-id="281ab-292">Windows XP, Windows Server 2003 - clean installation (and upgrades from Windows 2000 and Windows 98)</span></span>|<span data-ttu-id="281ab-293">Перемещаемые хранилища =</span><span class="sxs-lookup"><span data-stu-id="281ab-293">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="281ab-294">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Application Data</span><span class="sxs-lookup"><span data-stu-id="281ab-294">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Application Data</span></span><br /><br /> <span data-ttu-id="281ab-295">Неперемещаемые хранилища =</span><span class="sxs-lookup"><span data-stu-id="281ab-295">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="281ab-296">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Local Settings\Application Data</span><span class="sxs-lookup"><span data-stu-id="281ab-296">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Local Settings\Application Data</span></span>|
|<span data-ttu-id="281ab-297">Windows 8, Windows 7, Windows Server 2008, Windows Vista</span><span class="sxs-lookup"><span data-stu-id="281ab-297">Windows 8, Windows 7, Windows Server 2008, Windows Vista</span></span>|<span data-ttu-id="281ab-298">Перемещаемые хранилища =</span><span class="sxs-lookup"><span data-stu-id="281ab-298">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="281ab-299">\<SYSTEMDRIVE>\Users\\<user\>\AppData\Roaming</span><span class="sxs-lookup"><span data-stu-id="281ab-299">\<SYSTEMDRIVE>\Users\\<user\>\AppData\Roaming</span></span><br /><br /> <span data-ttu-id="281ab-300">Неперемещаемые хранилища =</span><span class="sxs-lookup"><span data-stu-id="281ab-300">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="281ab-301">\<SYSTEMDRIVE>\Users\\<user\>\AppData\Local</span><span class="sxs-lookup"><span data-stu-id="281ab-301">\<SYSTEMDRIVE>\Users\\<user\>\AppData\Local</span></span>|

<a name="isolated_storage_tasks"></a>

## <a name="creating-enumerating-and-deleting-isolated-storage"></a><span data-ttu-id="281ab-302">Создание, перечисление и удаление изолированного хранилища</span><span class="sxs-lookup"><span data-stu-id="281ab-302">Creating, Enumerating, and Deleting Isolated Storage</span></span>

<span data-ttu-id="281ab-303">В составе .NET есть три класса в пространстве имен <xref:System.IO.IsolatedStorage>, которые помогают выполнять задачи, включающие изолированное хранилище.</span><span class="sxs-lookup"><span data-stu-id="281ab-303">.NET provides three classes in the <xref:System.IO.IsolatedStorage> namespace to help you perform tasks that involve isolated storage:</span></span>

- <span data-ttu-id="281ab-304">Класс<xref:System.IO.IsolatedStorage.IsolatedStorageFile>, производный от класса <xref:System.IO.IsolatedStorage.IsolatedStorage?displayProperty=nameWithType> , обеспечивает базовую функциональность для управления хранимыми сборками и файлами приложений.</span><span class="sxs-lookup"><span data-stu-id="281ab-304"><xref:System.IO.IsolatedStorage.IsolatedStorageFile>, derives from <xref:System.IO.IsolatedStorage.IsolatedStorage?displayProperty=nameWithType> and provides basic management of stored assembly and application files.</span></span> <span data-ttu-id="281ab-305">Экземпляр класса <xref:System.IO.IsolatedStorage.IsolatedStorageFile> служит для представления единичного хранилища, расположенного в файловой системе.</span><span class="sxs-lookup"><span data-stu-id="281ab-305">An instance of the <xref:System.IO.IsolatedStorage.IsolatedStorageFile> class represents a single store located in the file system.</span></span>

- <span data-ttu-id="281ab-306">Класс<xref:System.IO.IsolatedStorage.IsolatedStorageFileStream> , производный от класса <xref:System.IO.FileStream?displayProperty=nameWithType> , предоставляет доступ к файлам, расположенным в хранилище.</span><span class="sxs-lookup"><span data-stu-id="281ab-306"><xref:System.IO.IsolatedStorage.IsolatedStorageFileStream> derives from <xref:System.IO.FileStream?displayProperty=nameWithType> and provides access to the files in a store.</span></span>

- <span data-ttu-id="281ab-307">Класс<xref:System.IO.IsolatedStorage.IsolatedStorageScope> — это перечисление, позволяющее создавать и выбирать хранилища с необходимым типом изоляции.</span><span class="sxs-lookup"><span data-stu-id="281ab-307"><xref:System.IO.IsolatedStorage.IsolatedStorageScope> is an enumeration that enables you to create and select a store with the appropriate isolation type.</span></span>

<span data-ttu-id="281ab-308">Классы, предназначенные для работы с изолированными хранилищами, позволяют создавать, перечислять и удалять изолированные хранилища.</span><span class="sxs-lookup"><span data-stu-id="281ab-308">The isolated storage classes enable you to create, enumerate, and delete isolated storage.</span></span> <span data-ttu-id="281ab-309">Доступ к методам, используемым для выполнения этих действий, осуществляется с помощью объекта <xref:System.IO.IsolatedStorage.IsolatedStorageFile> .</span><span class="sxs-lookup"><span data-stu-id="281ab-309">The methods for performing these tasks are available through the <xref:System.IO.IsolatedStorage.IsolatedStorageFile> object.</span></span> <span data-ttu-id="281ab-310">Для выполнения некоторых операций необходимо разрешение <xref:System.Security.Permissions.IsolatedStorageFilePermission> , обеспечивающее право администрирования изолированного хранилища. Для доступа к некоторым файлам и каталогам также могут потребоваться права операционной системы.</span><span class="sxs-lookup"><span data-stu-id="281ab-310">Some operations require you to have the <xref:System.Security.Permissions.IsolatedStorageFilePermission> permission that represents the right to administer isolated storage; you might also need to have operating system rights to access the file or directory.</span></span>

<span data-ttu-id="281ab-311">Несколько примеров, демонстрирующих часто встречающиеся задачи изолированного хранения см. в практических руководствах, перечисленных в разделе [Связанные разделы](#related_topics).</span><span class="sxs-lookup"><span data-stu-id="281ab-311">For a series of examples that demonstrate common isolated storage tasks, see the how-to topics listed in [Related Topics](#related_topics).</span></span>

<a name="scenarios_for_isolated_storage"></a>

## <a name="scenarios-for-isolated-storage"></a><span data-ttu-id="281ab-312">Сценарии изолированного хранилища</span><span class="sxs-lookup"><span data-stu-id="281ab-312">Scenarios for Isolated Storage</span></span>

<span data-ttu-id="281ab-313">Изолированное хранилище может оказаться полезным во многих случаях, в том числе в следующих четырех ситуациях:</span><span class="sxs-lookup"><span data-stu-id="281ab-313">Isolated storage is useful in many situations, including these four scenarios:</span></span>

- <span data-ttu-id="281ab-314">Загружаемые элементы управления.</span><span class="sxs-lookup"><span data-stu-id="281ab-314">Downloaded controls.</span></span> <span data-ttu-id="281ab-315">Элементам управления, загружаемым через Интернет, не разрешено записывать данные на жесткий диск посредством обычных классов ввода-вывода, но они могут использовать изолированное хранилище для хранения параметров пользователя и состояний приложения.</span><span class="sxs-lookup"><span data-stu-id="281ab-315">Managed code controls downloaded from the Internet are not allowed to write to the hard drive through normal I/O classes, but they can use isolated storage to persist users' settings and application states.</span></span>

- <span data-ttu-id="281ab-316">Хранение общих компонентов.</span><span class="sxs-lookup"><span data-stu-id="281ab-316">Shared component storage.</span></span> <span data-ttu-id="281ab-317">Компоненты, общие для нескольких приложений, могут использовать изолированное хранилище для обеспечения управляемого доступа к хранилищам данных.</span><span class="sxs-lookup"><span data-stu-id="281ab-317">Components that are shared between applications can use isolated storage to provide controlled access to data stores.</span></span>

- <span data-ttu-id="281ab-318">Хранение на сервере.</span><span class="sxs-lookup"><span data-stu-id="281ab-318">Server storage.</span></span> <span data-ttu-id="281ab-319">Серверные приложения могут использовать изолированные хранилища для представления отдельных хранилищ большому числу пользователей, обращающихся с запросами к приложению.</span><span class="sxs-lookup"><span data-stu-id="281ab-319">Server applications can use isolated storage to provide individual stores for a large number of users making requests to the application.</span></span> <span data-ttu-id="281ab-320">Так как изолированное хранилище всегда выделяется пользователем, сервер должен выполнять роль пользователя, создающего запрос.</span><span class="sxs-lookup"><span data-stu-id="281ab-320">Because isolated storage is always segregated by user, the server must impersonate the user making the request.</span></span> <span data-ttu-id="281ab-321">В этом случае данные изолируются на основе идентификатора субъекта, который является тем же идентификатором, который используется приложением для того, чтобы различать пользователей.</span><span class="sxs-lookup"><span data-stu-id="281ab-321">In this case, data is isolated based on the identity of the principal, which is the same identity the application uses to distinguish between its users.</span></span>

- <span data-ttu-id="281ab-322">Перемещение.</span><span class="sxs-lookup"><span data-stu-id="281ab-322">Roaming.</span></span> <span data-ttu-id="281ab-323">Приложения могут также использовать изолированное хранилище с перемещаемыми профилями пользователей.</span><span class="sxs-lookup"><span data-stu-id="281ab-323">Applications can also use isolated storage with roaming user profiles.</span></span> <span data-ttu-id="281ab-324">Это позволяет изолированным данным пользователя перемещаться вслед за его профилем.</span><span class="sxs-lookup"><span data-stu-id="281ab-324">This allows a user's isolated stores to roam with the profile.</span></span>

<span data-ttu-id="281ab-325">Изолированное хранилище не следует использовать в следующих ситуациях:</span><span class="sxs-lookup"><span data-stu-id="281ab-325">Do not use isolated storage in the following situations:</span></span>

- <span data-ttu-id="281ab-326">Для хранения важных конфиденциальных данных, таких как незашифрованные ключи или пароли, поскольку изолированное хранилище не защищено от высоконадежного кода, от неуправляемого кода и от доверенных пользователей компьютера.</span><span class="sxs-lookup"><span data-stu-id="281ab-326">To store high-value secrets, such as unencrypted keys or passwords, because isolated storage is not protected from highly trusted code, from unmanaged code, or from trusted users of the computer.</span></span>

- <span data-ttu-id="281ab-327">Для хранения кода.</span><span class="sxs-lookup"><span data-stu-id="281ab-327">To store code.</span></span>

- <span data-ttu-id="281ab-328">Для хранения параметров конфигурации и развертывания, которые контролируются администраторами.</span><span class="sxs-lookup"><span data-stu-id="281ab-328">To store configuration and deployment settings, which administrators control.</span></span> <span data-ttu-id="281ab-329">(настройки пользователя не считаются параметрами конфигурации, т.к. они не управляются администраторами).</span><span class="sxs-lookup"><span data-stu-id="281ab-329">(User preferences are not considered to be configuration settings because administrators do not control them.)</span></span>

<span data-ttu-id="281ab-330">Многие приложения используют базы данных для хранения и изолирования данных, в которых одна или несколько строк могут представлять хранилище для определенного пользователя.</span><span class="sxs-lookup"><span data-stu-id="281ab-330">Many applications use a database to store and isolate data, in which case one or more rows in a database might represent storage for a specific user.</span></span> <span data-ttu-id="281ab-331">Применение изолированное хранилища вместо базы данных как правило выбирается в тех случаях, когда число пользователей невелико, когда использование базы данных влечет значительные потери производительности или когда отсутствуют средства для поддержания баз данных.</span><span class="sxs-lookup"><span data-stu-id="281ab-331">You might choose to use isolated storage instead of a database when the number of users is small, when the overhead of using a database is significant, or when no database facility exists.</span></span> <span data-ttu-id="281ab-332">Изолированное хранилище также представляет вполне реальную альтернативу в тех случаях, когда приложению требуется более гибкое и сложное хранилище, чем строка в базе данных.</span><span class="sxs-lookup"><span data-stu-id="281ab-332">Also, when the application requires storage that is more flexible and complex than what a row in a database provides, isolated storage can provide a viable alternative.</span></span>

<a name="related_topics"></a>

## <a name="related-articles"></a><span data-ttu-id="281ab-333">Связанные статьи</span><span class="sxs-lookup"><span data-stu-id="281ab-333">Related articles</span></span>

|<span data-ttu-id="281ab-334">Заголовок</span><span class="sxs-lookup"><span data-stu-id="281ab-334">Title</span></span>|<span data-ttu-id="281ab-335">Описание</span><span class="sxs-lookup"><span data-stu-id="281ab-335">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="281ab-336">Типы изоляции</span><span class="sxs-lookup"><span data-stu-id="281ab-336">Types of Isolation</span></span>](types-of-isolation.md)|<span data-ttu-id="281ab-337">Описание различных типов изоляции.</span><span class="sxs-lookup"><span data-stu-id="281ab-337">Describes the different types of isolation.</span></span>|
|[<span data-ttu-id="281ab-338">Практическое руководство. Получение хранилищ для изолированного хранения</span><span class="sxs-lookup"><span data-stu-id="281ab-338">How to: Obtain Stores for Isolated Storage</span></span>](how-to-obtain-stores-for-isolated-storage.md)|<span data-ttu-id="281ab-339">Пример использования класса <xref:System.IO.IsolatedStorage.IsolatedStorageFile> для получения хранилища, изолированного по пользователю и сборке.</span><span class="sxs-lookup"><span data-stu-id="281ab-339">Provides an example of using the <xref:System.IO.IsolatedStorage.IsolatedStorageFile> class to obtain a store isolated by user and assembly.</span></span>|
|[<span data-ttu-id="281ab-340">Практическое руководство. Перечисление хранилищ для изолированного хранилища</span><span class="sxs-lookup"><span data-stu-id="281ab-340">How to: Enumerate Stores for Isolated Storage</span></span>](how-to-enumerate-stores-for-isolated-storage.md)|<span data-ttu-id="281ab-341">Пример использования метода <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetEnumerator%2A?displayProperty=nameWithType> для вычисления общего размера всех изолированных хранилищ пользователя.</span><span class="sxs-lookup"><span data-stu-id="281ab-341">Shows how to use the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetEnumerator%2A?displayProperty=nameWithType> method to calculate the size of all isolated storage for the user.</span></span>|
|[<span data-ttu-id="281ab-342">Практическое руководство. Удаление хранилищ из области изолированного хранения</span><span class="sxs-lookup"><span data-stu-id="281ab-342">How to: Delete Stores in Isolated Storage</span></span>](how-to-delete-stores-in-isolated-storage.md)|<span data-ttu-id="281ab-343">Пример использования метода <xref:System.IO.IsolatedStorage.IsolatedStorageFile.Remove%2A?displayProperty=nameWithType> для удаления изолированных хранилищ двумя разными способами.</span><span class="sxs-lookup"><span data-stu-id="281ab-343">Shows how to use the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.Remove%2A?displayProperty=nameWithType> method in two different ways to delete isolated stores.</span></span>|
|[<span data-ttu-id="281ab-344">Практическое руководство. Предупреждение о нехватке места при изолированном хранении</span><span class="sxs-lookup"><span data-stu-id="281ab-344">How to: Anticipate Out-of-Space Conditions with Isolated Storage</span></span>](how-to-anticipate-out-of-space-conditions-with-isolated-storage.md)|<span data-ttu-id="281ab-345">Пример измерения оставшегося свободного места в изолированном хранилище.</span><span class="sxs-lookup"><span data-stu-id="281ab-345">Shows how to measure the remaining space in an isolated store.</span></span>|
|[<span data-ttu-id="281ab-346">Практическое руководство. Создание файлов и каталогов в изолированном хранилище</span><span class="sxs-lookup"><span data-stu-id="281ab-346">How to: Create Files and Directories in Isolated Storage</span></span>](how-to-create-files-and-directories-in-isolated-storage.md)|<span data-ttu-id="281ab-347">Ряд примеров создания файлов и каталогов в изолированном хранилище.</span><span class="sxs-lookup"><span data-stu-id="281ab-347">Provides some examples of creating files and directories in an isolated store.</span></span>|
|[<span data-ttu-id="281ab-348">Практическое руководство. Поиск существующих файлов и каталогов в изолированном хранилище</span><span class="sxs-lookup"><span data-stu-id="281ab-348">How to: Find Existing Files and Directories in Isolated Storage</span></span>](how-to-find-existing-files-and-directories-in-isolated-storage.md)|<span data-ttu-id="281ab-349">Пример считывания структуры каталогов и файлов в изолированном хранилище.</span><span class="sxs-lookup"><span data-stu-id="281ab-349">Demonstrates how to read the directory structure and files in isolated storage.</span></span>|
|[<span data-ttu-id="281ab-350">Практическое руководство. Считывание из файлов и запись в файлы в изолированном хранилище</span><span class="sxs-lookup"><span data-stu-id="281ab-350">How to: Read and Write to Files in Isolated Storage</span></span>](how-to-read-and-write-to-files-in-isolated-storage.md)|<span data-ttu-id="281ab-351">Содержит пример записи строки в файл изолированного хранилища и его чтения.</span><span class="sxs-lookup"><span data-stu-id="281ab-351">Provides an example of writing a string to an isolated storage file and reading it back.</span></span>|
|[<span data-ttu-id="281ab-352">Практическое руководство. Удаление файлов и каталогов из изолированного хранилища</span><span class="sxs-lookup"><span data-stu-id="281ab-352">How to: Delete Files and Directories in Isolated Storage</span></span>](how-to-delete-files-and-directories-in-isolated-storage.md)|<span data-ttu-id="281ab-353">Пример удаления файлов и каталогов в изолированном хранилище.</span><span class="sxs-lookup"><span data-stu-id="281ab-353">Demonstrates how to delete isolated storage files and directories.</span></span>|
|[<span data-ttu-id="281ab-354">Файловый и потоковый ввод-вывод</span><span class="sxs-lookup"><span data-stu-id="281ab-354">File and Stream I/O</span></span>](index.md)|<span data-ttu-id="281ab-355">Описание способов выполнения синхронного и асинхронного доступа к файлам и доступа к данным потока.</span><span class="sxs-lookup"><span data-stu-id="281ab-355">Explains how you can perform synchronous and asynchronous file and data stream access.</span></span>|

<a name="reference"></a>

## <a name="reference"></a><span data-ttu-id="281ab-356">Ссылки</span><span class="sxs-lookup"><span data-stu-id="281ab-356">Reference</span></span>

- <xref:System.IO.IsolatedStorage.IsolatedStorage?displayProperty=nameWithType>

- <xref:System.IO.IsolatedStorage.IsolatedStorageFile?displayProperty=nameWithType>

- <xref:System.IO.IsolatedStorage.IsolatedStorageFileStream?displayProperty=nameWithType>

- <xref:System.IO.IsolatedStorage.IsolatedStorageScope?displayProperty=nameWithType>
