---
title: Что такое "управляемый код"?
description: Сведения о том, что управляемый код — это код, выполнение которого управляется средой выполнения CLR.
ms.date: 06/20/2016
ms.technology: dotnet-standard
ms.assetid: 20bb7ea8-192e-4a96-8ef3-e10e1950fd3d
ms.openlocfilehash: 2d89fd48e4c05dc7ec7c27846a3580ee36b1886f
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/02/2020
ms.locfileid: "84290088"
---
# <a name="what-is-managed-code"></a><span data-ttu-id="cfbba-103">Что такое управляемый код</span><span class="sxs-lookup"><span data-stu-id="cfbba-103">What is "managed code"?</span></span>

<span data-ttu-id="cfbba-104">При работе с платформой .NET Framework вы будете часто сталкиваться с термином "управляемый код".</span><span class="sxs-lookup"><span data-stu-id="cfbba-104">When working with .NET Framework, you will often encounter the term "managed code".</span></span> <span data-ttu-id="cfbba-105">В этом документе приводится пояснение этого термина и дополнительные сведения о нем.</span><span class="sxs-lookup"><span data-stu-id="cfbba-105">This document will explain what this term means and additional information around it.</span></span>

<span data-ttu-id="cfbba-106">В первом приближении управляемым кодом называется код, выполнение которого управляется средой выполнения.</span><span class="sxs-lookup"><span data-stu-id="cfbba-106">To put it very simply, managed code is just that: code whose execution is managed by a runtime.</span></span> <span data-ttu-id="cfbba-107">В этом случае соответствующая среда выполнения называется **общеязыковой средой выполнения** или средой CLR, независимо от реализации ([Mono](https://www.mono-project.com/), .NET Framework или .NET Core).</span><span class="sxs-lookup"><span data-stu-id="cfbba-107">In this case, the runtime in question is called the **Common Language Runtime** or CLR, regardless of the implementation ([Mono](https://www.mono-project.com/) or .NET Framework or .NET Core).</span></span> <span data-ttu-id="cfbba-108">Среда CLR отвечает за использование управляемого кода, его компиляцию в машинный код и последующее выполнение.</span><span class="sxs-lookup"><span data-stu-id="cfbba-108">CLR is in charge of taking the managed code, compiling it into machine code and then executing it.</span></span> <span data-ttu-id="cfbba-109">Кроме того, среда выполнения предоставляет несколько важных служб, таких как автоматическое управление памятью, границы безопасности, безопасность типа и т. д.</span><span class="sxs-lookup"><span data-stu-id="cfbba-109">On top of that, runtime provides several important services such as automatic memory management, security boundaries, type safety etc.</span></span>

<span data-ttu-id="cfbba-110">Сравните это с запуском программы C/C++, которая также называется "неуправляемым кодом".</span><span class="sxs-lookup"><span data-stu-id="cfbba-110">Contrast this to the way you would run a C/C++ program, also called "unmanaged code".</span></span> <span data-ttu-id="cfbba-111">В мире неуправляемого кода практически за все отвечает программист.</span><span class="sxs-lookup"><span data-stu-id="cfbba-111">In the unmanaged world, the programmer is in charge of pretty much everything.</span></span> <span data-ttu-id="cfbba-112">Сама программа представляет собой двоичный файл, который операционная система (ОС) загружает в память и запускает.</span><span class="sxs-lookup"><span data-stu-id="cfbba-112">The actual program is, essentially, a binary that the operating system (OS) loads into memory and starts.</span></span> <span data-ttu-id="cfbba-113">За все остальное — от управления памятью до различных аспектов безопасности — отвечает программист.</span><span class="sxs-lookup"><span data-stu-id="cfbba-113">Everything else, from memory management to security considerations are a burden of the programmer.</span></span>

<span data-ttu-id="cfbba-114">Управляемый код пишется в одном из языков высокого уровня, которые могут выполняться в .NET, например C#, Visual Basic, F# и других.</span><span class="sxs-lookup"><span data-stu-id="cfbba-114">Managed code is written in one of the high-level languages that can be run on top of .NET, such as C#, Visual Basic, F# and others.</span></span> <span data-ttu-id="cfbba-115">При компиляции кода, написанного на этих языках, с помощью соответствующего компилятора вы получаете не машинный код.</span><span class="sxs-lookup"><span data-stu-id="cfbba-115">When you compile code written in those languages with their respective compiler, you don’t get machine code.</span></span> <span data-ttu-id="cfbba-116">Вы получаете код **промежуточного языка**, который затем компилируется и запускается средой выполнения.</span><span class="sxs-lookup"><span data-stu-id="cfbba-116">You get **Intermediate Language** code which the runtime then compiles and executes.</span></span> <span data-ttu-id="cfbba-117">Язык C++ является исключением из этого правила, так как он позволяет создавать машинные неуправляемые двоичные файлы, которые запускаются в Windows.</span><span class="sxs-lookup"><span data-stu-id="cfbba-117">C++ is the one exception to this rule, as it can also produce native, unmanaged binaries that run on Windows.</span></span>

## <a name="intermediate-language--execution"></a><span data-ttu-id="cfbba-118">Промежуточный язык и выполнение</span><span class="sxs-lookup"><span data-stu-id="cfbba-118">Intermediate Language & execution</span></span>

<span data-ttu-id="cfbba-119">Что такое "промежуточный язык" (сокращенно IL)?</span><span class="sxs-lookup"><span data-stu-id="cfbba-119">What is "Intermediate Language" (or IL for short)?</span></span> <span data-ttu-id="cfbba-120">Это результат компиляции кода, написанного на языках высокого уровня .NET.</span><span class="sxs-lookup"><span data-stu-id="cfbba-120">It is a product of compilation of code written in high-level .NET languages.</span></span> <span data-ttu-id="cfbba-121">После компиляции кода, написанного на одном из этих языков, вы получаете двоичный файл на базе IL.</span><span class="sxs-lookup"><span data-stu-id="cfbba-121">Once you compile your code written in one of these languages, you will get a binary that is made out of IL.</span></span> <span data-ttu-id="cfbba-122">Важно отметить, что IL не зависит от языка, выполняемого поверх среды выполнения. Для него даже есть отдельная спецификация, с которой при желании можно ознакомиться.</span><span class="sxs-lookup"><span data-stu-id="cfbba-122">It is important to note that the IL is independent from any specific language that runs on top of the runtime; there is even a separate specification for it that you can read if you’re so inclined.</span></span>

<span data-ttu-id="cfbba-123">После создания IL из кода высокого уровня вы, скорее всего, захотите запустить его.</span><span class="sxs-lookup"><span data-stu-id="cfbba-123">Once you produce IL from your high-level code, you will most likely want to run it.</span></span> <span data-ttu-id="cfbba-124">В этот момент среда CLR берет управление на себя и запускает процесс **JIT**-компиляции, используя **JIT** для преобразования кода из промежуточного языка в машинный код, который может выполняться на ЦП.</span><span class="sxs-lookup"><span data-stu-id="cfbba-124">This is where the CLR takes over and starts the process of **Just-In-Time** compiling, or **JIT-ing** your code from IL to machine code that can actually be run on a CPU.</span></span> <span data-ttu-id="cfbba-125">Таким образом, среде CLR точно известно, что делает код, поэтому она может эффективно _управлять_ им.</span><span class="sxs-lookup"><span data-stu-id="cfbba-125">In this way, the CLR knows exactly what your code is doing and can effectively _manage_ it.</span></span>

<span data-ttu-id="cfbba-126">Промежуточный язык иногда называют языком CIL или MSIL.</span><span class="sxs-lookup"><span data-stu-id="cfbba-126">Intermediate Language is sometimes also called Common Intermediate Language (CIL) or Microsoft Intermediate Language (MSIL).</span></span>

## <a name="unmanaged-code-interoperability"></a><span data-ttu-id="cfbba-127">Взаимодействие неуправляемого кода</span><span class="sxs-lookup"><span data-stu-id="cfbba-127">Unmanaged code interoperability</span></span>

<span data-ttu-id="cfbba-128">Конечно же, среда CLR позволяет пересекать границы между управляемым и неуправляемым кодом, и даже в [библиотеках базовых классов](framework-libraries.md) объем подобного кода довольно велик.</span><span class="sxs-lookup"><span data-stu-id="cfbba-128">Of course, the CLR allows passing the boundaries between managed and unmanaged world, and there is a lot of code that does that, even in the [Base Class Libraries](framework-libraries.md).</span></span> <span data-ttu-id="cfbba-129">Это называется **взаимодействием** или **межпрограммным взаимодействием**.</span><span class="sxs-lookup"><span data-stu-id="cfbba-129">This is called **interoperability** or just **interop** for short.</span></span> <span data-ttu-id="cfbba-130">Все это позволяет вам, например, заключить неуправляемую библиотеку в оболочку и вызвать ее.</span><span class="sxs-lookup"><span data-stu-id="cfbba-130">These provisions would allow you to, for example, wrap up an unmanaged library and call into it.</span></span> <span data-ttu-id="cfbba-131">Но следует отметить, что после того как код пересекает границы среды выполнения, управление выполнением снова осуществляется в виде неуправляемого кода с соответствующими ограничениями.</span><span class="sxs-lookup"><span data-stu-id="cfbba-131">However, it is important to note that once you do this, when the code passes the boundaries of the runtime, the actual management of the execution is again in the hand of unmanaged code, and thus falls under the same restrictions.</span></span>

<span data-ttu-id="cfbba-132">Аналогично, C# — это язык, позволяющий использовать неуправляемые конструкции, такие как указатели, прямо в коде с помощью так называемого **небезопасного контекста**, указывающего часть кода, для которой выполнение не управляется средой CLR.</span><span class="sxs-lookup"><span data-stu-id="cfbba-132">Similar to this, C# is one language that allows you to use unmanaged constructs such as pointers directly in code by utilizing what is known as **unsafe context** which designates a piece of code for which the execution is not managed by the CLR.</span></span>

## <a name="more-resources"></a><span data-ttu-id="cfbba-133">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="cfbba-133">More resources</span></span>

* [<span data-ttu-id="cfbba-134">Общие сведения о платформе .NET Framework</span><span class="sxs-lookup"><span data-stu-id="cfbba-134">Overview of the .NET Framework</span></span>](../framework/get-started/overview.md)
* [<span data-ttu-id="cfbba-135">Небезопасный код и указатели</span><span class="sxs-lookup"><span data-stu-id="cfbba-135">Unsafe Code and Pointers</span></span>](../csharp/programming-guide/unsafe-code-pointers/index.md)
* [<span data-ttu-id="cfbba-136">Взаимодействие на уровне машинного кода</span><span class="sxs-lookup"><span data-stu-id="cfbba-136">Native interoperability</span></span>](./native-interop/index.md)
