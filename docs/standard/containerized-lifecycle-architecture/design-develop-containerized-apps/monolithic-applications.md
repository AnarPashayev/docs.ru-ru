---
title: Монолитные приложения
description: Изучить основные понятия для контейнеризация монолитных приложений.
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 02/15/2019
ms.openlocfilehash: e7454100b09f602e1e103c38685609e1dab62fe9
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61644985"
---
# <a name="monolithic-applications"></a><span data-ttu-id="17773-103">Монолитные приложения</span><span class="sxs-lookup"><span data-stu-id="17773-103">Monolithic applications</span></span>

<span data-ttu-id="17773-104">В этом случае при создании в единый и монолитных веб-приложение или службу и развернуть его в качестве контейнера.</span><span class="sxs-lookup"><span data-stu-id="17773-104">In this scenario, you're building a single and monolithic web application or service and deploying it as a container.</span></span> <span data-ttu-id="17773-105">В приложении структуре не может быть монолитных; он может состоять из нескольких библиотек, компонентов или даже уровней (уровень приложений, уровень предметной области, уровень доступа к данным, и т.д.).</span><span class="sxs-lookup"><span data-stu-id="17773-105">Within the application, the structure might not be monolithic; it might comprise several libraries, components, or even layers (application layer, domain layer, data access layer, etc.).</span></span> <span data-ttu-id="17773-106">Внешне оно будет представлять собой единый контейнер, одного процесса, единое веб-приложение или единую службу.</span><span class="sxs-lookup"><span data-stu-id="17773-106">Externally, it's a single container, like a single process, single web application, or single service.</span></span>

<span data-ttu-id="17773-107">Для управления этой моделью вы развертываете один контейнер, представляющий собой приложение.</span><span class="sxs-lookup"><span data-stu-id="17773-107">To manage this model, you deploy a single container to represent the application.</span></span> <span data-ttu-id="17773-108">Для его масштабирования, просто добавьте несколько дополнительные копии с подсистемой балансировки нагрузки спереди.</span><span class="sxs-lookup"><span data-stu-id="17773-108">To scale it, just add a few more copies with a load balancer in front.</span></span> <span data-ttu-id="17773-109">Гораздо проще управлять одним развертыванием в одном контейнере или виртуальной машины (VM).</span><span class="sxs-lookup"><span data-stu-id="17773-109">The simplicity comes from managing a single deployment in a single container or virtual machine (VM).</span></span>

<span data-ttu-id="17773-110">После основного сервера контейнер делает только одну вещь что делает это в рамках одного процесса монолитный шаблон находится в конфликт.</span><span class="sxs-lookup"><span data-stu-id="17773-110">Following the principal that a container does one thing only, and does it in one process, the monolithic pattern is in conflict.</span></span> <span data-ttu-id="17773-111">Как показано на рисунке 4-1, может включать несколько компонентов, библиотек или внутренних слоев в каждом контейнере.</span><span class="sxs-lookup"><span data-stu-id="17773-111">You can include multiple components/libraries or internal layers within each container, as illustrated in Figure 4-1.</span></span>

![Такие приложения масштабируются имеет всего или большей части его функциональность в одном процессе или контейнере, и он состоит из отдельных компонентов в внутренних слоев или библиотеки.](./media/image1.png)

<span data-ttu-id="17773-113">**Рис. 4-1.**</span><span class="sxs-lookup"><span data-stu-id="17773-113">**Figure 4-1.**</span></span> <span data-ttu-id="17773-114">Пример архитектуры монолитного приложения</span><span class="sxs-lookup"><span data-stu-id="17773-114">An example of monolithic application architecture</span></span>

<span data-ttu-id="17773-115">Недостаток этого подхода, определяется Если или когда приложение разрастается и его необходимо масштабировать.</span><span class="sxs-lookup"><span data-stu-id="17773-115">The downside to this approach comes if or when the application grows, requiring it to scale.</span></span> <span data-ttu-id="17773-116">Если масштабируется приложение целиком, все получится.</span><span class="sxs-lookup"><span data-stu-id="17773-116">If the entire application scaled, it's not really a problem.</span></span> <span data-ttu-id="17773-117">Однако в большинстве случаев несколько частей приложения являются нормально, которые требуют масштабирования, в то время как менее используются другими компонентами.</span><span class="sxs-lookup"><span data-stu-id="17773-117">However, in most cases, a few parts of the application are the choke points that require scaling, whereas other components are used less.</span></span>

<span data-ttu-id="17773-118">Используя пример типичных электронной коммерции, скорее всего, необходим для масштабирования сведения компонента продукта.</span><span class="sxs-lookup"><span data-stu-id="17773-118">Using the typical e-commerce example, what you likely need is to scale the product information component.</span></span> <span data-ttu-id="17773-119">Клиенты чаще просматривают товары, чем приобретают их.</span><span class="sxs-lookup"><span data-stu-id="17773-119">Many more customers browse products than purchase them.</span></span> <span data-ttu-id="17773-120">Клиенты чаще складывают товары в корзину, чем оплачивают их.</span><span class="sxs-lookup"><span data-stu-id="17773-120">More customers use their basket than use the payment pipeline.</span></span> <span data-ttu-id="17773-121">Не так много клиентов пишут комментарии или просматривают историю покупок.</span><span class="sxs-lookup"><span data-stu-id="17773-121">Fewer customers add comments or view their purchase history.</span></span> <span data-ttu-id="17773-122">И, скорее всего у вас есть лишь небольшое число сотрудников в одном регионе, которые управляют содержимым и маркетинговыми кампаниями.</span><span class="sxs-lookup"><span data-stu-id="17773-122">And you likely have only a handful of employees, in a single region, that need to manage the content and marketing campaigns.</span></span> <span data-ttu-id="17773-123">При масштабировании монолитных решений весь код развертывается многократно.</span><span class="sxs-lookup"><span data-stu-id="17773-123">By scaling the monolithic design, all of the code is deployed multiple times.</span></span>

<span data-ttu-id="17773-124">В дополнение к «масштабирования-все» проблему, изменения в одном компоненте требуют полного повторного тестирования всего приложения, а также полного повторного развертывания всех экземпляров.</span><span class="sxs-lookup"><span data-stu-id="17773-124">In addition to the "scale-everything" problem, changes to a single component require complete retesting of the entire application as well as a complete redeployment of all the instances.</span></span>

<span data-ttu-id="17773-125">Применить Монолитный подход широкое распространение и многими организациями при разработке с помощью этого метода архитектуры.</span><span class="sxs-lookup"><span data-stu-id="17773-125">The monolithic approach is common, and many organizations are developing with this architectural method.</span></span> <span data-ttu-id="17773-126">Многие наслаждайтесь хорошо результатов, тогда как другие возникнуть ограничения.</span><span class="sxs-lookup"><span data-stu-id="17773-126">Many enjoy good enough results, whereas others encounter limits.</span></span> <span data-ttu-id="17773-127">Многие строились в этой модели, так как средства и инфраструктура были слишком сложно создать SOA, и они не видят необходимость, пока его размер увеличивается.</span><span class="sxs-lookup"><span data-stu-id="17773-127">Many designed their applications in this model because the tools and infrastructure were too difficult to build SOAs, and they didn't see the need—until the app grew.</span></span>

<span data-ttu-id="17773-128">С точки зрения инфраструктуры каждый сервер может выполнять множество приложений в том же узле и применять допустимое соотношение эффективности вашего использования ресурсов, как показано на рисунке 4-2.</span><span class="sxs-lookup"><span data-stu-id="17773-128">From an infrastructure perspective, each server can run many applications within the same host and have an acceptable ratio of efficiency in your resources usage, as shown in Figure 4-2.</span></span>

![Один узел может выполняться несколько приложений в отдельных контейнерах.](./media/image2.png)

<span data-ttu-id="17773-130">**Рис. 4-2.**</span><span class="sxs-lookup"><span data-stu-id="17773-130">**Figure 4-2.**</span></span> <span data-ttu-id="17773-131">На узел под управлением нескольких приложений или контейнеров</span><span class="sxs-lookup"><span data-stu-id="17773-131">A host running multiple apps/containers</span></span>

<span data-ttu-id="17773-132">Наконец с точки зрения доступности монолитного приложения должны быть развернуты в целом; Это означает, что в случае, если необходимо *остановить и запустить*, все функциональные возможности, а также все пользователи будут применяться во время развертывания окна.</span><span class="sxs-lookup"><span data-stu-id="17773-132">Finally, from an availability perspective, monolithic applications must be deployed as a whole; that means that in case you must *stop and start*, all functionality and all users will be affected during the deployment window.</span></span> <span data-ttu-id="17773-133">В некоторых случаях использование Azure и контейнеров можно свести к минимуму эти ситуации и снижают вероятность простоя для вашего приложения, как показано на рисунке 4-3.</span><span class="sxs-lookup"><span data-stu-id="17773-133">In certain situations, the use of Azure and containers can minimize these situations and reduce the probability of downtime of your application, as you can see in Figure 4-3.</span></span>

<span data-ttu-id="17773-134">Монолитные приложения в Azure можно развернуть с помощью выделенных виртуальных машин для каждого экземпляра.</span><span class="sxs-lookup"><span data-stu-id="17773-134">You can deploy monolithic applications in Azure by using dedicated VMs for each instance.</span></span> <span data-ttu-id="17773-135">С помощью [масштабируемых наборов виртуальных Машин Azure](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), вы можете легко масштабировать виртуальные машины.</span><span class="sxs-lookup"><span data-stu-id="17773-135">Using [Azure VM Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), you can scale the VMs easily.</span></span>

<span data-ttu-id="17773-136">Можно также использовать [службы приложений](https://azure.microsoft.com/services/app-service/) выполнять монолитные приложения и легко масштабировать экземпляры без необходимости управлять виртуальными машинами.</span><span class="sxs-lookup"><span data-stu-id="17773-136">You can also use [Azure App Services](https://azure.microsoft.com/services/app-service/) to run monolithic applications and easily scale instances without having to manage the VMs.</span></span> <span data-ttu-id="17773-137">Службы приложений Azure могут выполнять отдельные экземпляры контейнеров Docker, а также, упрощая развертывание.</span><span class="sxs-lookup"><span data-stu-id="17773-137">Azure App Services can run single instances of Docker containers, as well, simplifying the deployment.</span></span>

<span data-ttu-id="17773-138">Можно развернуть несколько виртуальных машин в качестве узлов Docker и запустить любое количество контейнеров на каждой виртуальной Машине.</span><span class="sxs-lookup"><span data-stu-id="17773-138">You can deploy multiple VMs as Docker hosts and run any number of containers per VM.</span></span> <span data-ttu-id="17773-139">Затем с помощью Azure Load Balancer, как показано на рисунке 4-3, можно управлять масштабированием.</span><span class="sxs-lookup"><span data-stu-id="17773-139">Then, by using an Azure Load Balancer, as illustrated in the Figure 4-3, you can manage scaling.</span></span>

![Такие приложения масштабируются может быть горизонтальным масштабированием на разных узлах, где каждый из них запуск приложения в контейнеры.](./media/image3.png)

<span data-ttu-id="17773-141">**Рис. 4-3**.</span><span class="sxs-lookup"><span data-stu-id="17773-141">**Figure 4-3**.</span></span> <span data-ttu-id="17773-142">Несколько узлов масштабирование одного приложения приложений или контейнеров Docker</span><span class="sxs-lookup"><span data-stu-id="17773-142">Multiple hosts scaling-out a single Docker application apps/containers</span></span>

<span data-ttu-id="17773-143">Вы можете управлять развертыванием самих узлов с помощью традиционных методов развертывания.</span><span class="sxs-lookup"><span data-stu-id="17773-143">You can manage the deployment of the hosts themselves via traditional deployment techniques.</span></span>

<span data-ttu-id="17773-144">Контейнеры Docker можно управлять из командной строки с помощью команд, таких как `docker run` и `docker-compose up`, и можно также автоматизировать его в конвейерах непрерывной поставки (CD) и развертывания узлов Docker из служб Azure DevOps, например.</span><span class="sxs-lookup"><span data-stu-id="17773-144">You can manage Docker containers from the command line by using commands like `docker run` and `docker-compose up`, and you can also automate it in Continuous Delivery (CD) pipelines and deploy to Docker hosts from Azure DevOps Services, for instance.</span></span>

## <a name="monolithic-application-deployed-as-a-container"></a><span data-ttu-id="17773-145">Развертывание монолитного приложения в контейнере</span><span class="sxs-lookup"><span data-stu-id="17773-145">Monolithic application deployed as a container</span></span>

<span data-ttu-id="17773-146">Существуют преимущества использования контейнеров для управления развертываниями монолитных.</span><span class="sxs-lookup"><span data-stu-id="17773-146">There are benefits to using containers to manage monolithic deployments.</span></span> <span data-ttu-id="17773-147">Масштабировать экземпляры контейнера гораздо быстрее и проще, чем развертывать дополнительные виртуальные машины.</span><span class="sxs-lookup"><span data-stu-id="17773-147">Scaling the instances of containers is far faster and easier than deploying additional VMs.</span></span>

<span data-ttu-id="17773-148">Развертывание обновлений в виде образов Docker выполняется гораздо быстрее и эффективнее с точки зрения использования сети.</span><span class="sxs-lookup"><span data-stu-id="17773-148">Deploying updates as Docker images is far faster and network efficient.</span></span> <span data-ttu-id="17773-149">Контейнеры docker обычно запускаются за считанные секунды, что позволяет ускорить выпуск.</span><span class="sxs-lookup"><span data-stu-id="17773-149">Docker containers typically start in seconds, speeding rollouts.</span></span> <span data-ttu-id="17773-150">Закрытие контейнера Docker так же просто, что и вызов `docker stop` команды, обычно Завершение менее чем за секунду.</span><span class="sxs-lookup"><span data-stu-id="17773-150">Tearing down a Docker container is as easy as invoking the `docker stop` command, typically completing in less than a second.</span></span>

<span data-ttu-id="17773-151">Поскольку контейнеры неизменны по своей природе, по своей природе, не придется беспокоиться о поврежденных виртуальных машинах, так как забыли скрипт обновления учесть определенную конфигурацию или файл на диске.</span><span class="sxs-lookup"><span data-stu-id="17773-151">Because containers are inherently immutable, by design, you never need to worry about corrupted VMs because an update script forgot to account for some specific configuration or file left on disk.</span></span>

<span data-ttu-id="17773-152">Несмотря на то, что монолитные приложения могут использовать преимущества Docker, мы прервать только советами преимущества по.</span><span class="sxs-lookup"><span data-stu-id="17773-152">Although monolithic apps can benefit from Docker, we're touching on only the tips of the benefits.</span></span> <span data-ttu-id="17773-153">Увеличить преимущества управлении контейнерами открываются благодаря развертыванию с оркестраторами контейнеров, которые управляют различными экземплярами и жизненным циклом каждого экземпляра контейнера.</span><span class="sxs-lookup"><span data-stu-id="17773-153">The larger benefits of managing containers come from deploying with container orchestrators that manage the various instances and life cycle of each container instance.</span></span> <span data-ttu-id="17773-154">Когда вы разбиваете монолитное приложение на подсистемы, которые затем можно масштабировать, разрабатывать и развертывать по отдельности, вы переходите на уровень микрослужб.</span><span class="sxs-lookup"><span data-stu-id="17773-154">Breaking up the monolithic application into subsystems that can be scaled, developed, and deployed individually is your entry point into the realm of microservices.</span></span>

<span data-ttu-id="17773-155">Дополнительные сведения о том, как «lift- and -shift монолитных приложений с контейнерами и как можно модернизировать приложения, можно прочитать это дополнительные руководство Microsoft [модернизация существующих приложений .NET с помощью облака Azure и контейнеров Windows ](../../modernize-with-azure-and-containers/index.md), который вы также можете скачать как PDF-ФАЙЛ из <https://aka.ms/LiftAndShiftWithContainersEbook>.</span><span class="sxs-lookup"><span data-stu-id="17773-155">To learn about how to “lift and shift” monolithic applications with containers and how you can modernize your applications, you can read this additional Microsoft guide, [Modernize existing .NET applications with Azure cloud and Windows Containers](../../modernize-with-azure-and-containers/index.md), that you can also download as PDF from <https://aka.ms/LiftAndShiftWithContainersEbook>.</span></span>

## <a name="publish-a-single-docker-container-app-to-azure-app-service"></a><span data-ttu-id="17773-156">Публикация одного приложения контейнера Docker в службе приложений Azure</span><span class="sxs-lookup"><span data-stu-id="17773-156">Publish a single Docker container app to Azure App Service</span></span>

<span data-ttu-id="17773-157">Либо так, как вы хотите получить быстрой проверки контейнер, развернутый в Azure или приложение просто, одном контейнере приложения службы приложений Azure предоставляет отличный способ предоставления масштабируемых служб в одном контейнере.</span><span class="sxs-lookup"><span data-stu-id="17773-157">Either because you want to get a quick validation of a container deployed to Azure or because the app is simply a single-container app, Azure App Services provides a great way to provide scalable single-container services.</span></span>

<span data-ttu-id="17773-158">С помощью службы приложений Azure интуитивно понятный и можно начать и выполняется быстро, поскольку он предоставляет отличный Git интеграции кода, сборки в Microsoft Visual Studio, а также развернуть его непосредственно в Azure.</span><span class="sxs-lookup"><span data-stu-id="17773-158">Using Azure App Service is intuitive and you can get up and running quickly because it provides great Git integration to take your code, build it in Microsoft Visual Studio, and directly deploy it to Azure.</span></span> <span data-ttu-id="17773-159">Но, традиционно (с помощью нет Docker), при необходимости другие возможности, платформы или зависимости, которые не поддерживаются в службах приложений, необходимые для дождитесь пока не команда Azure обновит эти зависимости в службе приложений или переключается на другие службы, например Service Fabric, облачных служб или даже просто виртуальные машины, для которых есть дополнительные элемента управления и можно установить необходимый компонент или платформу для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="17773-159">But, traditionally (with no Docker), if you needed other capabilities, frameworks, or dependencies that aren't supported in App Services, you needed to wait for it until the Azure team updates those dependencies in App Service or switched to other services like Service Fabric, Cloud Services, or even plain VMs, for which you have further control and can install a required component or framework for your application.</span></span>

<span data-ttu-id="17773-160">Теперь, как показано на рисунке 4-4 при использовании Visual Studio 2017, поддержка контейнеров в службе приложений Azure дает возможность включать угодно в вашей среде приложений.</span><span class="sxs-lookup"><span data-stu-id="17773-160">Now, as shown in Figure 4-4, when using Visual Studio 2017, container support in Azure App Service gives you the ability to include whatever you want in your app environment.</span></span> <span data-ttu-id="17773-161">Если вы добавили зависимость в приложение, так как он выполняется в контейнере, вы получаете возможность, в том числе эти зависимости в образ Dockerfile или Docker.</span><span class="sxs-lookup"><span data-stu-id="17773-161">If you added a dependency to your app, because you're running it in a container, you get the capability of including those dependencies in your Dockerfile or Docker image.</span></span>

![Представление Visual Studio мастер должен опубликовать службу приложений Azure, выделение селектор для реестра контейнеров.](./media/image4.png)

<span data-ttu-id="17773-163">**Рис. 4-4**.</span><span class="sxs-lookup"><span data-stu-id="17773-163">**Figure 4-4**.</span></span> <span data-ttu-id="17773-164">Публикация контейнера в службе приложений Azure из приложений Visual Studio/контейнеры</span><span class="sxs-lookup"><span data-stu-id="17773-164">Publishing a container to Azure App Service from Visual Studio apps/containers</span></span>

<span data-ttu-id="17773-165">Рис. 4-4 также показано, что поток публикации отправляет образ через реестр контейнеров, который может быть реестр контейнеров Azure (реестр практически к вашим развертываниям в Azure и защищенных с помощью групп Azure Active Directory и учетных записей) или другой реестр Docker как и реестры Docker Hub или локально.</span><span class="sxs-lookup"><span data-stu-id="17773-165">Figure 4-4 also shows that the publish flow pushes an image through a Container Registry, which can be the Azure Container Registry (a registry near to your deployments in Azure and secured by Azure Active Directory groups and accounts) or any other Docker Registry like Docker Hub or on-premises registries.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="17773-166">[Назад](common-container-design-principles.md)
>[Вперед](state-and-data-in-docker-applications.md)</span><span class="sxs-lookup"><span data-stu-id="17773-166">[Previous](common-container-design-principles.md)
[Next](state-and-data-in-docker-applications.md)</span></span>
