---
title: Visual Studio Tools for Docker в Windows
description: Получите средства Docker, доступные в Visual Studio 2017 версии 15.7 и более поздние версии.
ms.date: 02/15/2019
ms.custom: vs-dotnet
ms.openlocfilehash: 2b6fdc33f9cf850cf9e52fca4a1a9754cd412567
ms.sourcegitcommit: 8699383914c24a0df033393f55db3369db728a7b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/15/2019
ms.locfileid: "65644647"
---
# <a name="use-docker-tools-in-visual-studio-2017-on-windows"></a><span data-ttu-id="11680-103">С помощью средств Docker в Visual Studio 2017 в Windows</span><span class="sxs-lookup"><span data-stu-id="11680-103">Use Docker Tools in Visual Studio 2017 on Windows</span></span>

<span data-ttu-id="11680-104">Рабочий процесс разработки при использовании Docker средств, включенных в Visual Studio 2017 версии 15.7 и более поздние версии, похоже на использование Visual Studio Code и Docker CLI (на самом деле он основан на том же Docker CLI), но его проще приступить к работе, упрощает процесс, и обеспечивает повышение производительности для сборки, запуска, а также объединять задач.</span><span class="sxs-lookup"><span data-stu-id="11680-104">The developer workflow when using the Docker Tools included in Visual Studio 2017 version 15.7 and later, is similar to using Visual Studio Code and Docker CLI (in fact, it's based on the same Docker CLI), but it's easier to get started, simplifies the process, and provides greater productivity for the build, run, and compose tasks.</span></span> <span data-ttu-id="11680-105">Его можно также запускать и отлаживать контейнеры с помощью обычного `F5` и `Ctrl+F5` ключи из Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="11680-105">It can also run and debug your containers via the usual `F5` and `Ctrl+F5` keys from Visual Studio.</span></span> <span data-ttu-id="11680-106">Вы можете даже отлаживать все решение, если его контейнеры определены в одном `docker-compose.yml` файл на уровне решения.</span><span class="sxs-lookup"><span data-stu-id="11680-106">You can even debug a whole solution if its containers are defined in the same `docker-compose.yml` file at the solution level.</span></span>

## <a name="configure-your-local-environment"></a><span data-ttu-id="11680-107">Настройка локальной среды</span><span class="sxs-lookup"><span data-stu-id="11680-107">Configure your local environment</span></span>

<span data-ttu-id="11680-108">В последних версиях Docker для Windows это проще, чем когда-либо для разработки приложений Docker так, как настройка довольно прост, как описано в следующих документах.</span><span class="sxs-lookup"><span data-stu-id="11680-108">With the latest versions of Docker for Windows, it's easier than ever to develop Docker applications because the setup is straightforward, as explained in the following references.</span></span>

> [!TIP]
> <span data-ttu-id="11680-109">Дополнительные сведения об установке Docker для Windows, перейдите к (<https://docs.docker.com/docker-for-windows/>).</span><span class="sxs-lookup"><span data-stu-id="11680-109">To learn more about installing Docker for Windows, go to (<https://docs.docker.com/docker-for-windows/>).</span></span>

## <a name="docker-support-in-visual-studio-2017"></a><span data-ttu-id="11680-110">Поддержка docker в Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="11680-110">Docker support in Visual Studio 2017</span></span>

<span data-ttu-id="11680-111">Существует два уровня поддержки Docker, который можно добавить в проект.</span><span class="sxs-lookup"><span data-stu-id="11680-111">There are two levels of Docker support you can add to a project.</span></span> <span data-ttu-id="11680-112">В проектах ASP.NET Core, можно просто добавить `Dockerfile` файл в проект, включение поддержки Docker.</span><span class="sxs-lookup"><span data-stu-id="11680-112">In ASP.NET Core projects, you can just add a `Dockerfile` file to the project by enabling Docker support.</span></span> <span data-ttu-id="11680-113">На следующем уровне находится поддержка оркестрации контейнера, который добавляет `Dockerfile` в проект (если он еще не существует) и `docker-compose.yml` файл на уровне решения.</span><span class="sxs-lookup"><span data-stu-id="11680-113">The next level is container orchestration support, which adds a `Dockerfile` to the project (if it doesn't already exist) and a `docker-compose.yml` file at the solution level.</span></span> <span data-ttu-id="11680-114">Поддержка оркестрации контейнера, с помощью Docker Compose, добавляется по умолчанию в Visual Studio 2017 версий 15.0 для версии 15.7.</span><span class="sxs-lookup"><span data-stu-id="11680-114">Container orchestration support, via Docker Compose, is added by default in Visual Studio 2017 versions 15.0 to 15.7.</span></span> <span data-ttu-id="11680-115">Поддержка оркестрации контейнеров — это компонент согласием в Visual Studio 2017 версии 15,8 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="11680-115">Container orchestration support is an opt-in feature in Visual Studio 2017 versions 15.8 or later.</span></span> <span data-ttu-id="11680-116">Версия 15.8 является более поздней версии поддерживает Docker Compose и Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="11680-116">Version 15.8 an later support Docker Compose and Service Fabric.</span></span>

<span data-ttu-id="11680-117">**Добавить > поддержка Docker** и **Добавить > поддержка оркестратора контейнеров** команды, находятся в контекстном меню (или контекстное меню) узла проекта для проекта ASP.NET Core в  **Обозреватель решений**, как показано на рис. 4-31:</span><span class="sxs-lookup"><span data-stu-id="11680-117">The **Add > Docker Support** and **Add > Container Orchestrator Support** commands are located on the right-click menu (or context menu) of the project node for an ASP.NET Core project in **Solution Explorer**, as shown in Figure 4-31:</span></span>

![Добавление поддержки Docker из меню в Visual Studio](./media/add-docker-support-menu.png)

<span data-ttu-id="11680-119">**Рис. 4-31**.</span><span class="sxs-lookup"><span data-stu-id="11680-119">**Figure 4-31**.</span></span> <span data-ttu-id="11680-120">Добавление поддержки Docker в проект Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="11680-120">Adding Docker support to a Visual Studio 2017 project</span></span>

### <a name="add-docker-support"></a><span data-ttu-id="11680-121">Добавление поддержки Docker</span><span class="sxs-lookup"><span data-stu-id="11680-121">Add Docker support</span></span>

<span data-ttu-id="11680-122">Можно добавить поддержку Docker в существующий проект ASP.NET Core, выбрав **добавить** > **Docker поддерживает** в **обозревателе решений**.</span><span class="sxs-lookup"><span data-stu-id="11680-122">You can add Docker support to an existing ASP.NET Core project by selecting **Add** > **Docker Support** in **Solution Explorer**.</span></span> <span data-ttu-id="11680-123">Можно также включить поддержку Docker во время создания проекта, выбрав **Включение поддержки Docker** в **новый веб-приложение ASP.NET Core** диалоговое окно, которое открывается при нажатии **ОК** в **новый проект** диалоговое окно, как показано на рис. 4-32.</span><span class="sxs-lookup"><span data-stu-id="11680-123">You can also enable Docker support during project creation by selecting **Enable Docker Support** in the **New ASP.NET Core Web Application** dialog box that opens after you click **OK** in the **New Project** dialog box, as shown in Figure 4-32.</span></span>

![Включение поддержки Docker для нового веб-приложения ASP.NET Core в Visual Studio](./media/enable-docker-support-visual-studio.png)

<span data-ttu-id="11680-125">**Рис. 4-32.**</span><span class="sxs-lookup"><span data-stu-id="11680-125">**Figure 4-32**.</span></span> <span data-ttu-id="11680-126">Включить поддержку Docker во время создания проекта в Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="11680-126">Enable Docker support during project creation in Visual Studio 2017</span></span>

<span data-ttu-id="11680-127">При добавлении или включить поддержку Docker, Visual Studio добавляет *Dockerfile* файл в проект.</span><span class="sxs-lookup"><span data-stu-id="11680-127">When you add or enable Docker support, Visual Studio adds a *Dockerfile* file to the project.</span></span>

> [!NOTE]
> <span data-ttu-id="11680-128">Когда вы включаете поддержку Docker Compose во время создания проекта для проекта ASP.NET (.NET Framework, не проект .NET Core), как показано на рис. 4-33, также добавляется поддержка оркестрации контейнеров.</span><span class="sxs-lookup"><span data-stu-id="11680-128">When you enable Docker Compose support during project creation for a ASP.NET project (.NET Framework, not a .NET Core project) as shown in Figure 4-33, container orchestration support is also added.</span></span>

![Включение поддержки Docker Compose для проекта ASP.NET](media/enable-docker-compose-support.png)

<span data-ttu-id="11680-130">**Рис. 4-33.**</span><span class="sxs-lookup"><span data-stu-id="11680-130">**Figure 4-33**.</span></span> <span data-ttu-id="11680-131">Включение поддержки Docker Compose для проекта ASP.NET в Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="11680-131">Enabling Docker Compose support for an ASP.NET project in Visual Studio 2017</span></span>

### <a name="add-container-orchestration-support"></a><span data-ttu-id="11680-132">Добавление поддержки оркестрации контейнеров</span><span class="sxs-lookup"><span data-stu-id="11680-132">Add container orchestration support</span></span>

<span data-ttu-id="11680-133">Создание многоконтейнерного решения следует добавьте поддержку оркестрации контейнера в проекты.</span><span class="sxs-lookup"><span data-stu-id="11680-133">When you want to compose a multi-container solution, add container orchestration support to your projects.</span></span> <span data-ttu-id="11680-134">Это позволяет выполнять и отлаживать группу контейнеров (всего решения) в то же время, если они определяются в том же *docker-compose.yml* файл.</span><span class="sxs-lookup"><span data-stu-id="11680-134">This lets you run and debug a group of containers (a whole solution) at the same time if they're defined in the same *docker-compose.yml* file.</span></span>

<span data-ttu-id="11680-135">Чтобы добавить поддержку оркестрации контейнера, щелкните правой кнопкой мыши узел решения или проекта в **обозревателе решений**и выберите **Добавить > поддерживает Оркестрации контейнера**.</span><span class="sxs-lookup"><span data-stu-id="11680-135">To add container orchestration support, right-click on the solution or project node in **Solution Explorer**, and choose **Add > Container Orchestration Support**.</span></span> <span data-ttu-id="11680-136">Затем выберите **Docker Compose** или **Service Fabric** для управления контейнерами.</span><span class="sxs-lookup"><span data-stu-id="11680-136">Then choose **Docker Compose** or **Service Fabric** to manage the containers.</span></span>

<span data-ttu-id="11680-137">После добавления поддержки оркестрации контейнера в проект, вы видите добавлен в проект файл Dockerfile и **docker-compose** папка добавлена в решение в **обозревателе решений**, как показано на рис. 4-34:</span><span class="sxs-lookup"><span data-stu-id="11680-137">After you add container orchestration support to your project, you see a Dockerfile added to the project and a **docker-compose** folder added to the solution in **Solution Explorer**, as shown in Figure 4-34:</span></span>

![Файлы Docker в обозревателе решений Visual Studio](media/docker-support-solution-explorer.png)

<span data-ttu-id="11680-139">**Рис. 4-34**.</span><span class="sxs-lookup"><span data-stu-id="11680-139">**Figure 4-34**.</span></span> <span data-ttu-id="11680-140">Файлы docker в обозревателе решений в Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="11680-140">Docker files in Solution Explorer in Visual Studio 2017</span></span>

<span data-ttu-id="11680-141">Если файл *docker-compose.yml* уже существует, Visual Studio просто добавит в него необходимые строки кода конфигурации.</span><span class="sxs-lookup"><span data-stu-id="11680-141">If *docker-compose.yml* already exists, Visual Studio just adds the required lines of configuration code to it.</span></span>

## <a name="configure-docker-tools"></a><span data-ttu-id="11680-142">Настройка средств Docker</span><span class="sxs-lookup"><span data-stu-id="11680-142">Configure Docker tools</span></span>

<span data-ttu-id="11680-143">В главном меню выберите **средства > Параметры**и разверните **контейнера Инструменты > Параметры**.</span><span class="sxs-lookup"><span data-stu-id="11680-143">From the main menu, choose **Tools > Options**, and expand **Container Tools > Settings**.</span></span> <span data-ttu-id="11680-144">Параметры средства контейнера отображаются.</span><span class="sxs-lookup"><span data-stu-id="11680-144">The container tools settings appear.</span></span>

![Docker в Visual Studio tools параметры отображения: Автоматически извлекать требуемые образы Docker при загрузке проекта, автоматически запускать контейнеры в фоновом режиме, автоматически завершить контейнеров в закройте решение и не запрашивать доверяющем SSL-сертификат.](./media/visual-studio-docker-tools-options.png)

<span data-ttu-id="11680-146">**Рис. 4-35**.</span><span class="sxs-lookup"><span data-stu-id="11680-146">**Figure 4-35**.</span></span> <span data-ttu-id="11680-147">Параметры средств docker</span><span class="sxs-lookup"><span data-stu-id="11680-147">Docker Tools Options</span></span>

<span data-ttu-id="11680-148">Следующая таблица поможет вам решить, как задавать эти параметры.</span><span class="sxs-lookup"><span data-stu-id="11680-148">The following table might help you decide how to set these options.</span></span>

| <span data-ttu-id="11680-149">name</span><span class="sxs-lookup"><span data-stu-id="11680-149">Name</span></span> | <span data-ttu-id="11680-150">По умолчанию</span><span class="sxs-lookup"><span data-stu-id="11680-150">Default Setting</span></span> | <span data-ttu-id="11680-151">Применение</span><span class="sxs-lookup"><span data-stu-id="11680-151">Applies To</span></span> | <span data-ttu-id="11680-152">Описание</span><span class="sxs-lookup"><span data-stu-id="11680-152">Description</span></span> |
| -----|:---------------:|:----------:| ----------- |
| <span data-ttu-id="11680-153">Автоматически извлекать требуемые образы Docker при загрузке проекта</span><span class="sxs-lookup"><span data-stu-id="11680-153">Automatically pull required Docker images on project load</span></span> | <span data-ttu-id="11680-154">включить</span><span class="sxs-lookup"><span data-stu-id="11680-154">On</span></span> | <span data-ttu-id="11680-155">Docker Compose</span><span class="sxs-lookup"><span data-stu-id="11680-155">Docker Compose</span></span> | <span data-ttu-id="11680-156">Для повышения производительности при загрузке проектов Visual Studio запустит операцию извлечения Docker в фоновом режиме, когда вы будете готовы для выполнения кода, уже будет загружен образ или находится в процессе загрузки.</span><span class="sxs-lookup"><span data-stu-id="11680-156">For increased performance when loading projects, Visual Studio will start a Docker pull operation in the background so that when you're ready to run your code, the image is already downloaded or in the process of downloading.</span></span> <span data-ttu-id="11680-157">Если вам нужно просто загрузить проекты и просмотр кода, можно отключить это во избежание загрузки образов контейнеров, которые не нужны.</span><span class="sxs-lookup"><span data-stu-id="11680-157">If you're just loading projects and browsing code, you can turn this off to avoid downloading container images you don't need.</span></span> |
| <span data-ttu-id="11680-158">Автоматически запускать контейнеры в фоновом режиме</span><span class="sxs-lookup"><span data-stu-id="11680-158">Automatically start containers in background</span></span> | <span data-ttu-id="11680-159">включить</span><span class="sxs-lookup"><span data-stu-id="11680-159">On</span></span> | <span data-ttu-id="11680-160">Docker Compose</span><span class="sxs-lookup"><span data-stu-id="11680-160">Docker Compose</span></span> | <span data-ttu-id="11680-161">Еще раз для повышения производительности Visual Studio создает контейнер с подключенных томов готова к после построения и запуска контейнера.</span><span class="sxs-lookup"><span data-stu-id="11680-161">Again for increased performance, Visual Studio creates a container with volume mounts ready for when you build and run your container.</span></span> <span data-ttu-id="11680-162">Если вы хотите управлять, при создании контейнера, отключите этот параметр.</span><span class="sxs-lookup"><span data-stu-id="11680-162">If you want to control when your container is created, turn this off.</span></span> |
| <span data-ttu-id="11680-163">Автоматически kill контейнеров при закрытии решения</span><span class="sxs-lookup"><span data-stu-id="11680-163">Automatically kill containers on solution close</span></span> | <span data-ttu-id="11680-164">включить</span><span class="sxs-lookup"><span data-stu-id="11680-164">On</span></span> | <span data-ttu-id="11680-165">Docker Compose</span><span class="sxs-lookup"><span data-stu-id="11680-165">Docker Compose</span></span> | <span data-ttu-id="11680-166">Отключите этот параметр, если вы хотите контейнеры для вашего решения продолжить выполнение после закрыть Visual Studio или решение.</span><span class="sxs-lookup"><span data-stu-id="11680-166">Turn this off if you would like containers for your solution to continue to run after closing the solution or closing Visual Studio.</span></span> |
| <span data-ttu-id="11680-167">Не запрашивать доверяющем SSL-сертификату localhost</span><span class="sxs-lookup"><span data-stu-id="11680-167">Do not prompt for trusting localhost SSL certificate</span></span> | <span data-ttu-id="11680-168">Off</span><span class="sxs-lookup"><span data-stu-id="11680-168">Off</span></span> | <span data-ttu-id="11680-169">Проекты ASP.NET Core 2.2</span><span class="sxs-lookup"><span data-stu-id="11680-169">ASP.NET Core 2.2 projects</span></span> | <span data-ttu-id="11680-170">Если SSL-сертификату localhost не является доверенным, Visual Studio предложит каждый раз при запуске проекта, если этот флажок установлен.</span><span class="sxs-lookup"><span data-stu-id="11680-170">If the localhost SSL certificate is not trusted, Visual Studio will prompt every time you run your project, unless this checkbox is checked.</span></span> |

> [!WARNING]
> <span data-ttu-id="11680-171">Если SSL-сертификату localhost не является доверенным и установите флажок, чтобы отключить запрос, веб-запросы HTTPS может завершиться ошибкой во время выполнения в своем приложении или службе.</span><span class="sxs-lookup"><span data-stu-id="11680-171">If the localhost SSL certificate is not trusted, and you check the box to suppress prompting, then HTTPS web requests might fail at runtime in your app or service.</span></span> <span data-ttu-id="11680-172">В этом случае снимите флажок **не запрашивать** флажок, запустите проект и указывать доверия в командной строке.</span><span class="sxs-lookup"><span data-stu-id="11680-172">In that case, uncheck the **Do not prompt** checkbox, run your project, and indicate trust at the prompt.</span></span>

> [!TIP]
> <span data-ttu-id="11680-173">Дополнительные сведения о реализации служб и использование набора средств Visual Studio для Docker в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="11680-173">For further details on the services implementation and use of Visual Studio Tools for Docker, read the following articles:</span></span>
>
><span data-ttu-id="11680-174">Отладка приложений в локальном контейнере Docker: <https://docs.microsoft.com/azure/vs-azure-tools-docker-edit-and-refresh></span><span class="sxs-lookup"><span data-stu-id="11680-174">Debugging apps in a local Docker container: <https://docs.microsoft.com/azure/vs-azure-tools-docker-edit-and-refresh></span></span>
>
><span data-ttu-id="11680-175">Развертывание контейнера ASP.NET в реестр контейнеров с помощью Visual Studio: <https://docs.microsoft.com/azure/vs-azure-tools-docker-hosting-web-apps-in-docker></span><span class="sxs-lookup"><span data-stu-id="11680-175">Deploy an ASP.NET container to a container registry using Visual Studio: <https://docs.microsoft.com/azure/vs-azure-tools-docker-hosting-web-apps-in-docker></span></span>

>[!div class="step-by-step"]
><span data-ttu-id="11680-176">[Назад](docker-apps-inner-loop-workflow.md)
>[Вперед](set-up-windows-containers-with-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="11680-176">[Previous](docker-apps-inner-loop-workflow.md)
[Next](set-up-windows-containers-with-powershell.md)</span></span>
