---
title: Разработка конструктора
ms.date: 10/22/2008
ms.technology: dotnet-standard
helpviewer_keywords:
- member design guidelines, constructors
- constructors, design guidelines
- instance constructors
- type constructors
- virtual members
- constructors, types
- default constructors
- static constructors
ms.assetid: b4496afe-5fa7-4bb0-85ca-70b0ef21e6fc
author: KrzysztofCwalina
ms.openlocfilehash: 68192e3b75a120c73b82c34005d4dee650540bf3
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61925467"
---
# <a name="constructor-design"></a>Разработка конструктора
Существует два типа конструкторов: Введите конструкторы и конструкторы экземпляров.  
  
 Конструкторы типов являются статическими и выполняются средой CLR, прежде чем использовать тип. Конструкторы экземпляров запускаемых при создании экземпляра типа.  
  
 Конструкторы типов не могут принимать любые параметры. Конструкторы экземпляров можно. Конструкторы экземпляров, которые не принимают никаких параметров, часто называются конструкторы по умолчанию.  
  
 Конструкторы — это наиболее удобный способ создания экземпляров типа. Большинство разработчиков будет поиска и попробуйте использовать конструктор, прежде чем они подумать о других способах создания экземпляров (например, фабричные методы).  
  
 **✓ CONSIDER** предоставляет простой, в идеальном случае по умолчанию, конструкторы.  
  
 Простой конструктор имеет очень небольшое количество параметров, и все параметры являются примитивами или перечисления. Такой простой конструкторы повысить удобство использования, платформы.  
  
 **✓ CONSIDER** вместо статический фабричный метод конструктора, если семантика требуемой операции не сопоставляются непосредственно конструкцию нового экземпляра или следующие рекомендации по разработке конструктора неприменимыми.  
  
 **✓ DO** используйте параметры конструкторов как ярлыки для установки значений основных свойств.  
  
 Нет разницы в семантике между следует с помощью пустого конструктора, следуют некоторые наборы свойств и конструктор с несколькими аргументами.  
  
 **✓ DO** использовать то же имя для параметров конструктора и свойства, если параметры конструктора используются только для установки свойства.  
  
 Единственное различие между таких параметров и свойств должны регистр.  
  
 **✓ DO** минимальных затрат в конструкторе.  
  
 Конструктор не должен делать параметры конструктора объем работы, отличных от записи. Затраты на любые обработки должен быть задержан, только при необходимости.  
  
 **✓ DO** вызывайте исключения из конструкторов экземпляров, если это необходимо.  
  
 **✓ DO** явно объявить открытый конструктор по умолчанию в классах, если такой конструктор является обязательным.  
  
 Если явно не объявлять конструкторы в типе, множества языков (например, C#) автоматически добавит открытый конструктор по умолчанию. (Абстрактные классы получить защищенный конструктор).  
  
 Добавление параметризованный конструктор класса не позволяет компилятору добавление конструктор по умолчанию. Часто в результате случайного критические изменения.  
  
 **X AVOID** явное объявление конструкторы по умолчанию для структуры.  
  
 Это делает создание массива быстрее, так как если не определен конструктор по умолчанию, она не должна выполняться на каждый слот в массиве. Обратите внимание на то, что большинство компиляторов, включая C#, не разрешают структуры могут иметь конструкторы без параметров по этой причине.  
  
 **X AVOID** вызов виртуальные члены объекта внутри его конструктор.  
  
 Вызов виртуальный член приведет к наиболее производный переопределение, чтобы вызываться, даже если конструктор наиболее производный тип не полностью еще не выполнялся.  
  
### <a name="type-constructor-guidelines"></a>Конструктор правила типов  
 **✓ DO** сделать частным статические конструкторы.  
  
 Статический конструктор, также известный как конструктор класса используется для инициализации типа. Среда CLR вызывает статический конструктор перед созданием первого экземпляра типа или вызываются все статические члены этого типа. Пользователь имеет не контролирует, когда вызывается статический конструктор. Если статический конструктор не является закрытым, может быть вызвана код, отличный от среды CLR. В зависимости от операций, выполняемых в конструкторе это может привести к непредвиденному поведению. Компилятор C# вызывает статические конструкторы частной.  
  
 **X DO NOT** вызывайте исключения из статических конструкторов.  
  
 Если исключение создается конструктор типа, тип не может использоваться в текущем домене приложения.  
  
 **✓ CONSIDER** Инициализация встроенного статических полей, а не явно с использованием статических конструкторов, так как среда выполнения может оптимизировать производительность типов, которые не являются явно определенного статического конструктора.  
  
 *Фрагменты: © Корпорация Майкрософт (Microsoft Corporation), 2005, 2009. Все права защищены.*  
  
 *Перепечатано разрешением Пирсона для образовательных учреждений, Inc. из [рекомендации по разработке Framework: Условные обозначения, стили и шаблоны для библиотеки .NET для повторного использования, 2nd Edition](https://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619) Кшиштов Квалина и Брэд Абрамс, опубликованных 22 октября 2008 г., издательство Addison-Wesley Professional как части цикла разработки Microsoft Windows.*  
  
## <a name="see-also"></a>См. также

- [Правила разработки членов](../../../docs/standard/design-guidelines/member.md)
- [Рекомендации по проектированию на основе Framework](../../../docs/standard/design-guidelines/index.md)
