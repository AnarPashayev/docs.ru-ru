---
title: Создание исключений
ms.date: 10/22/2008
ms.technology: dotnet-standard
helpviewer_keywords:
- exceptions, throwing
- explicitly throwing exceptions
- throwing exceptions, design guidelines
ms.assetid: 5388e02b-52f5-460e-a2b5-eeafe60eeebe
ms.openlocfilehash: 7d1b63e5fde57cbe37a1250d16b6bf74a2d5dc8e
ms.sourcegitcommit: 5f236cd78cf09593c8945a7d753e0850e96a0b80
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2020
ms.locfileid: "75709404"
---
# <a name="exception-throwing"></a>Создание исключений
Рекомендации по генерации исключений, описанные в этом разделе, занимают хорошее определение значения сбоя при выполнении. Сбой выполнения происходит каждый раз, когда член не может сделать то, что он был разработан (что подразумевает имя члена). Например, если метод `OpenFile` не может вернуть открытый обработчик файла вызывающему объекту, это будет считаться ошибкой при выполнении.  
  
 Большинство разработчиков хорошо знакомы с использованием исключений для ошибок использования, таких как деление на ноль или ссылки со значением NULL. В платформе исключения используются для всех условий ошибок, включая ошибки выполнения.  
  
 **X DO NOT** возвращенный код ошибки.  
  
 Исключения являются основным средством формирования отчетов об ошибках в платформах.  
  
 **✓ DO** отчета сбоев при выполнении путем вызова исключений.  
  
 **✓ CONSIDER** завершение процесса путем вызова `System.Environment.FailFast` (функции .NET Framework версии 2.0) вместо создания исключения при обнаружении в коде ситуации, когда он небезопасных для дальнейшего выполнения.  
  
 **X DO NOT** использовать исключения для обычного потока управления, если это возможно.  
  
 За исключением системных сбоев и операций с потенциальными состояниями гонки, конструкторы платформы должны проектировать интерфейсы API, чтобы пользователи могли писать код, который не создает исключения. Например, можно предоставить способ проверки предварительных условий перед вызовом члена, чтобы пользователи могли написать код, который не создает исключения.  
  
 Элемент, используемый для проверки предусловий другого элемента, часто называется тест-инженером, а член, фактически выполняющий работу, называется злодея.  
  
 Бывают случаи, когда шаблон Test-злодея может иметь неприемлемые затраты на производительность. В таких случаях следует учитывать так называемый шаблон Try-Parse (Дополнительные сведения см. в разделе [исключения и производительность](../../../docs/standard/design-guidelines/exceptions-and-performance.md) ).  
  
 **✓ CONSIDER** создание исключений влияет на производительность. Скорости создания свыше 100 в секунду, скорее всего, заметно повлияют на производительность большинства приложений.  
  
 **✓ DO** документ, все исключения, создаваемые публично вызываемыми членами из-за нарушения элемента контракта (а не системной ошибки) и обрабатывает их как часть вашего контракта.  
  
 Исключения, которые являются частью контракта, не должны изменяться от одной версии к следующей (т. е. тип исключения не должен изменяться, а новые исключения не должны добавляться).  
  
 **X DO NOT** имеет общих членов, которые можно либо throw или не на основе некоторых параметра.  
  
 **X DO NOT** иметь открытые члены, которые возвращают исключения в качестве возвращаемого значения или `out` параметра.  
  
 Возвращение исключений из общедоступных API, а не их создание, не нарушает многие преимущества отчетов об ошибках на основе исключений.  
  
 **✓ CONSIDER** с помощью методы построителя исключений.  
  
 Часто возникает исключение из разных мест. Чтобы избежать чрезмерного использования кода, используйте вспомогательные методы, которые создают исключения и инициализируют их свойства.  
  
 Кроме того, члены, которые создают исключения, не получают встроенные. Перемещение инструкции Throw в построителе может привести к встраиванию элемента.  
  
 **X DO NOT** вызывать исключения из блоков фильтрации исключений.  
  
 Если фильтр исключений вызывает исключение, исключение перехватывается средой CLR, а фильтр возвращает значение false. Это поведение не различается в результате применения фильтра и возвращает значение false явным образом и, следовательно, очень сложно отлаживать.  
  
 **X AVOID** явное создание исключений из блоков finally. Неявные исключения создаются в результате вызова вызывающих методов, которые являются приемлемыми.  
  
 *Части © 2005, 2009 Корпорация Майкрософт. Все права защищены.*  
  
 *Перепечатано с разрешения Pearson Education, Inc. из книги [Инфраструктура программных проектов. Соглашения, идиомы и шаблоны для многократно используемых библиотек .NET (2-е издание)](https://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619), авторы: Кржиштоф Цвалина (Krzysztof Cwalina) и Брэд Абрамс (Brad Abrams). Книга опубликована 22 октября 2008 г. издательством Addison-Wesley Professional в рамках серии, посвященной разработке для Microsoft Windows.*  
  
## <a name="see-also"></a>См. также:

- [Рекомендации по проектированию на основе Framework](../../../docs/standard/design-guidelines/index.md)
- [Правила разработки исключений](../../../docs/standard/design-guidelines/exceptions.md)
