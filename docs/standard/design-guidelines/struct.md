---
title: Разработка структур
ms.date: 10/22/2008
ms.technology: dotnet-standard
helpviewer_keywords:
- class library design guidelines [.NET Framework], structures
- deallocating structures
- allocating structures
- value types, structures
- structure design
- type design guidelines, structures
- structures [.NET Framework], design guidelines
ms.assetid: 1f48b2d8-608c-4be6-9ba4-d8f203ed9f9f
ms.openlocfilehash: 8841a30f1dd0420b2ea45740b1e33bde5199c3f9
ms.sourcegitcommit: 5f236cd78cf09593c8945a7d753e0850e96a0b80
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2020
ms.locfileid: "75709053"
---
# <a name="struct-design"></a>Разработка структур
Тип значения общего назначения чаще всего называется структурой и C# ключевым словом. В этом разделе приводятся рекомендации по проектированию общих структур.  
  
 **X не** предоставляют конструктор без параметров для структуры.  
  
 После этого правила можно создавать массивы структур без необходимости запуска конструктора для каждого элемента массива. Обратите C# внимание, что не разрешает структурам использовать конструкторы без параметров.  
  
 **X DO NOT** определение изменяемого значения типов.  
  
 У изменяемых типов значений есть несколько проблем. Например, когда метод считывания свойства возвращает тип значения, вызывающий объект получает копию. Поскольку копия создается неявным образом, разработчики могут не знать, что они изменяют копию, а не исходное значение. Кроме того, некоторые языки (динамические языки, в частности) имеют проблемы с использованием изменяемых типов значений, так как даже локальные переменные при разыменовании приводят к созданию копии.  
  
 **✓ DO** убедитесь, что состояние, где все экземпляров данных устанавливается равным нулю, false или null (при необходимости) является допустимым.  
  
 Это предотвращает случайное создание недопустимых экземпляров при создании массива структур.  
  
 **✓ DO** реализовать <xref:System.IEquatable%601> для типов значений.  
  
 Метод <xref:System.Object.Equals%2A?displayProperty=nameWithType> для типов значений приводит к тому, что упаковка и реализация по умолчанию не очень эффективны, поскольку в ней используется отражение. <xref:System.IEquatable%601.Equals%2A> могут иметь гораздо более высокую производительность и могут быть реализованы таким образом, чтобы не вызывать упаковку-преобразование.  
  
 **X DO NOT** явным образом увеличить <xref:System.ValueType>. На самом деле, большинство языков препятствуют этому.  
  
 Как правило, структуры могут быть очень полезными, но их следует использовать только для небольших, однострочных неизменяемых значений, которые не будут часто выдаваться в штучной упаковке.  
  
 *Части © 2005, 2009 Корпорация Майкрософт. Все права защищены.*  
  
 *Перепечатано с разрешения Pearson Education, Inc. из книги [Инфраструктура программных проектов. Соглашения, идиомы и шаблоны для многократно используемых библиотек .NET (2-е издание)](https://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619), авторы: Кржиштоф Цвалина (Krzysztof Cwalina) и Брэд Абрамс (Brad Abrams). Книга опубликована 22 октября 2008 г. издательством Addison-Wesley Professional в рамках серии, посвященной разработке для Microsoft Windows.*  
  
## <a name="see-also"></a>См. также:

- [Рекомендации по разработке типов](../../../docs/standard/design-guidelines/type.md)
- [Рекомендации по проектированию на основе Framework](../../../docs/standard/design-guidelines/index.md)
- [Выбор между классом и структурой](../../../docs/standard/design-guidelines/choosing-between-class-and-struct.md)
