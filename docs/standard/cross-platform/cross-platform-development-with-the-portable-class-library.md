---
title: Кроссплатформенная разработка с переносной библиотекой классов
description: Быстрое и простое создание кросс-платформенных приложений и библиотек для платформ Майкрософт с помощью типа проекта переносимой библиотеки классов в .NET.
ms.date: 09/17/2018
ms.technology: dotnet-standard
helpviewer_keywords:
- Portable Class Library [.NET Framework]
- targeting multiple platforms
- multiple platforms, targeting
ms.assetid: c31e1663-c164-4e65-b66d-d3aa8750a154
ms.openlocfilehash: be1a49f7da7ce98f9e5e3ff8d927ce5230bfa8d8
ms.sourcegitcommit: 5fd4696a3e5791b2a8c449ccffda87f2cc2d4894
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/15/2020
ms.locfileid: "84769149"
---
# <a name="cross-platform-development-with-the-portable-class-library"></a>Кросс-платформенная разработка с помощью переносимой библиотеки классов

Тип проекта Переносимая библиотека классов в Visual Studio помогает быстро и легко создавать межплатформенные приложения и библиотеки для платформ Майкрософт.

[!INCLUDE[standard](../../../includes/pcl-to-standard.md)]

Переносимые библиотеки классов уменьшают временные и трудовые затраты на разработку и тестирования кода. Используйте этот тип проекта для создания и сборки переносимых .NET Frameworkных сборок, а затем соберите ссылки на эти сборки из приложений, предназначенных для нескольких платформ, таких как .NET Framework, iOS или Mac.

Даже после создания проекта переносимой библиотеки классов в Visual Studio и начала работы над проектом вы сможете изменить целевые платформы. Visual Studio компилирует библиотеку с новыми сборками, что позволяет обнаруживать изменения, которые необходимо внести в код.

## <a name="create-a-portable-class-library-project"></a>Создание проекта переносимой библиотеки классов

Чтобы создать переносимую библиотеку классов, используйте шаблон, предоставленный в Visual Studio. Создайте новый проект (**файл**  >  **создать проект**) и в диалоговом окне **Новый проект** выберите язык программирования (Visual C# или Visual Basic). Затем выберите шаблон **Библиотека классов (с унаследованным переносом)** . Введите имя проекта и нажмите кнопку **ОК**.

Откроется диалоговое окно **Добавление переносимой библиотеки классов** . Выберите несколько целевых объектов и нажмите кнопку **ОК**.

![Добавление целевых объектов переносимой библиотеки классов в Visual Studio](media/add-portable-class-library.png)

## <a name="change-targets"></a>Изменить целевые объекты

Вы можете изменить целевые платформы проекта переносимой библиотеки классов при его создании или после начала разработки. Если вы хотите изменить целевые объекты после создания проекта, в **Обозреватель решений**откройте контекстное меню проекта переносимой библиотеки классов (не решение), а затем выберите пункт **свойства**. На странице Свойства проекта на вкладке **Библиотека** отображаются платформы, для которых в настоящий момент предназначен проект.

![Свойства проекта для переносимой библиотеки классов в Visual Studio](media/pcl-project-properties.png)

Чтобы добавить или удалить целевые объекты, нажмите кнопку **изменить** , а затем снимите соответствующие флажки.

При изменении целевых платформ API-интерфейсы, доступные для разработки проекта, изменятся в соответствии с выбранными платформами. Visual Studio отображает ошибки и предупреждения после изменения целевых платформ.

Если необходимо оценить переносимость сборок перед внесением изменений в Visual Studio, можно использовать [анализатор переносимости .NET](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer).

## <a name="supported-types-and-members"></a>Поддерживаемые типы и члены

Типы и члены, доступные в проектах переносимой библиотеки классов, ограничены несколькими факторами совместимости:

- они должны быть общими для выбранных целевых платформ;

- они должны вести себя аналогичным образом на всех этих платформах;

- они не должны быть кандидатами на вывод из употребления;

- они должны иметь смысл в переносимой среде, особенно если вспомогательные члены не являются переносимыми.

Если член поддерживается в переносимой библиотеке классов и для выбранных целевых платформ, он будет показан в IntelliSense в вашем проекте. Однако помните, что интерфейс API может поддерживаться в переносимой библиотеки классов, но возможность его использования зависит от выбранных целевых платформ.

## <a name="api-differences-in-the-portable-class-library"></a>Отличия API в переносимой библиотеке классов

Для обеспечения совместимости сборок переносимой библиотеки классов на всех поддерживаемых платформах некоторые члены в переносимой библиотеке классов были немного изменены.

## <a name="use-the-portable-class-library"></a>Использование переносимой библиотеки классов

После построения проекта переносимой библиотеки классов просто добавьте ссылку на нее в других проектах. Можно сделать ссылку на проект или на конкретные сборки, содержащие классы, к которым требуется доступ.

Для запуска приложения, ссылающегося на сборку переносимой библиотеки классов, на компьютере должны быть установлены требуемые (или более поздние) версии целевых платформ. Visual Studio содержит все необходимые платформы, поэтому приложение можно запустить без дальнейших изменений на компьютере, который использовался для его разработки.

### <a name="deploy-a-universal-windows-app"></a>Развертывание универсального приложения Windows

При создании универсального приложения Windows, которое ссылается на сборку переносимой библиотеки классов, все, что необходимо для развертывания приложения, включается в пакет приложения, и дальнейшие действия не требуются.

### <a name="deploy-a-net-framework-app"></a>Развертывание .NET Framework приложения

При развертывании приложения .NET Framework, в котором имеется ссылка на сборку переносимой библиотеки классов, необходимо задать зависимость от нужной версии платформы .NET Framework. Задание этой зависимости обеспечивает установку нужной версии вместе с приложением.

- Чтобы создать зависимость с развертыванием ClickOnce: в **Обозреватель решений**выберите узел проекта для проекта, который необходимо опубликовать. (Это проект, который ссылается на проект переносимой библиотеки классов.) В строке меню выберите пункт Свойства **проекта**  >  **Properties**, а затем перейдите на вкладку **Публикация** . На странице **Публикация** выберите **необходимые компоненты**. Отметьте требуемую версию платформы .NET Framework как необходимый компонент.

- Чтобы создать зависимость с проектом установки, в **Обозреватель решений**выберите проект установки. В строке меню выберите свойства **проекта**  >  **Properties**  >  **необходимые условия**. Отметьте требуемую версию платформы .NET Framework как необходимый компонент.

Дополнительные сведения о развертывании .NET Framework приложений см. в статье [Deployment Guide for Developers](../../framework/deployment/deployment-guide-for-developers.md).

## <a name="see-also"></a>Дополнительно

- [Использование переносимой библиотеки классов с MVVM](using-portable-class-library-with-model-view-view-model.md)
- [Ресурсы приложений для библиотек, предназначенных для нескольких платформ](app-resources-for-libraries-that-target-multiple-platforms.md)
- [.NET Portability Analyzer](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer)
- [Поддержка приложений для Магазина Windows и среды выполнения Windows в .NET Framework](support-for-windows-store-apps-and-windows-runtime.md)
- [Развертывание](../../framework/deployment/net-framework-applications.md)
