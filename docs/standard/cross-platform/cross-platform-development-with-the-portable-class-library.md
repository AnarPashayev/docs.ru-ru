---
title: Кроссплатформенная разработка с переносной библиотекой классов
ms.date: 09/17/2018
ms.technology: dotnet-standard
helpviewer_keywords:
- Portable Class Library [.NET Framework]
- targeting multiple platforms
- multiple platforms, targeting
ms.assetid: c31e1663-c164-4e65-b66d-d3aa8750a154
ms.openlocfilehash: 7caddd7361b8f364762fb4357e35cb918ae99263
ms.sourcegitcommit: 7980a91f90ae5eca859db7e6bfa03e23e76a1a50
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/13/2020
ms.locfileid: "81242807"
---
# <a name="cross-platform-development-with-the-portable-class-library"></a>Кросс-платформная разработка с портативной библиотекой класса

Тип проекта Portable Class Library в Visual Studio поможет вам быстро и легко создавать кросс-платформенные приложения и библиотеки для платформ Майкрософт.

[!INCLUDE[standard](../../../includes/pcl-to-standard.md)]

Переносимые библиотеки классов уменьшают временные и трудовые затраты на разработку и тестирования кода. Используйте этот тип проекта для записи и создания портативных сборок .NET Framework, а затем ссылки на сборки из приложений, ориентированных на несколько платформ, таких как .NET Framework, iOS или Mac.

Даже после создания проекта переносимой библиотеки классов в Visual Studio и начала работы над проектом вы сможете изменить целевые платформы. Visual Studio компилирует библиотеку с новыми сборками, что помогает определить изменения, необходимые для внесения изменений в код.

## <a name="create-a-portable-class-library-project"></a>Создание проекта Портативной библиотеки классов

Для создания портативной библиотеки класса используйте шаблон, предоставленный в Visual Studio. Создайте новый проект **(File** > **New Project),** а в диалоговом окне **нового проекта** выберите язык программирования (Visual C или Visual Basic). Затем выберите шаблон **Библиотеки класса (Legacy Portable).** Введите имя для вашего проекта и выберите **OK**.

Отображаемый диалоговый ящик **«Добавить портативный класс библиотеки».** Выберите две или более целей, а затем выберите **OK**.

![Добавление портативных целей библиотеки классов в Visual Studio](media/add-portable-class-library.png)

## <a name="change-targets"></a>Изменение целевых показателей

Можно изменить целевые платформы проекта библиотеки портативного класса при его создании или после начала разработки. Если вы хотите изменить целевые показатели после создания проекта в **Solution Explorer,** откройте меню ярлыков для проекта Portable Class Library (не решение), а затем выберите **Свойства.** На странице свойств проекта вкладка **Библиотека** показывает платформы, на которые в настоящее время нацелен проект.

![Свойства проекта для Портативной библиотеки класса в визуальной студии](media/pcl-project-properties.png)

Чтобы добавить или удалить цели, выберите кнопку **изменения,** а затем выберите и очистите соответствующие флажки.

При изменении целевых платформ API-интерфейсы, доступные для разработки проекта, изменятся в соответствии с выбранными платформами. Visual Studio отображает ошибки и предупреждения после изменения целевых платформ.

Если вы хотите оценить портативность ваших сборок, прежде чем вносить изменения в Visual Studio, вы можете использовать [анализируемую портативность .NET.](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer)

## <a name="supported-types-and-members"></a>Поддерживаемые типы и члены

Типы и члены, доступные в проектах переносимой библиотеки классов, ограничены несколькими факторами совместимости:

- они должны быть общими для выбранных целевых платформ;

- они должны вести себя аналогичным образом на всех этих платформах;

- они не должны быть кандидатами на вывод из употребления;

- они должны иметь смысл в переносимой среде, особенно если вспомогательные члены не являются переносимыми.

Если член поддерживается в переносимой библиотеке классов и для выбранных целевых платформ, он будет показан в IntelliSense в вашем проекте. Однако помните, что интерфейс API может поддерживаться в переносимой библиотеки классов, но возможность его использования зависит от выбранных целевых платформ.

## <a name="api-differences-in-the-portable-class-library"></a>Отличия API в переносимой библиотеке классов

Для обеспечения совместимости сборок переносимой библиотеки классов на всех поддерживаемых платформах некоторые члены в переносимой библиотеке классов были немного изменены.

## <a name="use-the-portable-class-library"></a>Используйте портативную библиотеку класса

После построения проекта переносимой библиотеки классов просто добавьте ссылку на нее в других проектах. Можно сделать ссылку на проект или на конкретные сборки, содержащие классы, к которым требуется доступ.

Для запуска приложения, ссылающегося на сборку переносимой библиотеки классов, на компьютере должны быть установлены требуемые (или более поздние) версии целевых платформ. Visual Studio содержит все необходимые платформы, поэтому приложение можно запустить без дальнейших изменений на компьютере, который использовался для его разработки.

### <a name="deploy-a-universal-windows-app"></a>Развертывание универсального приложения Для Windows

При создании универсального приложения Windows, которое ссылается на сборку библиотеки портативных классов, все, что нужно для развертывания приложения, включено в пакет приложений, и никаких дальнейших шагов не требуется.

### <a name="deploy-a-net-framework-app"></a>Развертывание приложения .NET Framework

При развертывании приложения .NET Framework, в котором имеется ссылка на сборку переносимой библиотеки классов, необходимо задать зависимость от нужной версии платформы .NET Framework. Задание этой зависимости обеспечивает установку нужной версии вместе с приложением.

- Чтобы создать зависимость с развертыванием ClickOnce: In **Solution Explorer,** выберите узло проекта для проекта, который вы хотите опубликовать. (Это проект, который ссылается на проект Портативной библиотеки класса.) В панели меню выберите **Project** > **Properties,** а затем выберите вкладку **Publish.** На странице **Публикации** выберите **Предпосылки**. Отметьте требуемую версию платформы .NET Framework как необходимый компонент.

- Чтобы создать зависимость с проектом настройки: In **Solution Explorer**, выберите проект настройки. В меню-баре выберите предпосылки для свойств **Project** > **проектов.** > **Prerequisites** Отметьте требуемую версию платформы .NET Framework как необходимый компонент.

Для получения дополнительной информации о развертывании приложений .NET Framework [см.](../../../docs/framework/deployment/deployment-guide-for-developers.md)

## <a name="see-also"></a>См. также раздел

- [Использование переносимой библиотеки классов с MVVM](using-portable-class-library-with-model-view-view-model.md)
- [Ресурсы приложений для библиотек, ориентированных на несколько платформ](app-resources-for-libraries-that-target-multiple-platforms.md)
- [.NET Portability Analyzer](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer)
- [Поддержка приложений для Магазина Windows и среды выполнения Windows в .NET Framework](../../../docs/standard/cross-platform/support-for-windows-store-apps-and-windows-runtime.md)
- [Развертывание](../../../docs/framework/deployment/net-framework-applications.md)
