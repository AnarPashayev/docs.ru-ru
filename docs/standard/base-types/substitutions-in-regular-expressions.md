---
title: Подстановки в регулярных выражениях
description: Вы можете использовать подстановки для замены соответствующего текста с помощью регулярных выражений в .NET. Подстановки — это языковые элементы, которые распознаются только в шаблонах замены.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- regular expressions, substitutions
- replacement patterns
- metacharacters, substitutions
- .NET regular expressions, substitutions
- constructs, substitutions
- substitutions
ms.assetid: d1f52431-1c7d-4dc6-8792-6b988256892e
ms.openlocfilehash: f1cab01e7a6ee48bd01f65d4cc8a8a540fbabc61
ms.sourcegitcommit: d8020797a6657d0fbbdff362b80300815f682f94
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/24/2020
ms.locfileid: "95734209"
---
# <a name="substitutions-in-regular-expressions"></a><span data-ttu-id="4a92f-104">Подстановки в регулярных выражениях</span><span class="sxs-lookup"><span data-stu-id="4a92f-104">Substitutions in Regular Expressions</span></span>

<span data-ttu-id="4a92f-105">Подстановки — это языковые элементы, которые распознаются только в шаблонах замены.</span><span class="sxs-lookup"><span data-stu-id="4a92f-105">Substitutions are language elements that are recognized only within replacement patterns.</span></span> <span data-ttu-id="4a92f-106">Они используют шаблон регулярного выражения для определения всего текста или его части, предназначенной для замены совпадающего текста во входной строке.</span><span class="sxs-lookup"><span data-stu-id="4a92f-106">They use a regular expression pattern to define all or part of the text that is to replace matched text in the input string.</span></span> <span data-ttu-id="4a92f-107">Шаблон замены может включать одну или несколько подстановок вместе с литеральными символами.</span><span class="sxs-lookup"><span data-stu-id="4a92f-107">The replacement pattern can consist of one or more substitutions along with literal characters.</span></span> <span data-ttu-id="4a92f-108">Для перегруженных версий метода <xref:System.Text.RegularExpressions.Regex.Replace%2A?displayProperty=nameWithType> , имеющих параметр `replacement` , и для метода <xref:System.Text.RegularExpressions.Match.Result%2A?displayProperty=nameWithType> предоставляются шаблоны замены.</span><span class="sxs-lookup"><span data-stu-id="4a92f-108">Replacement patterns are provided to overloads of the <xref:System.Text.RegularExpressions.Regex.Replace%2A?displayProperty=nameWithType> method that have a `replacement` parameter and to the <xref:System.Text.RegularExpressions.Match.Result%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="4a92f-109">Эти методы заменяют совпавший шаблон шаблоном, определенным параметром `replacement` .</span><span class="sxs-lookup"><span data-stu-id="4a92f-109">The methods replace the matched pattern with the pattern that is defined by the `replacement` parameter.</span></span>  
  
 <span data-ttu-id="4a92f-110">Платформа .NET определяет элементы подстановки, перечисленные в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="4a92f-110">.NET defines the substitution elements listed in the following table.</span></span>  
  
|<span data-ttu-id="4a92f-111">Подстановка</span><span class="sxs-lookup"><span data-stu-id="4a92f-111">Substitution</span></span>|<span data-ttu-id="4a92f-112">Описание</span><span class="sxs-lookup"><span data-stu-id="4a92f-112">Description</span></span>|  
|------------------|-----------------|  
|<span data-ttu-id="4a92f-113">$ *число*</span><span class="sxs-lookup"><span data-stu-id="4a92f-113">$ *number*</span></span>|<span data-ttu-id="4a92f-114">Включает в строку замены последнюю подстроку, соответствующую группе записи, которая идентифицируется как *number*, где *number* — десятичное значение.</span><span class="sxs-lookup"><span data-stu-id="4a92f-114">Includes the last substring matched by the capturing group that is identified by *number*, where *number* is a decimal value, in the replacement string.</span></span> <span data-ttu-id="4a92f-115">Дополнительные сведения см. в разделе [Подстановка нумерованной группы](#substituting-a-numbered-group).</span><span class="sxs-lookup"><span data-stu-id="4a92f-115">For more information, see [Substituting a Numbered Group](#substituting-a-numbered-group).</span></span>|  
|<span data-ttu-id="4a92f-116">${ *name* }</span><span class="sxs-lookup"><span data-stu-id="4a92f-116">${ *name* }</span></span>|<span data-ttu-id="4a92f-117">Включает в строку замены последнюю подстроку, соответствующую именованной группе, обозначаемой как `(?<`*name*`> )` .</span><span class="sxs-lookup"><span data-stu-id="4a92f-117">Includes the last substring matched by the named group that is designated by `(?<`*name*`> )` in the replacement string.</span></span> <span data-ttu-id="4a92f-118">Дополнительные сведения см. в разделе [Подстановка именованной группы](#substituting-a-named-group).</span><span class="sxs-lookup"><span data-stu-id="4a92f-118">For more information, see [Substituting a Named Group](#substituting-a-named-group).</span></span>|  
|$$|<span data-ttu-id="4a92f-119">Включает один литерал "$" в строку замены.</span><span class="sxs-lookup"><span data-stu-id="4a92f-119">Includes a single "$" literal in the replacement string.</span></span> <span data-ttu-id="4a92f-120">Дополнительные сведения см. в разделе [Подстановка символа "$"](#substituting-a--character).</span><span class="sxs-lookup"><span data-stu-id="4a92f-120">For more information, see [Substituting a "$" Symbol](#substituting-a--character).</span></span>|  
|$&|<span data-ttu-id="4a92f-121">Включает копию всего соответствия в строку замены.</span><span class="sxs-lookup"><span data-stu-id="4a92f-121">Includes a copy of the entire match in the replacement string.</span></span> <span data-ttu-id="4a92f-122">Дополнительные сведения см. в разделе [Подстановка всего соответствия](#substituting-the-entire-match).</span><span class="sxs-lookup"><span data-stu-id="4a92f-122">For more information, see [Substituting the Entire Match](#substituting-the-entire-match).</span></span>|  
|$\`|<span data-ttu-id="4a92f-123">Включает весь текст входной строки до соответствия в строку замены.</span><span class="sxs-lookup"><span data-stu-id="4a92f-123">Includes all the text of the input string before the match in the replacement string.</span></span> <span data-ttu-id="4a92f-124">Дополнительные сведения см. в разделе [Подстановка текста до соответствия](#substituting-the-text-before-the-match).</span><span class="sxs-lookup"><span data-stu-id="4a92f-124">For more information, see [Substituting the Text before the Match](#substituting-the-text-before-the-match).</span></span>|  
|<span data-ttu-id="4a92f-125">$'</span><span class="sxs-lookup"><span data-stu-id="4a92f-125">$'</span></span>|<span data-ttu-id="4a92f-126">Включает весь текст входной строки после соответствия в строку замены.</span><span class="sxs-lookup"><span data-stu-id="4a92f-126">Includes all the text of the input string after the match in the replacement string.</span></span> <span data-ttu-id="4a92f-127">Дополнительные сведения см. в разделе [Подстановка текста после соответствия](#substituting-the-text-after-the-match).</span><span class="sxs-lookup"><span data-stu-id="4a92f-127">For more information, see [Substituting the Text after the Match](#substituting-the-text-after-the-match).</span></span>|  
|$+|<span data-ttu-id="4a92f-128">Включает последнюю записанную группу в строку замены.</span><span class="sxs-lookup"><span data-stu-id="4a92f-128">Includes the last group captured in the replacement string.</span></span> <span data-ttu-id="4a92f-129">Дополнительные сведения см. в разделе [Подстановка последней записанной группы](#substituting-the-last-captured-group).</span><span class="sxs-lookup"><span data-stu-id="4a92f-129">For more information, see [Substituting the Last Captured Group](#substituting-the-last-captured-group).</span></span>|  
|$\_|<span data-ttu-id="4a92f-130">Включает всю входную строку в строку замены.</span><span class="sxs-lookup"><span data-stu-id="4a92f-130">Includes the entire input string in the replacement string.</span></span> <span data-ttu-id="4a92f-131">Дополнительные сведения см. в разделе [Замена всей входной строки](#substituting-the-entire-input-string).</span><span class="sxs-lookup"><span data-stu-id="4a92f-131">For more information, see [Substituting the Entire Input String](#substituting-the-entire-input-string).</span></span>|  
  
## <a name="substitution-elements-and-replacement-patterns"></a><span data-ttu-id="4a92f-132">Элементы подстановки и шаблонов замены</span><span class="sxs-lookup"><span data-stu-id="4a92f-132">Substitution Elements and Replacement Patterns</span></span>  

 <span data-ttu-id="4a92f-133">В шаблонах замены распознается только одна специальная конструкция: подстановки.</span><span class="sxs-lookup"><span data-stu-id="4a92f-133">Substitutions are the only special constructs recognized in a replacement pattern.</span></span> <span data-ttu-id="4a92f-134">Ни один из остальных элементов языка регулярных выражений, включая escape-символы и точку (`.`), которая соответствует любому знаку, не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="4a92f-134">None of the other regular expression language elements, including character escapes and the period (`.`), which matches any character, are supported.</span></span> <span data-ttu-id="4a92f-135">Аналогичным образом, подставляемые элементы языка распознаются только в шаблонах замены и никогда не являются допустимыми в шаблоны регулярных выражений.</span><span class="sxs-lookup"><span data-stu-id="4a92f-135">Similarly, substitution language elements are recognized only in replacement patterns and are never valid in regular expression patterns.</span></span>  
  
 <span data-ttu-id="4a92f-136">Единственный знак, который может встречаться в шаблоне регулярного выражения либо в подстановке, — это знак `$` , хотя он в разных случаях имеет разное значение.</span><span class="sxs-lookup"><span data-stu-id="4a92f-136">The only character that can appear either in a regular expression pattern or in a substitution is the `$` character, although it has a different meaning in each context.</span></span> <span data-ttu-id="4a92f-137">В шаблоне регулярного выражения `$` является привязкой, совпадающей с концом строки.</span><span class="sxs-lookup"><span data-stu-id="4a92f-137">In a regular expression pattern, `$` is an anchor that matches the end of the string.</span></span> <span data-ttu-id="4a92f-138">В шаблоне замены `$` указывает начало подстановки.</span><span class="sxs-lookup"><span data-stu-id="4a92f-138">In a replacement pattern, `$` indicates the beginning of a substitution.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="4a92f-139">Для получения возможностей, подобных шаблону замены в регулярном выражении, используйте обратную ссылку.</span><span class="sxs-lookup"><span data-stu-id="4a92f-139">For functionality similar to a replacement pattern within a regular expression, use a backreference.</span></span> <span data-ttu-id="4a92f-140">Дополнительные сведения об обратных ссылках см. в разделе [Конструкции обратных ссылок](backreference-constructs-in-regular-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="4a92f-140">For more information about backreferences, see [Backreference Constructs](backreference-constructs-in-regular-expressions.md).</span></span>  

## <a name="substituting-a-numbered-group"></a><span data-ttu-id="4a92f-141">Подстановка нумерованной группы</span><span class="sxs-lookup"><span data-stu-id="4a92f-141">Substituting a Numbered Group</span></span>  

 <span data-ttu-id="4a92f-142">Языковой элемент `$`*number* включает последнюю подстроку, сопоставленную по группе записи *number* в строке замены, где *number* — это индекс группы записи.</span><span class="sxs-lookup"><span data-stu-id="4a92f-142">The `$`*number* language element includes the last substring matched by the *number* capturing group in the replacement string, where *number* is the index of the capturing group.</span></span> <span data-ttu-id="4a92f-143">Например, шаблон замены `$1` указывает, что совпадающая подстрока будет заменена первой группой записи.</span><span class="sxs-lookup"><span data-stu-id="4a92f-143">For example, the replacement pattern `$1` indicates that the matched substring is to be replaced by the first captured group.</span></span> <span data-ttu-id="4a92f-144">Дополнительные сведения о нумерованных группах записи см. в разделе [Grouping Constructs](grouping-constructs-in-regular-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="4a92f-144">For more information about numbered capturing groups, see [Grouping Constructs](grouping-constructs-in-regular-expressions.md).</span></span>  
  
 <span data-ttu-id="4a92f-145">Все цифры, указанные после `$` , интерпретируются как относящиеся к группе *number* .</span><span class="sxs-lookup"><span data-stu-id="4a92f-145">All digits that follow `$` are interpreted as belonging to the *number* group.</span></span> <span data-ttu-id="4a92f-146">Если это не соответствует вашим намерениям, можно вместо этого подставить именованную группу.</span><span class="sxs-lookup"><span data-stu-id="4a92f-146">If this is not your intent, you can substitute a named group instead.</span></span> <span data-ttu-id="4a92f-147">Например, можно использовать строку замены `${1}1` вместо `$11` , чтобы определить строку замены как значение первой записанной группы вместе с номером "1".</span><span class="sxs-lookup"><span data-stu-id="4a92f-147">For example, you can use the replacement string `${1}1` instead of `$11` to define the replacement string as the value of the first captured group along with the number "1".</span></span> <span data-ttu-id="4a92f-148">Дополнительные сведения см. в разделе [Подстановка именованной группы](#substituting-a-named-group).</span><span class="sxs-lookup"><span data-stu-id="4a92f-148">For more information, see [Substituting a Named Group](#substituting-a-named-group).</span></span>  
  
 <span data-ttu-id="4a92f-149">Группы записи, которым явно не назначены имена с помощью синтаксиса `(?<`*name*`>)` , нумеруются слева направо, начиная с единицы.</span><span class="sxs-lookup"><span data-stu-id="4a92f-149">Capturing groups that are not explicitly assigned names using the `(?<`*name*`>)` syntax are numbered from left to right starting at one.</span></span> <span data-ttu-id="4a92f-150">Именованные группы также нумеруются слева направо, начиная с номера, превышающего индекс последней неименованной группы.</span><span class="sxs-lookup"><span data-stu-id="4a92f-150">Named groups are also numbered from left to right, starting at one greater than the index of the last unnamed group.</span></span> <span data-ttu-id="4a92f-151">Например, в регулярном выражении `(\w)(?<digit>\d)`индекс именованной группы `digit` — 2.</span><span class="sxs-lookup"><span data-stu-id="4a92f-151">For example, in the regular expression `(\w)(?<digit>\d)`, the index of the `digit` named group is 2.</span></span>  
  
 <span data-ttu-id="4a92f-152">Если *number* не соответствует допустимой группе записи, определенной в шаблоне регулярного выражения, `$`*number* интерпретируется как последовательность литеральных символов, используемая для замены каждого соответствия.</span><span class="sxs-lookup"><span data-stu-id="4a92f-152">If *number* does not specify a valid capturing group defined in the regular expression pattern, `$`*number* is interpreted as a literal character sequence that is used to replace each match.</span></span>  
  
 <span data-ttu-id="4a92f-153">В следующем примере подстановка `$`*number* используется для удаления символа валюты из десятичного значения.</span><span class="sxs-lookup"><span data-stu-id="4a92f-153">The following example uses the `$`*number* substitution to strip the currency symbol from a decimal value.</span></span> <span data-ttu-id="4a92f-154">Она удаляет символы денежной единицы, найденные в начале или конце денежного значения, и распознает два наиболее распространенных десятичных разделителя ("." и ",").</span><span class="sxs-lookup"><span data-stu-id="4a92f-154">It removes currency symbols found at the beginning or end of a monetary value, and recognizes the two most common decimal separators ("." and ",").</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Substitutions#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.substitutions/cs/numberedgroup1.cs#1)]
 [!code-vb[Conceptual.RegEx.Language.Substitutions#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.substitutions/vb/numberedgroup1.vb#1)]  
  
 <span data-ttu-id="4a92f-155">Шаблон регулярного выражения `\p{Sc}*(\s?\d+[.,]?\d*)\p{Sc}*` определяется, как показано в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="4a92f-155">The regular expression pattern `\p{Sc}*(\s?\d+[.,]?\d*)\p{Sc}*` is defined as shown in the following table.</span></span>  
  
|<span data-ttu-id="4a92f-156">Шаблон</span><span class="sxs-lookup"><span data-stu-id="4a92f-156">Pattern</span></span>|<span data-ttu-id="4a92f-157">Описание</span><span class="sxs-lookup"><span data-stu-id="4a92f-157">Description</span></span>|  
|-------------|-----------------|  
|`\p{Sc}*`|<span data-ttu-id="4a92f-158">Совпадение с нулем или более символами денежной единицы.</span><span class="sxs-lookup"><span data-stu-id="4a92f-158">Match zero or more currency symbol characters.</span></span>|  
|`\s?`|<span data-ttu-id="4a92f-159">Совпадение с нулем или одним символом пробела.</span><span class="sxs-lookup"><span data-stu-id="4a92f-159">Match zero or one white-space characters.</span></span>|  
|`\d+`|<span data-ttu-id="4a92f-160">Совпадение с одной или несколькими десятичными цифрами.</span><span class="sxs-lookup"><span data-stu-id="4a92f-160">Match one or more decimal digits.</span></span>|  
|`[.,]?`|<span data-ttu-id="4a92f-161">Совпадение с нулем или одной точкой либо запятой.</span><span class="sxs-lookup"><span data-stu-id="4a92f-161">Match zero or one period or comma.</span></span>|  
|`\d*`|<span data-ttu-id="4a92f-162">Соответствует нулю или нескольким десятичным числам.</span><span class="sxs-lookup"><span data-stu-id="4a92f-162">Match zero or more decimal digits.</span></span>|  
|`(\s?\d+[.,]?\d*)`|<span data-ttu-id="4a92f-163">Совпадение с пробелом, за которым следует одна или несколько десятичных цифр, после которых идет ноль или одна точка либо запятая, а за ними — ноль или более десятичных цифр.</span><span class="sxs-lookup"><span data-stu-id="4a92f-163">Match a white space followed by one or more decimal digits, followed by zero or one period or comma, followed by zero or more decimal digits.</span></span> <span data-ttu-id="4a92f-164">Это первая группа записи.</span><span class="sxs-lookup"><span data-stu-id="4a92f-164">This is the first capturing group.</span></span> <span data-ttu-id="4a92f-165">Так как шаблон замены имеет вид `$1`, вызов метода <xref:System.Text.RegularExpressions.Regex.Replace%2A?displayProperty=nameWithType> заменяет всю совпадающую подстроку данной группой записи.</span><span class="sxs-lookup"><span data-stu-id="4a92f-165">Because the replacement pattern is `$1`, the call to the <xref:System.Text.RegularExpressions.Regex.Replace%2A?displayProperty=nameWithType> method replaces the entire matched substring with this captured group.</span></span>|  

## <a name="substituting-a-named-group"></a><span data-ttu-id="4a92f-166">Подстановка именованной группы</span><span class="sxs-lookup"><span data-stu-id="4a92f-166">Substituting a Named Group</span></span>  

 <span data-ttu-id="4a92f-167">Языковой элемент `${`*name*`}` замещает последнюю подстроку, сопоставленную по группе записи *name* , где *name* — это имя группы записи, определенной в языковом элементе `(?<`*name*`>)` .</span><span class="sxs-lookup"><span data-stu-id="4a92f-167">The `${`*name*`}` language element substitutes the last substring matched by the *name* capturing group, where *name* is the name of a capturing group defined by the `(?<`*name*`>)` language element.</span></span> <span data-ttu-id="4a92f-168">Дополнительные сведения об именованных группах записи см. в разделе [Grouping Constructs](grouping-constructs-in-regular-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="4a92f-168">For more information about named capturing groups, see [Grouping Constructs](grouping-constructs-in-regular-expressions.md).</span></span>  
  
 <span data-ttu-id="4a92f-169">Если *name* не соответствует допустимой именованной группе записи, определенной в регулярном выражении, и состоит из цифр, то `${`*name*`}` интерпретируется как нумерованная группа.</span><span class="sxs-lookup"><span data-stu-id="4a92f-169">If *name* doesn't specify a valid named capturing group defined in the regular expression pattern but consists of digits, `${`*name*`}` is interpreted as a numbered group.</span></span>  
  
 <span data-ttu-id="4a92f-170">Если *name* не соответствует ни допустимой именованной группе записи, ни допустимой нумерованной группе записи, определенной в шаблоне регулярного выражения, `${`*name*`}` интерпретируется как последовательность литеральных символов, используемая для замены каждого соответствия.</span><span class="sxs-lookup"><span data-stu-id="4a92f-170">If *name* specifies neither a valid named capturing group nor a valid numbered capturing group defined in the regular expression pattern, `${`*name*`}` is interpreted as a literal character sequence that is used to replace each match.</span></span>  
  
 <span data-ttu-id="4a92f-171">В следующем примере подстановка `${`*name*`}` используется для удаления символа валюты из десятичного значения.</span><span class="sxs-lookup"><span data-stu-id="4a92f-171">The following example uses the `${`*name*`}` substitution to strip the currency symbol from a decimal value.</span></span> <span data-ttu-id="4a92f-172">Она удаляет символы денежной единицы, найденные в начале или конце денежного значения, и распознает два наиболее распространенных десятичных разделителя ("." и ",").</span><span class="sxs-lookup"><span data-stu-id="4a92f-172">It removes currency symbols found at the beginning or end of a monetary value, and recognizes the two most common decimal separators ("." and ",").</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Substitutions#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.substitutions/cs/namedgroup1.cs#2)]
 [!code-vb[Conceptual.RegEx.Language.Substitutions#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.substitutions/vb/namedgroup1.vb#2)]  
  
 <span data-ttu-id="4a92f-173">Шаблон регулярного выражения `\p{Sc}*(?<amount>\s?\d[.,]?\d*)\p{Sc}*` определяется, как показано в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="4a92f-173">The regular expression pattern `\p{Sc}*(?<amount>\s?\d[.,]?\d*)\p{Sc}*` is defined as shown in the following table.</span></span>  
  
|<span data-ttu-id="4a92f-174">Шаблон</span><span class="sxs-lookup"><span data-stu-id="4a92f-174">Pattern</span></span>|<span data-ttu-id="4a92f-175">Описание</span><span class="sxs-lookup"><span data-stu-id="4a92f-175">Description</span></span>|  
|-------------|-----------------|  
|`\p{Sc}*`|<span data-ttu-id="4a92f-176">Совпадение с нулем или более символами денежной единицы.</span><span class="sxs-lookup"><span data-stu-id="4a92f-176">Match zero or more currency symbol characters.</span></span>|  
|`\s?`|<span data-ttu-id="4a92f-177">Совпадение с нулем или одним символом пробела.</span><span class="sxs-lookup"><span data-stu-id="4a92f-177">Match zero or one white-space characters.</span></span>|  
|`\d+`|<span data-ttu-id="4a92f-178">Совпадение с одной или несколькими десятичными цифрами.</span><span class="sxs-lookup"><span data-stu-id="4a92f-178">Match one or more decimal digits.</span></span>|  
|`[.,]?`|<span data-ttu-id="4a92f-179">Совпадение с нулем или одной точкой либо запятой.</span><span class="sxs-lookup"><span data-stu-id="4a92f-179">Match zero or one period or comma.</span></span>|  
|`\d*`|<span data-ttu-id="4a92f-180">Соответствует нулю или нескольким десятичным числам.</span><span class="sxs-lookup"><span data-stu-id="4a92f-180">Match zero or more decimal digits.</span></span>|  
|`(?<amount>\s?\d[.,]?\d*)`|<span data-ttu-id="4a92f-181">Совпадение с пробелом, за которым следует одна или несколько десятичных цифр, после которых идет ноль или одна точка либо запятая, а за ними — ноль или более десятичных цифр.</span><span class="sxs-lookup"><span data-stu-id="4a92f-181">Match a white space, followed by one or more decimal digits, followed by zero or one period or comma, followed by zero or more decimal digits.</span></span> <span data-ttu-id="4a92f-182">Это группа записи с именем `amount`.</span><span class="sxs-lookup"><span data-stu-id="4a92f-182">This is the capturing group named `amount`.</span></span> <span data-ttu-id="4a92f-183">Так как шаблон замены имеет вид `${amount}`, вызов метода <xref:System.Text.RegularExpressions.Regex.Replace%2A?displayProperty=nameWithType> заменяет всю совпадающую подстроку данной группой записи.</span><span class="sxs-lookup"><span data-stu-id="4a92f-183">Because the replacement pattern is `${amount}`, the call to the <xref:System.Text.RegularExpressions.Regex.Replace%2A?displayProperty=nameWithType> method replaces the entire matched substring with this captured group.</span></span>|  

## <a name="substituting-a--character"></a><span data-ttu-id="4a92f-184">Подстановка знака "$"</span><span class="sxs-lookup"><span data-stu-id="4a92f-184">Substituting a "$" Character</span></span>  

 <span data-ttu-id="4a92f-185">Подстановка `$$` вставляет символ литерала "$"в строку замены.</span><span class="sxs-lookup"><span data-stu-id="4a92f-185">The `$$` substitution inserts a literal "$" character in the replaced string.</span></span>  
  
 <span data-ttu-id="4a92f-186">В следующем примере объект <xref:System.Globalization.NumberFormatInfo> используется для определения символа валюты для текущего языка и региональных параметров и его размещения в строке валюты.</span><span class="sxs-lookup"><span data-stu-id="4a92f-186">The following example uses the <xref:System.Globalization.NumberFormatInfo> object to determine the current culture's currency symbol and its placement in a currency string.</span></span> <span data-ttu-id="4a92f-187">Затем он динамически создает как шаблон регулярного выражения, так и шаблон замены.</span><span class="sxs-lookup"><span data-stu-id="4a92f-187">It then builds both a regular expression pattern and a replacement pattern dynamically.</span></span> <span data-ttu-id="4a92f-188">Если пример выполняется на компьютере, где в качестве языка и региональных параметров задано значение «Английский — США» (en-US), будет создан шаблон регулярного выражения `\b(\d+)(\.(\d+))?` и шаблон замены `$$ $1$2`.</span><span class="sxs-lookup"><span data-stu-id="4a92f-188">If the example is run on a computer whose current culture is en-US, it generates the regular expression pattern `\b(\d+)(\.(\d+))?` and the replacement pattern `$$ $1$2`.</span></span> <span data-ttu-id="4a92f-189">Шаблон замены замещает совпавший текст символом валюты и пробелом после первой и второй записанной группы.</span><span class="sxs-lookup"><span data-stu-id="4a92f-189">The replacement pattern replaces the matched text with a currency symbol and a space followed by the first and second captured groups.</span></span>  
  
 [!code-csharp[Conceptual.Regex.Language.Substitutions#8](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.substitutions/cs/dollarsign1.cs#8)]
 [!code-vb[Conceptual.Regex.Language.Substitutions#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.substitutions/vb/dollarsign1.vb#8)]  
  
 <span data-ttu-id="4a92f-190">Шаблон регулярного выражения `\b(\d+)(\.(\d+))?` определяется, как показано в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="4a92f-190">The regular expression pattern `\b(\d+)(\.(\d+))?` is defined as shown in the following table.</span></span>  
  
|<span data-ttu-id="4a92f-191">Шаблон</span><span class="sxs-lookup"><span data-stu-id="4a92f-191">Pattern</span></span>|<span data-ttu-id="4a92f-192">Описание</span><span class="sxs-lookup"><span data-stu-id="4a92f-192">Description</span></span>|  
|-------------|-----------------|  
|`\b`|<span data-ttu-id="4a92f-193">Начало соответствия в начале границы слова.</span><span class="sxs-lookup"><span data-stu-id="4a92f-193">Start the match at the beginning of a word boundary.</span></span>|  
|`(\d+)`|<span data-ttu-id="4a92f-194">Совпадение с одной или несколькими десятичными цифрами.</span><span class="sxs-lookup"><span data-stu-id="4a92f-194">Match one or more decimal digits.</span></span> <span data-ttu-id="4a92f-195">Это первая группа записи.</span><span class="sxs-lookup"><span data-stu-id="4a92f-195">This is the first capturing group.</span></span>|  
|`\.`|<span data-ttu-id="4a92f-196">Совпадение с точкой (десятичным разделителем).</span><span class="sxs-lookup"><span data-stu-id="4a92f-196">Match a period (the decimal separator).</span></span>|  
|`(\d+)`|<span data-ttu-id="4a92f-197">Совпадение с одной или несколькими десятичными цифрами.</span><span class="sxs-lookup"><span data-stu-id="4a92f-197">Match one or more decimal digits.</span></span> <span data-ttu-id="4a92f-198">Это третья группа записи.</span><span class="sxs-lookup"><span data-stu-id="4a92f-198">This is the third capturing group.</span></span>|  
|`(\.(\d+))?`|<span data-ttu-id="4a92f-199">Совпадение с нулем или одним вхождением точки, за которой следует одна или несколько десятичных цифр.</span><span class="sxs-lookup"><span data-stu-id="4a92f-199">Match zero or one occurrence of a period followed by one or more decimal digits.</span></span> <span data-ttu-id="4a92f-200">Это вторая группа записи.</span><span class="sxs-lookup"><span data-stu-id="4a92f-200">This is the second capturing group.</span></span>|  

## <a name="substituting-the-entire-match"></a><span data-ttu-id="4a92f-201">Подстановка всего соответствия</span><span class="sxs-lookup"><span data-stu-id="4a92f-201">Substituting the Entire Match</span></span>  

 <span data-ttu-id="4a92f-202">Подстановка `$&` включает все соответствие в строку замены.</span><span class="sxs-lookup"><span data-stu-id="4a92f-202">The `$&` substitution includes the entire match in the replacement string.</span></span> <span data-ttu-id="4a92f-203">Часто она используется для добавления подстроки в начало или в конец совпадающей строки.</span><span class="sxs-lookup"><span data-stu-id="4a92f-203">Often, it is used to add a substring to the beginning or end of the matched string.</span></span> <span data-ttu-id="4a92f-204">Например, шаблон замены `($&)` добавляет скобки в начало и в конец каждого соответствия.</span><span class="sxs-lookup"><span data-stu-id="4a92f-204">For example, the `($&)` replacement pattern adds parentheses to the beginning and end of each match.</span></span> <span data-ttu-id="4a92f-205">Если нет соответствия, подстановка `$&` не оказывает влияния.</span><span class="sxs-lookup"><span data-stu-id="4a92f-205">If there is no match, the `$&` substitution has no effect.</span></span>  
  
 <span data-ttu-id="4a92f-206">В следующем примере используется подстановка `$&` для добавления кавычек в начало и в конец названий книг, хранящихся в строковом массиве.</span><span class="sxs-lookup"><span data-stu-id="4a92f-206">The following example uses the `$&` substitution to add quotation marks at the beginning and end of book titles stored in a string array.</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Substitutions#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.substitutions/cs/entirematch1.cs#3)]
 [!code-vb[Conceptual.RegEx.Language.Substitutions#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.substitutions/vb/entirematch1.vb#3)]  
  
 <span data-ttu-id="4a92f-207">Шаблон регулярного выражения `^(\w+\s?)+$` определяется, как показано в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="4a92f-207">The regular expression pattern `^(\w+\s?)+$` is defined as shown in the following table.</span></span>  
  
|<span data-ttu-id="4a92f-208">Шаблон</span><span class="sxs-lookup"><span data-stu-id="4a92f-208">Pattern</span></span>|<span data-ttu-id="4a92f-209">Описание</span><span class="sxs-lookup"><span data-stu-id="4a92f-209">Description</span></span>|  
|-------------|-----------------|  
|`^`|<span data-ttu-id="4a92f-210">Начало соответствия в начале входной строки.</span><span class="sxs-lookup"><span data-stu-id="4a92f-210">Start the match at the beginning of the input string.</span></span>|  
|`(\w+\s?)+`|<span data-ttu-id="4a92f-211">Выделяет один или несколько раз шаблон из одного или нескольких словообразующих символов, за которыми следует ноль или один символ пробела.</span><span class="sxs-lookup"><span data-stu-id="4a92f-211">Match the pattern of one or more word characters followed by zero or one white-space characters one or more times.</span></span>|  
|`$`|<span data-ttu-id="4a92f-212">Соответствует концу входной строки.</span><span class="sxs-lookup"><span data-stu-id="4a92f-212">Match the end of the input string.</span></span>|  
  
 <span data-ttu-id="4a92f-213">Шаблон замены `"$&"` добавляет литеральные кавычки в начало и в конец каждого соответствия.</span><span class="sxs-lookup"><span data-stu-id="4a92f-213">The `"$&"` replacement pattern adds a literal quotation mark to the beginning and end of each match.</span></span>  

## <a name="substituting-the-text-before-the-match"></a><span data-ttu-id="4a92f-214">Подстановка текста до соответствия</span><span class="sxs-lookup"><span data-stu-id="4a92f-214">Substituting the Text Before the Match</span></span>  

 <span data-ttu-id="4a92f-215">Подстановка ``$` `` заменяет совпадающую строку всей входной строкой до соответствия.</span><span class="sxs-lookup"><span data-stu-id="4a92f-215">The ``$` `` substitution replaces the matched string with the entire input string before the match.</span></span> <span data-ttu-id="4a92f-216">То есть она дублирует входную строку вплоть до соответствия, удаляя совпадающий текст.</span><span class="sxs-lookup"><span data-stu-id="4a92f-216">That is, it duplicates the input string up to the match while removing the matched text.</span></span> <span data-ttu-id="4a92f-217">Любой текст, следующий за совпадающим текстом, не изменяется в результирующей строке.</span><span class="sxs-lookup"><span data-stu-id="4a92f-217">Any text that follows the matched text is unchanged in the result string.</span></span> <span data-ttu-id="4a92f-218">Если во входной строке несколько соответствий, текст замены выводится из исходной входной строки, а не из строки, в которой текст был заменен более ранними совпадениями.</span><span class="sxs-lookup"><span data-stu-id="4a92f-218">If there are multiple matches in an input string, the replacement text is derived from the original input string, rather than from the string in which text has been replaced by earlier matches.</span></span> <span data-ttu-id="4a92f-219">\(Иллюстрация приведена в примере.\) Если нет соответствия, подстановка ``$` `` не оказывает влияния.</span><span class="sxs-lookup"><span data-stu-id="4a92f-219">\(The example provides an illustration.\) If there is no match, the ``$` `` substitution has no effect.</span></span>  
  
 <span data-ttu-id="4a92f-220">В следующем примере шаблон регулярного выражения `\d+` используется для сопоставления последовательности из одной или нескольких цифр десятичного числа во входной строке.</span><span class="sxs-lookup"><span data-stu-id="4a92f-220">The following example uses the regular expression pattern `\d+` to match a sequence of one or more decimal digits in the input string.</span></span> <span data-ttu-id="4a92f-221">Строка замены ``$` `` заменяет эти цифры текстом, который предшествует совпадению.</span><span class="sxs-lookup"><span data-stu-id="4a92f-221">The replacement string ``$` `` replaces these digits with the text that precedes the match.</span></span>  
  
 [!code-csharp[Conceptual.Regex.Language.Substitutions#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.substitutions/cs/before1.cs#4)]
 [!code-vb[Conceptual.Regex.Language.Substitutions#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.substitutions/vb/before1.vb#4)]  
  
 <span data-ttu-id="4a92f-222">В этом примере входная строка `"aa1bb2cc3dd4ee5"` содержит пять совпадений.</span><span class="sxs-lookup"><span data-stu-id="4a92f-222">In this example, the input string `"aa1bb2cc3dd4ee5"` contains five matches.</span></span> <span data-ttu-id="4a92f-223">В следующей таблице показано, как подстановка ``$` `` вызывает замену обработчиком регулярных выражений каждого соответствия во входной строке.</span><span class="sxs-lookup"><span data-stu-id="4a92f-223">The following table illustrates how the ``$` `` substitution causes the regular expression engine to replace each match in the input string.</span></span> <span data-ttu-id="4a92f-224">Вставленный текст отображается в столбце результатов полужирным шрифтом.</span><span class="sxs-lookup"><span data-stu-id="4a92f-224">Inserted text is shown in bold in the results column.</span></span>  
  
|<span data-ttu-id="4a92f-225">Соответствие</span><span class="sxs-lookup"><span data-stu-id="4a92f-225">Match</span></span>|<span data-ttu-id="4a92f-226">Положение</span><span class="sxs-lookup"><span data-stu-id="4a92f-226">Position</span></span>|<span data-ttu-id="4a92f-227">Строка до соответствия</span><span class="sxs-lookup"><span data-stu-id="4a92f-227">String before match</span></span>|<span data-ttu-id="4a92f-228">Результирующая строка</span><span class="sxs-lookup"><span data-stu-id="4a92f-228">Result string</span></span>|  
|-----------|--------------|-------------------------|-------------------|  
|<span data-ttu-id="4a92f-229">1</span><span class="sxs-lookup"><span data-stu-id="4a92f-229">1</span></span>|<span data-ttu-id="4a92f-230">2</span><span class="sxs-lookup"><span data-stu-id="4a92f-230">2</span></span>|<span data-ttu-id="4a92f-231">aa</span><span class="sxs-lookup"><span data-stu-id="4a92f-231">aa</span></span>|<span data-ttu-id="4a92f-232">aa **aa** bb2cc3dd4ee5</span><span class="sxs-lookup"><span data-stu-id="4a92f-232">aa **aa** bb2cc3dd4ee5</span></span>|  
|<span data-ttu-id="4a92f-233">2</span><span class="sxs-lookup"><span data-stu-id="4a92f-233">2</span></span>|<span data-ttu-id="4a92f-234">5</span><span class="sxs-lookup"><span data-stu-id="4a92f-234">5</span></span>|<span data-ttu-id="4a92f-235">aa1bb</span><span class="sxs-lookup"><span data-stu-id="4a92f-235">aa1bb</span></span>|<span data-ttu-id="4a92f-236">aaaabb **aa1bb** cc3dd4ee5</span><span class="sxs-lookup"><span data-stu-id="4a92f-236">aaaabb **aa1bb** cc3dd4ee5</span></span>|  
|<span data-ttu-id="4a92f-237">3</span><span class="sxs-lookup"><span data-stu-id="4a92f-237">3</span></span>|<span data-ttu-id="4a92f-238">8</span><span class="sxs-lookup"><span data-stu-id="4a92f-238">8</span></span>|<span data-ttu-id="4a92f-239">aa1bb2cc</span><span class="sxs-lookup"><span data-stu-id="4a92f-239">aa1bb2cc</span></span>|<span data-ttu-id="4a92f-240">aaaabbaa1bbcc **aa1bb2cc** dd4ee5</span><span class="sxs-lookup"><span data-stu-id="4a92f-240">aaaabbaa1bbcc **aa1bb2cc** dd4ee5</span></span>|  
|<span data-ttu-id="4a92f-241">4</span><span class="sxs-lookup"><span data-stu-id="4a92f-241">4</span></span>|<span data-ttu-id="4a92f-242">11</span><span class="sxs-lookup"><span data-stu-id="4a92f-242">11</span></span>|<span data-ttu-id="4a92f-243">aa1bb2cc3dd</span><span class="sxs-lookup"><span data-stu-id="4a92f-243">aa1bb2cc3dd</span></span>|<span data-ttu-id="4a92f-244">aaaabbaa1bbccaa1bb2ccdd **aa1bb2cc3dd** ee5</span><span class="sxs-lookup"><span data-stu-id="4a92f-244">aaaabbaa1bbccaa1bb2ccdd **aa1bb2cc3dd** ee5</span></span>|  
|<span data-ttu-id="4a92f-245">5</span><span class="sxs-lookup"><span data-stu-id="4a92f-245">5</span></span>|<span data-ttu-id="4a92f-246">14</span><span class="sxs-lookup"><span data-stu-id="4a92f-246">14</span></span>|<span data-ttu-id="4a92f-247">aa1bb2cc3dd4ee</span><span class="sxs-lookup"><span data-stu-id="4a92f-247">aa1bb2cc3dd4ee</span></span>|<span data-ttu-id="4a92f-248">aaaabbaa1bbccaa1bb2ccddaa1bb2cc3ddee **aa1bb2cc3dd4ee**</span><span class="sxs-lookup"><span data-stu-id="4a92f-248">aaaabbaa1bbccaa1bb2ccddaa1bb2cc3ddee **aa1bb2cc3dd4ee**</span></span>|

## <a name="substituting-the-text-after-the-match"></a><span data-ttu-id="4a92f-249">Подстановка текста после соответствия</span><span class="sxs-lookup"><span data-stu-id="4a92f-249">Substituting the Text After the Match</span></span>  

 <span data-ttu-id="4a92f-250">Подстановка `$'` заменяет совпадающую строку всей входной строкой после соответствия.</span><span class="sxs-lookup"><span data-stu-id="4a92f-250">The `$'` substitution replaces the matched string with the entire input string after the match.</span></span> <span data-ttu-id="4a92f-251">То есть входная строка после соответствия дублируется с удалением совпадающего текста.</span><span class="sxs-lookup"><span data-stu-id="4a92f-251">That is, it duplicates the input string after the match while removing the matched text.</span></span> <span data-ttu-id="4a92f-252">Любой текст, который предшествует совпадающему тексту, не изменяется в результирующей строке.</span><span class="sxs-lookup"><span data-stu-id="4a92f-252">Any text that precedes the matched text is unchanged in the result string.</span></span> <span data-ttu-id="4a92f-253">Если нет соответствия, подстановка  `$'` не оказывает влияния.</span><span class="sxs-lookup"><span data-stu-id="4a92f-253">If there is no match, the  `$'` substitution has no effect.</span></span>  
  
 <span data-ttu-id="4a92f-254">В следующем примере шаблон регулярного выражения `\d+` используется для сопоставления последовательности из одной или нескольких цифр десятичного числа во входной строке.</span><span class="sxs-lookup"><span data-stu-id="4a92f-254">The following example uses the regular expression pattern `\d+` to match a sequence of one or more decimal digits in the input string.</span></span> <span data-ttu-id="4a92f-255">Строка замены `$'` заменяет эти цифры текстом, который следует за соответствием.</span><span class="sxs-lookup"><span data-stu-id="4a92f-255">The replacement string `$'` replaces these digits with the text that follows the match.</span></span>  
  
 [!code-csharp[Conceptual.Regex.Language.Substitutions#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.substitutions/cs/after1.cs#5)]
 [!code-vb[Conceptual.Regex.Language.Substitutions#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.substitutions/vb/after1.vb#5)]  
  
 <span data-ttu-id="4a92f-256">В этом примере входная строка `"aa1bb2cc3dd4ee5"` содержит пять совпадений.</span><span class="sxs-lookup"><span data-stu-id="4a92f-256">In this example, the input string `"aa1bb2cc3dd4ee5"` contains five matches.</span></span> <span data-ttu-id="4a92f-257">В следующей таблице показано, как подстановка `$'` вызывает замену обработчиком регулярных выражений каждого соответствия во входной строке.</span><span class="sxs-lookup"><span data-stu-id="4a92f-257">The following table illustrates how the `$'` substitution causes the regular expression engine to replace each match in the input string.</span></span> <span data-ttu-id="4a92f-258">Вставленный текст отображается в столбце результатов полужирным шрифтом.</span><span class="sxs-lookup"><span data-stu-id="4a92f-258">Inserted text is shown in bold in the results column.</span></span>  
  
|<span data-ttu-id="4a92f-259">Соответствие</span><span class="sxs-lookup"><span data-stu-id="4a92f-259">Match</span></span>|<span data-ttu-id="4a92f-260">Положение</span><span class="sxs-lookup"><span data-stu-id="4a92f-260">Position</span></span>|<span data-ttu-id="4a92f-261">Строка после соответствия</span><span class="sxs-lookup"><span data-stu-id="4a92f-261">String after match</span></span>|<span data-ttu-id="4a92f-262">Результирующая строка</span><span class="sxs-lookup"><span data-stu-id="4a92f-262">Result string</span></span>|  
|-----------|--------------|------------------------|-------------------|  
|<span data-ttu-id="4a92f-263">1</span><span class="sxs-lookup"><span data-stu-id="4a92f-263">1</span></span>|<span data-ttu-id="4a92f-264">2</span><span class="sxs-lookup"><span data-stu-id="4a92f-264">2</span></span>|<span data-ttu-id="4a92f-265">bb2cc3dd4ee5</span><span class="sxs-lookup"><span data-stu-id="4a92f-265">bb2cc3dd4ee5</span></span>|<span data-ttu-id="4a92f-266">aa **bb2cc3dd4ee5** bb2cc3dd4ee5</span><span class="sxs-lookup"><span data-stu-id="4a92f-266">aa **bb2cc3dd4ee5** bb2cc3dd4ee5</span></span>|  
|<span data-ttu-id="4a92f-267">2</span><span class="sxs-lookup"><span data-stu-id="4a92f-267">2</span></span>|<span data-ttu-id="4a92f-268">5</span><span class="sxs-lookup"><span data-stu-id="4a92f-268">5</span></span>|<span data-ttu-id="4a92f-269">cc3dd4ee5</span><span class="sxs-lookup"><span data-stu-id="4a92f-269">cc3dd4ee5</span></span>|<span data-ttu-id="4a92f-270">aabb2cc3dd4ee5bb **cc3dd4ee5** cc3dd4ee5</span><span class="sxs-lookup"><span data-stu-id="4a92f-270">aabb2cc3dd4ee5bb **cc3dd4ee5** cc3dd4ee5</span></span>|  
|<span data-ttu-id="4a92f-271">3</span><span class="sxs-lookup"><span data-stu-id="4a92f-271">3</span></span>|<span data-ttu-id="4a92f-272">8</span><span class="sxs-lookup"><span data-stu-id="4a92f-272">8</span></span>|<span data-ttu-id="4a92f-273">dd4ee5</span><span class="sxs-lookup"><span data-stu-id="4a92f-273">dd4ee5</span></span>|<span data-ttu-id="4a92f-274">aabb2cc3dd4ee5bbcc3dd4ee5cc **dd4ee5** dd4ee5</span><span class="sxs-lookup"><span data-stu-id="4a92f-274">aabb2cc3dd4ee5bbcc3dd4ee5cc **dd4ee5** dd4ee5</span></span>|  
|<span data-ttu-id="4a92f-275">4</span><span class="sxs-lookup"><span data-stu-id="4a92f-275">4</span></span>|<span data-ttu-id="4a92f-276">11</span><span class="sxs-lookup"><span data-stu-id="4a92f-276">11</span></span>|<span data-ttu-id="4a92f-277">ee5</span><span class="sxs-lookup"><span data-stu-id="4a92f-277">ee5</span></span>|<span data-ttu-id="4a92f-278">aabb2cc3dd4ee5bbcc3dd4ee5ccdd4ee5dd **ee5** ee5</span><span class="sxs-lookup"><span data-stu-id="4a92f-278">aabb2cc3dd4ee5bbcc3dd4ee5ccdd4ee5dd **ee5** ee5</span></span>|  
|<span data-ttu-id="4a92f-279">5</span><span class="sxs-lookup"><span data-stu-id="4a92f-279">5</span></span>|<span data-ttu-id="4a92f-280">14</span><span class="sxs-lookup"><span data-stu-id="4a92f-280">14</span></span>|<xref:System.String.Empty?displayProperty=nameWithType>|<span data-ttu-id="4a92f-281">aabb2cc3dd4ee5bbcc3dd4ee5ccdd4ee5ddee5ee</span><span class="sxs-lookup"><span data-stu-id="4a92f-281">aabb2cc3dd4ee5bbcc3dd4ee5ccdd4ee5ddee5ee</span></span>|  

## <a name="substituting-the-last-captured-group"></a><span data-ttu-id="4a92f-282">Подстановка последней записанной группы</span><span class="sxs-lookup"><span data-stu-id="4a92f-282">Substituting the Last Captured Group</span></span>  

 <span data-ttu-id="4a92f-283">Подстановка `$+` заменяет совпадающую строку всей последней группой записи.</span><span class="sxs-lookup"><span data-stu-id="4a92f-283">The `$+` substitution replaces the matched string with the last captured group.</span></span> <span data-ttu-id="4a92f-284">Если группы записи отсутствуют или значение последней захваченной группы равно <xref:System.String.Empty?displayProperty=nameWithType>, подстановка `$+` не оказывает влияния.</span><span class="sxs-lookup"><span data-stu-id="4a92f-284">If there are no captured groups or if the value of the last captured group is <xref:System.String.Empty?displayProperty=nameWithType>, the `$+` substitution has no effect.</span></span>  
  
 <span data-ttu-id="4a92f-285">В следующем примере в строке определяются повторяющиеся слова и используется подстановка `$+` для их замены одним вхождением слова.</span><span class="sxs-lookup"><span data-stu-id="4a92f-285">The following example identifies duplicate words in a string and uses the `$+` substitution to replace them with a single occurrence of the word.</span></span> <span data-ttu-id="4a92f-286">Параметр <xref:System.Text.RegularExpressions.RegexOptions.IgnoreCase?displayProperty=nameWithType> позволяет  убедиться, что слова, отличающиеся регистром, но идентичные во всем остальном, считаются дубликатами.</span><span class="sxs-lookup"><span data-stu-id="4a92f-286">The <xref:System.Text.RegularExpressions.RegexOptions.IgnoreCase?displayProperty=nameWithType> option is used to ensure that words that differ in case but that are otherwise identical are considered duplicates.</span></span>  
  
 [!code-csharp[Conceptual.Regex.Language.Substitutions#6](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.substitutions/cs/lastmatch1.cs#6)]
 [!code-vb[Conceptual.Regex.Language.Substitutions#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.substitutions/vb/lastmatch1.vb#6)]  
  
 <span data-ttu-id="4a92f-287">Шаблон регулярного выражения `\b(\w+)\s\1\b` определяется, как показано в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="4a92f-287">The regular expression pattern `\b(\w+)\s\1\b` is defined as shown in the following table.</span></span>  
  
|<span data-ttu-id="4a92f-288">Шаблон</span><span class="sxs-lookup"><span data-stu-id="4a92f-288">Pattern</span></span>|<span data-ttu-id="4a92f-289">Описание</span><span class="sxs-lookup"><span data-stu-id="4a92f-289">Description</span></span>|  
|-------------|-----------------|  
|`\b`|<span data-ttu-id="4a92f-290">Совпадение должно начинаться на границе слова.</span><span class="sxs-lookup"><span data-stu-id="4a92f-290">Begin the match at a word boundary.</span></span>|  
|`(\w+)`|<span data-ttu-id="4a92f-291">Совпадение с одним или несколькими символами слова.</span><span class="sxs-lookup"><span data-stu-id="4a92f-291">Match one or more word characters.</span></span> <span data-ttu-id="4a92f-292">Это первая группа записи.</span><span class="sxs-lookup"><span data-stu-id="4a92f-292">This is the first capturing group.</span></span>|  
|`\s`|<span data-ttu-id="4a92f-293">Соответствует пробелу.</span><span class="sxs-lookup"><span data-stu-id="4a92f-293">Match a white-space character.</span></span>|  
|`\1`|<span data-ttu-id="4a92f-294">Соответствует первой группе записи.</span><span class="sxs-lookup"><span data-stu-id="4a92f-294">Match the first captured group.</span></span>|  
|`\b`|<span data-ttu-id="4a92f-295">Совпадение должно заканчиваться на границе слова.</span><span class="sxs-lookup"><span data-stu-id="4a92f-295">End the match at a word boundary.</span></span>|  

## <a name="substituting-the-entire-input-string"></a><span data-ttu-id="4a92f-296">Замена всей входной строки</span><span class="sxs-lookup"><span data-stu-id="4a92f-296">Substituting the Entire Input String</span></span>  

 <span data-ttu-id="4a92f-297">Подстановка `$_` заменяет совпадающую строку всей входной строкой.</span><span class="sxs-lookup"><span data-stu-id="4a92f-297">The `$_` substitution replaces the matched string with the entire input string.</span></span> <span data-ttu-id="4a92f-298">То есть совпадающий текст удаляется и заменяется всей строкой, включая совпадающий текст.</span><span class="sxs-lookup"><span data-stu-id="4a92f-298">That is, it removes the matched text and replaces it with the entire string, including the matched text.</span></span>  
  
 <span data-ttu-id="4a92f-299">В следующем примере сопоставляется одна или несколько цифр десятичного числа во входной строке.</span><span class="sxs-lookup"><span data-stu-id="4a92f-299">The following example matches one or more decimal digits in the input string.</span></span> <span data-ttu-id="4a92f-300">При этом используется подстановка `$_` для их замены входной строкой.</span><span class="sxs-lookup"><span data-stu-id="4a92f-300">It uses the `$_` substitution to replace them with the entire input string.</span></span>  
  
 [!code-csharp[Conceptual.Regex.Language.Substitutions#7](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.substitutions/cs/entire1.cs#7)]
 [!code-vb[Conceptual.Regex.Language.Substitutions#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.substitutions/vb/entire1.vb#7)]  
  
 <span data-ttu-id="4a92f-301">В этом примере входная строка `"ABC123DEF456"` содержит два совпадения.</span><span class="sxs-lookup"><span data-stu-id="4a92f-301">In this example, the input string `"ABC123DEF456"` contains two matches.</span></span> <span data-ttu-id="4a92f-302">В следующей таблице показано, как подстановка `$_` вызывает замену обработчиком регулярных выражений каждого соответствия во входной строке.</span><span class="sxs-lookup"><span data-stu-id="4a92f-302">The following table illustrates how the `$_` substitution causes the regular expression engine to replace each match in the input string.</span></span> <span data-ttu-id="4a92f-303">Вставленный текст отображается в столбце результатов полужирным шрифтом.</span><span class="sxs-lookup"><span data-stu-id="4a92f-303">Inserted text is shown in bold in the results column.</span></span>  
  
|<span data-ttu-id="4a92f-304">Соответствие</span><span class="sxs-lookup"><span data-stu-id="4a92f-304">Match</span></span>|<span data-ttu-id="4a92f-305">Положение</span><span class="sxs-lookup"><span data-stu-id="4a92f-305">Position</span></span>|<span data-ttu-id="4a92f-306">Соответствие</span><span class="sxs-lookup"><span data-stu-id="4a92f-306">Match</span></span>|<span data-ttu-id="4a92f-307">Результирующая строка</span><span class="sxs-lookup"><span data-stu-id="4a92f-307">Result string</span></span>|  
|-----------|--------------|-----------|-------------------|  
|<span data-ttu-id="4a92f-308">1</span><span class="sxs-lookup"><span data-stu-id="4a92f-308">1</span></span>|<span data-ttu-id="4a92f-309">3</span><span class="sxs-lookup"><span data-stu-id="4a92f-309">3</span></span>|<span data-ttu-id="4a92f-310">123</span><span class="sxs-lookup"><span data-stu-id="4a92f-310">123</span></span>|<span data-ttu-id="4a92f-311">ABC **ABC123DEF456** DEF456</span><span class="sxs-lookup"><span data-stu-id="4a92f-311">ABC **ABC123DEF456** DEF456</span></span>|  
|<span data-ttu-id="4a92f-312">2</span><span class="sxs-lookup"><span data-stu-id="4a92f-312">2</span></span>|<span data-ttu-id="4a92f-313">5</span><span class="sxs-lookup"><span data-stu-id="4a92f-313">5</span></span>|<span data-ttu-id="4a92f-314">456</span><span class="sxs-lookup"><span data-stu-id="4a92f-314">456</span></span>|<span data-ttu-id="4a92f-315">ABCABC123DEF456DEF **ABC123DEF456**</span><span class="sxs-lookup"><span data-stu-id="4a92f-315">ABCABC123DEF456DEF **ABC123DEF456**</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="4a92f-316">См. также</span><span class="sxs-lookup"><span data-stu-id="4a92f-316">See also</span></span>

- [<span data-ttu-id="4a92f-317">Элементы языка регулярных выражений — краткий справочник</span><span class="sxs-lookup"><span data-stu-id="4a92f-317">Regular Expression Language - Quick Reference</span></span>](regular-expression-language-quick-reference.md)
