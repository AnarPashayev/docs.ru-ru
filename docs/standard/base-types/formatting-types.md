---
title: Типы форматирования в .NET
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- data formatting [.NET Framework]
- dates [.NET Framework], formatting
- date formatting [.NET Framework]
- number formatting [.NET Framework]
- ToString method
- custom cultural settings [.NET Framework]
- numbers [.NET Framework], formatting
- formatting strings [.NET Framework]
- time [.NET Framework], formatting
- currency [.NET Framework], formatting
- types [.NET Framework], formatting
- format specifiers [.NET Framework]
- times [.NET Framework], formatting
- culture [.NET Framework], formatting
- formatting [.NET Framework], types supported
- base types [.NET Framework], formatting
- custom formatting [.NET Framework]
- strings [.NET Framework], formatting
ms.assetid: 0d1364da-5b30-4d42-8e6b-03378343343f
ms.openlocfilehash: a1f4d9107427140bcfa6b49bc8a850432fb204f7
ms.sourcegitcommit: 30a558d23e3ac5a52071121a52c305c85fe15726
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/25/2019
ms.locfileid: "75348251"
---
# <a name="format-types-in-net"></a><span data-ttu-id="c1022-102">Форматирование типов в .NET</span><span class="sxs-lookup"><span data-stu-id="c1022-102">Format types in .NET</span></span>

<span data-ttu-id="c1022-103">Форматирование — это процесс преобразования экземпляра класса, структуры или значения перечисления в строковое представление. Результирующая строка затем демонстрируется пользователям или десериализуется для последующего восстановления значения с исходным типом данных.</span><span class="sxs-lookup"><span data-stu-id="c1022-103">Formatting is the process of converting an instance of a class, structure, or enumeration value to its string representation, often so that the resulting string can be displayed to users or deserialized to restore the original data type.</span></span> <span data-ttu-id="c1022-104">Преобразование может быть связано с рядом проблем:</span><span class="sxs-lookup"><span data-stu-id="c1022-104">This conversion can pose a number of challenges:</span></span>

- <span data-ttu-id="c1022-105">Внутреннее представление значений необязательно соответствует тому виду, в котором они должны быть представлены пользователям.</span><span class="sxs-lookup"><span data-stu-id="c1022-105">The way that values are stored internally does not necessarily reflect the way that users want to view them.</span></span> <span data-ttu-id="c1022-106">Например, номер телефона может храниться в форме 8009999999, которая не отличается удобством для пользователей.</span><span class="sxs-lookup"><span data-stu-id="c1022-106">For example, a telephone number might be stored in the form 8009999999, which is not user-friendly.</span></span> <span data-ttu-id="c1022-107">Вместо этого номер должен отображаться в следующем виде: 800-999-9999.</span><span class="sxs-lookup"><span data-stu-id="c1022-107">It should instead be displayed as 800-999-9999.</span></span> <span data-ttu-id="c1022-108">См. в подразделе [Строки настраиваемого формата](#custom-format-strings) пример, в котором число форматируется таким образом.</span><span class="sxs-lookup"><span data-stu-id="c1022-108">See the [Custom Format Strings](#custom-format-strings) section for an example that formats a number in this way.</span></span>

- <span data-ttu-id="c1022-109">Иногда порядок преобразования объекта в строковое представление неочевиден.</span><span class="sxs-lookup"><span data-stu-id="c1022-109">Sometimes the conversion of an object to its string representation is not intuitive.</span></span> <span data-ttu-id="c1022-110">Например, неясно, как должно выглядеть строковое представление объекта класса Temperature, представляющего температурные значения, или класса Person, представляющего данные о людях.</span><span class="sxs-lookup"><span data-stu-id="c1022-110">For example, it is not clear how the string representation of a Temperature object or a Person object should appear.</span></span> <span data-ttu-id="c1022-111">Пример, в котором объект Temperature форматируется различными способами, см. в подразделе [Строки стандартного формата](#standard-format-strings) .</span><span class="sxs-lookup"><span data-stu-id="c1022-111">For an example that formats a Temperature object in a variety of ways, see the [Standard Format Strings](#standard-format-strings) section.</span></span>

- <span data-ttu-id="c1022-112">Для некоторых значений может потребоваться форматирование, учитывающее язык и региональные параметры.</span><span class="sxs-lookup"><span data-stu-id="c1022-112">Values often require culture-sensitive formatting.</span></span> <span data-ttu-id="c1022-113">Например, в приложении, где числа используются для обозначения денежных сумм, числовые строки должны включать символ текущей валюты, разделители групп (в большинстве случаев они совпадают с разделителями тысяч) и символ-разделитель целой и дробной частей.</span><span class="sxs-lookup"><span data-stu-id="c1022-113">For example, in an application that uses numbers to reflect monetary values, numeric strings should include the current culture’s currency symbol, group separator (which, in most cultures, is the thousands separator), and decimal symbol.</span></span> <span data-ttu-id="c1022-114">Пример см. в разделе [Форматирование с учетом языка и региональных параметров с помощью поставщиков формата](#culture-sensitive-formatting-with-format-providers).</span><span class="sxs-lookup"><span data-stu-id="c1022-114">For an example, see the [Culture-sensitive formatting with format providers](#culture-sensitive-formatting-with-format-providers) section.</span></span>

- <span data-ttu-id="c1022-115">Одно и то же значение может быть необходимо представить в приложении несколькими способами.</span><span class="sxs-lookup"><span data-stu-id="c1022-115">An application may have to display the same value in different ways.</span></span> <span data-ttu-id="c1022-116">Например, приложение может представлять элемент перечисления, отображая строковое представление его имени или его базовое значение.</span><span class="sxs-lookup"><span data-stu-id="c1022-116">For example, an application may represent an enumeration member by displaying a string representation of its name or by displaying its underlying value.</span></span> <span data-ttu-id="c1022-117">Пример, в котором член перечисления <xref:System.DayOfWeek> форматируется различными способами, см в подразделе [Строки стандартного формата](#standard-format-strings) .</span><span class="sxs-lookup"><span data-stu-id="c1022-117">For an example that formats a member of the <xref:System.DayOfWeek> enumeration in different ways, see the [Standard Format Strings](#standard-format-strings) section.</span></span>

> [!NOTE]
> <span data-ttu-id="c1022-118">Форматирование приводит к преобразованию значения определенного типа в его строковое представление.</span><span class="sxs-lookup"><span data-stu-id="c1022-118">Formatting converts the value of a type into a string representation.</span></span> <span data-ttu-id="c1022-119">Обратной по отношению к форматированию операцией является анализ.</span><span class="sxs-lookup"><span data-stu-id="c1022-119">Parsing is the inverse of formatting.</span></span> <span data-ttu-id="c1022-120">В ходе анализа на основании строкового представления создается экземпляр некоторого типа данных.</span><span class="sxs-lookup"><span data-stu-id="c1022-120">A parsing operation creates an instance of a data type from its string representation.</span></span> <span data-ttu-id="c1022-121">Дополнительные сведения о преобразовании строк в другие типы данных см. в разделе [Анализ строк в .NET](../../../docs/standard/base-types/parsing-strings.md).</span><span class="sxs-lookup"><span data-stu-id="c1022-121">For information about converting strings to other data types, see [Parsing Strings](../../../docs/standard/base-types/parsing-strings.md).</span></span>

<span data-ttu-id="c1022-122">Платформа .NET обеспечивает обширную поддержку форматирования, позволяя разработчикам справиться с описанными проблемами.</span><span class="sxs-lookup"><span data-stu-id="c1022-122">.NET provides rich formatting support that enables developers to address these requirements.</span></span>

## <a name="formatting-in-net"></a><span data-ttu-id="c1022-123">Форматирование в .NET</span><span class="sxs-lookup"><span data-stu-id="c1022-123">Formatting in .NET</span></span>

<span data-ttu-id="c1022-124">Основной механизм форматирования — это используемая по умолчанию реализация метода <xref:System.Object.ToString%2A?displayProperty=nameWithType>, описанная ниже в подразделе [Форматирование по умолчанию с помощью метода ToString](#default-formatting-using-the-tostring-method).</span><span class="sxs-lookup"><span data-stu-id="c1022-124">The basic mechanism for formatting is the default implementation of the <xref:System.Object.ToString%2A?displayProperty=nameWithType> method, which is discussed in the [Default Formatting Using the ToString Method](#default-formatting-using-the-tostring-method) section later in this topic.</span></span> <span data-ttu-id="c1022-125">При этом платформа .NET предоставляет несколько способов изменения и расширения имеющихся по умолчанию возможностей форматирования.</span><span class="sxs-lookup"><span data-stu-id="c1022-125">However, .NET provides several ways to modify and extend its default formatting support.</span></span> <span data-ttu-id="c1022-126">В число этих требований входят следующие:</span><span class="sxs-lookup"><span data-stu-id="c1022-126">These include the following:</span></span>

- <span data-ttu-id="c1022-127">Переопределение метода <xref:System.Object.ToString%2A?displayProperty=nameWithType> , позволяющее определить настраиваемое строковое представление значения объекта.</span><span class="sxs-lookup"><span data-stu-id="c1022-127">Overriding the <xref:System.Object.ToString%2A?displayProperty=nameWithType> method to define a custom string representation of an object’s value.</span></span> <span data-ttu-id="c1022-128">Дополнительные сведения см. ниже в разделе [Переопределение метода ToString](#override-the-tostring-method).</span><span class="sxs-lookup"><span data-stu-id="c1022-128">For more information, see the [Override the ToString Method](#override-the-tostring-method) section later in this topic.</span></span>

- <span data-ttu-id="c1022-129">Определение описателей формата, позволяющих использовать несколько видов строкового представления значения объекта.</span><span class="sxs-lookup"><span data-stu-id="c1022-129">Defining format specifiers that enable the string representation of an object’s value to take multiple forms.</span></span> <span data-ttu-id="c1022-130">Например, описатель формата "X" в следующем операторе позволяет преобразовать целое число в шестнадцатеричное строковое представление.</span><span class="sxs-lookup"><span data-stu-id="c1022-130">For example, the "X" format specifier in the following statement converts an integer to the string representation of a hexadecimal value.</span></span>

     [!code-csharp[Conceptual.Formatting.Overview#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/specifier1.cs#3)]
     [!code-vb[Conceptual.Formatting.Overview#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/specifier1.vb#3)]

     <span data-ttu-id="c1022-131">Дополнительные сведения об описателях форматов см. в подразделе [Метод ToString и строки формата](#the-tostring-method-and-format-strings) .</span><span class="sxs-lookup"><span data-stu-id="c1022-131">For more information about format specifiers, see the [ToString Method and Format Strings](#the-tostring-method-and-format-strings) section.</span></span>

- <span data-ttu-id="c1022-132">Использование поставщиков форматирования, позволяющих воспользоваться преимуществами соглашений о форматировании, присущих конкретному языку и региональным параметрам.</span><span class="sxs-lookup"><span data-stu-id="c1022-132">Using format providers to take advantage of the formatting conventions of a specific culture.</span></span> <span data-ttu-id="c1022-133">Например, следующий оператор выводит значение валюты с использованием соглашений о форматировании языка и региональных параметров "en-US".</span><span class="sxs-lookup"><span data-stu-id="c1022-133">For example, the following statement displays a currency value by using the formatting conventions of the en-US culture.</span></span>

     [!code-csharp[Conceptual.Formatting.Overview#10](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/specifier1.cs#10)]
     [!code-vb[Conceptual.Formatting.Overview#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/specifier1.vb#10)]

     <span data-ttu-id="c1022-134">Дополнительные сведения о форматировании с помощью поставщиков форматирования см. в разделе [Поставщики форматирования](#culture-sensitive-formatting-with-format-providers).</span><span class="sxs-lookup"><span data-stu-id="c1022-134">For more information about formatting with format providers, see the [Format Providers](#culture-sensitive-formatting-with-format-providers) section.</span></span>

- <span data-ttu-id="c1022-135">Реализация интерфейса <xref:System.IFormattable> , позволяющая преобразовывать строки с помощью класса <xref:System.Convert> и использовать составное форматирование.</span><span class="sxs-lookup"><span data-stu-id="c1022-135">Implementing the <xref:System.IFormattable> interface to support both string conversion with the <xref:System.Convert> class and composite formatting.</span></span> <span data-ttu-id="c1022-136">Дополнительные сведения см. в подразделе [Интерфейс IFormattable](#the-iformattable-interface) .</span><span class="sxs-lookup"><span data-stu-id="c1022-136">For more information, see the [IFormattable Interface](#the-iformattable-interface) section.</span></span>

- <span data-ttu-id="c1022-137">Использование составного форматирования, позволяющее внедрить строковую презентацию в состав более крупной строки.</span><span class="sxs-lookup"><span data-stu-id="c1022-137">Using composite formatting to embed the string representation of a value in a larger string.</span></span> <span data-ttu-id="c1022-138">Дополнительные сведения см. в подразделе [Составное форматирование](#composite-formatting) .</span><span class="sxs-lookup"><span data-stu-id="c1022-138">For more information, see the [Composite Formatting](#composite-formatting) section.</span></span>

- <span data-ttu-id="c1022-139">Реализация интерфейсов <xref:System.ICustomFormatter> и <xref:System.IFormatProvider> , позволяющая создать полноценное настраиваемое решение для форматирования.</span><span class="sxs-lookup"><span data-stu-id="c1022-139">Implementing <xref:System.ICustomFormatter> and <xref:System.IFormatProvider> to provide a complete custom formatting solution.</span></span> <span data-ttu-id="c1022-140">Дополнительные сведения см. в подразделе [Настраиваемое форматирование с использованием интерфейса ICustomFormatter](#custom-formatting-with-icustomformatter) .</span><span class="sxs-lookup"><span data-stu-id="c1022-140">For more information, see the [Custom Formatting with ICustomFormatter](#custom-formatting-with-icustomformatter) section.</span></span>

<span data-ttu-id="c1022-141">В следующих подразделах перечисленные методы преобразования объектов в их строковые представления рассматриваются более подробно.</span><span class="sxs-lookup"><span data-stu-id="c1022-141">The following sections examine these methods for converting an object to its string representation.</span></span>

## <a name="default-formatting-using-the-tostring-method"></a><span data-ttu-id="c1022-142">Форматирование по умолчанию при помощи метода ToString</span><span class="sxs-lookup"><span data-stu-id="c1022-142">Default formatting using the ToString method</span></span>

<span data-ttu-id="c1022-143">Любой производный от <xref:System.Object?displayProperty=nameWithType> тип автоматически наследует метод `ToString` без параметров, по умолчанию возвращающий имя типа.</span><span class="sxs-lookup"><span data-stu-id="c1022-143">Every type that is derived from <xref:System.Object?displayProperty=nameWithType> automatically inherits a parameterless `ToString` method, which returns the name of the type by default.</span></span> <span data-ttu-id="c1022-144">В следующем примере демонстрируется использование метода `ToString` по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="c1022-144">The following example illustrates the default `ToString` method.</span></span> <span data-ttu-id="c1022-145">Здесь определен класс с именем `Automobile` , у которого нет реализации.</span><span class="sxs-lookup"><span data-stu-id="c1022-145">It defines a class named `Automobile` that has no implementation.</span></span> <span data-ttu-id="c1022-146">При создании экземпляра этого класса и вызове его метода `ToString` отображается имя класса.</span><span class="sxs-lookup"><span data-stu-id="c1022-146">When the class is instantiated and its `ToString` method is called, it displays its type name.</span></span> <span data-ttu-id="c1022-147">Обратите внимание, что метод `ToString` не вызывается в примере явным образом.</span><span class="sxs-lookup"><span data-stu-id="c1022-147">Note that the `ToString` method is not explicitly called in the example.</span></span> <span data-ttu-id="c1022-148">Метод <xref:System.Console.WriteLine%28System.Object%29?displayProperty=nameWithType> неявно вызывает метод `ToString` объекта, переданного ему в качестве аргумента.</span><span class="sxs-lookup"><span data-stu-id="c1022-148">The <xref:System.Console.WriteLine%28System.Object%29?displayProperty=nameWithType> method implicitly calls the `ToString` method of the object passed to it as an argument.</span></span>

[!code-csharp[Conceptual.Formatting.Overview#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/default1.cs#1)]
[!code-vb[Conceptual.Formatting.Overview#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/default1.vb#1)]

> [!WARNING]
> <span data-ttu-id="c1022-149">Начиная с Windows 8.1 среда выполнения Windows включает интерфейс <xref:Windows.Foundation.IStringable> с единственным методом [IStringable.ToString](xref:Windows.Foundation.IStringable.ToString%2A), который обеспечивает поддержку форматирования по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="c1022-149">Starting with Windows 8.1, the Windows Runtime includes an <xref:Windows.Foundation.IStringable> interface with a single method, [IStringable.ToString](xref:Windows.Foundation.IStringable.ToString%2A), which provides default formatting support.</span></span> <span data-ttu-id="c1022-150">Однако рекомендуется, чтобы управляемые типы не реализовывали интерфейс `IStringable` .</span><span class="sxs-lookup"><span data-stu-id="c1022-150">However, we recommend that managed types do not implement the `IStringable` interface.</span></span> <span data-ttu-id="c1022-151">Дополнительные сведения см. в подразделе "Среда выполнения Windows и интерфейс `IStringable`" справочных сведений о методе <xref:System.Object.ToString%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c1022-151">For more information, see "The Windows Runtime and the `IStringable` Interface" section on the <xref:System.Object.ToString%2A?displayProperty=nameWithType> reference page.</span></span>

<span data-ttu-id="c1022-152">Поскольку производными от <xref:System.Object>являются все типы, кроме интерфейсов, данная функциональность автоматически присутствует в пользовательских классах и структурах.</span><span class="sxs-lookup"><span data-stu-id="c1022-152">Because all types other than interfaces are derived from <xref:System.Object>, this functionality is automatically provided to your custom classes or structures.</span></span> <span data-ttu-id="c1022-153">Тем не менее функциональные возможности, предлагаемые по умолчанию методом `ToString`, ограничены: хотя он определяет тип, он не предоставляет никакой информации о экземпляра типа.</span><span class="sxs-lookup"><span data-stu-id="c1022-153">However, the functionality offered by the default `ToString` method, is limited: Although it identifies the type, it fails to provide any information about an instance of the type.</span></span> <span data-ttu-id="c1022-154">Для формирования строкового представления объекта, позволяющего получить сведения о конкретном объекте, следует переопределить метод `ToString` .</span><span class="sxs-lookup"><span data-stu-id="c1022-154">To provide a string representation of an object that provides information about that object, you must override the `ToString` method.</span></span>

> [!NOTE]
> <span data-ttu-id="c1022-155">Структуры наследуют от типа <xref:System.ValueType>, который также является наследником <xref:System.Object>.</span><span class="sxs-lookup"><span data-stu-id="c1022-155">Structures inherit from <xref:System.ValueType>, which in turn is derived from <xref:System.Object>.</span></span> <span data-ttu-id="c1022-156">Хотя в <xref:System.ValueType> метод <xref:System.Object.ToString%2A?displayProperty=nameWithType>переопределен, его реализация идентична базовой.</span><span class="sxs-lookup"><span data-stu-id="c1022-156">Although <xref:System.ValueType> overrides <xref:System.Object.ToString%2A?displayProperty=nameWithType>, its implementation is identical.</span></span>

## <a name="override-the-tostring-method"></a><span data-ttu-id="c1022-157">Переопределение метода ToString</span><span class="sxs-lookup"><span data-stu-id="c1022-157">Override the ToString method</span></span>

<span data-ttu-id="c1022-158">Отображение имени типа зачастую малополезно и не позволяет пользователям типов отличить один экземпляр от другого.</span><span class="sxs-lookup"><span data-stu-id="c1022-158">Displaying the name of a type is often of limited use and does not allow consumers of your types to differentiate one instance from another.</span></span> <span data-ttu-id="c1022-159">Однако метод `ToString` можно переопределить, чтобы он мог возвращать более функциональное представление значения объекта.</span><span class="sxs-lookup"><span data-stu-id="c1022-159">However, you can override the `ToString` method to provide a more useful representation of an object’s value.</span></span> <span data-ttu-id="c1022-160">В следующем примере определяется объект `Temperature` , метод `ToString` которого переопределен и отображает температуру в градусах Цельсия.</span><span class="sxs-lookup"><span data-stu-id="c1022-160">The following example defines a `Temperature` object and overrides its `ToString` method to display the temperature in degrees Celsius.</span></span>

[!code-csharp[Conceptual.Formatting.Overview#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/overrides1.cs#2)]
[!code-vb[Conceptual.Formatting.Overview#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/overrides1.vb#2)]

<span data-ttu-id="c1022-161">В .NET метод `ToString` переопределен для всех типов-примитивов значений: вместо имени он отображает значение объекта.</span><span class="sxs-lookup"><span data-stu-id="c1022-161">In .NET, the `ToString` method of each primitive value type has been overridden to display the object’s value instead of its name.</span></span> <span data-ttu-id="c1022-162">В следующей таблице показаны переопределения для всех типов-примитивов.</span><span class="sxs-lookup"><span data-stu-id="c1022-162">The following table shows the override for each primitive type.</span></span> <span data-ttu-id="c1022-163">Обратите внимание, что большинство переопределенных методов вызывают другую перегрузку метода `ToString` и передают ей описатель формата "G", который задает общий формат типа, и объект <xref:System.IFormatProvider> , представляющий текущий язык и региональные параметры.</span><span class="sxs-lookup"><span data-stu-id="c1022-163">Note that most of the overridden methods call another overload of the `ToString` method and pass it the "G" format specifier, which defines the general format for its type, and an <xref:System.IFormatProvider> object that represents the current culture.</span></span>

|<span data-ttu-id="c1022-164">Type</span><span class="sxs-lookup"><span data-stu-id="c1022-164">Type</span></span>|<span data-ttu-id="c1022-165">Переопределение ToString</span><span class="sxs-lookup"><span data-stu-id="c1022-165">ToString override</span></span>|
|----------|-----------------------|
|<xref:System.Boolean>|<span data-ttu-id="c1022-166">Возвращает <xref:System.Boolean.TrueString?displayProperty=nameWithType> или <xref:System.Boolean.FalseString?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c1022-166">Returns either <xref:System.Boolean.TrueString?displayProperty=nameWithType> or <xref:System.Boolean.FalseString?displayProperty=nameWithType>.</span></span>|
|<xref:System.Byte>|<span data-ttu-id="c1022-167">Вызывает метод `Byte.ToString("G", NumberFormatInfo.CurrentInfo)` , чтобы отформатировать значение <xref:System.Byte> в соответствии с текущим языком и региональными параметрами.</span><span class="sxs-lookup"><span data-stu-id="c1022-167">Calls `Byte.ToString("G", NumberFormatInfo.CurrentInfo)` to format the <xref:System.Byte> value for the current culture.</span></span>|
|<xref:System.Char>|<span data-ttu-id="c1022-168">Возвращает символ в виде строки.</span><span class="sxs-lookup"><span data-stu-id="c1022-168">Returns the character as a string.</span></span>|
|<xref:System.DateTime>|<span data-ttu-id="c1022-169">Вызывает метод `DateTime.ToString("G", DatetimeFormatInfo.CurrentInfo)` , чтобы отформатировать значение даты и времени в соответствии с текущим языком и региональными параметрами.</span><span class="sxs-lookup"><span data-stu-id="c1022-169">Calls `DateTime.ToString("G", DatetimeFormatInfo.CurrentInfo)` to format the date and time value for the current culture.</span></span>|
|<xref:System.Decimal>|<span data-ttu-id="c1022-170">Вызывает метод `Decimal.ToString("G", NumberFormatInfo.CurrentInfo)` , чтобы отформатировать значение <xref:System.Decimal> в соответствии с текущим языком и региональными параметрами.</span><span class="sxs-lookup"><span data-stu-id="c1022-170">Calls `Decimal.ToString("G", NumberFormatInfo.CurrentInfo)` to format the <xref:System.Decimal> value for the current culture.</span></span>|
|<xref:System.Double>|<span data-ttu-id="c1022-171">Вызывает метод `Double.ToString("G", NumberFormatInfo.CurrentInfo)` , чтобы отформатировать значение <xref:System.Double> в соответствии с текущим языком и региональными параметрами.</span><span class="sxs-lookup"><span data-stu-id="c1022-171">Calls `Double.ToString("G", NumberFormatInfo.CurrentInfo)` to format the <xref:System.Double> value for the current culture.</span></span>|
|<xref:System.Int16>|<span data-ttu-id="c1022-172">Вызывает метод `Int16.ToString("G", NumberFormatInfo.CurrentInfo)` , чтобы отформатировать значение <xref:System.Int16> в соответствии с текущим языком и региональными параметрами.</span><span class="sxs-lookup"><span data-stu-id="c1022-172">Calls `Int16.ToString("G", NumberFormatInfo.CurrentInfo)` to format the <xref:System.Int16> value for the current culture.</span></span>|
|<xref:System.Int32>|<span data-ttu-id="c1022-173">Вызывает метод `Int32.ToString("G", NumberFormatInfo.CurrentInfo)` , чтобы отформатировать значение <xref:System.Int32> в соответствии с текущим языком и региональными параметрами.</span><span class="sxs-lookup"><span data-stu-id="c1022-173">Calls `Int32.ToString("G", NumberFormatInfo.CurrentInfo)` to format the <xref:System.Int32> value for the current culture.</span></span>|
|<xref:System.Int64>|<span data-ttu-id="c1022-174">Вызывает метод `Int64.ToString("G", NumberFormatInfo.CurrentInfo)` , чтобы отформатировать значение <xref:System.Int64> в соответствии с текущим языком и региональными параметрами.</span><span class="sxs-lookup"><span data-stu-id="c1022-174">Calls `Int64.ToString("G", NumberFormatInfo.CurrentInfo)` to format the <xref:System.Int64> value for the current culture.</span></span>|
|<xref:System.SByte>|<span data-ttu-id="c1022-175">Вызывает метод `SByte.ToString("G", NumberFormatInfo.CurrentInfo)` , чтобы отформатировать значение <xref:System.SByte> в соответствии с текущим языком и региональными параметрами.</span><span class="sxs-lookup"><span data-stu-id="c1022-175">Calls `SByte.ToString("G", NumberFormatInfo.CurrentInfo)` to format the <xref:System.SByte> value for the current culture.</span></span>|
|<xref:System.Single>|<span data-ttu-id="c1022-176">Вызывает метод `Single.ToString("G", NumberFormatInfo.CurrentInfo)` , чтобы отформатировать значение <xref:System.Single> в соответствии с текущим языком и региональными параметрами.</span><span class="sxs-lookup"><span data-stu-id="c1022-176">Calls `Single.ToString("G", NumberFormatInfo.CurrentInfo)` to format the <xref:System.Single> value for the current culture.</span></span>|
|<xref:System.UInt16>|<span data-ttu-id="c1022-177">Вызывает метод `UInt16.ToString("G", NumberFormatInfo.CurrentInfo)` , чтобы отформатировать значение <xref:System.UInt16> в соответствии с текущим языком и региональными параметрами.</span><span class="sxs-lookup"><span data-stu-id="c1022-177">Calls `UInt16.ToString("G", NumberFormatInfo.CurrentInfo)` to format the <xref:System.UInt16> value for the current culture.</span></span>|
|<xref:System.UInt32>|<span data-ttu-id="c1022-178">Вызывает метод `UInt32.ToString("G", NumberFormatInfo.CurrentInfo)` , чтобы отформатировать значение <xref:System.UInt32> в соответствии с текущим языком и региональными параметрами.</span><span class="sxs-lookup"><span data-stu-id="c1022-178">Calls `UInt32.ToString("G", NumberFormatInfo.CurrentInfo)` to format the <xref:System.UInt32> value for the current culture.</span></span>|
|<xref:System.UInt64>|<span data-ttu-id="c1022-179">Вызывает метод `UInt64.ToString("G", NumberFormatInfo.CurrentInfo)` , чтобы отформатировать значение <xref:System.UInt64> в соответствии с текущим языком и региональными параметрами.</span><span class="sxs-lookup"><span data-stu-id="c1022-179">Calls `UInt64.ToString("G", NumberFormatInfo.CurrentInfo)` to format the <xref:System.UInt64> value for the current culture.</span></span>|

## <a name="the-tostring-method-and-format-strings"></a><span data-ttu-id="c1022-180">Метод ToString и строки формата</span><span class="sxs-lookup"><span data-stu-id="c1022-180">The ToString method and format strings</span></span>

<span data-ttu-id="c1022-181">Использовать метод `ToString` по умолчанию или перегрузку `ToString` удобно, если у объекта имеется однозначное строковое представление.</span><span class="sxs-lookup"><span data-stu-id="c1022-181">Relying on the default `ToString` method or overriding `ToString` is appropriate when an object has a single string representation.</span></span> <span data-ttu-id="c1022-182">Тем не менее зачастую значение объекта может иметь несколько представлений.</span><span class="sxs-lookup"><span data-stu-id="c1022-182">However, the value of an object often has multiple representations.</span></span> <span data-ttu-id="c1022-183">Например, температура может выражаться в градусах по шкале Фаренгейта, Цельсия или Кельвина.</span><span class="sxs-lookup"><span data-stu-id="c1022-183">For example, a temperature can be expressed in degrees Fahrenheit, degrees Celsius, or kelvins.</span></span> <span data-ttu-id="c1022-184">Аналогично, целое число 10 можно представить различными способами, включая 10, 10.0, 1.0e01 или $10.00.</span><span class="sxs-lookup"><span data-stu-id="c1022-184">Similarly, the integer value 10 can be represented in numerous ways, including 10, 10.0, 1.0e01, or $10.00.</span></span>

<span data-ttu-id="c1022-185">Для реализации нескольких строковых представлений одного значения в платформе .NET используются строки формата.</span><span class="sxs-lookup"><span data-stu-id="c1022-185">To enable a single value to have multiple string representations, .NET uses format strings.</span></span> <span data-ttu-id="c1022-186">Строка формата содержит один или несколько предопределенных описателей формата, представляющих собой одиночные символы или группы символов, указывающие, как метод `ToString` должен форматировать вывод.</span><span class="sxs-lookup"><span data-stu-id="c1022-186">A format string is a string that contains one or more predefined format specifiers, which are single characters or groups of characters that define how the `ToString` method should format its output.</span></span> <span data-ttu-id="c1022-187">Строка формата передается в качестве параметра методу `ToString` объекта и определяет, как должно выглядеть строковое представление его значения.</span><span class="sxs-lookup"><span data-stu-id="c1022-187">The format string is then passed as a parameter to the object's `ToString` method and determines how the string representation of that object's value should appear.</span></span>

<span data-ttu-id="c1022-188">Все числовые типы, типы даты и времени, а также перечисления в составе платформы .NET поддерживают предопределенный набор описателей формата.</span><span class="sxs-lookup"><span data-stu-id="c1022-188">All numeric types, date and time types, and enumeration types in .NET support a predefined set of format specifiers.</span></span> <span data-ttu-id="c1022-189">Строки формата также можно использовать для определения разнообразных строковых представлений прикладных пользовательских типов данных.</span><span class="sxs-lookup"><span data-stu-id="c1022-189">You can also use format strings to define multiple string representations of your application-defined data types.</span></span>

### <a name="standard-format-strings"></a><span data-ttu-id="c1022-190">Строки стандартного формата</span><span class="sxs-lookup"><span data-stu-id="c1022-190">Standard format strings</span></span>

<span data-ttu-id="c1022-191">Строка стандартного формата содержит один описатель формата. Это алфавитный символ, определяющий строковое представление объекта, к которому он применяется. Также строка формата может содержать необязательный описатель точности, определяющий, сколько цифр отображается в результирующей строке.</span><span class="sxs-lookup"><span data-stu-id="c1022-191">A standard format string contains a single format specifier, which is an alphabetic character that defines the string representation of the object to which it is applied, along with an optional precision specifier that affects how many digits are displayed in the result string.</span></span> <span data-ttu-id="c1022-192">Если описатель точности не указан или не поддерживается, описатель стандартного формата будет эквивалентен строке стандартного формата.</span><span class="sxs-lookup"><span data-stu-id="c1022-192">If the precision specifier is omitted or is not supported, a standard format specifier is equivalent to a standard format string.</span></span>

<span data-ttu-id="c1022-193">В платформе .NET определяется набор описателей стандартного формата для всех числовых типов, типов даты и времени, а также для всех типов перечислений.</span><span class="sxs-lookup"><span data-stu-id="c1022-193">.NET defines a set of standard format specifiers for all numeric types, all date and time types, and all enumeration types.</span></span> <span data-ttu-id="c1022-194">Например, все эти категории поддерживают описатель стандартного формата "G", который определяет общее строковое представление значения соответствующего типа.</span><span class="sxs-lookup"><span data-stu-id="c1022-194">For example, each of these categories supports a "G" standard format specifier, which defines a general string representation of a value of that type.</span></span>

<span data-ttu-id="c1022-195">Строки стандартного формата для типов перечислений напрямую определяют строковое представление значения.</span><span class="sxs-lookup"><span data-stu-id="c1022-195">Standard format strings for enumeration types directly control the string representation of a value.</span></span> <span data-ttu-id="c1022-196">От строки формата, переданной в метод `ToString` значения перечисления, зависит, будет оно представлено своим строковым именем (описатели формата "G" и "F"), базовым целочисленным значением (описатель формата "D") или шестидесятеричным значением (описатель формата "X").</span><span class="sxs-lookup"><span data-stu-id="c1022-196">The format strings passed to an enumeration value’s `ToString` method determine whether the value is displayed using its string name (the "G" and "F" format specifiers), its underlying integral value (the "D" format specifier), or its hexadecimal value (the "X" format specifier).</span></span> <span data-ttu-id="c1022-197">В следующем примере демонстрируется использование строк стандартного формата для форматирования значения перечисления <xref:System.DayOfWeek> .</span><span class="sxs-lookup"><span data-stu-id="c1022-197">The following example illustrates the use of standard format strings to format a <xref:System.DayOfWeek> enumeration value.</span></span>

[!code-csharp[Conceptual.Formatting.Overview#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/standard1.cs#4)]
[!code-vb[Conceptual.Formatting.Overview#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/standard1.vb#4)]

<span data-ttu-id="c1022-198">Сведения о строках форматов перечислений см. в разделе [Enumeration Format Strings](../../../docs/standard/base-types/enumeration-format-strings.md).</span><span class="sxs-lookup"><span data-stu-id="c1022-198">For information about enumeration format strings, see [Enumeration Format Strings](../../../docs/standard/base-types/enumeration-format-strings.md).</span></span>

<span data-ttu-id="c1022-199">Строки стандартного формата для числовых типов обычно задают результирующую строку, точный вид которой зависит от значения одного или нескольких свойств.</span><span class="sxs-lookup"><span data-stu-id="c1022-199">Standard format strings for numeric types usually define a result string whose precise appearance is controlled by one or more property values.</span></span> <span data-ttu-id="c1022-200">Например, описатель формата "C" форматирует число в виде значения валюты.</span><span class="sxs-lookup"><span data-stu-id="c1022-200">For example, the "C" format specifier formats a number as a currency value.</span></span> <span data-ttu-id="c1022-201">При вызове метода `ToString` с описателем формата "C" в качестве единственного параметра для определения строкового представления числового значения используются следующие свойства объекта <xref:System.Globalization.NumberFormatInfo> для текущего языка и региональных параметров:</span><span class="sxs-lookup"><span data-stu-id="c1022-201">When you call the `ToString` method with the "C" format specifier as the only parameter, the following property values from the current culture’s <xref:System.Globalization.NumberFormatInfo> object are used to define the string representation of the numeric value:</span></span>

- <span data-ttu-id="c1022-202">Свойство <xref:System.Globalization.NumberFormatInfo.CurrencySymbol%2A> , определяющее символ валюты для текущего языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="c1022-202">The <xref:System.Globalization.NumberFormatInfo.CurrencySymbol%2A> property, which specifies the current culture’s currency symbol.</span></span>

- <span data-ttu-id="c1022-203">Свойство <xref:System.Globalization.NumberFormatInfo.CurrencyNegativePattern%2A> или <xref:System.Globalization.NumberFormatInfo.CurrencyPositivePattern%2A> , возвращающее целое число, от которого зависит следующее:</span><span class="sxs-lookup"><span data-stu-id="c1022-203">The <xref:System.Globalization.NumberFormatInfo.CurrencyNegativePattern%2A> or <xref:System.Globalization.NumberFormatInfo.CurrencyPositivePattern%2A> property, which returns an integer that determines the following:</span></span>

  - <span data-ttu-id="c1022-204">Положение символа валюты.</span><span class="sxs-lookup"><span data-stu-id="c1022-204">The placement of the currency symbol.</span></span>

  - <span data-ttu-id="c1022-205">Обозначение отрицательных значений: отрицательный знак в начале, отрицательный знак в конце или круглые скобки.</span><span class="sxs-lookup"><span data-stu-id="c1022-205">Whether negative values are indicated by a leading negative sign, a trailing negative sign, or parentheses.</span></span>

  - <span data-ttu-id="c1022-206">Наличие пробела между числовым значением и символом валюты.</span><span class="sxs-lookup"><span data-stu-id="c1022-206">Whether a space appears between the numeric value and the currency symbol.</span></span>

- <span data-ttu-id="c1022-207">Свойство <xref:System.Globalization.NumberFormatInfo.CurrencyDecimalDigits%2A> , определяющее число цифр дробной части в результирующей строке.</span><span class="sxs-lookup"><span data-stu-id="c1022-207">The <xref:System.Globalization.NumberFormatInfo.CurrencyDecimalDigits%2A> property, which defines the number of fractional digits in the result string.</span></span>

- <span data-ttu-id="c1022-208">Свойство <xref:System.Globalization.NumberFormatInfo.CurrencyDecimalSeparator%2A> , определяющее символ-разделитель целой и дробной частей в результирующей строке.</span><span class="sxs-lookup"><span data-stu-id="c1022-208">The <xref:System.Globalization.NumberFormatInfo.CurrencyDecimalSeparator%2A> property, which defines the decimal separator symbol in the result string.</span></span>

- <span data-ttu-id="c1022-209">Свойство <xref:System.Globalization.NumberFormatInfo.CurrencyGroupSeparator%2A> , определяющее символ-разделитель групп.</span><span class="sxs-lookup"><span data-stu-id="c1022-209">The <xref:System.Globalization.NumberFormatInfo.CurrencyGroupSeparator%2A> property, which defines the group separator symbol.</span></span>

- <span data-ttu-id="c1022-210">Свойство <xref:System.Globalization.NumberFormatInfo.CurrencyGroupSizes%2A> , определяющее число цифр в каждой из групп слева от разделителя целой и дробной частей.</span><span class="sxs-lookup"><span data-stu-id="c1022-210">The <xref:System.Globalization.NumberFormatInfo.CurrencyGroupSizes%2A> property, which defines the number of digits in each group to the left of the decimal.</span></span>

- <span data-ttu-id="c1022-211">Свойство <xref:System.Globalization.NumberFormatInfo.NegativeSign%2A> , задающее отрицательный знак, который используется в случаях, если скобки не применяются для обозначения отрицательных значений в результирующей строке.</span><span class="sxs-lookup"><span data-stu-id="c1022-211">The <xref:System.Globalization.NumberFormatInfo.NegativeSign%2A> property, which determines the negative sign used in the result string if parentheses are not used to indicate negative values.</span></span>

<span data-ttu-id="c1022-212">Кроме того, строки числового формата могут содержать описатель точности.</span><span class="sxs-lookup"><span data-stu-id="c1022-212">In addition, numeric format strings may include a precision specifier.</span></span> <span data-ttu-id="c1022-213">Смысл этого описателя зависит от строки формата, в которой он используется, но обычно он задает общее число цифр в результирующей строке или число цифр в дробной части.</span><span class="sxs-lookup"><span data-stu-id="c1022-213">The meaning of this specifier depends on the format string with which it is used, but it typically indicates either the total number of digits or the number of fractional digits that should appear in the result string.</span></span> <span data-ttu-id="c1022-214">В следующем примере используется строка стандартного числового формата с описателем точности ("X4"), что позволяет сформировать строковое значение из четырех шестидесятеричных цифр.</span><span class="sxs-lookup"><span data-stu-id="c1022-214">For example, the following example uses the "X4" standard numeric string and a precision specifier to create a string value that has four hexadecimal digits.</span></span>

[!code-csharp[Conceptual.Formatting.Overview#6](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/precisionspecifier1.cs#6)]
[!code-vb[Conceptual.Formatting.Overview#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/precisionspecifier1.vb#6)]

<span data-ttu-id="c1022-215">Дополнительные сведения о строках стандартных числовых форматов см. в разделе [Standard Numeric Format Strings](../../../docs/standard/base-types/standard-numeric-format-strings.md).</span><span class="sxs-lookup"><span data-stu-id="c1022-215">For more information about standard numeric formatting strings, see [Standard Numeric Format Strings](../../../docs/standard/base-types/standard-numeric-format-strings.md).</span></span>

<span data-ttu-id="c1022-216">Строки стандартного формата для значений даты и времени — это псевдонимы строк настраиваемого формата, которые хранятся в конкретном свойстве <xref:System.Globalization.DateTimeFormatInfo> .</span><span class="sxs-lookup"><span data-stu-id="c1022-216">Standard format strings for date and time values are aliases for custom format strings stored by a particular <xref:System.Globalization.DateTimeFormatInfo> property.</span></span> <span data-ttu-id="c1022-217">Например, вызов метода `ToString` применительно к значению даты и времени с описателем формата "D" приведет к отображению даты и времени с помощью настраиваемой строки формата, хранящейся в свойстве <xref:System.Globalization.DateTimeFormatInfo.LongDatePattern%2A?displayProperty=nameWithType> для текущего языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="c1022-217">For example, calling the `ToString` method of a date and time value with the "D" format specifier displays the date and time by using the custom format string stored in the current culture’s <xref:System.Globalization.DateTimeFormatInfo.LongDatePattern%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="c1022-218">(Дополнительные сведения о строках настраиваемого формата см. [в следующем разделе](#custom-format-strings).) Данная связь показана в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="c1022-218">(For more information about custom format strings, see the [next section](#custom-format-strings).) The following example illustrates this relationship.</span></span>

[!code-csharp[Conceptual.Formatting.Overview#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/alias1.cs#5)]
[!code-vb[Conceptual.Formatting.Overview#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/alias1.vb#5)]

<span data-ttu-id="c1022-219">Дополнительные сведения о строках стандартных форматов даты и времени см. в разделе [Строки стандартных форматов даты и времени](../../../docs/standard/base-types/standard-date-and-time-format-strings.md).</span><span class="sxs-lookup"><span data-stu-id="c1022-219">For more information about standard date and time format strings, see [Standard Date and Time Format Strings](../../../docs/standard/base-types/standard-date-and-time-format-strings.md).</span></span>

<span data-ttu-id="c1022-220">Строки стандартного формата также можно использовать для определения строкового представления прикладного объекта, формируемого с помощью метода `ToString(String)` такого объекта.</span><span class="sxs-lookup"><span data-stu-id="c1022-220">You can also use standard format strings to define the string representation of an application-defined object that is produced by the object’s `ToString(String)` method.</span></span> <span data-ttu-id="c1022-221">Можно определить конкретные описатели стандартного формата, поддерживаемые объектом, а также решить, будут ли они зависеть от регистра символов.</span><span class="sxs-lookup"><span data-stu-id="c1022-221">You can define the specific standard format specifiers that your object supports, and you can determine whether they are case-sensitive or case-insensitive.</span></span> <span data-ttu-id="c1022-222">Реализация метода `ToString(String)` должна отвечать следующим условиям:</span><span class="sxs-lookup"><span data-stu-id="c1022-222">Your implementation of the `ToString(String)` method should support the following:</span></span>

- <span data-ttu-id="c1022-223">Должен поддерживаться описатель формата "G", отвечающий за представление обычного или общего формата объекта.</span><span class="sxs-lookup"><span data-stu-id="c1022-223">A "G" format specifier that represents a customary or common format of the object.</span></span> <span data-ttu-id="c1022-224">Перегрузка метода `ToString` объекта, не имеющая параметров, должна вызывать его перегрузку `ToString(String)` , передавая ей строку стандартного формата "G".</span><span class="sxs-lookup"><span data-stu-id="c1022-224">The parameterless overload of your object's `ToString` method should call its `ToString(String)` overload and pass it the "G" standard format string.</span></span>

- <span data-ttu-id="c1022-225">Должен поддерживаться описатель формата, равный пустой ссылке (`Nothing` в Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="c1022-225">Support for a format specifier that is equal to a null reference (`Nothing` in Visual Basic).</span></span> <span data-ttu-id="c1022-226">Описатель формата, равный пустой ссылке, должен рассматриваться как эквивалент описателя формата "G".</span><span class="sxs-lookup"><span data-stu-id="c1022-226">A format specifier that is equal to a null reference should be considered equivalent to the "G" format specifier.</span></span>

<span data-ttu-id="c1022-227">Например, во внутреннем представлении класса `Temperature` температура может храниться в градусах Цельсия, а для представления значения объекта `Temperature` в градусах Цельсия, Фаренгейта или Кельвина могут использоваться различные описатели формата.</span><span class="sxs-lookup"><span data-stu-id="c1022-227">For example, a `Temperature` class can internally store the temperature in degrees Celsius and use format specifiers to represent the value of the `Temperature` object in degrees Celsius, degrees Fahrenheit, and kelvins.</span></span> <span data-ttu-id="c1022-228">Ниже приведен пример.</span><span class="sxs-lookup"><span data-stu-id="c1022-228">The following example provides an illustration.</span></span>

[!code-csharp[Conceptual.Formatting.Overview#7](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/appstandard1.cs#7)]
[!code-vb[Conceptual.Formatting.Overview#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/appstandard1.vb#7)]

### <a name="custom-format-strings"></a><span data-ttu-id="c1022-229">Строки настраиваемого формата</span><span class="sxs-lookup"><span data-stu-id="c1022-229">Custom format strings</span></span>

<span data-ttu-id="c1022-230">Помимо строк стандартного формата, в платформе .NET для числовых значений и значений даты и времени определяются строки настраиваемого формата.</span><span class="sxs-lookup"><span data-stu-id="c1022-230">In addition to the standard format strings, .NET defines custom format strings for both numeric values and date and time values.</span></span> <span data-ttu-id="c1022-231">Строка настраиваемого формата состоит из одного или нескольких описателей настраиваемого формата, описывающих строковое представление значения.</span><span class="sxs-lookup"><span data-stu-id="c1022-231">A custom format string consists of one or more custom format specifiers that define the string representation of a value.</span></span> <span data-ttu-id="c1022-232">Например, строка настраиваемого формата даты и времени, заданная как "yyyy/mm/dd hh:mm:ss.ffff t zzz", преобразует дату в строковое представления вида "2008/11/15 07:45:00.0000 P -08:00" для языка и региональных параметров "en-US".</span><span class="sxs-lookup"><span data-stu-id="c1022-232">For example, the custom date and time format string "yyyy/mm/dd hh:mm:ss.ffff t zzz" converts a date to its string representation in the form "2008/11/15 07:45:00.0000 P -08:00" for the en-US culture.</span></span> <span data-ttu-id="c1022-233">Аналогично строка настраиваемого формата "0000" приведет к преобразованию целочисленного значения 12 в строку "0012".</span><span class="sxs-lookup"><span data-stu-id="c1022-233">Similarly, the custom format string "0000" converts the integer value 12 to "0012".</span></span> <span data-ttu-id="c1022-234">Полный список строк настраиваемого формата см. в разделах [Строки настраиваемых форматов даты и времени](../../../docs/standard/base-types/custom-date-and-time-format-strings.md) и [Строки настраиваемых числовых форматов](../../../docs/standard/base-types/custom-numeric-format-strings.md).</span><span class="sxs-lookup"><span data-stu-id="c1022-234">For a complete list of custom format strings, see [Custom Date and Time Format Strings](../../../docs/standard/base-types/custom-date-and-time-format-strings.md) and [Custom Numeric Format Strings](../../../docs/standard/base-types/custom-numeric-format-strings.md).</span></span>

<span data-ttu-id="c1022-235">Если строка формата состоит из одного описателя настраиваемого формата, то перед ним должен стоять символ процента (%), чтобы его можно было отличить от описателя стандартного формата.</span><span class="sxs-lookup"><span data-stu-id="c1022-235">If a format string consists of a single custom format specifier, the format specifier should be preceded by the percent (%) symbol to avoid confusion with a standard format specifier.</span></span> <span data-ttu-id="c1022-236">В следующем примере описатель настраиваемого формата "М" используется для вывода одно- или двухзначного числа месяца для определенной даты.</span><span class="sxs-lookup"><span data-stu-id="c1022-236">The following example uses the "M" custom format specifier to display a one-digit or two-digit number of the month of a particular date.</span></span>

[!code-csharp[Conceptual.Formatting.Overview#8](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/singlecustom1.cs#8)]
[!code-vb[Conceptual.Formatting.Overview#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/singlecustom1.vb#8)]

<span data-ttu-id="c1022-237">Многие строки стандартного формата для значений даты и времени являются псевдонимами для строк настраиваемого формата, определяемых свойствами объекта <xref:System.Globalization.DateTimeFormatInfo> .</span><span class="sxs-lookup"><span data-stu-id="c1022-237">Many standard format strings for date and time values are aliases for custom format strings that are defined by properties of the <xref:System.Globalization.DateTimeFormatInfo> object.</span></span> <span data-ttu-id="c1022-238">Строки настраиваемого формата также позволяют добиться значительной гибкости в реализации прикладного форматирования числовых значений или значений даты и времени.</span><span class="sxs-lookup"><span data-stu-id="c1022-238">Custom format strings also offer considerable flexibility in providing application-defined formatting for numeric values or date and time values.</span></span> <span data-ttu-id="c1022-239">Можно определить собственные настраиваемые результирующие строки для числовых значений и значений даты и времени, объединив несколько описателей настраиваемого формата в одной строке настраиваемого формата.</span><span class="sxs-lookup"><span data-stu-id="c1022-239">You can define your own custom result strings for both numeric values and date and time values by combining multiple custom format specifiers into a single custom format string.</span></span> <span data-ttu-id="c1022-240">В следующем примере определяется строка настраиваемого формата, отображающая день недели в скобках после названия месяца, числа и года.</span><span class="sxs-lookup"><span data-stu-id="c1022-240">The following example defines a custom format string that displays the day of the week in parentheses after the month name, day, and year.</span></span>

[!code-csharp[Conceptual.Formatting.Overview#9](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/custom1.cs#9)]
[!code-vb[Conceptual.Formatting.Overview#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/custom1.vb#9)]

<span data-ttu-id="c1022-241">В следующем примере определяется строка настраиваемого формата, которая отображает значение <xref:System.Int64> как стандартный 7-значный американский номер телефона вместе с кодом города.</span><span class="sxs-lookup"><span data-stu-id="c1022-241">The following example defines a custom format string that displays an <xref:System.Int64> value as a standard, seven-digit U.S. telephone number along with its area code.</span></span>

[!code-csharp[Conceptual.Formatting.Overview#21](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/telnumber1.cs#21)]
[!code-vb[Conceptual.Formatting.Overview#21](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/telnumber1.vb#21)]

<span data-ttu-id="c1022-242">Хотя строк стандартного формата обычно достаточно для выполнения большинства задач форматирования прикладных типов, для форматирования пользовательских типов также можно определять описатели настраиваемого формата.</span><span class="sxs-lookup"><span data-stu-id="c1022-242">Although standard format strings can generally handle most of the formatting needs for your application-defined types, you may also define custom format specifiers to format your types.</span></span>

### <a name="format-strings-and-net-types"></a><span data-ttu-id="c1022-243">Строки форматов и типы .NET</span><span class="sxs-lookup"><span data-stu-id="c1022-243">Format strings and .NET types</span></span>

<span data-ttu-id="c1022-244">Все числовые типы (то есть типы <xref:System.Byte>, <xref:System.Decimal>, <xref:System.Double>, <xref:System.Int16>, <xref:System.Int32>, <xref:System.Int64>, <xref:System.SByte>, <xref:System.Single>, <xref:System.UInt16>, <xref:System.UInt32>, <xref:System.UInt64> и <xref:System.Numerics.BigInteger>), а также <xref:System.DateTime>, <xref:System.DateTimeOffset>, <xref:System.TimeSpan>, <xref:System.Guid> и все типы перечислений поддерживают форматирование с помощью строк форматов.</span><span class="sxs-lookup"><span data-stu-id="c1022-244">All numeric types (that is, the <xref:System.Byte>, <xref:System.Decimal>, <xref:System.Double>, <xref:System.Int16>, <xref:System.Int32>, <xref:System.Int64>, <xref:System.SByte>, <xref:System.Single>, <xref:System.UInt16>, <xref:System.UInt32>, <xref:System.UInt64>, and <xref:System.Numerics.BigInteger> types), as well as the <xref:System.DateTime>, <xref:System.DateTimeOffset>, <xref:System.TimeSpan>, <xref:System.Guid>, and all enumeration types, support formatting with format strings.</span></span> <span data-ttu-id="c1022-245">Сведения о конкретных строках форматов, поддерживаемых каждым типом, см. в следующих разделах.</span><span class="sxs-lookup"><span data-stu-id="c1022-245">For information on the specific format strings supported by each type, see the following topics:</span></span>

|<span data-ttu-id="c1022-246">Заголовок</span><span class="sxs-lookup"><span data-stu-id="c1022-246">Title</span></span>|<span data-ttu-id="c1022-247">Определение</span><span class="sxs-lookup"><span data-stu-id="c1022-247">Definition</span></span>|
|-----------|----------------|
|[<span data-ttu-id="c1022-248">Standard Numeric Format Strings</span><span class="sxs-lookup"><span data-stu-id="c1022-248">Standard Numeric Format Strings</span></span>](../../../docs/standard/base-types/standard-numeric-format-strings.md)|<span data-ttu-id="c1022-249">Описание строк стандартного формата, позволяющих создавать общеупотребимые строковые представления числовых значений.</span><span class="sxs-lookup"><span data-stu-id="c1022-249">Describes standard format strings that create commonly used string representations of numeric values.</span></span>|
|[<span data-ttu-id="c1022-250">Custom Numeric Format Strings</span><span class="sxs-lookup"><span data-stu-id="c1022-250">Custom Numeric Format Strings</span></span>](../../../docs/standard/base-types/custom-numeric-format-strings.md)|<span data-ttu-id="c1022-251">Описание строк настраиваемого формата, позволяющих создавать прикладные строковые представления числовых значений.</span><span class="sxs-lookup"><span data-stu-id="c1022-251">Describes custom format strings that create application-specific formats for numeric values.</span></span>|
|[<span data-ttu-id="c1022-252">Строки стандартных форматов даты и времени</span><span class="sxs-lookup"><span data-stu-id="c1022-252">Standard Date and Time Format Strings</span></span>](../../../docs/standard/base-types/standard-date-and-time-format-strings.md)|<span data-ttu-id="c1022-253">Описание строк стандартного формата, позволяющих создавать общеупотребимые строковые представления значений <xref:System.DateTime> и <xref:System.DateTimeOffset>.</span><span class="sxs-lookup"><span data-stu-id="c1022-253">Describes standard format strings that create commonly used string representations of <xref:System.DateTime> and <xref:System.DateTimeOffset> values.</span></span>|
|[<span data-ttu-id="c1022-254">Строки настраиваемых форматов даты и времени</span><span class="sxs-lookup"><span data-stu-id="c1022-254">Custom Date and Time Format Strings</span></span>](../../../docs/standard/base-types/custom-date-and-time-format-strings.md)|<span data-ttu-id="c1022-255">Описание строк настраиваемого формата, позволяющих создавать прикладные строковые представления значений <xref:System.DateTime> и <xref:System.DateTimeOffset>.</span><span class="sxs-lookup"><span data-stu-id="c1022-255">Describes custom format strings that create application-specific formats for <xref:System.DateTime> and <xref:System.DateTimeOffset> values.</span></span>|
|[<span data-ttu-id="c1022-256">Строки стандартного формата TimeSpan</span><span class="sxs-lookup"><span data-stu-id="c1022-256">Standard TimeSpan Format Strings</span></span>](../../../docs/standard/base-types/standard-timespan-format-strings.md)|<span data-ttu-id="c1022-257">Описание строк стандартного формата, позволяющих создавать общеупотребимые строковые представления интервалов времени.</span><span class="sxs-lookup"><span data-stu-id="c1022-257">Describes standard format strings that create commonly used string representations of time intervals.</span></span>|
|[<span data-ttu-id="c1022-258">Строки настраиваемого формата TimeSpan</span><span class="sxs-lookup"><span data-stu-id="c1022-258">Custom TimeSpan Format Strings</span></span>](../../../docs/standard/base-types/custom-timespan-format-strings.md)|<span data-ttu-id="c1022-259">Описание строк настраиваемого формата, позволяющих создавать прикладные строковые представления интервалов времени.</span><span class="sxs-lookup"><span data-stu-id="c1022-259">Describes custom format strings that create application-specific formats for time intervals.</span></span>|
|[<span data-ttu-id="c1022-260">Enumeration Format Strings</span><span class="sxs-lookup"><span data-stu-id="c1022-260">Enumeration Format Strings</span></span>](../../../docs/standard/base-types/enumeration-format-strings.md)|<span data-ttu-id="c1022-261">Описание строк стандартного формата, используемых для создания строковых представлений значений перечислений.</span><span class="sxs-lookup"><span data-stu-id="c1022-261">Describes standard format strings that are used to create string representations of enumeration values.</span></span>|
|<xref:System.Guid.ToString%28System.String%29?displayProperty=nameWithType>|<span data-ttu-id="c1022-262">Описание строк стандартного формата для значений <xref:System.Guid> .</span><span class="sxs-lookup"><span data-stu-id="c1022-262">Describes standard format strings for <xref:System.Guid> values.</span></span>|

## <a name="culture-sensitive-formatting-with-format-providers"></a><span data-ttu-id="c1022-263">Форматирование с учетом языка и региональных параметров с помощью поставщиков формата</span><span class="sxs-lookup"><span data-stu-id="c1022-263">Culture-sensitive formatting with format providers</span></span>

<span data-ttu-id="c1022-264">Хотя описатели формата позволяют настраивать форматирование объектов, для формирования осмысленного строкового представления объектов зачастую требуется дополнительная информация, связанная с форматированием.</span><span class="sxs-lookup"><span data-stu-id="c1022-264">Although format specifiers let you customize the formatting of objects, producing a meaningful string representation of objects often requires additional formatting information.</span></span> <span data-ttu-id="c1022-265">Например, при форматировании числового значения в формате валюты с помощью строки стандартного формата "C" или строки настраиваемого формата "$ #,#.00" для включения в отформатированную строку должен быть известен нужный символ валюты, разделитель групп, а также разделитель целой и дробной частей.</span><span class="sxs-lookup"><span data-stu-id="c1022-265">For example, formatting a number as a currency value by using either the "C" standard format string or a custom format string such as "$ #,#.00" requires, at a minimum, information about the correct currency symbol, group separator, and decimal separator to be available to include in the formatted string.</span></span> <span data-ttu-id="c1022-266">В .NET эти дополнительные сведения предоставляются с помощью интерфейса <xref:System.IFormatProvider>, который передается в качестве параметра одной или нескольким перегрузкам метода `ToString` для числовых типов и типов даты и времени.</span><span class="sxs-lookup"><span data-stu-id="c1022-266">In .NET, this additional formatting information is made available through the <xref:System.IFormatProvider> interface, which is provided as a parameter to one or more overloads of the `ToString` method of numeric types and date and time types.</span></span> <span data-ttu-id="c1022-267">Реализации <xref:System.IFormatProvider> используются в .NET для поддержки форматирования с учетом языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="c1022-267"><xref:System.IFormatProvider> implementations are used in .NET to support culture-specific formatting.</span></span> <span data-ttu-id="c1022-268">В следующем примере показано, как меняется строковое представление объекта при его форматировании с использованием трех разных объектов <xref:System.IFormatProvider> .</span><span class="sxs-lookup"><span data-stu-id="c1022-268">The following example illustrates how the string representation of an object changes when it is formatted with three <xref:System.IFormatProvider> objects that represent different cultures.</span></span>

[!code-csharp[Conceptual.Formatting.Overview#11](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/iformatprovider1.cs#11)]
[!code-vb[Conceptual.Formatting.Overview#11](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/iformatprovider1.vb#11)]

<span data-ttu-id="c1022-269">Интерфейс <xref:System.IFormatProvider> включает один метод, <xref:System.IFormatProvider.GetFormat%28System.Type%29>, имеющий один параметр, задающий тип объекта, предоставляющего сведения о форматировании.</span><span class="sxs-lookup"><span data-stu-id="c1022-269">The <xref:System.IFormatProvider> interface includes one method, <xref:System.IFormatProvider.GetFormat%28System.Type%29>, which has a single parameter that specifies the type of object that provides formatting information.</span></span> <span data-ttu-id="c1022-270">Если метод может предоставить объект указанного типа, то он его возвращает.</span><span class="sxs-lookup"><span data-stu-id="c1022-270">If the method can provide an object of that type, it returns it.</span></span> <span data-ttu-id="c1022-271">В противном случае метод возвратит пустую ссылку (`Nothing` в Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="c1022-271">Otherwise, it returns a null reference (`Nothing` in Visual Basic).</span></span>

<span data-ttu-id="c1022-272">Метод<xref:System.IFormatProvider.GetFormat%2A?displayProperty=nameWithType> является методом обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="c1022-272"><xref:System.IFormatProvider.GetFormat%2A?displayProperty=nameWithType> is a callback method.</span></span> <span data-ttu-id="c1022-273">При вызове перегрузки метода `ToString` , имеющей параметр <xref:System.IFormatProvider> , вызывается метод <xref:System.IFormatProvider.GetFormat%2A> соответствующего объекта <xref:System.IFormatProvider> .</span><span class="sxs-lookup"><span data-stu-id="c1022-273">When you call a `ToString` method overload that includes an <xref:System.IFormatProvider> parameter, it calls the <xref:System.IFormatProvider.GetFormat%2A> method of that <xref:System.IFormatProvider> object.</span></span> <span data-ttu-id="c1022-274">Метод <xref:System.IFormatProvider.GetFormat%2A> должен вернуть в метод `formatType` объект, способный предоставить необходимые сведения о форматировании и соответствующий параметру `ToString` .</span><span class="sxs-lookup"><span data-stu-id="c1022-274">The <xref:System.IFormatProvider.GetFormat%2A> method is responsible for returning an object that provides the necessary formatting information, as specified by its `formatType` parameter, to the `ToString` method.</span></span>

<span data-ttu-id="c1022-275">Многие методы форматирования и преобразования строк имеют параметр типа <xref:System.IFormatProvider>, но во многих случаях значение параметра игнорируется при вызове метода.</span><span class="sxs-lookup"><span data-stu-id="c1022-275">A number of formatting or string conversion methods include a parameter of type <xref:System.IFormatProvider>, but in many cases the value of the parameter is ignored when the method is called.</span></span> <span data-ttu-id="c1022-276">В следующей таблице перечислены некоторые методы форматирования, использующие этот параметр. Для каждого метода также указывается тип объекта <xref:System.Type> , передаваемого в метод <xref:System.IFormatProvider.GetFormat%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="c1022-276">The following table lists some of the formatting methods that use the parameter and the type of the <xref:System.Type> object that they pass to the <xref:System.IFormatProvider.GetFormat%2A?displayProperty=nameWithType> method.</span></span>

|<span data-ttu-id="c1022-277">Метод</span><span class="sxs-lookup"><span data-stu-id="c1022-277">Method</span></span>|<span data-ttu-id="c1022-278">Тип параметра `formatType`</span><span class="sxs-lookup"><span data-stu-id="c1022-278">Type of `formatType` parameter</span></span>|
|------------|------------------------------------|
|<span data-ttu-id="c1022-279">Метод`ToString` для числовых типов</span><span class="sxs-lookup"><span data-stu-id="c1022-279">`ToString` method of numeric types</span></span>|<xref:System.Globalization.NumberFormatInfo?displayProperty=nameWithType>|
|<span data-ttu-id="c1022-280">Метод `ToString` для типов даты и времени</span><span class="sxs-lookup"><span data-stu-id="c1022-280">`ToString` method of date and time types</span></span>|<xref:System.Globalization.DateTimeFormatInfo?displayProperty=nameWithType>|
|<xref:System.String.Format%2A?displayProperty=nameWithType>|<xref:System.ICustomFormatter?displayProperty=nameWithType>|
|<xref:System.Text.StringBuilder.AppendFormat%2A?displayProperty=nameWithType>|<xref:System.ICustomFormatter?displayProperty=nameWithType>|

> [!NOTE]
> <span data-ttu-id="c1022-281">Методы `ToString` у числовых типов и типов даты и времени перегружены; параметр <xref:System.IFormatProvider> имеется лишь у некоторых перегрузок.</span><span class="sxs-lookup"><span data-stu-id="c1022-281">The `ToString` methods of the numeric types and date and time types are overloaded, and only some of the overloads include an <xref:System.IFormatProvider> parameter.</span></span> <span data-ttu-id="c1022-282">Если у метода нет параметра типа <xref:System.IFormatProvider>, то вместо этого передается объект, возвращаемый свойством <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="c1022-282">If a method does not have a parameter of type <xref:System.IFormatProvider>, the object that is returned by the <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> property is passed instead.</span></span> <span data-ttu-id="c1022-283">Например, вызов метода <xref:System.Int32.ToString?displayProperty=nameWithType> по умолчанию в итоге приведет к подобному вызову метода: `Int32.ToString("G", System.Globalization.CultureInfo.CurrentCulture)`.</span><span class="sxs-lookup"><span data-stu-id="c1022-283">For example, a call to the default <xref:System.Int32.ToString?displayProperty=nameWithType> method ultimately results in a method call such as the following: `Int32.ToString("G", System.Globalization.CultureInfo.CurrentCulture)`.</span></span>

<span data-ttu-id="c1022-284">.NET предоставляет следующие три класса, реализующие интерфейс <xref:System.IFormatProvider>.</span><span class="sxs-lookup"><span data-stu-id="c1022-284">.NET provides three classes that implement <xref:System.IFormatProvider>:</span></span>

- <span data-ttu-id="c1022-285"><xref:System.Globalization.DateTimeFormatInfo>: класс, предоставляющий сведения о форматировании значений даты и времени для конкретного языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="c1022-285"><xref:System.Globalization.DateTimeFormatInfo>, a class that provides formatting information for date and time values for a specific culture.</span></span> <span data-ttu-id="c1022-286">Реализация метода <xref:System.IFormatProvider.GetFormat%2A?displayProperty=nameWithType> в этом классе возвращает его экземпляр.</span><span class="sxs-lookup"><span data-stu-id="c1022-286">Its <xref:System.IFormatProvider.GetFormat%2A?displayProperty=nameWithType> implementation returns an instance of itself.</span></span>

- <span data-ttu-id="c1022-287"><xref:System.Globalization.NumberFormatInfo>: класс, предоставляющий сведения о форматировании числовых значений для конкретного языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="c1022-287"><xref:System.Globalization.NumberFormatInfo>, a class that provides numeric formatting information for a specific culture.</span></span> <span data-ttu-id="c1022-288">Реализация метода <xref:System.IFormatProvider.GetFormat%2A?displayProperty=nameWithType> в этом классе возвращает его экземпляр.</span><span class="sxs-lookup"><span data-stu-id="c1022-288">Its <xref:System.IFormatProvider.GetFormat%2A?displayProperty=nameWithType> implementation returns an instance of itself.</span></span>

- <span data-ttu-id="c1022-289"><xref:System.Globalization.CultureInfo>.</span><span class="sxs-lookup"><span data-stu-id="c1022-289"><xref:System.Globalization.CultureInfo>.</span></span> <span data-ttu-id="c1022-290">Реализация метода <xref:System.IFormatProvider.GetFormat%2A?displayProperty=nameWithType> в этом классе возвращает объект <xref:System.Globalization.NumberFormatInfo> , предоставляющий сведения о форматировании числовых значений, либо объект <xref:System.Globalization.DateTimeFormatInfo> , предоставляющий сведения о форматировании значений даты и времени.</span><span class="sxs-lookup"><span data-stu-id="c1022-290">Its <xref:System.IFormatProvider.GetFormat%2A?displayProperty=nameWithType> implementation can return either a <xref:System.Globalization.NumberFormatInfo> object to provide numeric formatting information or a <xref:System.Globalization.DateTimeFormatInfo> object to provide formatting information for date and time values.</span></span>

<span data-ttu-id="c1022-291">Также можно реализовать пользовательский поставщик форматирования, позволяющий заменить любой из этих классов.</span><span class="sxs-lookup"><span data-stu-id="c1022-291">You can also implement your own format provider to replace any one of these classes.</span></span> <span data-ttu-id="c1022-292">При этом пользовательская реализация метода <xref:System.IFormatProvider.GetFormat%2A>, рассчитанная на предоставление сведений о форматировании для метода `ToString`, должна возвращать объект одного из типов, перечисленных в приведенной выше таблице.</span><span class="sxs-lookup"><span data-stu-id="c1022-292">However, your implementation’s <xref:System.IFormatProvider.GetFormat%2A> method must return an object of the type listed in the previous table if it has to provide formatting information to the `ToString` method.</span></span>

### <a name="culture-sensitive-formatting-of-numeric-values"></a><span data-ttu-id="c1022-293">Форматирование числовых значений, зависящее от языка и региональных параметров</span><span class="sxs-lookup"><span data-stu-id="c1022-293">Culture-sensitive formatting of numeric values</span></span>

<span data-ttu-id="c1022-294">По умолчанию форматирование числовых значений зависит от языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="c1022-294">By default, the formatting of numeric values is culture-sensitive.</span></span> <span data-ttu-id="c1022-295">Если не указать язык и региональные параметры при вызове метода форматирования, используются соглашения о форматировании текущего языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="c1022-295">If you do not specify a culture when you call a formatting method, the formatting conventions of the current thread culture are used.</span></span> <span data-ttu-id="c1022-296">Это продемонстрировано в следующем примере, который изменяет текущие язык и региональные параметры четыре раза, а затем вызывает метод <xref:System.Decimal.ToString%28System.String%29?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="c1022-296">This is illustrated in the following example, which changes the current thread culture four times and then calls the <xref:System.Decimal.ToString%28System.String%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="c1022-297">В каждом случае результирующая строка отражает соглашения о форматировании текущих языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="c1022-297">In each case, the result string reflects the formatting conventions of the current culture.</span></span> <span data-ttu-id="c1022-298">Это происходит потому, что методы `ToString` и `ToString(String)` создают оболочки для вызовов метода `ToString(String, IFormatProvider)` каждого числового типа.</span><span class="sxs-lookup"><span data-stu-id="c1022-298">This is because the `ToString` and `ToString(String)` methods wrap calls to each numeric type's `ToString(String, IFormatProvider)` method.</span></span>

[!code-csharp[Conceptual.Formatting.Overview#19](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/culturespecific3.cs#19)]
[!code-vb[Conceptual.Formatting.Overview#19](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/culturespecific3.vb#19)]

<span data-ttu-id="c1022-299">Отформатировать числовое значение для определенных языка и региональных параметров также можно путем вызова перегрузки метода `ToString` , которая имеет параметр `provider` , и передачи ей одного из следующих объектов:</span><span class="sxs-lookup"><span data-stu-id="c1022-299">You can also format a numeric value for a specific culture by calling a `ToString` overload that has a `provider` parameter and passing it either of the following:</span></span>

- <span data-ttu-id="c1022-300">объекта <xref:System.Globalization.CultureInfo> , представляющего язык и региональные параметры, соглашения о форматировании которых требуется использовать.</span><span class="sxs-lookup"><span data-stu-id="c1022-300">A <xref:System.Globalization.CultureInfo> object that represents the culture whose formatting conventions are to be used.</span></span> <span data-ttu-id="c1022-301">Его метод <xref:System.Globalization.CultureInfo.GetFormat%2A?displayProperty=nameWithType> возвращает значение свойства <xref:System.Globalization.CultureInfo.NumberFormat%2A?displayProperty=nameWithType> , которое является объектом <xref:System.Globalization.NumberFormatInfo> , предоставляющим сведения о форматировании в соответствии с языком и региональными параметрами для числовых значений;</span><span class="sxs-lookup"><span data-stu-id="c1022-301">Its <xref:System.Globalization.CultureInfo.GetFormat%2A?displayProperty=nameWithType> method returns the value of the <xref:System.Globalization.CultureInfo.NumberFormat%2A?displayProperty=nameWithType> property, which is the <xref:System.Globalization.NumberFormatInfo> object that provides culture-specific formatting information for numeric values.</span></span>

- <span data-ttu-id="c1022-302">объекта <xref:System.Globalization.NumberFormatInfo> , определяющего соглашения о форматировании для используемых языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="c1022-302">A <xref:System.Globalization.NumberFormatInfo> object that defines the culture-specific formatting conventions to be used.</span></span> <span data-ttu-id="c1022-303">Метод <xref:System.Globalization.NumberFormatInfo.GetFormat%2A> этого класса возвращает экземпляр его самого.</span><span class="sxs-lookup"><span data-stu-id="c1022-303">Its <xref:System.Globalization.NumberFormatInfo.GetFormat%2A> method returns an instance of itself.</span></span>

<span data-ttu-id="c1022-304">В следующем примере объекты <xref:System.Globalization.NumberFormatInfo> , представляющие "Английский (США)" и "Английский (Соединенное Королевство)" язык и региональные параметры, а также "Французский" и "Русский" нейтральные языки и региональные параметры, используются для форматирования числа с плавающей запятой.</span><span class="sxs-lookup"><span data-stu-id="c1022-304">The following example uses <xref:System.Globalization.NumberFormatInfo> objects that represent the English (United States) and English (Great Britain) cultures and the French and Russian neutral cultures to format a floating-point number.</span></span>

[!code-csharp[Conceptual.Formatting.Overview#20](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/culturespecific4.cs#20)]
[!code-vb[Conceptual.Formatting.Overview#20](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/culturespecific4.vb#20)]

### <a name="culture-sensitive-formatting-of-date-and-time-values"></a><span data-ttu-id="c1022-305">Форматирование значений даты и времени, зависящее от языка и региональных параметров</span><span class="sxs-lookup"><span data-stu-id="c1022-305">Culture-sensitive formatting of date and time values</span></span>

<span data-ttu-id="c1022-306">По умолчанию форматирование значений даты и времени зависит от языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="c1022-306">By default, the formatting of date and time values is culture-sensitive.</span></span> <span data-ttu-id="c1022-307">Если не указать язык и региональные параметры при вызове метода форматирования, используются соглашения о форматировании текущего языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="c1022-307">If you do not specify a culture when you call a formatting method, the formatting conventions of the current thread culture are used.</span></span> <span data-ttu-id="c1022-308">Это продемонстрировано в следующем примере, который изменяет текущие язык и региональные параметры четыре раза, а затем вызывает метод <xref:System.DateTime.ToString%28System.String%29?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="c1022-308">This is illustrated in the following example, which changes the current thread culture four times and then calls the <xref:System.DateTime.ToString%28System.String%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="c1022-309">В каждом случае результирующая строка отражает соглашения о форматировании текущих языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="c1022-309">In each case, the result string reflects the formatting conventions of the current culture.</span></span> <span data-ttu-id="c1022-310">Это происходит потому, что методы <xref:System.DateTime.ToString?displayProperty=nameWithType>, <xref:System.DateTime.ToString%28System.String%29?displayProperty=nameWithType>, <xref:System.DateTimeOffset.ToString?displayProperty=nameWithType>и <xref:System.DateTimeOffset.ToString%28System.String%29?displayProperty=nameWithType> создают оболочки для вызовов методов <xref:System.DateTime.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> и <xref:System.DateTimeOffset.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="c1022-310">This is because the <xref:System.DateTime.ToString?displayProperty=nameWithType>, <xref:System.DateTime.ToString%28System.String%29?displayProperty=nameWithType>, <xref:System.DateTimeOffset.ToString?displayProperty=nameWithType>, and <xref:System.DateTimeOffset.ToString%28System.String%29?displayProperty=nameWithType> methods wrap calls to the <xref:System.DateTime.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> and <xref:System.DateTimeOffset.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> methods.</span></span>

[!code-csharp[Conceptual.Formatting.Overview#17](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/culturespecific1.cs#17)]
[!code-vb[Conceptual.Formatting.Overview#17](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/culturespecific1.vb#17)]

<span data-ttu-id="c1022-311">Форматировать значения даты и времени для определенных языка и региональных параметров также можно путем вызова перегрузки методов <xref:System.DateTime.ToString%2A?displayProperty=nameWithType> или <xref:System.DateTimeOffset.ToString%2A?displayProperty=nameWithType> , которая имеет параметр `provider` , и передачи ей одного из следующих объектов:</span><span class="sxs-lookup"><span data-stu-id="c1022-311">You can also format a date and time value for a specific culture by calling a <xref:System.DateTime.ToString%2A?displayProperty=nameWithType> or <xref:System.DateTimeOffset.ToString%2A?displayProperty=nameWithType> overload that has a `provider` parameter and passing it either of the following:</span></span>

- <span data-ttu-id="c1022-312">объекта <xref:System.Globalization.CultureInfo> , представляющего язык и региональные параметры, соглашения о форматировании которых требуется использовать.</span><span class="sxs-lookup"><span data-stu-id="c1022-312">A <xref:System.Globalization.CultureInfo> object that represents the culture whose formatting conventions are to be used.</span></span> <span data-ttu-id="c1022-313">Его метод <xref:System.Globalization.CultureInfo.GetFormat%2A?displayProperty=nameWithType> возвращает значение свойства <xref:System.Globalization.CultureInfo.DateTimeFormat%2A?displayProperty=nameWithType> , которое является объектом <xref:System.Globalization.DateTimeFormatInfo> , предоставляющим сведения о форматировании в соответствии с языком и региональными параметрами для значений даты и времени;</span><span class="sxs-lookup"><span data-stu-id="c1022-313">Its <xref:System.Globalization.CultureInfo.GetFormat%2A?displayProperty=nameWithType> method returns the value of the <xref:System.Globalization.CultureInfo.DateTimeFormat%2A?displayProperty=nameWithType> property, which is the <xref:System.Globalization.DateTimeFormatInfo> object that provides culture-specific formatting information for date and time values.</span></span>

- <span data-ttu-id="c1022-314">объекта <xref:System.Globalization.DateTimeFormatInfo> , определяющего соглашения о форматировании для используемых языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="c1022-314">A <xref:System.Globalization.DateTimeFormatInfo> object that defines the culture-specific formatting conventions to be used.</span></span> <span data-ttu-id="c1022-315">Метод <xref:System.Globalization.DateTimeFormatInfo.GetFormat%2A> этого класса возвращает экземпляр его самого.</span><span class="sxs-lookup"><span data-stu-id="c1022-315">Its <xref:System.Globalization.DateTimeFormatInfo.GetFormat%2A> method returns an instance of itself.</span></span>

<span data-ttu-id="c1022-316">В следующем примере объекты <xref:System.Globalization.DateTimeFormatInfo> , представляющие "Английский (США)" и "Английский (Соединенное Королевство)" язык и региональные параметры, а также "Французский" и "Русский" нейтральные языки и региональные параметры, используются для форматирования даты.</span><span class="sxs-lookup"><span data-stu-id="c1022-316">The following example uses <xref:System.Globalization.DateTimeFormatInfo> objects that represent the English (United States) and English (Great Britain) cultures and the French and Russian neutral cultures to format a date.</span></span>

[!code-csharp[Conceptual.Formatting.Overview#18](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/culturespecific2.cs#18)]
[!code-vb[Conceptual.Formatting.Overview#18](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/culturespecific2.vb#18)]

## <a name="the-iformattable-interface"></a><span data-ttu-id="c1022-317">Интерфейс IFormattable</span><span class="sxs-lookup"><span data-stu-id="c1022-317">The IFormattable interface</span></span>

<span data-ttu-id="c1022-318">Обычно типы, в которых имеется перегрузка метода `ToString` , использующая строку формата и параметр <xref:System.IFormatProvider> , также реализуют интерфейс <xref:System.IFormattable> .</span><span class="sxs-lookup"><span data-stu-id="c1022-318">Typically, types that overload the `ToString` method with a format string and an <xref:System.IFormatProvider> parameter also implement the <xref:System.IFormattable> interface.</span></span> <span data-ttu-id="c1022-319">Единственный член этого интерфейса — метод <xref:System.IFormattable.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType>, параметрами которого являются строка формата и поставщик форматирования.</span><span class="sxs-lookup"><span data-stu-id="c1022-319">This interface has a single member, <xref:System.IFormattable.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType>, that includes both a format string and a format provider as parameters.</span></span>

<span data-ttu-id="c1022-320">Реализация интерфейса <xref:System.IFormattable> в прикладных типах позволяет получить два преимущества:</span><span class="sxs-lookup"><span data-stu-id="c1022-320">Implementing the <xref:System.IFormattable> interface for your application-defined class offers two advantages:</span></span>

- <span data-ttu-id="c1022-321">Поддержка строковых преобразований с помощью класса <xref:System.Convert> .</span><span class="sxs-lookup"><span data-stu-id="c1022-321">Support for string conversion by the <xref:System.Convert> class.</span></span> <span data-ttu-id="c1022-322">При вызове методов <xref:System.Convert.ToString%28System.Object%29?displayProperty=nameWithType> и <xref:System.Convert.ToString%28System.Object%2CSystem.IFormatProvider%29?displayProperty=nameWithType> автоматически вызывается пользовательская реализация <xref:System.IFormattable> .</span><span class="sxs-lookup"><span data-stu-id="c1022-322">Calls to the <xref:System.Convert.ToString%28System.Object%29?displayProperty=nameWithType> and <xref:System.Convert.ToString%28System.Object%2CSystem.IFormatProvider%29?displayProperty=nameWithType> methods call your <xref:System.IFormattable> implementation automatically.</span></span>

- <span data-ttu-id="c1022-323">Поддержка составного форматирования.</span><span class="sxs-lookup"><span data-stu-id="c1022-323">Support for composite formatting.</span></span> <span data-ttu-id="c1022-324">Если для форматирования пользовательского типа используется элемент форматирования, включающий строку формата, то среда CLR автоматически вызывает пользовательскую реализацию <xref:System.IFormattable> , передавая ей строку формата.</span><span class="sxs-lookup"><span data-stu-id="c1022-324">If a format item that includes a format string is used to format your custom type, the common language runtime automatically calls your <xref:System.IFormattable> implementation and passes it the format string.</span></span> <span data-ttu-id="c1022-325">Дополнительные сведения о составном форматировании с помощью таких методов, как <xref:System.String.Format%2A?displayProperty=nameWithType> или <xref:System.Console.WriteLine%2A?displayProperty=nameWithType>, см. в подразделе [Составное форматирование](#composite-formatting) .</span><span class="sxs-lookup"><span data-stu-id="c1022-325">For more information about composite formatting with methods such as <xref:System.String.Format%2A?displayProperty=nameWithType> or <xref:System.Console.WriteLine%2A?displayProperty=nameWithType>, see the [Composite Formatting](#composite-formatting) section.</span></span>

<span data-ttu-id="c1022-326">В следующем примере определяется класс `Temperature` , реализующий интерфейс <xref:System.IFormattable> .</span><span class="sxs-lookup"><span data-stu-id="c1022-326">The following example defines a `Temperature` class that implements the <xref:System.IFormattable> interface.</span></span> <span data-ttu-id="c1022-327">Он поддерживает описатели формата "C" и "G", позволяющие отобразить значение температуры в градусах Цельсия, описатель формата "F", позволяющий отобразить значение температуры в градусах Фаренгейта, и описатель формата "K", позволяющий отобразить значение температуры в градусах Кельвина.</span><span class="sxs-lookup"><span data-stu-id="c1022-327">It supports the "C" or "G" format specifiers to display the temperature in Celsius, the "F" format specifier to display the temperature in Fahrenheit, and the "K" format specifier to display the temperature in Kelvin.</span></span>

[!code-csharp[Conceptual.Formatting.Overview#12](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/iformattable.cs#12)]
[!code-vb[Conceptual.Formatting.Overview#12](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/iformattable.vb#12)]

<span data-ttu-id="c1022-328">В следующем примере создается объект `Temperature`.</span><span class="sxs-lookup"><span data-stu-id="c1022-328">The following example instantiates a `Temperature` object.</span></span> <span data-ttu-id="c1022-329">Затем в нем вызывается метод <xref:System.Convert.ToString%2A> . Использование нескольких строк составного формата позволяет получить различные строковые представления объекта `Temperature` .</span><span class="sxs-lookup"><span data-stu-id="c1022-329">It then calls the <xref:System.Convert.ToString%2A> method and uses several composite format strings to obtain different string representations of a `Temperature` object.</span></span> <span data-ttu-id="c1022-330">В свою очередь каждый из этих вызовов метода вызывает реализацию <xref:System.IFormattable> класса `Temperature` .</span><span class="sxs-lookup"><span data-stu-id="c1022-330">Each of these method calls, in turn, calls the <xref:System.IFormattable> implementation of the `Temperature` class.</span></span>

[!code-csharp[Conceptual.Formatting.Overview#13](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/iformattable.cs#13)]
[!code-vb[Conceptual.Formatting.Overview#13](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/iformattable.vb#13)]

## <a name="composite-formatting"></a><span data-ttu-id="c1022-331">Составное форматирование</span><span class="sxs-lookup"><span data-stu-id="c1022-331">Composite formatting</span></span>

<span data-ttu-id="c1022-332">Некоторые методы, например <xref:System.String.Format%2A?displayProperty=nameWithType> и <xref:System.Text.StringBuilder.AppendFormat%2A?displayProperty=nameWithType>, поддерживают составное форматирование.</span><span class="sxs-lookup"><span data-stu-id="c1022-332">Some methods, such as <xref:System.String.Format%2A?displayProperty=nameWithType> and <xref:System.Text.StringBuilder.AppendFormat%2A?displayProperty=nameWithType>, support composite formatting.</span></span> <span data-ttu-id="c1022-333">Строка составного формата — это некий шаблон, возвращающий единую строку, включающую строковое представление нулевого, единичного или другого числа объектов.</span><span class="sxs-lookup"><span data-stu-id="c1022-333">A composite format string is a kind of template that returns a single string that incorporates the string representation of zero, one, or more objects.</span></span> <span data-ttu-id="c1022-334">Каждый объект представляется в строке составного формата индексированным элементом форматирования.</span><span class="sxs-lookup"><span data-stu-id="c1022-334">Each object is represented in the composite format string by an indexed format item.</span></span> <span data-ttu-id="c1022-335">Индекс элемента форматирования соответствует положению представляющего его объекта в списке параметров метода.</span><span class="sxs-lookup"><span data-stu-id="c1022-335">The index of the format item corresponds to the position of the object that it represents in the method's parameter list.</span></span> <span data-ttu-id="c1022-336">Индексы отсчитываются от нуля.</span><span class="sxs-lookup"><span data-stu-id="c1022-336">Indexes are zero-based.</span></span> <span data-ttu-id="c1022-337">Например, в вызове метода <xref:System.String.Format%2A?displayProperty=nameWithType> первый элемент форматирования, `{0:D}`, замещается строковым представлением `thatDate`; второй элемент форматирования, `{1}`, замещается строковым представлением `item1`; а третий элемент форматирования, `{2:C2}`, замещается строковым представлением `item1.Value`.</span><span class="sxs-lookup"><span data-stu-id="c1022-337">For example, in the following call to the <xref:System.String.Format%2A?displayProperty=nameWithType> method, the first format item, `{0:D}`, is replaced by the string representation of `thatDate`; the second format item, `{1}`, is replaced by the string representation of `item1`; and the third format item, `{2:C2}`, is replaced by the string representation of `item1.Value`.</span></span>

[!code-csharp[Conceptual.Formatting.Overview#14](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/composite1.cs#14)]
[!code-vb[Conceptual.Formatting.Overview#14](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/composite1.vb#14)]

<span data-ttu-id="c1022-338">Помимо замены элементов форматирования строковыми представлениями соответствующего объекта, элементы форматирования также позволяют управлять перечисленными ниже аспектами.</span><span class="sxs-lookup"><span data-stu-id="c1022-338">In addition to replacing a format item with the string representation of its corresponding object, format items also let you control the following:</span></span>

- <span data-ttu-id="c1022-339">Вы можете указать конкретный способ представления объекта в виде строки, если объект реализует интерфейс <xref:System.IFormattable> и поддерживает строки формата.</span><span class="sxs-lookup"><span data-stu-id="c1022-339">The specific way in which an object is represented as a string, if the object implements the <xref:System.IFormattable> interface and supports format strings.</span></span> <span data-ttu-id="c1022-340">Для этого после индекса элемента форматирования необходимо ввести `:` (двоеточие), а за ним — допустимую строку формата.</span><span class="sxs-lookup"><span data-stu-id="c1022-340">You do this by following the format item's index with a `:` (colon) followed by a valid format string.</span></span> <span data-ttu-id="c1022-341">В предыдущем примере для этого выполнялось форматирование значения даты с помощью строки формата "d" (шаблон короткого формата даты, например, `{0:d}`) и форматирование числового значения с помощью строки формата "C2" (например, `{2:C2}` для представления числа в виде значения валюты с двумя цифрами дробной части).</span><span class="sxs-lookup"><span data-stu-id="c1022-341">The previous example did this by formatting a date value with the "d" (short date pattern) format string (e.g., `{0:d}`) and   by formatting a numeric value with the "C2" format string (e.g., `{2:C2}` to represent the number as a currency value with two fractional decimal digits.</span></span>

- <span data-ttu-id="c1022-342">Вы можете задать ширину поля, содержащего строковое представление объекта, и выравнивание строкового представления в этом поле.</span><span class="sxs-lookup"><span data-stu-id="c1022-342">The width of the field that contains the object's string representation, and the alignment of the string representation in that field.</span></span> <span data-ttu-id="c1022-343">Для этого после индекса элемента форматирования необходимо ввести `,` (запятую), а за ней — значение ширины поля.</span><span class="sxs-lookup"><span data-stu-id="c1022-343">You do this by following the format item's index with a `,` (comma) followed the field width.</span></span> <span data-ttu-id="c1022-344">Строка выравнивается по правому краю поля, если ширина поля — положительное значение, и по левому краю, если ширина поля — отрицательное значение.</span><span class="sxs-lookup"><span data-stu-id="c1022-344">The string is right-aligned in the field if the field width is a positive value, and it is left-aligned if the field width is a negative value.</span></span> <span data-ttu-id="c1022-345">В примере ниже значения даты выравниваются по левому краю поля из 20 символов, а десятичные значения с одной цифрой дробной части — по правом краю поля из 11 символов.</span><span class="sxs-lookup"><span data-stu-id="c1022-345">The following example left-aligns date values in a 20-character field, and it right-aligns decimal values with one fractional digit in an 11-character field.</span></span>

     [!code-csharp[Conceptual.Formatting.Overview#22](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/composite2.cs#22)]
     [!code-vb[Conceptual.Formatting.Overview#22](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/composite2.vb#22)]

     <span data-ttu-id="c1022-346">Обратите внимание на то, что если присутствует и компонент выравнивания строки, и компонент строки формата, первый из них предшествует последнему (например, `{0,-20:g}`).</span><span class="sxs-lookup"><span data-stu-id="c1022-346">Note that, if both the alignment string component and the format string component are present, the former precedes the latter (for example, `{0,-20:g}`.</span></span>

<span data-ttu-id="c1022-347">Дополнительные сведения о составном форматировании см. в статье [Составное форматирование](../../../docs/standard/base-types/composite-formatting.md).</span><span class="sxs-lookup"><span data-stu-id="c1022-347">For more information about composite formatting, see [Composite Formatting](../../../docs/standard/base-types/composite-formatting.md).</span></span>

## <a name="custom-formatting-with-icustomformatter"></a><span data-ttu-id="c1022-348">Настраиваемое форматирование с использованием интерфейса ICustomFormatter</span><span class="sxs-lookup"><span data-stu-id="c1022-348">Custom formatting with ICustomFormatter</span></span>

<span data-ttu-id="c1022-349">У двух методов составного форматирования — <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType> и <xref:System.Text.StringBuilder.AppendFormat%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType>— также имеется параметр, задающий поставщик форматирования, поддерживающий настраиваемое форматирование.</span><span class="sxs-lookup"><span data-stu-id="c1022-349">Two composite formatting methods, <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType> and <xref:System.Text.StringBuilder.AppendFormat%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType>, include a format provider parameter that supports custom formatting.</span></span> <span data-ttu-id="c1022-350">При вызове какого-либо из этих методов форматирования объект <xref:System.Type> , представляющий интерфейс <xref:System.ICustomFormatter> , передается методу <xref:System.IFormatProvider.GetFormat%2A> поставщика форматирования.</span><span class="sxs-lookup"><span data-stu-id="c1022-350">When either of these formatting methods is called, it passes a <xref:System.Type> object that represents an <xref:System.ICustomFormatter> interface to the format provider’s <xref:System.IFormatProvider.GetFormat%2A> method.</span></span> <span data-ttu-id="c1022-351">Метод <xref:System.IFormatProvider.GetFormat%2A> должен вернуть реализацию <xref:System.ICustomFormatter> , поддерживающую настраиваемое форматирование.</span><span class="sxs-lookup"><span data-stu-id="c1022-351">The <xref:System.IFormatProvider.GetFormat%2A> method is then responsible for returning the <xref:System.ICustomFormatter> implementation that provides custom formatting.</span></span>

<span data-ttu-id="c1022-352">Единственный метод интерфейса <xref:System.ICustomFormatter> , который называется <xref:System.ICustomFormatter.Format%28System.String%2CSystem.Object%2CSystem.IFormatProvider%29>, автоматически вызывается методом составного форматирования по одному разу для каждого элемента форматирования в строке составного формата.</span><span class="sxs-lookup"><span data-stu-id="c1022-352">The <xref:System.ICustomFormatter> interface has a single method, <xref:System.ICustomFormatter.Format%28System.String%2CSystem.Object%2CSystem.IFormatProvider%29>, that is called automatically by a composite formatting method, once for each format item in a composite format string.</span></span> <span data-ttu-id="c1022-353">У метода <xref:System.ICustomFormatter.Format%28System.String%2CSystem.Object%2CSystem.IFormatProvider%29> есть три параметра: строка формата, представляющая аргумент `formatString` в элементе форматирования, сам форматируемый объект и объект <xref:System.IFormatProvider> , предоставляющий услуги форматирования.</span><span class="sxs-lookup"><span data-stu-id="c1022-353">The <xref:System.ICustomFormatter.Format%28System.String%2CSystem.Object%2CSystem.IFormatProvider%29> method has three parameters: a format string, which represents the `formatString` argument in a format item, an object to format, and an <xref:System.IFormatProvider> object that provides formatting services.</span></span> <span data-ttu-id="c1022-354">Обычно класс, реализующий интерфейс <xref:System.ICustomFormatter> , также реализует интерфейс <xref:System.IFormatProvider>, поэтому в таком случае последний параметр будет ссылкой на сам класс настраиваемого форматирования.</span><span class="sxs-lookup"><span data-stu-id="c1022-354">Typically, the class that implements <xref:System.ICustomFormatter> also implements <xref:System.IFormatProvider>, so this last parameter is a reference to the custom formatting class itself.</span></span> <span data-ttu-id="c1022-355">Метод возвращает настраиваемое строковое представление объекта, который нужно было отформатировать.</span><span class="sxs-lookup"><span data-stu-id="c1022-355">The method returns a custom formatted string representation of the object to be formatted.</span></span> <span data-ttu-id="c1022-356">Если методу не удается отформатировать объект, он должен вернуть пустую ссылку (`Nothing` в Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="c1022-356">If the method cannot format the object, it should return a null reference (`Nothing` in Visual Basic).</span></span>

<span data-ttu-id="c1022-357">В следующем примере приведена реализация <xref:System.ICustomFormatter> с именем `ByteByByteFormatter` , отображающая целочисленные значения в виде последовательности пар шестидесятеричных цифр, разделенных пробелами.</span><span class="sxs-lookup"><span data-stu-id="c1022-357">The following example provides an <xref:System.ICustomFormatter> implementation named `ByteByByteFormatter` that displays integer values as a sequence of two-digit hexadecimal values followed by a space.</span></span>

[!code-csharp[Conceptual.Formatting.Overview#15](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/icustomformatter1.cs#15)]
[!code-vb[Conceptual.Formatting.Overview#15](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/icustomformatter1.vb#15)]

<span data-ttu-id="c1022-358">В следующем примере класс `ByteByByteFormatter` используется для форматирования целочисленных значений.</span><span class="sxs-lookup"><span data-stu-id="c1022-358">The following example uses the `ByteByByteFormatter` class to format integer values.</span></span> <span data-ttu-id="c1022-359">Обратите внимание, что метод <xref:System.ICustomFormatter.Format%2A?displayProperty=nameWithType> вызывается во втором вызове метода <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType> несколько раз и что в третьем вызове метода используется поставщик <xref:System.Globalization.NumberFormatInfo> по умолчанию, поскольку метод`ByteByByteFormatter.Format`</span><span class="sxs-lookup"><span data-stu-id="c1022-359">Note that the <xref:System.ICustomFormatter.Format%2A?displayProperty=nameWithType> method is called more than once in the second <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType> method call, and that the default <xref:System.Globalization.NumberFormatInfo> provider is used in the third method call because the .`ByteByByteFormatter.Format`</span></span> <span data-ttu-id="c1022-360">не распознает строку формата "N0" и возвращает пустую ссылку (`Nothing` в Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="c1022-360">method does not recognize the "N0" format string and returns a null reference (`Nothing` in Visual Basic).</span></span>

[!code-csharp[Conceptual.Formatting.Overview#16](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.formatting.overview/cs/icustomformatter1.cs#16)]
[!code-vb[Conceptual.Formatting.Overview#16](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.formatting.overview/vb/icustomformatter1.vb#16)]

## <a name="related-topics"></a><span data-ttu-id="c1022-361">См. также</span><span class="sxs-lookup"><span data-stu-id="c1022-361">Related topics</span></span>

|<span data-ttu-id="c1022-362">Заголовок</span><span class="sxs-lookup"><span data-stu-id="c1022-362">Title</span></span>|<span data-ttu-id="c1022-363">Определение</span><span class="sxs-lookup"><span data-stu-id="c1022-363">Definition</span></span>|
|-----------|----------------|
|[<span data-ttu-id="c1022-364">Standard Numeric Format Strings</span><span class="sxs-lookup"><span data-stu-id="c1022-364">Standard Numeric Format Strings</span></span>](../../../docs/standard/base-types/standard-numeric-format-strings.md)|<span data-ttu-id="c1022-365">Описание строк стандартного формата, позволяющих создавать общеупотребимые строковые представления числовых значений.</span><span class="sxs-lookup"><span data-stu-id="c1022-365">Describes standard format strings that create commonly used string representations of numeric values.</span></span>|
|[<span data-ttu-id="c1022-366">Custom Numeric Format Strings</span><span class="sxs-lookup"><span data-stu-id="c1022-366">Custom Numeric Format Strings</span></span>](../../../docs/standard/base-types/custom-numeric-format-strings.md)|<span data-ttu-id="c1022-367">Описание строк настраиваемого формата, позволяющих создавать прикладные строковые представления числовых значений.</span><span class="sxs-lookup"><span data-stu-id="c1022-367">Describes custom format strings that create application-specific formats for numeric values.</span></span>|
|[<span data-ttu-id="c1022-368">Строки стандартных форматов даты и времени</span><span class="sxs-lookup"><span data-stu-id="c1022-368">Standard Date and Time Format Strings</span></span>](../../../docs/standard/base-types/standard-date-and-time-format-strings.md)|<span data-ttu-id="c1022-369">Описание строк стандартного формата, позволяющих создавать общеупотребимые строковые представления значений <xref:System.DateTime> .</span><span class="sxs-lookup"><span data-stu-id="c1022-369">Describes standard format strings that create commonly used string representations of <xref:System.DateTime> values.</span></span>|
|[<span data-ttu-id="c1022-370">Строки настраиваемых форматов даты и времени</span><span class="sxs-lookup"><span data-stu-id="c1022-370">Custom Date and Time Format Strings</span></span>](../../../docs/standard/base-types/custom-date-and-time-format-strings.md)|<span data-ttu-id="c1022-371">Описание строк настраиваемого формата, позволяющих создавать прикладные строковые представления значений <xref:System.DateTime> .</span><span class="sxs-lookup"><span data-stu-id="c1022-371">Describes custom format strings that create application-specific formats for <xref:System.DateTime> values.</span></span>|
|[<span data-ttu-id="c1022-372">Строки стандартного формата TimeSpan</span><span class="sxs-lookup"><span data-stu-id="c1022-372">Standard TimeSpan Format Strings</span></span>](../../../docs/standard/base-types/standard-timespan-format-strings.md)|<span data-ttu-id="c1022-373">Описание строк стандартного формата, позволяющих создавать общеупотребимые строковые представления интервалов времени.</span><span class="sxs-lookup"><span data-stu-id="c1022-373">Describes standard format strings that create commonly used string representations of time intervals.</span></span>|
|[<span data-ttu-id="c1022-374">Строки настраиваемого формата TimeSpan</span><span class="sxs-lookup"><span data-stu-id="c1022-374">Custom TimeSpan Format Strings</span></span>](../../../docs/standard/base-types/custom-timespan-format-strings.md)|<span data-ttu-id="c1022-375">Описание строк настраиваемого формата, позволяющих создавать прикладные строковые представления интервалов времени.</span><span class="sxs-lookup"><span data-stu-id="c1022-375">Describes custom format strings that create application-specific formats for time intervals.</span></span>|
|[<span data-ttu-id="c1022-376">Enumeration Format Strings</span><span class="sxs-lookup"><span data-stu-id="c1022-376">Enumeration Format Strings</span></span>](../../../docs/standard/base-types/enumeration-format-strings.md)|<span data-ttu-id="c1022-377">Описание строк стандартного формата, используемых для создания строковых представлений значений перечислений.</span><span class="sxs-lookup"><span data-stu-id="c1022-377">Describes standard format strings that are used to create string representations of enumeration values.</span></span>|
|[<span data-ttu-id="c1022-378">Составное форматирование</span><span class="sxs-lookup"><span data-stu-id="c1022-378">Composite Formatting</span></span>](../../../docs/standard/base-types/composite-formatting.md)|<span data-ttu-id="c1022-379">Описание способа совмещения нескольких форматируемых значений в строке.</span><span class="sxs-lookup"><span data-stu-id="c1022-379">Describes how to embed one or more formatted values in a string.</span></span> <span data-ttu-id="c1022-380">Строка может быть последовательно отображена в консоли или выведена в поток.</span><span class="sxs-lookup"><span data-stu-id="c1022-380">The string can subsequently be displayed on the console or written to a stream.</span></span>|
|[<span data-ttu-id="c1022-381">Выполнение операций форматирования</span><span class="sxs-lookup"><span data-stu-id="c1022-381">Performing Formatting Operations</span></span>](../../../docs/standard/base-types/performing-formatting-operations.md)|<span data-ttu-id="c1022-382">Перечень разделов, содержащих пошаговые инструкции для выполнения конкретных операций форматирования.</span><span class="sxs-lookup"><span data-stu-id="c1022-382">Lists topics that provide step-by-step instructions for performing specific formatting operations.</span></span>|
|[<span data-ttu-id="c1022-383">Анализ строк в .NET</span><span class="sxs-lookup"><span data-stu-id="c1022-383">Parsing Strings</span></span>](../../../docs/standard/base-types/parsing-strings.md)|<span data-ttu-id="c1022-384">Описание способов инициализации объектов со значениями, описанными строковыми представлениями этих объектов.</span><span class="sxs-lookup"><span data-stu-id="c1022-384">Describes how to initialize objects to the values described by string representations of those objects.</span></span> <span data-ttu-id="c1022-385">Разбор является операцией, обратной форматированию.</span><span class="sxs-lookup"><span data-stu-id="c1022-385">Parsing is the inverse operation of formatting.</span></span>|

## <a name="reference"></a><span data-ttu-id="c1022-386">Справочник</span><span class="sxs-lookup"><span data-stu-id="c1022-386">Reference</span></span>

- <xref:System.IFormattable?displayProperty=nameWithType>
- <xref:System.IFormatProvider?displayProperty=nameWithType>
- <xref:System.ICustomFormatter?displayProperty=nameWithType>
