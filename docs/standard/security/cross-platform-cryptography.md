---
title: Кросс-платформенная криптография в .NET Core и .NET 5
description: Сведения о криптографических возможностях на платформах, поддерживаемых .NET.
ms.date: 06/19/2020
ms.technology: dotnet-standard
helpviewer_keywords:
- cryptography, cross-platform
- encryption, cross-platform
ms.openlocfilehash: 61fd49e53761deac278b770003eb97241b6c2be9
ms.sourcegitcommit: b7a8b09828bab4e90f66af8d495ecd7024c45042
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87557155"
---
# <a name="cross-platform-cryptography-in-net-core-and-net-5"></a><span data-ttu-id="f4293-103">Кросс-платформенная криптография в .NET Core и .NET 5</span><span class="sxs-lookup"><span data-stu-id="f4293-103">Cross-Platform Cryptography in .NET Core and .NET 5</span></span>

<span data-ttu-id="f4293-104">Криптографические операции в .NET Core и .NET 5 выполняются с помощью библиотек операционной системы (ОС).</span><span class="sxs-lookup"><span data-stu-id="f4293-104">Cryptographic operations in .NET Core and .NET 5 are done by operating system (OS) libraries.</span></span> <span data-ttu-id="f4293-105">Эта зависимость имеет преимущества:</span><span class="sxs-lookup"><span data-stu-id="f4293-105">This dependency has advantages:</span></span>

* <span data-ttu-id="f4293-106">Приложения .NET получают преимущество от надежности ОС.</span><span class="sxs-lookup"><span data-stu-id="f4293-106">.NET apps benefit from OS reliability.</span></span> <span data-ttu-id="f4293-107">Хранение библиотек шифрования, защищенных от уязвимостей, имеет высокий приоритет для поставщиков ОС.</span><span class="sxs-lookup"><span data-stu-id="f4293-107">Keeping cryptography libraries safe from vulnerabilities is a high priority for OS vendors.</span></span> <span data-ttu-id="f4293-108">Для этого они предоставляют обновления, которые должны быть применены системными администраторами.</span><span class="sxs-lookup"><span data-stu-id="f4293-108">To do that, they provide updates that system administrators should be applying.</span></span>
* <span data-ttu-id="f4293-109">Приложения .NET имеют доступ к алгоритмам, проверенным FIPS, если библиотеки ОС проверены с помощью FIPS.</span><span class="sxs-lookup"><span data-stu-id="f4293-109">.NET apps have access to FIPS-validated algorithms if the OS libraries are FIPS-validated.</span></span>

<span data-ttu-id="f4293-110">Зависимость от библиотек ОС также означает, что приложения .NET могут использовать только криптографические функции, поддерживаемые операционной системой.</span><span class="sxs-lookup"><span data-stu-id="f4293-110">The dependency on OS libraries also means that .NET apps can only use cryptographic features that the OS supports.</span></span> <span data-ttu-id="f4293-111">Хотя все платформы поддерживают определенные основные функции, некоторые функции, которые поддерживает .NET, нельзя использовать на некоторых платформах.</span><span class="sxs-lookup"><span data-stu-id="f4293-111">While all platforms support certain core features, some features that .NET supports can't be used on some platforms.</span></span> <span data-ttu-id="f4293-112">В этой статье определяются функции, поддерживаемые на каждой платформе.</span><span class="sxs-lookup"><span data-stu-id="f4293-112">This article identifies the features that are supported on each platform.</span></span>

<span data-ttu-id="f4293-113">В этой статье предполагается, что у вас есть опыт работы с криптографией в .NET.</span><span class="sxs-lookup"><span data-stu-id="f4293-113">This article assumes you have a working familiarity with cryptography in .NET.</span></span> <span data-ttu-id="f4293-114">Дополнительные сведения см. в разделе [модель шифрования .NET](cryptography-model.md) и [службы шифрования .NET](cryptographic-services.md).</span><span class="sxs-lookup"><span data-stu-id="f4293-114">For more information, see [.NET Cryptography Model](cryptography-model.md) and [.NET Cryptographic Services](cryptographic-services.md).</span></span>

## <a name="hash-algorithms"></a><span data-ttu-id="f4293-115">Алгоритмы хэширования</span><span class="sxs-lookup"><span data-stu-id="f4293-115">Hash algorithms</span></span>

<span data-ttu-id="f4293-116">Все классы хэш-алгоритма и проверки подлинности сообщений на основе хэша, включая `*Managed` классы, откладываются на библиотеки ОС.</span><span class="sxs-lookup"><span data-stu-id="f4293-116">All hash algorithm and hash-based message authentication (HMAC) classes, including the `*Managed` classes, defer to the OS libraries.</span></span> <span data-ttu-id="f4293-117">Хотя различные библиотеки ОС отличаются производительностью, они должны быть совместимыми.</span><span class="sxs-lookup"><span data-stu-id="f4293-117">While the various OS libraries differ in performance, they should be compatible.</span></span>

## <a name="symmetric-encryption"></a><span data-ttu-id="f4293-118">Симметричное шифрование</span><span class="sxs-lookup"><span data-stu-id="f4293-118">Symmetric encryption</span></span>

<span data-ttu-id="f4293-119">Базовые шифры и цепочки выполняются системными библиотеками, и все они поддерживаются всеми платформами.</span><span class="sxs-lookup"><span data-stu-id="f4293-119">The underlying ciphers and chaining are done by the system libraries, and all are supported by all platforms.</span></span>

| <span data-ttu-id="f4293-120">Шифрование и режим</span><span class="sxs-lookup"><span data-stu-id="f4293-120">Cipher + Mode</span></span> | <span data-ttu-id="f4293-121">Windows</span><span class="sxs-lookup"><span data-stu-id="f4293-121">Windows</span></span> | <span data-ttu-id="f4293-122">Linux</span><span class="sxs-lookup"><span data-stu-id="f4293-122">Linux</span></span> | <span data-ttu-id="f4293-123">macOS</span><span class="sxs-lookup"><span data-stu-id="f4293-123">macOS</span></span> |
|---------------|---------|-------|-------|
| <span data-ttu-id="f4293-124">AES-CBC</span><span class="sxs-lookup"><span data-stu-id="f4293-124">AES-CBC</span></span>       | <span data-ttu-id="f4293-125">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-125">✔️</span></span>     | <span data-ttu-id="f4293-126">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-126">✔️</span></span>    | <span data-ttu-id="f4293-127">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-127">✔️</span></span>   |
| <span data-ttu-id="f4293-128">AES-ECB</span><span class="sxs-lookup"><span data-stu-id="f4293-128">AES-ECB</span></span>       | <span data-ttu-id="f4293-129">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-129">✔️</span></span>     | <span data-ttu-id="f4293-130">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-130">✔️</span></span>    | <span data-ttu-id="f4293-131">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-131">✔️</span></span>   |
| <span data-ttu-id="f4293-132">3DES-CBC</span><span class="sxs-lookup"><span data-stu-id="f4293-132">3DES-CBC</span></span>      | <span data-ttu-id="f4293-133">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-133">✔️</span></span>     | <span data-ttu-id="f4293-134">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-134">✔️</span></span>    | <span data-ttu-id="f4293-135">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-135">✔️</span></span>   |
| <span data-ttu-id="f4293-136">3DES-ECB</span><span class="sxs-lookup"><span data-stu-id="f4293-136">3DES-ECB</span></span>      | <span data-ttu-id="f4293-137">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-137">✔️</span></span>     | <span data-ttu-id="f4293-138">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-138">✔️</span></span>    | <span data-ttu-id="f4293-139">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-139">✔️</span></span>   |
| <span data-ttu-id="f4293-140">DES-CBC</span><span class="sxs-lookup"><span data-stu-id="f4293-140">DES-CBC</span></span>       | <span data-ttu-id="f4293-141">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-141">✔️</span></span>     | <span data-ttu-id="f4293-142">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-142">✔️</span></span>    | <span data-ttu-id="f4293-143">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-143">✔️</span></span>   |
| <span data-ttu-id="f4293-144">DES-ECB</span><span class="sxs-lookup"><span data-stu-id="f4293-144">DES-ECB</span></span>       | <span data-ttu-id="f4293-145">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-145">✔️</span></span>     | <span data-ttu-id="f4293-146">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-146">✔️</span></span>    | <span data-ttu-id="f4293-147">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-147">✔️</span></span>   |

## <a name="authenticated-encryption"></a><span data-ttu-id="f4293-148">Шифрование с проверкой подлинности</span><span class="sxs-lookup"><span data-stu-id="f4293-148">Authenticated encryption</span></span>

<span data-ttu-id="f4293-149">Поддержка шифрования с проверкой подлинности (AE) предоставляется для AES-CCM и AES-GCM через <xref:System.Security.Cryptography.AesCcm?displayProperty=fullName> <xref:System.Security.Cryptography.AesGcm?displayProperty=fullName> классы и.</span><span class="sxs-lookup"><span data-stu-id="f4293-149">Authenticated encryption (AE) support is provided for AES-CCM and AES-GCM via the <xref:System.Security.Cryptography.AesCcm?displayProperty=fullName> and <xref:System.Security.Cryptography.AesGcm?displayProperty=fullName> classes.</span></span>

<span data-ttu-id="f4293-150">В Windows и Linux реализации AES-CCM и AES-GCM предоставляются библиотеками ОС.</span><span class="sxs-lookup"><span data-stu-id="f4293-150">On Windows and Linux, the implementations of AES-CCM and AES-GCM are provided by the OS libraries.</span></span>

### <a name="aes-ccm-and-aes-gcm-on-macos"></a><span data-ttu-id="f4293-151">AES-CCM и AES-GCM на macOS</span><span class="sxs-lookup"><span data-stu-id="f4293-151">AES-CCM and AES-GCM on macOS</span></span>

<span data-ttu-id="f4293-152">В macOS системные библиотеки не поддерживают AES-CCM или AES-GCM для кода стороннего производителя, поэтому <xref:System.Security.Cryptography.AesCcm> <xref:System.Security.Cryptography.AesGcm> классы и используют OpenSSL для поддержки.</span><span class="sxs-lookup"><span data-stu-id="f4293-152">On macOS, the system libraries don't support AES-CCM or AES-GCM for third-party code, so the <xref:System.Security.Cryptography.AesCcm> and <xref:System.Security.Cryptography.AesGcm> classes use OpenSSL for support.</span></span> <span data-ttu-id="f4293-153">Пользователям в macOS необходимо получить соответствующую копию OpenSSL (либкрипто) для работы этих типов, и она должна находиться в пути, по умолчанию по которому система загрузит библиотеку.</span><span class="sxs-lookup"><span data-stu-id="f4293-153">Users on macOS need to obtain an appropriate copy of OpenSSL (libcrypto) for these types to function, and it must be in a path that the system would load a library from by default.</span></span> <span data-ttu-id="f4293-154">Рекомендуется установить OpenSSL из диспетчера пакетов, например Homebrew.</span><span class="sxs-lookup"><span data-stu-id="f4293-154">We recommend that you install OpenSSL from a package manager such as Homebrew.</span></span>

<span data-ttu-id="f4293-155">`libcrypto.0.9.7.dylib`Библиотеки и, `libcrypto.0.9.8.dylib` Входящие в macOS, относятся к более ранним версиям OpenSSL и не будут использоваться.</span><span class="sxs-lookup"><span data-stu-id="f4293-155">The `libcrypto.0.9.7.dylib` and `libcrypto.0.9.8.dylib` libraries included in macOS are from earlier versions of OpenSSL and will not be used.</span></span> <span data-ttu-id="f4293-156">`libcrypto.35.dylib`Библиотеки, `libcrypto.41.dylib` и `libcrypto.42.dylib` находятся в либрессл и не будут использоваться.</span><span class="sxs-lookup"><span data-stu-id="f4293-156">The `libcrypto.35.dylib`, `libcrypto.41.dylib`, and `libcrypto.42.dylib` libraries are from LibreSSL and will not be used.</span></span>

### <a name="aes-ccm-keys-nonces-and-tags"></a><span data-ttu-id="f4293-157">AES — ключи CCM, временные и Теги</span><span class="sxs-lookup"><span data-stu-id="f4293-157">AES-CCM keys, nonces, and tags</span></span>

* <span data-ttu-id="f4293-158">Размеры ключей</span><span class="sxs-lookup"><span data-stu-id="f4293-158">Key Sizes</span></span>

  <span data-ttu-id="f4293-159">Технология AES-CCM работает с ключами 128, 192 и 256-bit.</span><span class="sxs-lookup"><span data-stu-id="f4293-159">AES-CCM works with 128, 192, and 256-bit keys.</span></span>

* <span data-ttu-id="f4293-160">Размеры nonce</span><span class="sxs-lookup"><span data-stu-id="f4293-160">Nonce Sizes</span></span>

  <span data-ttu-id="f4293-161"><xref:System.Security.Cryptography.AesCcm>Класс поддерживает 56, 64, 72, 80, 88, 96 и 104-bit (7, 8, 9, 10, 11, 12 и 13 байт) временные.</span><span class="sxs-lookup"><span data-stu-id="f4293-161">The <xref:System.Security.Cryptography.AesCcm> class supports 56, 64, 72, 80, 88, 96, and 104-bit (7, 8, 9, 10, 11, 12, and 13-byte) nonces.</span></span>

* <span data-ttu-id="f4293-162">Размеры тегов</span><span class="sxs-lookup"><span data-stu-id="f4293-162">Tag Sizes</span></span>

  <span data-ttu-id="f4293-163"><xref:System.Security.Cryptography.AesCcm>Класс поддерживает создание или обработку 32, 48, 64, 80, 96, 112 и 128-bit (4, 8, 10, 12, 14 и 16-байтовых) тегов.</span><span class="sxs-lookup"><span data-stu-id="f4293-163">The <xref:System.Security.Cryptography.AesCcm> class supports creating or processing 32, 48, 64, 80, 96, 112, and 128-bit (4, 8, 10, 12, 14, and 16-byte) tags.</span></span>

### <a name="aes-gcm-keys-nonces-and-tags"></a><span data-ttu-id="f4293-164">Ключи AES-GCM, временные и Теги</span><span class="sxs-lookup"><span data-stu-id="f4293-164">AES-GCM keys, nonces, and tags</span></span>

* <span data-ttu-id="f4293-165">Размеры ключей</span><span class="sxs-lookup"><span data-stu-id="f4293-165">Key Sizes</span></span>

  <span data-ttu-id="f4293-166">AES-GCM работает с ключами 128, 192 и 256-bit.</span><span class="sxs-lookup"><span data-stu-id="f4293-166">AES-GCM works with 128, 192, and 256-bit keys.</span></span>

* <span data-ttu-id="f4293-167">Размеры nonce</span><span class="sxs-lookup"><span data-stu-id="f4293-167">Nonce Sizes</span></span>

  <span data-ttu-id="f4293-168"><xref:System.Security.Cryptography.AesGcm>Класс поддерживает только 96-разрядный (12-байтный) временные.</span><span class="sxs-lookup"><span data-stu-id="f4293-168">The <xref:System.Security.Cryptography.AesGcm> class supports only 96-bit (12-byte) nonces.</span></span>

* <span data-ttu-id="f4293-169">Размеры тегов</span><span class="sxs-lookup"><span data-stu-id="f4293-169">Tag Sizes</span></span>

  <span data-ttu-id="f4293-170"><xref:System.Security.Cryptography.AesGcm>Класс поддерживает создание или обработку 96, 104, 112, 120 и 128-bit (12, 13, 14, 15 и 16-байтовых) тегов.</span><span class="sxs-lookup"><span data-stu-id="f4293-170">The <xref:System.Security.Cryptography.AesGcm> class supports creating or processing 96, 104, 112, 120, and 128-bit (12, 13, 14, 15, and 16-byte) tags.</span></span>

## <a name="asymmetric-cryptography"></a><span data-ttu-id="f4293-171">Асимметричное шифрование</span><span class="sxs-lookup"><span data-stu-id="f4293-171">Asymmetric cryptography</span></span>

<span data-ttu-id="f4293-172">Этот раздел содержит следующие подразделы:</span><span class="sxs-lookup"><span data-stu-id="f4293-172">This section includes the following subsections:</span></span>

* [<span data-ttu-id="f4293-173">RSA</span><span class="sxs-lookup"><span data-stu-id="f4293-173">RSA</span></span>](#rsa)
* [<span data-ttu-id="f4293-174">ECDSA</span><span class="sxs-lookup"><span data-stu-id="f4293-174">ECDSA</span></span>](#ecdsa)
* [<span data-ttu-id="f4293-175">ECDH</span><span class="sxs-lookup"><span data-stu-id="f4293-175">ECDH</span></span>](#ecdh)
* [<span data-ttu-id="f4293-176">DSA</span><span class="sxs-lookup"><span data-stu-id="f4293-176">DSA</span></span>](#dsa)

### <a name="rsa"></a><span data-ttu-id="f4293-177">RSA</span><span class="sxs-lookup"><span data-stu-id="f4293-177">RSA</span></span>

<span data-ttu-id="f4293-178">Создание ключей RSA (Ривест – Шамир – Адельман) выполняется библиотеками ОС и зависит от ограничений размера и характеристик производительности.</span><span class="sxs-lookup"><span data-stu-id="f4293-178">RSA (Rivest–Shamir–Adleman) key generation is performed by the OS libraries and is subject to their size limitations and performance characteristics.</span></span>

<span data-ttu-id="f4293-179">Операции с ключами RSA выполняются библиотеками ОС, а типы загружаемых ключей подчиняются требованиям операционной системы.</span><span class="sxs-lookup"><span data-stu-id="f4293-179">RSA key operations are performed by the OS libraries, and the types of key that can be loaded are subject to OS requirements.</span></span>

<span data-ttu-id="f4293-180">.NET не предоставляет необработанные операции RSA (без дополнения).</span><span class="sxs-lookup"><span data-stu-id="f4293-180">.NET does not expose "raw" (unpadded) RSA operations.</span></span>

<span data-ttu-id="f4293-181">Библиотеки ОС используются для заполнения и расшифровки.</span><span class="sxs-lookup"><span data-stu-id="f4293-181">The OS libraries are used for encryption and decryption padding.</span></span> <span data-ttu-id="f4293-182">Не все платформы поддерживают одни и те же параметры заполнения:</span><span class="sxs-lookup"><span data-stu-id="f4293-182">Not all platforms support the same padding options:</span></span>

| <span data-ttu-id="f4293-183">Режим заполнения</span><span class="sxs-lookup"><span data-stu-id="f4293-183">Padding Mode</span></span>                          | <span data-ttu-id="f4293-184">Windows (CNG)</span><span class="sxs-lookup"><span data-stu-id="f4293-184">Windows (CNG)</span></span> | <span data-ttu-id="f4293-185">Linux (OpenSSL)</span><span class="sxs-lookup"><span data-stu-id="f4293-185">Linux (OpenSSL)</span></span> | <span data-ttu-id="f4293-186">macOS</span><span class="sxs-lookup"><span data-stu-id="f4293-186">macOS</span></span> | <span data-ttu-id="f4293-187">Windows (CAPI)</span><span class="sxs-lookup"><span data-stu-id="f4293-187">Windows (CAPI)</span></span> |
|---------------------------------------|---------------|-----------------|-------|----------------|
| <span data-ttu-id="f4293-188">Шифрование PKCS1</span><span class="sxs-lookup"><span data-stu-id="f4293-188">PKCS1 Encryption</span></span>                      | <span data-ttu-id="f4293-189">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-189">✔️</span></span>           | <span data-ttu-id="f4293-190">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-190">✔️</span></span>              | <span data-ttu-id="f4293-191">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-191">✔️</span></span>   | <span data-ttu-id="f4293-192">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-192">✔️</span></span>             |
| <span data-ttu-id="f4293-193">OAEP-SHA-1</span><span class="sxs-lookup"><span data-stu-id="f4293-193">OAEP - SHA-1</span></span>                          | <span data-ttu-id="f4293-194">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-194">✔️</span></span>           | <span data-ttu-id="f4293-195">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-195">✔️</span></span>              | <span data-ttu-id="f4293-196">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-196">✔️</span></span>   | <span data-ttu-id="f4293-197">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-197">✔️</span></span>             |
| <span data-ttu-id="f4293-198">OAEP-SHA-2 (SHA256, SHA384, SHA512)</span><span class="sxs-lookup"><span data-stu-id="f4293-198">OAEP - SHA-2 (SHA256, SHA384, SHA512)</span></span> | <span data-ttu-id="f4293-199">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-199">✔️</span></span>           | <span data-ttu-id="f4293-200">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-200">✔️</span></span>              | <span data-ttu-id="f4293-201">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-201">✔️</span></span>   | ❌             |
| <span data-ttu-id="f4293-202">Подпись PKCS1 (MD5, SHA-1)</span><span class="sxs-lookup"><span data-stu-id="f4293-202">PKCS1 Signature (MD5, SHA-1)</span></span>          | <span data-ttu-id="f4293-203">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-203">✔️</span></span>           | <span data-ttu-id="f4293-204">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-204">✔️</span></span>              | <span data-ttu-id="f4293-205">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-205">✔️</span></span>   | <span data-ttu-id="f4293-206">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-206">✔️</span></span>             |
| <span data-ttu-id="f4293-207">Подпись PKCS1 (SHA-2)</span><span class="sxs-lookup"><span data-stu-id="f4293-207">PKCS1 Signature (SHA-2)</span></span>               | <span data-ttu-id="f4293-208">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-208">✔️</span></span>           | <span data-ttu-id="f4293-209">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-209">✔️</span></span>              | <span data-ttu-id="f4293-210">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-210">✔️</span></span>   | ⚠️\*           |
| <span data-ttu-id="f4293-211">PSS</span><span class="sxs-lookup"><span data-stu-id="f4293-211">PSS</span></span>                                   | <span data-ttu-id="f4293-212">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-212">✔️</span></span>           | <span data-ttu-id="f4293-213">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-213">✔️</span></span>              | <span data-ttu-id="f4293-214">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-214">✔️</span></span>   | ❌             |

<span data-ttu-id="f4293-215">\*Windows CryptoAPI (CAPI) поддерживает PKCS1 сигнатуру с помощью алгоритма SHA-2.</span><span class="sxs-lookup"><span data-stu-id="f4293-215">\* Windows CryptoAPI (CAPI) is capable of PKCS1 signature with a SHA-2 algorithm.</span></span> <span data-ttu-id="f4293-216">Но отдельный объект RSA может быть загружен в поставщик служб шифрования (CSP), который не поддерживает его.</span><span class="sxs-lookup"><span data-stu-id="f4293-216">But the individual RSA object may be loaded in a cryptographic service provider (CSP) that doesn't support it.</span></span>

#### <a name="rsa-on-windows"></a><span data-ttu-id="f4293-217">RSA в Windows</span><span class="sxs-lookup"><span data-stu-id="f4293-217">RSA on Windows</span></span>

* <span data-ttu-id="f4293-218">Windows CryptoAPI (CAPI) используется всякий раз, когда [`new RSACryptoServiceProvider()`](xref:System.Security.Cryptography.RSACryptoServiceProvider) используется.</span><span class="sxs-lookup"><span data-stu-id="f4293-218">Windows CryptoAPI (CAPI) is used whenever [`new RSACryptoServiceProvider()`](xref:System.Security.Cryptography.RSACryptoServiceProvider) is used.</span></span>
* <span data-ttu-id="f4293-219">Функция следующего поколения для шифрования Windows (CNG) используется всякий раз, когда [`new RSACng()`](xref:System.Security.Cryptography.RSACng) используется.</span><span class="sxs-lookup"><span data-stu-id="f4293-219">Windows Cryptography API Next Generation (CNG) is used whenever [`new RSACng()`](xref:System.Security.Cryptography.RSACng) is used.</span></span>
* <span data-ttu-id="f4293-220">Объект, возвращаемый функцией, <xref:System.Security.Cryptography.RSA.Create%2A?displayProperty=nameWithType> внутренне работает под управлением CNG Windows.</span><span class="sxs-lookup"><span data-stu-id="f4293-220">The object returned by <xref:System.Security.Cryptography.RSA.Create%2A?displayProperty=nameWithType> is internally powered by Windows CNG.</span></span> <span data-ttu-id="f4293-221">Использование Windows CNG является подробным описанием реализации и может быть изменено.</span><span class="sxs-lookup"><span data-stu-id="f4293-221">This use of Windows CNG is an implementation detail and is subject to change.</span></span>
* <span data-ttu-id="f4293-222"><xref:System.Security.Cryptography.X509Certificates.RSACertificateExtensions.GetRSAPublicKey%2A>Метод расширения для <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> возвращает <xref:System.Security.Cryptography.RSACng> экземпляр.</span><span class="sxs-lookup"><span data-stu-id="f4293-222">The <xref:System.Security.Cryptography.X509Certificates.RSACertificateExtensions.GetRSAPublicKey%2A> extension method for <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> returns an <xref:System.Security.Cryptography.RSACng> instance.</span></span> <span data-ttu-id="f4293-223">Это использование <xref:System.Security.Cryptography.RSACng> является подробным описанием реализации и может быть изменено.</span><span class="sxs-lookup"><span data-stu-id="f4293-223">This use of <xref:System.Security.Cryptography.RSACng> is an implementation detail and is subject to change.</span></span>
* <span data-ttu-id="f4293-224"><xref:System.Security.Cryptography.X509Certificates.RSACertificateExtensions.GetRSAPrivateKey%2A>Метод расширения <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> в настоящее время предпочитает <xref:System.Security.Cryptography.RSACng> экземпляр, но если <xref:System.Security.Cryptography.RSACng> не может открыть ключ, <xref:System.Security.Cryptography.RSACryptoServiceProvider> будет предпринята попыток.</span><span class="sxs-lookup"><span data-stu-id="f4293-224">The <xref:System.Security.Cryptography.X509Certificates.RSACertificateExtensions.GetRSAPrivateKey%2A> extension method for <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> currently prefers an <xref:System.Security.Cryptography.RSACng> instance, but if <xref:System.Security.Cryptography.RSACng> can't open the key, <xref:System.Security.Cryptography.RSACryptoServiceProvider> will be attempted.</span></span> <span data-ttu-id="f4293-225">Предпочтительный поставщик — это сведения о реализации, которые могут быть изменены.</span><span class="sxs-lookup"><span data-stu-id="f4293-225">The preferred provider is an implementation detail and is subject to change.</span></span>

#### <a name="rsa-native-interop"></a><span data-ttu-id="f4293-226">Встроенное взаимодействие RSA</span><span class="sxs-lookup"><span data-stu-id="f4293-226">RSA native interop</span></span>

<span data-ttu-id="f4293-227">.NET предоставляет типы, позволяющие программам взаимодействовать с библиотеками ОС, используемыми кодом шифрования .NET.</span><span class="sxs-lookup"><span data-stu-id="f4293-227">.NET exposes types to allow programs to interoperate with the OS libraries that the .NET cryptography code uses.</span></span> <span data-ttu-id="f4293-228">Применяемые типы не выполняют преобразование между платформами и должны использоваться только при необходимости.</span><span class="sxs-lookup"><span data-stu-id="f4293-228">The types involved do not translate between platforms, and should only be directly used when necessary.</span></span>

| <span data-ttu-id="f4293-229">Тип</span><span class="sxs-lookup"><span data-stu-id="f4293-229">Type</span></span>                                                         | <span data-ttu-id="f4293-230">Windows</span><span class="sxs-lookup"><span data-stu-id="f4293-230">Windows</span></span> | <span data-ttu-id="f4293-231">Linux</span><span class="sxs-lookup"><span data-stu-id="f4293-231">Linux</span></span>         | <span data-ttu-id="f4293-232">macOS</span><span class="sxs-lookup"><span data-stu-id="f4293-232">macOS</span></span>         |
|--------------------------------------------------------------|---------|---------------|---------------|
| <xref:System.Security.Cryptography.RSACryptoServiceProvider> | <span data-ttu-id="f4293-233">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-233">✔️</span></span>     | <span data-ttu-id="f4293-234">⚠️<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="f4293-234">⚠️<sup>1</sup></span></span>| <span data-ttu-id="f4293-235">⚠️<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="f4293-235">⚠️<sup>1</sup></span></span> |
| <xref:System.Security.Cryptography.RSACng>                   | <span data-ttu-id="f4293-236">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-236">✔️</span></span>     | ❌            | ❌            |
| <xref:System.Security.Cryptography.RSAOpenSsl>               | ❌     | <span data-ttu-id="f4293-237">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-237">✔️</span></span>            | <span data-ttu-id="f4293-238">⚠️<sup>открыт</sup></span><span class="sxs-lookup"><span data-stu-id="f4293-238">⚠️<sup>2</sup></span></span> |

<span data-ttu-id="f4293-239"><sup>1</sup> в MacOS и Linux <xref:System.Security.Cryptography.RSACryptoServiceProvider> можно использовать для совместимости с существующими программами.</span><span class="sxs-lookup"><span data-stu-id="f4293-239"><sup>1</sup> On macOS and Linux, <xref:System.Security.Cryptography.RSACryptoServiceProvider> can be used for compatibility with existing programs.</span></span> <span data-ttu-id="f4293-240">В этом случае любой метод, требующий взаимодействия ОС, например открытие именованного ключа, создает исключение <xref:System.PlatformNotSupportedException> .</span><span class="sxs-lookup"><span data-stu-id="f4293-240">In that case, any method that requires OS interop, such as opening a named key, throws a <xref:System.PlatformNotSupportedException>.</span></span>

<span data-ttu-id="f4293-241"><sup>2</sup> в macOS <xref:System.Security.Cryptography.RSAOpenSsl> работает, если установлен OpenSSL и соответствующий либкрипто dylib можно найти с помощью динамической загрузки библиотеки.</span><span class="sxs-lookup"><span data-stu-id="f4293-241"><sup>2</sup> On macOS, <xref:System.Security.Cryptography.RSAOpenSsl> works if OpenSSL is installed and an appropriate libcrypto dylib can be found via dynamic library loading.</span></span> <span data-ttu-id="f4293-242">Если не удается найти соответствующую библиотеку, будут созданы исключения.</span><span class="sxs-lookup"><span data-stu-id="f4293-242">If an appropriate library can't be found, exceptions will be thrown.</span></span>

### <a name="ecdsa"></a><span data-ttu-id="f4293-243">ECDSA</span><span class="sxs-lookup"><span data-stu-id="f4293-243">ECDSA</span></span>

<span data-ttu-id="f4293-244">Создание ключа ECDSA (алгоритм цифровой подписи на основе эллиптических кривых) выполняется библиотеками ОС и зависит от ограничений размера и характеристик производительности.</span><span class="sxs-lookup"><span data-stu-id="f4293-244">ECDSA (Elliptic Curve Digital Signature Algorithm) key generation is done by the OS libraries and is subject to their size limitations and performance characteristics.</span></span>

<span data-ttu-id="f4293-245">Кривые ключей ECDSA определяются библиотеками ОС и подвержены их ограничениям.</span><span class="sxs-lookup"><span data-stu-id="f4293-245">ECDSA key curves are defined by the OS libraries and are subject to their limitations.</span></span>

| <span data-ttu-id="f4293-246">эллиптическая кривая;</span><span class="sxs-lookup"><span data-stu-id="f4293-246">Elliptic Curve</span></span>                     | <span data-ttu-id="f4293-247">Windows 10</span><span class="sxs-lookup"><span data-stu-id="f4293-247">Windows 10</span></span>    | <span data-ttu-id="f4293-248">Windows 7 — 8,1</span><span class="sxs-lookup"><span data-stu-id="f4293-248">Windows 7 - 8.1</span></span> | <span data-ttu-id="f4293-249">Linux</span><span class="sxs-lookup"><span data-stu-id="f4293-249">Linux</span></span>         | <span data-ttu-id="f4293-250">macOS</span><span class="sxs-lookup"><span data-stu-id="f4293-250">macOS</span></span>         |
|------------------------------------|---------------|-----------------|---------------|---------------|
| <span data-ttu-id="f4293-251">Директива NIST P-256 (secp256r1)</span><span class="sxs-lookup"><span data-stu-id="f4293-251">NIST P-256 (secp256r1)</span></span>             | <span data-ttu-id="f4293-252">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-252">✔️</span></span>           | <span data-ttu-id="f4293-253">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-253">✔️</span></span>              | <span data-ttu-id="f4293-254">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-254">✔️</span></span>           | <span data-ttu-id="f4293-255">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-255">✔️</span></span>            |
| <span data-ttu-id="f4293-256">Директива NIST P-384 (secp384r1)</span><span class="sxs-lookup"><span data-stu-id="f4293-256">NIST P-384 (secp384r1)</span></span>             | <span data-ttu-id="f4293-257">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-257">✔️</span></span>           | <span data-ttu-id="f4293-258">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-258">✔️</span></span>              | <span data-ttu-id="f4293-259">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-259">✔️</span></span>           | <span data-ttu-id="f4293-260">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-260">✔️</span></span>            |
| <span data-ttu-id="f4293-261">Директива NIST P-521 (secp521r1)</span><span class="sxs-lookup"><span data-stu-id="f4293-261">NIST P-521 (secp521r1)</span></span>             | <span data-ttu-id="f4293-262">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-262">✔️</span></span>           | <span data-ttu-id="f4293-263">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-263">✔️</span></span>              | <span data-ttu-id="f4293-264">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-264">✔️</span></span>           | <span data-ttu-id="f4293-265">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-265">✔️</span></span>            |
| <span data-ttu-id="f4293-266">Кривые Brainpool (как именованные кривые)</span><span class="sxs-lookup"><span data-stu-id="f4293-266">Brainpool curves (as named curves)</span></span> | <span data-ttu-id="f4293-267">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-267">✔️</span></span>           | ❌              | <span data-ttu-id="f4293-268">⚠️<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="f4293-268">⚠️<sup>1</sup></span></span>| ❌           |
| <span data-ttu-id="f4293-269">Другие именованные кривые</span><span class="sxs-lookup"><span data-stu-id="f4293-269">Other named curves</span></span>                 | <span data-ttu-id="f4293-270">⚠️<sup>открыт</sup></span><span class="sxs-lookup"><span data-stu-id="f4293-270">⚠️<sup>2</sup></span></span>| ❌             | <span data-ttu-id="f4293-271">⚠️<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="f4293-271">⚠️<sup>1</sup></span></span>| ❌           |
| <span data-ttu-id="f4293-272">Явные кривые</span><span class="sxs-lookup"><span data-stu-id="f4293-272">Explicit curves</span></span>                    | <span data-ttu-id="f4293-273">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-273">✔️</span></span>           | ❌              | <span data-ttu-id="f4293-274">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-274">✔️</span></span>           | ❌            |
| <span data-ttu-id="f4293-275">Экспортировать или импортировать как явные</span><span class="sxs-lookup"><span data-stu-id="f4293-275">Export or import as explicit</span></span>       | <span data-ttu-id="f4293-276">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-276">✔️</span></span>           | <span data-ttu-id="f4293-277">❌<sup>3-5</sup></span><span class="sxs-lookup"><span data-stu-id="f4293-277">❌<sup>3</sup></span></span>  | <span data-ttu-id="f4293-278">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-278">✔️</span></span>           | <span data-ttu-id="f4293-279">❌<sup>3-5</sup></span><span class="sxs-lookup"><span data-stu-id="f4293-279">❌<sup>3</sup></span></span>|

<span data-ttu-id="f4293-280"><sup>1</sup> дистрибутивы Linux не поддерживают одни и те же именованные кривые.</span><span class="sxs-lookup"><span data-stu-id="f4293-280"><sup>1</sup> Linux distributions don't all have support for the same named curves.</span></span>

<span data-ttu-id="f4293-281"><sup>2</sup> поддержка именованных кривых была добавлена в Windows CNG в Windows 10.</span><span class="sxs-lookup"><span data-stu-id="f4293-281"><sup>2</sup> Support for named curves was added to Windows CNG in Windows 10.</span></span> <span data-ttu-id="f4293-282">Дополнительные сведения см. в разделе [CNG с именем эллиптические кривые](https://msdn.microsoft.com/library/windows/desktop/mt632245(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="f4293-282">For more information, see [CNG Named Elliptic Curves](https://msdn.microsoft.com/library/windows/desktop/mt632245(v=vs.85).aspx).</span></span> <span data-ttu-id="f4293-283">Именованные кривые недоступны в более ранних версиях Windows, за исключением трех кривых в Windows 7.</span><span class="sxs-lookup"><span data-stu-id="f4293-283">Named curves are not available in earlier versions of Windows, except for three curves in Windows 7.</span></span>

<span data-ttu-id="f4293-284"><sup>3</sup> для экспорта с явными параметрами кривой требуется поддержка библиотеки ОС, которая недоступна в macOS или более ранних версиях Windows.</span><span class="sxs-lookup"><span data-stu-id="f4293-284"><sup>3</sup> Exporting with explicit curve parameters requires OS library support, which is not available on macOS or earlier versions of Windows.</span></span>

#### <a name="ecdsa-native-interop"></a><span data-ttu-id="f4293-285">Собственное взаимодействие с ECDSA</span><span class="sxs-lookup"><span data-stu-id="f4293-285">ECDSA Native Interop</span></span>

<span data-ttu-id="f4293-286">.NET предоставляет типы, позволяющие программам взаимодействовать с библиотеками ОС, используемыми кодом шифрования .NET.</span><span class="sxs-lookup"><span data-stu-id="f4293-286">.NET exposes types to allow programs to interoperate with the OS libraries that the .NET cryptography code uses.</span></span> <span data-ttu-id="f4293-287">Участвующие типы не переводятся между платформами и должны использоваться только при необходимости.</span><span class="sxs-lookup"><span data-stu-id="f4293-287">The types involved don't translate between platforms and should only be directly used when necessary.</span></span>

| <span data-ttu-id="f4293-288">Тип</span><span class="sxs-lookup"><span data-stu-id="f4293-288">Type</span></span>                                             | <span data-ttu-id="f4293-289">Windows</span><span class="sxs-lookup"><span data-stu-id="f4293-289">Windows</span></span> | <span data-ttu-id="f4293-290">Linux</span><span class="sxs-lookup"><span data-stu-id="f4293-290">Linux</span></span> | <span data-ttu-id="f4293-291">macOS</span><span class="sxs-lookup"><span data-stu-id="f4293-291">macOS</span></span> |
|--------------------------------------------------|---------|-------|-------|
| <xref:System.Security.Cryptography.ECDsaCng>     | <span data-ttu-id="f4293-292">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-292">✔️</span></span>     | ❌    | ❌    |
| <xref:System.Security.Cryptography.ECDsaOpenSsl> | ❌     | <span data-ttu-id="f4293-293">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-293">✔️</span></span>    | ⚠️\*  |

<span data-ttu-id="f4293-294">\*В macOS <xref:System.Security.Cryptography.ECDsaOpenSsl> работает, если в системе установлен OpenSSL, а соответствующий либкрипто dylib можно найти с помощью динамической загрузки библиотеки.</span><span class="sxs-lookup"><span data-stu-id="f4293-294">\* On macOS, <xref:System.Security.Cryptography.ECDsaOpenSsl> works if OpenSSL is installed in the system and an appropriate libcrypto dylib can be found via dynamic library loading.</span></span> <span data-ttu-id="f4293-295">Если не удается найти соответствующую библиотеку, будут созданы исключения.</span><span class="sxs-lookup"><span data-stu-id="f4293-295">If an appropriate library can't be found, exceptions will be thrown.</span></span>

### <a name="ecdh"></a><span data-ttu-id="f4293-296">ECDH</span><span class="sxs-lookup"><span data-stu-id="f4293-296">ECDH</span></span>

<span data-ttu-id="f4293-297">Создание ключа ECDH (Диффи-Хелмана на эллиптических кривых) выполняется библиотеками ОС и зависит от ограничений размера и характеристик производительности.</span><span class="sxs-lookup"><span data-stu-id="f4293-297">ECDH (Elliptic Curve Diffie-Hellman) key generation is done by the OS libraries and is subject to their size limitations and performance characteristics.</span></span>

<span data-ttu-id="f4293-298"><xref:System.Security.Cryptography.ECDiffieHellman>Класс не возвращает "необработанное" значение вычисления ECDH.</span><span class="sxs-lookup"><span data-stu-id="f4293-298">The <xref:System.Security.Cryptography.ECDiffieHellman> class doesn't return the "raw" value of the ECDH computation.</span></span> <span data-ttu-id="f4293-299">Все возвращаемые данные находятся в терминах функций формирования ключа:</span><span class="sxs-lookup"><span data-stu-id="f4293-299">All returned data is in terms of key derivation functions:</span></span>

* <span data-ttu-id="f4293-300">HASH (Z)</span><span class="sxs-lookup"><span data-stu-id="f4293-300">HASH(Z)</span></span>
* <span data-ttu-id="f4293-301">HASH (в начале | | Z | | Добавление</span><span class="sxs-lookup"><span data-stu-id="f4293-301">HASH(prepend || Z || append)</span></span>
* <span data-ttu-id="f4293-302">HMAC (ключ, Z)</span><span class="sxs-lookup"><span data-stu-id="f4293-302">HMAC(key, Z)</span></span>
* <span data-ttu-id="f4293-303">HMAC (ключ, начало | | Z | | Добавление</span><span class="sxs-lookup"><span data-stu-id="f4293-303">HMAC(key, prepend || Z || append)</span></span>
* <span data-ttu-id="f4293-304">HMAC (Z, Z)</span><span class="sxs-lookup"><span data-stu-id="f4293-304">HMAC(Z, Z)</span></span>
* <span data-ttu-id="f4293-305">HMAC (Z, в начале | | Z | | Добавление</span><span class="sxs-lookup"><span data-stu-id="f4293-305">HMAC(Z, prepend || Z || append)</span></span>
* <span data-ttu-id="f4293-306">Tls11Prf (метка, начальное значение)</span><span class="sxs-lookup"><span data-stu-id="f4293-306">Tls11Prf(label, seed)</span></span>

<span data-ttu-id="f4293-307">Ключевые кривые ECDH определяются библиотеками ОС и подвержены их ограничениям.</span><span class="sxs-lookup"><span data-stu-id="f4293-307">ECDH key curves are defined by the OS libraries and are subject to their limitations.</span></span>

| <span data-ttu-id="f4293-308">эллиптическая кривая;</span><span class="sxs-lookup"><span data-stu-id="f4293-308">Elliptic Curve</span></span>                     | <span data-ttu-id="f4293-309">Windows 10</span><span class="sxs-lookup"><span data-stu-id="f4293-309">Windows 10</span></span>    | <span data-ttu-id="f4293-310">Windows 7 — 8,1</span><span class="sxs-lookup"><span data-stu-id="f4293-310">Windows 7 - 8.1</span></span> | <span data-ttu-id="f4293-311">Linux</span><span class="sxs-lookup"><span data-stu-id="f4293-311">Linux</span></span>         | <span data-ttu-id="f4293-312">macOS</span><span class="sxs-lookup"><span data-stu-id="f4293-312">macOS</span></span>         |
|------------------------------------|---------------|-----------------|---------------|---------------|
| <span data-ttu-id="f4293-313">Директива NIST P-256 (secp256r1)</span><span class="sxs-lookup"><span data-stu-id="f4293-313">NIST P-256 (secp256r1)</span></span>             | <span data-ttu-id="f4293-314">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-314">✔️</span></span>           | <span data-ttu-id="f4293-315">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-315">✔️</span></span>              | <span data-ttu-id="f4293-316">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-316">✔️</span></span>           | <span data-ttu-id="f4293-317">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-317">✔️</span></span>            |
| <span data-ttu-id="f4293-318">Директива NIST P-384 (secp384r1)</span><span class="sxs-lookup"><span data-stu-id="f4293-318">NIST P-384 (secp384r1)</span></span>             | <span data-ttu-id="f4293-319">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-319">✔️</span></span>           | <span data-ttu-id="f4293-320">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-320">✔️</span></span>              | <span data-ttu-id="f4293-321">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-321">✔️</span></span>           | <span data-ttu-id="f4293-322">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-322">✔️</span></span>            |
| <span data-ttu-id="f4293-323">Директива NIST P-521 (secp521r1)</span><span class="sxs-lookup"><span data-stu-id="f4293-323">NIST P-521 (secp521r1)</span></span>             | <span data-ttu-id="f4293-324">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-324">✔️</span></span>           | <span data-ttu-id="f4293-325">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-325">✔️</span></span>              | <span data-ttu-id="f4293-326">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-326">✔️</span></span>           | <span data-ttu-id="f4293-327">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-327">✔️</span></span>            |
| <span data-ttu-id="f4293-328">кривые Brainpool (как именованные кривые)</span><span class="sxs-lookup"><span data-stu-id="f4293-328">brainpool curves (as named curves)</span></span> | <span data-ttu-id="f4293-329">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-329">✔️</span></span>           | ❌              | <span data-ttu-id="f4293-330">⚠️<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="f4293-330">⚠️<sup>1</sup></span></span>| ❌           |
| <span data-ttu-id="f4293-331">другие именованные кривые</span><span class="sxs-lookup"><span data-stu-id="f4293-331">other named curves</span></span>                 | <span data-ttu-id="f4293-332">⚠️<sup>открыт</sup></span><span class="sxs-lookup"><span data-stu-id="f4293-332">⚠️<sup>2</sup></span></span>| ❌             | <span data-ttu-id="f4293-333">⚠️<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="f4293-333">⚠️<sup>1</sup></span></span>| ❌           |
| <span data-ttu-id="f4293-334">явные кривые</span><span class="sxs-lookup"><span data-stu-id="f4293-334">explicit curves</span></span>                    | <span data-ttu-id="f4293-335">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-335">✔️</span></span>           | ❌              | <span data-ttu-id="f4293-336">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-336">✔️</span></span>           | ❌            |
| <span data-ttu-id="f4293-337">Экспортировать или импортировать как явные</span><span class="sxs-lookup"><span data-stu-id="f4293-337">Export or import as explicit</span></span>       | <span data-ttu-id="f4293-338">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-338">✔️</span></span>           | <span data-ttu-id="f4293-339">❌<sup>3-5</sup></span><span class="sxs-lookup"><span data-stu-id="f4293-339">❌<sup>3</sup></span></span>  | <span data-ttu-id="f4293-340">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-340">✔️</span></span>           | <span data-ttu-id="f4293-341">❌<sup>3-5</sup></span><span class="sxs-lookup"><span data-stu-id="f4293-341">❌<sup>3</sup></span></span>|

<span data-ttu-id="f4293-342"><sup>1</sup> дистрибутивы Linux не поддерживают одни и те же именованные кривые.</span><span class="sxs-lookup"><span data-stu-id="f4293-342"><sup>1</sup> Linux distributions don't all have support for the same named curves.</span></span>

<span data-ttu-id="f4293-343"><sup>2</sup> поддержка именованных кривых была добавлена в Windows CNG в Windows 10.</span><span class="sxs-lookup"><span data-stu-id="f4293-343"><sup>2</sup> Support for named curves was added to Windows CNG in Windows 10.</span></span> <span data-ttu-id="f4293-344">Дополнительные сведения см. в разделе [CNG с именем эллиптические кривые](https://msdn.microsoft.com/library/windows/desktop/mt632245(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="f4293-344">For more information, see [CNG Named Elliptic Curves](https://msdn.microsoft.com/library/windows/desktop/mt632245(v=vs.85).aspx).</span></span> <span data-ttu-id="f4293-345">Именованные кривые недоступны в более ранних версиях Windows, за исключением трех кривых в Windows 7.</span><span class="sxs-lookup"><span data-stu-id="f4293-345">Named curves are not available in earlier versions of Windows, except for three curves in Windows 7.</span></span>

<span data-ttu-id="f4293-346"><sup>3</sup> для экспорта с явными параметрами кривой требуется поддержка библиотеки ОС, которая недоступна в macOS или более ранних версиях Windows.</span><span class="sxs-lookup"><span data-stu-id="f4293-346"><sup>3</sup> Exporting with explicit curve parameters requires OS library support, which is not available on macOS or earlier versions of Windows.</span></span>

#### <a name="ecdh-native-interop"></a><span data-ttu-id="f4293-347">Встроенное взаимодействие ECDH</span><span class="sxs-lookup"><span data-stu-id="f4293-347">ECDH native interop</span></span>

<span data-ttu-id="f4293-348">.NET предоставляет типы, позволяющие программам взаимодействовать с библиотеками ОС, используемыми .NET.</span><span class="sxs-lookup"><span data-stu-id="f4293-348">.NET exposes types to allow programs to interoperate with the OS libraries that .NET uses.</span></span> <span data-ttu-id="f4293-349">Участвующие типы не переводятся между платформами и должны использоваться только при необходимости.</span><span class="sxs-lookup"><span data-stu-id="f4293-349">The types involved don't translate between platforms and should only be directly used when necessary.</span></span>

| <span data-ttu-id="f4293-350">Тип</span><span class="sxs-lookup"><span data-stu-id="f4293-350">Type</span></span>                                                       | <span data-ttu-id="f4293-351">Windows</span><span class="sxs-lookup"><span data-stu-id="f4293-351">Windows</span></span> | <span data-ttu-id="f4293-352">Linux</span><span class="sxs-lookup"><span data-stu-id="f4293-352">Linux</span></span> | <span data-ttu-id="f4293-353">macOS</span><span class="sxs-lookup"><span data-stu-id="f4293-353">macOS</span></span> |
|------------------------------------------------------------|---------|-------|-------|
| <xref:System.Security.Cryptography.ECDiffieHellmanCng>     | <span data-ttu-id="f4293-354">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-354">✔️</span></span>     | ❌    | ❌   |
| <xref:System.Security.Cryptography.ECDiffieHellmanOpenSsl> | ❌     | <span data-ttu-id="f4293-355">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-355">✔️</span></span>    | ⚠️\* |

<span data-ttu-id="f4293-356">\*В macOS <xref:System.Security.Cryptography.ECDiffieHellmanOpenSsl> работает, если установлен OpenSSL и соответствующий либкрипто dylib можно найти с помощью динамической загрузки библиотеки.</span><span class="sxs-lookup"><span data-stu-id="f4293-356">\* On macOS, <xref:System.Security.Cryptography.ECDiffieHellmanOpenSsl> works if OpenSSL is installed and an appropriate libcrypto dylib can be found via dynamic library loading.</span></span> <span data-ttu-id="f4293-357">Если не удается найти соответствующую библиотеку, будут созданы исключения.</span><span class="sxs-lookup"><span data-stu-id="f4293-357">If an appropriate library can't be found, exceptions will be thrown.</span></span>

### <a name="dsa"></a><span data-ttu-id="f4293-358">DSA</span><span class="sxs-lookup"><span data-stu-id="f4293-358">DSA</span></span>

<span data-ttu-id="f4293-359">Создание ключей (алгоритм цифровой подписи) осуществляется с помощью системных библиотек и зависит от ограничений размера и характеристик производительности.</span><span class="sxs-lookup"><span data-stu-id="f4293-359">DSA (Digital Signature Algorithm) key generation is performed by the system libraries and is subject to their size limitations and performance characteristics.</span></span>

| <span data-ttu-id="f4293-360">Функция</span><span class="sxs-lookup"><span data-stu-id="f4293-360">Function</span></span>                      | <span data-ttu-id="f4293-361">Windows CNG</span><span class="sxs-lookup"><span data-stu-id="f4293-361">Windows CNG</span></span> | <span data-ttu-id="f4293-362">Linux</span><span class="sxs-lookup"><span data-stu-id="f4293-362">Linux</span></span> | <span data-ttu-id="f4293-363">macOS</span><span class="sxs-lookup"><span data-stu-id="f4293-363">macOS</span></span>         | <span data-ttu-id="f4293-364">Windows CAPI</span><span class="sxs-lookup"><span data-stu-id="f4293-364">Windows CAPI</span></span> |
|-------------------------------|-------------|-------|---------------|--------------|
| <span data-ttu-id="f4293-365">Создание ключа (<= 1024 бит)</span><span class="sxs-lookup"><span data-stu-id="f4293-365">Key creation (<= 1024 bits)</span></span>   | <span data-ttu-id="f4293-366">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-366">✔️</span></span>         | <span data-ttu-id="f4293-367">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-367">✔️</span></span>    | ❌            | <span data-ttu-id="f4293-368">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-368">✔️</span></span>           |
| <span data-ttu-id="f4293-369">Создание ключа (> 1024 бит)</span><span class="sxs-lookup"><span data-stu-id="f4293-369">Key creation (> 1024 bits)</span></span>    | <span data-ttu-id="f4293-370">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-370">✔️</span></span>         | <span data-ttu-id="f4293-371">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-371">✔️</span></span>    | ❌            | ❌            |
| <span data-ttu-id="f4293-372">Загрузка ключей (<= 1024 бит)</span><span class="sxs-lookup"><span data-stu-id="f4293-372">Loading keys (<= 1024 bits)</span></span>   | <span data-ttu-id="f4293-373">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-373">✔️</span></span>         | <span data-ttu-id="f4293-374">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-374">✔️</span></span>    | <span data-ttu-id="f4293-375">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-375">✔️</span></span>            | <span data-ttu-id="f4293-376">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-376">✔️</span></span>           |
| <span data-ttu-id="f4293-377">Загрузка ключей (> 1024 бит)</span><span class="sxs-lookup"><span data-stu-id="f4293-377">Loading keys (> 1024 bits)</span></span>    | <span data-ttu-id="f4293-378">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-378">✔️</span></span>         | <span data-ttu-id="f4293-379">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-379">✔️</span></span>    | ⚠️\*          | ❌            |
| <span data-ttu-id="f4293-380">FIPS 186-2</span><span class="sxs-lookup"><span data-stu-id="f4293-380">FIPS 186-2</span></span>                    | <span data-ttu-id="f4293-381">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-381">✔️</span></span>         | <span data-ttu-id="f4293-382">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-382">✔️</span></span>    | <span data-ttu-id="f4293-383">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-383">✔️</span></span>            | <span data-ttu-id="f4293-384">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-384">✔️</span></span>           |
| <span data-ttu-id="f4293-385">FIPS 186-3 (подписи SHA-2)</span><span class="sxs-lookup"><span data-stu-id="f4293-385">FIPS 186-3 (SHA-2 signatures)</span></span> | <span data-ttu-id="f4293-386">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-386">✔️</span></span>         | <span data-ttu-id="f4293-387">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-387">✔️</span></span>    | ❌            | ❌            |

<span data-ttu-id="f4293-388">\*macOS загружает ключи DSA больше 1024 бит, но поведение этих ключей не определено.</span><span class="sxs-lookup"><span data-stu-id="f4293-388">\* macOS loads DSA keys bigger than 1024 bits, but the behavior of those keys is undefined.</span></span> <span data-ttu-id="f4293-389">Они не работают в соответствии с FIPS 186-3.</span><span class="sxs-lookup"><span data-stu-id="f4293-389">They don't behave according to FIPS 186-3.</span></span>

#### <a name="dsa-on-windows"></a><span data-ttu-id="f4293-390">DSA в Windows</span><span class="sxs-lookup"><span data-stu-id="f4293-390">DSA on Windows</span></span>

* <span data-ttu-id="f4293-391">Windows CryptoAPI (CAPI) используется всякий раз, когда [`new DSACryptoServiceProvider()`](xref:System.Security.Cryptography.DSACryptoServiceProvider) используется.</span><span class="sxs-lookup"><span data-stu-id="f4293-391">Windows CryptoAPI (CAPI) is used whenever [`new DSACryptoServiceProvider()`](xref:System.Security.Cryptography.DSACryptoServiceProvider) is used.</span></span>
* <span data-ttu-id="f4293-392">Функция следующего поколения для шифрования Windows (CNG) используется всякий раз, когда [`new DSACng()`](xref:System.Security.Cryptography.DSACng) используется.</span><span class="sxs-lookup"><span data-stu-id="f4293-392">Windows Cryptography API Next Generation (CNG) is used whenever [`new DSACng()`](xref:System.Security.Cryptography.DSACng) is used.</span></span>
* <span data-ttu-id="f4293-393">Объект, возвращаемый функцией, <xref:System.Security.Cryptography.DSA.Create%2A?displayProperty=nameWithType> внутренне работает под управлением CNG Windows.</span><span class="sxs-lookup"><span data-stu-id="f4293-393">The object returned by <xref:System.Security.Cryptography.DSA.Create%2A?displayProperty=nameWithType> is internally powered by Windows CNG.</span></span> <span data-ttu-id="f4293-394">Использование Windows CNG является подробным описанием реализации и может быть изменено.</span><span class="sxs-lookup"><span data-stu-id="f4293-394">This use of Windows CNG is an implementation detail and is subject to change.</span></span>
* <span data-ttu-id="f4293-395"><xref:System.Security.Cryptography.X509Certificates.DSACertificateExtensions.GetDSAPublicKey%2A>Метод расширения для <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> возвращает <xref:System.Security.Cryptography.DSACng> экземпляр.</span><span class="sxs-lookup"><span data-stu-id="f4293-395">The <xref:System.Security.Cryptography.X509Certificates.DSACertificateExtensions.GetDSAPublicKey%2A> extension method for <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> returns a <xref:System.Security.Cryptography.DSACng> instance.</span></span> <span data-ttu-id="f4293-396">Это использование <xref:System.Security.Cryptography.DSACng> является подробным описанием реализации и может быть изменено.</span><span class="sxs-lookup"><span data-stu-id="f4293-396">This use of <xref:System.Security.Cryptography.DSACng> is an implementation detail and is subject to change.</span></span>
* <span data-ttu-id="f4293-397"><xref:System.Security.Cryptography.X509Certificates.DSACertificateExtensions.GetDSAPrivateKey%2A>Метод расширения <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> предпочитает <xref:System.Security.Cryptography.DSACng> экземпляр, но если <xref:System.Security.Cryptography.DSACng> не может открыть ключ, <xref:System.Security.Cryptography.DSACryptoServiceProvider> будет предпринята попыток.</span><span class="sxs-lookup"><span data-stu-id="f4293-397">The <xref:System.Security.Cryptography.X509Certificates.DSACertificateExtensions.GetDSAPrivateKey%2A> extension method for <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> prefers an <xref:System.Security.Cryptography.DSACng> instance, but if <xref:System.Security.Cryptography.DSACng> can't open the key, <xref:System.Security.Cryptography.DSACryptoServiceProvider> will be attempted.</span></span>  <span data-ttu-id="f4293-398">Предпочтительный поставщик — это сведения о реализации, которые могут быть изменены.</span><span class="sxs-lookup"><span data-stu-id="f4293-398">The preferred provider is an implementation detail and is subject to change.</span></span>

#### <a name="dsa-native-interop"></a><span data-ttu-id="f4293-399">Встроенное взаимодействие DSA</span><span class="sxs-lookup"><span data-stu-id="f4293-399">DSA native interop</span></span>

<span data-ttu-id="f4293-400">.NET предоставляет типы, позволяющие программам взаимодействовать с библиотеками ОС, используемыми кодом шифрования .NET.</span><span class="sxs-lookup"><span data-stu-id="f4293-400">.NET exposes types to allow programs to interoperate with the OS libraries that the .NET cryptography code uses.</span></span> <span data-ttu-id="f4293-401">Участвующие типы не переводятся между платформами и должны использоваться только при необходимости.</span><span class="sxs-lookup"><span data-stu-id="f4293-401">The types involved don't translate between platforms and should only be directly used when necessary.</span></span>

| <span data-ttu-id="f4293-402">Тип</span><span class="sxs-lookup"><span data-stu-id="f4293-402">Type</span></span>                                                         | <span data-ttu-id="f4293-403">Windows</span><span class="sxs-lookup"><span data-stu-id="f4293-403">Windows</span></span> | <span data-ttu-id="f4293-404">Linux</span><span class="sxs-lookup"><span data-stu-id="f4293-404">Linux</span></span>         | <span data-ttu-id="f4293-405">macOS</span><span class="sxs-lookup"><span data-stu-id="f4293-405">macOS</span></span>         |
|--------------------------------------------------------------|---------|---------------|---------------|
| <xref:System.Security.Cryptography.DSACryptoServiceProvider> | <span data-ttu-id="f4293-406">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-406">✔️</span></span>     | <span data-ttu-id="f4293-407">⚠️<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="f4293-407">⚠️<sup>1</sup></span></span> | <span data-ttu-id="f4293-408">⚠️<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="f4293-408">⚠️<sup>1</sup></span></span> |
| <xref:System.Security.Cryptography.DSACng>                   | <span data-ttu-id="f4293-409">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-409">✔️</span></span>     | ❌             | ❌            |
| <xref:System.Security.Cryptography.DSAOpenSsl>               | ❌      | <span data-ttu-id="f4293-410">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-410">✔️</span></span>            | <span data-ttu-id="f4293-411">⚠️<sup>открыт</sup></span><span class="sxs-lookup"><span data-stu-id="f4293-411">⚠️<sup>2</sup></span></span> |

<span data-ttu-id="f4293-412"><sup>1</sup> в MacOS и Linux <xref:System.Security.Cryptography.DSACryptoServiceProvider> можно использовать для совместимости с существующими программами.</span><span class="sxs-lookup"><span data-stu-id="f4293-412"><sup>1</sup> On macOS and Linux, <xref:System.Security.Cryptography.DSACryptoServiceProvider> can be used for compatibility with existing programs.</span></span> <span data-ttu-id="f4293-413">В этом случае любой метод, требующий взаимодействия с системой, например открытие именованного ключа, создает исключение <xref:System.PlatformNotSupportedException> .</span><span class="sxs-lookup"><span data-stu-id="f4293-413">In that case, any method that requires system interop, such as opening a named key, throws a <xref:System.PlatformNotSupportedException>.</span></span>

<span data-ttu-id="f4293-414"><sup>2</sup> в macOS <xref:System.Security.Cryptography.DSAOpenSsl> работает, если установлен OpenSSL и соответствующий либкрипто dylib можно найти с помощью динамической загрузки библиотеки.</span><span class="sxs-lookup"><span data-stu-id="f4293-414"><sup>2</sup> On macOS, <xref:System.Security.Cryptography.DSAOpenSsl> works if OpenSSL is installed and an appropriate libcrypto dylib can be found via dynamic library loading.</span></span> <span data-ttu-id="f4293-415">Если не удается найти соответствующую библиотеку, будут созданы исключения.</span><span class="sxs-lookup"><span data-stu-id="f4293-415">If an appropriate library can't be found, exceptions will be thrown.</span></span>

## <a name="x509-certificates"></a><span data-ttu-id="f4293-416">Сертификаты X.509</span><span class="sxs-lookup"><span data-stu-id="f4293-416">X.509 Certificates</span></span>

<span data-ttu-id="f4293-417">Большая часть поддержки сертификатов X. 509 в .NET поступает из библиотек ОС.</span><span class="sxs-lookup"><span data-stu-id="f4293-417">The majority of support for X.509 certificates in .NET comes from OS libraries.</span></span> <span data-ttu-id="f4293-418">Чтобы загрузить сертификат в <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> <xref:System.Security.Cryptography.X509Certificates.X509Certificate> экземпляр или в .NET, сертификат должен быть загружен базовой библиотекой ОС.</span><span class="sxs-lookup"><span data-stu-id="f4293-418">To load a certificate into an <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> or <xref:System.Security.Cryptography.X509Certificates.X509Certificate> instance in .NET, the certificate must be loaded by the underlying OS library.</span></span>

### <a name="read-a-pkcs12pfx"></a><span data-ttu-id="f4293-419">Чтение PKCS12/PFX</span><span class="sxs-lookup"><span data-stu-id="f4293-419">Read a PKCS12/PFX</span></span>

| <span data-ttu-id="f4293-420">Сценарий</span><span class="sxs-lookup"><span data-stu-id="f4293-420">Scenario</span></span>                                     | <span data-ttu-id="f4293-421">Windows</span><span class="sxs-lookup"><span data-stu-id="f4293-421">Windows</span></span> | <span data-ttu-id="f4293-422">Linux</span><span class="sxs-lookup"><span data-stu-id="f4293-422">Linux</span></span> | <span data-ttu-id="f4293-423">macOS</span><span class="sxs-lookup"><span data-stu-id="f4293-423">macOS</span></span> |
|----------------------------------------------|---------|-------|-------|
| <span data-ttu-id="f4293-424">Empty</span><span class="sxs-lookup"><span data-stu-id="f4293-424">Empty</span></span>                                        | <span data-ttu-id="f4293-425">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-425">✔️</span></span>     | <span data-ttu-id="f4293-426">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-426">✔️</span></span>    | <span data-ttu-id="f4293-427">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-427">✔️</span></span>   |
| <span data-ttu-id="f4293-428">Один сертификат, закрытый ключ отсутствует</span><span class="sxs-lookup"><span data-stu-id="f4293-428">One certificate, no private key</span></span>              | <span data-ttu-id="f4293-429">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-429">✔️</span></span>     | <span data-ttu-id="f4293-430">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-430">✔️</span></span>    | <span data-ttu-id="f4293-431">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-431">✔️</span></span>   |
| <span data-ttu-id="f4293-432">Один сертификат с закрытым ключом</span><span class="sxs-lookup"><span data-stu-id="f4293-432">One certificate, with private key</span></span>            | <span data-ttu-id="f4293-433">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-433">✔️</span></span>     | <span data-ttu-id="f4293-434">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-434">✔️</span></span>    | <span data-ttu-id="f4293-435">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-435">✔️</span></span>   |
| <span data-ttu-id="f4293-436">Несколько сертификатов, без закрытых ключей</span><span class="sxs-lookup"><span data-stu-id="f4293-436">Multiple certificates, no private keys</span></span>       | <span data-ttu-id="f4293-437">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-437">✔️</span></span>     | <span data-ttu-id="f4293-438">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-438">✔️</span></span>    | <span data-ttu-id="f4293-439">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-439">✔️</span></span>   |
| <span data-ttu-id="f4293-440">Несколько сертификатов, один закрытый ключ</span><span class="sxs-lookup"><span data-stu-id="f4293-440">Multiple certificates, one private key</span></span>       | <span data-ttu-id="f4293-441">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-441">✔️</span></span>     | <span data-ttu-id="f4293-442">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-442">✔️</span></span>    | <span data-ttu-id="f4293-443">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-443">✔️</span></span>   |
| <span data-ttu-id="f4293-444">Несколько сертификатов, несколько закрытых ключей</span><span class="sxs-lookup"><span data-stu-id="f4293-444">Multiple certificates, multiple private keys</span></span> | <span data-ttu-id="f4293-445">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-445">✔️</span></span>     | ⚠️\*  | <span data-ttu-id="f4293-446">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-446">✔️</span></span>   |

<span data-ttu-id="f4293-447">\*Доступно в выпусках .NET 5 Preview.</span><span class="sxs-lookup"><span data-stu-id="f4293-447">\* Available in .NET 5 preview releases.</span></span>

### <a name="write-a-pkcs12pfx"></a><span data-ttu-id="f4293-448">Запись PKCS12/PFX</span><span class="sxs-lookup"><span data-stu-id="f4293-448">Write a PKCS12/PFX</span></span>

| <span data-ttu-id="f4293-449">Сценарий</span><span class="sxs-lookup"><span data-stu-id="f4293-449">Scenario</span></span>                                     | <span data-ttu-id="f4293-450">Windows</span><span class="sxs-lookup"><span data-stu-id="f4293-450">Windows</span></span> | <span data-ttu-id="f4293-451">Linux</span><span class="sxs-lookup"><span data-stu-id="f4293-451">Linux</span></span> | <span data-ttu-id="f4293-452">macOS</span><span class="sxs-lookup"><span data-stu-id="f4293-452">macOS</span></span> |
|----------------------------------------------|---------|-------|-------|
| <span data-ttu-id="f4293-453">Empty</span><span class="sxs-lookup"><span data-stu-id="f4293-453">Empty</span></span>                                        | <span data-ttu-id="f4293-454">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-454">✔️</span></span>     | <span data-ttu-id="f4293-455">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-455">✔️</span></span>    | ⚠️\* |
| <span data-ttu-id="f4293-456">Один сертификат, закрытый ключ отсутствует</span><span class="sxs-lookup"><span data-stu-id="f4293-456">One certificate, no private key</span></span>              | <span data-ttu-id="f4293-457">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-457">✔️</span></span>     | <span data-ttu-id="f4293-458">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-458">✔️</span></span>    | ⚠️\* |
| <span data-ttu-id="f4293-459">Один сертификат с закрытым ключом</span><span class="sxs-lookup"><span data-stu-id="f4293-459">One certificate, with private key</span></span>            | <span data-ttu-id="f4293-460">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-460">✔️</span></span>     | <span data-ttu-id="f4293-461">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-461">✔️</span></span>    | <span data-ttu-id="f4293-462">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-462">✔️</span></span>   |
| <span data-ttu-id="f4293-463">Несколько сертификатов, без закрытых ключей</span><span class="sxs-lookup"><span data-stu-id="f4293-463">Multiple certificates, no private keys</span></span>       | <span data-ttu-id="f4293-464">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-464">✔️</span></span>     | <span data-ttu-id="f4293-465">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-465">✔️</span></span>    | ⚠️\* |
| <span data-ttu-id="f4293-466">Несколько сертификатов, один закрытый ключ</span><span class="sxs-lookup"><span data-stu-id="f4293-466">Multiple certificates, one private key</span></span>       | <span data-ttu-id="f4293-467">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-467">✔️</span></span>     | <span data-ttu-id="f4293-468">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-468">✔️</span></span>    | <span data-ttu-id="f4293-469">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-469">✔️</span></span>   |
| <span data-ttu-id="f4293-470">Несколько сертификатов, несколько закрытых ключей</span><span class="sxs-lookup"><span data-stu-id="f4293-470">Multiple certificates, multiple private keys</span></span> | <span data-ttu-id="f4293-471">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-471">✔️</span></span>     | ⚠️\*  | <span data-ttu-id="f4293-472">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-472">✔️</span></span>   |
| <span data-ttu-id="f4293-473">Эфемерная Загрузка</span><span class="sxs-lookup"><span data-stu-id="f4293-473">Ephemeral loading</span></span>                            | <span data-ttu-id="f4293-474">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-474">✔️</span></span>     | <span data-ttu-id="f4293-475">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-475">✔️</span></span>    | ⚠️\* |

<span data-ttu-id="f4293-476">\*Доступно в выпусках .NET 5 Preview.</span><span class="sxs-lookup"><span data-stu-id="f4293-476">\* Available in .NET 5 preview releases.</span></span>

<span data-ttu-id="f4293-477">macOS не может загрузить закрытые ключи сертификата без объекта цепочки ключей, что требует записи на диск.</span><span class="sxs-lookup"><span data-stu-id="f4293-477">macOS can't load certificate private keys without a keychain object, which requires writing to disk.</span></span> <span data-ttu-id="f4293-478">Области цепочки ключей создаются автоматически для загрузки PFX и удаляются, когда они больше не используются.</span><span class="sxs-lookup"><span data-stu-id="f4293-478">Keychains are created automatically for PFX loading, and are deleted when no longer in use.</span></span> <span data-ttu-id="f4293-479">Поскольку <xref:System.Security.Cryptography.X509Certificates.X509KeyStorageFlags.EphemeralKeySet?displayProperty=nameWithType> параметр означает, что закрытый ключ не должен записываться на диск, при утверждении этого флага в macOS результат будет иметь значение <xref:System.PlatformNotSupportedException> .</span><span class="sxs-lookup"><span data-stu-id="f4293-479">Since the <xref:System.Security.Cryptography.X509Certificates.X509KeyStorageFlags.EphemeralKeySet?displayProperty=nameWithType> option means that the private key should not be written to disk, asserting that flag on macOS results in a <xref:System.PlatformNotSupportedException>.</span></span>

### <a name="write-a-pkcs7-certificate-collection"></a><span data-ttu-id="f4293-480">Создание коллекции сертификатов PKCS7</span><span class="sxs-lookup"><span data-stu-id="f4293-480">Write a PKCS7 certificate collection</span></span>

<span data-ttu-id="f4293-481">Windows и Linux выдают большие двоичные объекты PKCS7 в кодировке DER.</span><span class="sxs-lookup"><span data-stu-id="f4293-481">Windows and Linux both emit DER-encoded PKCS7 blobs.</span></span> <span data-ttu-id="f4293-482">macOS выдает большие двоичные объекты PKCS7 с кодировкой CER с неопределенной длиной.</span><span class="sxs-lookup"><span data-stu-id="f4293-482">macOS emits indefinite-length-CER-encoded PKCS7 blobs.</span></span>

### <a name="x509store"></a><span data-ttu-id="f4293-483">X509Store</span><span class="sxs-lookup"><span data-stu-id="f4293-483">X509Store</span></span>

<span data-ttu-id="f4293-484">В Windows <xref:System.Security.Cryptography.X509Certificates.X509Store> класс представляет собой представление API-интерфейсов хранилища сертификатов Windows.</span><span class="sxs-lookup"><span data-stu-id="f4293-484">On Windows, the <xref:System.Security.Cryptography.X509Certificates.X509Store> class is a representation of the Windows Certificate Store APIs.</span></span> <span data-ttu-id="f4293-485">Эти API-интерфейсы работают в .NET Core и .NET 5 так же, как в .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="f4293-485">Those APIs work the same in .NET Core and .NET 5 as they do in .NET Framework.</span></span>

<span data-ttu-id="f4293-486">В Linux <xref:System.Security.Cryptography.X509Certificates.X509Store> класс является проекцией решений о доверии системы (только для чтения), принятия решений о доверии пользователей (для чтения и записи) и хранилища ключей пользователей (чтение и запись).</span><span class="sxs-lookup"><span data-stu-id="f4293-486">On Linux, the <xref:System.Security.Cryptography.X509Certificates.X509Store> class is a projection of system trust decisions (read-only), user trust decisions (read-write), and user key storage (read-write).</span></span>

<span data-ttu-id="f4293-487">В macOS <xref:System.Security.Cryptography.X509Certificates.X509Store> класс является проекцией решений о доверии системы (только для чтения), принятия решений о доверии пользователей (только для чтения) и хранилища ключей пользователей (чтение и запись).</span><span class="sxs-lookup"><span data-stu-id="f4293-487">On macOS, the <xref:System.Security.Cryptography.X509Certificates.X509Store> class is a projection of system trust decisions (read-only), user trust decisions (read-only), and user key storage (read-write).</span></span>

<span data-ttu-id="f4293-488">В следующих таблицах показано, какие сценарии поддерживаются на каждой платформе.</span><span class="sxs-lookup"><span data-stu-id="f4293-488">The following tables show which scenarios are supported in each platform.</span></span> <span data-ttu-id="f4293-489">Для неподдерживаемых сценариев ( ❌ в таблицах) <xref:System.Security.Cryptography.CryptographicException> создается исключение.</span><span class="sxs-lookup"><span data-stu-id="f4293-489">For unsupported scenarios (❌ in the tables), a <xref:System.Security.Cryptography.CryptographicException> is thrown.</span></span>

#### <a name="the-my-store"></a><span data-ttu-id="f4293-490">Хранилище My</span><span class="sxs-lookup"><span data-stu-id="f4293-490">The My store</span></span>

| <span data-ttu-id="f4293-491">Сценарий</span><span class="sxs-lookup"><span data-stu-id="f4293-491">Scenario</span></span>                                         | <span data-ttu-id="f4293-492">Windows</span><span class="sxs-lookup"><span data-stu-id="f4293-492">Windows</span></span> | <span data-ttu-id="f4293-493">Linux</span><span class="sxs-lookup"><span data-stu-id="f4293-493">Linux</span></span> | <span data-ttu-id="f4293-494">macOS</span><span class="sxs-lookup"><span data-stu-id="f4293-494">macOS</span></span> |
|--------------------------------------------------|---------|-------|-------|
| <span data-ttu-id="f4293-495">Открыть: Currentuser\my (только для чтения)</span><span class="sxs-lookup"><span data-stu-id="f4293-495">Open CurrentUser\My (ReadOnly)</span></span>                   | <span data-ttu-id="f4293-496">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-496">✔️</span></span>     | <span data-ttu-id="f4293-497">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-497">✔️</span></span>    | <span data-ttu-id="f4293-498">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-498">✔️</span></span>   |
| <span data-ttu-id="f4293-499">Открыть: Currentuser\my (ReadWrite)</span><span class="sxs-lookup"><span data-stu-id="f4293-499">Open CurrentUser\My (ReadWrite)</span></span>                  | <span data-ttu-id="f4293-500">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-500">✔️</span></span>     | <span data-ttu-id="f4293-501">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-501">✔️</span></span>    | <span data-ttu-id="f4293-502">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-502">✔️</span></span>   |
| <span data-ttu-id="f4293-503">Open: Currentuser\my (Ексистингонли)</span><span class="sxs-lookup"><span data-stu-id="f4293-503">Open CurrentUser\My (ExistingOnly)</span></span>               | <span data-ttu-id="f4293-504">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-504">✔️</span></span>     | ⚠️    | <span data-ttu-id="f4293-505">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-505">✔️</span></span>   |
| <span data-ttu-id="f4293-506">Открыть LocalMachine\My</span><span class="sxs-lookup"><span data-stu-id="f4293-506">Open LocalMachine\My</span></span>                             | <span data-ttu-id="f4293-507">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-507">✔️</span></span>     | ❌    | <span data-ttu-id="f4293-508">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-508">✔️</span></span>   |

<span data-ttu-id="f4293-509">В Linux хранилища создаются при первой записи, и по умолчанию хранилища пользователей не существуют, поэтому открытие `CurrentUser\My` с `ExistingOnly` может завершиться ошибкой.</span><span class="sxs-lookup"><span data-stu-id="f4293-509">On Linux, stores are created on first write, and no user stores exist by default, so opening `CurrentUser\My` with `ExistingOnly` may fail.</span></span>

<span data-ttu-id="f4293-510">В macOS `CurrentUser\My` хранилище является цепочкой ключей пользователя по умолчанию, которая по `login.keychain` умолчанию имеет значение.</span><span class="sxs-lookup"><span data-stu-id="f4293-510">On macOS, the `CurrentUser\My` store is the user's default keychain, which is `login.keychain` by default.</span></span> <span data-ttu-id="f4293-511">`LocalMachine\My`Хранилище — `System.keychain` .</span><span class="sxs-lookup"><span data-stu-id="f4293-511">The `LocalMachine\My` store is `System.keychain`.</span></span>

#### <a name="the-root-store"></a><span data-ttu-id="f4293-512">Корневое хранилище</span><span class="sxs-lookup"><span data-stu-id="f4293-512">The Root store</span></span>

| <span data-ttu-id="f4293-513">Сценарий</span><span class="sxs-lookup"><span data-stu-id="f4293-513">Scenario</span></span>                              | <span data-ttu-id="f4293-514">Windows</span><span class="sxs-lookup"><span data-stu-id="f4293-514">Windows</span></span> | <span data-ttu-id="f4293-515">Linux</span><span class="sxs-lookup"><span data-stu-id="f4293-515">Linux</span></span> | <span data-ttu-id="f4293-516">macOS</span><span class="sxs-lookup"><span data-stu-id="f4293-516">macOS</span></span>           |
|---------------------------------------|---------|-------|-----------------|
| <span data-ttu-id="f4293-517">Открыть Куррентусер\рут (только для чтения)</span><span class="sxs-lookup"><span data-stu-id="f4293-517">Open CurrentUser\Root (ReadOnly)</span></span>      | <span data-ttu-id="f4293-518">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-518">✔️</span></span>     | <span data-ttu-id="f4293-519">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-519">✔️</span></span>    | <span data-ttu-id="f4293-520">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-520">✔️</span></span>             |
| <span data-ttu-id="f4293-521">Открыть Куррентусер\рут (ReadWrite)</span><span class="sxs-lookup"><span data-stu-id="f4293-521">Open CurrentUser\Root (ReadWrite)</span></span>     | <span data-ttu-id="f4293-522">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-522">✔️</span></span>     | <span data-ttu-id="f4293-523">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-523">✔️</span></span>    | ❌              |
| <span data-ttu-id="f4293-524">Open Куррентусер\рут (Ексистингонли)</span><span class="sxs-lookup"><span data-stu-id="f4293-524">Open CurrentUser\Root (ExistingOnly)</span></span>  | <span data-ttu-id="f4293-525">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-525">✔️</span></span>     | ⚠️    | <span data-ttu-id="f4293-526">✔️ (если только для чтения)</span><span class="sxs-lookup"><span data-stu-id="f4293-526">✔️ (if ReadOnly)</span></span> |
| <span data-ttu-id="f4293-527">Открыть Локалмачине\рут (только для чтения)</span><span class="sxs-lookup"><span data-stu-id="f4293-527">Open LocalMachine\Root (ReadOnly)</span></span>     | <span data-ttu-id="f4293-528">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-528">✔️</span></span>     | <span data-ttu-id="f4293-529">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-529">✔️</span></span>    | <span data-ttu-id="f4293-530">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-530">✔️</span></span>             |
| <span data-ttu-id="f4293-531">Открыть Локалмачине\рут (ReadWrite)</span><span class="sxs-lookup"><span data-stu-id="f4293-531">Open LocalMachine\Root (ReadWrite)</span></span>    | <span data-ttu-id="f4293-532">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-532">✔️</span></span>     | ❌    | ❌              |
| <span data-ttu-id="f4293-533">Open Локалмачине\рут (Ексистингонли)</span><span class="sxs-lookup"><span data-stu-id="f4293-533">Open LocalMachine\Root (ExistingOnly)</span></span> | <span data-ttu-id="f4293-534">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-534">✔️</span></span>     | ⚠️    | <span data-ttu-id="f4293-535">✔️ (если только для чтения)</span><span class="sxs-lookup"><span data-stu-id="f4293-535">✔️ (if ReadOnly)</span></span> |

<span data-ttu-id="f4293-536">В Linux `LocalMachine\Root` хранилище представляет собой интерпретацию пакета центров сертификации в пути по умолчанию для OpenSSL.</span><span class="sxs-lookup"><span data-stu-id="f4293-536">On Linux, the `LocalMachine\Root` store is an interpretation of the CA bundle in the default path for OpenSSL.</span></span>

<span data-ttu-id="f4293-537">В macOS `CurrentUser\Root` хранилище представляет собой интерпретацию `SecTrustSettings` результатов для домена доверия пользователя.</span><span class="sxs-lookup"><span data-stu-id="f4293-537">On macOS, the `CurrentUser\Root` store is an interpretation of the `SecTrustSettings` results for the user trust domain.</span></span> <span data-ttu-id="f4293-538">`LocalMachine\Root`Хранилище представляет собой интерпретацию `SecTrustSettings` результатов для доверенных доменов администрирования и системы.</span><span class="sxs-lookup"><span data-stu-id="f4293-538">The `LocalMachine\Root` store is an interpretation of the `SecTrustSettings` results for the admin and system trust domains.</span></span>

#### <a name="the-intermediate-store"></a><span data-ttu-id="f4293-539">Промежуточное хранилище</span><span class="sxs-lookup"><span data-stu-id="f4293-539">The Intermediate store</span></span>

| <span data-ttu-id="f4293-540">Сценарий</span><span class="sxs-lookup"><span data-stu-id="f4293-540">Scenario</span></span>                                      | <span data-ttu-id="f4293-541">Windows</span><span class="sxs-lookup"><span data-stu-id="f4293-541">Windows</span></span> | <span data-ttu-id="f4293-542">Linux</span><span class="sxs-lookup"><span data-stu-id="f4293-542">Linux</span></span> | <span data-ttu-id="f4293-543">macOS</span><span class="sxs-lookup"><span data-stu-id="f4293-543">macOS</span></span>           |
|-----------------------------------------------|---------|-------|-----------------|
| <span data-ttu-id="f4293-544">Открыть Куррентусер\интермедиате (только для чтения)</span><span class="sxs-lookup"><span data-stu-id="f4293-544">Open CurrentUser\Intermediate (ReadOnly)</span></span>      | <span data-ttu-id="f4293-545">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-545">✔️</span></span>     | <span data-ttu-id="f4293-546">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-546">✔️</span></span>    | <span data-ttu-id="f4293-547">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-547">✔️</span></span>             |
| <span data-ttu-id="f4293-548">Открыть Куррентусер\интермедиате (ReadWrite)</span><span class="sxs-lookup"><span data-stu-id="f4293-548">Open CurrentUser\Intermediate (ReadWrite)</span></span>     | <span data-ttu-id="f4293-549">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-549">✔️</span></span>     | <span data-ttu-id="f4293-550">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-550">✔️</span></span>    | ❌              |
| <span data-ttu-id="f4293-551">Open Куррентусер\интермедиате (Ексистингонли)</span><span class="sxs-lookup"><span data-stu-id="f4293-551">Open CurrentUser\Intermediate (ExistingOnly)</span></span>  | <span data-ttu-id="f4293-552">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-552">✔️</span></span>     | ⚠️    | <span data-ttu-id="f4293-553">✔️ (если только для чтения)</span><span class="sxs-lookup"><span data-stu-id="f4293-553">✔️ (if ReadOnly)</span></span> |
| <span data-ttu-id="f4293-554">Открыть Локалмачине\интермедиате (только для чтения)</span><span class="sxs-lookup"><span data-stu-id="f4293-554">Open LocalMachine\Intermediate (ReadOnly)</span></span>     | <span data-ttu-id="f4293-555">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-555">✔️</span></span>     | <span data-ttu-id="f4293-556">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-556">✔️</span></span>    | <span data-ttu-id="f4293-557">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-557">✔️</span></span>             |
| <span data-ttu-id="f4293-558">Открыть Локалмачине\интермедиате (ReadWrite)</span><span class="sxs-lookup"><span data-stu-id="f4293-558">Open LocalMachine\Intermediate (ReadWrite)</span></span>    | <span data-ttu-id="f4293-559">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-559">✔️</span></span>     | ❌    | ❌              |
| <span data-ttu-id="f4293-560">Open Локалмачине\интермедиате (Ексистингонли)</span><span class="sxs-lookup"><span data-stu-id="f4293-560">Open LocalMachine\Intermediate (ExistingOnly)</span></span> | <span data-ttu-id="f4293-561">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-561">✔️</span></span>     | ⚠️    | <span data-ttu-id="f4293-562">✔️ (если только для чтения)</span><span class="sxs-lookup"><span data-stu-id="f4293-562">✔️ (if ReadOnly)</span></span> |

<span data-ttu-id="f4293-563">В Linux `CurrentUser\Intermediate` хранилище используется в качестве кэша при скачивании промежуточных центров сертификации с помощью записей доступа к информации о центрах сертификации в успешных сборках X509Chain.</span><span class="sxs-lookup"><span data-stu-id="f4293-563">On Linux, the `CurrentUser\Intermediate` store is used as a cache when downloading intermediate CAs by their Authority Information Access records on successful X509Chain builds.</span></span> <span data-ttu-id="f4293-564">`LocalMachine\Intermediate`Хранилище представляет собой интерпретацию пакета ЦС в пути по умолчанию для OpenSSL.</span><span class="sxs-lookup"><span data-stu-id="f4293-564">The `LocalMachine\Intermediate` store is an interpretation of the CA bundle in the default path for OpenSSL.</span></span>

#### <a name="the-disallowed-store"></a><span data-ttu-id="f4293-565">Неразрешенное хранилище</span><span class="sxs-lookup"><span data-stu-id="f4293-565">The Disallowed store</span></span>

| <span data-ttu-id="f4293-566">Сценарий</span><span class="sxs-lookup"><span data-stu-id="f4293-566">Scenario</span></span>                                    | <span data-ttu-id="f4293-567">Windows</span><span class="sxs-lookup"><span data-stu-id="f4293-567">Windows</span></span> | <span data-ttu-id="f4293-568">Linux</span><span class="sxs-lookup"><span data-stu-id="f4293-568">Linux</span></span> | <span data-ttu-id="f4293-569">macOS</span><span class="sxs-lookup"><span data-stu-id="f4293-569">macOS</span></span>           |
|---------------------------------------------|---------|-------|-----------------|
| <span data-ttu-id="f4293-570">Открыть Куррентусер\дисалловед (только для чтения)</span><span class="sxs-lookup"><span data-stu-id="f4293-570">Open CurrentUser\Disallowed (ReadOnly)</span></span>      | <span data-ttu-id="f4293-571">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-571">✔️</span></span>     | ⚠️    | <span data-ttu-id="f4293-572">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-572">✔️</span></span>             |
| <span data-ttu-id="f4293-573">Открыть Куррентусер\дисалловед (ReadWrite)</span><span class="sxs-lookup"><span data-stu-id="f4293-573">Open CurrentUser\Disallowed (ReadWrite)</span></span>     | <span data-ttu-id="f4293-574">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-574">✔️</span></span>     | ⚠️    | ❌              |
| <span data-ttu-id="f4293-575">Open Куррентусер\дисалловед (Ексистингонли)</span><span class="sxs-lookup"><span data-stu-id="f4293-575">Open CurrentUser\Disallowed (ExistingOnly)</span></span>  | <span data-ttu-id="f4293-576">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-576">✔️</span></span>     | ⚠️    | <span data-ttu-id="f4293-577">✔️ (если только для чтения)</span><span class="sxs-lookup"><span data-stu-id="f4293-577">✔️ (if ReadOnly)</span></span> |
| <span data-ttu-id="f4293-578">Открыть Локалмачине\дисалловед (только для чтения)</span><span class="sxs-lookup"><span data-stu-id="f4293-578">Open LocalMachine\Disallowed (ReadOnly)</span></span>     | <span data-ttu-id="f4293-579">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-579">✔️</span></span>     | ❌    | <span data-ttu-id="f4293-580">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-580">✔️</span></span>             |
| <span data-ttu-id="f4293-581">Открыть Локалмачине\дисалловед (ReadWrite)</span><span class="sxs-lookup"><span data-stu-id="f4293-581">Open LocalMachine\Disallowed (ReadWrite)</span></span>    | <span data-ttu-id="f4293-582">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-582">✔️</span></span>     | ❌    | ❌              |
| <span data-ttu-id="f4293-583">Open Локалмачине\дисалловед (Ексистингонли)</span><span class="sxs-lookup"><span data-stu-id="f4293-583">Open LocalMachine\Disallowed (ExistingOnly)</span></span> | <span data-ttu-id="f4293-584">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-584">✔️</span></span>     | ❌    | <span data-ttu-id="f4293-585">✔️ (если только для чтения)</span><span class="sxs-lookup"><span data-stu-id="f4293-585">✔️ (if ReadOnly)</span></span> |

<span data-ttu-id="f4293-586">В Linux `Disallowed` хранилище не используется в построении цепочки, и попытка добавить в него содержимое приведет к <xref:System.Security.Cryptography.CryptographicException> .</span><span class="sxs-lookup"><span data-stu-id="f4293-586">On Linux, the `Disallowed` store is not used in chain building, and attempting to add contents to it results in a <xref:System.Security.Cryptography.CryptographicException>.</span></span> <span data-ttu-id="f4293-587"><xref:System.Security.Cryptography.CryptographicException>Исключение возникает при открытии хранилища, `Disallowed` если оно уже получило содержимое.</span><span class="sxs-lookup"><span data-stu-id="f4293-587">A <xref:System.Security.Cryptography.CryptographicException> is thrown when opening the `Disallowed` store if it has already acquired contents.</span></span>

<span data-ttu-id="f4293-588">В macOS хранилища Куррентусер\дисалловед и Локалмачине\дисалловед являются интерпретациями соответствующих результатов Сектрустсеттингс для сертификатов, для которых установлено доверие `Always Deny` .</span><span class="sxs-lookup"><span data-stu-id="f4293-588">On macOS, the CurrentUser\Disallowed and LocalMachine\Disallowed stores are interpretations of the appropriate SecTrustSettings results for certificates whose trust is set to `Always Deny`.</span></span>

#### <a name="nonexistent-store"></a><span data-ttu-id="f4293-589">Несуществующее хранилище</span><span class="sxs-lookup"><span data-stu-id="f4293-589">Nonexistent store</span></span>

| <span data-ttu-id="f4293-590">Сценарий</span><span class="sxs-lookup"><span data-stu-id="f4293-590">Scenario</span></span>                                         | <span data-ttu-id="f4293-591">Windows</span><span class="sxs-lookup"><span data-stu-id="f4293-591">Windows</span></span> | <span data-ttu-id="f4293-592">Linux</span><span class="sxs-lookup"><span data-stu-id="f4293-592">Linux</span></span> | <span data-ttu-id="f4293-593">macOS</span><span class="sxs-lookup"><span data-stu-id="f4293-593">macOS</span></span> |
|--------------------------------------------------|---------|-------|-------|
| <span data-ttu-id="f4293-594">Открыть несуществующее хранилище (Ексистингонли)</span><span class="sxs-lookup"><span data-stu-id="f4293-594">Open non-existent store (ExistingOnly)</span></span>           | ❌     | ❌     | ❌    |
| <span data-ttu-id="f4293-595">Открыть несуществующее хранилище CurrentUser (ReadWrite)</span><span class="sxs-lookup"><span data-stu-id="f4293-595">Open CurrentUser non-existent store (ReadWrite)</span></span>  | <span data-ttu-id="f4293-596">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-596">✔️</span></span>     | <span data-ttu-id="f4293-597">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-597">✔️</span></span>     | ⚠️   |
| <span data-ttu-id="f4293-598">Открытие несуществующего хранилища LocalMachine (ReadWrite)</span><span class="sxs-lookup"><span data-stu-id="f4293-598">Open LocalMachine non-existent store (ReadWrite)</span></span> | <span data-ttu-id="f4293-599">✔️</span><span class="sxs-lookup"><span data-stu-id="f4293-599">✔️</span></span>     | ❌     | ❌    |

<span data-ttu-id="f4293-600">В macOS создание пользовательского хранилища с помощью API X509Store поддерживается только для `CurrentUser` расположения.</span><span class="sxs-lookup"><span data-stu-id="f4293-600">On macOS, custom store creation with the X509Store API is supported only for `CurrentUser` location.</span></span> <span data-ttu-id="f4293-601">Он создаст новую цепочку ключей без пароля в каталоге цепочки ключей пользователя (*~/либрари/кэйчаинс*).</span><span class="sxs-lookup"><span data-stu-id="f4293-601">It will create a new keychain with no password in the user's keychain directory (*~/Library/Keychains*).</span></span> <span data-ttu-id="f4293-602">Чтобы создать цепочку ключей с паролем, можно использовать P/Invoke `SecKeychainCreate` .</span><span class="sxs-lookup"><span data-stu-id="f4293-602">To create a keychain with password, a P/Invoke to `SecKeychainCreate` could be used.</span></span> <span data-ttu-id="f4293-603">Аналогичным образом `SecKeychainOpen` можно использовать для открытия области цепочки ключей в разных местах.</span><span class="sxs-lookup"><span data-stu-id="f4293-603">Similarly, `SecKeychainOpen` could be used to open keychains in different locations.</span></span> <span data-ttu-id="f4293-604">Полученный результат `IntPtr` можно передать в [`new X509Store(IntPtr)`](xref:System.Security.Cryptography.X509Certificates.X509Store.%23ctor(System.IntPtr)) , чтобы получить хранилище, поддерживающее чтение и запись, в соответствии с разрешениями текущего пользователя.</span><span class="sxs-lookup"><span data-stu-id="f4293-604">The resulting `IntPtr` can be passed to [`new X509Store(IntPtr)`](xref:System.Security.Cryptography.X509Certificates.X509Store.%23ctor(System.IntPtr)) to obtain a read/write-capable store, subject to the current user's permissions.</span></span>

### <a name="x509chain"></a><span data-ttu-id="f4293-605">X509Chain</span><span class="sxs-lookup"><span data-stu-id="f4293-605">X509Chain</span></span>

<span data-ttu-id="f4293-606">macOS не поддерживает использование автономных списков отзыва сертификатов, поэтому `X509RevocationMode.Offline` рассматривается как `X509RevocationMode.Online` .</span><span class="sxs-lookup"><span data-stu-id="f4293-606">macOS doesn't support Offline CRL utilization, so `X509RevocationMode.Offline` is treated as `X509RevocationMode.Online`.</span></span>

<span data-ttu-id="f4293-607">macOS не поддерживает время ожидания, инициированное пользователем, для CRL (список отзыва сертификатов)/OCSP (Online Certificate Status Protocol)/AIA (доступ к информации о центрах сертификации), поэтому `X509ChainPolicy.UrlRetrievalTimeout` игнорируется.</span><span class="sxs-lookup"><span data-stu-id="f4293-607">macOS doesn't support a user-initiated timeout on CRL (Certificate Revocation List) / OCSP (Online Certificate Status Protocol) / AIA (Authority Information Access) downloading, so `X509ChainPolicy.UrlRetrievalTimeout` is ignored.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="f4293-608">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="f4293-608">Additional resources</span></span>

* [<span data-ttu-id="f4293-609">Модель шифрования .NET</span><span class="sxs-lookup"><span data-stu-id="f4293-609">.NET Cryptography Model</span></span>](cryptography-model.md)
* [<span data-ttu-id="f4293-610">Службы шифрования .NET</span><span class="sxs-lookup"><span data-stu-id="f4293-610">.NET Cryptographic Services</span></span>](cryptographic-services.md)
* [<span data-ttu-id="f4293-611">Уязвимости в учете времени при симметричной расшифровке в режиме CBC с использованием заполнения</span><span class="sxs-lookup"><span data-stu-id="f4293-611">Timing vulnerabilities with CBC-mode symmetric decryption using padding</span></span>](vulnerabilities-cbc-mode.md)
* [<span data-ttu-id="f4293-612">ASP.NET Core Защита данных</span><span class="sxs-lookup"><span data-stu-id="f4293-612">ASP.NET Core Data Protection</span></span>](/aspnet/core/security/data-protection/introduction)
