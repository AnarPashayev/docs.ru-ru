---
title: Основные понятия безопасности
ms.date: 07/15/2020
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- unauthorized access
- permissions [.NET]
- security [.NET], about security
ms.assetid: 3cfced4f-ea02-4e66-ae98-d69286363e98
ms.openlocfilehash: 259723b903377f7e79731e1ff79b3d512581102f
ms.sourcegitcommit: b7a8b09828bab4e90f66af8d495ecd7024c45042
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87555271"
---
# <a name="key-security-concepts"></a><span data-ttu-id="0d8dd-102">Основные понятия безопасности</span><span class="sxs-lookup"><span data-stu-id="0d8dd-102">Key Security Concepts</span></span>

> [!NOTE]
> <span data-ttu-id="0d8dd-103">Эта статья относится к Windows.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-103">This article applies to Windows.</span></span>
>
> <span data-ttu-id="0d8dd-104">Дополнительные сведения о ASP.NET Core см. в разделе [Обзор безопасности ASP.NET Core](https://docs.microsoft.com/aspnet/core/security/).</span><span class="sxs-lookup"><span data-stu-id="0d8dd-104">For information about ASP.NET Core, see [Overview of ASP.NET Core Security](https://docs.microsoft.com/aspnet/core/security/).</span></span>

<span data-ttu-id="0d8dd-105">.NET предлагает безопасность на основе ролей для решения проблем безопасности в мобильном коде и предоставления поддержки, позволяющей компонентам определять, какие пользователи имеют право выполнять действия.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-105">.NET offers role-based security to help address security concerns about mobile code and to provide support that enables components to determine what users are authorized to do.</span></span>  
  
## <a name="type-safety-and-security"></a><span data-ttu-id="0d8dd-106">Безопасность типа и безопасность</span><span class="sxs-lookup"><span data-stu-id="0d8dd-106">Type safety and security</span></span>  

<span data-ttu-id="0d8dd-107">Код с безопасностью типа имеет доступ только к областям памяти, авторизованным для доступа.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-107">Type-safe code accesses only the memory locations it is authorized to access.</span></span> <span data-ttu-id="0d8dd-108">(В этом обсуждении тип безопасности специально относится к безопасности типа памяти, и его не следует путать с безопасностью типа в более широком смысле.) Например, строго типизированный код не может считывать значения из закрытых полей другого объекта.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-108">(For this discussion, type safety specifically refers to memory type safety and should not be confused with type safety in a broader respect.) For example, type-safe code cannot read values from another object's private fields.</span></span> <span data-ttu-id="0d8dd-109">Он обращается к типам только строго определенными, допустимыми способами.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-109">It accesses types only in well-defined, allowable ways.</span></span>  
  
<span data-ttu-id="0d8dd-110">Во время JIT-компиляции дополнительный процесс проверки проверяет метаданные и MSIL метода для JIT-компиляции в машинный код, чтобы убедиться, что они являются типобезопасными.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-110">During just-in-time (JIT) compilation, an optional verification process examines the metadata and Microsoft intermediate language (MSIL) of a method to be JIT-compiled into native machine code to verify that they are type safe.</span></span> <span data-ttu-id="0d8dd-111">Этот процесс не выполняется, если код имеет разрешение на пропуск проверки.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-111">This process is skipped if the code has permission to bypass verification.</span></span> <span data-ttu-id="0d8dd-112">Дополнительные сведения о проверке см. в разделе [Процесс управляемого выполнения](../managed-execution-process.md).</span><span class="sxs-lookup"><span data-stu-id="0d8dd-112">For more information about verification, see [Managed Execution Process](../managed-execution-process.md).</span></span>  
  
<span data-ttu-id="0d8dd-113">Хотя проверка безопасности типа не обязательна для запуска управляемого кода, безопасность типа играет ключевую роль в изоляции сборок и обеспечении безопасности.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-113">Although verification of type safety is not mandatory to run managed code, type safety plays a crucial role in assembly isolation and security enforcement.</span></span> <span data-ttu-id="0d8dd-114">Если код является типобезопасным, среда CLR может полностью изолировать сборки друг от друга.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-114">When code is type safe, the common language runtime can completely isolate assemblies from each other.</span></span> <span data-ttu-id="0d8dd-115">Эта изоляция помогает обеспечить отсутствие отрицательного влияния сборок друг на друга и повышает надежность приложений.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-115">This isolation helps ensure that assemblies cannot adversely affect each other and it increases application reliability.</span></span> <span data-ttu-id="0d8dd-116">Компоненты с безопасностью типа могут безопасно выполняться в одном процессе, даже если они имеют доверие на разных уровнях.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-116">Type-safe components can execute safely in the same process even if they are trusted at different levels.</span></span> <span data-ttu-id="0d8dd-117">Если код не является типобезопасным, могут возникать нежелательные побочные эффекты.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-117">When code is not type safe, unwanted side effects can occur.</span></span> <span data-ttu-id="0d8dd-118">Например, среда выполнения не может препятствовать вызову машинного (неуправляемого) кода со стороны управляемого кода и выполнению управляемым кодом нежелательных операций.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-118">For example, the runtime cannot prevent managed code from calling into native (unmanaged) code and performing malicious operations.</span></span> <span data-ttu-id="0d8dd-119">Если код является типобезопасным, механизм обеспечения безопасности среды выполнения гарантирует, что он не будет иметь доступ к машинному коду при отсутствии соответствующего разрешения.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-119">When code is type safe, the runtime's security enforcement mechanism ensures that it does not access native code unless it has permission to do so.</span></span> <span data-ttu-id="0d8dd-120">Чтобы код без безопасности типа мог запускаться, ему необходимо предоставить разрешение <xref:System.Security.Permissions.SecurityPermission> с переданным элементом перечисления <xref:System.Security.Permissions.SecurityPermissionAttribute.SkipVerification%2A>.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-120">All code that is not type safe must have been granted <xref:System.Security.Permissions.SecurityPermission> with the passed enum member <xref:System.Security.Permissions.SecurityPermissionAttribute.SkipVerification%2A> to run.</span></span>  
  
<span data-ttu-id="0d8dd-121">Дополнительные сведения см. в разделе [Code Access Security Basics](../../framework/misc/code-access-security-basics.md).</span><span class="sxs-lookup"><span data-stu-id="0d8dd-121">For more information, see [Code Access Security Basics](../../framework/misc/code-access-security-basics.md).</span></span>  
  
## <a name="principal"></a><span data-ttu-id="0d8dd-122">Основной</span><span class="sxs-lookup"><span data-stu-id="0d8dd-122">Principal</span></span>  

<span data-ttu-id="0d8dd-123">Участник представляет удостоверение и роль пользователя и действует от имени пользователя.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-123">A principal represents the identity and role of a user and acts on the user's behalf.</span></span> <span data-ttu-id="0d8dd-124">Безопасность на основе ролей в .NET поддерживает три вида участников:</span><span class="sxs-lookup"><span data-stu-id="0d8dd-124">Role-based security in .NET supports three kinds of principals:</span></span>  
  
- <span data-ttu-id="0d8dd-125">Универсальные участники представляют пользователей и роли, которые существуют независимо от пользователей и ролей Windows.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-125">Generic principals represent users and roles that exist independent of Windows users and roles.</span></span>  
  
- <span data-ttu-id="0d8dd-126">Участники Windows представляют пользователей Windows и их роли (или их группы Windows).</span><span class="sxs-lookup"><span data-stu-id="0d8dd-126">Windows principals represent Windows users and their roles (or their Windows groups).</span></span> <span data-ttu-id="0d8dd-127">Участник Windows может олицетворять другого пользователя, что означает, что этому участнику разрешен доступ к ресурсу от имени пользователя при предоставлении удостоверения, которое принадлежит этому пользователю.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-127">A Windows principal can impersonate another user, which means that the principal can access a resource on a user's behalf while presenting the identity that belongs to that user.</span></span>  
  
- <span data-ttu-id="0d8dd-128">Настраиваемые участники могут определяться приложением любым способом, который необходим для данного конкретного приложения.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-128">Custom principals can be defined by an application in any way that is needed for that particular application.</span></span> <span data-ttu-id="0d8dd-129">При этом можно расширять базовое определение удостоверения и ролей участника.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-129">They can extend the basic notion of the principal's identity and roles.</span></span>  
  
<span data-ttu-id="0d8dd-130">Дополнительные сведения см. в разделе [Объекты Principal и Identity](principal-and-identity-objects.md).</span><span class="sxs-lookup"><span data-stu-id="0d8dd-130">For more information, see [Principal and Identity Objects](principal-and-identity-objects.md).</span></span>  
  
## <a name="authentication"></a><span data-ttu-id="0d8dd-131">Аутентификация</span><span class="sxs-lookup"><span data-stu-id="0d8dd-131">Authentication</span></span>  
<span data-ttu-id="0d8dd-132">Проверка подлинности (аутентификация) — это процесс обнаружения и проверки удостоверения участника путем проверки учетных данных пользователя и проверки этих учетных данных в отношении некоторого центра сертификации.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-132">Authentication is the process of discovering and verifying the identity of a principal by examining the user's credentials and validating those credentials against some authority.</span></span> <span data-ttu-id="0d8dd-133">Сведения, полученные во время проверки подлинности, можно напрямую использовать в коде.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-133">The information obtained during authentication is directly usable by your code.</span></span> <span data-ttu-id="0d8dd-134">Можно также использовать безопасность на основе ролей .NET для проверки подлинности текущего пользователя и определить, следует ли разрешить этому субъекту доступ к коду.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-134">You can also use .NET role-based security to authenticate the current user and to determine whether to allow that principal to access your code.</span></span> <span data-ttu-id="0d8dd-135">Примеры проверки подлинности участника для конкретных ролей см. в описании перегрузок метода <xref:System.Security.Principal.WindowsPrincipal.IsInRole%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-135">See the overloads of the <xref:System.Security.Principal.WindowsPrincipal.IsInRole%2A?displayProperty=nameWithType> method for examples of how to authenticate the principal for specific roles.</span></span> <span data-ttu-id="0d8dd-136">Например, можно использовать перегрузку <xref:System.Security.Principal.WindowsPrincipal.IsInRole%28System.String%29?displayProperty=nameWithType>, чтобы определить, является ли текущий пользователь членом группы «Администраторы».</span><span class="sxs-lookup"><span data-stu-id="0d8dd-136">For example, you can use the <xref:System.Security.Principal.WindowsPrincipal.IsInRole%28System.String%29?displayProperty=nameWithType> overload to determine if the current user is a member of the Administrators group.</span></span>  
  
<span data-ttu-id="0d8dd-137">В настоящее время используются различные механизмы проверки подлинности, многие из которых можно использовать с безопасностью на основе ролей в .NET.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-137">A variety of authentication mechanisms are used today, many of which can be used with .NET role-based security.</span></span> <span data-ttu-id="0d8dd-138">Некоторые из наиболее часто используемых механизмов — это обычная проверка подлинности, дайджест-проверка подлинности, проверка подлинности по паспорту, проверка подлинности операционной системы (например, NTLM или Kerberos) или механизмы, определяемые приложением.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-138">Some of the most commonly used mechanisms are basic, digest, Passport, operating system (such as NTLM or Kerberos), or application-defined mechanisms.</span></span>  
  
### <a name="example"></a><span data-ttu-id="0d8dd-139">Пример</span><span class="sxs-lookup"><span data-stu-id="0d8dd-139">Example</span></span>  

<span data-ttu-id="0d8dd-140">Следующий пример требует, чтобы активный участник был администратором.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-140">The following example requires that the active principal be an administrator.</span></span> <span data-ttu-id="0d8dd-141">Параметр `name` имеет значение `null`, что позволяет любому пользователю с правами администратора проходить требование.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-141">The `name` parameter is `null`, which allows any user who is an administrator to pass the demand.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="0d8dd-142">В Windows Vista привилегии пользователя определяются контролем учетных записей (UAC).</span><span class="sxs-lookup"><span data-stu-id="0d8dd-142">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="0d8dd-143">Члену встроенной группы "Администраторы" присваивается два маркера доступа на время выполнения: маркер доступа обычного пользователя и маркер доступа администратора.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-143">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="0d8dd-144">По умолчанию назначена роль обычного пользователя.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-144">By default, you are in the standard user role.</span></span> <span data-ttu-id="0d8dd-145">Чтобы выполнить код, требующий прав администратора, необходимо сначала повысить права от прав стандартного пользователя до прав администратора.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-145">To execute the code that requires you to be an administrator, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="0d8dd-146">Это можно сделать при запуске приложения, , щелкнув значок приложения правой кнопкой мыши и указав, что приложение должно запускаться от имени администратора.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-146">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
 [!code-cpp[Classic PrincipalPermission Example#1](../../../samples/snippets/cpp/VS_Snippets_CLR_Classic/classic PrincipalPermission Example/CPP/source.cpp#1)]
 [!code-csharp[Classic PrincipalPermission Example#1](../../../samples/snippets/csharp/VS_Snippets_CLR_Classic/classic PrincipalPermission Example/CS/source.cs#1)]
 [!code-vb[Classic PrincipalPermission Example#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR_Classic/classic PrincipalPermission Example/VB/source.vb#1)]  
  
 <span data-ttu-id="0d8dd-147">Следующий пример демонстрирует, как определить удостоверение участника и доступные для него роли.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-147">The following example demonstrates how to determine the identity of the principal and the roles available to the principal.</span></span> <span data-ttu-id="0d8dd-148">Приложение в этом примере должно проверять, что текущий пользователь имеет роль, которая позволяет использовать приложение.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-148">An application of this example might be to confirm that the current user is in a role you allow for using your application.</span></span>  
  
 [!code-cpp[System.Security.Principal.WindowsBuiltInRole Example#1](../../../samples/snippets/cpp/VS_Snippets_CLR_System/system.Security.Principal.WindowsBuiltInRole Example/CPP/source.cpp#1)]
 [!code-csharp[System.Security.Principal.WindowsBuiltInRole Example#1](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.Security.Principal.WindowsBuiltInRole Example/CS/source.cs#1)]
 [!code-vb[System.Security.Principal.WindowsBuiltInRole Example#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.Security.Principal.WindowsBuiltInRole Example/VB/source.vb#1)]  
  
## <a name="authorization"></a><span data-ttu-id="0d8dd-149">Авторизация</span><span class="sxs-lookup"><span data-stu-id="0d8dd-149">Authorization</span></span>  

<span data-ttu-id="0d8dd-150">Авторизация — это процесс определения, разрешено ли участнику выполнять запрошенное действие.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-150">Authorization is the process of determining whether a principal is allowed to perform a requested action.</span></span> <span data-ttu-id="0d8dd-151">Авторизация происходит после проверки подлинности и использует сведения об удостоверении и ролях участника, чтобы определить, к каким ресурсам имеет доступ этот участник.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-151">Authorization occurs after authentication and uses information about the principal's identity and roles to determine what resources the principal can access.</span></span> <span data-ttu-id="0d8dd-152">Для реализации авторизации можно использовать безопасность на основе ролей в .NET.</span><span class="sxs-lookup"><span data-stu-id="0d8dd-152">You can use .NET role-based security to implement authorization.</span></span>

## <a name="see-also"></a><span data-ttu-id="0d8dd-153">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="0d8dd-153">See also</span></span>

- [<span data-ttu-id="0d8dd-154">Безопасность ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="0d8dd-154">ASP.NET Core Security</span></span>](/aspnet/core/security/)
