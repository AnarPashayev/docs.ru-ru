---
title: Бессерверная архитектура — бессерверные приложения
description: Сведения о различных архитектурах и приложениях, которые поддерживаются бессерверными архитектурами, включая веб-приложения, мобильные приложения и приложения Интернета вещей.
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: 838dcd7b41df0d8297e1ae10f9c04a8d5b83b332
ms.sourcegitcommit: 22be09204266253d45ece46f51cc6f080f2b3fd6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/08/2019
ms.locfileid: "72522404"
---
# <a name="serverless-architecture"></a>Бессерверная архитектура

Существует множество подходов к использованию [бессерверных](https://azure.com/serverless) архитектур. В этой статье рассматриваются примеры распространенных архитектур, которые интегрируются без сервера. Здесь также описываются проблемы, которые могут вызвать дополнительные трудности или которые необходимо учитывать при внедрении бессерверных архитектур. Кроме того, здесь приведено несколько примеров разработки, иллюстрирующих различные варианты использования бессерверных архитектур.

Бессерверные узлы часто используют имеющийся слой на основе контейнеров или слой PaaS для управления бессерверными экземплярами. Например, в основе Функций Azure лежит [Служба приложений Azure](https://docs.microsoft.com/azure/app-service/). Служба приложений используется для масштабирования экземпляров и управления средой выполнения (среда CLR), выполняющей код Функций Azure. Для функций для Windows узел работает как PaaS, масштабируя среду выполнения .NET. Для функций для Linux узел использует контейнеры.

![Архитектура Функций Azure](./media/azure-functions-architecture.png)

WebJobs Core предоставляет контекст выполнения для функции. Среда CLR запускает скрипты, выполняет библиотеки и размещает платформу для целевого языка. Например, Node.js используется для запуска функций JavaScript, а .NET Framework — для запуска функций C#. Варианты языков и платформ описаны более подробно далее в этой статье.

Применение комплексного подхода к использованию бессерверной архитектуры может обеспечить определенные преимущества для некоторых проектов. Приложения, которые в значительной степени зависят от микрослужб, могут реализовывать все микрослужбы с использованием беcсерверной технологии. Большинство приложений являются гибридными: в них используется n-уровневая структура и бессерверная архитектура для компонентов, благодаря чему они модульные и независимо масштабируемые. Чтобы помочь понять эти сценарии, в этой статье рассматриваются некоторые распространенные примеры архитектуры, в которых используются бессерверные технологии.

## <a name="full-serverless-back-end"></a>Серверная часть с использованием бессерверных технологий

Серверная часть с использованием бессерверных технологий идеально подходит для нескольких типов сценариев, особенно для создания новых приложений или приложений с нуля. Для приложения с большой контактной зоной API реализация каждого API как бессерверной функции может оказаться выгодной. Приложения, созданные на основе архитектуры с микрослужбами, являются еще одним примером, который может быть реализован в качестве серверной части с бессерверными технологиями. Микрослужбы взаимодействуют друг с другом с помощью различных протоколов. К конкретным сценариям относятся:

- продукты SaaS, использующие API (например, обработчик финансовых платежей);
- приложения на основе сообщений (например, решение для мониторинга устройств);
- приложения, ориентированные на интеграцию между службами (например, приложение для бронирования авиабилетов);
- периодически выполняемые процессы (например, очистка базы данных по таймеру);
- приложения, ориентированные на преобразование данных (например, импорт, активируемый при передаче файла);
- извлечение, преобразование и загрузка (ETL).

Существуют и другие, более конкретные варианты использования. Они рассмотрены далее в этом документе.

## <a name="monoliths-and-starving-the-beast"></a>Монолитные приложения и "морение голодом"

Распространенной проблемой является миграция имеющегося монолитного приложения в облако. Наименее рискованный подход заключается в полном перемещении на виртуальные машины. Многие магазины предпочитают использовать миграцию как возможность модернизации базы кода. Практический подход к миграции называется "морение голодом". В этом сценарии для начала монолит переносится "как есть". Затем модернизируются выбранные службы. В некоторых случаях цифровая подпись службы идентична оригиналу: она просто размещается как функция. Клиенты обновляются для использования новой службы вместо конечной точки монолитного приложения. Тем временем такие шаги, как репликация базы данных, позволяют микрослужбам размещать собственное хранилище, даже если транзакции все еще обрабатываются монолитным приложением. В результате все клиенты будут перенесены в новые службы. Монолитное приложение будет "голодать" (вызовы больше не будут поступать в его службы), пока не будет заменена вся функциональность. Сочетание бессерверной архитектуры и прокси-серверов может значительно упростить эту миграцию.

![Миграция монолитного приложения в бессерверную архитектуру](./media/serverless-monolith-migration.png)

Чтобы узнать больше об этом подходе, посмотрите видео: [Bring your app to the cloud with serverless Azure Functions](https://channel9.msdn.com/Events/Connect/2017/E102) (Перенос приложения в облако с помощью бессерверных Функций Azure).

## <a name="web-apps"></a>Веб-приложения

Веб-приложения являются отличными кандидатами для преобразования на бессерверные приложения. На сегодняшний день существует два распространенных вида веб-приложений: управляемые сервером и управляемые клиентом (например, одностраничное приложение (SPA)). Управляемые сервером веб-приложения обычно используют уровень ПО промежуточного слоя, чтобы отправить вызовы API для отрисовки веб-интерфейса. Приложения SPA выполняют вызовы REST API прямо из браузера. В обоих сценариях бессерверная архитектура может разместить запрос ПО промежуточного слоя или REST API, предоставляя необходимую бизнес-логику. В распространенной архитектуре используется упрощенный статический веб-сервер. Одностраничное приложение (SPA) обслуживает HTML, CSS, JavaScript и другие ресурсы браузера. Затем веб-приложение подключается к серверной части микрослужб.

## <a name="mobile-back-ends"></a>Серверная часть мобильных приложений

Благодаря управляемой событиями парадигме бессерверных приложений их можно использовать в качестве серверной части мобильных приложений. Мобильное устройство инициирует события, после чего выполняется бессерверный код для удовлетворения запросов. Использование бессерверной модели позволяет разработчикам улучшить бизнес-логику без развертывания обновления всего приложения. Бессерверный подход также позволяет командам совместно использовать конечные точки и параллельно выполнять свою работу.

Разработчики мобильных приложений могут создавать бизнес-логику, не обладая экспертными знаниями о работе сервера. Традиционно мобильные приложения подключаются к локальным службам. Создание слоя служб требовало понимания работы платформы сервера и парадигмы программирования. Разработчики работали вместе с командами по операциям для подготовки и настройки серверов соответствующим образом. Иногда на создание конвейера развертывания уходили дни или даже недели. Все эти проблемы решаются с помощью бессерверной архитектуры.

Бессерверная архитектура абстрагирует зависимости на стороне сервера и позволяет разработчику сосредоточиться на бизнес-логике. Например, разработчик мобильных приложений, создающий приложения с использованием платформы JavaScript, может также создавать бессерверные функции с помощью JavaScript. Бессерверный узел управляет операционной системой, экземпляром Node.js для размещения кода, зависимостями пакетов и т. д. Разработчику предоставляется простой набор входных данных и стандартный шаблон для выходных данных. Теперь он может сосредоточиться на создании и тестировании бизнес-логики. Таким образом, он может использовать имеющиеся навыки для создания серверной логики для мобильного приложения без изучения новых платформ или приобретения навыков разработки на стороне сервера.

![Серверная часть бессерверных мобильных приложений](./media/serverless-mobile-backend.png)

Большинство поставщиков облачных служб предлагают мобильные бессерверные продукты, которые упрощают весь жизненный цикл разработки мобильных приложений. Эти продукты могут автоматизировать подготовку баз данных для сохранения данных, выполнять задачи DevOps, предоставлять облачные сборки и платформы для тестирования, а также создавать скрипты для бизнес-процессов, используя предпочитаемый язык разработчика. Применение бессерверного подхода для мобильных приложений может оптимизировать процесс. Использование бессерверной архитектуры устраняет значительные накладные расходы на подготовку, настройку и обслуживание серверов для серверной части мобильных приложений.

## <a name="internet-of-things-iot"></a>Интернет вещей (IoT)

Интернет вещей относится к физическим объектам, подключенным по сети. Их иногда называют "подключенными устройствами" или "интеллектуальными устройствами". Все, начиная с автомобилей и торговых автоматов, может подключаться к сети и отправлять информацию — от данных об инвентаризации до данных датчиков, например, о температуре и влажности. На предприятии Интернет вещей обеспечивает улучшение бизнес-процессов посредством мониторинга и автоматизации. Данные Интернета вещей можно использовать для регулирования климатических условий на большом складе или отслеживания запасов по всей цепочке поставок. Интернет вещей может определять разливы химикатов и вызывать пожарную службу при обнаружении дыма.

При увеличении размера устройств и объема информации часто требуется использовать управляемую событиями архитектуру для маршрутизации и обработки сообщений. Бессерверная архитектура является идеальным решением по нескольким причинам:

- Обеспечение масштабирования по мере увеличения объема устройств и данных.
- Возможность добавления новых конечных точек для поддержки новых устройств и датчиков.
- Обеспечение независимого управления версиями, позволяющего разработчикам обновлять бизнес-логику для конкретного устройства без развертывания всей системы.
- Устойчивость и меньшее время простоя.

Распространенность Интернета вещей привела к появлению нескольких бессерверных продуктов, специально предназначенных для задач, связанных с Интернетом вещей, таких как [Центр Интернета вещей](https://docs.microsoft.com/azure/iot-hub). Бессерверная архитектура автоматизирует такие задачи, как регистрация устройств, применение политик, отслеживание и даже развертывание кода на *пограничных устройствах*. К пограничным устройствам относятся датчики и исполнительные механизмы, подключенные к Интернету, но не являющиеся его активной частью.

>[!div class="step-by-step"]
>[Назад](architecture-approaches.md)
>[Вперед](serverless-architecture-considerations.md)
