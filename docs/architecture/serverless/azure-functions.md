---
title: Функции Azure — бессерверные приложения
description: Функции Azure предоставляют бессерверные возможности на нескольких языкахC#(, JavaScript, Java) и платформах для обеспечения управляемого событиями кода мгновенного масштабирования.
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: 5e8187b3752a0f0d0bcf8e15f2ce440dc5a64e45
ms.sourcegitcommit: 4f4a32a5c16a75724920fa9627c59985c41e173c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/17/2019
ms.locfileid: "72522876"
---
# <a name="azure-functions"></a>Проверка

Функции Azure предоставляют бессерверную среду вычислений. Функция вызывается *триггером* (например, доступ к КОНЕЧНОЙ точке HTTP или таймеру) и выполняет блок кода или бизнес-логики. Функции также поддерживают специализированные *привязки* , которые подключаются к таким ресурсам, как хранилище и очереди.

![Эмблема функций Azure](./media/azure-functions-logo.png)

Существует две версии платформы функций Azure. Версия Legacy поддерживает полную .NET Framework, а новая среда выполнения поддерживает приложения .NET Core на разных платформах. Поддерживаются дополнительные C# языки, кроме JavaScript F#, и Java. Функции, созданные на портале, предоставляют богатый синтаксис сценариев. Функции, созданные как автономные проекты, можно развернуть с помощью полной поддержки платформы и возможностей.

Дополнительные сведения см. в [документации по функциям Azure](https://docs.microsoft.com/azure/azure-functions).

## <a name="functions-v1-vs-v2"></a>Функции v1 и v2

Существует две версии среды выполнения функций Azure: 1. x и 2. x. Версия 1. x является общедоступной (GA). Она поддерживает разработку .NET на портале или на компьютерах Windows и использует .NET Framework. 1. x поддерживает C#, JavaScript и F#, с экспериментальной поддержкой Python, PHP, TypeScript, Batch, bash и PowerShell.

[Версия 2. x также доступна сейчас](https://azure.microsoft.com/blog/introducing-azure-functions-2-0/). Он использует .NET Core и поддерживает кросс-платформенную разработку на компьютерах под управлением Windows, macOS и Linux. 2. x добавляет поддержку первого класса для Java, но пока не поддерживает ни один из экспериментальных языков. Версия 2. x использует новую модель расширяемости привязки, которая обеспечивает сторонние расширения для платформы, независимые версии привязок и более рациональную среду выполнения.

> **Существует известная ошибка в 1. x с [поддержкой перенаправления привязки](https://github.com/Azure/azure-functions-host/issues/992).** Эта ошибка характерна для разработки .NET. Затрагиваются проекты с зависимостями от библиотек, версия которых отличается от библиотек, включенных в среду выполнения. Группа функций зафиксировала выполнение конкретных задач. Группа будет обращаться к перенаправлениям привязок в 2. x, прежде чем она станет общедоступной. Официальное заявление команды с предлагаемыми исправлениями и решениями можно найти здесь: [разрешение сборок в функциях Azure](https://github.com/Azure/azure-functions-host/wiki/Assembly-Resolution-in-Azure-Functions).

Дополнительные сведения см. в разделе [Сравнение 1. x и 2. x](https://docs.microsoft.com/azure/azure-functions/functions-versions).

## <a name="programming-language-support"></a>Поддержка языков программирования

Следующие языки поддерживаются в общедоступной версии (GA), предварительном или экспериментальном.

|Язык      |преобразования         |2.x      |
|--------------|------------|---------|
|**C#**        |ОБЩЕДОСТУПНОЙ версии          |Предпросмотр  |
|**JavaScript**|ОБЩЕДОСТУПНОЙ версии          |Предпросмотр  |
|**F#**        |ОБЩЕДОСТУПНОЙ версии          |         |
|**Java**      |            |Предпросмотр  |
|**Python**    |Экспериментальный|         |
|**ТИПЫ**       |Экспериментальный|         |
|**TypeScript**|Экспериментальный|         |
|**Batch**     |Экспериментальный|         |
|**Bug**      |Экспериментальный|         |
|**PowerShell**|Экспериментальный|         |

Дополнительные сведения см. в разделе [Поддерживаемые языки](https://docs.microsoft.com/azure/azure-functions/supported-languages).

## <a name="app-service-plans"></a>Планы службы приложений

Функции поддерживаются *планом службы приложений*. План определяет ресурсы, используемые приложением функций. Можно назначить планы для региона, определить размер и количество используемых виртуальных машин, а также выбрать ценовую категорию. Для истинного бессерверного подхода в приложениях-функциях может использоваться план **потребления** . План потребления будет автоматически масштабировать серверную части в зависимости от нагрузки.

Дополнительные сведения см. в статье [планы службы приложений](https://docs.microsoft.com/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview).

## <a name="create-your-first-function"></a>Создание первой функции

Существует три стандартных способа создания приложений для работы с функциями.

- Создание скриптов для функций на портале.
- Создайте необходимые ресурсы с помощью интерфейса командной строки Azure (CLI).
- Создавайте функции локально с помощью избранной интегрированной среды разработки и публикуйте их в Azure.

Дополнительные сведения о создании функции с помощью скрипта на портале см. в разделе [Создание первой функции в портал Azure](https://docs.microsoft.com/azure/azure-functions/functions-create-first-azure-function).

Чтобы выполнить сборку из Azure CLI, см. раздел [Создание первой функции с помощью Azure CLI](https://docs.microsoft.com/azure/azure-functions/functions-create-first-azure-function-azure-cli).

Сведения о создании функции из Visual Studio см. в статье [Создание первой функции с помощью Visual Studio](https://docs.microsoft.com/azure/azure-functions/functions-create-your-first-function-visual-studio).

## <a name="understand-triggers-and-bindings"></a>Общие сведения о триггерах и привязках

Функции вызываются *триггером* и могут иметь ровно один. В дополнение к вызову функции определенные триггеры также служат в качестве привязок. Кроме триггера, в дополнение к нему можно определить несколько привязок. *Привязки* обеспечивают декларативный способ подключения данных к коду. Они могут передаваться (входные) или получать данные (Output). Триггеры и привязки упрощают работу с функциями. Привязки изменяют затраты на создание соединений базы данных или файловой системы вручную. Вся информация, необходимая для привязок, содержится в специальном файле *functions. JSON* для скриптов или объявленных с атрибутами в коде.

Ниже перечислены некоторые распространенные триггеры.

- Хранилище BLOB-объектов: вызовите функцию, когда файл или папка передаются или изменяются в хранилище.
- HTTP: вызовите функцию, например REST API.
- Queue: вызов функции при наличии элементов в очереди.
- Timer: вызывайте функцию с постоянным ритмичей.

Ниже приведены примеры привязок.

- CosmosDB: простое подключение к базе данных для загрузки или сохранения файлов.
- Хранилище таблиц. Работа с хранилищем "ключ — значение" из приложения-функции.
- Хранилище очередей: легко извлекать элементы из очереди или размещать новые элементы в очереди.

В следующем примере файла *functions. JSON* определяется триггер и привязка:

```json
{
  "bindings": [
    {
      "name": "myBlob",
      "type": "blobTrigger",
      "direction": "in",
      "path": "images/{name}",
      "connection": "AzureWebJobsStorage"
    },
    {
      "name": "$return",
      "type": "queue",
      "direction": "out",
      "queueName": "images",
      "connection": "AzureWebJobsStorage"
    }
  ],
  "disabled": false
}
```

В этом примере функция активируется изменением в хранилище BLOB-объектов в контейнере @no__t – 0. Информация для файла передается, поэтому триггер также выступает в качестве привязки. Существует другая привязка для размещения информации в очереди с именем `images`.

Ниже приведен C# скрипт для функции:

```csharp
public static string Run(Stream myBlob, string name, TraceWriter log)
{
    log.Info($"C# Blob trigger function Processed blob\n Name:{name} \n Size: {myBlob.Length} Bytes");
    return name;
}
```

Этот пример представляет собой простую функцию, которая принимает имя файла, который был изменен или передан в хранилище BLOB-объектов, и помещает его в очередь для последующей обработки.

Полный список триггеров и привязок см. в статье [Основные понятия триггеров и привязок в функциях Azure](https://docs.microsoft.com/azure/azure-functions/functions-triggers-bindings).

## <a name="proxies"></a>Прокси-элементы

Прокси-серверы предоставляют функции перенаправления для приложения. Прокси-серверы предоставляют конечную точку и сопоставляют эту конечную точку с другим ресурсом. С помощью учетных записей-посредников вы можете:

- Перенаправляет входящий запрос на другую конечную точку.
- Измените входящий запрос, прежде чем он будет передан.
- Изменение или предоставление ответа.

Прокси-серверы используются в следующих сценариях:

- Упрощение, сокращение или изменение URL-адреса.
- Обеспечение единообразного префикса API для нескольких служб серверной части.
- Имитация ответа на разрабатываемую конечную точку.
- Предоставление статического ответа на хорошо известную конечную точку.
- Поддержание соответствия конечной точки API во время перемещения или переноса серверной части.

Прокси-серверы хранятся как определения JSON. Пример:

```json
{
  "$schema": "http://json.schemastore.org/proxies",
  "proxies": {
    "Domain Redirect": {
      "matchCondition": {
        "route": "/{shortUrl}"
      },
      "backendUri": "http://%WEBSITE_HOSTNAME%/api/UrlRedirect/{shortUrl}"
    },
    "Root": {
      "matchCondition": {
        "route": "/"
      },
      "responseOverrides": {
        "response.statusCode": "301",
        "response.statusReason": "Moved Permanently",
        "response.headers.location": "https://docs.microsoft.com/"
      }
    }
  }
}
```

@No__t-0 прокси-сервер принимает сокращенный маршрут и сопоставляет его с более длинным ресурсом функции. Преобразование выглядит следующим образом:

`https://--shorturl--/123` -> `https://--longurl--.azurewebsites.net/api/UrlRedirect/123`

@No__t-0 прокси-сервер отправляет все данные корневому URL-адресу (`https://--shorturl--/`) и перенаправляет его на сайт документации.

Пример использования прокси-серверов показан в видео [Azure: перенос приложения в облако с помощью безсерверных функций Azure](https://channel9.msdn.com/events/Connect/2017/E102). В режиме реального времени приложение ASP.NET Core, работающее на локальном SQL Server, переносится в облако Azure. Прокси-серверы используются для рефакторинга традиционного проекта Web API для использования функций.

Дополнительные сведения об учетных записях-посредниках см. [в разделе Работа с прокси-серверы функций Azure](https://docs.microsoft.com/azure/azure-functions/functions-proxies).

>[!div class="step-by-step"]
>[Назад](azure-serverless-platform.md)
>[Вперед](application-insights.md)
