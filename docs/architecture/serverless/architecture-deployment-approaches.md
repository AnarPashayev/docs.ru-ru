---
title: Подходы к развертыванию архитектуры — бессерверные приложения
description: Рекомендации по различным способам развертывания корпоративных архитектур в облаке с сравнением IaaS, PaaS, контейнеров и бессерверных.
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: 4cc8442509fc8a0e2cc0eb797365423458e77684
ms.sourcegitcommit: 8a0fe8a2227af612f8b8941bdb8b19d6268748e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/03/2019
ms.locfileid: "71834341"
---
# <a name="architecture-deployment-approaches"></a>Подходы к развертыванию архитектуры

Независимо от подхода к архитектуре, используемому для проектирования бизнес-приложений, реализация или развертывание этих приложений могут отличаться. Компании размещают приложения на всех устройствах от физического оборудования до бессерверных функций.

## <a name="n-tier-applications"></a>N-уровневые приложения

[Шаблон N-уровневой архитектуры](https://docs.microsoft.com/azure/architecture/guide/architecture-styles/n-tier) — это развитая архитектура, которая просто относится к приложениям, которые разделяют различные логические уровни на отдельные физические уровни. N-уровневая архитектура — это физическая реализация N-уровневой архитектуры. Наиболее распространенная реализация этой архитектуры включает в себя:

* Уровень представления, например веб-приложение.
* API или уровень доступа к данным, например REST API.
* Уровень данных, например база данных SQL.

![N-уровневая архитектура](./media/n-tier-architecture.png)

N-уровневые решения имеют следующие характеристики.

* Проекты обычно согласовываются с уровнями.
* Тестирование может подходить по-разному для разных уровней.
* Уровни предоставляют уровни абстракции, например, уровень представления обычно игнорирующих сведениями о реализации уровня данных.
* Как правило, слои взаимодействуют только с соседними слоями.
* Выпуски часто управляются в проекте, и поэтому уровень. Для простого изменения API может потребоваться новый выпуск всего среднего уровня.

Этот подход дает несколько преимуществ, включая следующие:

* Изоляция базы данных (часто внешний интерфейс не имеет прямого доступа к серверной части базы данных).
* Повторное использование API (например, мобильные, классические и веб-приложения клиенты могут использовать одни и те же API).
* Возможность масштабирования уровней независимо друг от друга.
* Изоляция рефакторинга: один уровень может быть подвергнут рефакторингу без влияния на другие уровни.

## <a name="on-premises-and-infrastructure-as-a-service-iaas"></a>Локальная среда и инфраструктура как услуга (IaaS)

Традиционный подход к размещению приложений требует приобретения оборудования и управления всеми установками программного обеспечения, включая операционную систему. Изначально это требовало дорогостоящих центров обработки данных и физического оборудования. Проблемы, возникающие при работе с физическим оборудованием, являются многими, включая:

* Потребность в приобретении в условиях "только на случай" или в пиковом спросе.
* Обеспечение безопасности физического доступа к оборудованию.
* Ответственность за сбой оборудования (например, сбой диска).
* Воздух.
* Настройка маршрутизаторов и подсистем балансировки нагрузки.
* Избыточность питания.
* Защита доступа к программному обеспечению.

![Подход IaaS](./media/iaas-approach.png)

Виртуализация оборудования с помощью виртуальных машин позволяет реализовать инфраструктуру как услугу (IaaS). Хостовые компьютеры эффективно секционированы для предоставления ресурсов экземплярам с выделением памяти, ЦП и хранилища. Команда подготавливает необходимые виртуальные машины и настраивает связанные сети и доступ к хранилищу.

Дополнительные сведения см. в статье [Эталонная архитектура виртуальных машин N-Tier](https://docs.microsoft.com/azure/architecture/reference-architectures/virtual-machines-windows/n-tier).

Хотя виртуализация и инфраструктура как услуга (IaaS) устраняют многие проблемы, она по-прежнему несет значительную ответственность за группу разработчиков инфраструктуры. Группа поддерживает версии операционных систем, применяет исправления безопасности и устанавливает зависимости сторонних производителей на целевых компьютерах. Приложения часто ведут себя по-разному на рабочих компьютерах по сравнению с тестовой средой. Проблемы возникают из-за различных версий зависимости и/или номеров SKU ОС. Несмотря на то, что многие организации развертывают N-уровневые приложения на этих целевых объектах, многие компании получают преимущества от развертывания до более собственной облачной модели, такой как " [платформа как услуга](#platform-as-a-service-paas)". Архитектуры с микрослужбами являются более сложными из-за требований к масштабированию для эластичности и устойчивости.

Дополнительные сведения см. в статье [виртуальные машины](https://docs.microsoft.com/azure/virtual-machines/).

## <a name="platform-as-a-service-paas"></a>Платформа как услуга (PaaS)

Платформа как услуга (PaaS) предлагает настроенные решения, которые разработчики могут подключать напрямую. PaaS — еще один термин для управляемого размещения. Она устраняет необходимость в управлении базовой операционной системой, исправлениях безопасности и во многих случаях сторонних зависимостей. Примерами платформ являются веб-приложения, базы данных и серверные части для мобильных устройств.

PaaS решает проблемы, характерные для IaaS. PaaS позволяет разработчику сосредоточиться на коде или схеме базы данных, а не на том, как он будет развертываться. К преимуществам PaaS относятся:

* Оплата за использование моделей, устраняющих затраты на инвестиции на бездействующие компьютеры.
* Прямое развертывание и усовершенствованные конвейеры DevOps, непрерывной интеграции (CI) и непрерывной поставки (CD).
* Автоматическое обновление, обновления и исправления безопасности.
* Принудительное масштабирование и масштабирование (Эластичное масштабирование).

Основное преимущество PaaS традиционно было заблокировано поставщиком. Например, некоторые поставщики PaaS поддерживают только ASP.NET, Node. js или другие языки и платформы. Продукты, такие как служба приложений Azure, развиваются для решения нескольких платформ и поддерживают различные языки и платформы для размещения веб-приложений.

![Платформа как архитектура службы](./media/paas-architecture.png)

## <a name="software-as-a-service-saas"></a>Программное обеспечение как услуга (SaaS)

Программное обеспечение как услуга или SaaS централизованно размещено и доступно без локальной установки или подготовки. SaaS часто размещается на платформе PaaS как платформа для развертывания программного обеспечения. SaaS предоставляет службы для запуска и подключения к существующему программному обеспечению. SaaS часто является отраслевым и вертикальным. SaaS часто лицензируется и обычно предоставляет модель клиента/сервера. Большинство современных предложений SaaS используют веб-приложения для клиента. Компании обычно считают SaaS бизнес-решением для предложений лицензий. Она часто не реализуется как архитектура для масштабируемости и обслуживания приложения. Действительно, большинство решений SaaS основано на сборках IaaS, PaaS и (или) серверной части.

Дополнительные сведения о SaaS см. в [примере приложения](https://docs.microsoft.com/azure/sql-database/saas-tenancy-welcome-wingtip-tickets-app).

## <a name="containers-and-functions-as-a-service-faas"></a>Контейнеры и функции как услуга (FaaS)

Контейнеры — это интересное решение, которое обеспечивает преимущества, сходные с PaaS, без дополнительных издержек IaaS. Контейнер — это, по сути, среда выполнения, которая содержит основные компоненты, необходимые для запуска уникального приложения. Ядро или ядро операционной системы узла и службы, такие как хранилище, являются общими для узла. Общий ядро обеспечивает упрощение контейнеров (некоторые из них представляют собой довольно мегабайты по сравнению с объемом стандартных виртуальных машин в гигабайтах). Если узлы уже запущены, контейнеры можно быстро запустить, что обеспечивает высокий уровень доступности. Возможность быстро создавать контейнеры также предоставляет дополнительные уровни устойчивости. DOCKER — одна из наиболее популярных реализаций контейнеров.

Ниже перечислены преимущества контейнеров.

* Упрощенные и переносимые
* Автономно, поэтому нет необходимости устанавливать зависимости
* Обеспечить единообразную среду независимо от узла (выполняется точно так же на ноутбуке, как на облачном сервере)
* Можно быстро подготовить для горизонтального масштабирования
* Можно быстро перезапустить для восстановления после сбоя

Контейнер выполняется на узле контейнера (который, в свою очередь, может выполняться на компьютере без операционной системы или виртуальной машине). На одном узле может выполняться несколько контейнеров или экземпляров одного и того же контейнера. Для истинной отработки отказа и устойчивости контейнеры должны масштабироваться на разных узлах.

Дополнительные сведения о контейнерах DOCKER см. в разделе [что такое DOCKER](../microservices/container-docker-introduction/docker-defined.md).

Для управления контейнерами на узлах обычно требуется средство оркестрации, такое как Kubernetes. Настройка решений оркестрации и управление ими может привести к дополнительным затратам и сложности проектов. К счастью, многие поставщики облачных услуг предоставляют службы оркестрации с помощью решений PaaS для упрощения управления контейнерами.

На следующем рисунке показан пример установки Kubernetes. Узлы в адресе установки масштабируются и отработка отказа. Они запускают экземпляры контейнеров DOCKER, управляемые главным сервером. *Kubelet* — это клиент, который передает команды из Kubernetes в DOCKER.

![Kubernetes](./media/kubernetes-example.png)

Дополнительные сведения об оркестрации см. в разделе [Kubernetes в Azure](https://docs.microsoft.com/azure/aks/intro-kubernetes).

Функции как услуга (FaaS) — это специализированная служба контейнеров, похожая на бессерверную. Конкретная реализация FaaS, именуемая [OpenFaaS](https://github.com/openfaas/faas), располагается поверх контейнеров для предоставления бессерверных возможностей. OpenFaaS предоставляет шаблоны, которые упаковывают все зависимости контейнеров, необходимые для выполнения фрагмента кода. Использование шаблонов упрощает процесс развертывания кода как функционального блока. OpenFaaS нацелены на архитектуры, которые уже содержат контейнеры и оркестрации, поскольку могут использовать существующую инфраструктуру. Хотя он обеспечивает бессерверную функциональность, он специально требует использования DOCKER и Orchestrator.

## <a name="serverless"></a>Бессерверных

Бессерверная архитектура обеспечивает четкое разделение между кодом и средой размещения. Код реализуется в *функции* , которая вызывается *триггером*. После выхода этой функции все необходимые ресурсы могут быть освобождены. Триггер может быть ручным, процессом с превышением времени, HTTP-запросом или передачей файла. Результатом этого триггера является выполнение кода. Несмотря на то что бессерверные платформы различаются, большинство предоставляют доступ к предварительно определенным API и привязкам для упрощения задач, таких как запись в базу данных или результаты очередей.

Бессерверность — это архитектура, которая сильно зависит от абстракции среды размещения, чтобы сосредоточиться на коде. Его можно рассматривать как *меньший сервер*.

Решения для контейнеров предоставляют разработчикам существующие сценарии сборки для публикации кода на изображениях, готовых для бессерверных систем. Другие реализации используют существующие решения PaaS для обеспечения масштабируемой архитектуры.

Абстракция означает, что команде DevOps не нужно подготавливать или администрировать серверы или отдельные контейнеры. Серверная платформа размещает код в виде скрипта или упакованных исполняемых файлов, созданных с помощью соответствующего пакета SDK, и выделяет необходимые ресурсы для масштабирования кода.

На следующем рисунке показаны четыре несерверных компонента. HTTP-запрос вызывает выполнение кода API извлечения. API извлечения вставляет код в базу данных, а инструкция INSERT запускает несколько других функций для выполнения таких задач, как вычислительные задачи и выполнение заказа.

![Бессерверная реализация](./media/serverless-implementation.png)

Ниже перечислены преимущества бессерверных служб.

* **Высокая плотность.** Многие экземпляры одного и того же бессерверного кода могут выполняться на одном узле по сравнению с контейнерами или виртуальными машинами. Масштабирование экземпляров на нескольких узлах масштабируется и устойчивость.
* **Микрооплата**. Поставщики бессерверных поставщиков выставляют счета на основе бессерверных выполнений, что обеспечивает значительную экономию затрат в определенных сценариях.
* **Мгновенное масштабирование**. Бессерверное масштабирование позволяет автоматически и быстро сопоставлять рабочие нагрузки.
* **Сокращение времени на рынок** Разработчики сосредоточены на коде и развертывают его непосредственно на бессерверной платформе. Компоненты можно освободить независимо друг от друга.

Бессерверные вопросы чаще всего обсуждаются в контексте вычислений, но также могут применяться к данным. Например, [Azure SQL](https://docs.microsoft.com/azure/sql-database) и [Cosmos DB](https://docs.microsoft.com/azure/cosmos-db) предоставляют облачные базы данных, которые не нуждаются в настройке компьютеров или кластеров узлов. Эта книга посвящена бессерверным расчетам.

## <a name="summary"></a>Сводка

Существует широкий спектр доступных вариантов архитектуры, включая гибридный подход. Бессерверные решения упрощают подход, управление и стоимость функций приложений за счет контроля и переносимости. Однако многие несерверные платформы предоставляют конфигурацию, позволяющую точно настроить решение. Хорошие методики программирования также могут привести к более переносимому коду и меньшему времени блокировки бессерверных платформ. В следующей таблице показаны параллельные архитектуры. Выберите бессерверные запросы в зависимости от потребностей масштабирования, независимо от того, требуется ли управлять средой выполнения, а также как можно разбить рабочие нагрузки на небольшие компоненты. В следующей главе вы узнаете о потенциальных проблемах с сервером и другими точками принятия решений.

|         |IaaS     |PaaS     |Контейнер|Бессерверных|
|---------|---------|---------|---------|----------|
|**Масштаб**|МАШИНУ       |Экземпляр |Приложение      |Функция  |
|**Абстрагирует**|Оборудование|Платформа|Узел ОС|Среда выполнения   |
|**Модульных** |МАШИНУ       |Проект  |Image    |Код      |
|**Время существования**|месяц|Дни в месяцы|Минуты по дням|От миллисекунд до минут|
|**Несет**|Приложения, зависимости, среда выполнения и операционная система|Приложения и зависимости|Приложения, зависимости и среда выполнения|Функция

* **Шкала** относится к единице, используемой для масштабирования приложения.
* **Абстракции** относится к слою, абстрактному в реализации
* **Единица** относится к области развертывания.
* **Время существования** относится к типичной среде выполнения конкретного экземпляра
* **Ответственность** — это затраты на сборку, развертывание и обслуживание приложения.

В следующей главе основное внимание уделяется бессерверной архитектуре, вариантам использования и шаблонам проектирования.

## <a name="recommended-resources"></a>Рекомендуемые ресурсы

* [Рекомендации по архитектуре приложений Azure](https://docs.microsoft.com/azure/architecture/guide/)
* [Azure Cosmos DB](https://docs.microsoft.com/azure/cosmos-db)
* [SQL Azure](https://docs.microsoft.com/azure/sql-database)
* [Шаблон N-уровневой архитектуры](https://docs.microsoft.com/azure/architecture/guide/architecture-styles/n-tier)
* [Kubernetes в Azure](https://docs.microsoft.com/azure/aks/intro-kubernetes)
* [Микрослужб](https://docs.microsoft.com/azure/architecture/guide/architecture-styles/microservices)
* [Эталонная архитектура N-уровневого уровня виртуальной машины](https://docs.microsoft.com/azure/architecture/reference-architectures/virtual-machines-windows/n-tier)
* [Виртуальные машины](https://docs.microsoft.com/azure/virtual-machines/)
* [Что такое Docker?](../microservices/container-docker-introduction/docker-defined.md)
* [Приложение SaaS Wingtip Tickets](https://docs.microsoft.com/azure/sql-database/saas-tenancy-welcome-wingtip-tickets-app)

>[!div class="step-by-step"]
>[Назад](architecture-approaches.md)
>[Вперед](serverless-architecture.md)
