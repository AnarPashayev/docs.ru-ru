---
title: Распространенные клиентские веб-технологии
description: Разработка современных веб-приложений с помощью ASP.NET Core и Azure | Распространенные клиентские веб-технологии
author: ardalis
ms.author: wiwagn
ms.date: 01/30/2019
ms.openlocfilehash: 0e5f3578edc723e2e2a32b9b3a1d8a7dcabd2909
ms.sourcegitcommit: feb42222f1430ca7b8115ae45e7a38fc4a1ba623
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/02/2020
ms.locfileid: "76965754"
---
# <a name="common-client-side-web-technologies"></a>Распространенные клиентские веб-технологии

> "Веб-сайты должны выглядеть одинаково хорошо как изнутри, так и снаружи".  
> _— Пол Куксон (Paul Cookson)_

Приложения ASP.NET Core являются веб-приложениями и обычно используют располагающиеся на стороне клиента веб-технологии, такие как HTML, CSS и JavaScript. Разделяя содержимое страницы (HTML), ее макет и стиль (CSS), а также поведение (JavaScript), сложные веб-приложения реализуют принцип разделения задач. Если эти задачи не связаны друг с другом, это значительно упрощает последующие изменения структуры, проекта или поведения приложения.

В отличие от относительно устоявшихся сегментов HTML и CSS, JavaScript активно развивается усилиями разработчиков платформ приложений и служебных программ, которые работают с веб-приложениями. В этой главе рассматривается несколько способов использования JavaScript, которые веб-разработчики применяют при разработке приложений, а также приводится обзор клиентских библиотек Angular и React.

## <a name="html"></a>HTML

HTML — это стандартный язык разметки, используемый для создания веб-страниц и веб-приложений. Его элементы определяют стандартные блоки страниц, а также представляют форматированный текст, изображения, формы ввода данных и другие структуры. Когда браузер направляет запрос URL-адреса для получения страницы или приложения, в первую очередь возвращается HTML-документ. Этот HTML-документ может содержать ссылку или дополнительные сведения об оформлении или макете в виде CSS, а также о поведении в виде JavaScript.

## <a name="css"></a>CSS

Каскадные таблицы стилей (CSS) определяют оформление и макет элементов HTML. Стили CSS могут применяться непосредственно к элементу HTML, отдельно определяться на той же странице или определяться в отдельном файле, ссылка на который будет задаваться на странице. Каскад стилей определяется на основе того, как они используются для выбора конкретного элемента HTML. Например, стиль может применяться ко всему документу и при необходимости переопределяться стилем отдельного элемента. Таким же образом стиль элемента можно переопределить стилем, применяемым к классу CSS элемента, который, в свою очередь, может переопределяться стилем, применяемым к конкретному экземпляру элемента по его идентификатору. Рис. 6-1

![Правила, определяющие CSS](./media/image6-1.png)

**Рис. 6-1.** Правила, определяющие порядок применения CSS.

Стили рекомендуется хранить в отдельных файлах таблиц стилей и использовать основанные на выборе каскадные функции для согласованного применения стилей в рамках приложения. Не следует помещать стили в HTML. Кроме того, применение стилей к отдельным элементам (вместо классов элементов или элементов, к которым применяется конкретный класс CSS) должно осуществляться лишь в качестве исключения.

### <a name="css-preprocessors"></a>Препроцессоры CSS

Таблицы стилей CSS не поддерживают условную логику, переменные и другие возможности языка программирования. Таким образом, крупные таблицы стилей часто содержат повторы, поскольку одни и те же цвета, шрифты и другие параметры могут применяться к различным элементам HTML и классам CSS. Применение препроцессоров для таблиц стилей CSS позволяет обеспечить соблюдение [принципа "Не повторяйся"](https://deviq.com/don-t-repeat-yourself/) за счет добавления поддержки переменных и логики.

Самыми популярными препроцессорами CSS являются Sass и LESS. Оба этих решения расширяют возможности таблиц стилей CSS и обеспечивают обратную совместимость с ними. Это значит, что обычный CSS-файл может открываться для работы в Sass или LESS. Sass и LESS разработаны соответственно на Ruby и JavaScript и обычно используются в рамках локального процесса разработки. Оба этих решения предлагают средства командной строки и встроенную поддержку выполнения в Visual Studio с помощью задач Gulp или Grunt.

## <a name="javascript"></a>JavaScript

JavaScript — это динамически интерпретируемый язык программирования, который был стандартизирован в спецификации ECMAScript. Это язык программирования для Интернета. Как и CSS, JavaScript может определяться в качестве атрибутов в элементах HTML, в виде блоков скрипта на странице, а также в отдельных файлах. Как и в случае с CSS, в большинстве случаев рекомендуется хранить код JavaScript в отдельных файлах, что позволяет в максимальной степени отделить его от кода HTML, который содержится на отдельных веб-страницах или в представлениях приложения.

При работе с JavaScript в веб-приложении обычно требуется выполнять ряд задач:

- Выбор элемента HTML и получение или обновление его значения.

- Запрос данных в веб-API.

- Отправка команды в веб-API (и ответ на функцию обратного вызова с его результатами).

- Выполнение проверки.

Эти задачи можно выполнять с помощью только JavaScript, однако вы также можете использовать множество готовых библиотек, позволяющих значительно упростить это. Одной из первых и самых популярных библиотек является jQuery, которая по-прежнему широко применяется для упрощения выполнения этих задач при работе с веб-страницами. Библиотека jQuery содержит немного возможностей для работы с одностраничными приложениями, поэтому в таких сценариях лучше использовать Angular и React.

### <a name="legacy-web-apps-with-jquery"></a>Устаревшие веб-приложения с jQuery

Несмотря на почтенный по меркам платформ JavaScript возраст, библиотека jQuery по-прежнему широко применяется для работы с HTML/CSS и создания приложений, выполняющих вызовы AJAX к веб-API. Тем не менее jQuery работает на уровне модели DOM браузера и по умолчанию использует только императивную, а не декларативную модель.

Рассмотрим пример, в котором при значении текстового поля больше 10 должен отображаться элемент на странице. В jQuery для этого обычно требуется написать обработчик события с кодом, который проверяет значение текстового поля и на его основе задает видимость целевого элемента. Это императивный подход на основе кода. На другой платформе в таком сценарии может применяться декларативная привязка состояния видимости элемента к значению текстового поля. В этом случае не требуется писать код и достаточно декорировать нужные элементы с использованием атрибутов привязки данных. В связи с усложнением поведения на стороне клиента подходы, основанные на привязке данных, все чаще позволяют получить более простые решения с меньшим объемом кода и менее сложной условной логикой.

### <a name="jquery-vs-a-spa-framework"></a>Сравнение jQuery и SPA Framework

| **Фактор** | **jQuery** | **Angular**|
|--------------------------|------------|-------------|
| Абстракция модели DOM | **Да** | **Да** |
| Поддержка AJAX | **Да** | **Да** |
| Декларативная привязка данных | **No** | **Да** |
| Маршрутизация в стиле MVC | **No** | **Да** |
| Использование шаблонов | **No** | **Да** |
| Маршрутизация по прямым ссылкам | **No** | **Да** |

Большинство возможностей, которые отсутствуют в jQuery, можно реализовать посредством других библиотек. Тем не менее на платформах одностраничных приложений, таких как SPA, эти функции реализованы более согласованно, поскольку все они изначально учитывались при разработке. Кроме того, библиотека jQuery является императивной. Это означает, что для выполнения любых задач jQuery вам требуется вызывать функции jQuery. При этом большинство задач и функций, предоставляемых платформами одностраничных приложений, могут быть реализованы декларативно и не требуют написания кода.

Отличным примером этого является привязка данных. В jQuery для получения или установки значения элемента DOM обычно требуется всего одна строка. Тем не менее вам приходится писать этот код каждый раз, когда вам необходимо изменить значение элемента, а это может происходить сразу в нескольких функциях на одной странице. В качестве наглядного примера также можно привести управление видимостью элементов. В jQuery для настройки видимости определенных элементов может потребоваться написание кода во многих местах. В каждом из этих случаев при использовании привязки данных писать код не требуется. Вам достаточно привязать значения или состояния видимости нужных элементов к *модели представления* на странице, после чего изменения в этой модели будут автоматически отражаться в привязанных элементах.

### <a name="angular-spas"></a>Одностраничные приложения Angular

AngularJS достаточно быстро стала одной из самых популярных в мире платформ JavaScript. В версии Angular 2 платформа была перестроена с нуля с использованием [TypeScript](https://www.typescriptlang.org/), после чего наименование AngularJS было заменено на Angular. На данный момент платформа Angular имеет версию 4 и остается одной из самых надежных платформ для построения одностраничных приложений.

Приложения Angular состоят из компонентов. Компоненты содержат шаблоны HTML в сочетании со специальными объектами и служат для управления отдельными частями страницы. Ниже показан простой компонент из документации Angular:

```js
import { Component } from '@angular/core';

@Component({
    selector: 'my-app',
    template: `<h1>Hello {{name}}</h1>`
})

export class AppComponent { name = 'Angular'; }
```

Компоненты определяются с помощью функции декоратора @Component, которая принимает метаданные компонента. Свойство селектора определяет идентификатор элемента на странице, в котором будет отображаться этот компонент. Свойство шаблона представляет собой простой шаблон HTML с заполнителем, который соответствует свойству имени компонента, определенному в последней строке.

Работая с компонентами и шаблонами вместо элементов DOM, приложения Angular могут действовать на более высоком уровне абстракции с меньшим объемом кода по сравнению с приложениями, которые используют только JavaScript (базовый JS) или библиотеку jQuery. Angular также задает определенные способы организации файлов скриптов на стороне клиента. По соглашению приложения Angular используют общую структуру папок, в которой файлы модуля и скрипта компонента располагаются в папке приложения. Скрипты Angular, используемые при построении, развертывании и тестировании приложения, обычно располагаются в папке более высокого уровня.

Приложения Angular можно разрабатывать с помощью CLI. Чтобы начать локальную разработку с помощью Angular (для этого требуется предварительная установка Git и npm), достаточно клонировать репозиторий из GitHub и выполнить команды `npm install` и `npm start`. Кроме того, в состав Angular входит собственный CLI, который позволяет создавать проекты, добавлять файлы и помогает выполнять задачи тестирования, объединения в пакеты и развертывания. Высокий уровень поддержки CLI обеспечивает хорошую совместимость Angular с ASP.NET Core, где реализована поддержка CLI аналогичного уровня.

Корпорация Майкрософт предлагает справочное приложение [eShopOnContainers](https://aka.ms/MicroservicesArchitecture), которое содержит реализацию одностраничного приложения Angular. Это приложение содержит модули Angular для управления корзиной покупок в интернет-магазине, загрузки и отображения элементов из каталога магазина, а также для обработки процесса создания заказа. Пример приложения можно просмотреть и скачать на сайте [GitHub](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/Web/WebSPA).

### <a name="react"></a>React

В отличие от Angular, где представлена полноценная реализация шаблона "модель-представление-контроллер", React предназначен только для работы с представлениями. Это решение представляет собой не платформу, а обычную библиотеку, поэтому для построения одностраничного приложения вам потребуются дополнительные библиотеки.

Важной особенностью React является использование виртуальной модели DOM. Виртуальная модель DOM в React дает целый ряд преимуществ, в том числе производительность (виртуальная модель DOM может оптимизировать процесс обновления отдельных частей реальной модели DOM) и тестируемость (возможность тестировать библиотеку React и ее взаимодействие с такой виртуальной моделью DOM без использования браузера).

Кроме того, React реализует непривычный способ работы с HTML. Вместо строгого разделения между кодом и разметкой (например, со ссылками JavaScript в атрибутах HTML) React добавляет HTML непосредственно в код JavaScript в виде JSX. JSX — это синтаксис в стиле HTML, который может компилироваться в чистый код JavaScript. Пример:

```js
<ul>
{ authors.map(author =>
    <li key={author.id}>{author.name}</li>
)}
</ul>
```

Если вы уже знакомы с JavaScript, изучить React будет легко. В отличие от Angular или других популярных библиотек, вам не придется знакомиться с кардинально новыми возможностями или особым синтаксисом.

Поскольку React не является полноценной платформой, для реализации таких возможностей, как маршрутизация, вызовы веб-API и управление зависимостями, вам могут потребоваться другие библиотеки. Вы можете выбрать наиболее подходящую из представленных библиотек, однако недостатком является то, что вам необходимо принимать все эти решения и проверять корректность совместной работы выбранных библиотек после завершения. В качестве отправной точки вы можете использовать начальный набор, например React Slingshot, в состав которого входит комплект совместимых библиотек и React.

### <a name="choosing-a-spa-framework"></a>Выбор платформы одностраничных приложений

При выборе оптимальной платформы JavaScript для поддержки одностраничных приложений необходимо ответить на следующие вопросы:

- Знакома ли ваша команда с платформой и ее зависимостями (включая TypeScript в некоторых случаях)?

- Насколько обособлена эта платформа и устраивает ли вас принятый для нее по умолчанию способ реализации различных задач?

- Включает ли платформа (или вспомогательная библиотека для нее) все возможности, которые использует ваше приложение?

- Хорошо ли это задокументировано?

- Насколько активно сообщество платформы? Используется ли платформа для создания новых проектов?

- Насколько активна основная команда разработчиков платформы? Решаются ли возникающие проблемы и насколько регулярно выпускаются новые версии?

Развитие платформы JavaScript продолжается семимильными шагами. Приведенные выше рекомендации помогут вам снизить риск неправильного выбора платформы, о котором вы можете пожалеть впоследствии. В особо ответственных случаях следует рассмотреть платформы, которые имеют коммерческую поддержку или разрабатываются крупными предприятиями.

> ### <a name="references--client-web-technologies"></a>Ссылки — клиентские веб-технологии
>
> - **HTML и CSS**  
> <https://www.w3.org/standards/webdesign/htmlcss>
> - **Сравнение Sass и LESS**  
> <https://www.keycdn.com/blog/sass-vs-less/>
> - **Задание стиля приложений ASP.NET Core с помощью LESS, Sass и Font Awesome**  
> <https://docs.microsoft.com/aspnet/core/client-side/less-sass-fa>
> - **Клиентская разработка в ASP.NET Core**  
> <https://docs.microsoft.com/aspnet/core/client-side/>
> - **jQuery**  
> <https://jquery.com/>
> - **Сравнение jQuery и AngularJS**  
> <https://www.airpair.com/angularjs/posts/jquery-angularjs-comparison-migration-walkthrough>
> - **Angular**  
> <https://angular.io/>
> - **React**  
> <https://facebook.github.io/react/>
> - **React Slingshot**  
> <https://github.com/coryhouse/react-slingshot>
> - **Сравнение React и Angular 2**  
> <https://www.codementor.io/codementorteam/react-vs-angular-2-comparison-beginners-guide-lvz5710ha>
> - **5 лучших платформ JavaScript в 2017 году**  
> <https://hackernoon.com/5-best-javascript-frameworks-in-2017-7a63b3870282>

>[!div class="step-by-step"]
>[Назад](common-web-application-architectures.md)
>[Вперед](develop-asp-net-core-mvc-apps.md)
