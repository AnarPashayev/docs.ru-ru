---
title: Процесс разработки для Azure
description: Разработка современных веб-приложений с помощью ASP.NET Core и Azure | Процесс разработки для Azure
author: ardalis
ms.author: wiwagn
ms.date: 12/01/2020
ms.openlocfilehash: 2706a4091565e6f3cb795acf031a238ae55a1068
ms.sourcegitcommit: 45c7148f2483db2501c1aa696ab6ed2ed8cb71b2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/08/2020
ms.locfileid: "96851631"
---
# <a name="development-process-for-azure"></a>Процесс разработки для Azure

> _"Благодаря облаку частные лица и небольшие компании могут практически мгновенно получить доступ к услугам корпоративного класса"._  
> _— Рой Стефан (Roy Stephan)_

## <a name="vision"></a>Концепция

> *Разрабатывайте эффективные приложения ASP .NET Core любым удобным способом, используя Visual Studio или dotnet CLI и Visual Studio Code или подходящий вам редактор.*

## <a name="development-environment-for-aspnet-core-apps"></a>Среда разработки приложений ASP.NET Core

### <a name="development-tools-choices-ide-or-editor"></a>Выбор средств разработки: интегрированная среда разработки или редактор

Предпочитаете ли вы использовать полнофункциональную среду IDE или упрощенный редактор, корпорация Майкрософт предлагает вам удобное решение для разработки приложений ASP.NET Core.

**Visual Studio 2019**. Visual Studio 2019 — это лучшая в своем классе интегрированная среда для разработки приложений для ASP.NET Core. Она предоставляет ряд функций, повышающих производительность разработчиков. С ее помощью можно разработать приложение, а затем проанализировать его производительность и другие характеристики. Интегрированный отладчик позволяет приостанавливать выполнение кода и переходить на шаг назад или вперед по коду во время его выполнения. Встроенное средство тестирования позволяет организовывать тесты и их результаты, а также выполнять динамическое модульное тестирование во время написания кода. С помощью Live Share вы можете сотрудничать с другими разработчиками в режиме реального времени, совместно работая в сеансе кода по сети. И когда все будет готово, Visual Studio будет содержать все, что необходимо для публикации приложения в Azure или в любом другом месте, где вы можете разместить его.

[Скачивание Visual Studio 2019](https://aka.ms/vsdownload?utm_source=mscom&utm_campaign=msdocs)

**Visual Studio Code и dotnet CLI** (кроссплатформенные средства для Mac, Linux и Windows). Если вам нужен упрощенный кроссплатформенный редактор, поддерживающий любой язык программирования, вы можете использовать Microsoft Visual Studio Code и dotnet CLI. Эти решения обеспечивают простой, но в то же время эффективный рабочий процесс разработки. Кроме того, Visual Studio Code поддерживает расширения для C\# и веб-разработки с функциями IntelliSense и ярлыками задач в редакторе.

[Скачать пакет SDK для .NET](https://dotnet.microsoft.com/download)

[Скачать Visual Studio Code](https://code.visualstudio.com/download)

## <a name="development-workflow-for-azure-hosted-aspnet-core-apps"></a>Рабочий процесс разработки приложений ASP.NET Core, размещаемых в Azure

Жизненный цикл разработки приложений начинается на компьютере каждого разработчика, где разработчик локально пишет код приложения на предпочитаемом языке и тестирует его. Разработчики могут выбирать удобную для них систему управления версиями и настраивать процессы непрерывной интеграции, непрерывной поставки или непрерывного развертывания с использованием сервера сборки или встроенных возможностей Azure.

Чтобы начать разработку приложения ASP.NET Core с поддержкой CI/CD, вы можете использовать Azure DevOps Services или собственный сервер Team Foundation Server (TFS) организации.

### <a name="initial-setup"></a>Начальная настройка

Чтобы создать конвейер выпуска для приложения, вам необходимо добавить его код в систему управления версиями. Настройте локальный репозиторий и подключите его к удаленному репозиторию в командном проекте. Следуйте указаниям, приведенным ниже:

- [Предоставьте общий доступ к своему коду в Git и Visual Studio](/azure/devops/git/share-your-code-in-git-vs) или

- [Предоставьте общий доступ к своему коду в TFVC и Visual Studio](/azure/devops/tfvc/share-your-code-in-tfvc-vs)

Создайте службу приложений Azure, в которой будет развертываться ваше приложение. Создайте веб-приложение, для чего перейдите в колонку "Службы приложений" на портале Azure. Нажмите "+Добавить", выберите шаблон веб-приложения, щелкните "Создать" и укажите имя и другие сведения. Веб-приложение будет доступно по адресу {name}.azurewebsites.net.

![AzureWebApp](./media/image10-2.png)

**Рис. 10-1.** Создание нового веб-приложения службы приложений Azure на портале Azure.

Процесс непрерывной интеграции будет выполнять автоматическую сборку каждый раз при фиксации нового кода в системе управления версиями проекта. Этот процесс позволяет вам сразу же оценить возможность построения кода (и в идеале прохождения автоматических тестов), а также возможность его последующего развертывания. В результате сборки в рамках процесса непрерывной интеграции создается артефакт пакета веб-развертывания, который публикуется для использования процессом непрерывной поставки.

[Определение процесса сборки в рамках процесса непрерывной интеграции](/azure/devops/pipelines/ecosystems/dotnet-core)

Реализуйте непрерывную интеграцию, благодаря которой система будет добавлять сборку в очередь каждый раз, когда кто-либо из участников вашей команды фиксирует новый код. Протестируйте сборку и убедитесь, что в качестве одного из артефактов для нее создается пакет веб-развертывания.

После успешной сборки процесс непрерывной поставки будет развертывать результаты сборки непрерывной поставки в вашем веб-приложении Azure. Чтобы настроить этот шаг, необходимо создать и настроить *выпуск*, который будет выполнять развертывание в вашей Службе приложений Azure.

[Развертывание веб-приложения Azure](/azure/devops/pipelines/targets/webapp)

После настройки конвейера CI/CD для развертывания обновлений веб-приложения вам будет достаточно внести их и зафиксировать в системе управления версиями.

### <a name="workflow-for-developing-azure-hosted-aspnet-core-applications"></a>Рабочий процесс разработки приложений ASP.NET Core, размещаемых в Azure

После того как вы настроите учетную запись Azure и процесс непрерывной интеграции/непрерывной поставки, разрабатывать размещаемые в Azure приложения ASP.NET Core будет легко. Далее описываются общие шаги, которые обычно выполняются при построении приложения ASP.NET Core, размещаемого в службе приложений Azure в качестве веб-приложения, как показано на рис. 10-2.

![EndToEndDevDeployWorkflow](./media/image10-3.png)

**Рис. 10-2.** Пошаговый рабочий процесс построения приложений ASP.NET Core и их размещения в Azure

#### <a name="step-1-local-dev-environment-inner-loop"></a>Шаг 1. Внутренний цикл локальной среды разработки

Разработка приложения ASP.NET Core для развертывания в Azure не отличается от любого другого процесса разработки приложения. Вы можете использовать удобную для вас среду разработки, будь то Visual Studio 2019 или dotnet CLI и Visual Studio Code или другой предпочтительный редактор. Вы можете писать код, вносить изменения и проводить их отладку, выполнять автоматические тесты, а также локально фиксировать изменения в системе управления версиями до тех пор, пока окончательный вариант не будет готов для публикации в общедоступном репозитории системы управления версиями.

#### <a name="step-2-application-code-repository"></a>Шаг 2. Репозиторий кода приложения

Как только вы будете готовы поделиться своим кодом с командой, изменения необходимо перенести из локального репозитория системы управления версиями в общедоступный репозиторий команды. Если вы работаете над отдельной ветвью, этот шаг обычно подразумевает объединение вашего кода с общей ветвью (например, посредством [запроса на вытягивание](/azure/devops/git/pull-requests)).

#### <a name="step-3-build-server-continuous-integration-build-test-package"></a>Шаг 3. Сервер сборки: Непрерывная интеграция. Сборка, тестирование, упаковка

Новая сборка на сервере запускается каждый раз при фиксации изменений в общедоступном репозитории кода приложения. В рамках процесса непрерывной интеграции при сборке выполняется полная компиляция приложения и проводятся автоматические тесты, позволяющие убедиться в надлежащей работе всех функций. Конечным результатом процесса непрерывной интеграции должна быть упакованная и готовая к развертыванию версия веб-приложения.

#### <a name="step-4-build-server-continuous-delivery"></a>Шаг 4. Сервер сборки: Непрерывная доставка

После успешной сборки процесс непрерывной поставки выбирает полученные артефакты. Этот процесс будет включать пакет веб-развертывания. Сервер сборки выполнит развертывание этого пакета в службе приложений Azure, заменяя любую существующую службу вновь созданной. Как правило, этот процесс ориентирован на промежуточную среду, однако некоторые приложения в его рамках развертываются непосредственно в рабочей среде.

#### <a name="step-5-azure-app-service-web-app"></a>Шаг 5. Веб-приложение службы приложений Azure

После развертывания приложение ASP.NET Core выполняется в контексте веб-приложения службы приложений Azure. Дальнейшие мониторинг и настройка такого веб-приложения могут осуществляться с помощью портала Azure.

#### <a name="step-6-production-monitoring-and-diagnostics"></a>Шаг 6. Мониторинг и диагностика в рабочей среде

Во время работы веб-приложения вы можете осуществлять мониторинг его состояния и собирать данные по поведению пользователей и диагностическую информацию. Application Insights входит в состав Visual Studio и реализует автоматическое инструментирование приложений ASP.NET. С его помощью вы можете получить сведения об использовании, исключениях, запросах, производительности, а также содержимое журналов.

## <a name="references"></a>Ссылки

**Построение приложения ASP.NET Core и его развертывание в Azure**  
<https://docs.microsoft.com/azure/devops/build-release/apps/aspnet/build-aspnet-core>

>[!div class="step-by-step"]
>[Назад](test-asp-net-core-mvc-apps.md)
>[Вперед](azure-hosting-recommendations-for-asp-net-web-apps.md)
