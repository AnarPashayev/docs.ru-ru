---
title: Архитектура микрослужб
description: Архитектура микрослужб .NET для контейнерных приложений .NET | Архитектура микрослужб с высоты птичьего полета.
ms.date: 09/20/2018
ms.openlocfilehash: d1c58d218be9e5f8c0ae8ae732f9bdd06674a2c2
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/14/2020
ms.locfileid: "71834387"
---
# <a name="microservices-architecture"></a><span data-ttu-id="746cf-103">Архитектура микрослужб</span><span class="sxs-lookup"><span data-stu-id="746cf-103">Microservices architecture</span></span>

<span data-ttu-id="746cf-104">Само название предполагает, что архитектура микрослужб является подходом к созданию серверного приложения как набора малых служб,</span><span class="sxs-lookup"><span data-stu-id="746cf-104">As the name implies, a microservices architecture is an approach to building a server application as a set of small services.</span></span> <span data-ttu-id="746cf-105">Это означает, что архитектура микрослужб главным образом ориентирована на серверную часть, несмотря на то, что этот подход также используется для внешнего интерфейса.</span><span class="sxs-lookup"><span data-stu-id="746cf-105">That means a microservices architecture is mainly oriented to the back-end, although the approach is also being used for the front end.</span></span> <span data-ttu-id="746cf-106">где каждая служба выполняется в своем процессе и взаимодействует с остальными службами по таким протоколам, как HTTP/HTTPS, WebSockets или [AMQP](https://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol).</span><span class="sxs-lookup"><span data-stu-id="746cf-106">Each service runs in its own process and communicates with other processes using protocols such as HTTP/HTTPS, WebSockets, or [AMQP](https://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol).</span></span> <span data-ttu-id="746cf-107">Каждая микрослужба реализует специфические возможности в предметной области и свою бизнес-логику в рамках определенного ограниченного контекста, должна разрабатываться автономно и развертываться независимо.</span><span class="sxs-lookup"><span data-stu-id="746cf-107">Each microservice implements a specific end-to-end domain or business capability within a certain context boundary, and each must be developed autonomously and be deployable independently.</span></span> <span data-ttu-id="746cf-108">Наконец, у каждой микрослужбы должны быть соответствующие собственные модель данных и логика предметной области (владение и децентрализованное управление данными); для каждой микрослужбы могут применяться разные технологии хранилищ (SQL, NoSQL) и разные языки программирования.</span><span class="sxs-lookup"><span data-stu-id="746cf-108">Finally, each microservice should own its related domain data model and domain logic (sovereignty and decentralized data management) and could be based on different data storage technologies (SQL, NoSQL) and different programming languages.</span></span>

<span data-ttu-id="746cf-109">Каково размера должна быть микрослужба?</span><span class="sxs-lookup"><span data-stu-id="746cf-109">What size should a microservice be?</span></span> <span data-ttu-id="746cf-110">При разработке микрослужбы размер не должен быть важным фактором.</span><span class="sxs-lookup"><span data-stu-id="746cf-110">When developing a microservice, size shouldn't be the important point.</span></span> <span data-ttu-id="746cf-111">Главным должно быть создание слабо связанных служб, что позволяет добавиться автономности при разработке, развертывании и масштабировании каждой службы.</span><span class="sxs-lookup"><span data-stu-id="746cf-111">Instead, the important point should be to create loosely coupled services so you have autonomy of development, deployment, and scale, for each service.</span></span> <span data-ttu-id="746cf-112">Конечно же, при определении и проектировании микрослужб следует стремиться к тому, чтобы они были как можно меньше, если только они не имеют слишком много прямых зависимостей от других микрослужб.</span><span class="sxs-lookup"><span data-stu-id="746cf-112">Of course, when identifying and designing microservices, you should try to make them as small as possible as long as you don't have too many direct dependencies with other microservices.</span></span> <span data-ttu-id="746cf-113">Внутренняя связанность микрослужбы и ее независимость от других служб важнее ее размера.</span><span class="sxs-lookup"><span data-stu-id="746cf-113">More important than the size of the microservice is the internal cohesion it must have and its independence from other services.</span></span>

<span data-ttu-id="746cf-114">Почему следует использовать архитектуру микрослужб?</span><span class="sxs-lookup"><span data-stu-id="746cf-114">Why a microservices architecture?</span></span> <span data-ttu-id="746cf-115">Если говорить кратко, то это гибкость в долгосрочной перспективе.</span><span class="sxs-lookup"><span data-stu-id="746cf-115">In short, it provides long-term agility.</span></span> <span data-ttu-id="746cf-116">Микрослужбы обеспечивают превосходные возможности сопровождения в крупных комплексных системах с высокой масштабируемостью за счет создания приложений, основанных на множестве независимо развертываемых служб с автономными жизненными циклами.</span><span class="sxs-lookup"><span data-stu-id="746cf-116">Microservices enable better maintainability in complex, large, and highly-scalable systems by letting you create applications based on many independently deployable services that each have granular and autonomous lifecycles.</span></span>

<span data-ttu-id="746cf-117">Дополнительное преимущество в том, что микрослужбы можно масштабировать независимо.</span><span class="sxs-lookup"><span data-stu-id="746cf-117">As an additional benefit, microservices can scale out independently.</span></span> <span data-ttu-id="746cf-118">Вместо монолитного приложения, которое нужно масштабировать как единое целое, вы масштабируете отдельные микрослужбы.</span><span class="sxs-lookup"><span data-stu-id="746cf-118">Instead of having a single monolithic application that you must scale out as a unit, you can instead scale out specific microservices.</span></span> <span data-ttu-id="746cf-119">Тем самым можно масштабировать только функциональную область, требующую больше вычислительных или сетевых ресурсов, не затрагивая другие области приложения, которые на самом деле не нуждаются в масштабировании.</span><span class="sxs-lookup"><span data-stu-id="746cf-119">That way, you can scale just the functional area that needs more processing power or network bandwidth to support demand, rather than scaling out other areas of the application that don't need to be scaled.</span></span> <span data-ttu-id="746cf-120">Таким образом можно сократить расходы, так как требуется меньше оборудования.</span><span class="sxs-lookup"><span data-stu-id="746cf-120">That means cost savings because you need less hardware.</span></span>

![Схема различий между двумя методами развертывания.](./media/microservices-architecture/monolith-deployment-vs-microservice-approach.png)

<span data-ttu-id="746cf-122">**Рис. 4-6**.</span><span class="sxs-lookup"><span data-stu-id="746cf-122">**Figure 4-6**.</span></span> <span data-ttu-id="746cf-123">Монолитное развертывание в сравнении с подходом на основе микрослужб</span><span class="sxs-lookup"><span data-stu-id="746cf-123">Monolithic deployment versus the microservices approach</span></span>

<span data-ttu-id="746cf-124">Как показано на рис. 4-6, в традиционном монолитном подходе приложение масштабируется путем клонирования всего приложения на несколько серверов или виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="746cf-124">As Figure 4-6 shows, in the traditional monolithic approach, the application scales by cloning the whole app in several servers/VM.</span></span> <span data-ttu-id="746cf-125">В подходе с использованием микрослужб функциональные возможности изолируются в небольших службах, и каждую службу можно масштабировать независимо от других.</span><span class="sxs-lookup"><span data-stu-id="746cf-125">In the microservices approach, functionality is segregated in smaller services, so each service can scale independently.</span></span> <span data-ttu-id="746cf-126">Подход на основе микрослужб нацелен на гибкость изменений и ускорение последовательных улучшений каждой микрослужбы, так как вы получаете возможность изменять небольшие части крупных, комплексных и масштабируемых приложений.</span><span class="sxs-lookup"><span data-stu-id="746cf-126">The microservices approach allows agile changes and rapid iteration of each microservice, because you can change specific, small areas of complex, large, and scalable applications.</span></span>

<span data-ttu-id="746cf-127">Архитектура приложений на основе микрослужб позволяет применять принципы непрерывной интеграции и поставки.</span><span class="sxs-lookup"><span data-stu-id="746cf-127">Architecting fine-grained microservices-based applications enables continuous integration and continuous delivery practices.</span></span> <span data-ttu-id="746cf-128">Она ускоряет доставку новых функций в приложение.</span><span class="sxs-lookup"><span data-stu-id="746cf-128">It also accelerates delivery of new functions into the application.</span></span> <span data-ttu-id="746cf-129">Кроме того, разделение приложений на небольшие компоненты позволяет запускать и тестировать микрослужбы изолированно, а также развивать их независимо друг от друга, в то же время соблюдая строгие контракты их взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="746cf-129">Fine-grained composition of applications also allows you to run and test microservices in isolation, and to evolve them autonomously while maintaining clear contracts between them.</span></span> <span data-ttu-id="746cf-130">Пока контракты или интерфейсы не нарушаются, можно изменять внутреннюю реализацию любой микрослужбы и добавлять новую функциональность, не мешая работе других микрослужб.</span><span class="sxs-lookup"><span data-stu-id="746cf-130">As long as you don't change the interfaces or contracts, you can change the internal implementation of any microservice or add new functionality without breaking other microservices.</span></span>

<span data-ttu-id="746cf-131">Ниже перечислены важные аспекты успешного ввода системы на основе микрослужб в эксплуатацию:</span><span class="sxs-lookup"><span data-stu-id="746cf-131">The following are important aspects to enable success in going into production with a microservices-based system:</span></span>

- <span data-ttu-id="746cf-132">мониторинг и проверки работоспособности служб и инфраструктуры;</span><span class="sxs-lookup"><span data-stu-id="746cf-132">Monitoring and health checks of the services and infrastructure.</span></span>

- <span data-ttu-id="746cf-133">масштабируемая инфраструктура служб (то есть облако и оркестраторы);</span><span class="sxs-lookup"><span data-stu-id="746cf-133">Scalable infrastructure for the services (that is, cloud and orchestrators).</span></span>

- <span data-ttu-id="746cf-134">проектирование и реализация безопасности на разных уровнях: проверка подлинности, авторизация, управление секретами, безопасный обмен данными и т. д.;</span><span class="sxs-lookup"><span data-stu-id="746cf-134">Security design and implementation at multiple levels: authentication, authorization, secrets management, secure communication, etc.</span></span>

- <span data-ttu-id="746cf-135">быстрая поставка приложения, причем разными микрослужбами обычно занимаются разные команды;</span><span class="sxs-lookup"><span data-stu-id="746cf-135">Rapid application delivery, usually with different teams focusing on different microservices.</span></span>

- <span data-ttu-id="746cf-136">методики и инфраструктура DevOps и непрерывной интеграции и поставки.</span><span class="sxs-lookup"><span data-stu-id="746cf-136">DevOps and CI/CD practices and infrastructure.</span></span>

<span data-ttu-id="746cf-137">Из этих аспектов только первые три рассматриваются в данном руководстве.</span><span class="sxs-lookup"><span data-stu-id="746cf-137">Of these, only the first three are covered or introduced in this guide.</span></span> <span data-ttu-id="746cf-138">Последние два, связанные с жизненным циклом приложения, описываются в дополнительной электронной книге [Жизненный цикл контейнерного приложения Docker на основе платформы и средств Майкрософт](https://aka.ms/dockerlifecycleebook).</span><span class="sxs-lookup"><span data-stu-id="746cf-138">The last two points, which are related to application lifecycle, are covered in the additional [Containerized Docker Application Lifecycle with Microsoft Platform and Tools](https://aka.ms/dockerlifecycleebook) e-book.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="746cf-139">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="746cf-139">Additional resources</span></span>

- <span data-ttu-id="746cf-140">**Марк Руссинович (Mark Russinovich). Микрослужбы: революция в сфере приложений, движимая облачными технологиями** </span><span class="sxs-lookup"><span data-stu-id="746cf-140">**Mark Russinovich. Microservices: An application revolution powered by the cloud** </span></span>\
  <https://azure.microsoft.com/blog/microservices-an-application-revolution-powered-by-the-cloud/>

- <span data-ttu-id="746cf-141">**Мартин Фоулер (Martin Fowler). Микрослужбы** </span><span class="sxs-lookup"><span data-stu-id="746cf-141">**Martin Fowler. Microservices** </span></span>\
  <https://www.martinfowler.com/articles/microservices.html>

- <span data-ttu-id="746cf-142">**Мартин Фоулер (Martin Fowler). Требования для микрослужб** </span><span class="sxs-lookup"><span data-stu-id="746cf-142">**Martin Fowler. Microservice Prerequisites** </span></span>\
  <https://martinfowler.com/bliki/MicroservicePrerequisites.html>

- <span data-ttu-id="746cf-143">**Джимми Нилссон (Jimmy Nilsson). Фрагментирование облачных вычислений** </span><span class="sxs-lookup"><span data-stu-id="746cf-143">**Jimmy Nilsson. Chunk Cloud Computing** </span></span>\
  <https://www.infoq.com/articles/CCC-Jimmy-Nilsson>

- <span data-ttu-id="746cf-144">**Сезар де ла Торре (Cesar de la Torre). Containerized Docker Application Lifecycle with Microsoft Platform and Tools** (Жизненный цикл контейнерного приложения Docker на основе платформы и средств Майкрософт) (электронная книга, доступная для скачивания) </span><span class="sxs-lookup"><span data-stu-id="746cf-144">**Cesar de la Torre. Containerized Docker Application Lifecycle with Microsoft Platform and Tools** (downloadable e-book) </span></span>\
  <https://aka.ms/dockerlifecycleebook>

>[!div class="step-by-step"]
><span data-ttu-id="746cf-145">[Назад](service-oriented-architecture.md)
>[Вперед](data-sovereignty-per-microservice.md)</span><span class="sxs-lookup"><span data-stu-id="746cf-145">[Previous](service-oriented-architecture.md)
[Next](data-sovereignty-per-microservice.md)</span></span>
