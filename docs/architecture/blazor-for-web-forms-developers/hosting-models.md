---
title: Модели хостинга приложений Blazor
description: Узнайте о различных способах размещения приложения Blazor, в том числе в браузере на WebAssembly или на сервере.
author: danroth27
ms.author: daroth
ms.date: 09/11/2019
ms.openlocfilehash: 77a022b01efba01038790c9601ea03f315a28fdf
ms.sourcegitcommit: d9470d8b2278b33108332c05224d86049cb9484b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2020
ms.locfileid: "81607936"
---
# <a name="blazor-app-hosting-models"></a>Модели хостинга приложений Blazor

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

Приложения Blazor могут размещаться в IIS так же, как ASP.NET приложения веб-форм. Приложения Blazor также могут быть размещены одним из следующих способов:

- Клиентская сторона в браузере на WebAssembly.
- Сторона сервера в ASP.NET приложении Core.

## <a name="blazor-webassembly-apps"></a>Приложения Blazor WebAssembly

Приложения Blazor WebAssembly выполняются непосредственно в браузере на основе Веб-сборки .NET времени выполнения. Приложения Blazor WebAssembly функционируют так же, как и передние платформы JavaScript, такие как Angular или React. Тем не менее, вместо того, чтобы писать JavaScript вы пишете C . Время выполнения .NET загружается с приложением вместе с сборкой приложения и любыми необходимыми зависимостями. Плагины или расширения браузера не требуются.

Загруженные сборки являются обычными сборками .NET, как вы будете использовать в любом другом приложении .NET. Поскольку время выполнения поддерживает стандарт .NET, вы можете использовать существующие библиотеки .NET Standard с вашим приложением Blazor WebAssembly. Тем не менее, эти сборки будут по-прежнему выполняться в песочнице безопасности браузера. Некоторые функциональные возможности могут <xref:System.PlatformNotSupportedException>бросить, как пытаются получить доступ к файловой системе или открытия произвольных сетевых соединений.

Когда приложение загружается, время выполнения .NET запускается и указывается на сборку приложения. Логика запуска приложения выполняется, и корневые компоненты отображаются. Blazor вычисляет обновления uI на основе отрисованного вывода из компонентов. Затем применяются обновления DOM.

![Blazor WebAssembly](media/hosting-models/blazor-webassembly.png)

Приложения Blazor WebAssembly работают исключительно на стороне клиентов. Такие приложения могут быть развернуты в статических решениях для хостинга сайтов, таких как GitHub Pages или Azure Static Website Hosting. на сервере нет необходимости. Глубокая связь с частями приложения обычно требует решения для разгрома на сервере. Решение для разгрома перенаправляет запросы в корень приложения. Например, это перенаправление можно обрабатывать с помощью правил переписывания URL в ИИС.

Чтобы получить все преимущества Blazor и полностью стек .NET веб-разработки, расставить приложение Blazor WebAssembly с ASP.NET Core. Используя .NET как на клиенте, так и на сервере, вы можете легко обмениваться кодом и создавать свое приложение, используя один согласованный набор языков, инфраструктур и инструментов. Blazor предоставляет удобные шаблоны для настройки решения, которое содержит как приложение Blazor WebAssembly, так и ASP.NET основной хост-проект. Когда решение построено, встроенные статические файлы из приложения Blazor размещаются приложением ASP.NET Core с резервной реукторой, уже настроенной.

## <a name="blazor-server-apps"></a>Приложения Blazor Server

Напомним из обсуждения [архитектуры Blazor,](architecture-comparison.md#blazor) что компоненты Blazor `RenderTree`отображают свой вывод на промежуточную абстракцию, называемую a . Затем платформа Blazor сравнивает то, что было отображено, с тем, что было ранее отображено. Различия применяются к DOM. Компоненты Blazor отделяются от того, как применяется их отрисованный выход. Следовательно, сами компоненты не должны работать в том же процессе, что и процесс обновления uI. В самом деле, они даже не должны работать на той же машине.

В приложениях Blazor Server компоненты работают на сервере вместо клиентской стороны в браузере. События интерфейса, происходящие в браузере, отправляются на сервер в режиме реального времени. События отправляются в правильные примеры компонентов. Компоненты рендеризм, и вычисленный uI diff сериализуется и отправляется в браузер, где он применяется к DOM.

![Blazor Server](media/hosting-models/blazor-server.png)

Модель хостинга Blazor Server может показаться знакомой, <xref:System.Web.UI.UpdatePanel> если вы использовали ASP.NET AJAX и элемент управления. Элемент `UpdatePanel` управления обрабатывает применяющие частичные обновления страницы в ответ на запуск событий на странице. При срабатывании `UpdatePanel` запросы частичное обновление, а затем применяется его без необходимости обновления страницы. Состояние uI управляется с `ViewState`помощью . Приложения Blazor Server немного отличаются тем, что приложение требует активной связи с клиентом. Кроме того, все состояния uI поддерживается на сервере. Помимо этих различий, эти две модели концептуально схожи.

## <a name="how-to-choose-the-right-blazor-hosting-model"></a>Как выбрать правильную модель хостинга Blazor

Как описано в [Blazor хостинг модели документы](/aspnet/core/blazor/hosting-models), различные модели хостинга Blazor имеют различные компромиссы.

Модель хостинга Blazor WebAssembly имеет следующие преимущества:

- Нет зависимости от сервера .NET. Приложение полностью функционирует после загрузки клиенту.
- Ресурсы и возможности клиентов полностью используются.
- Работа разгружается с сервера на клиент.
- Веб-сервер ASP.NET Core не требуется для размещения приложения. Возможны сценарии развертывания без серверов (например, обслуживание приложения из CDN).

Недостатки модели хостинга Blazor WebAssembly:

- Возможности браузера ограничивают приложение.
- Требуется способное клиентское оборудование и программное обеспечение (например, поддержка WebAssembly).
- Размер загрузки больше, и загрузка приложений занимает больше времени.
- Время выполнения .NET и поддержка инструментов менее зрелы. Например, существуют ограничения в поддержке и отладке [стандарта .NET.](../../standard/net-standard.md)

И наоборот, модель хостинга Blazor Server предлагает следующие преимущества:

- Размер загрузки намного меньше, чем клиентское приложение, и приложение загружается гораздо быстрее.
- Приложение в полной мере использует возможности сервера, включая использование любых AAP, совместимых с ядром .NET.
- Ядро .NET на сервере используется для запуска приложения, поэтому существующие инструменты .NET, такие как отладка, работают как ожидалось.
- Тонкие клиенты поддерживаются. Например, приложения на стороне сервера работают с браузерами, которые не поддерживают WebAssembly, и на устройствах с ограниченными ресурсами.
- Кодовая база приложения .NET/C, включая компонентный код приложения, не подается клиентам.

Недостатки модели хостинга Blazor Server:

- Более высокая задержка uI. Каждое взаимодействие с пользователем включает в себя сетевой переход.
- Там нет автономной поддержки. Если клиентское соединение выходит из строя, приложение перестанет работать.
- Масштабируемость является сложной задачей для приложений со многими пользователями. Сервер должен управлять несколькими клиентскими соединениями и обрабатывать состояние клиента.
- Для обслуживания приложения требуется сервер ASP.NET Core. Сценарии развертывания без серверов невозможны. Например, вы не можете обслуживать приложение с CDN.

Предыдущий список компромиссов может быть пугающим, но ваша модель хостинга может быть изменена позже. Независимо от выбранной модели хостинга Blazor, модель компонента *одинакова.* В принципе, одни и те же компоненты можно использовать с любой моделью хостинга. Код приложения не изменяется; однако, это хорошая практика, чтобы ввести абстракции, так что ваши компоненты остаются хостинг модели-агностик. Абстракции позволяют приложению легче принять другую модель хостинга.

## <a name="deploy-your-app"></a>Развертывание приложения

ASP.NET web Forms приложения обычно размещаются на IIS на компьютере Windows Server или кластере. Blazor приложения могут также:

- Размещайтесь на IIS, как статических файлов или как ASP.NET приложение Core.
- Использование ASP.NET гибкость Core для разъема на различных платформах и серверной инфраструктуре. Например, вы можете разместить приложение Blazor с помощью [Nginx](/aspnet/core/host-and-deploy/linux-nginx) или [Apache](/aspnet/core/host-and-deploy/linux-apache) на Linux. Для получения дополнительной информации о том, как публиковать и развертывать приложения Blazor, смотрите документацию [хостинга и развертывания](/aspnet/core/host-and-deploy/blazor/) Blazor.

В следующем разделе мы рассмотрим, как настраиваются проекты для приложений Blazor Web Assembly и Blazor Server.

>[!div class="step-by-step"]
>[Назад](architecture-comparison.md)
>[Вперед](project-structure.md)
