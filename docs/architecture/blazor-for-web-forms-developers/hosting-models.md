---
title: Модели размещения приложений блазор
description: Узнайте о различных способах размещения приложения Блазор, в том числе в браузере на веб-сборке или на сервере.
author: danroth27
ms.author: daroth
ms.date: 09/11/2019
ms.openlocfilehash: 5bf55fa686691acc25508d3d9a6dfaf8aca321ca
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2019
ms.locfileid: "73841951"
---
# <a name="blazor-app-hosting-models"></a>Модели размещения приложений блазор

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

Приложения блазор могут размещаться в IIS так же, как приложения веб-форм ASP.NET. Приложения блазор также могут размещаться одним из следующих способов:

- На стороне клиента в браузере на веб-сборке.
- На стороне сервера в приложении ASP.NET Core.

## <a name="blazor-webassembly-apps"></a>Блазор приложения для веб – сборки

Блазор приложения веб-сборки выполняются непосредственно в браузере в среде выполнения .NET на основе сборки. Блазор приложения веб-сборки функционируют аналогичным образом для интерфейсных платформ JavaScript, таких как угловая точка или реакция. Однако вместо написания написанного кода JavaScript C#. Среда выполнения .NET загружается вместе с приложением вместе с сборкой приложения и необходимыми зависимостями. Подключаемые модули браузера или расширения не требуются.

Загруженные сборки являются обычными сборками .NET, как и в любом другом приложении .NET. Так как среда выполнения поддерживает .NET Standard, можно использовать существующие библиотеки .NET Standard с приложением Блазор веб-сборки. Однако эти сборки по-прежнему будут выполняться в песочнице безопасности браузера. Некоторые функции могут вызывать <xref:System.PlatformNotSupportedException>, например попытки доступа к файловой системе или открытия произвольных сетевых подключений.

При загрузке приложения среда выполнения .NET запускается и указывает на сборку приложения. Выполняется логика запуска приложения, и отображаются корневые компоненты. Блазор вычисляет обновления пользовательского интерфейса на основе отображаемых выходных данных компонентов. Затем будут применены обновления модели DOM.

![Blazor WebAssembly](media/hosting-models/blazor-webassembly.png)

Блазор приложения веб-сборки работают на стороне клиента. Такие приложения можно развертывать на статических решениях размещения сайта, таких как страницы GitHub или размещение статических веб-сайтов Azure. Платформа .NET не требуется на сервере. Для глубокого связывания с частями приложения обычно требуется решение маршрутизации на сервере. Решение маршрутизации перенаправляет запросы в корневую папку приложения. Например, это перенаправление можно обработать с помощью правил переопределения URL-адресов в службах IIS.

Чтобы получить все преимущества Блазор и полноценной веб-разработки .NET, разместите приложение Блазор Web Assembly с ASP.NET Core. Используя .NET как на клиенте, так и на сервере, вы можете легко обмениваться кодом и создавать приложения с помощью единого набора языков, платформ и средств. Блазор предоставляет удобные шаблоны для настройки решения, которое содержит как приложение Блазор, так и проект размещения ASP.NET Core. При создании решения созданные статические файлы из приложения Блазор размещаются в ASP.NET Coreном приложении с уже настроенной резервной маршрутизацией.

## <a name="blazor-server-apps"></a>Серверные приложения блазор

Вспомним из обсуждения [архитектуры блазор](architecture-comparison.md#blazor) , что компоненты блазор визуализируют свои выходные данные в промежуточную абстракцию, называемую `RenderTree`. Затем платформа Блазор сравнивает, что было подготовлено к просмотру ранее. Различия применяются к модели DOM. Компоненты блазор отделены от того, как применяются выходные данные, готовые к просмотру. Следовательно, сами компоненты не должны выполняться в том же процессе, что и процесс обновления пользовательского интерфейса. На самом деле они даже не должны выполняться на одном и том же компьютере.

В серверных приложениях Блазор компоненты выполняются на сервере, а не на стороне клиента в браузере. События пользовательского интерфейса, происходящие в браузере, отправляются на сервер через подключение в режиме реального времени. События отправляются в правильные экземпляры компонента. Компоненты визуализируются, а вычисленное различие пользовательского интерфейса сериализуется и отправляется в браузер, где он применяется к модели DOM.

![Blazor Server](media/hosting-models/blazor-server.png)

Модель размещения сервера Блазор может показаться знакомой, если вы использовали ASP.NET AJAX и элемент управления <xref:System.Web.UI.UpdatePanel>. Элемент управления `UpdatePanel` обрабатывает применение частичных обновлений страницы в ответ на события триггера на странице. При запуске `UpdatePanel` запрашивает частичное обновление, а затем применяет его без необходимости обновлять страницу. Состояние пользовательского интерфейса управляется с помощью `ViewState`. Серверные приложения блазор немного отличаются тем, что приложению требуется активное соединение с клиентом. Кроме того, все состояния пользовательского интерфейса сохраняются на сервере. Помимо этих различий, две модели концептуально похожи.

## <a name="how-to-choose-the-right-blazor-hosting-model"></a>Как выбрать правильную модель размещения Блазор

Как описано в документации по [модели размещения блазор](https://docs.microsoft.com/aspnet/core/blazor/hosting-models#server-side), различные модели размещения блазор имеют разные компромиссы.

Модель размещения Блазор содержит следующие преимущества:

- Зависимость на стороне сервера .NET отсутствует. Приложение полностью работает после загрузки на клиент.
- Ресурсы и возможности клиента полностью используются.
- Работа разгружается с сервера на клиент.
- Веб-сервер ASP.NET Core не требуется для размещения приложения. Возможны сценарии бессерверного развертывания (например, обслуживание приложения из CDN).

Недостатки модели размещения Блазор:

- Возможности браузера ограничивают приложение.
- Требуется аппаратное и программное обеспечение, поддерживающее клиент (например, поддержка сборок).
- Размер скачивания больше, и приложения загружаются дольше.
- Поддержка среды выполнения .NET и инструментария менее зрела. Например, существуют ограничения на поддержку и отладку [.NET Standard](../../standard/net-standard.md) .

И наоборот, модель размещения сервера Блазор предоставляет следующие преимущества:

- Размер скачивания гораздо меньше клиентского приложения, и приложение загружается гораздо быстрее.
- Приложение обладает всеми преимуществами серверных возможностей, включая использование любых интерфейсов API, совместимых с .NET Core.
- .NET Core на сервере используется для запуска приложения, поэтому существующие инструменты .NET, такие как отладка, работают должным образом.
- Поддерживаются тонкие клиенты. Например, серверные приложения работают с браузерами, которые не поддерживают веб-сборку и устройства с ограниченными ресурсами.
- База .NET (C# код) приложения, включая код компонента приложения, не обслуживаются для клиентов.

Недостатки модели размещения сервера Блазор:

- Более высокая задержка пользовательского интерфейса. Каждое взаимодействие с пользователем включает сетевой прыжок.
- Автономная поддержка отсутствует. Если подключение клиента завершается сбоем, приложение перестает работать.
- Масштабируемость — это сложная задача для приложений с большим количеством пользователей. Сервер должен управлять несколькими клиентскими подключениями и обрабатывать состояние клиента.
- Для обслуживания приложения требуется сервер ASP.NET Core. Сценарии бессерверного развертывания невозможны. Например, вы не можете обслуживать приложение из CDN.

Приведенный выше список компромиссов может быть вас затруднительным, но модель размещения можно изменить позже. Независимо от выбранной модели размещения Блазор, модель компонентов *одинакова*. В принципе, одни и те же компоненты можно использовать с любой моделью размещения. Код приложения не изменяется; Однако рекомендуется представить абстракции, чтобы компоненты оставались независимыми от модели. Абстракции позволяют приложению упростить внедрение другой модели размещения.

## <a name="deploy-your-app"></a>Развертывание приложения

Приложения веб-форм ASP.NET обычно размещаются в службах IIS на компьютере или в кластере Windows Server. Приложения блазор также могут:

- Размещаться в IIS либо как статические файлы, либо как приложение ASP.NET Core.
- Используйте гибкость ASP.NET Core для размещения на различных платформах и серверных инфраструктурах. Например, можно разместить приложение Блазор с помощью [nginx](/aspnet/core/host-and-deploy/linux-nginx) или [Apache](/aspnet/core/host-and-deploy/linux-apache) в Linux. Дополнительные сведения о публикации и развертывании приложений Блазор см. в документации по [размещению и развертыванию](/aspnet/core/host-and-deploy/blazor/) блазор.

В следующем разделе мы рассмотрим, как настраиваются проекты для приложений Блазор и Блазор Server.

>[!div class="step-by-step"]
>[Назад](architecture-comparison.md)
>[Вперед](project-structure.md)
