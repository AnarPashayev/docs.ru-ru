---
title: Сравнение архитектуры ASP.NET Web Forms и Блазор
description: Узнайте, как архитектуры ASP.NET Web Forms и Блазор Compare.
author: danroth27
ms.author: daroth
ms.date: 09/11/2019
ms.openlocfilehash: 8ff733178e684666b69859bfab8b79fbad1fdff6
ms.sourcegitcommit: 4f4a32a5c16a75724920fa9627c59985c41e173c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/17/2019
ms.locfileid: "73841243"
---
# <a name="architecture-comparison-of-aspnet-web-forms-and-blazor"></a><span data-ttu-id="e0ed3-103">Сравнение архитектуры ASP.NET Web Forms и Блазор</span><span class="sxs-lookup"><span data-stu-id="e0ed3-103">Architecture comparison of ASP.NET Web Forms and Blazor</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="e0ed3-104">Хотя ASP.NET Web Forms и Блазор имеют много похожих концепций, существуют различия в их работе.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-104">While ASP.NET Web Forms and Blazor have many similar concepts, there are differences in how they work.</span></span> <span data-ttu-id="e0ed3-105">В этой главе рассматриваются внутренние работы и архитектуры веб-форм ASP.NET и Блазор.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-105">This chapter examines the inner workings and architectures of ASP.NET Web Forms and Blazor.</span></span>

## <a name="aspnet-web-forms"></a><span data-ttu-id="e0ed3-106">Веб-формы ASP.NET</span><span class="sxs-lookup"><span data-stu-id="e0ed3-106">ASP.NET Web Forms</span></span>

<span data-ttu-id="e0ed3-107">Платформа веб-форм ASP.NET основана на архитектуре, ориентированной на страницы.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-107">The ASP.NET Web Forms framework is based on a page-centric architecture.</span></span> <span data-ttu-id="e0ed3-108">Каждый HTTP-запрос для расположения в приложении представляет собой отдельную страницу, с которой ASP.NET отвечает.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-108">Each HTTP request for a location in the app is a separate page with which ASP.NET responds.</span></span> <span data-ttu-id="e0ed3-109">По мере запроса страниц содержимое браузера заменяется результатами запрошенной страницы.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-109">As pages are requested, the contents of the browser are replaced with the results of the page requested.</span></span>

<span data-ttu-id="e0ed3-110">Страницы состоят из следующих компонентов:</span><span class="sxs-lookup"><span data-stu-id="e0ed3-110">Pages consist of the following components:</span></span>

- <span data-ttu-id="e0ed3-111">Разметка HTML</span><span class="sxs-lookup"><span data-stu-id="e0ed3-111">HTML markup</span></span>
- <span data-ttu-id="e0ed3-112">Код C# или Visual Basic</span><span class="sxs-lookup"><span data-stu-id="e0ed3-112">C# or Visual Basic code</span></span>
- <span data-ttu-id="e0ed3-113">Класс кода программной части, содержащий логику и возможности обработки событий</span><span class="sxs-lookup"><span data-stu-id="e0ed3-113">A code-behind class containing logic and event-handling capabilities</span></span>
- <span data-ttu-id="e0ed3-114">Элементы управления</span><span class="sxs-lookup"><span data-stu-id="e0ed3-114">Controls</span></span>

<span data-ttu-id="e0ed3-115">Элементы управления — это многократно используемые модули веб-интерфейса, которые можно программно размещать на странице и взаимодействовать с ними.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-115">Controls are reusable units of web UI that can be programmatically placed and interacted with on a page.</span></span> <span data-ttu-id="e0ed3-116">Страницы состоят из файлов, заканчивающихся на *. aspx* , содержащих разметку, элементы управления и некоторый код.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-116">Pages are composed of files that end with *.aspx* containing markup, controls, and some code.</span></span> <span data-ttu-id="e0ed3-117">Классы кода программной части находятся в файлах с одинаковым базовым именем и расширением *aspx.CS* или *aspx. vb* в зависимости от используемого языка программирования.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-117">The code-behind classes are in files with the same base name and an *.aspx.cs* or *.aspx.vb* extension, depending on the programming language used.</span></span> <span data-ttu-id="e0ed3-118">Интересно, что веб-сервер интерпретирует содержимое файлов *ASPX* и компилирует их при каждом изменении.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-118">Interestingly, the web server interprets contents of the *.aspx* files and compiles them whenever they change.</span></span> <span data-ttu-id="e0ed3-119">Повторная компиляция выполняется, даже если веб-сервер уже запущен.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-119">This recompilation occurs even if the web server is already running.</span></span>

<span data-ttu-id="e0ed3-120">Элементы управления можно создавать с разметкой и доставлять в качестве пользовательских элементов управления.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-120">Controls can be built with markup and delivered as user controls.</span></span> <span data-ttu-id="e0ed3-121">Пользовательский элемент управления является производным от класса `UserControl` и имеет ту же структуру, что и страница.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-121">A user control derives from the `UserControl` class and has a similar structure to the Page.</span></span> <span data-ttu-id="e0ed3-122">Разметка для пользовательских элементов управления хранится в *ASCX* -файле.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-122">Markup for user controls is stored in an *.ascx* file.</span></span> <span data-ttu-id="e0ed3-123">Сопутствующий класс кода программной части находится в файле *. ascx.CS* или *. ascx. vb* .</span><span class="sxs-lookup"><span data-stu-id="e0ed3-123">An accompanying code-behind class resides in an *.ascx.cs* or *.ascx.vb* file.</span></span> <span data-ttu-id="e0ed3-124">Элементы управления также могут быть полностью собраны с помощью кода путем наследования от `WebControl` или `CompositeControl` базового класса.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-124">Controls can also be built completely with code, by inheriting from either the `WebControl` or `CompositeControl` base class.</span></span>

<span data-ttu-id="e0ed3-125">Страницы также имеют обширный жизненный цикл событий.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-125">Pages also have an extensive event lifecycle.</span></span> <span data-ttu-id="e0ed3-126">Каждая страница создает события для событий инициализации, загрузки, PreRender и Unload, которые происходят, когда среда выполнения ASP.NET выполняет код страницы для каждого запроса.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-126">Each page raises events for the initialization, load, prerender, and unload events that occur as the ASP.NET runtime executes the page's code for each request.</span></span>

<span data-ttu-id="e0ed3-127">Элементы управления на странице обычно выполняют обратную передачу на ту же страницу, в которой был представлен элемент управления, и вместе с ними передаются полезные данные из скрытого поля формы, именуемого `ViewState`.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-127">Controls on a Page typically post-back to the same page that presented the control, and carry along with them a payload from a hidden form field called `ViewState`.</span></span> <span data-ttu-id="e0ed3-128">Поле `ViewState` содержит сведения о состоянии элементов управления на момент подготовки к просмотру и представления на странице, позволяя среде выполнения ASP.NET сравнивать и выдавать изменения в содержимом, переданном на сервер.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-128">The `ViewState` field contains information about the state of the controls at the time they were rendered and presented on the page, allowing the ASP.NET runtime to compare and identify changes in the content submitted to the server.</span></span>

## <a name="blazor"></a><span data-ttu-id="e0ed3-129">Blazor</span><span class="sxs-lookup"><span data-stu-id="e0ed3-129">Blazor</span></span>

<span data-ttu-id="e0ed3-130">Блазор — это клиентская платформа веб-интерфейса, сходная с особенностями интерфейсных платформ JavaScript, таких как угловая точка или реакция.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-130">Blazor is a client-side web UI framework similar in nature to JavaScript front-end frameworks like Angular or React.</span></span> <span data-ttu-id="e0ed3-131">Блазор обрабатывает взаимодействие с пользователем и отображает необходимые обновления пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-131">Blazor handles user interactions and renders the necessary UI updates.</span></span> <span data-ttu-id="e0ed3-132">Блазор *не* основан на модели "запрос-ответ".</span><span class="sxs-lookup"><span data-stu-id="e0ed3-132">Blazor *isn't* based on a request-reply model.</span></span> <span data-ttu-id="e0ed3-133">Взаимодействие с пользователем обрабатывается как события, которые не находятся в контексте конкретного HTTP-запроса.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-133">User interactions are handled as events that aren't in the context of any particular HTTP request.</span></span>

<span data-ttu-id="e0ed3-134">Блазор приложения состоят из одного или нескольких корневых компонентов, отображаемых на HTML-странице.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-134">Blazor apps consist of one or more root components that are rendered on an HTML page.</span></span>

![Компоненты блазор в HTML](./media/architecture-comparison/blazor-components-in-html.png)

<span data-ttu-id="e0ed3-136">Способ, с помощью которого пользователь указывает, где должны подготавливаться компоненты, а также способ их связывания для взаимодействия с пользователем, зависит от [модели](hosting-models.md) .</span><span class="sxs-lookup"><span data-stu-id="e0ed3-136">How the user specifies where components should render and how the components are then wired up for user interactions is [hosting model](hosting-models.md) specific.</span></span>

<span data-ttu-id="e0ed3-137">[Компоненты](components.md) блазор — это классы .NET, представляющие многократно используемый элемент пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-137">Blazor [components](components.md) are .NET classes that represent a reusable piece of UI.</span></span> <span data-ttu-id="e0ed3-138">Каждый компонент сохраняет свое собственное состояние и указывает собственную логику отрисовки, которая может включать отображение других компонентов.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-138">Each component maintains its own state and specifies its own rendering logic, which can include rendering other components.</span></span> <span data-ttu-id="e0ed3-139">Компоненты задают обработчики событий для конкретных действий пользователя, чтобы обновить состояние компонента.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-139">Components specify event handlers for specific user interactions to update the component's state.</span></span>

<span data-ttu-id="e0ed3-140">После того, как компонент обрабатывает событие, Блазор визуализирует компонент и отслеживает изменения в выходных данных.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-140">After a component handles an event, Blazor renders the component and keeps track of what changed in the rendered output.</span></span> <span data-ttu-id="e0ed3-141">Компоненты не отображаются непосредственно в модель DOM (DOM).</span><span class="sxs-lookup"><span data-stu-id="e0ed3-141">Components don't render directly to the Document Object Model (DOM).</span></span> <span data-ttu-id="e0ed3-142">Вместо этого они визуализируются в представлении DOM в памяти, которое называется `RenderTree`, чтобы Блазор мог отслеживанию изменений.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-142">They instead render to an in-memory representation of the DOM called a `RenderTree` so that Blazor can track the changes.</span></span> <span data-ttu-id="e0ed3-143">Блазор сравнивает вновь выведенные выходные данные с предыдущими выходными данными, чтобы вычислить разницу в пользовательском интерфейсе, которая эффективно применяется к модели DOM.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-143">Blazor compares the newly rendered output with the previous output to calculate a UI diff that it then applies efficiently to the DOM.</span></span>

![Взаимодействие DOM блазор](./media/architecture-comparison/blazor-dom-interaction.png)

<span data-ttu-id="e0ed3-145">Компоненты также могут указывать, что они должны подготавливаться к просмотру, если их состояние изменяется вне обычного пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-145">Components can also manually indicate that they should be rendered if their state changes outside of a normal UI event.</span></span> <span data-ttu-id="e0ed3-146">Блазор использует `SynchronizationContext` для принудительного применения одного логического потока выполнения.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-146">Blazor uses a `SynchronizationContext` to enforce a single logical thread of execution.</span></span> <span data-ttu-id="e0ed3-147">Методы жизненного цикла компонента и любые обратные вызовы событий, вызванные Блазор, выполняются на этом `SynchronizationContext`.</span><span class="sxs-lookup"><span data-stu-id="e0ed3-147">A component's lifecycle methods and any event callbacks that are raised by Blazor are executed on this `SynchronizationContext`.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="e0ed3-148">[Назад](introduction.md)
>[Вперед](hosting-models.md)</span><span class="sxs-lookup"><span data-stu-id="e0ed3-148">[Previous](introduction.md)
[Next](hosting-models.md)</span></span>
