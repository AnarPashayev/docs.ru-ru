---
title: Масштабирование контейнеров и бессерверных приложений
description: Масштабирование собственных приложений в облаке с помощью службы Azure Kubernetes для удовлетворения потребностей пользователей.
ms.date: 04/13/2020
ms.openlocfilehash: b4580e6994611ad394bbaa2d5bb07f64c2798569
ms.sourcegitcommit: 5988e9a29cedb8757320817deda3c08c6f44a6aa
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "82199928"
---
# <a name="scaling-containers-and-serverless-applications"></a><span data-ttu-id="0e743-103">Масштабирование контейнеров и бессерверных приложений</span><span class="sxs-lookup"><span data-stu-id="0e743-103">Scaling containers and serverless applications</span></span>

<span data-ttu-id="0e743-104">Существует два способа масштабирования приложения: вверх или вниз. Первое относится к добавлению емкости для одного ресурса, а Последнее — к добавлению дополнительных ресурсов для увеличения емкости.</span><span class="sxs-lookup"><span data-stu-id="0e743-104">There are two ways to scale an application: up or out. The former refers to adding capacity to a single resource, while the latter refers to adding more resources to increase capacity.</span></span>

## <a name="the-simple-solution-scaling-up"></a><span data-ttu-id="0e743-105">Простое решение: увеличение масштаба</span><span class="sxs-lookup"><span data-stu-id="0e743-105">The simple solution: scaling up</span></span>

<span data-ttu-id="0e743-106">Обновление существующего сервера с повышенной скоростью ЦП, памяти, дискового ввода-вывода и скорости сетевого ввода-вывода называется увеличением *масштаба*.</span><span class="sxs-lookup"><span data-stu-id="0e743-106">Upgrading an existing host server with increased CPU, memory, disk I/O speed, and network I/O speed is known as *scaling up*.</span></span> <span data-ttu-id="0e743-107">Масштабирование собственного облачного приложения включает в себя выбор более производительных ресурсов от поставщика облачных вычислений.</span><span class="sxs-lookup"><span data-stu-id="0e743-107">Scaling up a cloud-native application involves choosing more capable resources from the cloud vendor.</span></span> <span data-ttu-id="0e743-108">Например, вы можете создать пул узлов с более крупными виртуальными машинами в кластере Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="0e743-108">For example, you can a new node pool with larger VMs in your Kubernetes cluster.</span></span> <span data-ttu-id="0e743-109">Затем перенесите контейнерные службы в новый пул.</span><span class="sxs-lookup"><span data-stu-id="0e743-109">Then, migrate your containerized services to the new pool.</span></span>

<span data-ttu-id="0e743-110">Бессерверные приложения масштабируются вверх, выбрав [план функций Premium](https://docs.microsoft.com/azure/azure-functions/functions-scale) или размер экземпляра уровня "Премиум" из выделенного плана службы приложений.</span><span class="sxs-lookup"><span data-stu-id="0e743-110">Serverless apps scale up by choosing the [premium Functions plan](https://docs.microsoft.com/azure/azure-functions/functions-scale) or premium instance sizes from a dedicated app service plan.</span></span>

## <a name="scaling-out-cloud-native-apps"></a><span data-ttu-id="0e743-111">Масштабирование собственных приложений в облаке</span><span class="sxs-lookup"><span data-stu-id="0e743-111">Scaling out cloud-native apps</span></span>

<span data-ttu-id="0e743-112">Облачные приложения часто сталкиваются с большими колебаниями спроса и требуют масштабирования на заданное время.</span><span class="sxs-lookup"><span data-stu-id="0e743-112">Cloud-native applications often experience large fluctuations in demand and require scale on a moment's notice.</span></span> <span data-ttu-id="0e743-113">Они имеют приоритетное масштабирование. Горизонтальное масштабирование выполняется по горизонтали путем добавления дополнительных компьютеров (узлов) или экземпляров приложений в существующий кластер.</span><span class="sxs-lookup"><span data-stu-id="0e743-113">They favor scaling out. Scaling out is done horizontally by adding additional machines (called nodes) or application instances to an existing cluster.</span></span> <span data-ttu-id="0e743-114">В Kubernetes можно масштабировать вручную путем настройки параметров конфигурации приложения (например, [масштабирования пула узлов](https://docs.microsoft.com/azure/aks/use-multiple-node-pools#scale-a-node-pool-manually)) или с помощью автомасштабирования.</span><span class="sxs-lookup"><span data-stu-id="0e743-114">In Kubernetes, you can scale manually by adjusting configuration settings for the app (for example, [scaling a node pool](https://docs.microsoft.com/azure/aks/use-multiple-node-pools#scale-a-node-pool-manually)), or through autoscaling.</span></span>

<span data-ttu-id="0e743-115">Кластеры AKS могут выполнять Автомасштабирование одним из двух способов:</span><span class="sxs-lookup"><span data-stu-id="0e743-115">AKS clusters can autoscale in one of two ways:</span></span>

<span data-ttu-id="0e743-116">Во первых, [Горизонтальный Автомасштабирование Pod](https://docs.microsoft.com/azure/aks/tutorial-kubernetes-scale#autoscale-pods) выполняет мониторинг спроса на ресурсы и автоматически масштабирует реплики Pod для их удовлетворения.</span><span class="sxs-lookup"><span data-stu-id="0e743-116">First, the [Horizontal Pod Autoscaler](https://docs.microsoft.com/azure/aks/tutorial-kubernetes-scale#autoscale-pods) monitors resource demand and automatically scales your POD replicas to meet it.</span></span> <span data-ttu-id="0e743-117">При увеличении трафика дополнительные реплики автоматически подготавливаются для масштабирования служб.</span><span class="sxs-lookup"><span data-stu-id="0e743-117">When traffic increases, additional replicas are automatically provisioned to scale out your services.</span></span> <span data-ttu-id="0e743-118">Аналогично, при снижении спроса они удаляются для масштабирования служб.</span><span class="sxs-lookup"><span data-stu-id="0e743-118">Likewise, when demand decreases, they're removed to scale-in your services.</span></span> <span data-ttu-id="0e743-119">Вы определяете метрику, на основе которой будет масштабироваться, например загрузка ЦП.</span><span class="sxs-lookup"><span data-stu-id="0e743-119">You define the metric on which to scale, for example, CPU usage.</span></span> <span data-ttu-id="0e743-120">Можно также указать минимальное и максимальное количество реплик для выполнения.</span><span class="sxs-lookup"><span data-stu-id="0e743-120">You can also specify the minimum and maximum number of replicas to run.</span></span> <span data-ttu-id="0e743-121">AKS отслеживает эту метрику и масштабирует соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="0e743-121">AKS monitors that metric and scales accordingly.</span></span>

<span data-ttu-id="0e743-122">Затем функция [автомасштабирования кластера AKS](https://docs.microsoft.com/azure/aks/cluster-autoscaler) позволяет автоматически масштабировать масштабируемые узлы в кластере Kubernetes в соответствии с потребностями.</span><span class="sxs-lookup"><span data-stu-id="0e743-122">Next, the [AKS Cluster Autoscaler](https://docs.microsoft.com/azure/aks/cluster-autoscaler) feature enables you to automatically scale compute nodes across a Kubernetes cluster to meet demand.</span></span> <span data-ttu-id="0e743-123">С его помощью можно автоматически добавлять новые виртуальные машины в базовый масштабируемый набор виртуальных машин Azure, если требуется больше ресурсов вычислений.</span><span class="sxs-lookup"><span data-stu-id="0e743-123">With it, you can automatically add new VMs to the underlying Azure Virtual Machine Scale Set whenever more compute capacity of is required.</span></span> <span data-ttu-id="0e743-124">При этом также удаляются узлы, которые больше не требуются.</span><span class="sxs-lookup"><span data-stu-id="0e743-124">It also removes nodes when no longer required.</span></span>

<span data-ttu-id="0e743-125">На рис. 3-13 показана связь между этими двумя службами масштабирования.</span><span class="sxs-lookup"><span data-stu-id="0e743-125">Figure 3-13 shows the relationship between these two scaling services.</span></span>

![Масштабирование плана службы приложений.](./media/aks-cluster-autoscaler.png)

<span data-ttu-id="0e743-127">**Рис. 3-13**.</span><span class="sxs-lookup"><span data-stu-id="0e743-127">**Figure 3-13**.</span></span> <span data-ttu-id="0e743-128">Масштабирование плана службы приложений.</span><span class="sxs-lookup"><span data-stu-id="0e743-128">Scaling out an App Service plan.</span></span>

<span data-ttu-id="0e743-129">При совместной работе оба варианта обеспечивают оптимальное количество экземпляров контейнеров и кластерных узлов для поддержки колебаний спроса.</span><span class="sxs-lookup"><span data-stu-id="0e743-129">Working together, both ensure an optimal number of container instances and compute nodes to support fluctuating demand.</span></span> <span data-ttu-id="0e743-130">Горизонтальный модуль автомасштабирования Pod оптимизирует необходимое число модулей.</span><span class="sxs-lookup"><span data-stu-id="0e743-130">The horizontal pod autoscaler optimizes the number of pods required.</span></span> <span data-ttu-id="0e743-131">Модуль автомасштабирования кластера оптимизирует необходимое количество узлов.</span><span class="sxs-lookup"><span data-stu-id="0e743-131">The cluster autoscaler optimizes the number of nodes required.</span></span>

### <a name="scaling-azure-functions"></a><span data-ttu-id="0e743-132">Масштабирование Функций Azure</span><span class="sxs-lookup"><span data-stu-id="0e743-132">Scaling Azure Functions</span></span>

<span data-ttu-id="0e743-133">Функции Azure автоматически масштабируются при необходимости.</span><span class="sxs-lookup"><span data-stu-id="0e743-133">Azure Functions automatically scale out upon demand.</span></span> <span data-ttu-id="0e743-134">Ресурсы сервера динамически выделяются и удаляются в зависимости от числа активированных событий.</span><span class="sxs-lookup"><span data-stu-id="0e743-134">Server resources are dynamically allocated and removed based on the number of triggered events.</span></span> <span data-ttu-id="0e743-135">Плата насчитывается только за ресурсы вычислений, потребляемые при выполнении функций.</span><span class="sxs-lookup"><span data-stu-id="0e743-135">You're only charged for compute resources consumed when your functions run.</span></span> <span data-ttu-id="0e743-136">Выставление счетов зависит от количества выполнений, времени выполнения и используемой памяти.</span><span class="sxs-lookup"><span data-stu-id="0e743-136">Billing is based upon the number of executions, execution time, and memory used.</span></span>

<span data-ttu-id="0e743-137">Хотя план потребления по умолчанию предоставляет экономичное и масштабируемое решение для большинства приложений, вариант Premium позволяет разработчикам гибко работать с пользовательскими требованиями к функциям Azure.</span><span class="sxs-lookup"><span data-stu-id="0e743-137">While the default consumption plan provides an economical and scalable solution for most apps, the premium option allows developers flexibility for custom Azure Functions requirements.</span></span> <span data-ttu-id="0e743-138">Обновление до плана Premium позволяет управлять размерами экземпляров, предварительно запущенными экземплярами (чтобы избежать задержек при холодном запуске) и выделенных виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="0e743-138">Upgrading to the premium plan provides control over instance sizes, pre-warmed instances (to avoid cold start delays), and dedicated VMs.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="0e743-139">[Назад](deploy-containers-azure.md)
>[Вперед](other-deployment-options.md)</span><span class="sxs-lookup"><span data-stu-id="0e743-139">[Previous](deploy-containers-azure.md)
[Next](other-deployment-options.md)</span></span>
