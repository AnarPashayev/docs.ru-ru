---
title: Хранение данных в Azure
description: Создание архитектуры облачных приложений .NET для Azure | Хранение данных в Azure
ms.date: 06/30/2019
ms.openlocfilehash: 1a86cecf005c6dbdfda5cf4cacfafaad4711c076
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2019
ms.locfileid: "73841897"
---
# <a name="data-storage-in-azure"></a><span data-ttu-id="e0252-103">Хранение данных в Azure</span><span class="sxs-lookup"><span data-stu-id="e0252-103">Data storage in Azure</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="e0252-104">Как мы видели во всей этой книге, Облако изменяет способ разработки, развертывания и управления приложениями.</span><span class="sxs-lookup"><span data-stu-id="e0252-104">As we've seen throughout this book, the cloud is changing the way applications are designed, deployed, and managed.</span></span> <span data-ttu-id="e0252-105">При переходе в облако критический вопрос заключается в том, как переместить данные?</span><span class="sxs-lookup"><span data-stu-id="e0252-105">When moving to the cloud, a critical question is how do you move your data?</span></span> <span data-ttu-id="e0252-106">К счастью, Облако Azure предлагает множество вариантов.</span><span class="sxs-lookup"><span data-stu-id="e0252-106">Fortunately, the Azure cloud offers many options.</span></span>

<span data-ttu-id="e0252-107">Вы можете просто подготавливать виртуальную машину Azure и установить выбранную базу данных.</span><span class="sxs-lookup"><span data-stu-id="e0252-107">You could just provision an Azure virtual machine and install your database of choice.</span></span> <span data-ttu-id="e0252-108">Это называется ["инфраструктура как услуга" (IaaS)](https://www.techopedia.com/definition/141/infrastructure-as-a-service-iaas).</span><span class="sxs-lookup"><span data-stu-id="e0252-108">This is known as [Infrastructure as a Service (IaaS)](https://www.techopedia.com/definition/141/infrastructure-as-a-service-iaas).</span></span> <span data-ttu-id="e0252-109">Такой подход упрощает перемещение локальной базы данных в облако, как есть, но сдвигает нагрузку на управление виртуальной машиной и базой данных.</span><span class="sxs-lookup"><span data-stu-id="e0252-109">This approach simplifies moving an on-premises database to the cloud, as-is, but shifts the burden of managing the virtual machine and the database to you.</span></span>

<span data-ttu-id="e0252-110">Вместо этого лучше использовать полностью управляемую [базу данных как службу (DBaaS)](https://www.stratoscale.com/blog/dbaas/what-is-database-as-a-service/) .</span><span class="sxs-lookup"><span data-stu-id="e0252-110">Instead, a fully managed [Database as a Service (DBaaS)](https://www.stratoscale.com/blog/dbaas/what-is-database-as-a-service/) is a better option.</span></span> <span data-ttu-id="e0252-111">Вы получаете множество встроенных функций, когда размещение, Обслуживание и лицензирование управляются корпорацией Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="e0252-111">You get many built-in features while the hosting, maintenance, and licensing are managed by Microsoft.</span></span> <span data-ttu-id="e0252-112">В Azure реализованы различные типы полностью управляемых хранилищ данных, каждый из которых имеет определенные преимущества.</span><span class="sxs-lookup"><span data-stu-id="e0252-112">Azure features different kinds of fully managed data storage options, each with specific benefits.</span></span> <span data-ttu-id="e0252-113">Все они поддерживают JIT-поддержку и модель с оплатой по мере использования.</span><span class="sxs-lookup"><span data-stu-id="e0252-113">They all support just-in-time capacity and a pay-as-you-go model.</span></span>

<span data-ttu-id="e0252-114">Далее мы рассмотрим параметры DBaaS, доступные в Azure.</span><span class="sxs-lookup"><span data-stu-id="e0252-114">We'll next look at DBaaS options available in Azure.</span></span> <span data-ttu-id="e0252-115">Вы узнаете о том, как корпорация Майкрософт будет продолжать работу с "открытой платформой", предлагая управляемую поддержку многих реляционных баз данных с открытым исходным кодом и NoSQL, а также сделав основные вклады в различные основы с открытым кодом в качестве активного элемента.</span><span class="sxs-lookup"><span data-stu-id="e0252-115">You'll see how Microsoft continues is commitment to keeping Azure an “open platform,” offering managed support for many open-source relational and NoSQL databases and making key contributions to the various open-source foundations as an active member.</span></span>

## <a name="azure-sql-database"></a><span data-ttu-id="e0252-116">База данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="e0252-116">Azure SQL Database</span></span>

<span data-ttu-id="e0252-117">[База данных SQL Azure](https://docs.microsoft.com/azure/sql-database/) — это многофункциональная реляционная база данных общего назначения как услуга (DBaaS) на основе ядро СУБД Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e0252-117">[Azure SQL Database](https://docs.microsoft.com/azure/sql-database/) is a feature-rich, general-purpose relational database-as-a-service (DBaaS) based on the Microsoft SQL Server Database Engine.</span></span> <span data-ttu-id="e0252-118">Она полностью управляется корпорацией Майкрософт и представляет собой высокопроизводительную, надежную и безопасную облачную базу данных.</span><span class="sxs-lookup"><span data-stu-id="e0252-118">It's fully managed by Microsoft and is a high-performance, reliable, and secure cloud database.</span></span> <span data-ttu-id="e0252-119">Служба использует многие функции, имеющиеся в локальной версии SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e0252-119">The service shares many of the features found in the on-premises version of SQL Server.</span></span>

<span data-ttu-id="e0252-120">Вы можете подготавливать сервер базы данных SQL и базу данных за считаные минуты.</span><span class="sxs-lookup"><span data-stu-id="e0252-120">You can provision a SQL Database server and database in minutes.</span></span> <span data-ttu-id="e0252-121">Когда спрос на приложение растет от нескольких клиентов до миллионов, база данных SQL Azure масштабируется в режиме реального времени с минимальным временем простоя.</span><span class="sxs-lookup"><span data-stu-id="e0252-121">When demand for your application grows from a handful of customers to millions, Azure SQL Database scales on-the-fly with minimal downtime.</span></span> <span data-ttu-id="e0252-122">Вы можете динамически добавлять или удалять ресурсы, включая мощность ЦП, память, пропускную способность ввода-вывода и хранилище, выделенное для баз данных.</span><span class="sxs-lookup"><span data-stu-id="e0252-122">You can dynamically add or remove resources, including CPU power, memory, IO throughput, and storage allocated to your databases.</span></span>

<span data-ttu-id="e0252-123">На рис. 5-12 показаны варианты развертывания для базы данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="e0252-123">Figure 5-12 shows the deployment options for Azure SQL Database.</span></span>

![Варианты развертывания SQL Azure](./media/azure-sql-database-deployment-options.png)

<span data-ttu-id="e0252-125">**Рис. 5-12**.</span><span class="sxs-lookup"><span data-stu-id="e0252-125">**Figure 5-12**.</span></span> <span data-ttu-id="e0252-126">Варианты развертывания SQL Azure</span><span class="sxs-lookup"><span data-stu-id="e0252-126">Azure SQL deployment options</span></span>

<span data-ttu-id="e0252-127">Обратите внимание на альтернативные варианты, приведенные на предыдущем рисунке при развертывании базы данных SQL:</span><span class="sxs-lookup"><span data-stu-id="e0252-127">Note the alternatives in the previous figure when deploying a SQL Database:</span></span>

- <span data-ttu-id="e0252-128">[Отдельная база данных](https://docs.microsoft.com/azure/sql-database/sql-database-single-database) с собственным набором ресурсов, управляемых [сервером базы данных SQL](https://docs.microsoft.com/azure/sql-database/sql-database-servers).</span><span class="sxs-lookup"><span data-stu-id="e0252-128">A [Single database](https://docs.microsoft.com/azure/sql-database/sql-database-single-database) with its own set of resources managed by a [SQL Database server](https://docs.microsoft.com/azure/sql-database/sql-database-servers).</span></span> <span data-ttu-id="e0252-129">Одна база данных похожа на [автономную базу данных](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases) , в локальном SQL Serverном развертывании.</span><span class="sxs-lookup"><span data-stu-id="e0252-129">A single database is similar to a [contained database](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases) in an on-premises SQL Server deployment.</span></span>

- <span data-ttu-id="e0252-130">[Эластичный пул](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool) , в котором коллекция баз данных SQL совместно используют один сервер базы данных SQL по заданной цене.</span><span class="sxs-lookup"><span data-stu-id="e0252-130">An [Elastic pool](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool) in which a collection of SQL Databases share a single SQL Database server at a set price.</span></span> <span data-ttu-id="e0252-131">При необходимости отдельные базы данных могут быть перемещены в пул эластичных БД и из него, чтобы оптимизировать производительность для группы баз данных.</span><span class="sxs-lookup"><span data-stu-id="e0252-131">Single databases can be moved in and out of an elastic pool as needed to optimize the price performance for a group of databases.</span></span>

- <span data-ttu-id="e0252-132">[Управляемый экземпляр](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance) , в котором представляет собой набор системных и пользовательских баз данных, обеспечивает совместимость почти 100% с локальной SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e0252-132">A [Managed Instance](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance) in which is a collection of system and user databases provide near-100% compatibility with an on-premises SQL Server.</span></span> <span data-ttu-id="e0252-133">Этот параметр поддерживает большие базы данных размером до 35 ТБ и размещается в [виртуальной сети Azure](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) для лучшей изоляции.</span><span class="sxs-lookup"><span data-stu-id="e0252-133">This option supports larger databases, up to 35 TB and is placed in an [Azure Virtual Network](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) for better isolation.</span></span>

<span data-ttu-id="e0252-134">База данных SQL Azure — это полностью управляемая [платформа как услуга (PaaS) ядро СУБД](https://docs.microsoft.com/azure/sql-database/sql-database-paas) , которая обрабатывает обновление, установку исправлений, резервное копирование и мониторинг без участия пользователя.</span><span class="sxs-lookup"><span data-stu-id="e0252-134">Azure SQL Database is a fully managed [Platform as a Service (PaaS) Database Engine](https://docs.microsoft.com/azure/sql-database/sql-database-paas) that handles upgrading, patching, backups, and monitoring without user involvement.</span></span> <span data-ttu-id="e0252-135">Она всегда запускает последнюю стабильную версию SQL Server ядро СУБД и исправленную ОС и гарантирует доступность 99,99%.</span><span class="sxs-lookup"><span data-stu-id="e0252-135">It always runs the latest stable version of the SQL Server Database Engine and patched OS and guarantees 99.99% availability.</span></span> <span data-ttu-id="e0252-136">Одна из функций, [Активная Георепликация](https://docs.microsoft.com/azure/sql-database/sql-database-active-geo-replication), позволяет создавать базы данных-получатели, доступные для чтения, в том же или другом центре обработки данных Azure.</span><span class="sxs-lookup"><span data-stu-id="e0252-136">One feature, [active geo-replication](https://docs.microsoft.com/azure/sql-database/sql-database-active-geo-replication), lets you create readable secondary databases in the same or a different Azure data center.</span></span> <span data-ttu-id="e0252-137">При сбое можно инициировать отработку отказа в базу данных-получатель.</span><span class="sxs-lookup"><span data-stu-id="e0252-137">Upon failure, a failover to a secondary database can be initiated.</span></span> <span data-ttu-id="e0252-138">На этом этапе другие вторичные реплики автоматически связываются с новым первичным.</span><span class="sxs-lookup"><span data-stu-id="e0252-138">At that point, the other secondaries automatically link to the new primary.</span></span> <span data-ttu-id="e0252-139">В одном или в разных регионах поддерживается до четырех вторичных реплик, и эти получатели также можно использовать для запросов доступа только для чтения.</span><span class="sxs-lookup"><span data-stu-id="e0252-139">Up to four secondary replicas are supported in either the same or in different regions, and these secondaries can also be used for read-only access queries.</span></span>

<span data-ttu-id="e0252-140">База данных SQL Azure включает [встроенные функции мониторинга и интеллектуальной настройки](https://docs.microsoft.com/azure/sql-database/sql-database-monitoring-tuning-index) , которые позволяют максимально повысить производительность и сократить эксплуатационные расходы.</span><span class="sxs-lookup"><span data-stu-id="e0252-140">Azure SQL Database includes [built-in monitoring and intelligent tuning](https://docs.microsoft.com/azure/sql-database/sql-database-monitoring-tuning-index) features that can help you maximize performance and reduce operational costs.</span></span> <span data-ttu-id="e0252-141">Например, функция [автоматической настройки](https://docs.microsoft.com/azure/sql-database/sql-database-automatic-tuning) обеспечивает непрерывную настройку производительности на основе искусственного интеллекта и машинного обучения.</span><span class="sxs-lookup"><span data-stu-id="e0252-141">For example, the [Automatic Tuning](https://docs.microsoft.com/azure/sql-database/sql-database-automatic-tuning) feature provides continuous performance tuning based on AI and machine learning.</span></span> <span data-ttu-id="e0252-142">Служба узнает от выполняемых рабочих нагрузок и может применять рекомендации по настройке.</span><span class="sxs-lookup"><span data-stu-id="e0252-142">The service learns from your running workloads and can apply tuning recommendations.</span></span> <span data-ttu-id="e0252-143">Чем длиннее база данных SQL Azure с включенной автоматической настройкой, тем лучше она работает.</span><span class="sxs-lookup"><span data-stu-id="e0252-143">The longer an Azure SQL Database runs with automatic tuning enabled, the better it performs.</span></span>

<span data-ttu-id="e0252-144">[Сервер базы данных SQL Azure](https://docs.microsoft.com/azure/sql-database/sql-database-serverless) (доступен для предварительного просмотра во время записи этой книги) — это уровень вычислений для отдельных баз данных, которые автоматически масштабируются на основе спроса на рабочую нагрузку и выставляются за секунду.</span><span class="sxs-lookup"><span data-stu-id="e0252-144">[Azure SQL Database serverless](https://docs.microsoft.com/azure/sql-database/sql-database-serverless) (available for preview at time of the writing of this book) is a compute tier for single databases that automatically scales based on workload demand, and bills for the amount of compute used per second.</span></span> <span data-ttu-id="e0252-145">Уровень вычислений "бессерверный" также автоматически приостанавливает базы данных в течение неактивных периодов, чтобы взиматься только плата за хранилище.</span><span class="sxs-lookup"><span data-stu-id="e0252-145">The serverless compute tier also automatically pauses databases during inactive periods so that only storage charges are billed.</span></span> <span data-ttu-id="e0252-146">Он автоматически возобновляется при возврате действия.</span><span class="sxs-lookup"><span data-stu-id="e0252-146">It automatically resumes when activity returns.</span></span>

<span data-ttu-id="e0252-147">Наконец, есть новая ценовая категория для [базы данных SQL Azure](https://azure.microsoft.com/services/sql-database/) .</span><span class="sxs-lookup"><span data-stu-id="e0252-147">Finally, there's the new [Azure SQL Database Hyperscale](https://azure.microsoft.com/services/sql-database/) pricing tier.</span></span><span data-ttu-id="e0252-148"> Он основан на высокомасштабируемой архитектуре хранения и позволяет базе данных увеличиваться по мере необходимости, устраняя необходимость предварительной подготовки ресурсов хранилища.</span><span class="sxs-lookup"><span data-stu-id="e0252-148"> It's powered by a highly scalable storage architecture and enables your database to grow as needed, eliminating the need to pre-provision storage resources.</span></span> <span data-ttu-id="e0252-149">Вы можете масштабировать ресурсы вычислений и хранилища независимо, обеспечивая гибкость для оптимизации производительности каждой рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="e0252-149">You can scale compute and storage resources independently, providing the flexibility to optimize performance for each workload.</span></span> <span data-ttu-id="e0252-150">Масштабирование базы данных SQL Azure оптимизировано для обработки [OLTP](https://en.wikipedia.org/wiki/Online_transaction_processing) и аналитических рабочих нагрузок с высокой пропускной способностью с хранилищем до 100 ТБ.</span><span class="sxs-lookup"><span data-stu-id="e0252-150">Azure SQL Database Hyperscale is optimized for [OLTP](https://en.wikipedia.org/wiki/Online_transaction_processing) processing and high throughput analytic workloads with storage up to 100 TB.</span></span><span data-ttu-id="e0252-151">  При использовании рабочих нагрузок с большим объемом чтения масштабирование обеспечивает быстрое масштабирование путем подготовки дополнительных реплик чтения, необходимых для разгрузки рабочих нагрузок чтения.</span><span class="sxs-lookup"><span data-stu-id="e0252-151">  With read-intensive workloads, Hyperscale provides rapid scale-out by provisioning additional read replicas as needed for offloading read workloads.</span></span>

<span data-ttu-id="e0252-152">Помимо традиционного стека Microsoft SQL Server в Azure также реализованы управляемые версии нескольких популярных баз данных с открытым исходным кодом.</span><span class="sxs-lookup"><span data-stu-id="e0252-152">In addition to the traditional Microsoft SQL Server stack, Azure also features managed versions of several popular open-source databases.</span></span>

## <a name="azure-database-for-mysql"></a><span data-ttu-id="e0252-153">База данных Azure для MySQL</span><span class="sxs-lookup"><span data-stu-id="e0252-153">Azure Database for MySQL</span></span>

<span data-ttu-id="e0252-154">[MySQL](https://en.wikipedia.org/wiki/MySQL) является [реляционной базой данных](https://en.wikipedia.org/wiki/Relational_database_management_system)с [открытым исходным кодом](https://en.wikipedia.org/wiki/Open-source_software).</span><span class="sxs-lookup"><span data-stu-id="e0252-154">[MySQL](https://en.wikipedia.org/wiki/MySQL) is an [open-source](https://en.wikipedia.org/wiki/Open-source_software) [relational database](https://en.wikipedia.org/wiki/Relational_database_management_system).</span></span> <span data-ttu-id="e0252-155">Это компонент в [стеке программного обеспечения лампы](https://en.wikipedia.org/wiki/LAMP_(software_bundle)) , который используется многими крупными организациями, включая Facebook, Twitter и YouTube.</span><span class="sxs-lookup"><span data-stu-id="e0252-155">It's a component in the [LAMP software stack](https://en.wikipedia.org/wiki/LAMP_(software_bundle)) and used by many large organizations, including Facebook, Twitter, and YouTube.</span></span> <span data-ttu-id="e0252-156">Выпуск Community Edition предоставляется бесплатно, а выпуск Enterprise Edition требует приобретения лицензии.</span><span class="sxs-lookup"><span data-stu-id="e0252-156">The community edition is available for free and the enterprise edition requires a license purchase.</span></span> <span data-ttu-id="e0252-157">Продукт, изначально созданный в 1995, был приобретен компанией Sun Microsystems в 2008, полученной Oracle в 2010.</span><span class="sxs-lookup"><span data-stu-id="e0252-157">Originally created in 1995, the product was purchased by Sun Microsystems in 2008, which was acquired by Oracle in 2010.</span></span>

<span data-ttu-id="e0252-158">[База данных Azure для MySQL](https://azure.microsoft.com/services/mysql/) — это полностью управляемая служба реляционной базы данных, готовая к работе в корпоративной среде, на основе ядра MySQL сервера с открытым кодом.</span><span class="sxs-lookup"><span data-stu-id="e0252-158">[Azure Database for MySQL](https://azure.microsoft.com/services/mysql/) is a fully managed, enterprise-ready relational database service based on the open-source MySQL Server engine.</span></span> <span data-ttu-id="e0252-159">Реализуя выпуск MySQL Community, он включает следующие возможности PaaS без дополнительных затрат:</span><span class="sxs-lookup"><span data-stu-id="e0252-159">Implementing the MySQL Community edition, it includes the following PaaS capabilities at no additional cost:</span></span>

- <span data-ttu-id="e0252-160">Встроенная [Высокая доступность](https://docs.microsoft.com/azure/mysql/concepts-high-availability).</span><span class="sxs-lookup"><span data-stu-id="e0252-160">Built-in [high availability](https://docs.microsoft.com/azure/mysql/concepts-high-availability).</span></span>

- <span data-ttu-id="e0252-161">Прогнозируемая производительность с [оплатой по мере](https://docs.microsoft.com/azure/mysql/concepts-pricing-tiers)использования.</span><span class="sxs-lookup"><span data-stu-id="e0252-161">Predictable performance, using inclusive [pay-as-you-go pricing](https://docs.microsoft.com/azure/mysql/concepts-pricing-tiers).</span></span>

- <span data-ttu-id="e0252-162">[Масштабировать](https://docs.microsoft.com/azure/mysql/concepts-high-availability) по мере необходимости в течение нескольких секунд.</span><span class="sxs-lookup"><span data-stu-id="e0252-162">[Scale](https://docs.microsoft.com/azure/mysql/concepts-high-availability) as needed within seconds.</span></span>

- <span data-ttu-id="e0252-163">Защита конфиденциальных данных при хранении и перемещении.</span><span class="sxs-lookup"><span data-stu-id="e0252-163">Secured to protect sensitive data at-rest and in-motion.</span></span>

- <span data-ttu-id="e0252-164">[Автоматическое резервное копирование](https://docs.microsoft.com/azure/mysql/concepts-backup) и [Восстановление до точки во времени](https://docs.microsoft.com/azure/mysql/concepts-backup) до 35 дней.</span><span class="sxs-lookup"><span data-stu-id="e0252-164">[Automatic backups](https://docs.microsoft.com/azure/mysql/concepts-backup) and [point-in-time-restore](https://docs.microsoft.com/azure/mysql/concepts-backup) for up to 35 days.</span></span>

- <span data-ttu-id="e0252-165">Безопасность и соответствие требованиям корпоративного уровня.</span><span class="sxs-lookup"><span data-stu-id="e0252-165">Enterprise-grade security and compliance.</span></span>

<span data-ttu-id="e0252-166">Эти встроенные функции PaaS важны для организаций, которые имеют сотни баз данных "тактических" (нестратегических) в своих центрах обработки данных, но не имеют ресурсов для выполнения исправлений, резервного копирования, обеспечения безопасности и мониторинга производительности.</span><span class="sxs-lookup"><span data-stu-id="e0252-166">These built-in PaaS features are important for organizations who have hundreds of “tactical" (non-strategic) databases in their data centers, but don't have the resources to perform patching, backup, security, and performance monitoring.</span></span>

<span data-ttu-id="e0252-167">Кроме того, [служба Azure Data Migration Service](https://azure.microsoft.com/services/database-migration/) может перенести данные из нескольких источников базы данных в платформы данных Azure с минимальным временем простоя.</span><span class="sxs-lookup"><span data-stu-id="e0252-167">Additionally, the [Azure Data Migration Service](https://azure.microsoft.com/services/database-migration/) can migrate data from multiple database sources to Azure Data platforms with minimal downtime.</span></span> <span data-ttu-id="e0252-168">Служба создает отчеты об оценке и предоставляет рекомендации по изменениям, необходимым для выполнения миграции, как малых, так и больших.</span><span class="sxs-lookup"><span data-stu-id="e0252-168">The service generates assessment reports and provides recommendations to guide you through the changes required to performing a migration, both small or large.</span></span>

<span data-ttu-id="e0252-169">Управляемый [сервер MySQL Azure](https://docs.microsoft.com/azure/mysql/concepts-servers) является центральной точкой администрирования службы.</span><span class="sxs-lookup"><span data-stu-id="e0252-169">The managed [Azure MySQL server](https://docs.microsoft.com/azure/mysql/concepts-servers) is the central administrative point for the service.</span></span> <span data-ttu-id="e0252-170">Это тот же модуль MySQL Server, который используется для локальных развертываний.</span><span class="sxs-lookup"><span data-stu-id="e0252-170">It's the same MySQL server engine used for on-premises deployments.</span></span> <span data-ttu-id="e0252-171">С его помощью можно создать отдельную базу данных для каждого сервера, чтобы использовать все ресурсы или создать несколько баз данных на каждом сервере для совместного использования ресурсов.</span><span class="sxs-lookup"><span data-stu-id="e0252-171">With it, you can create a single database per server to consume all resources or create multiple databases per server to share resources.</span></span> <span data-ttu-id="e0252-172">Ваша команда может продолжить разработку приложений с помощью средств с открытым исходным кодом и выбранной платформы без необходимости изучать новые навыки или управлять виртуальными машинами и инфраструктурой.</span><span class="sxs-lookup"><span data-stu-id="e0252-172">Your team can continue to develop applications with the open-source tools and platform of your choice without having to learn new skills or manage virtual machines and infrastructure.</span></span>

## <a name="azure-database-for-mariadb"></a><span data-ttu-id="e0252-173">База данных Azure для MariaDB</span><span class="sxs-lookup"><span data-stu-id="e0252-173">Azure Database for MariaDB</span></span>

<span data-ttu-id="e0252-174">[MariaDB](https://mariadb.com/) Сервер — это еще один популярный сервер базы данных с открытым кодом.</span><span class="sxs-lookup"><span data-stu-id="e0252-174">[MariaDB](https://mariadb.com/) Server is another popular open-source database server.</span></span> <span data-ttu-id="e0252-175">Она была создана как вилка MySQL исходными разработчиками MySQL в тот момент, когда Oracle приобрел Sun Microsystems, который владеет MySQL.</span><span class="sxs-lookup"><span data-stu-id="e0252-175">It was created as a fork of MySQL by the original developers of MySQL at the time that Oracle purchased Sun Microsystems who owned MySQL.</span></span> <span data-ttu-id="e0252-176">Цель заключается в том, чтобы MariaDB оставался открытым исходным кодом.</span><span class="sxs-lookup"><span data-stu-id="e0252-176">The intent was to ensure that MariaDB remained open-source.</span></span>

<span data-ttu-id="e0252-177">Поскольку MariaDB является [вилкой MySQL](https://blog.panoply.io/a-comparative-vmariadb-vs-mysql), определения данных и таблиц совместимы, а клиентские протоколы, структуры и интерфейсы API — Close-компиляция.</span><span class="sxs-lookup"><span data-stu-id="e0252-177">Since MariaDB is a [fork of MySQL](https://blog.panoply.io/a-comparative-vmariadb-vs-mysql), the data and table definitions are compatible, and the client protocols, structures, and APIs, are close-knit.</span></span> <span data-ttu-id="e0252-178">Соединители данных MySQL будут работать MariaDB без изменений.</span><span class="sxs-lookup"><span data-stu-id="e0252-178">MySQL data connectors will work MariaDB without modification.</span></span>

<span data-ttu-id="e0252-179">MariaDB имеет высокую важность и используется многими крупными предприятиями.</span><span class="sxs-lookup"><span data-stu-id="e0252-179">MariaDB has a strong following and is used by many large enterprises.</span></span> <span data-ttu-id="e0252-180">Несмотря на то, что Oracle продолжит поддерживать, улучшать и поддерживать MySQL, MariaDB управляется MariaDB Foundation, что позволяет получить общедоступные материалы по продукту и документации.</span><span class="sxs-lookup"><span data-stu-id="e0252-180">While Oracle continues to maintain, enhance and support MySQL, MariaDB is managed by the MariaDB Foundation allowing public contributions to the product and documentation.</span></span>

<span data-ttu-id="e0252-181">[База данных Azure для MariaDB](https://azure.microsoft.com/services/mariadb/) — это полностью управляемая база данных как услуга в облаке Azure.</span><span class="sxs-lookup"><span data-stu-id="e0252-181">[Azure Database for MariaDB](https://azure.microsoft.com/services/mariadb/) is a fully managed database as a service in the Azure cloud.</span></span> <span data-ttu-id="e0252-182">Он основан на ядре сервера [MariaDB Community Edition](https://mariadb.org/download/) .</span><span class="sxs-lookup"><span data-stu-id="e0252-182">It's based on the [MariaDB community edition](https://mariadb.org/download/) server engine.</span></span> <span data-ttu-id="e0252-183">Она может обслуживать критически важные рабочие нагрузки с прогнозируемой производительностью и динамической масштабируемостью.</span><span class="sxs-lookup"><span data-stu-id="e0252-183">It can handle mission-critical workloads with predictable performance and dynamic scalability.</span></span> <span data-ttu-id="e0252-184">Подобно другим платформам баз данных Azure, она включает многие возможности платформы как услуги без дополнительных затрат:</span><span class="sxs-lookup"><span data-stu-id="e0252-184">Similar to the other Azure Database platforms, it includes many Platform-as-a-Service capabilities at no additional cost:</span></span>

- <span data-ttu-id="e0252-185">Встроенная [Высокая доступность](https://docs.microsoft.com/azure/mariadb/concepts-high-availability).</span><span class="sxs-lookup"><span data-stu-id="e0252-185">Built-in [high availability](https://docs.microsoft.com/azure/mariadb/concepts-high-availability).</span></span>

- <span data-ttu-id="e0252-186">Прогнозируемая производительность с [оплатой по мере](https://docs.microsoft.com/azure/mariadb/concepts-pricing-tiers)использования.</span><span class="sxs-lookup"><span data-stu-id="e0252-186">Predictable performance, using inclusive [pay-as-you-go pricing](https://docs.microsoft.com/azure/mariadb/concepts-pricing-tiers).</span></span>

- <span data-ttu-id="e0252-187">[Масштабирование](https://docs.microsoft.com/azure/mariadb/concepts-high-availability) по мере необходимости в течение нескольких секунд.</span><span class="sxs-lookup"><span data-stu-id="e0252-187">[Scaling](https://docs.microsoft.com/azure/mariadb/concepts-high-availability) as needed within seconds.</span></span>

- <span data-ttu-id="e0252-188">Безопасная Защита конфиденциальных данных при хранении и перемещении.</span><span class="sxs-lookup"><span data-stu-id="e0252-188">Secured protection of sensitive data at rest and in-motion.</span></span>

- <span data-ttu-id="e0252-189">[Автоматическое резервное копирование](https://docs.microsoft.com/azure/mariadb/concepts-backup) и [Восстановление до точки во времени](https://docs.microsoft.com/azure/mariadb/concepts-backup) до 35 дней.</span><span class="sxs-lookup"><span data-stu-id="e0252-189">[Automatic backups](https://docs.microsoft.com/azure/mariadb/concepts-backup) and [point-in-time-restore](https://docs.microsoft.com/azure/mariadb/concepts-backup) for up to 35 days.</span></span>

- <span data-ttu-id="e0252-190">Безопасность и соответствие требованиям корпоративного уровня.</span><span class="sxs-lookup"><span data-stu-id="e0252-190">Enterprise-grade security and compliance.</span></span>

## <a name="azure-database-for-postgresql"></a><span data-ttu-id="e0252-191">База данных Azure для PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="e0252-191">Azure Database for PostgreSQL</span></span>

<span data-ttu-id="e0252-192">[PostgreSQL](https://www.postgresql.org/) — это еще одна популярная реляционная база данных с открытым исходным кодом в течение более 30 лет активной разработки.</span><span class="sxs-lookup"><span data-stu-id="e0252-192">[PostgreSQL](https://www.postgresql.org/) is another popular, open-source relational database with over 30 years of active development.</span></span> <span data-ttu-id="e0252-193">Это общецелевая и объектно-реляционная система управления базами данных.</span><span class="sxs-lookup"><span data-stu-id="e0252-193">It's a general purpose and object-relational database management system.</span></span> <span data-ttu-id="e0252-194">Его лицензирование считается «широкие», и продукт можно использовать, изменять и распространять в любой форме.</span><span class="sxs-lookup"><span data-stu-id="e0252-194">Its licensing is considered to be “liberal” and the product is free to use, modify, and distribute in any form.</span></span> <span data-ttu-id="e0252-195">Многие крупные предприятия, включая Apple, Red Hat и Fujitsu, имеют встроенные продукты, использующие PostgreSQL.</span><span class="sxs-lookup"><span data-stu-id="e0252-195">Many large enterprises including Apple, Red Hat, and Fujitsu have built products using PostgreSQL.</span></span>

<span data-ttu-id="e0252-196">[База данных Azure для PostgreSQL](https://azure.microsoft.com/services/postgresql/) — это полностью управляемая служба реляционных баз данных, основанная на ядре СУБД Postgres с открытым исходным кодом.</span><span class="sxs-lookup"><span data-stu-id="e0252-196">[Azure Database for PostgreSQL](https://azure.microsoft.com/services/postgresql/) is a fully managed relational database service, based on the open-source Postgres database engine.</span></span> <span data-ttu-id="e0252-197">Он может обслуживать критически важные рабочие нагрузки с прогнозируемой производительностью, безопасностью, высокой доступностью и динамической масштабируемостью.</span><span class="sxs-lookup"><span data-stu-id="e0252-197">It can handle mission-critical workloads with predictable performance, security, high availability, and dynamic scalability.</span></span> <span data-ttu-id="e0252-198">Он поддерживает несколько платформ и языков с открытым кодом (включая C++Java, Python, Node, C\#и PHP).</span><span class="sxs-lookup"><span data-stu-id="e0252-198">It supports several open-source frameworks and languages—including C++, Java, Python, Node, C\#, and PHP.</span></span> <span data-ttu-id="e0252-199">Это позволяет выполнять [миграцию](https://datamigration.microsoft.com/scenario/postgresql-to-azurepostgresql?step=1) баз данных PostgreSQL с помощью интерфейса командной строки или [службы Azure Data Migration Service](https://azure.microsoft.com/services/database-migration/).</span><span class="sxs-lookup"><span data-stu-id="e0252-199">It enables [migration](https://datamigration.microsoft.com/scenario/postgresql-to-azurepostgresql?step=1) of PostgreSQL databases through a command-line interface or the [Azure Data Migration Service](https://azure.microsoft.com/services/database-migration/).</span></span>

<span data-ttu-id="e0252-200">Служба включает [встроенные средства анализа](https://docs.microsoft.com/azure/postgresql/concepts-monitoring) , которые изменяют уникальные шаблоны баз данных и предоставляют настраиваемые рекомендации и аналитические сведения для повышения производительности базы данных PostgreSQL.</span><span class="sxs-lookup"><span data-stu-id="e0252-200">The service includes [built-in intelligence](https://docs.microsoft.com/azure/postgresql/concepts-monitoring) that studies your unique database patterns and provides customized recommendations and insights to help you maximize the performance of your PostgreSQL database.</span></span> <span data-ttu-id="e0252-201">[Advanced Threat protection](https://docs.microsoft.com/azure/postgresql/concepts-data-access-and-security-threat-protection) отслеживает базу данных по часам и обнаруживает потенциальные вредоносные действия, уведомляя вас об обнаружении, чтобы вы могли сразу же прибегнуть к работе.</span><span class="sxs-lookup"><span data-stu-id="e0252-201">[Advanced Threat Protection](https://docs.microsoft.com/azure/postgresql/concepts-data-access-and-security-threat-protection) monitors your database around the clock and detects potential malicious activities, alerting you upon detection so you can intervene right away.</span></span>

<span data-ttu-id="e0252-202">База данных Azure для PostgreSQL доступна в виде двух вариантов развертывания: один сервер и горизонтальное масштабирование (Цитус), доступные для предварительного просмотра во время записи этой книги.</span><span class="sxs-lookup"><span data-stu-id="e0252-202">Azure Database for PostgreSQL is available as two deployment options: Single Server and Hyperscale (Citus), available for preview at time of the writing of this book</span></span>

- <span data-ttu-id="e0252-203">Вариант развертывания с [одним сервером](https://docs.microsoft.com/azure/postgresql/concepts-servers) является центральной точкой администрирования для нескольких баз данных.</span><span class="sxs-lookup"><span data-stu-id="e0252-203">The [Single Server](https://docs.microsoft.com/azure/postgresql/concepts-servers) deployment option is a central administrative point for multiple databases.</span></span> <span data-ttu-id="e0252-204">Это тот же механизм сервера PostgreSQL, что и для локальных развертываний.</span><span class="sxs-lookup"><span data-stu-id="e0252-204">It's the same PostgreSQL server engine available for on-premises deployments.</span></span> <span data-ttu-id="e0252-205">С его помощью можно создать отдельную базу данных для каждого сервера, чтобы использовать все ресурсы или создать несколько баз данных для совместного использования ресурсов.</span><span class="sxs-lookup"><span data-stu-id="e0252-205">With it, you can create a single database per server to consume all resources or create multiple databases to share the resources.</span></span> <span data-ttu-id="e0252-206">Цены структурированы для каждого сервера на основе ядер и хранилища.</span><span class="sxs-lookup"><span data-stu-id="e0252-206">The pricing is structured per-server based upon cores and storage.</span></span>

- <span data-ttu-id="e0252-207">[Параметр «Цитус](https://azure.microsoft.com/blog/get-high-performance-scaling-for-your-azure-database-workloads-with-hyperscale/) » на основе технологии [Цитус Data](https://www.citusdata.com/) .</span><span class="sxs-lookup"><span data-stu-id="e0252-207">The [Hyperscale (Citus) option](https://azure.microsoft.com/blog/get-high-performance-scaling-for-your-azure-database-workloads-with-hyperscale/) is powered by [Citus Data](https://www.citusdata.com/) technology.</span></span> <span data-ttu-id="e0252-208">Он обеспечивает высокопроизводительное масштабирование, горизонтально развернув отдельную базу данных на сотнях узлов, чтобы обеспечить располагают высокую производительность и масштабируемость.</span><span class="sxs-lookup"><span data-stu-id="e0252-208">It enables high-performance scaling by horizontally scaling a single database across hundreds of nodes to deliver blazingly fast performance and scale.</span></span> <span data-ttu-id="e0252-209">Этот параметр позволяет подсистеме разместить больше данных в памяти, параллельно выполнять запросы на сотни узлов и быстрее индексировать данные.</span><span class="sxs-lookup"><span data-stu-id="e0252-209">This option allows the engine to fit more data in memory, parallelize queries across hundreds of nodes, and index data faster.</span></span> <span data-ttu-id="e0252-210">Функция масштабирования совместима с последними нововведениями, версиями и инструментами для PostgreSQL, поэтому вы можете использовать имеющийся опыт PostgreSQL.</span><span class="sxs-lookup"><span data-stu-id="e0252-210">The Hyperscale feature is compatible with the latest innovations, versions, and tools for PostgreSQL, so you can leverage your existing PostgreSQL expertise.</span></span>

## <a name="cosmos-db"></a><span data-ttu-id="e0252-211">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="e0252-211">Cosmos DB</span></span>

<span data-ttu-id="e0252-212">Azure Cosmos DB представляет собой полностью управляемую глобально распределенную службу базы данных NoSQL, которая обеспечивает низкую задержку, масштабируемость, согласованность управляемых данных и высокую доступность.</span><span class="sxs-lookup"><span data-stu-id="e0252-212">Azure Cosmos DB is a fully managed, globally distributed NoSQL database service that's designed to provide low latency, elastic scalability, managed data consistency, and high availability.</span></span> <span data-ttu-id="e0252-213">Коротко говоря, если приложение должно гарантировать быстрое время отклика в любой точке мира, если оно должно быть всегда в сети и требует неограниченного и эластичного масштабирования пропускной способности и хранилища, Cosmos DB является отличным выбором.</span><span class="sxs-lookup"><span data-stu-id="e0252-213">In short, if your application needs guaranteed fast response time anywhere in the world, if it's required to be always online and needs unlimited and elastic scalability of throughput and storage, Cosmos DB is a great choice.</span></span> <span data-ttu-id="e0252-214">На рис. 5-13 показан общий обзор Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="e0252-214">Figure 5-13 shows a high-level overview of Cosmos DB.</span></span>

![Общие сведения о Cosmos DB](./media/cosmos-db-overview.png)

<span data-ttu-id="e0252-216">**Рис. 5-13**. Обзор Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="e0252-216">**Figure 5-13**: Overview of Cosmos DB</span></span>

<span data-ttu-id="e0252-217">Обратите внимание на рис. 5-13 Cosmos DB является надежной и высокоуниверсальной службой баз данных с множеством встроенных возможностей облака.</span><span class="sxs-lookup"><span data-stu-id="e0252-217">Note in the Figure 5-13 how Cosmos DB is a robust and highly versatile database service with many built-in cloud-native capabilities.</span></span> <span data-ttu-id="e0252-218">В этом разделе мы рассмотрим их Подробнее.</span><span class="sxs-lookup"><span data-stu-id="e0252-218">In this section, we’ll take a closer look at them.</span></span>

### <a name="global-support"></a><span data-ttu-id="e0252-219">Глобальная поддержка</span><span class="sxs-lookup"><span data-stu-id="e0252-219">Global Support</span></span>

<span data-ttu-id="e0252-220">Вы можете глобально распределять базы данных Cosmos по всем регионам Azure по всему миру, размещая данные ближе к пользователям, повышая время отклика и уменьшая задержку.</span><span class="sxs-lookup"><span data-stu-id="e0252-220">You can globally distribute Cosmos databases across all Azure regions across the world, placing data close to your users, improving response time, and reducing latency.</span></span> <span data-ttu-id="e0252-221">Можно добавить или удалить базу данных из региона без приостановки или повторного развертывания приложения.</span><span class="sxs-lookup"><span data-stu-id="e0252-221">You can add or remove a database from a region without pausing or redeploying your application.</span></span> <span data-ttu-id="e0252-222">В фоновом режиме Cosmos DB прозрачно реплицирует данные во все настроенные регионы.</span><span class="sxs-lookup"><span data-stu-id="e0252-222">In the background, Cosmos DB transparently replicates the data to all of the configured regions.</span></span>

<span data-ttu-id="e0252-223">Cosmos DB поддерживает кластеризацию [Active/Active](https://kemptechnologies.com/white-papers/unfog-confusion-active-passive-activeactive-load-balancing/) на глобальном уровне, позволяя настраивать любые или все регионы базы данных для поддержки операций записи и чтения.</span><span class="sxs-lookup"><span data-stu-id="e0252-223">Cosmos DB supports [active/active](https://kemptechnologies.com/white-papers/unfog-confusion-active-passive-activeactive-load-balancing/) clustering at the global level, enabling you to configure any or all your database regions to support both writes and reads.</span></span>

<span data-ttu-id="e0252-224">Функция использования [нескольких основных](https://docs.microsoft.com/azure/cosmos-db/how-to-multi-master) протоколов в Cosmos DB обеспечивает следующие функциональные возможности:</span><span class="sxs-lookup"><span data-stu-id="e0252-224">The [Multi-Master](https://docs.microsoft.com/azure/cosmos-db/how-to-multi-master) protocol feature in Cosmos DB enables the following functionality:</span></span>

- <span data-ttu-id="e0252-225">Неограниченная эластичная запись и масштабируемость чтения.</span><span class="sxs-lookup"><span data-stu-id="e0252-225">Unlimited elastic write and read scalability.</span></span>

- <span data-ttu-id="e0252-226">99,999% доступности для чтения и записи по всему миру.</span><span class="sxs-lookup"><span data-stu-id="e0252-226">99.999% read and write availability all around the world.</span></span>

- <span data-ttu-id="e0252-227">Гарантированные операции чтения и записи, обслуживаемые менее чем на 10 миллисекунд, на 99-м процентиль.</span><span class="sxs-lookup"><span data-stu-id="e0252-227">Guaranteed reads and writes served in less than 10 milliseconds at the 99th percentile.</span></span>

<span data-ttu-id="e0252-228">На внутреннем уровне Cosmos DB обрабатывает репликацию данных между регионами с гарантиями уровня согласованности и финансовыми резервными соглашениями об уровнях обслуживания.</span><span class="sxs-lookup"><span data-stu-id="e0252-228">Internally, Cosmos DB handles data replication between regions with consistency level guarantees and financially backed service level agreements.</span></span>

<span data-ttu-id="e0252-229">С помощью Cosmos DB [API-интерфейсов с несколькими](https://docs.microsoft.com/azure/cosmos-db/distribute-data-globally)адресами приложение может автоматически получать информацию о ближайшем регионе Azure и отсылать запросы к ней.</span><span class="sxs-lookup"><span data-stu-id="e0252-229">With the Cosmos DB [Multi-Homing APIs](https://docs.microsoft.com/azure/cosmos-db/distribute-data-globally), your application can automatically become aware of the nearest Azure region and send requests to it.</span></span> <span data-ttu-id="e0252-230">Ближайший регион определяется Cosmos DB без каких-либо изменений конфигурации.</span><span class="sxs-lookup"><span data-stu-id="e0252-230">The nearest region is identified by Cosmos DB without any configuration changes.</span></span> <span data-ttu-id="e0252-231">Если регион станет недоступным, Cosmos DB поддерживает автоматическую отработку отказа, а функция множественной адресации автоматически направит запрос в ближайший доступный регион.</span><span class="sxs-lookup"><span data-stu-id="e0252-231">Should a region become unavailable, Cosmos DB supports automatic failover, and the Multi-Homing feature will automatically route your request to the next nearest available region.</span></span>

### <a name="multi-model-support"></a><span data-ttu-id="e0252-232">Поддержка нескольких моделей</span><span class="sxs-lookup"><span data-stu-id="e0252-232">Multi-Model Support</span></span>

<span data-ttu-id="e0252-233">Cosmos DB — это *Платформа данных с несколькими моделями* , позволяющая взаимодействовать с данными с помощью ряда поддерживаемых моделей NoSQL, включая документы, пары "ключ-значение", представления расширенных столбцов и графов.</span><span class="sxs-lookup"><span data-stu-id="e0252-233">Cosmos DB is a *multi-model data platform* enabling you to interact with your data using a number of supported NoSQL models, including documents, key-value pairs, wide-column, and graph representations.</span></span> <span data-ttu-id="e0252-234">На внутреннем уровне данные хранятся в простом формате [структуры](https://docs.microsoft.com/dotnet/csharp/programming-guide/classes-and-structs/using-structs) , который состоит из примитивных типов данных, включая строки, логические значения и числа.</span><span class="sxs-lookup"><span data-stu-id="e0252-234">Internally, data is stored in a simple [struct](https://docs.microsoft.com/dotnet/csharp/programming-guide/classes-and-structs/using-structs) format made up of primitive data types, including strings, bools, and numbers.</span></span> <span data-ttu-id="e0252-235">Для каждого запроса ядро СУБД преобразует данные в выбранное представление модели.</span><span class="sxs-lookup"><span data-stu-id="e0252-235">For each request, the database engine translates data into the model representation you have selected.</span></span> <span data-ttu-id="e0252-236">Вы можете выбрать собственный Cosmos DB API на основе SQL или любой [интерфейс API совместимости](https://www.wikiwand.com/en/Cosmos_DB) , показанный на рис. 5-14.</span><span class="sxs-lookup"><span data-stu-id="e0252-236">You can choose from a proprietary Cosmos DB SQL-based API or any of the [compatibility APIs](https://www.wikiwand.com/en/Cosmos_DB) shown in Figure 5-14.</span></span>

![Поставщики Cosmos DB](./media/cosmos-db-providers.png)

<span data-ttu-id="e0252-238">**Рис. 5-14**. поставщики Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="e0252-238">**Figure 5-14**: Cosmos DB providers</span></span>

<span data-ttu-id="e0252-239">Обратите внимание на рис. 5-14, как Cosmos DB поддерживает [хранилище таблиц](https://azure.microsoft.com/services/storage/tables/).</span><span class="sxs-lookup"><span data-stu-id="e0252-239">Note in Figure 5-14 how Cosmos DB supports [Table Storage](https://azure.microsoft.com/services/storage/tables/).</span></span> <span data-ttu-id="e0252-240">Как Cosmos DB, так и [хранилище таблиц Azure](https://docs.microsoft.com/azure/cosmos-db/table-storage-overview) используют одну и ту же базовую модель таблицы и предоставляют многие из одних и тех же операций с таблицами.</span><span class="sxs-lookup"><span data-stu-id="e0252-240">Both Cosmos DB and [Azure Table Storage](https://docs.microsoft.com/azure/cosmos-db/table-storage-overview) share the same underlying table model and expose many of the same table operations.</span></span> <span data-ttu-id="e0252-241">Однако [Cosmos DB API таблиц](https://docs.microsoft.com/azure/cosmos-db/table-introduction) предоставляет множество улучшений уровня "Премиум", недоступных в API службы хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="e0252-241">However, the [Cosmos DB Table API](https://docs.microsoft.com/azure/cosmos-db/table-introduction) provides many premium enhancements not available in the Azure Storage API.</span></span> <span data-ttu-id="e0252-242">Эти функции отличаются на рис. 5-15.</span><span class="sxs-lookup"><span data-stu-id="e0252-242">These features are contrasted in Figure 5-15.</span></span>

![API таблиц Azure](./media/azure-table-api.png)

<span data-ttu-id="e0252-244">**Рис. 5-15**. Azure API таблиц</span><span class="sxs-lookup"><span data-stu-id="e0252-244">**Figure 5-15**: Azure Table API</span></span>

<span data-ttu-id="e0252-245">Приложения, написанные для хранилища таблиц Azure, можно перенести в Azure Cosmos DB с помощью API таблиц без изменений кода.</span><span class="sxs-lookup"><span data-stu-id="e0252-245">Applications written for Azure Table storage can migrate to Azure Cosmos DB by using the Table API with no code changes.</span></span>

<span data-ttu-id="e0252-246">В сценариях приложений [серия статей Brownfield](https://en.wikipedia.org/wiki/Brownfield_(software_development)) группы разработчиков могут перенести существующие базы данных Mongo, Gremlin или Cassandra в Cosmos DB с минимальными изменениями существующих данных или кода приложения.</span><span class="sxs-lookup"><span data-stu-id="e0252-246">In [Brownfield](https://en.wikipedia.org/wiki/Brownfield_(software_development)) application scenarios, development teams can migrate existing Mongo, Gremlin, or Cassandra databases into Cosmos DB with minimal changes to the existing data or application code.</span></span> <span data-ttu-id="e0252-247">В сценариях [нуля](https://en.wikipedia.org/wiki/Greenfield_project) группы разработчиков могут выбрать модель данных, которая наилучшим образом соответствует их требованиям и предпочтениям, включая полностью Поддерживаемые параметры с открытым исходным кодом для платформ MongoDB, Cassandra и Gremlin.</span><span class="sxs-lookup"><span data-stu-id="e0252-247">For [Greenfield](https://en.wikipedia.org/wiki/Greenfield_project) scenarios, development teams can choose the data model that best meets their requirements and preferences, including fully supported open-source options for the MongoDB, Cassandra, and Gremlin platforms.</span></span>

### <a name="consistency-models"></a><span data-ttu-id="e0252-248">Модели согласованности</span><span class="sxs-lookup"><span data-stu-id="e0252-248">Consistency Models</span></span>

<span data-ttu-id="e0252-249">Ранее в *реляционном и NoSQL* разделе мы обсуждали тему *согласованности данных*, которая является термином, указывающим на целостность данных.</span><span class="sxs-lookup"><span data-stu-id="e0252-249">Earlier in the *Relational versus NoSQL* section, we discussed the subject of *data consistency*, which is a term that refers to the integrity of your data.</span></span> <span data-ttu-id="e0252-250">Распределенные базы данных, использующие репликацию для обеспечения высокой доступности, низкой задержки или и того и другого, должны обеспечить фундаментальный компромисс между согласованностью чтения, доступностью и задержкой.</span><span class="sxs-lookup"><span data-stu-id="e0252-250">Distributed databases that rely on replication for high availability, low latency, or both, must make a fundamental tradeoff between read consistency, availability, and latency.</span></span>

<span data-ttu-id="e0252-251">Большинство распределенных баз данных позволяют разработчикам выбирать между двумя моделями согласованности: [строгая согласованность](https://en.wikipedia.org/wiki/Strong_consistency) и [Окончательная согласованность](https://en.wikipedia.org/wiki/Eventual_consistency).</span><span class="sxs-lookup"><span data-stu-id="e0252-251">Most distributed databases allow developers to choose between two consistency models: [strong consistency](https://en.wikipedia.org/wiki/Strong_consistency) and [eventual consistency](https://en.wikipedia.org/wiki/Eventual_consistency).</span></span> <span data-ttu-id="e0252-252">*Строгая согласованность* является золотым стандартом для программирования данных.</span><span class="sxs-lookup"><span data-stu-id="e0252-252">*Strong consistency* is the gold standard of data programmability.</span></span> <span data-ttu-id="e0252-253">Это гарантирует, что результат запроса всегда будет возвращать самые актуальные данные, даже если система должна вызвать задержку, ожидающую обновления, для репликации во всех копиях базы данных.</span><span class="sxs-lookup"><span data-stu-id="e0252-253">It guarantees that a query result will always return the most current data, even if  the system must incur latency waiting for an update to replicate across all database copies.</span></span> <span data-ttu-id="e0252-254">С другой стороны, система, настроенная для *окончательной согласованности* , будет возвращать данные немедленно, даже если эти данные не являются самой последней копией.</span><span class="sxs-lookup"><span data-stu-id="e0252-254">On the other hand, a system configured for *eventual consistency* will return data immediately, even if that data isn't the most current copy.</span></span> <span data-ttu-id="e0252-255">Этот параметр обеспечивает повышенную доступность, большую масштабируемость и повышает производительность.</span><span class="sxs-lookup"><span data-stu-id="e0252-255">This option enables higher availability, greater scale, and increased performance.</span></span>

<span data-ttu-id="e0252-256">Azure Cosmos DB предлагает широкий спектр [пяти четко определенных моделей согласованности](https://docs.microsoft.com/azure/cosmos-db/consistency-levels) , показанных на рисунке 5-16.</span><span class="sxs-lookup"><span data-stu-id="e0252-256">Azure Cosmos DB offers a spectrum of [five well-defined consistency models](https://docs.microsoft.com/azure/cosmos-db/consistency-levels) shown in Figure 5-16.</span></span> <span data-ttu-id="e0252-257">Эти параметры позволяют делать точные варианты и детальные компромиссы относительно доступности и производительности в зависимости от потребностей вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="e0252-257">These options enable you to make precise choices and granular tradeoffs with respect to availability and performance based on the needs of your application.</span></span> <span data-ttu-id="e0252-258">Эти модели четко определены, интуитивно понятны и поддерживаются соглашениями об уровне обслуживания (SLA).</span><span class="sxs-lookup"><span data-stu-id="e0252-258">These models are well-defined, intuitive, and backed by the service level agreements (SLAs).</span></span>

![Уровни согласованности Cosmos DB](./media/cosmos-db-consistency-levels.png)

<span data-ttu-id="e0252-260">**Рис. 5-16**. Cosmos DB уровней согласованности</span><span class="sxs-lookup"><span data-stu-id="e0252-260">**Figure 5-16**: Cosmos DB Consistency Levels</span></span>

### <a name="partitioning"></a><span data-ttu-id="e0252-261">Секционирование</span><span class="sxs-lookup"><span data-stu-id="e0252-261">Partitioning</span></span>

<span data-ttu-id="e0252-262">Azure Cosmos DB использует автоматическое [секционирование](https://docs.microsoft.com/azure/cosmos-db/partitioning-overview) для масштабирования базы данных в соответствии с потребностями производительности приложения.</span><span class="sxs-lookup"><span data-stu-id="e0252-262">Azure Cosmos DB uses automatic [partitioning](https://docs.microsoft.com/azure/cosmos-db/partitioning-overview) to scale the database to meet the performance needs of your application.</span></span>

<span data-ttu-id="e0252-263">Управление данными в Cosmos DB данных осуществляется путем создания [баз данных, контейнеров и элементов](https://docs.microsoft.com/azure/cosmos-db/databases-containers-items), показанных на рисунке 5-17.</span><span class="sxs-lookup"><span data-stu-id="e0252-263">You manage data in Cosmos DB data by creating [databases, containers, and items](https://docs.microsoft.com/azure/cosmos-db/databases-containers-items), shown in Figure 5-17.</span></span>

![Cosmos DB сущности](./media/cosmos-db-entities.png)

<span data-ttu-id="e0252-265">**Рис. 5-17**. Иерархия сущностей Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="e0252-265">**Figure 5-17**: Hierarchy of Cosmos DB entities</span></span>

<span data-ttu-id="e0252-266">Обратите внимание на рис. 5-17, как начать с создания базы данных Cosmos DB в учетной записи базы данных.</span><span class="sxs-lookup"><span data-stu-id="e0252-266">Note in Figure 5-17 how you start by creating a Cosmos DB database inside of a database account.</span></span> <span data-ttu-id="e0252-267">Эта база данных станет единицей управления для набора контейнеров.</span><span class="sxs-lookup"><span data-stu-id="e0252-267">That database becomes the unit of management for a set of containers.</span></span> <span data-ttu-id="e0252-268">Контейнер — это не зависящее от схемы группирование элементов, которые могут быть выражены в виде коллекции, таблицы или графа на основе выбранного поставщика API (рассматривается в предыдущем разделе).</span><span class="sxs-lookup"><span data-stu-id="e0252-268">A container is a schema-agnostic grouping of items that can be expressed as a collection, table, or graph, based on your selected API provider (discussed in the prior section).</span></span> <span data-ttu-id="e0252-269">Элементы — это данные, которые добавляются в контейнер и представляются в виде документов, строк, узлов или границ.</span><span class="sxs-lookup"><span data-stu-id="e0252-269">Items are the data that you add to the container and are represented as documents, rows, nodes, or edges.</span></span> <span data-ttu-id="e0252-270">По умолчанию все элементы, добавляемые в контейнер, автоматически индексируются без необходимости явного управления индексами или схемой.</span><span class="sxs-lookup"><span data-stu-id="e0252-270">By default, all items that you add to a container are automatically indexed without requiring explicit index or schema management.</span></span>

<span data-ttu-id="e0252-271">Чтобы секционировать контейнер, элементы делятся на отдельные подмножества, называемые [логическими секциями](https://docs.microsoft.com/azure/cosmos-db/partition-data).</span><span class="sxs-lookup"><span data-stu-id="e0252-271">To partition the container, items are divided into distinct subsets called [logical partitions](https://docs.microsoft.com/azure/cosmos-db/partition-data).</span></span> <span data-ttu-id="e0252-272">Логические секции создаются на основе значения ключа секции, связанного с каждым элементом в контейнере.</span><span class="sxs-lookup"><span data-stu-id="e0252-272">Logical partitions are created based on the value of a partition key that is associated with each item in a container.</span></span> <span data-ttu-id="e0252-273">На рис. 5-18 показано, как все элементы в логической секции имеют одинаковое значение ключа секции.</span><span class="sxs-lookup"><span data-stu-id="e0252-273">Figure 5-18 shows how all items in a logical partition have the same partition key value.</span></span>

![Механизм секционирования Cosmos DB](./media/cosmos-db-partitioning.png)

<span data-ttu-id="e0252-275">**Рис. 5-18**. механизм секционирования Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="e0252-275">**Figure 5-18**: Cosmos DB partitioning mechanics</span></span>

<span data-ttu-id="e0252-276">Обратите внимание на рис. 5-18, как каждый элемент включает ключ раздела «City» или «аэропорт».</span><span class="sxs-lookup"><span data-stu-id="e0252-276">Note in Figure 5-18 how each item includes a partition key of either ‘city’ or ‘airport’.</span></span> <span data-ttu-id="e0252-277">Этот ключ секции определяет логическую секцию элемента.</span><span class="sxs-lookup"><span data-stu-id="e0252-277">This partition key determines the item’s logical partition.</span></span> <span data-ttu-id="e0252-278">Каждый код города назначается логической секции в контейнере на левой стороне и с кодом аэропорта в контейнере справа.</span><span class="sxs-lookup"><span data-stu-id="e0252-278">Each city code is assigned to a logical partition in the container on the left-side and those with an airport code to the container on the right.</span></span> <span data-ttu-id="e0252-279">Сочетание значения ключа секции со значением идентификатора элемента создает индекс элемента, однозначно определяющий элемент.</span><span class="sxs-lookup"><span data-stu-id="e0252-279">Combining the partition key value with an item's ID value creates the item's index, which uniquely identifies the item.</span></span>

<span data-ttu-id="e0252-280">На внутреннем уровне Cosmos DB автоматически управляет размещением [логических секций](https://docs.microsoft.com/azure/cosmos-db/partition-data) в [физических секциях](https://docs.microsoft.com/azure/cosmos-db/partition-data) для эффективного удовлетворения требований к масштабируемости и производительности контейнера.</span><span class="sxs-lookup"><span data-stu-id="e0252-280">Internally, Cosmos DB automatically manages the placement of [logical partitions](https://docs.microsoft.com/azure/cosmos-db/partition-data) on [physical partitions](https://docs.microsoft.com/azure/cosmos-db/partition-data) to efficiently satisfy the scalability and performance needs of the container.</span></span> <span data-ttu-id="e0252-281">По мере увеличения пропускной способности и требований к хранению приложений Azure Cosmos DB перемещает логические секции для повторного распределения нагрузки между большим количеством серверов.</span><span class="sxs-lookup"><span data-stu-id="e0252-281">As the throughput and storage requirements of an application increase, Azure Cosmos DB moves logical partitions to redistribute the load across a greater number of servers.</span></span> <span data-ttu-id="e0252-282">Эти операции перераспределения управляются Cosmos DB и выполняются без прерывания или простоя.</span><span class="sxs-lookup"><span data-stu-id="e0252-282">These redistribution operations are managed by Cosmos DB and are performed without any interruption or downtime.</span></span>

## <a name="azure-redis-cache"></a><span data-ttu-id="e0252-283">Кэш Redis для Azure</span><span class="sxs-lookup"><span data-stu-id="e0252-283">Azure Redis Cache</span></span>

<span data-ttu-id="e0252-284">Преимущества кэширования для повышения производительности и масштабируемости хорошо понятны.</span><span class="sxs-lookup"><span data-stu-id="e0252-284">The benefits of caching to improve performance and scalability are well understood.</span></span>

<span data-ttu-id="e0252-285">Для собственного облачного приложения общее расположение для добавления кэширования находится внутри шлюза API.</span><span class="sxs-lookup"><span data-stu-id="e0252-285">For a cloud-native application, a common location to add caching is inside the API Gateway.</span></span> <span data-ttu-id="e0252-286">Шлюз выступает в качестве внешнего интерфейса для всех входящих запросов.</span><span class="sxs-lookup"><span data-stu-id="e0252-286">The gateway serves as a front end for all incoming requests.</span></span> <span data-ttu-id="e0252-287">Путем добавления кэширования можно повысить производительность и скорость реагирования, возвращая кэшированные данные и избегая обращений к локальной базе данных или подчиненной службе.</span><span class="sxs-lookup"><span data-stu-id="e0252-287">By adding caching, you can increase performance and responsiveness by returning cached data and avoiding round-trips to a local database or downstream service.</span></span> <span data-ttu-id="e0252-288">На рис. 5-19 показана архитектура кэширования для собственного облачного приложения.</span><span class="sxs-lookup"><span data-stu-id="e0252-288">Figure 5-19 shows a caching architecture for a cloud-native application.</span></span>

![Кэширование в собственном приложении для облака](./media/caching-in-a-cloud-native-app.png)

<span data-ttu-id="e0252-290">**Рис. 5-19**. кэширование в собственном приложении в облаке</span><span class="sxs-lookup"><span data-stu-id="e0252-290">**Figure 5-19**: Caching in a cloud-native app</span></span>

<span data-ttu-id="e0252-291">Шаблон общего кэширования — это [шаблон](https://docs.microsoft.com/azure/architecture/patterns/cache-aside), расположенный в кэше.</span><span class="sxs-lookup"><span data-stu-id="e0252-291">A common caching pattern is the [cache-aside pattern](https://docs.microsoft.com/azure/architecture/patterns/cache-aside).</span></span> <span data-ttu-id="e0252-292">Для входящего запроса сначала вы запрашиваете кэш для ответа, как показано на шаге #1 на рис. 5-19.</span><span class="sxs-lookup"><span data-stu-id="e0252-292">For an incoming request, you first query the cache for the response, shown in step #1 in Figure 5-19.</span></span> <span data-ttu-id="e0252-293">Если объект найден, данные возвращаются немедленно.</span><span class="sxs-lookup"><span data-stu-id="e0252-293">If found, the data is returned immediately.</span></span> <span data-ttu-id="e0252-294">Если данные не существуют в кэше (называемые [промахом кэша](https://www.techopedia.com/definition/6308/cache-miss)), они извлекаются из локальной базы данных или подчиненной службы (шаг #2), записываются в кэш для будущих запросов (шаг #3) и возвращаются вызывающему.</span><span class="sxs-lookup"><span data-stu-id="e0252-294">If the data doesn't exist in the cache (known as a [cache miss](https://www.techopedia.com/definition/6308/cache-miss)), it's retrieved from the local database or downstream service (step #2), written to the cache for future requests (step #3), and returned to the caller.</span></span> <span data-ttu-id="e0252-295">Необходимо принять меры для периодического исключения кэшированных данных, чтобы система оставалась единообразной и точной.</span><span class="sxs-lookup"><span data-stu-id="e0252-295">Care must be taken to periodically evict cached data so that the system remains consistent and accurate.</span></span>

<span data-ttu-id="e0252-296">Кроме того, обратите внимание на рис. 5-19, как кэш не реализуется локально в пределах службы, а используется как облачная служба резервного копирования, как описано в главе 1.</span><span class="sxs-lookup"><span data-stu-id="e0252-296">Additionally, note in Figure 5-19 how the cache isn't implemented locally within the boundaries of the service, but instead is consumed as a cloud-based backing service, as discussed in Chapter 1.</span></span>

<span data-ttu-id="e0252-297">[Кэш Redis для Azure](https://azure.microsoft.com/services/cache/) — это кэширование данных и служба посредника обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="e0252-297">[Azure Redis Cache](https://azure.microsoft.com/services/cache/) is a data caching and messaging broker service.</span></span> <span data-ttu-id="e0252-298">Он обеспечивает высокую пропускную способность и низкую задержку при доступе к данным для приложений.</span><span class="sxs-lookup"><span data-stu-id="e0252-298">It provides high throughput and low-latency access to data for applications.</span></span> <span data-ttu-id="e0252-299">Она полностью управляется корпорацией Майкрософт, размещается в Azure и доступна для любого приложения в или за пределами Azure.</span><span class="sxs-lookup"><span data-stu-id="e0252-299">It's fully managed by Microsoft, hosted within Azure, and accessible to any application within or outside of Azure.</span></span>

<span data-ttu-id="e0252-300">На внутреннем уровне кэш Azure для Redis поддерживается [сервером Redis](https://redis.io/) с открытым исходным кодом и изначально поддерживает такие структуры данных, как [строки](https://redis.io/topics/data-types#strings), [хэши](https://redis.io/topics/data-types#hashes), [списки](https://redis.io/topics/data-types#sets), [наборы](https://redis.io/topics/data-types#sets)и [отсортированные наборы](https://redis.io/topics/data-types#sorted-sets).</span><span class="sxs-lookup"><span data-stu-id="e0252-300">Internally, Azure Cache for Redis is backed by the open-source [Redis server](https://redis.io/) and natively supports data structures such as [strings](https://redis.io/topics/data-types#strings), [hashes](https://redis.io/topics/data-types#hashes), [lists](https://redis.io/topics/data-types#sets), [sets](https://redis.io/topics/data-types#sets), and [sorted sets](https://redis.io/topics/data-types#sorted-sets).</span></span> <span data-ttu-id="e0252-301">Если приложение использует Redis, оно будет работать как есть с кэшем Azure для Redis.</span><span class="sxs-lookup"><span data-stu-id="e0252-301">If your application uses Redis, it will work as-is with Azure Cache for Redis.</span></span>

<span data-ttu-id="e0252-302">Кэш Azure для Redis также можно использовать в качестве кэша данных в памяти, распределенной нереляционной базы данных и брокера сообщений.</span><span class="sxs-lookup"><span data-stu-id="e0252-302">Azure Cache for Redis can also be used as an in-memory data cache, a distributed non-relational database, and a message broker.</span></span> <span data-ttu-id="e0252-303">Он доступен в трех разных ценовых категориях.</span><span class="sxs-lookup"><span data-stu-id="e0252-303">It's available in three different pricing tiers.</span></span> <span data-ttu-id="e0252-304">Уровень "Премиум" включает многие функции корпоративного уровня, такие как кластеризация, сохраняемость данных, Георепликация и безопасность и изоляция виртуальных сетей.</span><span class="sxs-lookup"><span data-stu-id="e0252-304">The Premium tier features many enterprise-level features such as clustering, data persistence, geo-replication, and Virtual-network security and isolation.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="e0252-305">[Назад](data-patterns.md)
>[Вперед](resiliency.md)</span><span class="sxs-lookup"><span data-stu-id="e0252-305">[Previous](data-patterns.md)
[Next](resiliency.md)</span></span>
