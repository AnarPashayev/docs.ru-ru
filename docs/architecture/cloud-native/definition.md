---
title: Определение ориентации на облако
description: Узнайте о основополагающих столпах, которые являются основой для облачных систем
author: robvet
ms.date: 08/20/2019
ms.openlocfilehash: 27191a67b2964ac2e1636a4d7dc55d5314b78439
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/14/2020
ms.locfileid: "79401739"
---
# <a name="defining-cloud-native"></a><span data-ttu-id="f9a2c-103">Определение родного облака</span><span class="sxs-lookup"><span data-stu-id="f9a2c-103">Defining cloud native</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="f9a2c-104">Остановите то, что вы делаете, и напишите 10 своим коллегам.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-104">Stop what you’re doing and text 10 of your colleagues.</span></span> <span data-ttu-id="f9a2c-105">Попросите их определить термин "Облако родной".</span><span class="sxs-lookup"><span data-stu-id="f9a2c-105">Ask them to define the term “Cloud Native.”</span></span> <span data-ttu-id="f9a2c-106">Хороший шанс, что вы получите восемь разных ответов.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-106">Good chance you’ll get eight different answers.</span></span> <span data-ttu-id="f9a2c-107">Интересно, что через шесть месяцев, как облачные технологии и практики развиваться, так будет их определение.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-107">Interestingly, six months from now, as cloud-native technologies and practices evolve, so will their definition.</span></span>

<span data-ttu-id="f9a2c-108">Универса облака — это изменение того, как мы думаем о построении критически важных бизнес-систем.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-108">Cloud native is all about changing the way we think about constructing critical business systems.</span></span>

<span data-ttu-id="f9a2c-109">Облачные системы предназначены для быстрого изменения, больших масштабов и устойчивости.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-109">Cloud-native systems are designed to embrace rapid change, large scale, and resilience.</span></span>

<span data-ttu-id="f9a2c-110">Фонд облачных вычислений предоставляет [официальное определение:](https://github.com/cncf/foundation/blob/master/charter.md)</span><span class="sxs-lookup"><span data-stu-id="f9a2c-110">The Cloud Native Computing Foundation provides an [official definition](https://github.com/cncf/foundation/blob/master/charter.md):</span></span>

> <span data-ttu-id="f9a2c-111">*Облачные технологии позволяют организациям создавать и запускать масштабируемые приложения в современных динамических средах, таких как общедоступные, частные и гибридные облака. Контейнеры, сервисные сетки, микрослужбы, неизменная инфраструктура и декларативные AA иллюстрируют этот подход.*</span><span class="sxs-lookup"><span data-stu-id="f9a2c-111">*Cloud-native technologies empower organizations to build and run scalable applications in modern, dynamic environments such as public, private, and hybrid clouds. Containers, service meshes, microservices, immutable infrastructure, and declarative APIs exemplify this approach.*</span></span>

> <span data-ttu-id="f9a2c-112">*Эти методы позволяют слабо соединенные системы, которые являются устойчивыми, управляемыми и наблюдаемыми. В сочетании с надежной автоматизацией они позволяют инженерам часто и предсказуемо изменять высокоэффективные изменения с минимальным трудом.*</span><span class="sxs-lookup"><span data-stu-id="f9a2c-112">*These techniques enable loosely coupled systems that are resilient, manageable, and observable. Combined with robust automation, they allow engineers to make high-impact changes frequently and predictably with minimal toil.*</span></span>

<span data-ttu-id="f9a2c-113">Приложения становятся все более сложными, и пользователи требуют все больше и больше.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-113">Applications have become increasingly complex with users demanding more and more.</span></span> <span data-ttu-id="f9a2c-114">Пользователи ожидают быстрой отзывчивости, инновационных функций и нулевого простоя.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-114">Users expect rapid responsiveness, innovative features, and zero downtime.</span></span> <span data-ttu-id="f9a2c-115">Проблемы с производительностью, повторяющиеся ошибки и неспособность быстро двигаться больше не являются приемлемыми.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-115">Performance problems, recurring errors, and the inability to move fast are no longer acceptable.</span></span> <span data-ttu-id="f9a2c-116">Они легко перейдут к вашему конкуренту.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-116">They'll easily move to your competitor.</span></span>

<span data-ttu-id="f9a2c-117">Облако родной много о *скорости* и *ловкости.*</span><span class="sxs-lookup"><span data-stu-id="f9a2c-117">Cloud native is much about *speed* and *agility*.</span></span> <span data-ttu-id="f9a2c-118">Бизнес-системы эволюционируют от создания возможностей для бизнеса к оружию стратегических преобразований, ускорению скорости и росту бизнеса.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-118">Business systems are evolving from enabling business capabilities to weapons of strategic transformation, accelerating business velocity and growth.</span></span> <span data-ttu-id="f9a2c-119">Крайне важно, чтобы получить идеи на рынок немедленно.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-119">It’s imperative to get ideas to market immediately.</span></span>

<span data-ttu-id="f9a2c-120">Вот некоторые компании, которые внедрили эти методы.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-120">Here are some companies who have implemented these techniques.</span></span> <span data-ttu-id="f9a2c-121">Подумайте о скорости, ловкости и масштабируемости, которых они достигли.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-121">Think about the speed, agility, and scalability they've achieved.</span></span>

| <span data-ttu-id="f9a2c-122">Company</span><span class="sxs-lookup"><span data-stu-id="f9a2c-122">Company</span></span> | <span data-ttu-id="f9a2c-123">Среда</span><span class="sxs-lookup"><span data-stu-id="f9a2c-123">Experience</span></span> |
| :-------- | :-------- |
| [<span data-ttu-id="f9a2c-124">Netflix</span><span class="sxs-lookup"><span data-stu-id="f9a2c-124">Netflix</span></span>](https://www.infoq.com/news/2013/06/netflix/) | <span data-ttu-id="f9a2c-125">Имеет 600 услуг в производстве.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-125">Has 600+ services in production.</span></span> <span data-ttu-id="f9a2c-126">Развертывается сто раз в день.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-126">Deploys a hundred times per day.</span></span> |
| [<span data-ttu-id="f9a2c-127">Uber</span><span class="sxs-lookup"><span data-stu-id="f9a2c-127">Uber</span></span>](https://eng.uber.com/micro-deploy/) | <span data-ttu-id="f9a2c-128">Имеет 1000 услуг, хранящихся в производстве.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-128">Has 1,000+ services stored in production.</span></span> <span data-ttu-id="f9a2c-129">Развертывает несколько тысяч сборок каждую неделю.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-129">Deploys several thousand builds each week.</span></span> |
| [<span data-ttu-id="f9a2c-130">WeChat</span><span class="sxs-lookup"><span data-stu-id="f9a2c-130">WeChat</span></span>](https://www.cs.columbia.edu/~ruigu/papers/socc18-final100.pdf) | <span data-ttu-id="f9a2c-131">Имеет 300 услуг в производстве.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-131">Has 300+ services in production.</span></span> <span data-ttu-id="f9a2c-132">Делает почти 1000 изменений в день.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-132">Makes almost 1,000 changes per day.</span></span> |

<span data-ttu-id="f9a2c-133">Как видите, Netflix, Uber и WeChat разоблачают системы, состоящие из сотен независимых микросервисов.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-133">As you can see, Netflix, Uber, and WeChat expose systems that consist of hundreds of independent microservices.</span></span> <span data-ttu-id="f9a2c-134">Этот архитектурный стиль позволяет им быстро реагировать на рыночные условия.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-134">This architectural style enables them to rapidly respond to market conditions.</span></span> <span data-ttu-id="f9a2c-135">Они могут мгновенно обновлять небольшие участки живого, сложного приложения и индивидуально масштабировать эти области по мере необходимости.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-135">They can instantaneously update small areas of a live, complex application, and individually scale those areas as needed.</span></span>

<span data-ttu-id="f9a2c-136">Скорость и ловкость родного облака обусловлены рядом факторов.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-136">The speed and agility of cloud native come about from a number of factors.</span></span> <span data-ttu-id="f9a2c-137">В первую очередь это облачная инфраструктура.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-137">Foremost is cloud infrastructure.</span></span> <span data-ttu-id="f9a2c-138">Пять дополнительных основных столбов, показанных на рисунке 1-3, также являются основой для облачных систем.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-138">Five additional foundational pillars shown in Figure 1-3 also provide the bedrock for cloud-native systems.</span></span>

![Облако-родные основополагающие столбы](./media/cloud-native-foundational-pillars.png)

<span data-ttu-id="f9a2c-140">**Рисунок 1-3**.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-140">**Figure 1-3**.</span></span> <span data-ttu-id="f9a2c-141">Облако-родные основополагающие столбы</span><span class="sxs-lookup"><span data-stu-id="f9a2c-141">Cloud-native foundational pillars</span></span>

<span data-ttu-id="f9a2c-142">Давайте потрудим некоторое время, чтобы лучше понять значение каждого столба.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-142">Let’s take some time to better understand the significance of each pillar.</span></span>

## <a name="the-cloud"></a><span data-ttu-id="f9a2c-143">Облако...</span><span class="sxs-lookup"><span data-stu-id="f9a2c-143">The cloud…</span></span>

<span data-ttu-id="f9a2c-144">Облачные системы в полной мере используют преимущества модели облачных сервисов.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-144">Cloud-native systems take full advantage of the cloud service model.</span></span>

<span data-ttu-id="f9a2c-145">Эти системы, разработанные для процветания в динамичной, виртуализированной облачной среде, широко используют платформу в качестве вычислительной инфраструктуры и управляемых сервисов [Платформы (PaaS).](https://azure.microsoft.com/overview/what-is-paas/)</span><span class="sxs-lookup"><span data-stu-id="f9a2c-145">Designed to thrive in a dynamic, virtualized cloud environment, these systems make extensive use of [Platform as a Service (PaaS)](https://azure.microsoft.com/overview/what-is-paas/) compute infrastructure and managed services.</span></span> <span data-ttu-id="f9a2c-146">Они рассматривают базовую инфраструктуру как *одноразовую* - подготовленную в течение нескольких минут и перегабашенные, масштабированные, перемещенные или уничтоженные по требованию - с помощью автоматизации.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-146">They treat the underlying infrastructure as *disposable* - provisioned in minutes and resized, scaled, moved, or destroyed on demand – via automation.</span></span>

<span data-ttu-id="f9a2c-147">Рассмотрим широко принят DevOps концепции [домашних животных против крупного рогатого скота](https://medium.com/@Joachim8675309/devops-concepts-pets-vs-cattle-2380b5aab313).</span><span class="sxs-lookup"><span data-stu-id="f9a2c-147">Consider the widely accepted DevOps concept of [Pets vs. Cattle](https://medium.com/@Joachim8675309/devops-concepts-pets-vs-cattle-2380b5aab313).</span></span> <span data-ttu-id="f9a2c-148">В традиционном центре обработки данных, серверы рассматриваются как *домашние животные*: физическая машина, учитывая значимое имя, и заботятся.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-148">In a traditional data center, servers are treated as *Pets*: a physical machine, given a meaningful name, and cared for.</span></span> <span data-ttu-id="f9a2c-149">Масштабируется, добавляя больше ресурсов в ту же машину (масштабирование).</span><span class="sxs-lookup"><span data-stu-id="f9a2c-149">You scale by adding more resources to the same machine (scaling up).</span></span> <span data-ttu-id="f9a2c-150">Если сервер заболевает, вы ухаживаете за ним.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-150">If the server becomes sick, you nurse it back to health.</span></span> <span data-ttu-id="f9a2c-151">Если сервер становится недоступным, все замечают.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-151">Should the server become unavailable, everyone notices.</span></span>

<span data-ttu-id="f9a2c-152">Модель обслуживания *скота* отличается.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-152">The *Cattle* service model is different.</span></span> <span data-ttu-id="f9a2c-153">Каждый экземпляр предоставляется в качестве виртуальной машины или контейнера.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-153">You provision each instance as a virtual machine or container.</span></span> <span data-ttu-id="f9a2c-154">Они идентичны и назначены системы идентификатора, такие как служба-01, служба-02, и так далее.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-154">They're identical and assigned a system identifier such as Service-01, Service-02, and so on.</span></span> <span data-ttu-id="f9a2c-155">Масштабируется, создавая больше из них (масштабирование).</span><span class="sxs-lookup"><span data-stu-id="f9a2c-155">You scale by creating more of them (scaling out).</span></span> <span data-ttu-id="f9a2c-156">Когда человек становится недоступен, никто не замечает.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-156">When one becomes unavailable, nobody notices.</span></span>

<span data-ttu-id="f9a2c-157">Модель крупного рогатого скота охватывает *неизменяемую инфраструктуру.*</span><span class="sxs-lookup"><span data-stu-id="f9a2c-157">The cattle model embraces *immutable infrastructure*.</span></span> <span data-ttu-id="f9a2c-158">Серверы не ремонтируются и не изменяются.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-158">Servers aren't repaired or modified.</span></span> <span data-ttu-id="f9a2c-159">Если один не удается или требует обновления, он уничтожен и новый подготовлен - все делается с помощью автоматизации.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-159">If one fails or requires updating, it's destroyed and a new one is provisioned – all done via automation.</span></span>

<span data-ttu-id="f9a2c-160">Облачные системы охватывают модель обслуживания Cattle.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-160">Cloud-native systems embrace the Cattle service model.</span></span> <span data-ttu-id="f9a2c-161">Они продолжают работать по мере того, как инфраструктура масштабируется, не обращая внимания на машины, на которых они работают.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-161">They continue to run as the infrastructure scales in or out with no regard to the machines upon which they're running.</span></span>

<span data-ttu-id="f9a2c-162">Облачная платформа Azure поддерживает этот тип высокоупругой инфраструктуры с возможностями автоматического масштабирования, самовосстановления и мониторинга.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-162">The Azure cloud platform supports this type of highly elastic infrastructure with automatic scaling, self-healing, and monitoring capabilities.</span></span>

## <a name="modern-design"></a><span data-ttu-id="f9a2c-163">Современный дизайн</span><span class="sxs-lookup"><span data-stu-id="f9a2c-163">Modern design</span></span>

<span data-ttu-id="f9a2c-164">Как бы вы спроектировать облачное приложение?</span><span class="sxs-lookup"><span data-stu-id="f9a2c-164">How would you design a cloud-native app?</span></span> <span data-ttu-id="f9a2c-165">Как будет выглядеть ваша архитектура?</span><span class="sxs-lookup"><span data-stu-id="f9a2c-165">What would your architecture look like?</span></span> <span data-ttu-id="f9a2c-166">К каким принципам, шаблонам и передовым практикам вы бы придерживались?</span><span class="sxs-lookup"><span data-stu-id="f9a2c-166">To what principles, patterns, and best practices would you adhere?</span></span> <span data-ttu-id="f9a2c-167">Какие проблемы инфраструктуры и оперативной деятельности будут важны?</span><span class="sxs-lookup"><span data-stu-id="f9a2c-167">What infrastructure and operational concerns would be important?</span></span>

### <a name="the-twelve-factor-application"></a><span data-ttu-id="f9a2c-168">Приложение "Двенадцать факторов"</span><span class="sxs-lookup"><span data-stu-id="f9a2c-168">The Twelve-Factor Application</span></span>

<span data-ttu-id="f9a2c-169">Широко признанной методологией построения облачных приложений является [приложение «Двенадцать факторов».](https://12factor.net/)</span><span class="sxs-lookup"><span data-stu-id="f9a2c-169">A widely accepted methodology for constructing cloud-based applications is the [Twelve-Factor Application](https://12factor.net/).</span></span> <span data-ttu-id="f9a2c-170">В нем описывается набор принципов и методов, которым разработчики следуют для построения приложений, оптимизированных для современных облачных сред.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-170">It describes a set of principles and practices that developers follow to construct applications optimized for modern cloud environments.</span></span> <span data-ttu-id="f9a2c-171">Особое внимание уделяется переносимости в различных средах и декларативной автоматизации.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-171">Special attention is given to portability across environments and declarative automation.</span></span>

<span data-ttu-id="f9a2c-172">В то время как применимо к любому веб-приложению, многие практикующие считают его прочной основой для создания облачных приложений.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-172">While applicable to any web-based application, many practitioners consider it as a solid foundation for building cloud-native apps.</span></span> <span data-ttu-id="f9a2c-173">Системы, основанные на этих принципах, могут быстро развертывать и масштабировать ся,а также добавлять функции для быстрого реагирования на изменения рынка.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-173">Systems built upon these principles can deploy and scale rapidly and add features to react quickly to market changes.</span></span>

<span data-ttu-id="f9a2c-174">В следующей таблице освещается методология «Двенадцать факторов»:</span><span class="sxs-lookup"><span data-stu-id="f9a2c-174">The following table highlights the Twelve-Factor methodology:</span></span>

|    |  <span data-ttu-id="f9a2c-175">Фактор</span><span class="sxs-lookup"><span data-stu-id="f9a2c-175">Factor</span></span> | <span data-ttu-id="f9a2c-176">Объяснение</span><span class="sxs-lookup"><span data-stu-id="f9a2c-176">Explanation</span></span>  |
| :-------- | :-------- | :-------- |
| <span data-ttu-id="f9a2c-177">1</span><span class="sxs-lookup"><span data-stu-id="f9a2c-177">1</span></span> | <span data-ttu-id="f9a2c-178">Кодовая база</span><span class="sxs-lookup"><span data-stu-id="f9a2c-178">Code Base</span></span> | <span data-ttu-id="f9a2c-179">Единая кодовая база для каждой микрослужбы, хранящаяся в собственном репозитории.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-179">A single code base for each microservice, stored in its own repository.</span></span> <span data-ttu-id="f9a2c-180">Отслеживаемый с помощью управления версиями, он может развертываться в нескольких средах (КЗ, Постановка, Производство).</span><span class="sxs-lookup"><span data-stu-id="f9a2c-180">Tracked with version control, it can deploy to multiple environments (QA, Staging, Production).</span></span> |
| <span data-ttu-id="f9a2c-181">2</span><span class="sxs-lookup"><span data-stu-id="f9a2c-181">2</span></span> | <span data-ttu-id="f9a2c-182">Зависимости</span><span class="sxs-lookup"><span data-stu-id="f9a2c-182">Dependencies</span></span> | <span data-ttu-id="f9a2c-183">Каждая микрослужба изолирует и упаковывает свои собственные зависимости, внеся изменения, не влияя на всю систему.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-183">Each microservice isolates and packages its own dependencies, embracing changes without impacting the entire system.</span></span> |
| <span data-ttu-id="f9a2c-184">3</span><span class="sxs-lookup"><span data-stu-id="f9a2c-184">3</span></span> | <span data-ttu-id="f9a2c-185">Конфигурации</span><span class="sxs-lookup"><span data-stu-id="f9a2c-185">Configurations</span></span>  | <span data-ttu-id="f9a2c-186">Информация о конфигурации перемещается из микрослужбы и экстернализуется с помощью инструмента управления конфигурацией за пределами кода.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-186">Configuration information is moved out of the microservice and externalized through a configuration management tool outside of the code.</span></span> <span data-ttu-id="f9a2c-187">Одно и то же развертывание может распространяться по средам с правильной прикладной конфигурацией.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-187">The same deployment can propagate across environments with the correct configuration applied.</span></span>  |
| <span data-ttu-id="f9a2c-188">4</span><span class="sxs-lookup"><span data-stu-id="f9a2c-188">4</span></span> | <span data-ttu-id="f9a2c-189">Резервные службы</span><span class="sxs-lookup"><span data-stu-id="f9a2c-189">Backing Services</span></span> | <span data-ttu-id="f9a2c-190">Вспомогательные ресурсы (хранилища данных, кэши, брокеры сообщений) должны подвергаться воздействию по адресу.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-190">Ancillary resources (data stores, caches, message brokers) should be exposed via an addressable URL.</span></span> <span data-ttu-id="f9a2c-191">Это отменяет ресурс от приложения, позволяя ему быть взаимозаменяемым.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-191">Doing so decouples the resource from the application, enabling it to be interchangeable.</span></span>  |
| <span data-ttu-id="f9a2c-192">5</span><span class="sxs-lookup"><span data-stu-id="f9a2c-192">5</span></span> | <span data-ttu-id="f9a2c-193">Сборка, выпуск, запуск</span><span class="sxs-lookup"><span data-stu-id="f9a2c-193">Build, Release, Run</span></span> | <span data-ttu-id="f9a2c-194">Каждый релиз должен обеспечивать строгое разделение на этапах сборки, выпуска и выполнения.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-194">Each release must enforce a strict separation across the build, release, and run stages.</span></span> <span data-ttu-id="f9a2c-195">Каждый из них должен быть помечен уникальным идентификатором и поддерживать возможность отката.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-195">Each should be tagged with a unique ID and support the ability to roll back.</span></span> <span data-ttu-id="f9a2c-196">Современные системы CI/CD помогают реализовать этот принцип.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-196">Modern CI/CD systems help fulfill this principle.</span></span> |
| <span data-ttu-id="f9a2c-197">6</span><span class="sxs-lookup"><span data-stu-id="f9a2c-197">6</span></span> | <span data-ttu-id="f9a2c-198">Процессы</span><span class="sxs-lookup"><span data-stu-id="f9a2c-198">Processes</span></span> | <span data-ttu-id="f9a2c-199">Каждая микрослужба должна выполняться в своем собственном процессе, изолированном от других запущенных служб.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-199">Each microservice should execute in its own process,  isolated from other running services.</span></span> <span data-ttu-id="f9a2c-200">Экстернализация требуемого состояния для резервной службы, такой как распределенный кэш или хранилище данных.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-200">Externalize required state to a backing service such as a distributed cache or data store.</span></span> |
| <span data-ttu-id="f9a2c-201">7</span><span class="sxs-lookup"><span data-stu-id="f9a2c-201">7</span></span> | <span data-ttu-id="f9a2c-202">Связывание порта</span><span class="sxs-lookup"><span data-stu-id="f9a2c-202">Port Binding</span></span> | <span data-ttu-id="f9a2c-203">Каждая микрослужба должна быть автономной с ее интерфейсами и функциональностью, выставленной на собственном порту.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-203">Each microservice should be self-contained with its interfaces and functionality exposed on its own port.</span></span> <span data-ttu-id="f9a2c-204">Это обеспечивает изоляцию от других микрослужб.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-204">Doing so provides isolation from other microservices.</span></span> |
| <span data-ttu-id="f9a2c-205">8</span><span class="sxs-lookup"><span data-stu-id="f9a2c-205">8</span></span> | <span data-ttu-id="f9a2c-206">Параллелизм</span><span class="sxs-lookup"><span data-stu-id="f9a2c-206">Concurrency</span></span> | <span data-ttu-id="f9a2c-207">Службы масштабируются через большое количество небольших идентичных процессов (копий), в отличие от масштабирования одного большого экземпляра на самой мощной доступной машине.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-207">Services scale out across a large number of small identical processes (copies) as opposed to scaling-up a single large instance on the most powerful machine available.</span></span> |
| <span data-ttu-id="f9a2c-208">9</span><span class="sxs-lookup"><span data-stu-id="f9a2c-208">9</span></span> | <span data-ttu-id="f9a2c-209">Разогнанность</span><span class="sxs-lookup"><span data-stu-id="f9a2c-209">Disposability</span></span> | <span data-ttu-id="f9a2c-210">Экземпляры обслуживания должны быть одноразовыми, предпочитая быстрые запуски для увеличения возможностей масштабируемости и изящные остановки, чтобы оставить систему в правильном состоянии.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-210">Service instances should be disposable, favoring fast startups to increase scalability opportunities and graceful shutdowns to leave the system in a correct state.</span></span> <span data-ttu-id="f9a2c-211">Докер контейнеры вместе с оркестратором по своей сути удовлетворить это требование.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-211">Docker containers along with an orchestrator inherently satisfy this requirement.</span></span> |
| <span data-ttu-id="f9a2c-212">10</span><span class="sxs-lookup"><span data-stu-id="f9a2c-212">10</span></span> | <span data-ttu-id="f9a2c-213">Дев/Пд Паритет</span><span class="sxs-lookup"><span data-stu-id="f9a2c-213">Dev/Prod Parity</span></span> | <span data-ttu-id="f9a2c-214">Сохраняйте среды на протяжении всего жизненного цикла приложения как можно более похожими, избегая дорогостоящих ярлыков.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-214">Keep environments across the application lifecycle as similar as possible, avoiding costly shortcuts.</span></span> <span data-ttu-id="f9a2c-215">В данном разбивке контейнеры могут в значительной степени способствовать продвижению той же среды исполнения.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-215">Here, the adoption of containers can greatly contribute by promoting the same execution environment.</span></span> |
| <span data-ttu-id="f9a2c-216">11</span><span class="sxs-lookup"><span data-stu-id="f9a2c-216">11</span></span> | <span data-ttu-id="f9a2c-217">Logging</span><span class="sxs-lookup"><span data-stu-id="f9a2c-217">Logging</span></span> | <span data-ttu-id="f9a2c-218">Относитесь к журналам, генерируемым микрослужбами, как потоки событий.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-218">Treat logs generated by microservices as event streams.</span></span> <span data-ttu-id="f9a2c-219">Обработайте их с помощью агрегатора событий и распространяйте данные на инструменты интеллектуального анализа данных/журналы, такие как Azure Monitor или Splunk и в конечном итоге долгосрочные архивы.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-219">Process them with an event aggregator and propagate the data to data-mining/log management tools like Azure Monitor or Splunk and eventually long-term archival.</span></span> |
| <span data-ttu-id="f9a2c-220">12</span><span class="sxs-lookup"><span data-stu-id="f9a2c-220">12</span></span> | <span data-ttu-id="f9a2c-221">Админ процессы</span><span class="sxs-lookup"><span data-stu-id="f9a2c-221">Admin Processes</span></span> | <span data-ttu-id="f9a2c-222">Выполнение административных/управленческих задач как одноразовых процессов.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-222">Run administrative/management tasks as one-off processes.</span></span> <span data-ttu-id="f9a2c-223">Задачи могут включать очистку данных и вытягивание аналитики для отчета.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-223">Tasks can include data cleanup and pulling analytics for a report.</span></span> <span data-ttu-id="f9a2c-224">Инструменты, выражающие эти задачи, должны вызываться из производственной среды, но отдельно от приложения.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-224">Tools executing these tasks should be  invoked from the production environment, but separately from the application.</span></span> |

<span data-ttu-id="f9a2c-225">В книге, [За Двенадцать-фактор App](https://content.pivotal.io/blog/beyond-the-twelve-factor-app), автор Кевин Хоффман детали каждого из первоначальных 12 факторов (написано в 2011 году).</span><span class="sxs-lookup"><span data-stu-id="f9a2c-225">In the book, [Beyond the Twelve-Factor App](https://content.pivotal.io/blog/beyond-the-twelve-factor-app), author Kevin Hoffman details each of the original 12 factors (written in 2011).</span></span> <span data-ttu-id="f9a2c-226">Кроме того, книга содержит три дополнительных фактора, которые отражают современный дизайн облачных приложений.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-226">Additionally, the book provides three additional factors that reflect today's modern cloud application design.</span></span>

|    |  <span data-ttu-id="f9a2c-227">Новый фактор</span><span class="sxs-lookup"><span data-stu-id="f9a2c-227">New Factor</span></span> | <span data-ttu-id="f9a2c-228">Объяснение</span><span class="sxs-lookup"><span data-stu-id="f9a2c-228">Explanation</span></span>  |
| :-------- | :-------- | :-------- |
| <span data-ttu-id="f9a2c-229">13</span><span class="sxs-lookup"><span data-stu-id="f9a2c-229">13</span></span> | <span data-ttu-id="f9a2c-230">API Первый</span><span class="sxs-lookup"><span data-stu-id="f9a2c-230">API First</span></span> | <span data-ttu-id="f9a2c-231">Сделайте все услуги.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-231">Make everything a service.</span></span> <span data-ttu-id="f9a2c-232">Предположим, что ваш код будет использован фронтальным клиентом, шлюзом или другой службой.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-232">Assume your code will be consumed by a front-end client, gateway, or another service.</span></span> |
| <span data-ttu-id="f9a2c-233">14</span><span class="sxs-lookup"><span data-stu-id="f9a2c-233">14</span></span> | <span data-ttu-id="f9a2c-234">Телеметрия</span><span class="sxs-lookup"><span data-stu-id="f9a2c-234">Telemetry</span></span> | <span data-ttu-id="f9a2c-235">На рабочей станции, у вас есть глубокая видимость в ашего приложении и его поведение.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-235">On a workstation, you have deep visibility into your application and its behavior.</span></span> <span data-ttu-id="f9a2c-236">В облаке нет.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-236">In the cloud, you don't.</span></span> <span data-ttu-id="f9a2c-237">Убедитесь, что ваш дизайн включает в себя сбор мониторинга, доменов и данных о работоспособности/системе.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-237">Make sure your design includes the collection of monitoring, domain-specific, and health/system data.</span></span> |
| <span data-ttu-id="f9a2c-238">15</span><span class="sxs-lookup"><span data-stu-id="f9a2c-238">15</span></span> | <span data-ttu-id="f9a2c-239">Аутентификация/ авторизация</span><span class="sxs-lookup"><span data-stu-id="f9a2c-239">Authentication/ Authorization</span></span>  | <span data-ttu-id="f9a2c-240">Реализация идентификации с самого начала.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-240">Implement identity from the start.</span></span> <span data-ttu-id="f9a2c-241">Рассмотрим функции [RBAC (управление доступом на основе ролей),](https://docs.microsoft.com/azure/role-based-access-control/overview) доступные в общедоступных облаках.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-241">Consider [RBAC (role-based access control)](https://docs.microsoft.com/azure/role-based-access-control/overview) features available in public clouds.</span></span>  |

<span data-ttu-id="f9a2c-242">Мы будем ссылаться на многие из 12 "факторов в этой главе и на протяжении всей книги.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-242">We'll refer to many of the 12+ factors in this chapter and throughout the book.</span></span>

### <a name="critical-design-considerations"></a><span data-ttu-id="f9a2c-243">Критические соображения дизайна</span><span class="sxs-lookup"><span data-stu-id="f9a2c-243">Critical Design Considerations</span></span>

<span data-ttu-id="f9a2c-244">Помимо руководства, представленного из двенадцатифакторной методологии, есть несколько критических проектных решений, которые необходимо принять при построении распределенных систем.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-244">Beyond the guidance provided from the twelve-factor methodology, there are several critical design decisions you must make when constructing distributed systems.</span></span>

<span data-ttu-id="f9a2c-245">*Связи*</span><span class="sxs-lookup"><span data-stu-id="f9a2c-245">*Communication*</span></span>

<span data-ttu-id="f9a2c-246">Как клиентские приложения переднего конца будут общаться с основными службами поддержки?</span><span class="sxs-lookup"><span data-stu-id="f9a2c-246">How will front-end client applications communicate with backed-end core services?</span></span> <span data-ttu-id="f9a2c-247">Вы позволите прямое общение?</span><span class="sxs-lookup"><span data-stu-id="f9a2c-247">Will you allow direct communication?</span></span> <span data-ttu-id="f9a2c-248">Или, не могли бы вы абстрагировать бэк-энд услуг с шлюзом фасад, который обеспечивает гибкость, контроль и безопасность?</span><span class="sxs-lookup"><span data-stu-id="f9a2c-248">Or, might you abstract the back-end services with a gateway façade that provides  flexibility, control, and security?</span></span>

<span data-ttu-id="f9a2c-249">Как основные службы бэк-энда будут общаться друг с другом?</span><span class="sxs-lookup"><span data-stu-id="f9a2c-249">How will back-end core services communicate with each other?</span></span> <span data-ttu-id="f9a2c-250">Будете ли вы позволять прямые http звонки, которые приводят к соединению и влияние производительности и ловкости?</span><span class="sxs-lookup"><span data-stu-id="f9a2c-250">Will you allow direct HTTP calls that lead to coupling and impact performance and agility?</span></span> <span data-ttu-id="f9a2c-251">Или вы могли бы рассмотреть возможность разъединение обмена сообщениями с технологиями очереди и темы?</span><span class="sxs-lookup"><span data-stu-id="f9a2c-251">Or might you consider decoupled messaging with queue and topic technologies?</span></span>

<span data-ttu-id="f9a2c-252">Коммуникация подробно описана в главе 4, *Облачные модели связи.*</span><span class="sxs-lookup"><span data-stu-id="f9a2c-252">Communication is covered in detail Chapter 4, *Cloud-Native Communication Patterns*.</span></span>

<span data-ttu-id="f9a2c-253">*Устойчивость*</span><span class="sxs-lookup"><span data-stu-id="f9a2c-253">*Resiliency*</span></span>

<span data-ttu-id="f9a2c-254">Архитектура микрослужб перемещает систему из процесса в сетевую связь.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-254">A microservices architecture moves your system from in-process to network communication.</span></span> <span data-ttu-id="f9a2c-255">Что делать в распределенной среде, если служба B не отвечает на звонок из службы А?</span><span class="sxs-lookup"><span data-stu-id="f9a2c-255">In a distributed environment, what will you do when Service B isn't responding to a call from Service A?</span></span> <span data-ttu-id="f9a2c-256">Что происходит, когда служба C становится временно недоступной, а другие службы, называя ее стек, и ухудшают производительность системы?</span><span class="sxs-lookup"><span data-stu-id="f9a2c-256">What happens when Service C becomes up temporarily unavailable and other services calling it stack and degrade system performance?</span></span>

<span data-ttu-id="f9a2c-257">Устойчивость подробно описана в главе 6, *Облачно-родной устойчивости.*</span><span class="sxs-lookup"><span data-stu-id="f9a2c-257">Resiliency is covered in detail Chapter 6, *Cloud-Native Resiliency*.</span></span>

<span data-ttu-id="f9a2c-258">*Распределенные данные*</span><span class="sxs-lookup"><span data-stu-id="f9a2c-258">*Distributed Data*</span></span>

<span data-ttu-id="f9a2c-259">По замыслу, каждая микрослужба инкапсулирует свои собственные данные, подвергая операции через свой общедоступный интерфейс.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-259">By design, each microservice encapsulates its own data, exposing operations via its public interface.</span></span> <span data-ttu-id="f9a2c-260">Если да, то как задавка данных или реализации транзакции в нескольких службах?</span><span class="sxs-lookup"><span data-stu-id="f9a2c-260">If so, how do you query data or implement a transaction across multiple services?</span></span>

<span data-ttu-id="f9a2c-261">Распределенные данные подробно охватываются главой 5, *шаблонами данных Cloud-Native.*</span><span class="sxs-lookup"><span data-stu-id="f9a2c-261">Distributed data is covered in detail Chapter 5, *Cloud-Native Data Patterns*.</span></span>

<span data-ttu-id="f9a2c-262">*Идентификация*</span><span class="sxs-lookup"><span data-stu-id="f9a2c-262">*Identity*</span></span>

<span data-ttu-id="f9a2c-263">Как ваша служба определит, кто к нему имеет доступ и какие у них разрешения?</span><span class="sxs-lookup"><span data-stu-id="f9a2c-263">How will your service identify who is accessing it and what permissions they have?</span></span>

<span data-ttu-id="f9a2c-264">Идентификация подробно описана В главе 8, *Идентичность*.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-264">Identity is covered in detail Chapter 8, *Identity*.</span></span>

## <a name="microservices"></a><span data-ttu-id="f9a2c-265">Микрослужбы</span><span class="sxs-lookup"><span data-stu-id="f9a2c-265">Microservices</span></span>

<span data-ttu-id="f9a2c-266">Облачные системы охватывают микрослужбы, популярный архитектурный стиль для построения современных приложений.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-266">Cloud-native systems embrace microservices, a popular architectural style for constructing modern applications.</span></span>

<span data-ttu-id="f9a2c-267">Построенные как распределенный набор небольших независимых услуг, взаимодействующих через общую ткань, микрослужбы имеют следующие характеристики:</span><span class="sxs-lookup"><span data-stu-id="f9a2c-267">Built as a distributed set of small, independent services that interact through a shared fabric, microservices share the following characteristics:</span></span>

- <span data-ttu-id="f9a2c-268">Каждый реализует определенные бизнес-возможности в более широком контексте домена.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-268">Each implements a specific business capability within a larger domain context.</span></span>

- <span data-ttu-id="f9a2c-269">Каждый из них разработан автономно и может быть развернут независимо.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-269">Each is developed autonomously and can be deployed independently.</span></span>

- <span data-ttu-id="f9a2c-270">Каждый из них является автономным инкапсуляцией своей собственной технологии хранения данных (S'L, NoS'L) и платформы программирования.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-270">Each is self-contained encapsulating its own data storage technology (SQL, NoSQL) and programming platform.</span></span>

- <span data-ttu-id="f9a2c-271">Каждый из них работает в своем собственном процессе и общается с другими пользователями, используя стандартные коммуникационные протоколы, такие как HTTP/HTTPS, WebSockets или [AM-P.](https://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol)</span><span class="sxs-lookup"><span data-stu-id="f9a2c-271">Each runs in its own process and communicates with others using standard communication protocols such as HTTP/HTTPS, WebSockets, or [AMQP](https://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol).</span></span>

- <span data-ttu-id="f9a2c-272">Они сочиняют вместе, чтобы сформировать приложение.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-272">They compose together to form an application.</span></span>

<span data-ttu-id="f9a2c-273">Рисунок 1-4 контрастирует монолитный подход к применению с подходом микрослужб.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-273">Figure 1-4 contrasts a monolithic application approach with a microservices approach.</span></span> <span data-ttu-id="f9a2c-274">Обратите внимание, что монолит состоит из многослойной архитектуры, которая выполняется в одном процессе.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-274">Note how the monolith is composed of a layered architecture, which executes in a single process.</span></span> <span data-ttu-id="f9a2c-275">Как правило, он потребляет реляционные базы данных.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-275">It typically consumes a relational database.</span></span> <span data-ttu-id="f9a2c-276">Однако подход к микрослужбе сегрегирует функциональность на независимые службы, включающие логику и данные.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-276">The microservice approach, however, segregates functionality into independent services that include logic and data.</span></span> <span data-ttu-id="f9a2c-277">Каждая микрослужба размещает свой собственный хранилище данных.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-277">Each microservice hosts its own datastore.</span></span>

![Монолитное развертывание по сравнению с микрослужбами](./media/monolithic-vs-microservices.png)

<span data-ttu-id="f9a2c-279">**Рисунок 1-4.**</span><span class="sxs-lookup"><span data-stu-id="f9a2c-279">**Figure 1-4.**</span></span> <span data-ttu-id="f9a2c-280">Монолитное развертывание по сравнению с микрослужбами</span><span class="sxs-lookup"><span data-stu-id="f9a2c-280">Monolithic deployment versus microservices</span></span>

<span data-ttu-id="f9a2c-281">Обратите внимание, как микрослужбы продвигают принцип «Одна кодбаза, одно приложение» из [приложения «Двенадцать факторов»,](https://12factor.net/)обсуждавшихся ранее в главе.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-281">Note how microservices promote the "One Codebase, One Application" principle from the [Twelve-Factor Application](https://12factor.net/), discussed earlier in the chapter.</span></span>

> <span data-ttu-id="f9a2c-282">*Фактор \#1 определяет "Единую кодовую базу для каждой микрослужбы, хранящуюся в собственном репозитории. Отслеживаемый с помощью управления версиями, он может развертываться в нескольких средах."*</span><span class="sxs-lookup"><span data-stu-id="f9a2c-282">*Factor \#1  specifies "A single codebase for each microservice, stored in its own repository. Tracked with version control, it can deploy to multiple environments."*</span></span>

### <a name="why-microservices"></a><span data-ttu-id="f9a2c-283">Зачем нужны микрослужбы</span><span class="sxs-lookup"><span data-stu-id="f9a2c-283">Why microservices?</span></span>

<span data-ttu-id="f9a2c-284">Микроуслуги обеспечивают гибкость.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-284">Microservices provide agility.</span></span>

<span data-ttu-id="f9a2c-285">Ранее в главе мы сравнили приложение электронной коммерции, построенное как монолит, с приложением с микроуслугами.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-285">Earlier in the chapter, we compared an eCommerce application built as a monolith to that with microservices.</span></span> <span data-ttu-id="f9a2c-286">В примере мы увидели некоторые явные преимущества:</span><span class="sxs-lookup"><span data-stu-id="f9a2c-286">In the example, we saw some clear benefits:</span></span>

- <span data-ttu-id="f9a2c-287">Каждая микрослужба имеет автономный жизненный цикл и может развиваться независимо и часто развертываться.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-287">Each microservice has an autonomous lifecycle and can evolve independently and deploy frequently.</span></span> <span data-ttu-id="f9a2c-288">Вам не придется ждать ежеквартального выпуска для развертывания новых функций или обновления.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-288">You don’t have to wait for a quarterly release to deploy a new features or update.</span></span> <span data-ttu-id="f9a2c-289">Можно обновить небольшую площадь сложного приложения с меньшим риском нарушения всей системы.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-289">You can update a small area of a complex application with less risk of disrupting the entire system.</span></span>

- <span data-ttu-id="f9a2c-290">Каждая микрослужба может масштабироваться независимо.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-290">Each microservice can scale independently.</span></span> <span data-ttu-id="f9a2c-291">Вместо масштабирования всего приложения в единое целое, вы масштабируете только те службы, которые требуют больше вычислительной мощности или пропускной способности сети.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-291">Instead of scaling the entire application as a single unit, you scale out only those services that require more processing power or network bandwidth.</span></span> <span data-ttu-id="f9a2c-292">Этот мелкозернистый подход к масштабированию обеспечивает больший контроль над вашей системой и помогает снизить общие затраты при масштабировании части вашей системы, а не всего.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-292">This  fine-grained approach to scaling provides for greater control of your system and helps to reduce overall costs as you scale portions of your system, not everything.</span></span>

<span data-ttu-id="f9a2c-293">Отличным справочником для понимания микрослужб [является .NET Microservices: Архитектура для контейнерных приложений .NET](https://docs.microsoft.com/dotnet/standard/microservices-architecture/).</span><span class="sxs-lookup"><span data-stu-id="f9a2c-293">An excellent reference guide for understanding microservices is [.NET Microservices: Architecture for Containerized .NET Applications](https://docs.microsoft.com/dotnet/standard/microservices-architecture/).</span></span> <span data-ttu-id="f9a2c-294">Книга глубоко погружается в дизайн микрослужб и архитектуру.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-294">The book deep dives into microservices design and architecture.</span></span> <span data-ttu-id="f9a2c-295">Это компаньон для [полностек овой архитектуры микрослужбы](https://github.com/dotnet-architecture/eShopOnContainers) доступны в качестве бесплатной загрузки от Microsoft.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-295">It's a companion for a [full-stack microservice reference architecture](https://github.com/dotnet-architecture/eShopOnContainers) available as a free download from Microsoft.</span></span>

### <a name="developing-microservices"></a><span data-ttu-id="f9a2c-296">Развитие микросервисов</span><span class="sxs-lookup"><span data-stu-id="f9a2c-296">Developing microservices</span></span>

<span data-ttu-id="f9a2c-297">Микросервисы могут быть созданы с любой современной платформой разработки.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-297">Microservices can be created with any modern development platform.</span></span>

<span data-ttu-id="f9a2c-298">Платформа Microsoft .NET Core является отличным выбором.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-298">The Microsoft .NET Core platform is an excellent choice.</span></span> <span data-ttu-id="f9a2c-299">Бесплатный и открытый исходный код, он имеет много встроенных функций для упрощения разработки микрослужб.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-299">Free and open source, it has many built-in features to simplify microservice development.</span></span> <span data-ttu-id="f9a2c-300">.NET Core является кросс-платформенным.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-300">.NET Core is cross-platform.</span></span> <span data-ttu-id="f9a2c-301">Приложения могут быть построены и запущены на Windows, macOS и большинстве ароматизаторов Linux.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-301">Applications can be built and run on Windows, macOS, and most flavors of Linux.</span></span>

<span data-ttu-id="f9a2c-302">.NET Core обладает высокой результативной работой и хорошо забил по сравнению с Node.js и другими конкурирующими платформами.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-302">.NET Core is highly performant and has scored well in comparison to Node.js and other competing platforms.</span></span> <span data-ttu-id="f9a2c-303">Интересно, что [TechEmpower](https://www.techempower.com/) провел аттестинговый набор [тестов производительности](https://www.techempower.com/benchmarks/#section=data-r17&hw=ph&test=plaintext) на многих платформах и платформах веб-приложений.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-303">Interestingly, [TechEmpower](https://www.techempower.com/) conducted an extensive set of [performance benchmarks](https://www.techempower.com/benchmarks/#section=data-r17&hw=ph&test=plaintext) across many web application platforms and frameworks.</span></span> <span data-ttu-id="f9a2c-304">.NET Core набрал в топ-10 - значительно выше Node.js и других конкурирующих платформ.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-304">.NET Core scored in the top 10 - well above Node.js and other competing platforms.</span></span>

<span data-ttu-id="f9a2c-305">Ядро .NET поддерживается корпорацией Майкрософт и сообществом .NET на GitHub.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-305">.NET Core is maintained by Microsoft and the .NET community on GitHub.</span></span>

## <a name="containers"></a><span data-ttu-id="f9a2c-306">Контейнеры</span><span class="sxs-lookup"><span data-stu-id="f9a2c-306">Containers</span></span>

<span data-ttu-id="f9a2c-307">В настоящее время, это естественно, чтобы услышать термин *контейнер,* упомянутый в любом разговоре о *тумане родной*.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-307">Nowadays, it's natural to hear the term *container* mentioned in any conversation concerning *cloud native*.</span></span> <span data-ttu-id="f9a2c-308">В книге, [Облако Родные шаблоны](https://www.manning.com/books/cloud-native-patterns), автор Корнелия Дэвис отмечает, что "Контейнеры являются отличным фактором, способствуют облачного программного обеспечения".</span><span class="sxs-lookup"><span data-stu-id="f9a2c-308">In the book, [Cloud Native Patterns](https://www.manning.com/books/cloud-native-patterns), author Cornelia Davis observes that, "Containers are a great enabler of cloud-native software."</span></span> <span data-ttu-id="f9a2c-309">Фонд Cloud Native Computing Foundation ставит контейнеризацию микрослужб в качестве первого шага в своей [карте Cloud-Native Trail Map](https://raw.githubusercontent.com/cncf/trailmap/master/CNCF_TrailMap_latest.png) - руководства для предприятий, начинающих свое путешествие в облаке.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-309">The Cloud Native Computing Foundation places microservice containerization as the first step in their [Cloud-Native Trail Map](https://raw.githubusercontent.com/cncf/trailmap/master/CNCF_TrailMap_latest.png) - guidance for enterprises beginning their cloud-native journey.</span></span>

<span data-ttu-id="f9a2c-310">Контейнеризация микрослужбы проста и проста.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-310">Containerizing a microservice is simple and straightforward.</span></span> <span data-ttu-id="f9a2c-311">Код, его зависимости и время выполнения упакованы в двоичный файл, называемый [изображением контейнера.](https://docs.docker.com/glossary/?term=image)</span><span class="sxs-lookup"><span data-stu-id="f9a2c-311">The code, its dependencies, and runtime are packaged into a binary called a [container image](https://docs.docker.com/glossary/?term=image).</span></span> <span data-ttu-id="f9a2c-312">Изображения хранятся в [реестре контейнеров,](https://caylent.com/container-registries/)который выступает в качестве репозитория или библиотеки для изображений.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-312">Images are stored in a [container registry](https://caylent.com/container-registries/), which acts as a repository or library for images.</span></span> <span data-ttu-id="f9a2c-313">Реестр может быть размещен на компьютере разработки, в центре обработки данных или в общедоступном облаке.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-313">A registry can be located on your development computer, in your data center, or in a public cloud.</span></span> <span data-ttu-id="f9a2c-314">Докер сам поддерживает публичный реестр через [Docker hub](https://hub.docker.com/).</span><span class="sxs-lookup"><span data-stu-id="f9a2c-314">Docker itself maintains a public registry via [Docker Hub](https://hub.docker.com/).</span></span> <span data-ttu-id="f9a2c-315">Облако Azure имеет [реестр контейнеров](https://azure.microsoft.com/services/container-registry/) для хранения изображений контейнеров рядом с облачными приложениями, которые будут их запускать.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-315">The Azure cloud features a [container registry](https://azure.microsoft.com/services/container-registry/) to store container images close to the cloud applications that will run them.</span></span>

<span data-ttu-id="f9a2c-316">При необходимости изображение преобразуется в экземпляр бегущего контейнера.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-316">When needed, you transform the image into a running container instance.</span></span> <span data-ttu-id="f9a2c-317">Экземпляр работает на любом компьютере с установленным механизмом [запуска контейнера.](https://kubernetes.io/docs/setup/production-environment/container-runtimes/)</span><span class="sxs-lookup"><span data-stu-id="f9a2c-317">The instance runs on any computer that has a [container runtime](https://kubernetes.io/docs/setup/production-environment/container-runtimes/) engine installed.</span></span> <span data-ttu-id="f9a2c-318">Вы можете иметь столько экземпляров контейнерной службы по мере необходимости.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-318">You can have as many instances of the containerized service as needed.</span></span>

<span data-ttu-id="f9a2c-319">На рисунке 1-5 показаны три различных микрослужбы, каждая из которых находится в собственном контейнере, работая на одном хосте.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-319">Figure 1-5 shows three different microservices, each in its own container, running on a single host.</span></span>

![Несколько контейнеров на одном узле](./media/hosting-mulitple-containers.png)

<span data-ttu-id="f9a2c-321">**Рисунок 1-5**.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-321">**Figure 1-5**.</span></span> <span data-ttu-id="f9a2c-322">Несколько контейнеров на одном узле</span><span class="sxs-lookup"><span data-stu-id="f9a2c-322">Multiple containers running on a container host</span></span>

<span data-ttu-id="f9a2c-323">Обратите внимание, как каждый контейнер поддерживает свой собственный набор зависимостей и время выполнения, которые могут быть разными.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-323">Note how each container maintains its own set of dependencies and runtime, which can be different.</span></span> <span data-ttu-id="f9a2c-324">Здесь мы видим различные версии микрослужбы продукта, работающие на одном и том же узлах.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-324">Here, we see different versions of the Product microservice running on the same host.</span></span> <span data-ttu-id="f9a2c-325">Каждый контейнер разделяет фрагмент базовой операционной системы, памяти и процессора, но изолирован друг от друга.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-325">Each container shares a slice of the underlying host operating system, memory, and processor, but is isolated from one another.</span></span>

<span data-ttu-id="f9a2c-326">Обратите внимание, насколько хорошо модель контейнера охватывает принцип «Зависимости» из [приложения «Двенадцать факторов».](https://12factor.net/)</span><span class="sxs-lookup"><span data-stu-id="f9a2c-326">Note how well the container model embraces the "Dependencies" principle from the [Twelve-Factor Application](https://12factor.net/).</span></span>

> <span data-ttu-id="f9a2c-327">*Фактор \#2 указывает, что «каждая микрослужба изолирует и упаковывает свои собственные зависимости, внеся изменения, не влияя на всю систему».*</span><span class="sxs-lookup"><span data-stu-id="f9a2c-327">*Factor \#2  specifies that "Each microservice isolates and packages its own dependencies, embracing changes without impacting the entire system."*</span></span>

<span data-ttu-id="f9a2c-328">Контейнеры поддерживают рабочие нагрузки Linux и Windows.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-328">Containers support both Linux and Windows workloads.</span></span> <span data-ttu-id="f9a2c-329">Облако Azure открыто охватывает и то, и другое.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-329">The Azure cloud openly embraces both.</span></span> <span data-ttu-id="f9a2c-330">Интересно, что именно Linux, а не Windows Server, стал самой популярной операционной системой в Azure.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-330">Interestingly, it's Linux, not Windows Server, that has become the most popular operating system in Azure.</span></span>

<span data-ttu-id="f9a2c-331">В то время как существует несколько поставщиков контейнеров, Docker захватил львиную долю рынка.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-331">While several container vendors exist, Docker has captured the lion's share of the market.</span></span> <span data-ttu-id="f9a2c-332">Компания была движущей движения контейнеров программного обеспечения.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-332">The company has been driving the software container movement.</span></span> <span data-ttu-id="f9a2c-333">Он стал де-факто стандартом для упаковки, развертывания и запуска облачных приложений.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-333">It has become the de facto standard for packaging, deploying, and running cloud-native applications.</span></span>

### <a name="why-containers"></a><span data-ttu-id="f9a2c-334">Почему контейнеры?</span><span class="sxs-lookup"><span data-stu-id="f9a2c-334">Why containers?</span></span>

<span data-ttu-id="f9a2c-335">Контейнеры обеспечивают портативность и гарантируют согласованность в средах.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-335">Containers provide portability and guarantee consistency across environments.</span></span> <span data-ttu-id="f9a2c-336">Инкапсулируя все в единый пакет, вы *изолируете* микрослужбу и ее зависимости от базовой инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-336">By encapsulating everything into a single package, you *isolate* the microservice and its dependencies from the underlying infrastructure.</span></span>

<span data-ttu-id="f9a2c-337">Вы можете развернуть тот же контейнер в любой среде с движком времени выполнения Docker.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-337">You can deploy that same container in any environment that has the Docker runtime engine.</span></span> <span data-ttu-id="f9a2c-338">Контейнерные рабочие нагрузки также устраняют затраты на предварительную настройку каждой среды с помощью инфраструктур, библиотек программного обеспечения и двигателей времени выполнения.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-338">Containerized workloads also eliminate the expense of pre-configuring each environment with frameworks, software libraries, and runtime engines.</span></span>

<span data-ttu-id="f9a2c-339">Совместное использование базовой операционной системы и ресурсов-хоста, контейнеры имеют гораздо меньший след, чем полная виртуальная машина.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-339">By sharing the underlying operating system and host resources, containers have a much smaller footprint than a full virtual machine.</span></span> <span data-ttu-id="f9a2c-340">Меньший размер увеличивает *плотность*или количество микрослужб, что данный хост может работать в одно время.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-340">The smaller size increases the *density*, or number of microservices, that a given host can run at one time.</span></span>

### <a name="container-orchestration"></a><span data-ttu-id="f9a2c-341">Оркестрация контейнеров</span><span class="sxs-lookup"><span data-stu-id="f9a2c-341">Container orchestration</span></span>

<span data-ttu-id="f9a2c-342">В то время как такие инструменты, как Docker создают изображения и запускают контейнеры, вам также нужны инструменты для управления ими.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-342">While tools such as Docker create images and run containers, you also need tools to manage them.</span></span> <span data-ttu-id="f9a2c-343">Управление контейнерами осуществляется с помощью специальной программной программы под названием контейнерный оркестратор.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-343">Container management is done with a special software program called a container orchestrator.</span></span> <span data-ttu-id="f9a2c-344">При работе в масштабе, контейнерная оркестровка имеет важное значение.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-344">When operating at scale, container orchestration is essential.</span></span>

<span data-ttu-id="f9a2c-345">На рисунке 1-6 показаны задачи управления, которые обеспечивают контейнерные оркестранты.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-345">Figure 1-6 shows management tasks that container orchestrators provide.</span></span>

![Что делают контейнерные оркестранты](./media/what-container-orchestrators-do.png)

<span data-ttu-id="f9a2c-347">**Рисунок 1-6**.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-347">**Figure 1-6**.</span></span> <span data-ttu-id="f9a2c-348">Что делают контейнерные оркестранты</span><span class="sxs-lookup"><span data-stu-id="f9a2c-348">What container orchestrators do</span></span>

<span data-ttu-id="f9a2c-349">В следующей таблице описаны общие задачи оркестровки.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-349">The following table describes common orchestration tasks.</span></span>

|  <span data-ttu-id="f9a2c-350">Задания</span><span class="sxs-lookup"><span data-stu-id="f9a2c-350">Tasks</span></span> | <span data-ttu-id="f9a2c-351">Объяснение</span><span class="sxs-lookup"><span data-stu-id="f9a2c-351">Explanation</span></span>  |
| :-------- | :-------- |
| <span data-ttu-id="f9a2c-352">Планирование</span><span class="sxs-lookup"><span data-stu-id="f9a2c-352">Scheduling</span></span> | <span data-ttu-id="f9a2c-353">Автоматическое предоставление экземпляров контейнеров.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-353">Automatically provision container instances.</span></span>|
| <span data-ttu-id="f9a2c-354">Аффинити/анти-сродство</span><span class="sxs-lookup"><span data-stu-id="f9a2c-354">Affinity/anti-affinity</span></span> | <span data-ttu-id="f9a2c-355">Предоставление контейнеров поблизости или далеко друг от друга, помогая доступности и производительности.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-355">Provision containers nearby or far apart from each other, helping  availability and performance.</span></span> |
| <span data-ttu-id="f9a2c-356">Мониторинг работоспособности</span><span class="sxs-lookup"><span data-stu-id="f9a2c-356">Health monitoring</span></span> | <span data-ttu-id="f9a2c-357">Автоматически обнаруживать и исправлять сбои.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-357">Automatically detect and correct failures.</span></span>|
| <span data-ttu-id="f9a2c-358">Отработка отказа</span><span class="sxs-lookup"><span data-stu-id="f9a2c-358">Failover</span></span> | <span data-ttu-id="f9a2c-359">Автоматическое переобеспечение неудавшегося экземпляра на здоровые машины.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-359">Automatically reprovision failed instance to healthy machines.</span></span>|
| <span data-ttu-id="f9a2c-360">Масштабирование</span><span class="sxs-lookup"><span data-stu-id="f9a2c-360">Scaling</span></span> | <span data-ttu-id="f9a2c-361">Автоматически добавляйте или удаляйте экземпляр контейнера для удовлетворения спроса.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-361">Automatically add or remove container instance to meet demand.</span></span>|
| <span data-ttu-id="f9a2c-362">Сеть</span><span class="sxs-lookup"><span data-stu-id="f9a2c-362">Networking</span></span> | <span data-ttu-id="f9a2c-363">Управление сетевой накладкой для контейнерной связи.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-363">Manage a networking overlay for container communication.</span></span>|
| <span data-ttu-id="f9a2c-364">Обнаружение служб</span><span class="sxs-lookup"><span data-stu-id="f9a2c-364">Service Discovery</span></span> | <span data-ttu-id="f9a2c-365">Включите контейнеры, чтобы найти друг друга.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-365">Enable containers to locate each other.</span></span>|
| <span data-ttu-id="f9a2c-366">Последовательные обновления</span><span class="sxs-lookup"><span data-stu-id="f9a2c-366">Rolling Upgrades</span></span> | <span data-ttu-id="f9a2c-367">Координировать постепенные обновления с нулевым развертыванием времени простоя.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-367">Coordinate incremental upgrades with zero downtime deployment.</span></span> <span data-ttu-id="f9a2c-368">Автоматически откат проблемных изменений.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-368">Automatically roll back problematic changes.</span></span>|

<span data-ttu-id="f9a2c-369">Обратите внимание, как оркестранты принимают принципы разъявления и параллелизма из [Приложения Двенадцати Факторов,](https://12factor.net/)обсуждавшихся ранее в главе.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-369">Note how orchestrators embrace the disposability and concurrency principles from the [Twelve-Factor Application](https://12factor.net/), discussed earlier in the chapter.</span></span>

> <span data-ttu-id="f9a2c-370">*Фактор \#9 указывает, что "случаи обслуживания должны быть одноразовыми, предпочитая быстрые стартапы для увеличения возможностей масштабируемости и изящные остановки, чтобы оставить систему в правильном состоянии. Докер контейнеры вместе с оркестратором по своей сути удовлетворить это требование ".*</span><span class="sxs-lookup"><span data-stu-id="f9a2c-370">*Factor \#9  specifies that "Service instances should be disposable, favoring fast startups to increase scalability opportunities and graceful shutdowns to leave the system in a correct state. Docker containers along with an orchestrator inherently satisfy this requirement."*</span></span>

> <span data-ttu-id="f9a2c-371">*Фактор \#8 указывает, что "Услуги масштабируются в большом количестве небольших идентичных процессов (копий), в отличие от масштабирования одного большого экземпляра на самой мощной доступной машине".*</span><span class="sxs-lookup"><span data-stu-id="f9a2c-371">*Factor \#8  specifies that "Services scale out across a large number of small identical processes (copies) as opposed to scaling-up a single large instance on the most powerful machine available."*</span></span>

<span data-ttu-id="f9a2c-372">В то время как существует несколько контейнерных оркестровщиков, [Kubernetes](https://kubernetes.io/docs/concepts/overview/what-is-kubernetes/) стал де-факто стандартом для облачного мира.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-372">While several container orchestrators exist, [Kubernetes](https://kubernetes.io/docs/concepts/overview/what-is-kubernetes/) has become the de facto standard for the cloud-native world.</span></span> <span data-ttu-id="f9a2c-373">Это портативная, расширяемая платформа с открытым исходным кодом для управления контейнерными рабочими нагрузками.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-373">It's a portable, extensible, open-source platform for managing containerized workloads.</span></span>

<span data-ttu-id="f9a2c-374">Вы можете разместить свой собственный экземпляр Kubernetes, но тогда вы будете нести ответственность за подготовку и управление своими ресурсами - которые могут быть сложными.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-374">You could host your own instance of Kubernetes, but then you'd be responsible for provisioning and managing its resources - which can be complex.</span></span> <span data-ttu-id="f9a2c-375">Облако Azure включает в себя Kubernetes как управляемую службу, [службу Azure Kubernetes (AKS).](https://azure.microsoft.com/services/kubernetes-service/)</span><span class="sxs-lookup"><span data-stu-id="f9a2c-375">The Azure cloud features Kubernetes as a managed service, [Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span></span> <span data-ttu-id="f9a2c-376">Управляемая служба позволяет в полной мере использовать свои возможности, без необходимости устанавливать и поддерживать его.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-376">A managed service allows you to fully leverage its features, without having to install and maintain it.</span></span>

<span data-ttu-id="f9a2c-377">Службы Azure Kubernetes подробно описаны в главе 2, *масштабирование облачных приложений.*</span><span class="sxs-lookup"><span data-stu-id="f9a2c-377">Azure Kubernetes Services is covered in detail Chapter 2, *Scaling Cloud-Native Applications*.</span></span>

## <a name="backing-services"></a><span data-ttu-id="f9a2c-378">Резервные службы</span><span class="sxs-lookup"><span data-stu-id="f9a2c-378">Backing services</span></span>

<span data-ttu-id="f9a2c-379">Облачные системы зависят от множества различных вспомогательных ресурсов, таких как хранилища данных, брокеры сообщений, мониторинг и службы идентификации.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-379">Cloud-native systems depend upon many different ancillary resources, such as data stores, message brokers, monitoring, and identity services.</span></span> <span data-ttu-id="f9a2c-380">Эти службы известны как [службы поддержки.](https://12factor.net/backing-services)</span><span class="sxs-lookup"><span data-stu-id="f9a2c-380">These services are known as [backing services](https://12factor.net/backing-services).</span></span>

 <span data-ttu-id="f9a2c-381">На рисунке 1-7 показано много общих служб поддержки, которые потребляют облачные системы.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-381">Figure 1-7 shows many common backing services that cloud-native systems consume.</span></span>

![Общие службы поддержки](./media/common-backing-services.png)

<span data-ttu-id="f9a2c-383">**Рисунок 1-7**.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-383">**Figure 1-7**.</span></span> <span data-ttu-id="f9a2c-384">Общие службы поддержки</span><span class="sxs-lookup"><span data-stu-id="f9a2c-384">Common backing services</span></span>

<span data-ttu-id="f9a2c-385">Поддержка услуг содействовать "безгражданства" принцип из [Двенадцати фактор приложений](https://12factor.net/), обсуждалось ранее в главе.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-385">Backing services promote the "Statelessness" principle from the [Twelve-Factor Application](https://12factor.net/), discussed earlier in the chapter.</span></span>

><span data-ttu-id="f9a2c-386">*Фактор \#6* указывает, что "каждая микрослужба должна выполняться в своем собственном процессе, изолированном от других запущенных служб.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-386">*Factor \#6* specifies that, "Each microservice should execute in its own process, isolated from other running services.</span></span> <span data-ttu-id="f9a2c-387">Экстернализация требуемого состояния для резервной службы, такой как распределенный кэш или хранилище данных."</span><span class="sxs-lookup"><span data-stu-id="f9a2c-387">Externalize required state to a backing service such as a distributed cache or data store."</span></span>

<span data-ttu-id="f9a2c-388">Вы можете разместить свои собственные службы поддержки, но тогда вы будете нести ответственность за лицензирование, подготовку и управление этими ресурсами.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-388">You could host your own backing services, but then you'd be responsible for licensing, provisioning, and managing those resources.</span></span>

<span data-ttu-id="f9a2c-389">Поставщики облачных услуг предлагают богатый ассортимент *управляемых услуг поддержки.*</span><span class="sxs-lookup"><span data-stu-id="f9a2c-389">Cloud providers offer a rich assortment of *managed backing services.*</span></span> <span data-ttu-id="f9a2c-390">Вместо того, чтобы владеть услугой, вы просто потребляете ее.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-390">Instead of owning the service, you simply consume it.</span></span> <span data-ttu-id="f9a2c-391">Поставщик управляет ресурсом в масштабе и несет ответственность за производительность, безопасность и техническое обслуживание.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-391">The provider operates the resource at scale and bears the responsibility for performance, security, and maintenance.</span></span> <span data-ttu-id="f9a2c-392">Мониторинг, избыточность и доступность встроены в службу.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-392">Monitoring, redundancy, and availability are built into the service.</span></span> <span data-ttu-id="f9a2c-393">Провайдеры полностью поддерживают свои управляемые услуги - открывают билет и исправляют вашу проблему.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-393">Providers fully support their managed services - open a ticket and they fix your issue.</span></span>

<span data-ttu-id="f9a2c-394">Облачные системы отдают предпочтение управляемым службам поддержки от облачных поставщиков.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-394">Cloud-native systems favor managed backing services from cloud vendors.</span></span> <span data-ttu-id="f9a2c-395">Экономия времени и труда велика.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-395">The savings in time and labor are great.</span></span> <span data-ttu-id="f9a2c-396">Операционный риск хостинга собственных и испытывают проблемы могут получить дорого быстро.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-396">The operational risk of hosting your own and experiencing trouble can get expensive fast.</span></span>

<span data-ttu-id="f9a2c-397">Наилучшей практикой является рассматривать службу поддержки как *прилагаемый ресурс,* динамически связанный с микрослужбой с информацией (URL и учетными данными), хранящейся во внешней конфигурации.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-397">A best practice is to treat a backing service as an *attached resource*, dynamically bound to a microservice with information (a URL and credentials) stored in an external configuration.</span></span> <span data-ttu-id="f9a2c-398">Это руководство изложено в [приложении 12-фактор](https://12factor.net/), обсуждается ранее в главе.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-398">This guidance is spelled out in the [Twelve-Factor Application](https://12factor.net/), discussed earlier in the chapter.</span></span>

><span data-ttu-id="f9a2c-399">*Фактор \#4* указывает, что службы поддержки "должны быть выставлены через адресный URL.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-399">*Factor \#4* specifies that backing services "should be exposed via an addressable URL.</span></span> <span data-ttu-id="f9a2c-400">Это отменяет ресурс от приложения, позволяя ему быть взаимозаменяемым».</span><span class="sxs-lookup"><span data-stu-id="f9a2c-400">Doing so decouples the resource from the application, enabling it to be interchangeable."</span></span>

><span data-ttu-id="f9a2c-401">*Фактор \#3* указывает, что "информация о конфигурации перемещается из микрослужбы и экстернализуется с помощью инструмента управления конфигурацией за пределами кода".</span><span class="sxs-lookup"><span data-stu-id="f9a2c-401">*Factor \#3* specifies that "Configuration information is moved out of the microservice and externalized through a configuration management tool outside of the code."</span></span>

<span data-ttu-id="f9a2c-402">С помощью этого шаблона служба поддержки может быть прикреплена и отделена без изменений кода.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-402">With this pattern, a backing service can be attached and detached without code changes.</span></span> <span data-ttu-id="f9a2c-403">Вы можете продвигать микрослужбу от Q до промежуточной среды.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-403">You might promote a microservice from QA to a staging environment.</span></span> <span data-ttu-id="f9a2c-404">Вы обновляете конфигурацию микрослужбы, чтобы указать на службы поддержки в постановке и вводить настройки в контейнер через переменную среды.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-404">You update the microservice configuration to point to the backing services in staging and inject the settings into your container through an environment variable.</span></span>

<span data-ttu-id="f9a2c-405">Облачные поставщики предоставляют AA,sA, чтобы вы могли общаться со своими собственными службами поддержки.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-405">Cloud vendors provide APIs for you to communicate with their proprietary backing services.</span></span> <span data-ttu-id="f9a2c-406">Эти библиотеки инкапсулируют сантехнику и сложность.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-406">These libraries encapsulate the plumbing and complexity.</span></span> <span data-ttu-id="f9a2c-407">Общение непосредственно с этими AA будет тесно пара ваш код в службу поддержки.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-407">Communicating directly with these APIs will tightly couple your code to the backing service.</span></span> <span data-ttu-id="f9a2c-408">Лучше изолировать детали реализации API поставщика.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-408">It's a better practice to insulate the implementation details of the vendor API.</span></span> <span data-ttu-id="f9a2c-409">Введите слой посредничества или промежуточный API, подвергая общие операции коду службы.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-409">Introduce an intermediation layer, or intermediate API, exposing generic operations to your service code.</span></span> <span data-ttu-id="f9a2c-410">Эта свободная связь позволяет поменять одну службу поддержки на другую или переместить код в другое общедоступное облако без внесения изменений в основной код службы.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-410">This loose coupling enables you to swap out one backing service for another or move your code to a different public cloud without having to make changes to the mainline service code.</span></span>

<span data-ttu-id="f9a2c-411">Службы поддержки подробно обсуждаются в главе 5, *шаблонах данных cloud-Native*и главе 4, *шаблоны связи Cloud-Native.*</span><span class="sxs-lookup"><span data-stu-id="f9a2c-411">Backing services are discussed in detail Chapter 5, *Cloud-Native Data Patterns*, and Chapter 4, *Cloud-Native Communication Patterns*.</span></span>

## <a name="automation"></a><span data-ttu-id="f9a2c-412">Служба автоматизации</span><span class="sxs-lookup"><span data-stu-id="f9a2c-412">Automation</span></span>

<span data-ttu-id="f9a2c-413">Как вы видели, облачные системы охватывают микрослужбы, контейнеры и современный дизайн систем для достижения скорости и гибкости.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-413">As you've seen, cloud-native systems embrace microservices, containers, and modern system design to achieve speed and agility.</span></span> <span data-ttu-id="f9a2c-414">Но это только часть истории.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-414">But, that's only part of the story.</span></span> <span data-ttu-id="f9a2c-415">Как обеспечить облачные среды, на которых работают эти системы?</span><span class="sxs-lookup"><span data-stu-id="f9a2c-415">How do you provision the cloud environments upon which these systems run?</span></span> <span data-ttu-id="f9a2c-416">Как быстро развертывать функции и обновления приложений?</span><span class="sxs-lookup"><span data-stu-id="f9a2c-416">How do you rapidly deploy app features and updates?</span></span> <span data-ttu-id="f9a2c-417">Как закруглить полную картину?</span><span class="sxs-lookup"><span data-stu-id="f9a2c-417">How do you round out the full picture?</span></span>

<span data-ttu-id="f9a2c-418">Введите общепринятую практику [инфраструктуры как Код](https://docs.microsoft.com/azure/devops/learn/what-is-infrastructure-as-code), или IaC.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-418">Enter the widely accepted practice of [Infrastructure as Code](https://docs.microsoft.com/azure/devops/learn/what-is-infrastructure-as-code), or IaC.</span></span>

<span data-ttu-id="f9a2c-419">С помощью IaC вы автоматируеподготовки платформы и развертывания приложений.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-419">With IaC, you automate platform provisioning and application deployment.</span></span> <span data-ttu-id="f9a2c-420">Вы по существу применяете методы разработки программного обеспечения, такие как тестирование и версия для ваших практик DevOps.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-420">You essentially apply software engineering practices such as testing and versioning to your DevOps practices.</span></span> <span data-ttu-id="f9a2c-421">Инфраструктура и развертывание являются автоматизированными, последовательными и повторяемыми.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-421">Your infrastructure and deployments are automated, consistent, and repeatable.</span></span>

### <a name="automating-infrastructure"></a><span data-ttu-id="f9a2c-422">Автоматизация инфраструктуры</span><span class="sxs-lookup"><span data-stu-id="f9a2c-422">Automating infrastructure</span></span>

<span data-ttu-id="f9a2c-423">Такие инструменты, как [Azure Resource Manager,](https://azure.microsoft.com/documentation/articles/resource-group-overview/)Terraform и [Azure CLI,](https://docs.microsoft.com/cli/azure/)позволяют декларативно списать требуемую облачную инфраструктуру.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-423">Tools like [Azure Resource Manager](https://azure.microsoft.com/documentation/articles/resource-group-overview/), Terraform, and the [Azure CLI](https://docs.microsoft.com/cli/azure/), enable you to declaratively script the cloud infrastructure you require.</span></span> <span data-ttu-id="f9a2c-424">Имена ресурсов, местоположения, возможности и секреты параметрыи и динамические.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-424">Resource names, locations, capacities, and secrets are parameterized and dynamic.</span></span> <span data-ttu-id="f9a2c-425">Скрипт версиируется и проверяется в исходном элементе управления как артефакт вашего проекта.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-425">The script is versioned and checked into source control as an artifact of your project.</span></span> <span data-ttu-id="f9a2c-426">Вы ссылаетесь на скрипт для обеспечения последовательной и повторяемой инфраструктуры в средах системы, таких как кВС, постановка и производство.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-426">You invoke the script to provision a consistent and repeatable infrastructure across system environments, such as QA, staging, and production.</span></span>

<span data-ttu-id="f9a2c-427">Под капотом, IaC является идемпотентным, что означает, что вы можете запустить тот же сценарий снова и снова без побочных эффектов.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-427">Under the hood, IaC is idempotent, meaning that you can run the same script over and over without side effects.</span></span> <span data-ttu-id="f9a2c-428">Если команде необходимо внести изменения, они отоменяют и перезапустите сценарий.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-428">If the team needs to make a change, they edit and rerun the script.</span></span> <span data-ttu-id="f9a2c-429">Затрагиваются только обновленные ресурсы.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-429">Only the updated resources are affected.</span></span>

<span data-ttu-id="f9a2c-430">В статье [«Что такое инфраструктура как код»,](https://docs.microsoft.com/azure/devops/learn/what-is-infrastructure-as-code)автор Сэм Гукенхаймер описывает, как: «Команды, которые реализуют IaC, могут быстро и в масштабе обеспечивать стабильную среду.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-430">In the article, [What is Infrastructure as Code](https://docs.microsoft.com/azure/devops/learn/what-is-infrastructure-as-code), Author Sam Guckenheimer describes how, "Teams who implement IaC can deliver stable environments rapidly and at scale.</span></span> <span data-ttu-id="f9a2c-431">Команды избегают ручной настройки сред и обеспечивают согласованность, представляя желаемое состояние своих сред с помощью кода.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-431">Teams avoid manual configuration of environments and enforce consistency by representing the desired state of their environments via code.</span></span> <span data-ttu-id="f9a2c-432">Развертывание инфраструктуры с Помощью IaC повторяется и предотвращает проблемы времени выполнения, вызванные дрейфом конфигурации или отсутствующими зависимостями.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-432">Infrastructure deployments with IaC are repeatable and prevent runtime issues caused by configuration drift or missing dependencies.</span></span> <span data-ttu-id="f9a2c-433">Команды DevOps могут работать вместе с единым набором практик и инструментов для быстрого, надежного и масштабного предоставления приложений и их вспомогательной инфраструктуры».</span><span class="sxs-lookup"><span data-stu-id="f9a2c-433">DevOps teams can work together with a unified set of practices and tools to deliver applications and their supporting infrastructure rapidly, reliably, and at scale."</span></span>

### <a name="automating-deployments"></a><span data-ttu-id="f9a2c-434">Автоматизация развертывания</span><span class="sxs-lookup"><span data-stu-id="f9a2c-434">Automating deployments</span></span>

<span data-ttu-id="f9a2c-435">[Приложение «Двенадцать факторов»,](https://12factor.net/)обсуждаемое ранее, требует отдельных шагов при преобразовании заполненного кода в запущенное приложение.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-435">The [Twelve-Factor Application](https://12factor.net/), discussed earlier, calls for separate steps when transforming completed code into a running application.</span></span>

> <span data-ttu-id="f9a2c-436">*Фактор \#5* указывает, что "каждый релиз должен обеспечивать строгое разделение на этапах сборки, выпуска и запуска.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-436">*Factor \#5* specifies that "Each release must enforce a strict separation across the build, release and run stages.</span></span> <span data-ttu-id="f9a2c-437">Каждый из них должен быть помечен уникальным идентификатором и поддерживать возможность отката».</span><span class="sxs-lookup"><span data-stu-id="f9a2c-437">Each should be tagged with a unique ID and support the ability to roll back."</span></span>

<span data-ttu-id="f9a2c-438">Современные системы CI/CD помогают реализовать этот принцип.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-438">Modern CI/CD systems help fulfill this principle.</span></span> <span data-ttu-id="f9a2c-439">Они предоставляют отдельные шаги развертывания и помогают обеспечить согласованный и качественный код, доступный пользователям.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-439">They provide separate deployment steps and help ensure consistent and quality code that's readily available to users.</span></span>

<span data-ttu-id="f9a2c-440">На рисунке 1-8 показано разделение процесса развертывания.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-440">Figure 1-8 shows the separation across the deployment process.</span></span>

![Шаги развертывания в конвейере CI/CD](./media/build-release-run-pipeline.png)

<span data-ttu-id="f9a2c-442">**Рисунок 1-8**.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-442">**Figure 1-8**.</span></span> <span data-ttu-id="f9a2c-443">Этапы развертывания в конвейере CI/CD</span><span class="sxs-lookup"><span data-stu-id="f9a2c-443">Deployment steps in a CI/CD Pipeline</span></span>

<span data-ttu-id="f9a2c-444">В предыдущем рисунке, обратите особое внимание на разделение задач.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-444">In the previous figure, pay special attention to separation of tasks.</span></span>

<span data-ttu-id="f9a2c-445">Разработчик создает функцию в среде разработки, итерируя через так называемый «внутренний цикл» кода, запуска и отладки.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-445">The developer constructs a feature in their development environment, iterating through what is called the "inner loop" of code, run, and debug.</span></span> <span data-ttu-id="f9a2c-446">После завершения этот код *засовывается* в репозиторий кода, например GitHub, Azure DevOps или BitBucket.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-446">When complete, that code is *pushed* into a code repository, such as GitHub, Azure DevOps, or BitBucket.</span></span>

<span data-ttu-id="f9a2c-447">Нажатие запускает стадию сборки, которая преобразует код в двоичный артефакт.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-447">The push triggers a build stage that transforms the code into a binary artifact.</span></span> <span data-ttu-id="f9a2c-448">Работа осуществляется с конвейером [непрерывной интеграции (CI).](https://martinfowler.com/articles/continuousIntegration.html)</span><span class="sxs-lookup"><span data-stu-id="f9a2c-448">The work is implemented with a [Continuous Integration (CI)](https://martinfowler.com/articles/continuousIntegration.html) pipeline.</span></span> <span data-ttu-id="f9a2c-449">Он автоматически создает, тестирует и упаковывает приложение.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-449">It automatically builds, tests, and packages the application.</span></span>

<span data-ttu-id="f9a2c-450">Этап выпуска подхватывает двоичный артефакт, применяет информацию о конфигурации внешнего приложения и среды и производит неизменяемый релиз.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-450">The release stage picks up the binary artifact, applies external application and environment configuration information, and produces an immutable release.</span></span> <span data-ttu-id="f9a2c-451">Выпуск развертывается в заданную среду.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-451">The release is deployed to a specified environment.</span></span> <span data-ttu-id="f9a2c-452">Работа выполняется с конвейером [непрерывной доставки (CD).](https://martinfowler.com/bliki/ContinuousDelivery.html)</span><span class="sxs-lookup"><span data-stu-id="f9a2c-452">The work is implemented with a [Continuous Delivery(CD)](https://martinfowler.com/bliki/ContinuousDelivery.html) pipeline.</span></span> <span data-ttu-id="f9a2c-453">Каждый релиз должен быть идентифицирован.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-453">Each release should be identifiable.</span></span> <span data-ttu-id="f9a2c-454">Вы можете сказать: "Это развертывание работает релиз 2.1.1 приложения".</span><span class="sxs-lookup"><span data-stu-id="f9a2c-454">You can say, "This deployment is running Release 2.1.1 of the application."</span></span>

<span data-ttu-id="f9a2c-455">Наконец, выпущенная функция запущена в среде целевого выполнения.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-455">Finally, the released feature is run in the target execution environment.</span></span> <span data-ttu-id="f9a2c-456">Релизы являются неизменяемым, что означает, что любое изменение должно создать новый релиз.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-456">Releases are immutable meaning that any change must create a new release.</span></span>

<span data-ttu-id="f9a2c-457">Применяя эту практику, организации радикально эволюционировали в том, как они подают программное обеспечение.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-457">Applying these practices, organizations have radically evolved how they ship software.</span></span> <span data-ttu-id="f9a2c-458">Многие из них перешли от ежеквартальных релизов к обновлениям по требованию.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-458">Many have moved from quarterly releases to on-demand updates.</span></span> <span data-ttu-id="f9a2c-459">Цель состоит в том, чтобы поймать проблемы в начале цикла разработки, когда они дешевле исправить.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-459">The goal is to catch problems early in the development cycle when they're less expensive to fix.</span></span> <span data-ttu-id="f9a2c-460">Чем дольше продолжительность между интеграциями, тем более дорогостоящими становятся решения.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-460">The longer the duration between integrations, the more expensive problems become to resolve.</span></span>  <span data-ttu-id="f9a2c-461">При последовательности в процессе интеграции команды могут чаще фиксировать изменения кода, что приводит к улучшению совместной работы и качеству программного обеспечения.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-461">With consistency in the integration process, teams can commit code changes more frequently, leading to better collaboration and software quality.</span></span>

### <a name="azure-pipelines"></a><span data-ttu-id="f9a2c-462">Azure Pipelines</span><span class="sxs-lookup"><span data-stu-id="f9a2c-462">Azure Pipelines</span></span>

<span data-ttu-id="f9a2c-463">Облако Azure включает в себя новый CI/CD-сервис под названием [Azure Pipelines,](https://azure.microsoft.com/services/devops/pipelines/)который является частью предложения [Azure DevOps,](https://azure.microsoft.com/services/devops/) показанного на рисунке 1-9.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-463">The Azure cloud includes a new CI/CD service entitled [Azure Pipelines](https://azure.microsoft.com/services/devops/pipelines/), which is part of the [Azure DevOps](https://azure.microsoft.com/services/devops/) offering shown in Figure 1-9.</span></span>

![Трубопроводы Azure в ДевОпс](./media/devops-components.png)

<span data-ttu-id="f9a2c-465">**Рисунок 1-9**.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-465">**Figure 1-9**.</span></span> <span data-ttu-id="f9a2c-466">Предложения Azure DevOps</span><span class="sxs-lookup"><span data-stu-id="f9a2c-466">Azure DevOps offerings</span></span>

<span data-ttu-id="f9a2c-467">Azure Pipelines — это облачный сервис, сочетающий в себе непрерывную интеграцию (CI) и непрерывную доставку (CD).</span><span class="sxs-lookup"><span data-stu-id="f9a2c-467">Azure Pipelines is a cloud service that combines continuous integration (CI) and continuous delivery (CD).</span></span> <span data-ttu-id="f9a2c-468">Вы можете автоматически тестировать, создавать и отомещать свой код в любую цель.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-468">You can automatically test, build, and ship your code to any target.</span></span>

<span data-ttu-id="f9a2c-469">Вы определяете свой конвейер в коде в файле YAML вместе с остальной частью кода для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-469">You define your pipeline in code in a YAML file alongside the rest of the code for your app.</span></span>

- <span data-ttu-id="f9a2c-470">Конвейер приводится в версию с кодом и выполняет одну и ту же структуру ветвления.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-470">The pipeline is versioned with your code and follows the same branching structure.</span></span>
- <span data-ttu-id="f9a2c-471">Вы получаете проверку изменений с помощью отзывов кода в запросах на вытягивание и политиках создания ветвей.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-471">You get validation of your changes through code reviews in pull requests and branch build policies.</span></span>
- <span data-ttu-id="f9a2c-472">Каждая ветвь, которую вы используете, может настроить политику сборки, изменив файл azure-pipelines.yml.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-472">Every branch you use can customize the build policy by modifying the azure-pipelines.yml file.</span></span>
- <span data-ttu-id="f9a2c-473">Файл конвейера проверяется в управлении версиями и может быть исследован, если есть проблема.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-473">The pipeline file is checked into version control and can be investigated if there's a problem.</span></span>

<span data-ttu-id="f9a2c-474">Служба Azure Pipelines поддерживает большинство поставщиков Git и может создавать конвейеры развертывания для приложений, написанных на платформах Linux, macOS или Windows.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-474">The Azure Pipelines service supports most Git providers and can generate deployment pipelines for applications written on the Linux, macOS, or Windows platforms.</span></span> <span data-ttu-id="f9a2c-475">Она включает в себя поддержку Java, .NET, JavaScript, Python, PHP, Go, XCode и C.</span><span class="sxs-lookup"><span data-stu-id="f9a2c-475">It includes support for Java, .NET, JavaScript, Python, PHP, Go, XCode, and C++.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="f9a2c-476">[Предыдущий](introduction.md)
>[Следующий](candidate-apps.md)</span><span class="sxs-lookup"><span data-stu-id="f9a2c-476">[Previous](introduction.md)
[Next](candidate-apps.md)</span></span>
