---
title: Введение в Справочное приложение eShopOnContainers
description: Общие сведения о приложении для ASP.NET Core и Azure, встроенном в облачные микрослужбы.
ms.date: 06/30/2019
ms.openlocfilehash: 0d55f248acbc34bcc76d38987d7e1d537cf6065a
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2019
ms.locfileid: "73841777"
---
# <a name="introducing-eshoponcontainers-reference-app"></a><span data-ttu-id="1094b-103">Введение в Справочное приложение eShopOnContainers</span><span class="sxs-lookup"><span data-stu-id="1094b-103">Introducing eShopOnContainers reference app</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="1094b-104">Корпорация Майкрософт, в связи с ведущими экспертами сообщества, создала полнофункциональное облачное приложение-Справочник по микрослужбам, eShopOnContainers.</span><span class="sxs-lookup"><span data-stu-id="1094b-104">Microsoft, in partnership with leading community experts, has produced a full-featured cloud-native microservices reference application, eShopOnContainers.</span></span> <span data-ttu-id="1094b-105">Это приложение предназначено для демонстрации использования .NET Core и DOCKER, а также, при необходимости, Azure, Kubernetes и Visual Studio, для создания Интернет-магазина.</span><span class="sxs-lookup"><span data-stu-id="1094b-105">This application is built to showcase using .NET Core and Docker, and optionally Azure, Kubernetes, and Visual Studio, to build an online storefront.</span></span>

![Снимок экрана примера приложения eShopOnContainers.](./media/eshoponcontainers-sample-app-screenshot.png)

<span data-ttu-id="1094b-107">**Рис. 2-1**.</span><span class="sxs-lookup"><span data-stu-id="1094b-107">**Figure 2-1**.</span></span> <span data-ttu-id="1094b-108">Снимок экрана примера приложения eShopOnContainers.</span><span class="sxs-lookup"><span data-stu-id="1094b-108">eShopOnContainers Sample App Screenshot.</span></span>

<span data-ttu-id="1094b-109">Перед началом этой главы рекомендуется скачать [эталонное приложение eShopOnContainers](https://github.com/dotnet-architecture/eShopOnContainers).</span><span class="sxs-lookup"><span data-stu-id="1094b-109">Before starting this chapter, we recommend that you download the [eShopOnContainers reference application](https://github.com/dotnet-architecture/eShopOnContainers).</span></span> <span data-ttu-id="1094b-110">В этом случае вам будет проще следовать представленной информации.</span><span class="sxs-lookup"><span data-stu-id="1094b-110">If you do so, it should be easier for you to follow along with the information presented.</span></span>

## <a name="features-and-requirements"></a><span data-ttu-id="1094b-111">Функции и требования</span><span class="sxs-lookup"><span data-stu-id="1094b-111">Features and requirements</span></span>

<span data-ttu-id="1094b-112">Начнем с рассмотрения функций и требований приложения.</span><span class="sxs-lookup"><span data-stu-id="1094b-112">Let's start with a review of the application's features and requirements.</span></span> <span data-ttu-id="1094b-113">Приложение eShopOnContainers представляет собой Интернет-магазин, который продает различные физические продукты, такие как t-рубашки и кофе кружки.</span><span class="sxs-lookup"><span data-stu-id="1094b-113">The eShopOnContainers application represents an online store that sells various physical products like t-shirts and coffee mugs.</span></span> <span data-ttu-id="1094b-114">Если вы уже приобрели что-то еще до этого, работа с магазином должна быть относительно знакома.</span><span class="sxs-lookup"><span data-stu-id="1094b-114">If you've bought anything online before, the experience of using the store should be relatively familiar.</span></span> <span data-ttu-id="1094b-115">Ниже приведены некоторые основные функции, реализуемые хранилищем.</span><span class="sxs-lookup"><span data-stu-id="1094b-115">Here are some of the basic features the store implements:</span></span>

- <span data-ttu-id="1094b-116">Список элементов каталога</span><span class="sxs-lookup"><span data-stu-id="1094b-116">List catalog items</span></span>
- <span data-ttu-id="1094b-117">Фильтровать элементы по типу</span><span class="sxs-lookup"><span data-stu-id="1094b-117">Filter items by type</span></span>
- <span data-ttu-id="1094b-118">Фильтровать элементы по фирменной символике</span><span class="sxs-lookup"><span data-stu-id="1094b-118">Filter items by brand</span></span>
- <span data-ttu-id="1094b-119">Добавление элементов в корзину покупок</span><span class="sxs-lookup"><span data-stu-id="1094b-119">Add items to the shopping basket</span></span>
- <span data-ttu-id="1094b-120">Изменение или удаление элементов из корзины</span><span class="sxs-lookup"><span data-stu-id="1094b-120">Edit or remove items from the basket</span></span>
- <span data-ttu-id="1094b-121">Оформление</span><span class="sxs-lookup"><span data-stu-id="1094b-121">Checkout</span></span>
- <span data-ttu-id="1094b-122">Регистрация учетной записи</span><span class="sxs-lookup"><span data-stu-id="1094b-122">Register an account</span></span>
- <span data-ttu-id="1094b-123">Войти</span><span class="sxs-lookup"><span data-stu-id="1094b-123">Sign in</span></span>
- <span data-ttu-id="1094b-124">Выйти</span><span class="sxs-lookup"><span data-stu-id="1094b-124">Sign out</span></span>
- <span data-ttu-id="1094b-125">Обзор заказов</span><span class="sxs-lookup"><span data-stu-id="1094b-125">Review orders</span></span>

<span data-ttu-id="1094b-126">Приложение также имеет следующие нефункциональные требования:</span><span class="sxs-lookup"><span data-stu-id="1094b-126">The application also has the following non-functional requirements:</span></span>

- <span data-ttu-id="1094b-127">Он должен быть высокодоступным, и его необходимо автоматически масштабировать, чтобы обеспечить соответствие увеличенному объему трафика (и масштабировать диск, когда он проходит в сторону).</span><span class="sxs-lookup"><span data-stu-id="1094b-127">It needs to be highly available and it must scale automatically to meet increased traffic (and scale back down once traffic subsides).</span></span>
- <span data-ttu-id="1094b-128">Он должен обеспечивать простой в использовании Мониторинг журнала работоспособности и диагностики, чтобы помочь в устранении возникающих проблем.</span><span class="sxs-lookup"><span data-stu-id="1094b-128">It should provide easy-to-use monitoring of its health and diagnostic logs to help troubleshoot any issues it encounters.</span></span>
- <span data-ttu-id="1094b-129">Он должен поддерживать гибкий процесс разработки, включая поддержку непрерывной интеграции и развертывания (CI/CD).</span><span class="sxs-lookup"><span data-stu-id="1094b-129">It should support an agile development process, including support for continuous integration and deployment (CI/CD).</span></span>
- <span data-ttu-id="1094b-130">В дополнение к двум внешним веб-интерфейсам (традиционным и одностраничным приложениям) приложение также должно поддерживать мобильные клиентские приложения, работающие под управлением разных типов операционных систем.</span><span class="sxs-lookup"><span data-stu-id="1094b-130">In addition to the two web front ends (traditional and Single Page Application), the application must also support mobile client apps running different kinds of operating systems.</span></span>
- <span data-ttu-id="1094b-131">Она должна поддерживать кросс-платформенное размещение и межплатформенную разработку.</span><span class="sxs-lookup"><span data-stu-id="1094b-131">It should support cross-platform hosting and cross-platform development.</span></span>

![архитектура разработки эталонного приложения eShopOnContainers.](./media/eshoponcontainers-development-architecture.png)

<span data-ttu-id="1094b-133">**Рис. 2-2**.</span><span class="sxs-lookup"><span data-stu-id="1094b-133">**Figure 2-2**.</span></span> <span data-ttu-id="1094b-134">архитектура разработки эталонного приложения eShopOnContainers.</span><span class="sxs-lookup"><span data-stu-id="1094b-134">eShopOnContainers reference application development architecture.</span></span>

<span data-ttu-id="1094b-135">Приложение eShopOnContainers доступно для мобильных и веб-клиентов, которые обращаются к приложению по протоколу HTTPS, предназначенному для приложения ASP.NET Core MVC Server или соответствующего шлюза API.</span><span class="sxs-lookup"><span data-stu-id="1094b-135">The eShopOnContainers application is accessible from web or mobile clients that access the application over HTTPS targeting either the ASP.NET Core MVC server application or an appropriate API Gateway.</span></span> <span data-ttu-id="1094b-136">Шлюзы API предлагают несколько преимуществ, таких как отделение серверных служб от отдельных клиентских клиентов и обеспечение лучшей безопасности.</span><span class="sxs-lookup"><span data-stu-id="1094b-136">API Gateways offer several advantages, such as decoupling back-end services from individual front-end clients and providing better security.</span></span> <span data-ttu-id="1094b-137">Приложение также использует связанный шаблон, известный как серверные части для внешних интерфейсов (БФФ), которые рекомендуют создавать отдельные шлюзы API для каждого клиентского клиента.</span><span class="sxs-lookup"><span data-stu-id="1094b-137">The application also makes use of a related pattern known as Backends-for-Frontends (BFF), which recommends creating separate API gateways for each front-end client.</span></span> <span data-ttu-id="1094b-138">Эталонная архитектура демонстрирует разделение шлюзов API в зависимости от того, поступает ли запрос из Интернета или с мобильного клиента.</span><span class="sxs-lookup"><span data-stu-id="1094b-138">The reference architecture demonstrates breaking up the API gateways based on whether the request is coming from a web or mobile client.</span></span>

<span data-ttu-id="1094b-139">Функциональные возможности приложения разбиваются на несколько отдельных микрослужб.</span><span class="sxs-lookup"><span data-stu-id="1094b-139">The application's functionality is broken up into a number of distinct microservices.</span></span> <span data-ttu-id="1094b-140">Существуют службы, отвечающие за проверку подлинности и идентификацию, список элементов из каталога продуктов, управление корзинами покупок пользователей и размещение заказов.</span><span class="sxs-lookup"><span data-stu-id="1094b-140">There are services responsible for authentication and identity, listing items from the product catalog, managing users' shopping baskets, and  placing orders.</span></span> <span data-ttu-id="1094b-141">Каждая из этих отдельных служб имеет собственное постоянное хранилище.</span><span class="sxs-lookup"><span data-stu-id="1094b-141">Each of these separate services has its own persistent storage.</span></span> <span data-ttu-id="1094b-142">Обратите внимание, что нет ни одного основного хранилища данных, с которым взаимодействуют все службы.</span><span class="sxs-lookup"><span data-stu-id="1094b-142">Note that there's no single master data store with which all services interact.</span></span> <span data-ttu-id="1094b-143">Вместо этого координация и взаимодействие между службами выполняются по мере необходимости и с помощью шины сообщений.</span><span class="sxs-lookup"><span data-stu-id="1094b-143">Instead, coordination and communication between the services is done on an as-needed basis and through the use of a message bus.</span></span>

<span data-ttu-id="1094b-144">Каждая из разных микрослужб разработана по-разному в зависимости от их индивидуальных требований.</span><span class="sxs-lookup"><span data-stu-id="1094b-144">Each of the different microservices is designed differently, based on their individual requirements.</span></span> <span data-ttu-id="1094b-145">Это означает, что их технологический стек может отличаться, хотя все они созданы с помощью .NET Core и предназначены для облака.</span><span class="sxs-lookup"><span data-stu-id="1094b-145">This means their technology stack may differ, although they're all built using .NET Core and designed for the cloud.</span></span> <span data-ttu-id="1094b-146">Более простые службы предоставляют базовый доступ для создания, чтения и удаления (CRUD) к базовым хранилищам данных, в то время как более сложные службы используют основанные на доменах подходы к проектированию и шаблоны для управления сложными бизнес-процессами.</span><span class="sxs-lookup"><span data-stu-id="1094b-146">Simpler services provide basic Create-Read-Update-Delete (CRUD) access to the underlying data stores, while more advanced services use Domain-Driven Design approaches and patterns to manage business complexity.</span></span>

![Различные виды микрослужб](./media/different-kinds-of-microservices.png)

<span data-ttu-id="1094b-148">**Рис. 2-3**.</span><span class="sxs-lookup"><span data-stu-id="1094b-148">**Figure 2-3**.</span></span> <span data-ttu-id="1094b-149">Различные виды микрослужб.</span><span class="sxs-lookup"><span data-stu-id="1094b-149">Different kinds of microservices.</span></span>

## <a name="overview-of-the-code"></a><span data-ttu-id="1094b-150">Общие сведения о коде</span><span class="sxs-lookup"><span data-stu-id="1094b-150">Overview of the code</span></span>

<span data-ttu-id="1094b-151">Так как он использует микрослужбы, приложение eShopOnContainers включает в себя несколько отдельных проектов и решений в своем репозитории GitHub.</span><span class="sxs-lookup"><span data-stu-id="1094b-151">Because it leverages microservices, the eShopOnContainers app includes quite a few separate projects and solutions in its GitHub repository.</span></span> <span data-ttu-id="1094b-152">В дополнение к отдельным решениям и исполняемым файлам, различные службы предназначены для работы внутри собственных контейнеров как во время локальной разработки, так и во время выполнения в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="1094b-152">In addition to separate solutions and executable files, the various services are designed to run inside their own containers, both during local development and at runtime in production.</span></span> <span data-ttu-id="1094b-153">На рис. 2-4 показано полное решение Visual Studio, в котором организованы различные проекты.</span><span class="sxs-lookup"><span data-stu-id="1094b-153">Figure 2-4 shows the full Visual Studio solution, in which the various different projects are organized.</span></span>

![Проекты в решении Visual Studio.](./media/projects-in-visual-studio-solution.png)

<span data-ttu-id="1094b-155">**Рис. 2-4**.</span><span class="sxs-lookup"><span data-stu-id="1094b-155">**Figure 2-4**.</span></span> <span data-ttu-id="1094b-156">Проекты в решении Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1094b-156">Projects in Visual Studio solution.</span></span>

<span data-ttu-id="1094b-157">Код организован для поддержки различных микрослужб, и в каждой микрослужбе код разбивается на логику домена, проблемы с инфраструктурой, Пользовательский интерфейс или конечную точку службы.</span><span class="sxs-lookup"><span data-stu-id="1094b-157">The code is organized to support the different microservices, and within each microservice, the code is broken up into domain logic, infrastructure concerns, and user interface or service endpoint.</span></span> <span data-ttu-id="1094b-158">Во многих случаях зависимости каждой службы могут быть выполнены службами Azure в рабочей среде, а также альтернативными вариантами для локальной разработки.</span><span class="sxs-lookup"><span data-stu-id="1094b-158">In many cases, each service's dependencies can be fulfilled by Azure services in production, as well as alternative options for local development.</span></span> <span data-ttu-id="1094b-159">Давайте рассмотрим, как требования приложения сопоставляются со службами Azure.</span><span class="sxs-lookup"><span data-stu-id="1094b-159">Let's examine how the application's requirements map to Azure services.</span></span>

## <a name="understanding-microservices"></a><span data-ttu-id="1094b-160">Основные сведения о микрослужбах</span><span class="sxs-lookup"><span data-stu-id="1094b-160">Understanding microservices</span></span>

<span data-ttu-id="1094b-161">Эта книга посвящена собственным облачным приложениям, созданным с помощью технологии Azure.</span><span class="sxs-lookup"><span data-stu-id="1094b-161">This book focuses on cloud-native applications built using Azure technology.</span></span> <span data-ttu-id="1094b-162">Дополнительные сведения о рекомендациях по работе с микрослужбами и проектировании приложений на основе микрослужб см. в сопроводительной книге, [микрослужбах .NET: архитектура для контейнерных приложений .NET](https://dotnet.microsoft.com/learn/aspnet/microservices-architecture).</span><span class="sxs-lookup"><span data-stu-id="1094b-162">To learn more about microservices best practices and how to architect microservice-based applications, read the companion book, [.NET Microservices: Architecture for Containerized .NET Applications](https://dotnet.microsoft.com/learn/aspnet/microservices-architecture).</span></span> <span data-ttu-id="1094b-163">Книга доступна через Интернет, в формате PDF или Ереадер.</span><span class="sxs-lookup"><span data-stu-id="1094b-163">The book is available online, in PDF, or eReader formats.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="1094b-164">[Назад](candidate-apps.md)
>[Вперед](map-eshoponcontainers-azure-services.md)</span><span class="sxs-lookup"><span data-stu-id="1094b-164">[Previous](candidate-apps.md)
[Next](map-eshoponcontainers-azure-services.md)</span></span>
