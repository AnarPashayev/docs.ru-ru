---
title: Инфраструктура связи для слоя взаимодействия между службами
description: Узнайте о том, как технологии сервисной сетки упрощают связь с облачными микрослужбами
author: robvet
ms.date: 03/03/2020
ms.openlocfilehash: 6b177ef33b804ec35f3acb919539a97683e5a487
ms.sourcegitcommit: 79b0dd8bfc63f33a02137121dd23475887ecefda
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/01/2020
ms.locfileid: "80523523"
---
# <a name="service-mesh-communication-infrastructure"></a>Инфраструктура связи для слоя взаимодействия между службами

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

На протяжении этой главы мы исследовали проблемы микрослужбы связи. Мы сказали, что группы разработчиков должны быть чувствительны к тому, как службы бэк-энда взаимодействуют друг с другом. В идеале, чем меньше межсервисная связь, тем лучше. Однако избежать не всегда возможно, так как службы обратного конца часто полагаются друг на друга для завершения операций.

Мы изучили различные подходы к внедрению синхронной связи HTTP и асинхронных сообщений. В каждом из случаев разработчик обременен реализацией коммуникационного кода. Коммуникационный код является сложным и трудоемким. Неправильные решения могут привести к значительным проблемам с производительностью.

Более современный подход к микросервисным коммуникационным центрам вокруг новой и быстро развивающейся технологии под названием *Service Mesh*. [Сетка обслуживания](https://www.nginx.com/blog/what-is-a-service-mesh/) — это настраиваемый уровень инфраструктуры со встроенными возможностями для обработки связи между службами, устойчивостью и множеством проблем, связанных с перекрестным сокращением. Он переносит ответственность за эти проблемы из микрослужб и в уровень сетки обслуживания. Связь абстрагируется от ваших микрослужб.

Ключевым компонентом сетки службявляется прокси. В облачном приложении экземпляр прокси обычно расположен с каждой микрослужбой. Хотя они выполняются в отдельных процессах, они тесно связаны между собой и имеют один и тот же жизненный цикл. Этот шаблон, известный как [шаблон Sidecar,](https://docs.microsoft.com/azure/architecture/patterns/sidecar)и показан на рисунке 4-24.

![Сервисная сетка с боквейным автомобилем](./media/service-mesh-with-side-car.png)

**Рис. 4-24**. Сервисная сетка с боквейным автомобилем

Обратите внимание на предыдущую цифру, как сообщения перехватываются прокси, который работает рядом с каждой микрослужбой. Каждый прокси может быть настроен с правилами дорожного движения, специфичными для микрослужбы. Он понимает сообщения и может направлять их через ваши службы и внешний мир.

Наряду с управлением коммуникациями от обслуживания к службе, Сервисная сетка обеспечивает поддержку для обнаружения служб и балансировки нагрузки.

После настройки сетка обслуживания очень функционален. Сетка извлекает соответствующий пул экземпляров из конечной точки обнаружения службы. Он отправляет запрос в определенный экземпляр службы, записывая задержку и тип ответа результата. Он выбирает экземпляр, который, скорее всего, может вернуть быстрый ответ на основе различных факторов, включая наблюдаемую задержку последних запросов.

Сетка службы управляет проблемами трафика, связи и сетей на уровне приложений. Он понимает сообщения и запросы. Сервисная сетка обычно интегрируется с контейнерным оркестратором. Kubernetes поддерживает расширяемую архитектуру, в которой может быть добавлена сервисная сетка.

В главе 6 мы глубоко погружаемся в технологии Сервисной сетки, включая обсуждение его архитектуры и доступных реализаций с открытым исходным кодом.

## <a name="summary"></a>Сводка

В этой главе мы обсудили модели облачной коммуникации. Мы начали с изучения того, как клиенты-фронтовые компании общаются с бэк-энд-микрослужбами. По пути мы говорили о платформах API Gateway и коммуникации в режиме реального времени. Затем мы рассмотрели, как микрослужбы взаимодействуют с другими бэк-энд-сервисами. Мы рассмотрели как синхронную коммуникацию HTTP, так и асинхронные сообщения между службами. Мы рассмотрели gRPC, предстоящую технологию в облачном мире. Наконец, мы представили новую и быстро развивающуюся технологию под названием Service Mesh, которая может упорядочить связь микрослужб.

Особое внимание было уделено управляемым службам Azure, которые могут помочь внедрить коммуникации в облачных системах:

- [Шлюз приложений Azure](https://docs.microsoft.com/azure/application-gateway/overview)
- [Управление API Azure](https://azure.microsoft.com/services/api-management/)
- [Служба SignalR Azure](https://azure.microsoft.com/services/signalr-service/)
- [Очереди службы хранилища Azure](https://docs.microsoft.com/azure/storage/queues/storage-queues-introduction)
- [Служебная шина Azure](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview)
- [Сетка событий Azure](https://docs.microsoft.com/azure/event-grid/overview)
- [Концентратор событий Azure](https://azure.microsoft.com/services/event-hubs/)

Далее мы перейдем к распределенным данным в облачных системах, а также к преимуществам и проблемам, которые они представляют.

### <a name="references"></a>Ссылки

- [Microservices .NET: Архитектура для контейнерных приложений .NET](https://dotnet.microsoft.com/download/thank-you/microservices-architecture-ebook)

- [Проектирование Межсервисной коммуникации для микросервисов](https://docs.microsoft.com/azure/architecture/microservices/design/interservice-communication)

- [Служба Azure SignalR, полностью управляемая служба для добавления функциональности в режиме реального времени](https://azure.microsoft.com/blog/azure-signalr-service-a-fully-managed-service-to-add-real-time-functionality/)

- [Контроллер входа в шлюз Azure API](https://azure.github.io/application-gateway-kubernetes-ingress/)

- [О поступлениях в azure Kubernetes Service (AKS)](https://vincentlauzon.com/2018/10/10/about-ingress-in-azure-kubernetes-service-aks/)

- [gRPC Документация](https://grpc.io/docs/guides/)

- [gRPC для разработчиков WCF](https://docs.microsoft.com/dotnet/architecture/grpc-for-wcf-developers/)

- [Сравнение услуг gRPC с HTTP AIS](https://docs.microsoft.com/aspnet/core/grpc/comparison?view=aspnetcore-3.0)

- [Создание gRPC Услуг с помощью видео .NET](https://channel9.msdn.com/Shows/The-Cloud-Native-Show/Building-Microservices-with-gRPC-and-NET)

>[!div class="step-by-step"]
>[Предыдущий](grpc.md)
>[Следующий](Database-per-microservice.md)
