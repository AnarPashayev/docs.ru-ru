---
title: Сочетание контейнеров и бессерверных подходов
description: Объединение контейнеров и Kubernetes с бессерверными подходами
ms.date: 06/30/2019
ms.openlocfilehash: 58aff43adbdd2e629370cc685f32c7b61c25f85e
ms.sourcegitcommit: 55f438d4d00a34b9aca9eedaac3f85590bb11565
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/23/2019
ms.locfileid: "73840595"
---
# <a name="combining-containers-and-serverless-approaches"></a>Сочетание контейнеров и бессерверных подходов

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

Часто приложения на основе микрослужб сильно полагаются на контейнеры, оркестрации и передачу сообщений для обмена данными между узлами. Эта система обмена сообщениями является идеальной задачей для функций Azure, но с остальной частью приложения, настроенного и развернутого с помощью Kubernetes и связанных с ним средств, было бы неплохо иметь возможность использовать функции Azure в этом же наборе инструментов. К счастью, вы можете обернуть функции Azure в контейнеры DOCKER и развертывать их с помощью тех же процессов и средств, что и в остальной части вашего приложения на основе Kubernetes.

## <a name="when-does-it-make-sense-to-use-containers-with-serverless"></a>Когда имеет смысл использовать контейнеры без сервера?

По умолчанию бессерверные функции не имеют сведений о платформе, на которой они будут выполняться. Однако в некоторых случаях могут потребоваться особые требования, которые позволят вам настроить образ контейнера, в котором будет выполняться код. Вы можете использовать пользовательский образ, так как функция зависит от конкретной языковой версии или имеет зависимости или требования к конфигурации, которые не поддерживаются образом по умолчанию. В таких случаях может быть целесообразно настроить собственный контейнер и развернуть функцию в пользовательском контейнере DOCKER.

## <a name="when-should-you-avoid-using-containers-with-azure-functions"></a>Когда следует избегать использования контейнеров с функциями Azure?

Если вы ожидаете использовать для вашей функции выставление счетов в плане потребления, вы не сможете сделать это, если используете собственный контейнер. Более того, если вы выходите за рамки использования контейнера DOCKER и развертываете функции в своем собственном кластере Kubernetes, вы больше не сможете воспользоваться встроенным масштабированием, предоставляемым функциями Azure. Вам потребуется использовать функции масштабирования Kubernetes, описанные ниже.

## <a name="how-to-combine-serverless-and-docker-containers"></a>Объединение бессерверных и контейнеров DOCKER

Чтобы включить функцию Azure в контейнер DOCKER, установите Azure Functions Core Tools и выполните следующую команду:

```console
func init ProjectName --docker
```

Выберите нужную рабочую среду из следующих вариантов:

- `dotnet` (C#)
- `node` (JavaScript)
- `python`

При создании проекта он будет включать в себя Dockerfile. Теперь можно создать и протестировать функцию локально. Выполните сборку и запустите ее с помощью команд `docker build` и `docker run`. Подробные инструкции по созданию функций Azure с поддержкой DOCKER см. в руководстве [Создание функции в Linux с помощью пользовательского образа](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image) .

## <a name="how-to-combine-serverless-and-kubernetes-with-keda"></a>Объединение бессерверных и Kubernetes с Кеда

Функции Azure масштабируются автоматически, чтобы удовлетворить спрос на основе частоты событий, предназначенных для данной функции. Кроме того, можно использовать Kubernetes для размещения функций и использовать автоматическое масштабирование, управляемое событиями на основе Kubernetes, или Кеда. Если события не происходят, Кеда может масштабироваться до 0 экземпляров, а затем в ответ на события он может масштабировать количество контейнеров в соответствии с потребностями, используя горизонтальный Автомасштабирование Pod. Дополнительные [сведения о масштабировании функций Azure с помощью Кеда](https://docs.microsoft.com/azure/azure-functions/functions-kubernetes-keda).

## <a name="references"></a>Ссылки

- [Запуск функций Azure в контейнере DOCKER](https://markheath.net/post/azure-functions-docker)
- [Создание функции в Linux с помощью пользовательского образа](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image)
- [Функции Azure с автомасштабированием, управляемым событиями Kubernetes](https://docs.microsoft.com/azure/azure-functions/functions-kubernetes-keda)

>[!div class="step-by-step"]
>[Назад](leverage-serverless-functions.md)
>[Вперед](deploy-containers-azure.md)
