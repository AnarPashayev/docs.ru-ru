---
title: Объединение контейнеров и бессерверных подходов для облачных служб
description: Объединение контейнеров и Kubernetes с бессерверными подходами
ms.date: 04/23/2020
ms.openlocfilehash: fe9e9fd5d07132971d64bc6433a762fb7bd22048
ms.sourcegitcommit: 5988e9a29cedb8757320817deda3c08c6f44a6aa
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "82199668"
---
# <a name="combining-containers-and-serverless-approaches"></a>Сочетание контейнеров и бессерверных подходов

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

Облачные приложения обычно реализуют службы, использующие контейнеры и оркестрации. Зачастую существуют возможности предоставления некоторых служб приложения в виде функций Azure. Однако с облачным приложением, развернутым в Kubernetes, было бы неплохо использовать функции Azure в этом же наборе инструментов. К счастью, вы можете включить функции Azure в контейнеры DOCKER и развернуть их с помощью тех же процессов и средств, что и в остальной части вашего приложения на основе Kubernetes.

## <a name="when-does-it-make-sense-to-use-containers-with-serverless"></a>Когда имеет смысл использовать контейнеры без сервера?

Функция Azure не имеет сведений о платформе, на которой она развернута. В некоторых сценариях могут присутствовать определенные требования и необходимо настроить среду, в которой будет выполняться код функции. Вам потребуется пользовательский образ, который поддерживает зависимости или конфигурацию, не поддерживаемую изображением по умолчанию. В таких случаях имеет смысл развернуть функцию в пользовательском контейнере DOCKER.

## <a name="when-should-you-avoid-using-containers-with-azure-functions"></a>Когда следует избегать использования контейнеров с функциями Azure?

Если вы хотите использовать выставление счетов за потребление, вы не сможете запустить функцию в контейнере. Более того, если вы развертываете функцию в кластере Kubernetes, вы больше не сможете воспользоваться встроенным масштабированием, предоставляемым функциями Azure. Вам потребуется использовать функции масштабирования Kubernetes, описанные выше в этой главе.

## <a name="how-to-combine-serverless-and-docker-containers"></a>Объединение бессерверных и контейнеров DOCKER

Чтобы включить функцию Azure в контейнер DOCKER, установите [Azure functions Core Tools](https://github.com/Azure/azure-functions-core-tools) и выполните следующую команду:

```console
func init ProjectName --worker-runtime dotnet --docker
```

При создании проекта он будет включать в себя Dockerfile и рабочую среду выполнения, настроенную для `dotnet`. Теперь можно создать и протестировать функцию локально. Выполните сборку и запустите ее с `docker build` помощью `docker run` команд и. Подробные инструкции по созданию функций Azure с поддержкой DOCKER см. в руководстве [Создание функции в Linux с помощью пользовательского образа](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image) .

## <a name="how-to-combine-serverless-and-kubernetes-with-keda"></a>Объединение бессерверных и Kubernetes с Кеда

Функции Azure масштабируются автоматически, чтобы удовлетворить спрос на основе частоты событий, нацеленных на него. Вы всегда можете использовать AKS для размещения функций и использования автоматического масштабирования, управляемого событиями на основе Kubernetes, или Кеда. Если события не возникают, Кеда может масштабироваться до нулевых экземпляров. Дополнительные [сведения о масштабировании функций Azure с помощью Кеда](https://docs.microsoft.com/azure/azure-functions/functions-kubernetes-keda).

>[!div class="step-by-step"]
>[Назад](leverage-serverless-functions.md)
>[Вперед](deploy-containers-azure.md)
