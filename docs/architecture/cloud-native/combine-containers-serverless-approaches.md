---
title: Объединение контейнеров и бессерверных подходов для облачных служб
description: Объединение контейнеров и Kubernetes с бессерверными подходами
ms.date: 05/13/2020
ms.openlocfilehash: 67eee89659026db06eb16ef6f1154ab6935725a4
ms.sourcegitcommit: 27db07ffb26f76912feefba7b884313547410db5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/19/2020
ms.locfileid: "83614205"
---
# <a name="combining-containers-and-serverless-approaches"></a>Сочетание контейнеров и бессерверных подходов

Облачные приложения обычно реализуют службы, использующие контейнеры и оркестрации. Зачастую существуют возможности предоставления некоторых служб приложения в виде функций Azure. Однако с облачным приложением, развернутым в Kubernetes, было бы неплохо использовать функции Azure в этом же наборе инструментов. К счастью, вы можете включить функции Azure в контейнеры DOCKER и развернуть их с помощью тех же процессов и средств, что и в остальной части вашего приложения на основе Kubernetes.

## <a name="when-does-it-make-sense-to-use-containers-with-serverless"></a>Когда имеет смысл использовать контейнеры без сервера?

Функция Azure не имеет сведений о платформе, на которой она развернута. В некоторых сценариях могут присутствовать определенные требования и необходимо настроить среду, в которой будет выполняться код функции. Вам потребуется пользовательский образ, который поддерживает зависимости или конфигурацию, не поддерживаемую изображением по умолчанию. В таких случаях имеет смысл развернуть функцию в пользовательском контейнере DOCKER.

## <a name="when-should-you-avoid-using-containers-with-azure-functions"></a>Когда следует избегать использования контейнеров с функциями Azure?

Если вы хотите использовать выставление счетов за потребление, вы не сможете запустить функцию в контейнере. Более того, если вы развертываете функцию в кластере Kubernetes, вы больше не сможете воспользоваться встроенным масштабированием, предоставляемым функциями Azure. Вам потребуется использовать функции масштабирования Kubernetes, описанные выше в этой главе.

## <a name="how-to-combine-serverless-and-docker-containers"></a>Объединение бессерверных и контейнеров DOCKER

Чтобы включить функцию Azure в контейнер DOCKER, установите [Azure functions Core Tools](https://github.com/Azure/azure-functions-core-tools) и выполните следующую команду:

```console
func init ProjectName --worker-runtime dotnet --docker
```

При создании проекта он будет включать в себя Dockerfile и рабочую среду выполнения, настроенную для `dotnet` . Теперь можно создать и протестировать функцию локально. Выполните сборку и запустите ее с `docker build` помощью `docker run` команд и. Подробные инструкции по созданию функций Azure с поддержкой DOCKER см. в руководстве [Создание функции в Linux с помощью пользовательского образа](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image) .

## <a name="how-to-combine-serverless-and-kubernetes-with-keda"></a>Объединение бессерверных и Kubernetes с Кеда

В этой главе вы увидели, что платформа функций Azure автоматически масштабируется для удовлетворения спроса. Однако при развертывании контейнерных функций для AKS теряются встроенные функции масштабирования. К аварийному поступилию, [Kubernetes на основе событий (Кеда)](https://docs.microsoft.com/azure/azure-functions/functions-kubernetes-keda). Он обеспечивает детальное автоматическое масштабирование для `event-driven Kubernetes workloads,` включения контейнерных функций.

Кеда предоставляет функции масштабирования, управляемые событиями, для среды выполнения функций в контейнере DOCKER. Кеда может масштабироваться от нулевых экземпляров (если события не происходят) в `n instances` зависимости от нагрузки. Он включает Автомасштабирование, предоставляя пользовательские метрики для автомасштабирования Kubernetes (горизонтальный Автомасштабирование Pod). Использование контейнеров функций с Кеда позволяет реплицировать функции бессерверных функций в любом кластере Kubernetes.

Стоит отметить, что проект Кеда теперь управляется облачной средой Cloud Foundation (КНКФ).

>[!div class="step-by-step"]
>[Назад](leverage-serverless-functions.md)
>[Вперед](deploy-containers-azure.md)
