---
title: Azure Monitor
description: Использование Azure Monitor для получения видимости в вашей системе работает.
ms.date: 02/05/2020
ms.openlocfilehash: 4e5ddba6c1c13dc65662a7748d4ae3a58a6a6f68
ms.sourcegitcommit: f87ad41b8e62622da126aa928f7640108c4eff98
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/07/2020
ms.locfileid: "80805630"
---
# <a name="azure-monitor"></a><span data-ttu-id="5741b-103">Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="5741b-103">Azure Monitor</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="5741b-104">Ни один другой поставщик облачных услуг не имеет такого зрелого решения для мониторинга облачных приложений, как в Azure.</span><span class="sxs-lookup"><span data-stu-id="5741b-104">No other cloud provider has as mature of a cloud application monitoring solution as that found in Azure.</span></span> <span data-ttu-id="5741b-105">Azure Monitor — это зонтичное название для коллекции инструментов, предназначенных для обеспечения видимости состояния вашей системы, понимания любых проблем и оптимизации приложения.</span><span class="sxs-lookup"><span data-stu-id="5741b-105">Azure Monitor is an umbrella name for a collection of tools designed to provide visibility into the state of your system, insights into any problems, and optimization of your application.</span></span>

<span data-ttu-id="5741b-106">![Azure Monitor — коллекция инструментов, которые дают представление о функционировании облачного приложения. ](./media/azure-monitor.png)
 **Рисунок 7-12**.</span><span class="sxs-lookup"><span data-stu-id="5741b-106">![Azure Monitor, a collection to tools to provide insight into how a cloud-native application is functioning.](./media/azure-monitor.png)
**Figure 7-12**.</span></span> <span data-ttu-id="5741b-107">Azure Monitor — коллекция инструментов, которые дают представление о функционировании облачного приложения.</span><span class="sxs-lookup"><span data-stu-id="5741b-107">Azure Monitor, a collection to tools to provide insight into how a cloud-native application is functioning.</span></span>

## <a name="gathering-logs-and-metrics"></a><span data-ttu-id="5741b-108">Сбор журналов и метрик</span><span class="sxs-lookup"><span data-stu-id="5741b-108">Gathering logs and metrics</span></span>

<span data-ttu-id="5741b-109">Первым шагом в любом решении мониторинга является сбор как можно больше данных.</span><span class="sxs-lookup"><span data-stu-id="5741b-109">The first step in any monitoring solution is to gather as much data as possible.</span></span> <span data-ttu-id="5741b-110">Чем больше данных можно собрать, тем глубже можно получить информацию.</span><span class="sxs-lookup"><span data-stu-id="5741b-110">The more data that can be gathered, the deeper the insights that can be obtained.</span></span> <span data-ttu-id="5741b-111">Инструментальные системы традиционно были сложными.</span><span class="sxs-lookup"><span data-stu-id="5741b-111">Instrumenting systems has traditionally been difficult.</span></span> <span data-ttu-id="5741b-112">Протокол простого управления сетью (SNMP) является золотым стандартным протоколом для сбора информации о машинном уровне, но он требует больших знаний и настройки.</span><span class="sxs-lookup"><span data-stu-id="5741b-112">Simple Network Management Protocol (SNMP) was the gold standard protocol for collecting machine level information but it required a great deal of knowledge and configuring.</span></span> <span data-ttu-id="5741b-113">К счастью, большая часть этой напряженной работы была устранена, так как наиболее распространенные метрики собираются автоматически Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="5741b-113">Fortunately, much of this hard work has been eliminated as the most common metrics are gathered automatically by Azure Monitor.</span></span>

<span data-ttu-id="5741b-114">Метрики и события уровня приложения не позволяют автоматически инструментировать, поскольку они специфичны для развертывания приложения.</span><span class="sxs-lookup"><span data-stu-id="5741b-114">Application level metrics and events aren't possible to instrument automatically because they're specific to the application being deployed.</span></span> <span data-ttu-id="5741b-115">Для сбора этих метрик [существуют SDK и AA, доступные](https://docs.microsoft.com/azure/azure-monitor/app/api-custom-events-metrics) для непосредственного сообщения такой информации, например, когда клиент регистрируется или выполняет заказ.</span><span class="sxs-lookup"><span data-stu-id="5741b-115">In order to gather these metrics, there are [SDKs and APIs available](https://docs.microsoft.com/azure/azure-monitor/app/api-custom-events-metrics) to directly report such information, such as when a customer signs up or completes an order.</span></span> <span data-ttu-id="5741b-116">Исключения также могут быть захвачены и сообщены обратно в Azure Monitor через Application Insights.</span><span class="sxs-lookup"><span data-stu-id="5741b-116">Exceptions can also be captured and reported back into Azure Monitor via Application Insights.</span></span> <span data-ttu-id="5741b-117">SDKs поддерживают наиболее все языки, найденные в облачных индейских приложениях, включая Go, Python, JavaScript и языки .NET.</span><span class="sxs-lookup"><span data-stu-id="5741b-117">The SDKs support most every language found in Cloud Native Applications including Go, Python, JavaScript, and the .NET languages.</span></span>

<span data-ttu-id="5741b-118">Конечная цель сбора информации о состоянии приложения заключается в том, чтобы обеспечить, чтобы ваши конечные пользователи имели хороший опыт.</span><span class="sxs-lookup"><span data-stu-id="5741b-118">The ultimate goal of gathering information about the state of your application is to ensure that your end users have a good experience.</span></span> <span data-ttu-id="5741b-119">Что может быть лучше, чтобы сказать, если пользователи испытывают проблемы, чем делать [вне веб-тестов?](https://docs.microsoft.com/azure/azure-monitor/app/monitor-web-app-availability)</span><span class="sxs-lookup"><span data-stu-id="5741b-119">What better way to tell if users are experiencing issues than doing [outside-in web tests](https://docs.microsoft.com/azure/azure-monitor/app/monitor-web-app-availability)?</span></span> <span data-ttu-id="5741b-120">Эти тесты могут быть так же просто, как pinging ваш сайт из мест по всему миру или как участие, как агенты войти на сайт и имитировать действия пользователей.</span><span class="sxs-lookup"><span data-stu-id="5741b-120">These tests can be as simple as pinging your website from locations around the world or as involved as having agents log into the site and simulate user actions.</span></span>

## <a name="reporting-data"></a><span data-ttu-id="5741b-121">Данные отчетности</span><span class="sxs-lookup"><span data-stu-id="5741b-121">Reporting data</span></span>

<span data-ttu-id="5741b-122">Как только данные собраны, они могут быть обработаны, обобщены и построены в диаграммы, которые позволяют пользователям мгновенно видеть, когда есть проблемы.</span><span class="sxs-lookup"><span data-stu-id="5741b-122">Once the data is gathered, it can be manipulated, summarized, and plotted into charts, which allow users to instantly see when there are problems.</span></span> <span data-ttu-id="5741b-123">Эти диаграммы могут быть собраны в панели мониторинга или в трудовые книжки, многостраничный отчет, предназначенный для рассказа о каком-то аспекте системы.</span><span class="sxs-lookup"><span data-stu-id="5741b-123">These charts can be gathered into dashboards or into Workbooks, a multi-page report designed to tell a story about some aspect of the system.</span></span>

<span data-ttu-id="5741b-124">Ни одно современное приложение не было бы полным без искусственного интеллекта или машинного обучения.</span><span class="sxs-lookup"><span data-stu-id="5741b-124">No modern application would be complete without some artificial intelligence or machine learning.</span></span> <span data-ttu-id="5741b-125">С этой целью данные [могут передаваться](https://www.youtube.com/watch?v=Cuza-I1g9tw) различным инструментам машинного обучения в Azure, чтобы вы мог извлекать тенденции и информацию, которая в противном случае была бы скрыта.</span><span class="sxs-lookup"><span data-stu-id="5741b-125">To this end, data [can be passed](https://www.youtube.com/watch?v=Cuza-I1g9tw) to the various machine learning tools in Azure to allow you to extract trends and information that would otherwise be hidden.</span></span>

<span data-ttu-id="5741b-126">Application Insights предоставляет мощный язык запросов под названием Kusto, который можно использовать для поиска записей, их обобщения и даже графиков.</span><span class="sxs-lookup"><span data-stu-id="5741b-126">Application Insights provides a powerful query language called Kusto that can be used to find records, summarize them, and even plot charts.</span></span> <span data-ttu-id="5741b-127">Например, этот запрос будет найти все записи за ноябрь 2007 года, сгруппировать их по штату и построить топ-10 в виде круговой диаграммы.</span><span class="sxs-lookup"><span data-stu-id="5741b-127">For instance, this query will locate all the records for the month of November 2007, group them by state, and plot the top 10 as a pie chart.</span></span>

```kusto
StormEvents
| where StartTime >= datetime(2007-11-01) and StartTime < datetime(2007-12-01)
| summarize count() by State
| top 10 by count_
| render piechart
```

<span data-ttu-id="5741b-128">![Результат приложения Исследования Запрос](./media/azure-monitor.png)
**Рисунок 7-13**.</span><span class="sxs-lookup"><span data-stu-id="5741b-128">![The result of the Application Insights Query](./media/azure-monitor.png)
**Figure 7-13**.</span></span> <span data-ttu-id="5741b-129">Результат запроса Application Insights.</span><span class="sxs-lookup"><span data-stu-id="5741b-129">The result of the Application Insights Query.</span></span>

<span data-ttu-id="5741b-130">Существует [площадка для экспериментов с kusto](https://dataexplorer.azure.com/clusters/help/databases/Samples) запросы, который является фантастическим местом, чтобы провести час или два.</span><span class="sxs-lookup"><span data-stu-id="5741b-130">There is a [playground for experimenting with Kusto](https://dataexplorer.azure.com/clusters/help/databases/Samples) queries, which is a fantastic place to spend an hour or two.</span></span> <span data-ttu-id="5741b-131">Чтение [выборочных запросов](https://docs.microsoft.com/azure/kusto/query/samples) также может быть поучительным.</span><span class="sxs-lookup"><span data-stu-id="5741b-131">Reading [sample queries](https://docs.microsoft.com/azure/kusto/query/samples) can also be instructive.</span></span>

## <a name="dashboards"></a><span data-ttu-id="5741b-132">Панели мониторинга</span><span class="sxs-lookup"><span data-stu-id="5741b-132">Dashboards</span></span>

<span data-ttu-id="5741b-133">Существует несколько различных технологий панели мониторинга, которые могут быть использованы для появления информации из Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="5741b-133">There are several different dashboard technologies that may be used to surface the information from Azure Monitor.</span></span> <span data-ttu-id="5741b-134">Возможно, проще всего просто запустить запросы в Application Insights и [построить данные в диаграмму.](https://docs.microsoft.com/azure/azure-monitor/learn/tutorial-app-dashboards)</span><span class="sxs-lookup"><span data-stu-id="5741b-134">Perhaps the simplest is to just run queries in Application Insights and [plot the data into a chart](https://docs.microsoft.com/azure/azure-monitor/learn/tutorial-app-dashboards).</span></span>

<span data-ttu-id="5741b-135">![Пример диаграмм Application Insights, встроенных в основную диаграмму панели мониторинга](./media/azure-monitor.png)
Azure**7-14.**</span><span class="sxs-lookup"><span data-stu-id="5741b-135">![An example of Application Insights charts embedded in the main Azure Dashboard](./media/azure-monitor.png)
**Figure 7-14**.</span></span> <span data-ttu-id="5741b-136">Пример диаграмм Application Insights, встроенных в основную панель мониторинга Azure.</span><span class="sxs-lookup"><span data-stu-id="5741b-136">An example of Application Insights charts embedded in the main Azure Dashboard.</span></span>

<span data-ttu-id="5741b-137">Эти диаграммы могут быть встроены в портал Azure, как правильно, с помощью функции панели мониторинга.</span><span class="sxs-lookup"><span data-stu-id="5741b-137">These charts can then be embedded in the Azure portal proper through use of the dashboard feature.</span></span> <span data-ttu-id="5741b-138">Для пользователей с более требовательными требованиями, такими как возможность сверлить на несколько уровней данных, данные Azure Monitor доступны [для Power BI.](https://powerbi.microsoft.com/)</span><span class="sxs-lookup"><span data-stu-id="5741b-138">For users with more exacting requirements, such as being able to drill down into several tiers of data, Azure Monitor data is available to [Power BI](https://powerbi.microsoft.com/).</span></span> <span data-ttu-id="5741b-139">Power BI является ведущим в отрасли, корпоративным классом, инструментом бизнес-аналитики, который может агрегировать данные из различных источников данных.</span><span class="sxs-lookup"><span data-stu-id="5741b-139">Power BI is an industry-leading, enterprise class, business intelligence tool that can aggregate data from many different data sources.</span></span>

<span data-ttu-id="5741b-140">![Пример Power BI](./media/azure-monitor.png)
приборной панели**Рисунок 7-15**.</span><span class="sxs-lookup"><span data-stu-id="5741b-140">![An example Power BI dashboard](./media/azure-monitor.png)
**Figure 7-15**.</span></span> <span data-ttu-id="5741b-141">Пример приборной панели Power BI.</span><span class="sxs-lookup"><span data-stu-id="5741b-141">An example Power BI dashboard.</span></span>

## <a name="alerts"></a><span data-ttu-id="5741b-142">видны узлы</span><span class="sxs-lookup"><span data-stu-id="5741b-142">Alerts</span></span>

<span data-ttu-id="5741b-143">Иногда наличие панелей мониторинга данных является недостаточным.</span><span class="sxs-lookup"><span data-stu-id="5741b-143">Sometimes, having data dashboards is insufficient.</span></span> <span data-ttu-id="5741b-144">Если никто не просыпается, чтобы посмотреть панели мониторинга, то это все еще может быть много часов, прежде чем проблема будет решена, или даже обнаружены.</span><span class="sxs-lookup"><span data-stu-id="5741b-144">If nobody is awake to watch the dashboards, then it can still be many hours before a problem is addressed, or even detected.</span></span> <span data-ttu-id="5741b-145">С этой целью Azure Monitor также предоставляет решение для оповещения на высшем [выемке.](https://docs.microsoft.com/azure/azure-monitor/platform/alerts-overview)</span><span class="sxs-lookup"><span data-stu-id="5741b-145">To this end, Azure Monitor also provides a top notch [alerting solution](https://docs.microsoft.com/azure/azure-monitor/platform/alerts-overview).</span></span> <span data-ttu-id="5741b-146">Оповещения могут быть вызваны широким спектром условий, включая:</span><span class="sxs-lookup"><span data-stu-id="5741b-146">Alerts can be triggered by a wide range of conditions including:</span></span>

- <span data-ttu-id="5741b-147">Значения метрик</span><span class="sxs-lookup"><span data-stu-id="5741b-147">Metric values</span></span>
- <span data-ttu-id="5741b-148">Запросы поиска по журналам</span><span class="sxs-lookup"><span data-stu-id="5741b-148">Log search queries</span></span>
- <span data-ttu-id="5741b-149">События в журнале действий</span><span class="sxs-lookup"><span data-stu-id="5741b-149">Activity Log events</span></span>
- <span data-ttu-id="5741b-150">Работоспособность базовой платформы Azure</span><span class="sxs-lookup"><span data-stu-id="5741b-150">Health of the underlying Azure platform</span></span>
- <span data-ttu-id="5741b-151">Тесты на доступность веб-сайта</span><span class="sxs-lookup"><span data-stu-id="5741b-151">Tests for web site availability</span></span>

<span data-ttu-id="5741b-152">При срабатывании оповещения могут выполнять широкий спектр задач.</span><span class="sxs-lookup"><span data-stu-id="5741b-152">When triggered, the alerts can perform a wide variety of tasks.</span></span> <span data-ttu-id="5741b-153">С простой стороны, оповещения могут просто отправить уведомление по электронной почте в список рассылки или текстовое сообщение для человека.</span><span class="sxs-lookup"><span data-stu-id="5741b-153">On the simple side, the alerts may just send an e-mail notification to a mailing list or a text message to an individual.</span></span> <span data-ttu-id="5741b-154">Более вовлеченные оповещения могут вызвать рабочий процесс в таком инструменте, как PagerDuty, который знает, кто находится на вызове для конкретного приложения.</span><span class="sxs-lookup"><span data-stu-id="5741b-154">More involved alerts might trigger a workflow in a tool such as PagerDuty, which is aware of who is on call for a particular application.</span></span> <span data-ttu-id="5741b-155">Оповещения могут вызвать действия при разблокировке [Microsoft Flow,](https://flow.microsoft.com/) почти безграничные возможности для рабочих процессов.</span><span class="sxs-lookup"><span data-stu-id="5741b-155">Alerts can trigger actions in [Microsoft Flow](https://flow.microsoft.com/) unlocking near limitless possibilities for workflows.</span></span>

<span data-ttu-id="5741b-156">По мере выявления общих причин оповещений оповещения могут быть расширены с помощью сведений об общих причинах оповещений и мерах по их устранению.</span><span class="sxs-lookup"><span data-stu-id="5741b-156">As common causes of alerts are identified, the alerts can be enhanced with details about the common causes of the alerts and the steps to take to resolve them.</span></span> <span data-ttu-id="5741b-157">Высокозрелые развертывания облачных приложений могут выбрать для запуска задач самовосстановления, которые выполняют такие действия, как удаление неисправных узлов из набора масштабов или запуск функции автоматического масштабирования.</span><span class="sxs-lookup"><span data-stu-id="5741b-157">Highly mature cloud-native application deployments may opt to kick off self-healing tasks, which perform actions such as removing failing nodes from a scale set or triggering an autoscaling activity.</span></span> <span data-ttu-id="5741b-158">В конце концов это может больше не быть необходимым, чтобы проснуться по вызову персонала в 2 утра, чтобы решить вопрос жить-сайт, как система будет в состоянии настроить себя, чтобы компенсировать или, по крайней мере хромать вместе, пока кто-то прибывает на работу на следующее утро.</span><span class="sxs-lookup"><span data-stu-id="5741b-158">Eventually it may no longer be necessary to wake up on-call personnel at 2AM to resolve a live-site issue as the system will be able to adjust itself to compensate or at least limp along until somebody arrives at work the next morning.</span></span>

<span data-ttu-id="5741b-159">Azure Monitor автоматически использует машинное обучение для понимания нормальных параметров работы развернутых приложений.</span><span class="sxs-lookup"><span data-stu-id="5741b-159">Azure Monitor automatically leverages machine learning to understand the normal operating parameters of deployed applications.</span></span> <span data-ttu-id="5741b-160">Это позволяет обнаруживать службы, которые работают вне их обычных параметров.</span><span class="sxs-lookup"><span data-stu-id="5741b-160">This enables it to detect services that are operating outside of their normal parameters.</span></span> <span data-ttu-id="5741b-161">Например, типичный трафик в будние дни на сайте может сопосмотреться на 10 000 запросов в минуту.</span><span class="sxs-lookup"><span data-stu-id="5741b-161">For instance, the typical weekday traffic on the site might be 10,000 requests per minute.</span></span> <span data-ttu-id="5741b-162">А потом, на заданную неделю, вдруг количество запросов попадает в весьма необычные 20000 запросов в минуту.</span><span class="sxs-lookup"><span data-stu-id="5741b-162">And then, on a given week, suddenly the number of requests hits a highly unusual 20,000 requests per minute.</span></span> <span data-ttu-id="5741b-163">[Smart Detection](https://docs.microsoft.com/azure/azure-monitor/app/proactive-diagnostics) заметит это отклонение от нормы и вызовет оповещение.</span><span class="sxs-lookup"><span data-stu-id="5741b-163">[Smart Detection](https://docs.microsoft.com/azure/azure-monitor/app/proactive-diagnostics) will notice this deviation from the norm and trigger an alert.</span></span> <span data-ttu-id="5741b-164">В то же время, анализ тренда достаточно умен, чтобы избежать ложного срабатывания при ожидаемой транспортной нагрузке.</span><span class="sxs-lookup"><span data-stu-id="5741b-164">At the same time, the trend analysis is smart enough to avoid firing false positives when the traffic load is expected.</span></span>

## <a name="references"></a><span data-ttu-id="5741b-165">Ссылки</span><span class="sxs-lookup"><span data-stu-id="5741b-165">References</span></span>

- [<span data-ttu-id="5741b-166">Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="5741b-166">Azure Monitor</span></span>](https://docs.microsoft.com/azure/azure-monitor/overview)

>[!div class="step-by-step"]
><span data-ttu-id="5741b-167">[Назад](monitoring-azure-kubernetes.md)
>[Вперед](identity.md)</span><span class="sxs-lookup"><span data-stu-id="5741b-167">[Previous](monitoring-azure-kubernetes.md)
[Next](identity.md)</span></span>
