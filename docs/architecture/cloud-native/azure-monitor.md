---
title: Azure Monitor
description: Использование Azure Monitor для получения видимости в вашей системе работает.
ms.date: 02/05/2020
ms.openlocfilehash: 4e5ddba6c1c13dc65662a7748d4ae3a58a6a6f68
ms.sourcegitcommit: f87ad41b8e62622da126aa928f7640108c4eff98
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/07/2020
ms.locfileid: "80805630"
---
# <a name="azure-monitor"></a>Azure Monitor

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

Ни один другой поставщик облачных услуг не имеет такого зрелого решения для мониторинга облачных приложений, как в Azure. Azure Monitor — это зонтичное название для коллекции инструментов, предназначенных для обеспечения видимости состояния вашей системы, понимания любых проблем и оптимизации приложения.

![Azure Monitor — коллекция инструментов, которые дают представление о функционировании облачного приложения. ](./media/azure-monitor.png)
 **Рисунок 7-12**. Azure Monitor — коллекция инструментов, которые дают представление о функционировании облачного приложения.

## <a name="gathering-logs-and-metrics"></a>Сбор журналов и метрик

Первым шагом в любом решении мониторинга является сбор как можно больше данных. Чем больше данных можно собрать, тем глубже можно получить информацию. Инструментальные системы традиционно были сложными. Протокол простого управления сетью (SNMP) является золотым стандартным протоколом для сбора информации о машинном уровне, но он требует больших знаний и настройки. К счастью, большая часть этой напряженной работы была устранена, так как наиболее распространенные метрики собираются автоматически Azure Monitor.

Метрики и события уровня приложения не позволяют автоматически инструментировать, поскольку они специфичны для развертывания приложения. Для сбора этих метрик [существуют SDK и AA, доступные](https://docs.microsoft.com/azure/azure-monitor/app/api-custom-events-metrics) для непосредственного сообщения такой информации, например, когда клиент регистрируется или выполняет заказ. Исключения также могут быть захвачены и сообщены обратно в Azure Monitor через Application Insights. SDKs поддерживают наиболее все языки, найденные в облачных индейских приложениях, включая Go, Python, JavaScript и языки .NET.

Конечная цель сбора информации о состоянии приложения заключается в том, чтобы обеспечить, чтобы ваши конечные пользователи имели хороший опыт. Что может быть лучше, чтобы сказать, если пользователи испытывают проблемы, чем делать [вне веб-тестов?](https://docs.microsoft.com/azure/azure-monitor/app/monitor-web-app-availability) Эти тесты могут быть так же просто, как pinging ваш сайт из мест по всему миру или как участие, как агенты войти на сайт и имитировать действия пользователей.

## <a name="reporting-data"></a>Данные отчетности

Как только данные собраны, они могут быть обработаны, обобщены и построены в диаграммы, которые позволяют пользователям мгновенно видеть, когда есть проблемы. Эти диаграммы могут быть собраны в панели мониторинга или в трудовые книжки, многостраничный отчет, предназначенный для рассказа о каком-то аспекте системы.

Ни одно современное приложение не было бы полным без искусственного интеллекта или машинного обучения. С этой целью данные [могут передаваться](https://www.youtube.com/watch?v=Cuza-I1g9tw) различным инструментам машинного обучения в Azure, чтобы вы мог извлекать тенденции и информацию, которая в противном случае была бы скрыта.

Application Insights предоставляет мощный язык запросов под названием Kusto, который можно использовать для поиска записей, их обобщения и даже графиков. Например, этот запрос будет найти все записи за ноябрь 2007 года, сгруппировать их по штату и построить топ-10 в виде круговой диаграммы.

```kusto
StormEvents
| where StartTime >= datetime(2007-11-01) and StartTime < datetime(2007-12-01)
| summarize count() by State
| top 10 by count_
| render piechart
```

![Результат приложения Исследования Запрос](./media/azure-monitor.png)
**Рисунок 7-13**. Результат запроса Application Insights.

Существует [площадка для экспериментов с kusto](https://dataexplorer.azure.com/clusters/help/databases/Samples) запросы, который является фантастическим местом, чтобы провести час или два. Чтение [выборочных запросов](https://docs.microsoft.com/azure/kusto/query/samples) также может быть поучительным.

## <a name="dashboards"></a>Панели мониторинга

Существует несколько различных технологий панели мониторинга, которые могут быть использованы для появления информации из Azure Monitor. Возможно, проще всего просто запустить запросы в Application Insights и [построить данные в диаграмму.](https://docs.microsoft.com/azure/azure-monitor/learn/tutorial-app-dashboards)

![Пример диаграмм Application Insights, встроенных в основную диаграмму панели мониторинга](./media/azure-monitor.png)
Azure**7-14.** Пример диаграмм Application Insights, встроенных в основную панель мониторинга Azure.

Эти диаграммы могут быть встроены в портал Azure, как правильно, с помощью функции панели мониторинга. Для пользователей с более требовательными требованиями, такими как возможность сверлить на несколько уровней данных, данные Azure Monitor доступны [для Power BI.](https://powerbi.microsoft.com/) Power BI является ведущим в отрасли, корпоративным классом, инструментом бизнес-аналитики, который может агрегировать данные из различных источников данных.

![Пример Power BI](./media/azure-monitor.png)
приборной панели**Рисунок 7-15**. Пример приборной панели Power BI.

## <a name="alerts"></a>видны узлы

Иногда наличие панелей мониторинга данных является недостаточным. Если никто не просыпается, чтобы посмотреть панели мониторинга, то это все еще может быть много часов, прежде чем проблема будет решена, или даже обнаружены. С этой целью Azure Monitor также предоставляет решение для оповещения на высшем [выемке.](https://docs.microsoft.com/azure/azure-monitor/platform/alerts-overview) Оповещения могут быть вызваны широким спектром условий, включая:

- Значения метрик
- Запросы поиска по журналам
- События в журнале действий
- Работоспособность базовой платформы Azure
- Тесты на доступность веб-сайта

При срабатывании оповещения могут выполнять широкий спектр задач. С простой стороны, оповещения могут просто отправить уведомление по электронной почте в список рассылки или текстовое сообщение для человека. Более вовлеченные оповещения могут вызвать рабочий процесс в таком инструменте, как PagerDuty, который знает, кто находится на вызове для конкретного приложения. Оповещения могут вызвать действия при разблокировке [Microsoft Flow,](https://flow.microsoft.com/) почти безграничные возможности для рабочих процессов.

По мере выявления общих причин оповещений оповещения могут быть расширены с помощью сведений об общих причинах оповещений и мерах по их устранению. Высокозрелые развертывания облачных приложений могут выбрать для запуска задач самовосстановления, которые выполняют такие действия, как удаление неисправных узлов из набора масштабов или запуск функции автоматического масштабирования. В конце концов это может больше не быть необходимым, чтобы проснуться по вызову персонала в 2 утра, чтобы решить вопрос жить-сайт, как система будет в состоянии настроить себя, чтобы компенсировать или, по крайней мере хромать вместе, пока кто-то прибывает на работу на следующее утро.

Azure Monitor автоматически использует машинное обучение для понимания нормальных параметров работы развернутых приложений. Это позволяет обнаруживать службы, которые работают вне их обычных параметров. Например, типичный трафик в будние дни на сайте может сопосмотреться на 10 000 запросов в минуту. А потом, на заданную неделю, вдруг количество запросов попадает в весьма необычные 20000 запросов в минуту. [Smart Detection](https://docs.microsoft.com/azure/azure-monitor/app/proactive-diagnostics) заметит это отклонение от нормы и вызовет оповещение. В то же время, анализ тренда достаточно умен, чтобы избежать ложного срабатывания при ожидаемой транспортной нагрузке.

## <a name="references"></a>Ссылки

- [Azure Monitor](https://docs.microsoft.com/azure/azure-monitor/overview)

>[!div class="step-by-step"]
>[Назад](monitoring-azure-kubernetes.md)
>[Вперед](identity.md)
