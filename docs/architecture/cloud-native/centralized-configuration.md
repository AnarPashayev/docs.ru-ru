---
title: Централизованная конфигурация
description: Централизованная настройка с помощью Azure Key Vault может упростить управление облачными приложениями.
ms.date: 06/30/2019
ms.openlocfilehash: 4c516b6773d913acd71ff06742302e9766a141e2
ms.sourcegitcommit: 56f1d1203d0075a461a10a301459d3aa452f4f47
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2019
ms.locfileid: "73841141"
---
# <a name="centralized-configuration"></a>Централизованная конфигурация

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

Облачные приложения используют гораздо больше работающих служб, чем традиционные монолитные приложения с одним экземпляром. Управление параметрами конфигурации для десятков взаимозависимых служб может оказаться сложной задачей, поэтому централизованные хранилища конфигурации часто реализуются для распределенных приложений.

Как обсуждалось в [главе 1](introduction.md), для рекомендаций по развертыванию кода и конфигурации требуется четкое разделение. Это означает, что сохранение параметров конфигурации в виде констант или литеральных значений в коде является нарушением. Эта рекомендация существует, поскольку один и тот же код должен использоваться в нескольких средах, включая разработку, тестирование, промежуточное хранение и рабочую среду. Однако значения конфигурации, скорее всего, будут различаться в разных средах. Таким образом, значения конфигурации должны храниться в самой среде, или среда должна хранить учетные данные в централизованном хранилище конфигураций.

Приложение eShopOnContainers содержит файлы параметров локального приложения для каждой микрослужбы. Эти файлы возвращаются в систему управления версиями, но не включают в себя рабочие секреты, такие как строки подключения или ключи API. В рабочей среде отдельные параметры могут быть перезаписаны с помощью переменных среды для каждой службы. Это распространенная практика для размещенных приложений, но не предоставляет централизованное хранилище конфигураций. Для поддержки централизованного управления параметрами конфигурации каждая микрослужба включает параметр для переключения между использованием локальных параметров или параметров Azure Key Vault.

## <a name="azure-key-vault"></a>Хранилище ключей Azure;

Azure Key Vault обеспечивает безопасное хранение маркеров, паролей, сертификатов, ключей API и других конфиденциальных секретов. Для доступа к Key Vault требуется правильная проверка подлинности и авторизация вызывающей стороны, которая в случае микрослужб eShopOnContainers означает использование комбинации ClientId/ClientSecret. Не возверяйте эти учетные данные в системе управления версиями, а задавайте их в среде приложения. Прямой доступ к Key Vault из AKS можно достичь с помощью [Key Vault флексволуме](https://github.com/Azure/kubernetes-keyvault-flexvol).

При централизованной настройке параметры, применяемые ко всему приложению, например централизованную конечную точку ведения журнала, можно задать один раз и использовать в каждой части распределенного приложения. Несмотря на то, что микрослужбы должны быть независимы друг от друга, обычно все еще являются общими зависимостями, сведения о конфигурации которых могут быть полезны из централизованного хранилища конфигураций.

>[!div class="step-by-step"]
>[Назад](deploy-eshoponcontainers-azure.md)
>[Вперед](scale-applications.md)
