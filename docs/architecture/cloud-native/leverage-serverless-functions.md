---
title: Использование бессерверных функций
description: Использование бессерверных и функций Azure в собственных облачных приложениях
ms.date: 06/30/2019
ms.openlocfilehash: 77ddef0eb8844ea1b55cd2fc5ec8aa12593c8631
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2019
ms.locfileid: "73841747"
---
# <a name="leveraging-serverless-functions"></a>Использование бессерверных функций

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

В самом спектре управления полными компьютерами и операционными системами с использованием облачных возможностей, бессерверные функции в крайних случаях, за которые вы отвечаете, — это ваш код, и вы платите только за время выполнения кода. Функции Azure предоставляют возможность создания бессерверных возможностей в приложениях.

## <a name="what-is-serverless"></a>Что такое бессерверное?

Бессерверные вычисления не означают, что сервер не участвует в работе приложения — код по-прежнему работает на сервере где-то еще. Различие состоит в том, что группе разработки приложений больше не нужно беспокоиться о том, чтобы управлять инфраструктурой сервера. Бессерверные вычислительные решения, такие как функции Azure, помогают группам повысить производительность и позволить организациям оптимизировать свои ресурсы и сосредоточиться на предоставлении решений.

Бессерверные вычисления используют контейнеры, активируемые событиями без отслеживания состояния, для размещения приложения или части приложения. Бессерверные платформы могут масштабироваться и в для удовлетворения спроса по мере необходимости. Такие платформы, как функции Azure, имеют простой прямой доступ к другим службам Azure, таким как очереди, события и хранилище.

## <a name="what-challenges-are-solved-by-serverless"></a>Какие проблемы решаются независимо от сервера?

Отсутствие сервера — это лучшая абстракция, связанная с запуском собственного оборудования. Разработчики могут сосредоточиться только на написании кода для решения бизнес-задач, не заботясь о следующих задачах, которые могут быть необходимы при размещении собственных серверов.

- Приобретение компьютеров и лицензий на программное обеспечение
- Корпус, обеспечение безопасности, Настройка и обслуживание компьютеров и их сети, мощности и требований к/C
- Установка исправлений и обновление операционных систем и программного обеспечения
- Настройка веб-серверов или служб компьютеров для размещения программного обеспечения приложения
- Настройка программного обеспечения приложения на платформе

Многие компании используют десятки сотрудников и распределяют большие бюджеты для поддержки этих проблем с инфраструктурой оборудования. Простое перемещение в облако устраняет некоторые из этих проблем. При перемещении приложений в бессерверные приложения все остальные методы будут устранены.

## <a name="what-scenarios-are-appropriate-for-serverless"></a>Какие сценарии подходят для бессерверных задач?

Бессерверные службы используют отдельные кратковременные функции, которые вызываются в ответ на некоторый триггер. Это делает их идеальным решением для обработки фоновых задач.

Например, приложению может потребоваться отправить сообщение электронной почты в процессе обработки запроса. Вместо отправки электронного сообщения в процессе обработки веб-запроса сведения об этом сообщении можно поместить в очередь, а функция Azure может быть использована для получения сообщения и отправки электронного письма. Многие различные части приложения или даже многие приложения могут использовать эту же функцию Azure, обеспечивая улучшенную производительность и масштабируемость для приложений и использование [выравнивания нагрузки на основе очередей](https://docs.microsoft.com/azure/architecture/patterns/queue-based-load-leveling) во избежание узких мест, связанных с отправкой сообщений электронной почты.

Хотя [шаблон издателя или подписчика](https://docs.microsoft.com/azure/architecture/patterns/publisher-subscriber) между приложениями и функциями Azure является наиболее распространенным шаблоном, возможны и другие закономерности. Функции Azure могут инициироваться другими событиями, например изменениями в хранилище BLOB-объектов Azure. Приложение, которое поддерживало отправку изображений, может иметь функцию Azure, отвечающую за создание эскизов, или изменение размера передаваемых изображений в соответствии с размерами или оптимизации размера изображения. Все эти функции можно активировать непосредственно путем вставки в хранилище BLOB-объектов Azure, сохраняя сложность и рабочую нагрузку в самом приложении.

Многие приложения имеют длительно работающие процессы в рамках рабочих процессов. Часто эти задачи выполняются как часть взаимодействия пользователя с приложением, что позволяет пользователю ждать и негативно повлиять на их работу. Бессерверные вычисления предоставляют отличный способ выполнения медленных задач вне цикла взаимодействия с пользователем, и эти задачи можно легко масштабировать по запросу, не требуя масштабирования всего приложения.

## <a name="when-should-you-avoid-serverless"></a>Когда следует избегать бессерверных проблем?

Бессерверные вычисления лучше использовать для задач, которые не блокируют пользовательский интерфейс. Это означает, что они не идеально подходят для размещения веб-приложений или веб-API напрямую. Основная причина этого заключается в том, что бессерверные решения подготавливаются и масштабируются по требованию. Когда требуется новый экземпляр функции, называемый *холодный запуском*, для его инициализации требуется время. Это время обычно составляет несколько секунд, но может быть длиннее в зависимости от различных факторов. Один экземпляр часто может храниться в активном состоянии (например, путем периодического запроса), но проблемы холодного запуска остаются, если количество экземпляров когда-либо нужно увеличивать.

![холодный и горячий запуски](./media/cold-start-warm-start.png)
**рис. 3-10**. Холодный запуск и горячий запуск.

Если необходимо полностью избежать холодного запуска, можно выбрать вариант переключения из [плана потребления в выделенный план](https://azure.microsoft.com/blog/understanding-serverless-cold-start/). Вы также можете [настроить один или несколько предварительно подготовленных экземпляров](https://docs.microsoft.com/azure/azure-functions/functions-premium-plan#pre-warmed-instances) с помощью плана Premium, чтобы при необходимости добавить еще один экземпляр, который уже готов к работе. Эти параметры могут снизить одну из основных проблем, связанных с бессерверными вычислениями.

Как правило, следует избегать использования бессерверных задач в долгосрочных целях. Они лучше подходят для небольших частей работы, которые можно быстро завершить. Большинству бессерверных платформ требуется, чтобы отдельные функции были выполнены в течение нескольких минут. По умолчанию для функций Azure устанавливается длительность ожидания в 5 минут (может быть настроена до 10 минут). План функций Azure уровня "Премиум" может также устранить эту ошибку, по умолчанию время ожидания составляет 30 минут, что позволяет настроить неограниченный высокий предел.

Наконец, использование бессерверных операций для определенных задач в приложении повышает сложность. Зачастую лучше спроектировать приложение на модульной, слабо связанную структуру, а затем выяснить, есть ли у сервера преимущества бессерверных предложений, что сделает дополнительную сложность. Многие небольшие приложения прекрасно работают в едином монолитном развертывании без необходимости использования серверной архитектуры распределенного приложения.

## <a name="references"></a>Ссылки

- [Общие сведения о бессерверном холодном запуске](https://azure.microsoft.com/blog/understanding-serverless-cold-start/)
- [Предварительно подготовленные экземпляры функций Azure](https://docs.microsoft.com/azure/azure-functions/functions-premium-plan#pre-warmed-instances)
- [Создание функции в Linux с помощью пользовательского образа](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image)

>[!div class="step-by-step"]
>[Назад](leverage-containers-orchestrators.md)
>[Вперед](combine-containers-serverless-approaches.md)
