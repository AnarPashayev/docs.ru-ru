---
title: Использование бессерверных функций
description: Использование бессерверных и функций Azure в собственных облачных приложениях
ms.date: 06/30/2019
ms.openlocfilehash: 77ddef0eb8844ea1b55cd2fc5ec8aa12593c8631
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2019
ms.locfileid: "73841747"
---
# <a name="leveraging-serverless-functions"></a><span data-ttu-id="47651-103">Использование бессерверных функций</span><span class="sxs-lookup"><span data-stu-id="47651-103">Leveraging serverless functions</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="47651-104">В самом спектре управления полными компьютерами и операционными системами с использованием облачных возможностей, бессерверные функции в крайних случаях, за которые вы отвечаете, — это ваш код, и вы платите только за время выполнения кода.</span><span class="sxs-lookup"><span data-stu-id="47651-104">In the spectrum of managing full machines and operating systems to leveraging cloud capabilities, serverless lives at the extreme end where the only thing you're responsible for is your code, and you only pay when your code runs.</span></span> <span data-ttu-id="47651-105">Функции Azure предоставляют возможность создания бессерверных возможностей в приложениях.</span><span class="sxs-lookup"><span data-stu-id="47651-105">Azure Functions provides a way to build serverless capabilities into your applications.</span></span>

## <a name="what-is-serverless"></a><span data-ttu-id="47651-106">Что такое бессерверное?</span><span class="sxs-lookup"><span data-stu-id="47651-106">What is serverless?</span></span>

<span data-ttu-id="47651-107">Бессерверные вычисления не означают, что сервер не участвует в работе приложения — код по-прежнему работает на сервере где-то еще.</span><span class="sxs-lookup"><span data-stu-id="47651-107">Serverless computing doesn't mean there isn't a server involved in running your application - the code still runs on a server somewhere.</span></span> <span data-ttu-id="47651-108">Различие состоит в том, что группе разработки приложений больше не нужно беспокоиться о том, чтобы управлять инфраструктурой сервера.</span><span class="sxs-lookup"><span data-stu-id="47651-108">The distinction is that the application development team no longer needs to concern themselves with managing server infrastructure.</span></span> <span data-ttu-id="47651-109">Бессерверные вычислительные решения, такие как функции Azure, помогают группам повысить производительность и позволить организациям оптимизировать свои ресурсы и сосредоточиться на предоставлении решений.</span><span class="sxs-lookup"><span data-stu-id="47651-109">Serverless computing solutions like Azure Functions help teams increase their productivity and allow organizations to optimize their resources and focus on delivering solutions.</span></span>

<span data-ttu-id="47651-110">Бессерверные вычисления используют контейнеры, активируемые событиями без отслеживания состояния, для размещения приложения или части приложения.</span><span class="sxs-lookup"><span data-stu-id="47651-110">Serverless computing uses event-triggered stateless containers to host your application or part of your application.</span></span> <span data-ttu-id="47651-111">Бессерверные платформы могут масштабироваться и в для удовлетворения спроса по мере необходимости.</span><span class="sxs-lookup"><span data-stu-id="47651-111">Serverless platforms can scale out and in to meet demand as-needed.</span></span> <span data-ttu-id="47651-112">Такие платформы, как функции Azure, имеют простой прямой доступ к другим службам Azure, таким как очереди, события и хранилище.</span><span class="sxs-lookup"><span data-stu-id="47651-112">Platforms like Azure Functions have easy direct access to other Azure services like queues, events, and storage.</span></span>

## <a name="what-challenges-are-solved-by-serverless"></a><span data-ttu-id="47651-113">Какие проблемы решаются независимо от сервера?</span><span class="sxs-lookup"><span data-stu-id="47651-113">What challenges are solved by serverless?</span></span>

<span data-ttu-id="47651-114">Отсутствие сервера — это лучшая абстракция, связанная с запуском собственного оборудования.</span><span class="sxs-lookup"><span data-stu-id="47651-114">Serverless is the ultimate abstraction away from running your own hardware.</span></span> <span data-ttu-id="47651-115">Разработчики могут сосредоточиться только на написании кода для решения бизнес-задач, не заботясь о следующих задачах, которые могут быть необходимы при размещении собственных серверов.</span><span class="sxs-lookup"><span data-stu-id="47651-115">Developers can focus exclusively on writing code to solve business problems, without concern for any of the following tasks that might have been necessary when hosting your own servers:</span></span>

- <span data-ttu-id="47651-116">Приобретение компьютеров и лицензий на программное обеспечение</span><span class="sxs-lookup"><span data-stu-id="47651-116">Purchasing machines and software licenses</span></span>
- <span data-ttu-id="47651-117">Корпус, обеспечение безопасности, Настройка и обслуживание компьютеров и их сети, мощности и требований к/C</span><span class="sxs-lookup"><span data-stu-id="47651-117">Housing, securing, configuring, and maintaining the machines and their networking, power, and A/C requirements</span></span>
- <span data-ttu-id="47651-118">Установка исправлений и обновление операционных систем и программного обеспечения</span><span class="sxs-lookup"><span data-stu-id="47651-118">Patching and upgrading operating systems and software</span></span>
- <span data-ttu-id="47651-119">Настройка веб-серверов или служб компьютеров для размещения программного обеспечения приложения</span><span class="sxs-lookup"><span data-stu-id="47651-119">Configuring web servers or machine services to host application software</span></span>
- <span data-ttu-id="47651-120">Настройка программного обеспечения приложения на платформе</span><span class="sxs-lookup"><span data-stu-id="47651-120">Configuring application software within its platform</span></span>

<span data-ttu-id="47651-121">Многие компании используют десятки сотрудников и распределяют большие бюджеты для поддержки этих проблем с инфраструктурой оборудования.</span><span class="sxs-lookup"><span data-stu-id="47651-121">Many companies employ dozens of staff members and allocate large budgets to support these hardware infrastructure concerns.</span></span> <span data-ttu-id="47651-122">Простое перемещение в облако устраняет некоторые из этих проблем. При перемещении приложений в бессерверные приложения все остальные методы будут устранены.</span><span class="sxs-lookup"><span data-stu-id="47651-122">Simply moving to the cloud eliminates some of these concerns; shifting applications all the way to serverless will eliminate the rest.</span></span>

## <a name="what-scenarios-are-appropriate-for-serverless"></a><span data-ttu-id="47651-123">Какие сценарии подходят для бессерверных задач?</span><span class="sxs-lookup"><span data-stu-id="47651-123">What scenarios are appropriate for serverless?</span></span>

<span data-ttu-id="47651-124">Бессерверные службы используют отдельные кратковременные функции, которые вызываются в ответ на некоторый триггер.</span><span class="sxs-lookup"><span data-stu-id="47651-124">Serverless uses individual short-running functions that are called in response to some trigger.</span></span> <span data-ttu-id="47651-125">Это делает их идеальным решением для обработки фоновых задач.</span><span class="sxs-lookup"><span data-stu-id="47651-125">This makes them ideal for processing background tasks.</span></span>

<span data-ttu-id="47651-126">Например, приложению может потребоваться отправить сообщение электронной почты в процессе обработки запроса.</span><span class="sxs-lookup"><span data-stu-id="47651-126">For example, an application might need to send an email as part of processing a request.</span></span> <span data-ttu-id="47651-127">Вместо отправки электронного сообщения в процессе обработки веб-запроса сведения об этом сообщении можно поместить в очередь, а функция Azure может быть использована для получения сообщения и отправки электронного письма.</span><span class="sxs-lookup"><span data-stu-id="47651-127">Instead of sending the email as part of handling the web request, the details of the email could be placed onto a queue and an Azure Function could be used to pick up the message and send the email.</span></span> <span data-ttu-id="47651-128">Многие различные части приложения или даже многие приложения могут использовать эту же функцию Azure, обеспечивая улучшенную производительность и масштабируемость для приложений и использование [выравнивания нагрузки на основе очередей](https://docs.microsoft.com/azure/architecture/patterns/queue-based-load-leveling) во избежание узких мест, связанных с отправкой сообщений электронной почты.</span><span class="sxs-lookup"><span data-stu-id="47651-128">Many different parts of the application, or even many applications, could leverage this same Azure Function, providing improved performance and scalability for the applications and using [queue-based load leveling](https://docs.microsoft.com/azure/architecture/patterns/queue-based-load-leveling) to avoid bottlenecks related to sending the emails.</span></span>

<span data-ttu-id="47651-129">Хотя [шаблон издателя или подписчика](https://docs.microsoft.com/azure/architecture/patterns/publisher-subscriber) между приложениями и функциями Azure является наиболее распространенным шаблоном, возможны и другие закономерности.</span><span class="sxs-lookup"><span data-stu-id="47651-129">Although a [Publisher/Subscriber pattern](https://docs.microsoft.com/azure/architecture/patterns/publisher-subscriber) between applications and Azure Functions is the most common pattern, other patterns are possible.</span></span> <span data-ttu-id="47651-130">Функции Azure могут инициироваться другими событиями, например изменениями в хранилище BLOB-объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="47651-130">Azure Functions can be triggered by other events, such as changes to Azure Blob Storage.</span></span> <span data-ttu-id="47651-131">Приложение, которое поддерживало отправку изображений, может иметь функцию Azure, отвечающую за создание эскизов, или изменение размера передаваемых изображений в соответствии с размерами или оптимизации размера изображения.</span><span class="sxs-lookup"><span data-stu-id="47651-131">An application that supported image uploads could have an Azure Function responsible for creating thumbnail images, or resizing uploaded images to consistent dimensions, or optimizing image size.</span></span> <span data-ttu-id="47651-132">Все эти функции можно активировать непосредственно путем вставки в хранилище BLOB-объектов Azure, сохраняя сложность и рабочую нагрузку в самом приложении.</span><span class="sxs-lookup"><span data-stu-id="47651-132">All of this functionality could be triggered directly by inserts to Azure Blob Storage, keeping the complexity and the workload out of the application itself.</span></span>

<span data-ttu-id="47651-133">Многие приложения имеют длительно работающие процессы в рамках рабочих процессов.</span><span class="sxs-lookup"><span data-stu-id="47651-133">Many applications have long-running processes as part of their workflows.</span></span> <span data-ttu-id="47651-134">Часто эти задачи выполняются как часть взаимодействия пользователя с приложением, что позволяет пользователю ждать и негативно повлиять на их работу.</span><span class="sxs-lookup"><span data-stu-id="47651-134">Often these tasks are done as part of the user's interaction with the application, forcing the user to wait and negatively impacting their experience.</span></span> <span data-ttu-id="47651-135">Бессерверные вычисления предоставляют отличный способ выполнения медленных задач вне цикла взаимодействия с пользователем, и эти задачи можно легко масштабировать по запросу, не требуя масштабирования всего приложения.</span><span class="sxs-lookup"><span data-stu-id="47651-135">Serverless computing provides a great way to perform slower tasks outside of the user interaction loop, and these tasks can easily scale with demand without requiring the entire application to scale.</span></span>

## <a name="when-should-you-avoid-serverless"></a><span data-ttu-id="47651-136">Когда следует избегать бессерверных проблем?</span><span class="sxs-lookup"><span data-stu-id="47651-136">When should you avoid serverless?</span></span>

<span data-ttu-id="47651-137">Бессерверные вычисления лучше использовать для задач, которые не блокируют пользовательский интерфейс.</span><span class="sxs-lookup"><span data-stu-id="47651-137">Serverless computing is best-used for tasks that don't block the user interface.</span></span> <span data-ttu-id="47651-138">Это означает, что они не идеально подходят для размещения веб-приложений или веб-API напрямую.</span><span class="sxs-lookup"><span data-stu-id="47651-138">This means they're not ideal for hosting web applications or web APIs directly.</span></span> <span data-ttu-id="47651-139">Основная причина этого заключается в том, что бессерверные решения подготавливаются и масштабируются по требованию.</span><span class="sxs-lookup"><span data-stu-id="47651-139">The main reason for this is that serverless solutions are provisioned and scaled on demand.</span></span> <span data-ttu-id="47651-140">Когда требуется новый экземпляр функции, называемый *холодный запуском*, для его инициализации требуется время.</span><span class="sxs-lookup"><span data-stu-id="47651-140">When a new instance of a function is needed, referred to as a *cold start*, it takes time to provision.</span></span> <span data-ttu-id="47651-141">Это время обычно составляет несколько секунд, но может быть длиннее в зависимости от различных факторов.</span><span class="sxs-lookup"><span data-stu-id="47651-141">This time is typically a few seconds, but can be longer depending on a variety of factors.</span></span> <span data-ttu-id="47651-142">Один экземпляр часто может храниться в активном состоянии (например, путем периодического запроса), но проблемы холодного запуска остаются, если количество экземпляров когда-либо нужно увеличивать.</span><span class="sxs-lookup"><span data-stu-id="47651-142">A single instance can often be kept alive indefinitely (for instance, by periodically making a request to it), but the cold start issue remains if the number of instances ever needs to scale up.</span></span>

<span data-ttu-id="47651-143">![холодный и горячий запуски](./media/cold-start-warm-start.png)
**рис. 3-10**.</span><span class="sxs-lookup"><span data-stu-id="47651-143">![Cold versus warm start](./media/cold-start-warm-start.png)
**Figure 3-10**.</span></span> <span data-ttu-id="47651-144">Холодный запуск и горячий запуск.</span><span class="sxs-lookup"><span data-stu-id="47651-144">Cold start versus warm start.</span></span>

<span data-ttu-id="47651-145">Если необходимо полностью избежать холодного запуска, можно выбрать вариант переключения из [плана потребления в выделенный план](https://azure.microsoft.com/blog/understanding-serverless-cold-start/).</span><span class="sxs-lookup"><span data-stu-id="47651-145">If you need to avoid cold starts entirely, you can choose to switch from a [consumption plan to a dedicated plan](https://azure.microsoft.com/blog/understanding-serverless-cold-start/).</span></span> <span data-ttu-id="47651-146">Вы также можете [настроить один или несколько предварительно подготовленных экземпляров](https://docs.microsoft.com/azure/azure-functions/functions-premium-plan#pre-warmed-instances) с помощью плана Premium, чтобы при необходимости добавить еще один экземпляр, который уже готов к работе.</span><span class="sxs-lookup"><span data-stu-id="47651-146">You can also [configure one or more pre-warmed instances](https://docs.microsoft.com/azure/azure-functions/functions-premium-plan#pre-warmed-instances) with the premium plan so when you need to add another instance, it's already up and ready to go.</span></span> <span data-ttu-id="47651-147">Эти параметры могут снизить одну из основных проблем, связанных с бессерверными вычислениями.</span><span class="sxs-lookup"><span data-stu-id="47651-147">These options can mitigate one of the key concerns associated with serverless computing.</span></span>

<span data-ttu-id="47651-148">Как правило, следует избегать использования бессерверных задач в долгосрочных целях.</span><span class="sxs-lookup"><span data-stu-id="47651-148">You should also typically avoid serverless for long-running tasks.</span></span> <span data-ttu-id="47651-149">Они лучше подходят для небольших частей работы, которые можно быстро завершить.</span><span class="sxs-lookup"><span data-stu-id="47651-149">They're best for small pieces of work that can be completed quickly.</span></span> <span data-ttu-id="47651-150">Большинству бессерверных платформ требуется, чтобы отдельные функции были выполнены в течение нескольких минут.</span><span class="sxs-lookup"><span data-stu-id="47651-150">Most serverless platforms require individual functions to complete within a few minutes.</span></span> <span data-ttu-id="47651-151">По умолчанию для функций Azure устанавливается длительность ожидания в 5 минут (может быть настроена до 10 минут).</span><span class="sxs-lookup"><span data-stu-id="47651-151">Azure Functions defaults to a 5-minute time-out duration (can be configured up to 10 minutes).</span></span> <span data-ttu-id="47651-152">План функций Azure уровня "Премиум" может также устранить эту ошибку, по умолчанию время ожидания составляет 30 минут, что позволяет настроить неограниченный высокий предел.</span><span class="sxs-lookup"><span data-stu-id="47651-152">The Azure Functions premium plan can mitigate this issue as well, defaulting time outs to 30 minutes and allowing an unbounded higher limit to be configured.</span></span>

<span data-ttu-id="47651-153">Наконец, использование бессерверных операций для определенных задач в приложении повышает сложность.</span><span class="sxs-lookup"><span data-stu-id="47651-153">Finally, leveraging serverless for certain tasks within your application adds complexity.</span></span> <span data-ttu-id="47651-154">Зачастую лучше спроектировать приложение на модульной, слабо связанную структуру, а затем выяснить, есть ли у сервера преимущества бессерверных предложений, что сделает дополнительную сложность.</span><span class="sxs-lookup"><span data-stu-id="47651-154">It's often best to architect your application in a modular, loosely coupled manner first, and then identify if there are benefits serverless would offer that make the additional complexity worthwhile.</span></span> <span data-ttu-id="47651-155">Многие небольшие приложения прекрасно работают в едином монолитном развертывании без необходимости использования серверной архитектуры распределенного приложения.</span><span class="sxs-lookup"><span data-stu-id="47651-155">Many smaller applications will run perfectly well in a single monolithic deployment, without the need for the distributed application architecture serverless computing requires.</span></span>

## <a name="references"></a><span data-ttu-id="47651-156">Ссылки</span><span class="sxs-lookup"><span data-stu-id="47651-156">References</span></span>

- [<span data-ttu-id="47651-157">Общие сведения о бессерверном холодном запуске</span><span class="sxs-lookup"><span data-stu-id="47651-157">Understanding serverless cold start</span></span>](https://azure.microsoft.com/blog/understanding-serverless-cold-start/)
- [<span data-ttu-id="47651-158">Предварительно подготовленные экземпляры функций Azure</span><span class="sxs-lookup"><span data-stu-id="47651-158">Pre-warmed Azure Functions instances</span></span>](https://docs.microsoft.com/azure/azure-functions/functions-premium-plan#pre-warmed-instances)
- [<span data-ttu-id="47651-159">Создание функции в Linux с помощью пользовательского образа</span><span class="sxs-lookup"><span data-stu-id="47651-159">Create a function on Linux using a custom image</span></span>](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image)

>[!div class="step-by-step"]
><span data-ttu-id="47651-160">[Назад](leverage-containers-orchestrators.md)
>[Вперед](combine-containers-serverless-approaches.md)</span><span class="sxs-lookup"><span data-stu-id="47651-160">[Previous](leverage-containers-orchestrators.md)
[Next](combine-containers-serverless-approaches.md)</span></span>
