---
title: Развертывание современных классических приложений
description: Все, что необходимо знать о развертывании современных настольных приложений.
ms.date: 05/12/2020
ms.openlocfilehash: 4a4d93caf1c2f8f58d48ee3199bbe6983fa939f4
ms.sourcegitcommit: 9a4488a3625866335e83a20da5e9c5286b1f034c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/15/2020
ms.locfileid: "97866683"
---
# <a name="deploying-modern-desktop-applications"></a><span data-ttu-id="fa2ae-103">Развертывание современных классических приложений</span><span class="sxs-lookup"><span data-stu-id="fa2ae-103">Deploying Modern Desktop Applications</span></span>

<span data-ttu-id="fa2ae-104">При разработке классических приложений необходимо учитывать, как ваше приложение будет упаковываться и развертываться на компьютерах пользователей.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-104">When you develop desktop applications, one thing to consider is how your application is going to be packaged and deployed to the users' machines.</span></span> <span data-ttu-id="fa2ae-105">Проблема, связанная с упаковкой, развертыванием и установкой, заключается в том, что она обычно находится под кодовым знаком ИТ-специалистов, ответственных за различные вещи, чем разработчики.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-105">The problem with packaging, deployment, and installation is that it usually falls under the umbrella of the IT professionals, who care about different things than developers.</span></span>

<span data-ttu-id="fa2ae-106">В эти дни мы знакомы с концепцией DevOps, где разработчики и ИТ-специалисты тесно взаимодействуют с переносом приложений в свои рабочие среды.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-106">These days, we're all familiar with the DevOps concept, where developers and IT Pros work closely to move applications to their production environments.</span></span> <span data-ttu-id="fa2ae-107">Но если вы находились на рабочем столе более 10 лет, вы могли увидеть следующую историю.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-107">But if you've been in the desktop battle for more than 10 years, you might have seen the following story.</span></span> <span data-ttu-id="fa2ae-108">Группа разработчиков работает вместе, чтобы соответствовать крайним срокам проекта.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-108">A team of developers works together hard to meet the project deadlines.</span></span> <span data-ttu-id="fa2ae-109">Бизнес-люди нервной, так как им требуется система, работающая на многих компьютерах пользователей для запуска компании.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-109">Business people are nervous since they need the system working on many user's machines to run the company.</span></span> <span data-ttu-id="fa2ae-110">В «D-день» менеджер по проектам проверяет, правильно ли работает свой код, и все ли они могут поставляться.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-110">On "D-Day", the project manager checks with every developer that their code is working well and that everything is fine, so they can ship.</span></span> <span data-ttu-id="fa2ae-111">Затем группа пакетов создает программу установки для приложения, распространяет ее на каждый компьютер пользователя и набор тестовых пользователей, запускающих приложение.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-111">Then, the package team comes in generating the setup for the app, distribute it to every user machine and a set of test users run the application.</span></span> <span data-ttu-id="fa2ae-112">Кроме того, они пытаются, поскольку перед отображением любого пользовательского интерфейса приложение создает исключение с сообщением "метод ~ объекта ~ сбой".</span><span class="sxs-lookup"><span data-stu-id="fa2ae-112">Well, they try, because before showing any UI, the application throws an exception that says "Method ~ of object ~ failed".</span></span> <span data-ttu-id="fa2ae-113">Тревога начинает поступать через воздушный цикл и короткое исследование указывает на неприятного и неприятного разработчика, который представил сторонний элемент управления, который определенно «работал на компьютере разработки».</span><span class="sxs-lookup"><span data-stu-id="fa2ae-113">Panic starts flowing through the air and a brief investigation points to a young and tired developer that has introduced a third-party control, that certainly "worked on the dev machine".</span></span>

<span data-ttu-id="fa2ae-114">Установка классических приложений традиционно была настоящим кошмаром по двум основным причинам:</span><span class="sxs-lookup"><span data-stu-id="fa2ae-114">Installing desktop applications have traditionally been a nightmare for two main reasons:</span></span>

- <span data-ttu-id="fa2ae-115">Отсутствие закрытого языка и региональных параметров для совместной работы между разработчиками и ИТ.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-115">Lack of close collaboration culture between dev and IT teams.</span></span>
- <span data-ttu-id="fa2ae-116">Отсутствие сплошной технологии упаковки и развертывания, которую мы можем создать.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-116">Lack of a solid packaging and deploying technology we can build upon.</span></span>

<span data-ttu-id="fa2ae-117">На самом деле мы работаем с тем, что иногда вы установили приложение, так как:</span><span class="sxs-lookup"><span data-stu-id="fa2ae-117">In fact, we've been living with the fact that sometimes you regret that you installed an app because:</span></span>

- <span data-ttu-id="fa2ae-118">На вашем компьютере есть нежелательные побочные эффекты.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-118">It ends up having some undesired side effects on your machine.</span></span>
- <span data-ttu-id="fa2ae-119">Некоторые приложения, которые были ранее установлены, перестают работать.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-119">Some applications that were previously installed stop working.</span></span>

<span data-ttu-id="fa2ae-120">Кроме того, невозможно просто восстановить систему в исходное состояние путем удаления приложения.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-120">Additionally, you can't just restore the system to its original state by uninstalling the app.</span></span> <span data-ttu-id="fa2ae-121">Мы используем для этого ситуацию, в которой мы ввели такие термины, как "DLL Hell" или "Винрот".</span><span class="sxs-lookup"><span data-stu-id="fa2ae-121">We're so used to live this situation that we've coined terms like "DLL Hell" or "Winrot".</span></span>

<span data-ttu-id="fa2ae-122">В этой главе мы поговорим о MSIX.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-122">In this chapter, we'll talk about MSIX.</span></span> <span data-ttu-id="fa2ae-123">MSIX — это новая технология от корпорации Майкрософт, которая пытается захватить лучшие из предыдущих технологий, чтобы обеспечить надежную основу для технологии упаковки будущего.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-123">MSIX is the brand-new technology from Microsoft that tries to capture the best of previous technologies to provide a solid foundation for the packaging technology of the future.</span></span>

<span data-ttu-id="fa2ae-124">Что делает пакетную технологию с помощью модернизации?</span><span class="sxs-lookup"><span data-stu-id="fa2ae-124">What does a packaging technology have to do with modernization?</span></span> <span data-ttu-id="fa2ae-125">И оказалось, что эта упаковка является фундаментальной для предприятия ИТ с большим количеством денег.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-125">Well, it turns out that packaging is fundamental for the enterprise IT with lots of money invested there.</span></span> <span data-ttu-id="fa2ae-126">Модернизации не только использует новейшие технологии.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-126">Modernization isn't only related to using the latest technologies.</span></span> <span data-ttu-id="fa2ae-127">Кроме того, это связано с сокращением времени до рынка с момента определения бизнес-требования до тех пор, пока ваша компания не доставляет эту функцию клиенту.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-127">It's also related to reducing time to market from the moment a business requirement is defined until your company delivers the feature to your client.</span></span>

## <a name="the-modern-application-lifecycle"></a><span data-ttu-id="fa2ae-128">Современный жизненный цикл приложения</span><span class="sxs-lookup"><span data-stu-id="fa2ae-128">The modern application lifecycle</span></span>

<span data-ttu-id="fa2ae-129">Сегодня разработчики пишут и создают код для приложения, а затем передают созданные ресурсы ИТ-специалистам.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-129">Today, developers write and build the code for an app and then pass the generated assets to the IT Pros.</span></span> <span data-ttu-id="fa2ae-130">Затем ИТ-специалисты перестраивают приложение и повторно упаковывают его, как правило, в MSI или в недавно в формате упаковки App-V.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-130">Then, the IT Pros reconfigure the app and repackage it, typically in an MSI or more recently in an App-V packaging format.</span></span> <span data-ttu-id="fa2ae-131">Затем приложение развертывается с помощью различных каналов и средств.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-131">The app is then deployed through different channels and tools.</span></span> <span data-ttu-id="fa2ae-132">Одна из основных проблем такого подхода обычно называется "упаковкой паралисис".</span><span class="sxs-lookup"><span data-stu-id="fa2ae-132">One of the main problems with this approach is commonly known as "packaging paralysis".</span></span> <span data-ttu-id="fa2ae-133">Проблема заключается в том, что этот цикл повторяется каждый раз при обновлении приложения или обновлении операционной системы.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-133">The problem is that this cycle repeats every time there's an app update or an OS update.</span></span>

<span data-ttu-id="fa2ae-134">Процесс отображается на следующем рисунке:</span><span class="sxs-lookup"><span data-stu-id="fa2ae-134">You can see the process reflected on the following picture:</span></span>

![Схема, показывающая современный жизненный цикл ИТ](./media/deploy-modern-applications/modern-it-application-lifecycle.png)

<span data-ttu-id="fa2ae-136">Компаниям требуется способ разбить этот цикл упаковки на три независимых цикла:</span><span class="sxs-lookup"><span data-stu-id="fa2ae-136">Companies need a way to break this packaging cycle into three independent cycles:</span></span>

- <span data-ttu-id="fa2ae-137">Обновления ОС</span><span class="sxs-lookup"><span data-stu-id="fa2ae-137">OS updates</span></span>
- <span data-ttu-id="fa2ae-138">Обновления приложений</span><span class="sxs-lookup"><span data-stu-id="fa2ae-138">Application updates</span></span>
- <span data-ttu-id="fa2ae-139">Настройка</span><span class="sxs-lookup"><span data-stu-id="fa2ae-139">Customization</span></span>

![Схема, показывающая современный цикл ИТ тем самым эффективный](./media/deploy-modern-applications/modern-it-virtuous-cycle.png)

<span data-ttu-id="fa2ae-141">На предыдущей схеме показано, что можно:</span><span class="sxs-lookup"><span data-stu-id="fa2ae-141">The previous diagram shows that you can:</span></span>

- <span data-ttu-id="fa2ae-142">Обновление базовой ОС без необходимости переупаковки приложений.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-142">Update the underlying OS without having to repackage your apps.</span></span>
- <span data-ttu-id="fa2ae-143">Включение настроек из него без необходимости переупаковки исходного пакета разработчика.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-143">Enable customizations from IT without the need to repackage the original developer package.</span></span>

<span data-ttu-id="fa2ae-144">Это коренное изменение приводит нас к новому и современному жизненному циклу ИТ, как показано на следующем рисунке:</span><span class="sxs-lookup"><span data-stu-id="fa2ae-144">This radical change leads us to the new and modern IT lifecycle as shown in the following picture:</span></span>

![Схема, показывающая жизненный цикл приложения с помощью средств Майкрософт](./media/deploy-modern-applications/microsoft-it-tools.png)

<span data-ttu-id="fa2ae-146">Разработчики создают приложение и создают пакет MSIX, который ИТ-специалисты могут использовать и настраивать без необходимости переупаковки.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-146">Developers create the app and generate an MSIX package that IT Pros can consume and configure without the need of repackaging.</span></span> <span data-ttu-id="fa2ae-147">Вместе с технологией MSIX Корпорация Майкрософт создала средства, позволяющие настраивать и настраивать пакеты без переупаковки.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-147">Along with the MSIX technology, Microsoft has created tools to allow IT to customize and configure packages without repackaging.</span></span>

## <a name="msix-the-next-generation-of-deployment"></a><span data-ttu-id="fa2ae-148">MSIX: следующее поколение развертывания</span><span class="sxs-lookup"><span data-stu-id="fa2ae-148">MSIX: The next generation of deployment</span></span>

<span data-ttu-id="fa2ae-149">Прежде чем MSIX, доступны несколько технологий упаковки, таких как мастера установки, MSI, ClickOnce, App-V и сценарии.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-149">Before MSIX, there were several packaging technologies available like setup wizards, MSI, ClickOnce, App-V, and scripting.</span></span> <span data-ttu-id="fa2ae-150">Каждая из этих технологий имеет свои сильные стороны, и корпорация Майкрософт решила выбрать наилучшие из них для создания MSIX.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-150">Each of these technologies has their own strengths and Microsoft has decided to pick the best of all to build MSIX.</span></span> <span data-ttu-id="fa2ae-151">MSIX основан на основах этих существующих технологий, которые наилучшим образом подходят для каждого из них:</span><span class="sxs-lookup"><span data-stu-id="fa2ae-151">MSIX is built on the foundations of these existing technologies picking the best of each:</span></span>

- <span data-ttu-id="fa2ae-152">App-V = \> контейнер</span><span class="sxs-lookup"><span data-stu-id="fa2ae-152">App-V =\> Containerization</span></span>
- <span data-ttu-id="fa2ae-153">ClickOnce = \> Автоматическое обновление</span><span class="sxs-lookup"><span data-stu-id="fa2ae-153">ClickOnce =\> Auto updating</span></span>
- <span data-ttu-id="fa2ae-154">MSI = \> легко распространяемый</span><span class="sxs-lookup"><span data-stu-id="fa2ae-154">MSI =\> Easy to distribute</span></span>

<span data-ttu-id="fa2ae-155">С помощью MSIX вы получаете одну технологию установки со всеми этими функциями.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-155">With MSIX, you get one installer technology with all these features.</span></span>

![Схема, на которой показаны различные технологии, которые оказывают влияние на создание MSIX](./media/deploy-modern-applications/msix.png)

### <a name="benefits-of-msix"></a><span data-ttu-id="fa2ae-157">Преимущества MSIX</span><span class="sxs-lookup"><span data-stu-id="fa2ae-157">Benefits of MSIX</span></span>

#### <a name="never-regret-installing-an-app"></a><span data-ttu-id="fa2ae-158">Никогда не устанавливать приложение</span><span class="sxs-lookup"><span data-stu-id="fa2ae-158">Never regret installing an app</span></span>

<span data-ttu-id="fa2ae-159">MSIX обеспечивает предсказуемое, надежное и безопасное развертывание.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-159">MSIX provides a predictable, reliable, and safe deployment.</span></span> <span data-ttu-id="fa2ae-160">Декларативный метод, содержащийся в манифесте пакета, позволяет операционной системе вести отслеживание каждого ресурса, необходимого приложению.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-160">The declarative method contained in the package manifest lets the OS keep track of every asset your application needs.</span></span> <span data-ttu-id="fa2ae-161">Он также предоставляет истинное удаление без побочных эффектов.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-161">It also provides a true clean uninstall with no side effects.</span></span>

#### <a name="disk-space-optimization"></a><span data-ttu-id="fa2ae-162">Оптимизация дискового пространства</span><span class="sxs-lookup"><span data-stu-id="fa2ae-162">Disk space optimization</span></span>

<span data-ttu-id="fa2ae-163">MSIX оптимизирована для уменьшения места, занимаемого приложением на диске компьютера пользователя.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-163">MSIX is optimized to reduce the footprint that an application has on the user's machine disk space.</span></span> <span data-ttu-id="fa2ae-164">Он создает хранилище файлов одного экземпляра.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-164">It creates a single instance storage of your files.</span></span> <span data-ttu-id="fa2ae-165">То есть, если у вас есть два разных пакета с одной и той же библиотекой DLL, Библиотека DLL не устанавливается дважды.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-165">That is, if you have two different packages with the same DLL, the DLL isn't installed twice.</span></span> <span data-ttu-id="fa2ae-166">Платформа отвечает за эту проблему, поскольку она знает все файлы, установленные определенным приложением, благодаря его декларативной природе.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-166">The platform takes care of that problem because it knows all the files that a particular app installed thanks to its declarative nature.</span></span> <span data-ttu-id="fa2ae-167">Она также позволяет использовать разные версии DLL-библиотеки для параллельной работы.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-167">It also allows you to have different versions of a DLL working side by side.</span></span>

<span data-ttu-id="fa2ae-168">С помощью пакетов ресурсов можно легко создавать многоязычные приложения, а операционная система — устанавливать используемые.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-168">With the use of resource packages, you can easily create multilingual apps and the OS takes care of installing the ones that are used.</span></span>

#### <a name="network-optimization"></a><span data-ttu-id="fa2ae-169">Оптимизация сети</span><span class="sxs-lookup"><span data-stu-id="fa2ae-169">Network optimization</span></span>

<span data-ttu-id="fa2ae-170">MSIX определяет различия в файлах на уровне блока Byte, позволяя использовать функцию разностного обновления.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-170">MSIX detects the differences on the files at the byte block level enabling a feature called differential updates.</span></span> <span data-ttu-id="fa2ae-171">Это означает, что в обновлениях приложения загружаются только обновленные блоки байтов.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-171">What this means is that only the updated byte blocks are downloaded on application updates.</span></span>

![Схема, показывающая, как MSIX управляет разностными обновлениями](./media/deploy-modern-applications/msix-managing-updates.png)

<span data-ttu-id="fa2ae-173">С помощью потоковой установки пользователь может быстро начать работу над приложением, а другие части приложения — в фоновом режиме.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-173">With streaming installation, the user can quickly start working on your application while other parts of the app are downloaded on the background.</span></span> <span data-ttu-id="fa2ae-174">Эта функция влияет на работу пользователей.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-174">This feature contributes to an engaging experience for your users.</span></span>

<span data-ttu-id="fa2ae-175">С помощью необязательных пакетов вы можете реализовать компоненты для развертывания приложения, чтобы при необходимости скачать их.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-175">With the optional packages feature, you achieve componentization on your app deployment, so you can download them when needed.</span></span>

#### <a name="simple-packaging-and-deployment"></a><span data-ttu-id="fa2ae-176">Простая упаковка и развертывание</span><span class="sxs-lookup"><span data-stu-id="fa2ae-176">Simple packaging and deployment</span></span>

<span data-ttu-id="fa2ae-177">Идентификатор AppManifest объявляет управление версиями, нацеливание устройств и выявляет их стандартным образом для каждого приложения.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-177">The AppManifest declares the versioning, device targeting and identify in a standard way for every application.</span></span> <span data-ttu-id="fa2ae-178">Он также позволяет подписывать активы, предоставляющие надежную систему безопасности.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-178">It also provides a way to sign your assets providing a solid security foundation.</span></span>

#### <a name="os-managed"></a><span data-ttu-id="fa2ae-179">Управляемая ОС</span><span class="sxs-lookup"><span data-stu-id="fa2ae-179">OS managed</span></span>

<span data-ttu-id="fa2ae-180">Операционная система обрабатывает все процессы для установки, обновления и удаления приложения.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-180">The OS handles all the processes for installing, updating, and removing an application.</span></span> <span data-ttu-id="fa2ae-181">Приложения устанавливаются на пользователя, но загружаются только один раз, что сводит к минимуму объем дискового пространства.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-181">Applications are installed per user but downloaded only once, minimizing the disk footprint.</span></span> <span data-ttu-id="fa2ae-182">Корпорация Майкрософт работает над предоставлением MSIX и Windows 7.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-182">Microsoft is working on providing the MSIX experience also on Windows 7.</span></span>

#### <a name="windows-provides-integrity-for-the-app"></a><span data-ttu-id="fa2ae-183">Windows обеспечивает целостность приложения</span><span class="sxs-lookup"><span data-stu-id="fa2ae-183">Windows provides integrity for the app</span></span>

<span data-ttu-id="fa2ae-184">С помощью цифровых подписей можно гарантировать, что вы не устанавливаете приложение из ненадежных источников.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-184">With the use of digital signatures, you can guarantee that you don't install an application from untrusted sources.</span></span> <span data-ttu-id="fa2ae-185">MSIX также предотвращает незаконное изменение, поскольку:</span><span class="sxs-lookup"><span data-stu-id="fa2ae-185">MSIX also prevents tampering because:</span></span>

- <span data-ttu-id="fa2ae-186">Он хранит записи о хэшейх файлов.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-186">It keeps a record of file hashes.</span></span>
- <span data-ttu-id="fa2ae-187">Он определяет, был ли файл изменен после установки.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-187">It detects if a file has been modified after installation.</span></span>

#### <a name="works-for-the-entire-app-catalog"></a><span data-ttu-id="fa2ae-188">Работает для всего каталога приложений</span><span class="sxs-lookup"><span data-stu-id="fa2ae-188">Works for the entire App Catalog</span></span>

<span data-ttu-id="fa2ae-189">Одно из самых интересных вещей о MSIX заключается в том, что он работает для всего каталога приложений, Windows Forms, WPF, MFC/ATL, Delphi, даже если вы хотите выполнить развертывание с помощью xCopy, ClickOnce или перейти в магазин, вы можете использовать тот же пакет MSIX.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-189">One of the coolest things about MSIX is that it works for the entire application catalog, Windows Forms, WPF, MFC/ATL, Delphi, even if you want to do xCopy deployment, ClickOnce, or going to the Store, you can use the same MSIX package.</span></span>

### <a name="tools"></a><span data-ttu-id="fa2ae-190">Инструменты</span><span class="sxs-lookup"><span data-stu-id="fa2ae-190">Tools</span></span>

#### <a name="windows-application-packaging-project"></a><span data-ttu-id="fa2ae-191">Проект упаковки приложений Windows</span><span class="sxs-lookup"><span data-stu-id="fa2ae-191">Windows Application Packaging Project</span></span>

<span data-ttu-id="fa2ae-192">Вы можете использовать проект **упаковки приложений Windows**   в Visual Studio для создания пакета для классического приложения.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-192">You can use the **Windows Application Packaging Project** project in Visual Studio to generate a package for your desktop app.</span></span> <span data-ttu-id="fa2ae-193">Затем можно опубликовать этот пакет на Microsoft Store или загружать неопубликованные его на один или несколько компьютеров.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-193">Then, you can publish that package to the Microsoft Store or sideload it onto one or more PCs.</span></span>

#### <a name="msix-packaging-tool"></a><span data-ttu-id="fa2ae-194">Средство упаковки MSIX</span><span class="sxs-lookup"><span data-stu-id="fa2ae-194">MSIX Packaging Tool</span></span>

<span data-ttu-id="fa2ae-195">Средство упаковки MSIX позволяет повторно упаковывать существующие пакеты приложений Win32 в формате MSIX.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-195">The MSIX Packaging Tool enables you to repackage your existing Win32 applications to the MSIX format.</span></span> <span data-ttu-id="fa2ae-196">Он предоставляет интерактивный пользовательский интерфейс и командную строку для преобразований и позволяет преобразовать приложение без исходного кода.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-196">It offers both an interactive UI and a command line for conversions and gives you the ability to convert an application without having the source code.</span></span>

![Средство упаковки MSIX](./media/deploy-modern-applications/msix-packaging-tool.png)

#### <a name="package-support-framework"></a><span data-ttu-id="fa2ae-198">Платформа поддержки пакетов</span><span class="sxs-lookup"><span data-stu-id="fa2ae-198">Package Support Framework</span></span>

<span data-ttu-id="fa2ae-199">Платформа поддержки пакетов — это набор с открытым исходным кодом, который помогает применять исправления к существующему приложению Win32, если у вас нет доступа к исходному коду, чтобы он мог работать в контейнере MSIX.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-199">The Package Support Framework is an open-source kit that helps you apply fixes to your existing Win32 application when you don't have access to the source code, so that it can run in an MSIX container.</span></span> <span data-ttu-id="fa2ae-200">Платформа поддержки пакетов помогает настроить приложения в соответствии с требованиями современных сред выполнения.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-200">The Package Support Framework helps your application follow the best practices of the modern runtime environment.</span></span>

#### <a name="app-installer"></a><span data-ttu-id="fa2ae-201">Установщик приложений</span><span class="sxs-lookup"><span data-stu-id="fa2ae-201">App Installer</span></span>

<span data-ttu-id="fa2ae-202">Установщик приложений позволяет устанавливать приложения Windows 10, дважды щелкнув пакет приложения.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-202">App Installer allows Windows 10 apps to be installed by double-clicking the app package.</span></span> <span data-ttu-id="fa2ae-203">Это означает, что пользователям не нужно использовать PowerShell или другие средства разработки для развертывания приложений Windows 10.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-203">This means that users don't need to use PowerShell or other developer tools to deploy Windows 10 apps.</span></span> <span data-ttu-id="fa2ae-204">Кроме того, Установщик приложений может устанавливать приложения из Интернета, дополнительных пакетов и связанных наборов.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-204">The App Installer can also install an app from the web, optional packages, and related sets.</span></span>

## <a name="how-to-create-an-msix-package-from-an-existing-win32-desktop-application"></a><span data-ttu-id="fa2ae-205">Создание пакета MSIX из существующего классического приложения Win32</span><span class="sxs-lookup"><span data-stu-id="fa2ae-205">How to create an MSIX package from an existing Win32 desktop application</span></span>

<span data-ttu-id="fa2ae-206">Давайте проверим процесс создания пакета MSIX из существующего приложения Win32.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-206">Let's go through the process to create an MSIX package from an existing Win32 application.</span></span> <span data-ttu-id="fa2ae-207">В этом примере мы будем использовать приложение Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-207">In this example, we'll use a Windows Forms app.</span></span>

<span data-ttu-id="fa2ae-208">Чтобы начать, добавьте в решение новый проект, выберите проект упаковки приложений Windows и присвойте ему имя.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-208">To start, add a new project to your solution, select the Windows Application Packaging Project, and give it a name.</span></span>

![Добавление нового проекта упаковки приложений Windows](./media/deploy-modern-applications/add-packaging-project.png)

<span data-ttu-id="fa2ae-210">Вы увидите структуру проекта упаковки и заметите специальную папку с именем *Applications*.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-210">You'll see the structure of the packaging project and note a special folder called *Applications*.</span></span> <span data-ttu-id="fa2ae-211">В этой папке можно указать приложения, которые необходимо включить в пакет.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-211">Inside this folder, you can specify which applications you want to include in the package.</span></span> <span data-ttu-id="fa2ae-212">Может быть больше одного.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-212">It can be more than one.</span></span>

![Структура проекта упаковки](./media/deploy-modern-applications/packaging-project.png)

<span data-ttu-id="fa2ae-214">Щелкните правой кнопкой мыши папку *приложения* и выберите проект Windows Forms, который требуется упаковать из решения Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-214">Right-click on the *Applications* folder and select the Windows Forms project you want to package from the Visual Studio solution.</span></span>

![Добавление Windows Forms проекта в проект упаковки](./media/deploy-modern-applications/add-winforms-project.png)

<span data-ttu-id="fa2ae-216">На этом этапе можно скомпилировать и создать пакет, но давайте рассмотрим несколько вещей.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-216">At this point, you can compile and generate the package but let's examine a couple of things.</span></span> <span data-ttu-id="fa2ae-217">Чтобы улучшить взаимодействие с пользователем, Visual Studio может автоматически создавать все визуальные ресурсы, необходимые современным приложениям для управления значками и мозаичными ресурсами для панели плиток и меню "Пуск".</span><span class="sxs-lookup"><span data-stu-id="fa2ae-217">To have a better user experience, Visual Studio can autogenerate all the visual assets a modern application needs to handle icons and tile assets for the tile bar and start menu.</span></span> <span data-ttu-id="fa2ae-218">Откройте файл *Package. appxmanifest* для доступа к конструктору манифестов.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-218">Open the *Package.appxmanifest* file to access the Manifest Designer.</span></span> <span data-ttu-id="fa2ae-219">Затем можно создать все визуальные ресурсы из данного образа, присутствующего в проекте, просто нажав кнопку **создать**.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-219">You can then generate all the visual assets from a given image present on your project just by clicking **Create**.</span></span>

![Снимок экрана конструктора манифеста в Visual Studio](./media/deploy-modern-applications/manifest-designer.png)

<span data-ttu-id="fa2ae-221">Если открыть код для файла *Package. appxmanifest* , можно увидеть несколько интересных вещей.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-221">If you open the code for the *Package.appxmanifest* file, you can see a couple of interesting things.</span></span>

<span data-ttu-id="fa2ae-222">Непосредственно под `<Package>` `<Identity>` узлом находится узел.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-222">Right under `<Package>`, there's an `<Identity>` node.</span></span> <span data-ttu-id="fa2ae-223">Именно здесь упакованное приложение будет получать удостоверение, управляемое операционной системой.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-223">This is where your packaged application is going to get its identity, which will be managed by the OS.</span></span>

![Узел удостоверений](./media/deploy-modern-applications/identity-node.png)

<span data-ttu-id="fa2ae-225">В `<Capabilities>` узле можно найти все требования, необходимые приложению, обращая особое внимание на `<rescap:Capability Name="runFullTrust" \>` , который сообщает операционной системе запустить приложение в режиме полного доверия, поскольку это приложение Win32.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-225">In the `<Capabilities>` node, you can find all the requirements the application needs, paying special attention to the `<rescap:Capability Name="runFullTrust" \>`, which tells the OS to run the app in full trust mode since it's a Win32 application.</span></span>

![Узел capabilities](./media/deploy-modern-applications/capabilities-node.png)

<span data-ttu-id="fa2ae-227">Задайте проект упаковки в качестве запускаемого проекта для решения и выберите *выполнить*.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-227">Set the packaging project as the startup project for the solution and select *Run*.</span></span> <span data-ttu-id="fa2ae-228">Это будет следующим:</span><span class="sxs-lookup"><span data-stu-id="fa2ae-228">This is going to:</span></span>

- <span data-ttu-id="fa2ae-229">Скомпилируйте приложение Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-229">Compile the Windows Forms application.</span></span>
- <span data-ttu-id="fa2ae-230">Создание пакета MSIX из результатов сборки.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-230">Create an MSIX package out of the build results.</span></span>
- <span data-ttu-id="fa2ae-231">Разверните пакеты.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-231">Deploy the packages.</span></span>
- <span data-ttu-id="fa2ae-232">Установите его локально на компьютере разработки.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-232">Install it locally on the development machine.</span></span>
- <span data-ttu-id="fa2ae-233">запуск приложения;</span><span class="sxs-lookup"><span data-stu-id="fa2ae-233">Launch the app.</span></span>

![Установленное приложение](./media/deploy-modern-applications/our-installed-application.png)

<span data-ttu-id="fa2ae-235">Благодаря этому у вас есть чистая процедура установки и удаления, которая MSIX полностью интегрирована в Windows 10.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-235">With this, you have the clean install and uninstall experience that MSIX provides fully integrated into Windows 10.</span></span>

<span data-ttu-id="fa2ae-236">Последним этапом является развертывание пакета MSIX на другом компьютере.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-236">The final stage is about how you deploy the MSIX package to another machine.</span></span>

<span data-ttu-id="fa2ae-237">Щелкните проект упаковки правой кнопкой мыши, выберите меню **магазин** , а затем выберите параметр **создать пакеты приложений** .</span><span class="sxs-lookup"><span data-stu-id="fa2ae-237">Right-click on the packaging project, select the **Store** menu, and then select the **Create App Packages** option.</span></span>

<span data-ttu-id="fa2ae-238">Затем можно выбрать между созданием пакета для отправки в магазин или созданием пакетов для загрузки неопубликованных приложений.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-238">Then, you can choose between creating a package to upload to the store or creating packages for sideloading.</span></span> <span data-ttu-id="fa2ae-239">В большинстве модернизации сценариев вы решили **создать пакеты для загрузки неопубликованных приложений**.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-239">In most modernization scenarios, you'll choose **I want to create packages for sideloading**.</span></span>

![Настройка пакетов](./media/deploy-modern-applications/configuring-packages.png)

<span data-ttu-id="fa2ae-241">Здесь можно выбрать различные архитектуры, которые нужно использовать, так как в один и тот же пакет MSIX можно включить столько архитектур, сколько нужно.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-241">There you can select the different architectures you want to target as you can include as many as you want into the same MSIX package.</span></span>

<span data-ttu-id="fa2ae-242">Последним шагом является объявление того, где вы хотите развернуть окончательные ресурсы установки.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-242">The final step is to declare where you want to deploy the final installation assets.</span></span>

![Настройка параметров обновления](./media/deploy-modern-applications/configure-update-settings.png)

<span data-ttu-id="fa2ae-244">Вы можете выбрать использование веб-сервера с общим путем UNC на файловых серверах предприятия.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-244">You can choose to use a web server of a shared UNC path on your enterprise file servers.</span></span> <span data-ttu-id="fa2ae-245">Обратите особое внимание на параметры, чтобы указать способ обновления приложения.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-245">Pay attention to the settings to specify how you want to update your application.</span></span> <span data-ttu-id="fa2ae-246">В следующем разделе будут рассмотрены обновления приложений.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-246">We'll cover application updates in the next section.</span></span>

<span data-ttu-id="fa2ae-247">Подробное пошаговое описание см. в разделе [Упаковка приложения для настольных компьютеров из исходного кода с помощью Visual Studio](/windows/msix/desktop/desktop-to-uwp-packaging-dot-net).</span><span class="sxs-lookup"><span data-stu-id="fa2ae-247">For a detailed step-by-step guide, see [Package a desktop app from source code using Visual Studio](/windows/msix/desktop/desktop-to-uwp-packaging-dot-net).</span></span>

## <a name="auto-updates-in-msix"></a><span data-ttu-id="fa2ae-248">Автоматическое обновление в MSIX</span><span class="sxs-lookup"><span data-stu-id="fa2ae-248">Auto Updates in MSIX</span></span>

<span data-ttu-id="fa2ae-249">В магазине Windows есть отличный механизм обновления, использующий Центр обновления Windows.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-249">The Windows Store has a great updating mechanism using Windows Update.</span></span> <span data-ttu-id="fa2ae-250">В большинстве корпоративных сценариев магазин не используется для распространения настольных приложений.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-250">In most enterprise scenarios, you don't use the Store to distribute your desktop apps.</span></span> <span data-ttu-id="fa2ae-251">Поэтому вам нужен аналогичный способ настройки обновлений для приложения и их извлечения пользователям.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-251">So, you need a similar way to configure updates for your application and pull them to your users.</span></span>

<span data-ttu-id="fa2ae-252">Используя сочетание функций и пакетов MSIX для Windows 10, вы можете предоставить пользователям удобную процедуру обновления.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-252">Using a combination of Windows 10 features and MSIX packages, you can provide a great updating experience for your users.</span></span> <span data-ttu-id="fa2ae-253">На самом деле, пользователь не обязан быть техническим специалистом, но по-прежнему может воспользоваться преимуществами беспрепятственного обновления приложения.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-253">In fact, the user doesn't need to be technical at all but still benefit from a seamless application update experience.</span></span>

<span data-ttu-id="fa2ae-254">Вы можете настроить обновление для взаимодействия с пользователем двумя разными способами:</span><span class="sxs-lookup"><span data-stu-id="fa2ae-254">You can configure your updates to interact with the user in two different ways:</span></span>

- <span data-ttu-id="fa2ae-255">Обновления, запрошенные пользователем. в ОС отображается автоматически сформированный удобный пользовательский интерфейс для уведомления пользователя о том, что приложение собирается установить.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-255">User prompted updates: The OS shows some autogenerated nice UI to notify the user about the application is about to install.</span></span> <span data-ttu-id="fa2ae-256">Этот пользовательский интерфейс создается на основе свойств, указанных в файлах установки.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-256">It builds this UI based on the properties you specify on your installation files.</span></span>

- <span data-ttu-id="fa2ae-257">Автоматическое обновление в фоновом режиме.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-257">Silent updates in the background.</span></span> <span data-ttu-id="fa2ae-258">В этом случае пользователям не нужно знать об обновлениях.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-258">With this option, your users don't need to be aware of the updates.</span></span>

<span data-ttu-id="fa2ae-259">Также можно настроить время выполнения обновлений при запуске приложения или на регулярной основе.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-259">You can also configure when you want to perform updates, when the application launches or on a regular basis.</span></span> <span data-ttu-id="fa2ae-260">Благодаря функциям загрузки неопубликованных приложений эти обновления можно даже получить во время работы приложения.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-260">Thanks to the side-loading features, you can even get these updates while the application is running.</span></span>

<span data-ttu-id="fa2ae-261">При использовании этого типа развертывания создается специальный файл с именем *. appinstaller*.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-261">When you use this type of deployment, a special file is created called *.appinstaller*.</span></span> <span data-ttu-id="fa2ae-262">Этот простой файл содержит следующие разделы:</span><span class="sxs-lookup"><span data-stu-id="fa2ae-262">This simple file contains the following sections:</span></span>

- <span data-ttu-id="fa2ae-263">Расположение файла *appinstaller*</span><span class="sxs-lookup"><span data-stu-id="fa2ae-263">The location of the *.appinstaller* file</span></span>
- <span data-ttu-id="fa2ae-264">Основные свойства пакета MSIX приложения</span><span class="sxs-lookup"><span data-stu-id="fa2ae-264">The application's main MSIX package properties</span></span>
- <span data-ttu-id="fa2ae-265">Поведение при обновлении</span><span class="sxs-lookup"><span data-stu-id="fa2ae-265">The update behavior</span></span>

![файл. appinstaller](./media/deploy-modern-applications/appinstaller-file.png)

<span data-ttu-id="fa2ae-267">В сочетании с этим файлом Корпорация Майкрософт разработала специальный протокол URL-адресов для запуска процесса установки по ссылке:</span><span class="sxs-lookup"><span data-stu-id="fa2ae-267">In combination with this file, Microsoft has designed a special URL protocol to launch the installation process from a link:</span></span>

```xml
<a href="ms-appinstaller:?source=http://mywebservice.azureedge.net/MyApp.msix">Install app package </a>
```

<span data-ttu-id="fa2ae-268">Этот протокол работает во всех браузерах и запускает процесс установки с большим удобством работы пользователя в Windows 10.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-268">This protocol works on all browsers and launches the installation process with a great user experience on Windows 10.</span></span> <span data-ttu-id="fa2ae-269">Поскольку операционная система управляет процессом установки, она учитывает расположение, из которого было установлено это приложение, и отслеживает все файлы, затронутые процессом.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-269">Since the OS manages the installation process, it's aware of the location this application was installed from and tracks all the files affected by the process.</span></span>

<span data-ttu-id="fa2ae-270">MSIX создает пользовательский интерфейс для автоматической установки, отображая некоторые свойства пакета.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-270">MSIX creates a user interface for installation automatically showing some properties of the package.</span></span> <span data-ttu-id="fa2ae-271">Это обеспечивает общий процесс установки для каждого приложения.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-271">This allows for a common installation experience for every app.</span></span>

<span data-ttu-id="fa2ae-272">После создания нового пакета MSIX и его перемещения на сервер развертывания необходимо просто изменить *appinstaller* файл, чтобы отразить эти изменения, в основном это версия и путь к новому файлу MSIX.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-272">Once you've generated the new MSIX package and moved it to the deployment server, you just have to edit the *.appinstaller* file to reflect these changes, mainly the version and the path to the new MSIX file.</span></span> <span data-ttu-id="fa2ae-273">В следующий раз, когда пользователь запускает приложение, система будет обнаруживать изменения и скачивать файлы для новой версии в фоновом режиме.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-273">The next time the user launches the application, the system is going to detect the change and download the files for the new version in the background.</span></span> <span data-ttu-id="fa2ae-274">Когда это будет сделано, установка будет выполняться для нового запуска приложения прозрачно для пользователя.</span><span class="sxs-lookup"><span data-stu-id="fa2ae-274">When this is done, installation will execute on new application launch transparently for your user.</span></span>

>[!div class="step-by-step"]
>[<span data-ttu-id="fa2ae-275">Назад</span><span class="sxs-lookup"><span data-stu-id="fa2ae-275">Previous</span></span>](example-migration-core.md)
