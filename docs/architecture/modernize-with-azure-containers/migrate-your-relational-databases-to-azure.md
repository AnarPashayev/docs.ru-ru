---
title: Перенос реляционных баз данных в Azure
description: Модернизировать существующих приложений .NET с помощью Azure Cloud and Windows Containers | Перенос реляционных баз данных в Azure
ms.date: 04/28/2018
ms.openlocfilehash: efd1548c3f74fc27450f4949d71a1c4d61907ba5
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2019
ms.locfileid: "73093613"
---
# <a name="migrate-your-relational-databases-to-azure"></a>Перенос реляционных баз данных в Azure

Концепция. Azure предлагает наиболее полный перенос баз данных.

В Azure вы можете выполнить миграцию серверов баз данных непосредственно на виртуальные машины IaaS (с чистого прогноза и смены) или перенести в базу данных SQL Azure, чтобы получить дополнительные преимущества. База данных SQL Azure предлагает управляемые экземпляры и полные параметры базы данных как услуги (DBaaS). На рис. 3-1 показано несколько путей переноса реляционных баз данных, доступных в Azure.

![Пути переноса баз данных в Azure](./media/image3-1.png)

**Рис. 3-1**. Пути переноса баз данных в Azure

## <a name="when-to-migrate-to-azure-sql-database-managed-instance"></a>Время перехода на Управляемый экземпляр Базы данных SQL Azure

В большинстве случаев Управляемый экземпляр Базы данных SQL Azure будет лучшим вариантом, который следует учитывать при переносе данных в Azure. Если вы выполняете миграцию SQL Server баз данных и хотите почти 100% Assurance, что вам не потребуется перерабатывать архитектуру приложения или внести изменения в данные или код доступа к данным, выберите Управляемый экземпляр функции базы данных SQL Azure.

Управляемый экземпляр Базы данных SQL Azure является лучшим вариантом, если у вас есть дополнительные требования к функциональности уровня экземпляра SQL Server или требования к изоляции выходят за рамки функций, предоставляемых стандартной базой данных SQL Azure (одна модель базы данных). Последний из них является наиболее ориентированным выбором PaaS, но он не предоставляет те же возможности, что и традиционный SQL Server. Миграция может привести к трению.

Например, организация, которая сделала глубокие инвестиции в возможности SQL Server уровня экземпляра, может воспользоваться преимуществами перехода на SQL Управляемый экземпляр. Примерами возможностей SQL Server на уровне экземпляра являются интеграция среды CLR SQL, агент SQL Server и межбазовые запросы. Поддержка этих функций недоступна в стандартной базе данных SQL Azure (модель с одной базой данных).

Организация, которая работает в индустрии с высокой регулируемостью и должна поддерживать изоляцию в целях безопасности, также может выиграть от выбора модели SQL Управляемый экземпляр.

Управляемый экземпляр в базе данных SQL Azure имеет следующие характеристики.

- Изоляция безопасности через виртуальную сеть Azure

- Совместимость с областью приложения с помощью следующих функций:

  - агент SQL Server и SQL Server Profiler

  - Ссылки и запросы между базами данных, SQL CLR, репликация, отслеживание измененных данных (CDC) и Service Broker

- Размер базы данных до 35 ТБ

- Миграция минимального времени простоя со следующими функциями:

  - Azure Database Migration Service

  - Встроенное резервное копирование и восстановление и доставка журналов

С помощью этих возможностей при переносе существующих баз данных приложений в базу данных SQL Azure модель Управляемый экземпляр предлагает почти 100% преимуществ PaaS для SQL Server. Управляемый экземпляр — это среда SQL Server, в которой вы продолжаете использовать возможности уровня экземпляра без изменения структуры приложения.

Управляемый экземпляр, вероятно, лучше всего подходит для предприятий, на которых в настоящее время используется SQL Server, и что требует гибкости в обеспечении безопасности сети в облаке. Это похоже на наличие частной виртуальной сети для баз данных SQL.

## <a name="when-to-migrate-to-azure-sql-database"></a>Когда следует переходить в базу данных SQL Azure

Как уже упоминалось, стандартная база данных SQL Azure — это полностью управляемый реляционный DBaaS. В настоящее время база данных SQL управляет миллионами рабочих баз данных в 38 центрах обработки, по всему миру. Она поддерживает широкий спектр приложений и рабочих нагрузок, от управления простыми данными о транзакциях и позволяющих наиболее ресурсоемких, требовательных к данным, критически важным приложениям, требующим расширенной обработки данных на глобальном масштабе.

Благодаря полным возможностям PaaS, более выгодным ценам и в конечном счете, вы должны перейти на стандартную базу данных SQL Azure как "по умолчанию", если у вас есть приложение, использующее базовые стандартные базы данных SQL и не имеющее дополнительных компонентов экземпляра. SQL Server такие функции, как интеграция со средой SQL CLR, агент SQL Server и межбазовые запросы, не поддерживаются в стандартной базе данных SQL Azure. Эти функции доступны только в модели Управляемый экземпляр Базы данных SQL Azure.

База данных SQL Azure — это единственная интеллектуальная служба облачной базы данных, созданная для разработчиков приложений. Это также единственная облачная служба базы данных, которая масштабируется в режиме реального времени без простоя, чтобы помочь вам эффективно доставлять многоклиентские приложения. В конечном итоге, база данных SQL Azure оставляет вам больше времени на внедрение инноваций и ускоряет свое время на рынке. Вы можете создавать безопасные приложения и подключаться к базе данных SQL с помощью предпочтительных языков и платформ.

База данных SQL Azure предоставляет следующие преимущества:

- Встроенные аналитические средства (машинное обучение), которые изучаются и адаптируются к вашему приложению.

- Подготовка базы данных по требованию

- Диапазон предложений для всех рабочих нагрузок.

- Соглашение об уровне обслуживания 99,99% доступности, нулевое обслуживание

- Георепликация и восстановление служб для защиты данных

- Функция восстановления точки во времени базы данных SQL Azure

- Совместимость с SQL Server 2016, включая гибридные и переносные

Стандартная база данных SQL Azure ближе к PaaS, чем Управляемый экземпляр Базы данных SQL Azure. Предпочитать стандартную базу данных SQL Azure, так как вы получаете больше преимуществ из управляемого облака. Однако база данных SQL Azure имеет некоторые ключевые отличия от обычных и локальных экземпляров SQL Server. В зависимости от требований к базе данных существующего приложения, а также требований и политик предприятия, это может быть не лучшим выбором при планировании миграции в облако.

## <a name="when-to-move-your-original-rdbms-to-a-vm-iaas"></a>Когда следует переместить оригинальную СУБД в виртуальную машину (IaaS)

Одним из вариантов миграции является перемещение исходной системы управления реляционными базами данных (РСУБД), включая Oracle, IBM DB2, MySQL, PostgreSQL или SQL Server, на аналогичный сервер, работающий на виртуальной машине Azure. Если у вас есть приложения, для которых требуется самая быстрая миграция в облако с минимальными изменениями или вообще без каких-либо изменений, прямое перемещение в IaaS в облаке может быть справедливым вариантом. Это может оказаться не лучшим способом воспользоваться преимуществами всех преимуществ облака, но это, вероятно, самый быстрый исходный путь.

В настоящее время Microsoft Azure поддерживает до [331 различных серверов баз данных](https://azuremarketplace.microsoft.com/marketplace/apps/category/databases?page=1&subcategories=databases-all) , развернутых в качестве виртуальных машин IaaS. К ним относятся популярные РСУБД, такие как SQL Server, Oracle, MySQL, PostgreSQL и IBM DB2, и многие другие базы данных NoSQL, такие как MongoDB, Cassandra, DataStax, MariaDB и Cloudera.

> [!NOTE]
> Хотя перемещение RDBMS на виртуальную машину Azure может быть самым быстрым способом переноса данных в облако (поскольку это IaaS), этот подход требует значительных инвестиций в ИТ-отделы (администраторы баз данных и ИТ-специалисты). Корпоративные команды должны иметь возможность настраивать высокий уровень доступности, аварийного восстановления и исправлений для SQL Server и управлять им. Этому контексту также требуется настраиваемая среда с полными правами администратора.

## <a name="when-to-migrate-to-sql-server-as-a-vm-iaas"></a>Когда следует переходить на SQL Server в качестве виртуальной машины (IaaS)

В некоторых случаях необходимо выполнить миграцию на SQL Server как обычную виртуальную машину. Примером сценария является использование SQL Server Reporting Services. Однако в большинстве случаев Управляемый экземпляр Базы данных SQL Azure может предоставить все необходимое для миграции с локальных серверов SQL Server, поэтому миграция на SQL Serverную виртуальную машину должна быть крайне важна.

## <a name="use-azure-database-migration-service-to-migrate-your-relational-databases-to-azure"></a>Использование Azure Database Migration Service для переноса реляционных баз данных в Azure

Azure Database Migration Service можно использовать для переноса реляционных баз данных, таких как SQL Server, Oracle и MySQL, в Azure, независимо от того, является ли ваша целевая база данных SQL Azure, Управляемый экземпляр Базы данных SQL Azure или SQL Server на виртуальной машине Azure.

Автоматизированный рабочий процесс с отчетами по оценке позволяет выполнить все изменения, которые необходимо внести перед переносом базы данных. Когда все будет готово, служба перенесет базу данных источника в Azure.

При каждом изменении исходной RDBMS может потребоваться повторное тестирование. Кроме того, может потребоваться изменить предложения SQL или код объектно-реляционного сопоставления (ORM) в приложении в зависимости от результатов тестирования.

Если у вас есть какая-либо другая база данных (например, IBM DB2) и вы хотите воспользоваться подходом точности и смены, вы можете продолжать использовать эти базы данных в качестве виртуальных машин IaaS в Azure, если вы не хотите выполнять более сложную миграцию данных. Более сложная миграция данных потребует дополнительных усилий, так как миграция выполняется на другой тип базы данных с новой схемой и различными библиотеками программирования.

Дополнительные сведения о миграции баз данных с помощью Azure Database Migration Service см. в статье [Быстрое получение в облаке с помощью управляемый экземпляр базы данных SQL Azure и Azure Database Migration Service](https://channel9.msdn.com/Events/Build/2017/P4008).

## <a name="additional-resources"></a>Дополнительные ресурсы

- **Выбор облачной SQL Server параметра: база данных SQL Azure (PaaS) или SQL Server на виртуальной машине Azure (IaaS)**

    <https://docs.microsoft.com/azure/sql-database/sql-database-paas-vs-sql-server-iaas>

- **Ускорьте работу в облаке с помощью Управляемый экземпляр и Database Migration Service базы данных SQL Azure**

    <https://channel9.msdn.com/Events/Build/2017/P4008>

- **Миграция базы данных SQL Server в базу данных SQL в облаке**

    <https://docs.microsoft.com/azure/sql-database/sql-database-cloud-migrate>

- **База данных SQL Azure**

    <https://azure.microsoft.com/services/sql-database/?v=16.50>

- **SQL Server на виртуальных машинах**

    <https://azure.microsoft.com/services/virtual-machines/sql-server/>

> [!div class="step-by-step"]
> [Назад](lift-and-shift-existing-apps-azure-iaas.md)
> [Вперед](modernize-existing-apps-to-cloud-optimized/index.md) <!-- Next Chapter -->
