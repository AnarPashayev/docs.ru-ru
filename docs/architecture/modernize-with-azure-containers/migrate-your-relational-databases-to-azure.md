---
title: Миграция реляционных баз данных в Azure
description: Модернизация имеющихся приложений .NET с помощью облака Azure и контейнеров Windows | Миграция реляционных баз данных в Azure
ms.date: 04/28/2018
ms.openlocfilehash: efd1548c3f74fc27450f4949d71a1c4d61907ba5
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/14/2020
ms.locfileid: "73093613"
---
# <a name="migrate-your-relational-databases-to-azure"></a>Миграция реляционных баз данных в Azure

Концепция. Azure предлагает наиболее полную миграцию базы данных.

В Azure вы можете перенести серверы баз данных непосредственно в виртуальные машины IaaS (подход lift-and-shift) или перейти на использование Базы данных SQL Azure для получения дополнительных преимуществ. База данных SQL Azure предлагает управляемые экземпляры и полный набор возможностей базы данных как услуги (DBaaS). На рис. 3-1 показаны несколько путей миграции реляционных баз данных, доступных в Azure.

![Пути миграции базы данных в Azure](./media/image3-1.png)

**Рис. 3-1**. Пути миграции базы данных в Azure

## <a name="when-to-migrate-to-azure-sql-database-managed-instance"></a>Когда нужно переходить на использование Управляемого экземпляра Базы данных SQL Azure

В большинстве случаев Управляемый экземпляр Базы данных SQL Azure является лучшим вариантом при переносе данных в Azure. Если вы переносите базы данных SQL Server и вам нужна абсолютная уверенность в отсутствии необходимости повторного проектирования приложения или изменения данных или кода доступа к ним, выберите функцию "Управляемый экземпляр" Базы данных SQL Azure.

Управляемый экземпляр Базы данных SQL Azure — лучший вариант, если у вас есть дополнительные требования к функциональности SQL Server на уровне экземпляра или к изоляции помимо тех, которые удовлетворяются в стандартной Базе данных SQL Azure (модель отдельной базы данных). Эта модель наиболее ориентирована на PaaS, но она не предлагает те же функции, что и традиционный сервер SQL Server. Миграция может сопровождаться трудностями.

Например, организация, вложившая значительные средства в возможности SQL Server на уровне экземпляра, извлечет пользу из перехода на Управляемый экземпляр SQL. Примерами возможностей SQL Server на уровне экземпляра являются интеграция со средой выполнения (CLR) SQL, агент SQL Server и запросы между базами данных. Поддержка этих функций недоступна в стандартной Базе данных SQL Azure (модель отдельной базы данных).

Организация, которая работает в строго регулируемой отрасли и которой необходимо поддерживать изоляцию в целях безопасности, также может извлечь пользу из выбора модели Управляемого экземпляра SQL.

Управляемый экземпляр в Базе данных SQL Azure имеет следующие характеристики:

- Изоляция с помощью виртуальной сети Azure для обеспечения безопасности.

- Совместимость платформы приложения с такими функциями:

  - агент SQL Server и SQL Server Profiler;

  - ссылки и запросы между базами данных, среда CLR SQL, репликация, отслеживание измененных данных (CDC) и Service Broker.

- Размеры базы данных до 35 ТБ.

- Миграция с минимальным временем простоя с такими функциями:

  - Azure Database Migration Service

  - встроенное резервное копирование и восстановление, а также доставка журналов.

Благодаря этим возможностям при миграции имеющихся баз данных приложений в Базу данных SQL Azure модель Управляемого экземпляра предлагает почти все преимущества PaaS для SQL Server. Управляемый экземпляр — это среда SQL Server, в которой можно продолжить использовать возможности уровня экземпляра, не меняя структуру приложения.

Управляемый экземпляр, вероятно, лучше всего подходит для предприятий, которые в настоящее время используют SQL Server и которым требуется гибкость в обеспечении сетевой безопасности в облаке. По сути, вы получаете частную виртуальную сеть для баз данных SQL.

## <a name="when-to-migrate-to-azure-sql-database"></a>Когда нужно переходить на использование Базы данных SQL Azure

Как уже упоминалось, стандартная База данных SQL Azure представляет собой полностью управляемую реляционную базу данных DBaaS. В настоящее время База данных SQL управляет миллионами рабочих баз данных в 38 центрах обработки данных по всему миру. Она поддерживает широкий диапазон приложений и рабочих нагрузок: от управления простыми транзакционными данными до управления критически важными приложениями с большим объемом данных, которым требуется глобальная расширенная обработка.

Если у вас есть приложение, которое использует базовые стандартные базы данных SQL без дополнительных функций экземпляра, вам следует перейти на стандартную Базу данных SQL Azure, так как она отличается полным набором функций PaaS, доступными ценами и, наконец, более низкими затратами. Такие функции SQL Server, как интеграция со средой CLR SQL, агент SQL Server и запросы между базами данных, не поддерживаются в стандартной Базе данных SQL Azure. Эти функции доступны только в модели Управляемого экземпляра Базы данных SQL Azure.

База данных SQL Azure — это единственная интеллектуальная облачная служба баз данных, предназначенная для разработчиков приложений. Это также единственная облачная служба баз данных с динамическим масштабированием без простоев, позволяющим эффективно предоставлять мультитенантные приложения. И наконец, База данных SQL Azure предоставляет больше времени для разработки инноваций и ускоряет выход на рынок. Вы можете создавать безопасные приложения и подключаться к своей базе данных SQL, используя предпочитаемые языки и платформы.

База данных SQL Azure предлагает следующие преимущества:

- Встроенные средства искусственного интеллекта (машинное обучение), которые обучают ваше приложение и адаптируются к нему.

- Подготовка базы данных по требованию.

- Ряд предложений для всех рабочих нагрузок.

- Соглашения об уровне обслуживания с уровнем доступности 99,99 %, отсутствие обслуживания.

- Службы георепликации и восстановления для защиты данных.

- Функция восстановления Базы данных SQL Azure на определенный момент времени.

- Совместимость с SQL Server 2016, включая гибридное развертывание и миграцию.

Стандартная База данных SQL Azure предоставляет больше функций PaaS, чем Управляемый экземпляр Базы данных SQL Azure. Со стандартной Базой данных SQL Azure вы получаете больше преимуществ от использования управляемого облака. Однако База данных SQL Azure имеет некоторые ключевые отличия от обычных и локальных экземпляров SQL Server. В зависимости от требований к базе данных имеющегося приложения, а также от требований и политик предприятия, этот вариант может быть не лучшим выбором при планировании миграции в облако.

## <a name="when-to-move-your-original-rdbms-to-a-vm-iaas"></a>Когда нужно перемещать исходную реляционную СУБД в виртуальную машину (IaaS)

Один из вариантов миграции — это перенести исходную систему управления реляционной базой данных (RDBMS), включая Oracle, IBM DB2, MySQL, PostgreSQL или SQL Server, на аналогичный сервер, работающий в виртуальной машине Azure. Если у вас есть приложения, требующие быстрой миграции в облако с минимальными изменениями или вообще без изменений, вам может подойти прямой переход на IaaS в облаке. Возможно, это не лучший способ воспользоваться всеми преимуществами облака, но это самый быстрый начальный путь.

В настоящее время Microsoft Azure поддерживает до [331 различных серверов баз данных](https://azuremarketplace.microsoft.com/marketplace/apps/category/databases?page=1&subcategories=databases-all), развернутых в качестве виртуальных машин IaaS. К ним относятся популярные реляционные СУБД, такие как SQL Server, Oracle, MySQL, PostgreSQL и IBM DB2, а также многие другие базы данных NoSQL, такие как MongoDB, Cassandra, DataStax, MariaDB и Cloudera.

> [!NOTE]
> Хотя перемещение реляционной СУБД в виртуальную машину Azure может быть самым быстрым способом перемещения данных в облако (так как это IaaS), этот подход требует значительных инвестиций в ИТ-команды (администраторов баз данных и ИТ-специалистов). Корпоративным командам требуется возможность настраивать и поддерживать высокий уровень доступности, аварийное восстановление и установку исправлений для SQL Server. В этом случае также требуется настраиваемая среда со всеми правами администратора.

## <a name="when-to-migrate-to-sql-server-as-a-vm-iaas"></a>Когда нужно переходить на использование SQL Server в качестве виртуальной машины (IaaS)

В некоторых случаях вам все же нужно будет выполнить миграцию в SQL Server в виде обычной виртуальной машины. Примером такого сценария является необходимость использования служб SQL Server Reporting Services. Однако в большинстве случаев Управляемый экземпляр Базы данных SQL Azure может предоставить все необходимое для миграции с локальных серверов SQL, поэтому переход на использование виртуальной машины SQL Server следует применять как крайнюю меру.

## <a name="use-azure-database-migration-service-to-migrate-your-relational-databases-to-azure"></a>Миграция реляционных баз данных в Azure с помощью службы Azure Database Migration Service

Службу Azure Database Migration Service можно использовать для миграции реляционных баз данных, таких как SQL Server, Oracle и MySQL, в Azure, независимо от типа целевой базы данных — База данных SQL Azure, Управляемый экземпляр Базы данных SQL Azure или SQL Server в виртуальной машине Azure.

Автоматизированный рабочий процесс с отчетами об оценке поможет вам внести все необходимые изменения перед миграцией базы данных. Когда все будет готово, служба выполнит миграцию исходной базы данных в Azure.

При каждом изменении исходной реляционной СУБД может потребоваться повторное тестирование. Кроме того, в зависимости от результатов тестирования может понадобиться изменить предложения SQL или код Object-Relational Mapping (ORM) в приложении.

При наличии другой базы данных (например, IBM DB2) и выборе подхода lift-and-shift вы можете продолжить использование этих баз данных в качестве виртуальных машин IaaS в Azure, если только не планируете выполнять более сложное перемещение данных. Более сложное перемещение данных потребует дополнительных усилий, так как оно сопровождается миграцией на другой тип базы данных с новой схемой и другими библиотеками программирования.

Сведения о миграции баз данных с помощью службы Azure Database Migration Service см. [на этой странице ](https://channel9.msdn.com/Events/Build/2017/P4008).

## <a name="additional-resources"></a>Дополнительные ресурсы

- **Статья, которая поможет выбрать облачный вариант для SQL Server: База данных SQL Azure (PaaS) или SQL Server на виртуальной машине Azure (IaaS)**

    <https://docs.microsoft.com/azure/sql-database/sql-database-paas-vs-sql-server-iaas>

- **Видео об ускорении перехода на облако с помощью Управляемого экземпляра Базы данных SQL Azure и службы Database Migration Service**

    <https://channel9.msdn.com/Events/Build/2017/P4008>

- **Миграция базы данных SQL Server в базу данных SQL в облаке**

    <https://docs.microsoft.com/azure/sql-database/sql-database-cloud-migrate>

- **База данных SQL Azure**

    <https://azure.microsoft.com/services/sql-database/?v=16.50>

- **Использование SQL Server на виртуальных машинах**

    <https://azure.microsoft.com/services/virtual-machines/sql-server/>

> [!div class="step-by-step"]
> [Назад](lift-and-shift-existing-apps-azure-iaas.md)
> [Вперед](modernize-existing-apps-to-cloud-optimized/index.md) <!-- Next Chapter -->
