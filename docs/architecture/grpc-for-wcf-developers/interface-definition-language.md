---
title: Язык определения интерфейса — gRPC для разработчиков WCF
description: Введение в буферы протокола IDL.
ms.date: 12/15/2020
ms.openlocfilehash: 60cedd9b7c29bf54165b15f512c0b2159cb5dda9
ms.sourcegitcommit: 655f8a16c488567dfa696fc0b293b34d3c81e3df
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "97938082"
---
# <a name="interface-definition-language"></a><span data-ttu-id="9871a-103">Язык IDL</span><span class="sxs-lookup"><span data-stu-id="9871a-103">Interface Definition Language</span></span>

<span data-ttu-id="9871a-104">При использовании Windows Communication Foundation (WCF) службы могут предоставлять метаданные описания с помощью языка определения веб-служб (WSDL).</span><span class="sxs-lookup"><span data-stu-id="9871a-104">With Windows Communication Foundation (WCF), services can expose description metadata by using the Web Service Definition Language (WSDL).</span></span> <span data-ttu-id="9871a-105">WSDL создается динамически с помощью отражения .NET во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="9871a-105">WSDL is generated dynamically by using .NET reflection at runtime.</span></span> <span data-ttu-id="9871a-106">Разработчики могут использовать эти метаданные для создания клиентов для этих служб, потенциально на других языках, если они используют независимую от платформы привязку, например SOAP через HTTP.</span><span class="sxs-lookup"><span data-stu-id="9871a-106">Developers can use this metadata to generate clients for those services, potentially in other languages if they're using a platform-neutral binding such as SOAP over HTTP.</span></span>

<span data-ttu-id="9871a-107">gRPC использует язык описания интерфейсов (IDL) из буферов протоколов.</span><span class="sxs-lookup"><span data-stu-id="9871a-107">gRPC uses the Interface Definition Language (IDL) from Protocol Buffers.</span></span> <span data-ttu-id="9871a-108">Протокол IDL представляет собой пользовательский, независимый от платформы язык с открытой спецификацией.</span><span class="sxs-lookup"><span data-stu-id="9871a-108">The Protocol Buffers IDL is a custom, platform-neutral language with an open specification.</span></span> <span data-ttu-id="9871a-109">Разработчики создают `.proto` файлы для описания служб, а также их входные и выходные данные.</span><span class="sxs-lookup"><span data-stu-id="9871a-109">Developers author `.proto` files to describe services, along with their inputs and outputs.</span></span> <span data-ttu-id="9871a-110">Эти `.proto` файлы затем можно использовать для создания заглушек, зависящего от языка или платформы, для клиентов и серверов, что позволяет различным платформам взаимодействовать друг с другом.</span><span class="sxs-lookup"><span data-stu-id="9871a-110">These `.proto` files can then be used to generate language- or platform-specific stubs for clients and servers, allowing multiple different platforms to communicate.</span></span> <span data-ttu-id="9871a-111">Благодаря совместному использованию `.proto` файлов команды могут создавать код для использования служб других пользователей без необходимости принимать зависимость кода.</span><span class="sxs-lookup"><span data-stu-id="9871a-111">By sharing `.proto` files, teams can generate code to use each others' services, without needing to take a code dependency.</span></span>

<span data-ttu-id="9871a-112">Одним из преимуществ IDL-файла protobuf является то, что в качестве пользовательского языка он обеспечивает независимый от языка и платформы gRPC, не отдавая предпочтений какой-либо технологии другому.</span><span class="sxs-lookup"><span data-stu-id="9871a-112">One of the advantages of the Protobuf IDL is that as a custom language, it enables gRPC to be completely language and platform agnostic, not favoring any technology over another.</span></span>

<span data-ttu-id="9871a-113">Protobuf IDL также предназначен для людей как для чтения, так и для записи, тогда как язык WSDL предназначен для чтения и записи в машинном формате.</span><span class="sxs-lookup"><span data-stu-id="9871a-113">The Protobuf IDL is also designed for humans to both read and write, whereas WSDL is intended as a machine-readable/writable format.</span></span> <span data-ttu-id="9871a-114">Изменение WSDL службы WCF обычно требует изменения службы, запуска службы и повторного создания WSDL-файла с сервера.</span><span class="sxs-lookup"><span data-stu-id="9871a-114">Changing the WSDL of a WCF service typically requires changing the service, running the service, and regenerating the WSDL file from the server.</span></span> <span data-ttu-id="9871a-115">В отличие от этого, `.proto` изменения в файле просты в применении к текстовому редактору и автоматически проходят через созданный код.</span><span class="sxs-lookup"><span data-stu-id="9871a-115">By contrast, with a `.proto` file, changes are simple to apply with a text editor, and automatically flow through the generated code.</span></span> <span data-ttu-id="9871a-116">Visual Studio 2019 создает `.proto` файлы в фоновом режиме при их сохранении.</span><span class="sxs-lookup"><span data-stu-id="9871a-116">Visual Studio 2019 builds `.proto` files in the background when they are saved.</span></span> <span data-ttu-id="9871a-117">При использовании других редакторов, например VS Code, изменения применяются при построении проекта.</span><span class="sxs-lookup"><span data-stu-id="9871a-117">With other editors, such as VS Code, the changes are applied when the project is built.</span></span>

<span data-ttu-id="9871a-118">При сравнении с XML и, в частности, SOAP, сообщения, закодированные с помощью protobuf, имеют много преимуществ.</span><span class="sxs-lookup"><span data-stu-id="9871a-118">When compared with XML, and particularly SOAP, messages encoded by using Protobuf have many advantages.</span></span> <span data-ttu-id="9871a-119">Сообщения protobuf, как правило, меньше, чем те же данные, которые сериализованы как SOAP XML, а кодирование, декодирование и передача по сети могут выполняться быстрее.</span><span class="sxs-lookup"><span data-stu-id="9871a-119">Protobuf messages tend to be smaller than the same data serialized as SOAP XML, and encoding, decoding, and transmitting them over a network can be faster.</span></span>

<span data-ttu-id="9871a-120">Потенциальный недостаток protobuf по сравнению с SOAP заключается в том, что, поскольку сообщения не могут быть прочитаны людьми, для отладки содержимого сообщений требуется дополнительное средство.</span><span class="sxs-lookup"><span data-stu-id="9871a-120">The potential disadvantage of Protobuf compared to SOAP is that, because the messages aren't readable by humans, additional tooling is required to debug message content.</span></span>

> [!TIP]
> <span data-ttu-id="9871a-121">gRPC *поддерживает* серверное отражение для динамического доступа к службам без предварительно скомпилированных заглушек, хотя он предназначен для более универсальных средств, чем клиенты, ориентированные на приложения.</span><span class="sxs-lookup"><span data-stu-id="9871a-121">gRPC *does* support server reflection for dynamically accessing services without pre-compiled stubs, although it's intended more for general-purpose tools than application-specific clients.</span></span> <span data-ttu-id="9871a-122">Дополнительные сведения см. в статье [протокол отражения сервера GRPC](https://github.com/grpc/grpc/blob/master/doc/server-reflection.md) на GitHub.</span><span class="sxs-lookup"><span data-stu-id="9871a-122">For more information, see [GRPC Server Reflection Protocol](https://github.com/grpc/grpc/blob/master/doc/server-reflection.md) on GitHub.</span></span>

> [!NOTE]
> <span data-ttu-id="9871a-123">Двоичный формат WCF, используемый с привязкой NetTCP, намного ближе к protobuf с точки зрения сжатия и производительности.</span><span class="sxs-lookup"><span data-stu-id="9871a-123">WCF's binary format, used with the NetTCP binding, is much closer to Protobuf in terms of compactness and performance.</span></span> <span data-ttu-id="9871a-124">Но NetTCP можно использовать только между клиентами и серверами .NET, а protobuf — межплатформенным решением.</span><span class="sxs-lookup"><span data-stu-id="9871a-124">But NetTCP is only usable between .NET clients and servers, whereas Protobuf is a cross-platform solution.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="9871a-125">[Назад](approach.md)
>[Вперед](network-protocols.md)</span><span class="sxs-lookup"><span data-stu-id="9871a-125">[Previous](approach.md)
[Next](network-protocols.md)</span></span>
