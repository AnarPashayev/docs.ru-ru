---
title: Выбор правильного размещения в Azure
description: Узнайте, какой способ переноса в Azure подходит для вашего веб-приложения ASP.NET.
author: CESARDELATORRE
ms.author: cesardl
ms.date: 03/01/2020
ms.openlocfilehash: a8ad946b03f97272cb8685620858af6b21a372dc
ms.sourcegitcommit: e3cbf26d67f7e9286c7108a2752804050762d02d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2020
ms.locfileid: "81433352"
---
# <a name="choose-the-right-azure-hosting-option"></a><span data-ttu-id="cec08-103">Выбор правильного размещения в Azure</span><span class="sxs-lookup"><span data-stu-id="cec08-103">Choose the right Azure hosting option</span></span>

<span data-ttu-id="cec08-104">В этой статье приведены соображения и сравнения между несколькими вариантами, которые вы имеете в Azure при миграции существующих приложений .NET Framework из находного в Azure.</span><span class="sxs-lookup"><span data-stu-id="cec08-104">This article provides considerations and comparisons between the multiple choices you have in Azure when migrating your existing .NET Framework applications from on-premises to Azure.</span></span>

<span data-ttu-id="cec08-105">При переносе существующих приложений .NET Framework в Azure следует учитывать следующие важные аспекты:</span><span class="sxs-lookup"><span data-stu-id="cec08-105">The fundamental areas to consider when migrating existing .NET applications to Azure are:</span></span>

1. <span data-ttu-id="cec08-106">Варианты вычислительных сред.</span><span class="sxs-lookup"><span data-stu-id="cec08-106">Compute choices</span></span>
1. <span data-ttu-id="cec08-107">Варианты баз данных.</span><span class="sxs-lookup"><span data-stu-id="cec08-107">Database choices</span></span>
1. <span data-ttu-id="cec08-108">Сетевые подключения и безопасность</span><span class="sxs-lookup"><span data-stu-id="cec08-108">Networking and security considerations</span></span>
1. <span data-ttu-id="cec08-109">Проверка подлинности и авторизация.</span><span class="sxs-lookup"><span data-stu-id="cec08-109">Authentication and authorization considerations</span></span>

## <a name="compute-choices"></a><span data-ttu-id="cec08-110">Варианты вычислительных сред.</span><span class="sxs-lookup"><span data-stu-id="cec08-110">Compute choices</span></span>

<span data-ttu-id="cec08-111">Для переноса существующих приложений .NET Framework в Azure существует несколько вариантов.</span><span class="sxs-lookup"><span data-stu-id="cec08-111">When migrating existing .NET Framework applications to Azure you have multiple choices.</span></span> <span data-ttu-id="cec08-112">Но так как платформа .NET Framework работает только с ОС Windows, эти варианты ограничиваются службами вычислений на базе Windows.</span><span class="sxs-lookup"><span data-stu-id="cec08-112">However, since .NET Framework depends on Windows, the following choices are limited to Windows-based compute services.</span></span>

<span data-ttu-id="cec08-113">В таблице ниже приводится несколько сравнений и рекомендаций, которые помогут вам выбрать правильную вычислительную среду при переносе существующего приложения .NET.</span><span class="sxs-lookup"><span data-stu-id="cec08-113">The following table shows several comparisons and recommendations to help you choose the right compute migration path for your existing .NET application.</span></span>

|                 | <span data-ttu-id="cec08-114">Виртуальные машины Azure</span><span class="sxs-lookup"><span data-stu-id="cec08-114">Azure VMs</span></span> | <span data-ttu-id="cec08-115">Служба приложений Azure</span><span class="sxs-lookup"><span data-stu-id="cec08-115">Azure App Service</span></span> | <span data-ttu-id="cec08-116">Контейнеры Windows</span><span class="sxs-lookup"><span data-stu-id="cec08-116">Windows Containers</span></span> |
|-----------------|-----------|-------------------|--------------------|
|<span data-ttu-id="cec08-117">Назначение</span><span class="sxs-lookup"><span data-stu-id="cec08-117">When to use</span></span>      |<ul><li><span data-ttu-id="cec08-118">Приложение в значительной степени зависит от сервера и локально хранящихся MSI-файлов установки.</span><span class="sxs-lookup"><span data-stu-id="cec08-118">Application has strong dependencies on the server and local .msi installations.</span></span></li><li><span data-ttu-id="cec08-119">Вам нужен самый простой способ переноса приложения</span><span class="sxs-lookup"><span data-stu-id="cec08-119">You want the easiest application migration path</span></span></li></ul>|<span data-ttu-id="cec08-120">Приложение не зависит от сервера, это просто "чистое" веб-приложение ASP.NET (MVC, WebForm) или n-уровневое приложение (Web API, WCF) с доступом к серверу базы данных.</span><span class="sxs-lookup"><span data-stu-id="cec08-120">App has no dependencies on the server, it is just a clean ASP.NET web app (MVC, WebForm) or N-Tier app (Web API, WCf) accessing a database server.</span></span> |<ul><li><span data-ttu-id="cec08-121">Приложение зависит от сервера-источника, но эти зависимости можно включить в образ Docker Windows.</span><span class="sxs-lookup"><span data-stu-id="cec08-121">Application has dependencies on the original server but those dependencies can be included in the Docker Windows image.</span></span></li><li><span data-ttu-id="cec08-122">Хотите модернизировать приложение, чтобы оно было [облачным DevOps-Ready](../../architecture/modernize-with-azure-containers/modernize-existing-apps-to-cloud-optimized/reasons-to-modernize-existing-net-apps-to-cloud-optimized-applications.md)</span><span class="sxs-lookup"><span data-stu-id="cec08-122">Want to modernize the app so it is  [Cloud DevOps-Ready](../../architecture/modernize-with-azure-containers/modernize-existing-apps-to-cloud-optimized/reasons-to-modernize-existing-net-apps-to-cloud-optimized-applications.md)</span></span></li></ul>|
|<span data-ttu-id="cec08-123">Преимущества</span><span class="sxs-lookup"><span data-stu-id="cec08-123">Pros & benefits</span></span>  |<ul><li><span data-ttu-id="cec08-124">Самый простой способ переноса.</span><span class="sxs-lookup"><span data-stu-id="cec08-124">Easiest migration path</span></span></li><li><span data-ttu-id="cec08-125">Знакомая среда.</span><span class="sxs-lookup"><span data-stu-id="cec08-125">Familiar environment.</span></span> <span data-ttu-id="cec08-126">Среда развертывания — это VM, поэтому она похожа на полевые серверы.</span><span class="sxs-lookup"><span data-stu-id="cec08-126">Deployment environment is a VM, so it's similar to on-premises servers.</span></span></li></ul> |<span data-ttu-id="cec08-127">Текущее обслуживание PaaS — простой способ масштабирования приложений и управления ими в Azure.</span><span class="sxs-lookup"><span data-stu-id="cec08-127">Ongoing PaaS maintenance, simplest way to manage and scale apps in Azure.</span></span> |<ul><li><span data-ttu-id="cec08-128">Подготовлено к будущему, Cloud DevOps-Ready с зависимостями, включенными в контейнеры приложения.</span><span class="sxs-lookup"><span data-stu-id="cec08-128">Prepared for the future, Cloud DevOps-Ready with dependencies included in the app's containers.</span></span></li><li><span data-ttu-id="cec08-129">Почти нет необходимости рефакторинга кода .NET /C.</span><span class="sxs-lookup"><span data-stu-id="cec08-129">Almost no need to refactor .NET /C# code.</span></span></li></ul> |
|<span data-ttu-id="cec08-130">Минусы</span><span class="sxs-lookup"><span data-stu-id="cec08-130">Cons</span></span>             |<span data-ttu-id="cec08-131">Это инфраструктура как услуга (IaaS).</span><span class="sxs-lookup"><span data-stu-id="cec08-131">It is IaaS.</span></span> <span data-ttu-id="cec08-132">Обслуживание обходится дорого.</span><span class="sxs-lookup"><span data-stu-id="cec08-132">Maintenance is costly.</span></span> <span data-ttu-id="cec08-133">Вы должны управлять инфраструктурой VM о сети, нагрузка-балансер, масштабирования, IIS управления, и так далее.</span><span class="sxs-lookup"><span data-stu-id="cec08-133">You have to manage the VM's infrastructure about networking, load-balancer, scale-out, IIS management, and so on.</span></span> |<ul><li><span data-ttu-id="cec08-134">[Поддерживаются](https://appmigration.microsoft.com/assessment) не все приложения.</span><span class="sxs-lookup"><span data-stu-id="cec08-134">Not all apps are [supported](https://appmigration.microsoft.com/assessment)</span></span></li><li><span data-ttu-id="cec08-135">Некоторые приложения могут быть рефакторингии и даже немного переоснащены, поэтому они поддерживают службу приложений Azure.</span><span class="sxs-lookup"><span data-stu-id="cec08-135">Some apps might need to be refactored and even slightly rearchitected, so they support Azure App Service.</span></span></li></ul> |<ul><li><span data-ttu-id="cec08-136">Кривая обучения навыкам Докера</span><span class="sxs-lookup"><span data-stu-id="cec08-136">Docker's skills learning curve</span></span></li><li><span data-ttu-id="cec08-137">Требуется изменить некоторые параметры конфигурации приложения и код.</span><span class="sxs-lookup"><span data-stu-id="cec08-137">Some code and app configuration settings changes</span></span></li></ul>|
|<span data-ttu-id="cec08-138">Требования</span><span class="sxs-lookup"><span data-stu-id="cec08-138">Requirements</span></span> |<span data-ttu-id="cec08-139">Виртуальная машина Windows Server с такими же требованиями, как и для приложения в локальной среде.</span><span class="sxs-lookup"><span data-stu-id="cec08-139">Windows Server VM with the same requirements than the app for on-premises</span></span> | <span data-ttu-id="cec08-140">Требования службы приложений Azure, указанные в [проверках готовности.](https://github.com/Azure/App-Service-Migration-Assistant/wiki/Readiness-Checks)</span><span class="sxs-lookup"><span data-stu-id="cec08-140">Azure App Service requirements specified in [Readiness checks](https://github.com/Azure/App-Service-Migration-Assistant/wiki/Readiness-Checks).</span></span> |<ul><li>[<span data-ttu-id="cec08-141">Докер Двигатель - Предприятие для Windows Server 2019</span><span class="sxs-lookup"><span data-stu-id="cec08-141">Docker Engine - Enterprise for Windows Server 2019</span></span>](https://azuremarketplace.microsoft.com/marketplace/apps/cloud-infrastructure-services.docker-windows-2019)<br /><span data-ttu-id="cec08-142">or</span><span class="sxs-lookup"><span data-stu-id="cec08-142">or</span></span></li><li><span data-ttu-id="cec08-143">[Служба контейнеров Azure (AKS)](https://azure.microsoft.com/services/container-service/) (то есть оркестратор Kubernetes)</span><span class="sxs-lookup"><span data-stu-id="cec08-143">[Azure Container Service (AKS)](https://azure.microsoft.com/services/container-service/) (That is Kubernetes orchestrator)</span></span><br /><span data-ttu-id="cec08-144">or</span><span class="sxs-lookup"><span data-stu-id="cec08-144">or</span></span><li><span data-ttu-id="cec08-145">оркестратор [Azure Service Fabric](https://azure.microsoft.com/services/service-fabric/)</span><span class="sxs-lookup"><span data-stu-id="cec08-145">[Azure Service Fabric](https://azure.microsoft.com/services/service-fabric/) orchestrator</span></span></li></ul> |
|<span data-ttu-id="cec08-146">Как осуществить перенос</span><span class="sxs-lookup"><span data-stu-id="cec08-146">How to migrate</span></span> |<span data-ttu-id="cec08-147">См. статью [Перенос веб-приложения ASP.NET на виртуальную машину Azure](vm.md).</span><span class="sxs-lookup"><span data-stu-id="cec08-147">See [Migrate to Azure Virtual Machines](vm.md)</span></span> | <span data-ttu-id="cec08-148">См. статью [Перенос веб-приложения ASP.NET в службу приложений Azure](app-service.md).</span><span class="sxs-lookup"><span data-stu-id="cec08-148">See [Migrate Azure App Service](app-service.md)</span></span> | <span data-ttu-id="cec08-149">Следите за соображениями, сценариями и пошагами, поясненными в [существующих приложениях .NET с помощью электронной книги Azure и Windows Containers](https://aka.ms/liftandshiftwithcontainersebook)</span><span class="sxs-lookup"><span data-stu-id="cec08-149">Follow considerations, scenarios, and walkthroughs explained in the [Modernizing existing .NET apps with Azure and Windows Containers eBook](https://aka.ms/liftandshiftwithcontainersebook)</span></span> |

<span data-ttu-id="cec08-150">Следующая диаграмма диаграммы потока показывает дерево решений при планировании миграции в Azure для существующих приложений .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="cec08-150">The following flowchart diagram shows a decision tree when planning a migration to Azure for your existing .NET Framework applications.</span></span> <span data-ttu-id="cec08-151">Если это жизнеспособно, попробуйте вариант А первый, но вариант B является самым простым способом для выполнения.</span><span class="sxs-lookup"><span data-stu-id="cec08-151">If it's viable, try option A first, but option B is the easiest path to perform.</span></span>

![Блок-схема, на которой показано дерево принятия решений по размещению](../media/migration/choose/decision-tree.png)

## <a name="database-choices"></a><span data-ttu-id="cec08-153">Варианты баз данных.</span><span class="sxs-lookup"><span data-stu-id="cec08-153">Database choices</span></span>

<span data-ttu-id="cec08-154">Для переноса реляционных баз данных в Azure существует несколько вариантов.</span><span class="sxs-lookup"><span data-stu-id="cec08-154">When migrating relational databases to Azure you have multiple choices.</span></span> <span data-ttu-id="cec08-155">Чтобы выбрать правильный способ переноса для существующего приложения .NET, см. статью [Перенос базы данных SQL Server в Azure](sql.md).</span><span class="sxs-lookup"><span data-stu-id="cec08-155">See [Migrate your SQL Server database to Azure](sql.md) to help you choose the right database migration path for your existing .NET application.</span></span>

## <a name="networking-and-security-considerations"></a><span data-ttu-id="cec08-156">Сетевые подключения и безопасность</span><span class="sxs-lookup"><span data-stu-id="cec08-156">Networking and security considerations</span></span>

<span data-ttu-id="cec08-157">При развертывании приложений в общедоступном облаке, таком как Microsoft Azure, может потребоваться изолировать и защитить некоторые сети. Для этого можно [создать сети периметра](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/), например [сеть периметра между Azure и локальным центром обработки данных](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/secure-vnet-hybrid) или [сеть периметра между Azure и Интернетом](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/secure-vnet-dmz).</span><span class="sxs-lookup"><span data-stu-id="cec08-157">When deploying applications to a public cloud like Microsoft Azure, you might want to isolate and secure certain networks by [creating network DMZs](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/), such as a [DMZ between Azure and on-premises](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/secure-vnet-hybrid) or a [DMZ between Azure and the Internet](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/secure-vnet-dmz).</span></span> <span data-ttu-id="cec08-158">Вы можете реализовать сети периметра, используя [виртуальные сети Microsoft Azure](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview).</span><span class="sxs-lookup"><span data-stu-id="cec08-158">DMZs can be implemented with [Azure Virtual Network](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview).</span></span>

<span data-ttu-id="cec08-159">Виртуальные сети Azure позволяют выполнять следующие задачи:</span><span class="sxs-lookup"><span data-stu-id="cec08-159">Azure Virtual networks enable you to:</span></span>

- <span data-ttu-id="cec08-160">Создание управляемой гибридной инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="cec08-160">Build a hybrid infrastructure that you control</span></span>
- <span data-ttu-id="cec08-161">Использование собственных IP-адресов и DNS-серверов.</span><span class="sxs-lookup"><span data-stu-id="cec08-161">Bring your own IP addresses and DNS servers</span></span>
- <span data-ttu-id="cec08-162">Обеспечение безопасности подключений с помощью VPN-соединения IPsec или ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="cec08-162">Secure your connections with an IPsec VPN or ExpressRoute</span></span>
- <span data-ttu-id="cec08-163">Детальный контроль над трафиком между подсетями.</span><span class="sxs-lookup"><span data-stu-id="cec08-163">Get granular control over traffic between subnets</span></span>
- <span data-ttu-id="cec08-164">Создание сложных сетевых топологий с виртуальными модулями.</span><span class="sxs-lookup"><span data-stu-id="cec08-164">Create sophisticated network topologies using virtual appliances</span></span>
- <span data-ttu-id="cec08-165">Получите изолированную и очень безопасную среду для приложений</span><span class="sxs-lookup"><span data-stu-id="cec08-165">Get an isolated and highly secure environment for your applications</span></span>

<span data-ttu-id="cec08-166">Чтобы приступить к созданию собственной виртуальной сети, изучите [документацию по виртуальным сетям Azure](https://docs.microsoft.com/azure/virtual-network/).</span><span class="sxs-lookup"><span data-stu-id="cec08-166">To get started building your own virtual network, see the [Azure Virtual Network documentation](https://docs.microsoft.com/azure/virtual-network/).</span></span>

## <a name="authentication-and-authorization-considerations-when-migrating-to-azure"></a><span data-ttu-id="cec08-167">Проверка подлинности и авторизация при переносе в Azure</span><span class="sxs-lookup"><span data-stu-id="cec08-167">Authentication and authorization considerations when migrating to Azure</span></span>

<span data-ttu-id="cec08-168">Безопасность — самый важный вопрос для любой организации, которая переносит свои данные в облако.</span><span class="sxs-lookup"><span data-stu-id="cec08-168">A top concern of any organization moving to the cloud is security.</span></span> <span data-ttu-id="cec08-169">Большинство компаний вложили значительное количество времени, денег и инженерии в разработку и разработку модели безопасности, и важно, чтобы они могли использовать существующие инвестиции, такие как магазины идентификации и одноразовые решения.</span><span class="sxs-lookup"><span data-stu-id="cec08-169">Most companies have invested a substantial amount of time, money, and engineering into designing and developing a security model, and it's important that they're able to leverage existing investments such as identity stores and single sign-on solutions.</span></span>

<span data-ttu-id="cec08-170">Большинство существующих корпоративных приложений .NET B2E, которые выполняются в локальной среде, используют Active Directory для проверки подлинности и управления удостоверениями.</span><span class="sxs-lookup"><span data-stu-id="cec08-170">Many existing enterprise B2E .NET applications running on-premises use Active Directory for authentication and identity management.</span></span> <span data-ttu-id="cec08-171">Azure AD Connect позволяет интегрировать локальные каталоги с Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="cec08-171">Azure AD Connect enables you to integrate your on-premises directories with Azure Active Directory.</span></span> <span data-ttu-id="cec08-172">Чтобы приступить к работе, изучите статью [Интеграция локальных каталогов с Azure Active Directory](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect).</span><span class="sxs-lookup"><span data-stu-id="cec08-172">To get started, see [Integrate your on-premises directories with Azure Active Directory](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect).</span></span>

<span data-ttu-id="cec08-173">При планировании дальнейших действий с Azure Active Directory ознакомьтесь со статьей [Определение требований к идентификации для решений гибридной идентификации](https://docs.microsoft.com/azure/active-directory/active-directory-hybrid-identity-design-considerations-business-needs).</span><span class="sxs-lookup"><span data-stu-id="cec08-173">See [Identity requirements for your hybrid identity solution](https://docs.microsoft.com/azure/active-directory/active-directory-hybrid-identity-design-considerations-business-needs) for further planning related to Azure Active Directory.</span></span>

<span data-ttu-id="cec08-174">Другие варианты связаны с протоколами проверки подлинности [OAuth](https://en.wikipedia.org/wiki/OAuth) и [OpenID](https://en.wikipedia.org/wiki/OpenID), которые часто используются в клиентских приложениях.</span><span class="sxs-lookup"><span data-stu-id="cec08-174">Other authentication protocol choices are [OAuth](https://en.wikipedia.org/wiki/OAuth) and [OpenID](https://en.wikipedia.org/wiki/OpenID), which are common in consumer-facing applications.</span></span> <span data-ttu-id="cec08-175">Как правило, когда применяются автономные базы данных удостоверений, например базы данных SQL удостоверений ASP.NET с программой-оболочкой IdentityServer4, использующей OAuth, подключение к локальным базам данных или каталогам не требуется.</span><span class="sxs-lookup"><span data-stu-id="cec08-175">When using autonomous identity databases, such as an ASP.NET Identity SQL database wrapped by IdentityServer4 using OAuth, no connectivity to on-premises databases or directories is usually required.</span></span>

## <a name="next-steps"></a><span data-ttu-id="cec08-176">Следующие шаги</span><span class="sxs-lookup"><span data-stu-id="cec08-176">Next steps</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="cec08-177">Миграция веб-приложения ASP.NET в службу приложений Azure</span><span class="sxs-lookup"><span data-stu-id="cec08-177">Migrate an ASP.NET web application to Azure App Service</span></span>](app-service.md)
