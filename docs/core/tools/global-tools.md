---
title: Глобальные средства .NET Core
description: Обзор глобальных средств .NET Core и доступных для них команд .NET Core CLI.
author: KathleenDollard
ms.date: 05/29/2018
ms.custom: seodec18
ms.openlocfilehash: 9ff7e33a50eb0c5fb649b44dda6d72412a134584
ms.sourcegitcommit: 2d792961ed48f235cf413d6031576373c3050918
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/31/2019
ms.locfileid: "70202586"
---
# <a name="net-core-global-tools-overview"></a>Обзор глобальных средств .NET Core

[!INCLUDE [topic-appliesto-net-core-21plus.md](../../../includes/topic-appliesto-net-core-21plus.md)]

Глобальное средство .NET Core — это специальный пакет NuGet, который содержит консольное приложение. Глобальное средство можно установить на компьютере в расположении по умолчанию, которое включено в переменную среды PATH, или в другом расположении.

Процесс работы с глобальным средством .NET Core включает следующие этапы:

* поиск информации о средстве (обычно на веб-сайте или странице GitHub);
* проверку автора и статистики в корневой папке веб-канала (обычно NuGet.org);
* установку средства;
* вызов средства;
* обновление средства;
* удаление средства.

> [!IMPORTANT]
> Глобальные средства .NET Core устанавливаются по выбранному вами пути и выполняются в режиме полного доверия. Не устанавливайте глобальные средства .NET Core, если вы не доверяете автору.

## <a name="find-a-net-core-global-tool"></a>Как найти глобальное средство .NET Core

В интерфейсе командной строки (CLI) .NET Core пока нет функции поиска глобальных средств.

Глобальные средства .NET Core можно найти в [NuGet](https://www.nuget.org). При этом NuGet пока не позволяет выполнять поиск конкретных глобальных средств .NET Core.

Вы можете найти рекомендации средств в записях блога или в репозитории GitHub [natemcmaster/dotnet-tools](https://github.com/natemcmaster/dotnet-tools).

Кроме того, в репозитории GitHub [aspnet/DotNetTools](https://github.com/aspnet/DotNetTools/) вам доступен исходный код для глобальных средств, созданных командой разработчиков для ASP.NET.

## <a name="check-the-author-and-statistics"></a>Проверка автора и статистики

Поскольку глобальные средства .NET Core выполняются в режиме полного доверия и обычно устанавливаются по заданному вами пути, они имеют большие привилегии. Не скачивайте средства авторов, которым вы не доверяете.

Если средство размещается в NuGet, вы можете проверить автора и статистику, выполнив поиск средства.

## <a name="install-a-global-tool"></a>Установка глобального средства

Чтобы установить глобальное средство, используйте команду .NET Core CLI [dotnet tool install](dotnet-tool-install.md). В примере ниже показано, как установить глобальное средство в расположении по умолчанию:

```console
dotnet tool install -g dotnetsay
```

Если не удается установить средство, отображаются сообщения об ошибках. Убедитесь, что установлены флажки для нужных веб-каналов.

Если вам необходимо установить предварительную или конкретную версию средства, можно указать номер версии, используя следующий формат:

```console
dotnet tool install -g <package-name> --version <version-number>
```

Если установка выполнена успешно, отображается сообщение с командой, используемой для вызова средства, и установленной версией, аналогичное приведенному ниже:

```output
You can invoke the tool using the following command: dotnetsay
Tool 'dotnetsay' (version '2.0.0') was successfully installed.
```

Глобальные средства можно установить в каталоге по умолчанию или в выбранном вами расположении. Каталоги по умолчанию:

| Операционная система          | Путь                          |
|-------------|-------------------------------|
| Linux/macOS | `$HOME/.dotnet/tools`         |
| Windows     | `%USERPROFILE%\.dotnet\tools` |

Эти расположения добавляются в путь пользователя при первом запуске пакета SDK, поэтому установленные в них глобальные средства можно вызывать напрямую.

Обратите внимание, что глобальные средства входят в область конкретного пользователя, а не глобальную область компьютера. Таким образом, нельзя установить глобальное средство, которое будет доступно для всех пользователей компьютера. Средство доступно только для тех профилей пользователей, в которых оно установлено.

Глобальные средства также можно установить в конкретном каталоге. При установке в конкретном каталоге необходимо убедиться, что команда доступна, включив этот каталог в путь, вызвав команду с указанным каталогом или вызвав средство из указанного каталога.
В этом случае .NET Core CLI не добавляет это расположение автоматически в переменную среды PATH.

## <a name="use-the-tool"></a>Работа со средством

После установки средства его можно вызывать с помощью команды. Обратите внимание, что команда может отличаться от имени пакета.

Если команда — `dotnetsay`, она вызывается с помощью:

```console
dotnetsay
```

Если автор средства предусмотрел его отображение в контексте запроса `dotnet`, оно может вызываться как `dotnet <command>`, например:

```console
dotnet doc
```

Чтобы узнать, какие средства входят в установленный пакет глобального средства, можно перечислить установленные пакеты с помощью команды [dotnet tool list](dotnet-tool-list.md).

Вы также можете найти инструкции по использованию на веб-сайте средства или выполнив одну из следующих команд:

```console
<command> --help
dotnet <command> --help
```

### <a name="what-could-go-wrong"></a>Какие проблемы могут возникнуть

Глобальные средства — это [приложения, зависящие от платформы](../deploying/index.md#framework-dependent-deployments-fdd), то есть от среды выполнения .NET Core, установленной на компьютере. Если ожидаемая среда выполнения не найдена, они следуют обычным правилам наката среды выполнения .NET Core:

* Накат выполняется к последнему номеру выпуска исправления указанной основной и дополнительной версии.
* Если соответствующая среда выполнения с соответствующим номером основной и дополнительный версии отсутствует, используется следующий последний дополнительный номер версии.
* Накат не выполняется между предварительными версиями среды выполнения или между предварительной версией и версией выпуска. Таким образом, глобальные средства, созданные с помощью предварительных версий, должны быть перестроены и повторно опубликованы автором, а затем переустановлены.
* Дополнительные проблемы могут возникать с глобальными средствами, созданными в .NET Core 2.1 предварительной версии 1. Дополнительные сведения см. в статье, посвященной [известным проблемам .NET Core 2.1 предварительной версии 2](https://github.com/dotnet/core/blob/master/release-notes/2.1/Preview/2.1.0-preview2-known-issues.md).

Если приложению не удается найти подходящую среду выполнения, оно не запускается и сообщает об ошибке.

Может возникать еще одна проблема, которая связана с тем, что глобальное средство, которое было создано в более ранней предварительной версии, может не поддерживать текущие установленные среды выполнения .NET Core. Просмотреть, какие среды выполнения установлены на компьютере, можно с помощью следующей команды:

```console
dotnet --list-runtimes
```

Обратитесь к автору глобального средства и попросите его перекомпилировать и повторно опубликовать пакет средства в NuGet с обновленным номером версии. После обновления пакета в NuGet вы сможете обновить установленную копию.

Интерфейс .NET Core CLI пытается добавить расположения по умолчанию в переменную среды PATH при первом использовании. Однако есть ситуации, когда расположение не удается добавить в переменную PATH автоматически, например:

* вы задали переменную среды `DOTNET_SKIP_FIRST_TIME_EXPERIENCE`;
* в macOS пакет SDK для .NET Core установлен с помощью *TAR.GZ*-, а не *PKG*-файлов;
* в Linux необходимо изменить файл среды оболочки для настройки переменной PATH.

## <a name="other-cli-commands"></a>Другие команды интерфейса командной строки

Пакет SDK для .NET Core содержит другие команды, которые поддерживают глобальные средства .NET Core. Все команды `dotnet tool` можно использовать с одним из следующих параметров:

* `--global` или `-g` указывает, что команда применяется к глобальному средству уровня пользователя;
* `--tool-path` задает пользовательское расположение для глобальных средств.

Чтобы узнать, какие команды доступны для глобальных средств, выполните следующую команду:

```console
dotnet tool --help
```

Обновление глобального средства подразумевает его удаление и установку последней стабильной версии. Чтобы обновить глобальное средство, используйте команду [dotnet tool update](dotnet-tool-update.md):

```console
dotnet tool update -g <packagename>
```

Удалите глобальное средство с помощью команды [dotnet tool uninstall](dotnet-tool-uninstall.md):

```console
dotnet tool uninstall -g <packagename>
```

Чтобы отобразить все глобальные средства, установленные на компьютере (вместе со сведениями о версиях и командах), используйте команду [dotnet tool list](dotnet-tool-list.md):

```console
dotnet tool list -g
```
