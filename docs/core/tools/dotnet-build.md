---
title: Команда dotnet build
description: Команда dotnet build выполняет сборку проекта и всех его зависимостей.
ms.date: 10/14/2019
ms.openlocfilehash: b85ef06aa445e4708487deed9ec6bfeffeab3657
ms.sourcegitcommit: 944ddc52b7f2632f30c668815f92b378efd38eea
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/03/2019
ms.locfileid: "73454212"
---
# <a name="dotnet-build"></a>dotnet build

**Эта статья относится к ✓** SDK для .NET Core 1.x и более поздних версий

<!-- todo: uncomment when all CLI commands are reviewed
[!INCLUDE [topic-appliesto-net-core-all](../../../includes/topic-appliesto-net-core-all.md)]
-->

## <a name="name"></a>name

`dotnet build` — собирает проект и все его зависимости.

## <a name="synopsis"></a>Краткий обзор

```dotnetcli
dotnet build [<PROJECT>|<SOLUTION>] [-c|--configuration] [-f|--framework] [--force]
    [--interactive] [--no-dependencies] [--no-incremental] [--no-restore] [--nologo] 
    [-o|--output] [-r|--runtime] [-v|--verbosity] [--version-suffix]

dotnet build [-h|--help]
```

## <a name="description"></a>ОПИСАНИЕ

Команда `dotnet build` выполняет сборку проекта и его зависимостей в набор двоичных файлов. Эти двоичные файлы содержат код проекта в виде файлов на промежуточном языке (IL) с расширением *DLL*.  В зависимости от типа и параметров проекта могут быть включены другие файлы, например:

- Исполняемый файл, который может использоваться для запуска приложения, если тип проекта является исполняемым файлом, предназначенным для .NET Core 3.0 или более поздней версии.
- Файлы символов, используемые для отладки с помощью расширения *PDB*.
- Файл *.deps.json*, в котором перечислены зависимости приложения или библиотеки.
- Файл *.runtimeconfig.json*, определяющий общую среду выполнения и ее версию для приложения.
- Другие библиотеки, от которых зависит проект (через ссылки на проект или ссылки на пакеты NuGet).

Для исполняемых проектов, предназначенных для более ранних версий, чем .NET Core 3.0, зависимости библиотек от NuGet обычно НЕ копируются в выходную папку.  Они разрешаются из папки глобальных пакетов NuGet во время выполнения. Учитывая это, продукт `dotnet build` не готов к переносу на другой компьютер для выполнения. Чтобы создать версию приложения, которая может быть развернута, необходимо опубликовать ее (например, с помощью команды [dotnet publish](dotnet-publish.md)). Дополнительные сведения см. в разделе [Развертывание приложений .NET Core](../deploying/index.md).

Для исполняемых проектов, предназначенных для .NET Core 3.0 и более поздних версий, зависимости библиотек копируются в выходную папку. Это означает, что если нет никакой другой логики для публикации (например, как у веб-проектов), выходные данные сборки можно развертывать.

Для сборки нужен файл *project.assets.json*, содержащий список зависимостей приложения. Он создается при выполнении команды [`dotnet restore`](dotnet-restore.md). В отсутствие файла ресурсов инструментарий не может разрешать доступ к ссылочным сборкам, что приводит к ошибкам. При использовании пакета SDK для .NET Core 1.x необходимо было явным образом выполнять команду `dotnet restore` перед выполнением `dotnet build`. Начиная с версии SDK для .NET Core 2.0 команда `dotnet restore` выполняется автоматически при выполнении `dotnet build`. Чтобы отключить неявное восстановление при выполнении команды сборки, можно передать параметр `--no-restore`.

[!INCLUDE[dotnet restore note + options](~/includes/dotnet-restore-note-options.md)]

То, является ли проект исполняемым, определяется свойством `<OutputType>` в файле проекта. Следующий пример описывает проект, который создает исполняемый код:

```xml
<PropertyGroup>
  <OutputType>Exe</OutputType>
</PropertyGroup>
```

Чтобы создать библиотеку, опустите свойство `<OutputType>` или измените его значение на `Library`. Библиотека DLL на промежуточном языке не содержит ни одной точки входа, и ее нельзя выполнить.

### <a name="msbuild"></a>MSBuild

`dotnet build` использует MSBuild для сборки проекта, поддерживая при этом как параллельные, так и инкрементные сборки. Дополнительные сведения см. в разделе [Инкрементные сборки](/visualstudio/msbuild/incremental-builds).

Помимо своих параметров, команда `dotnet build` принимает и параметры MSBuild, например `-p` для задания свойств или `-l` для определения средства ведения журнала. Дополнительные сведения об этих параметрах см. в [справочнике по командной строке MSBuild](/visualstudio/msbuild/msbuild-command-line-reference). Либо же вы можете использовать команду [dotnet msbuild](dotnet-msbuild.md).

Выполнение `dotnet build` эквивалентно выполнению `dotnet msbuild -restore`; однако уровень детализации выходных данных по умолчанию отличается.

## <a name="arguments"></a>Аргументы

`PROJECT | SOLUTION`

Файл проекта или решения для сборки. Если файл проекта или решения не указан, MSBuild ищет текущий рабочий каталог для файла с расширением, которое заканчивается либо на *proj*, либо на *sln*, и использует этот файл.

## <a name="options"></a>Параметры

- **`-c|--configuration {Debug|Release}`**

  Определяет конфигурацию сборки. По умолчанию для большинства проектов используется `Debug`, но можно переопределить параметры конфигурации сборки в проекте.

- **`-f|--framework <FRAMEWORK>`**

  Выполняет компиляцию для конкретной [платформы](../../standard/frameworks.md). Платформа должна быть определена в [файле проекта](csproj.md).

- **`--force`**

  Принудительное разрешение всех зависимостей, даже если последнее восстановление прошло успешно. Указание этого флага дает тот же результат, что удаление файла *project.assets.json*. Доступно, начиная с пакета SDK для .NET Core 2.0.

- **`-h|--help`**

  Выводит краткую справку по команде.

- **`--interactive`**

  Позволяет команде остановиться и дождаться, пока пользователь выполнит действие или введет данные. Например, чтобы завершить проверку подлинности. Доступно, начиная с пакета SDK для .NET Core 3.0.

- **`--no-dependencies`**

  Межпроектные (P2P) ссылки игнорируются, и выполняется сборка только указанного корневого проекта.

- **`--no-incremental`**

  Помечает сборку как небезопасную для добавочной сборки. Этот флаг отключает инкрементную компиляцию и запускает принудительную полную перестройку схемы зависимостей проекта.

- **`--no-restore`**

  Во время сборки не выполняется неявное восстановление. Доступно, начиная с пакета SDK для .NET Core 2.0.

- **`--nologo`**

  Скрывает загрузочный баннер или сообщение об авторских правах. Доступно, начиная с пакета SDK для .NET Core 3.0.

- **`-o|--output <OUTPUT_DIRECTORY>`**

  Каталог, в который будут помещаться собранные двоичные файлы. Если значение не указано, путь по умолчанию — `./bin/<configuration>/<framework>/`.  Для проектов с несколькими целевыми платформами (с помощью свойства `TargetFrameworks`) необходимо также определить `--framework` при указании этого параметра.

- **`-r|--runtime <RUNTIME_IDENTIFIER>`**

  Указывает целевую среду выполнения. Список идентификаторов сред выполнения (RID) см. в [каталоге RID](../rid-catalog.md).

- **`-v|--verbosity <LEVEL>`**

  Задает уровень детализации MSBuild. Допустимые значения: `q[uiet]`, `m[inimal]`, `n[ormal]`, `d[etailed]` и `diag[nostic]`. Значение по умолчанию — `minimal`.

- **`--version-suffix <VERSION_SUFFIX>`**

  Задает значение свойства `$(VersionSuffix)`, которое используется при сборке проекта. Работает, только если свойство `$(Version)` не задано. После этого параметру `$(Version)` присваиваются значения `$(VersionPrefix)` и `$(VersionSuffix)`, разделенные дефисом.

## <a name="examples"></a>Примеры

- Сборка проекта и его зависимостей:

  ```dotnetcli
  dotnet build
  ```

- Сборка проекта и его зависимостей с помощью конфигурации Release:

  ```dotnetcli
  dotnet build --configuration Release
  ```

- Сборка проекта и его зависимостей для конкретной среды выполнения (в данном примере Ubuntu 18.04):

  ```dotnetcli
  dotnet build --runtime ubuntu.18.04-x64
  ```

- Выполните сборку проекта и используйте указанный источник пакета NuGet во время операции восстановления (пакет SDK для .NET Core 2.0 и более поздних версий).

  ```dotnetcli
  dotnet build --source c:\packages\mypackages
  ```

- Выполните сборку проекта и задайте версию 1.2.3.4 для сборки с помощью [параметра MSBuild](#msbuild) `-p`:

  ```dotnetcli
  dotnet build -p:Version=1.2.3.4
  ```
