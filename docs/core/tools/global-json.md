---
title: Обзор global.json
description: Узнайте, как использовать файл global.json, чтобы задать версию пакета SDK для .NET Core при выполнении команд .NET Core CLI.
ms.date: 12/03/2018
ms.custom: updateeachrelease, seodec18
ms.openlocfilehash: 2c1fec102993b61e1eb699e8d3508b773302f569
ms.sourcegitcommit: a4b10e1f2a8bb4e8ff902630855474a0c4f1b37a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/19/2019
ms.locfileid: "71117436"
---
# <a name="globaljson-overview"></a>Обзор global.json

[!INCLUDE [topic-appliesto-net-core-all](../../../includes/topic-appliesto-net-core-all.md)]

С помощью файла *global.json* можно определить, какая версия пакета SDK для .NET Core используется при выполнении команд .NET Core CLI. Выбор пакета SDK для .NET Core не зависит от указания целевой среды выполнения проекта. Версия пакета SDK для .NET Core указывает, какие версии средств .NET Core CLI используются. Как правило, необходимо использовать последнюю версию средств, поэтому вам нужен файл *global.json*.

Дополнительные сведения о том, как вместо этого указать среду выполнения, см. в разделе [Целевые платформы](../../standard/frameworks.md).

Пакет SDK для .NET Core ищет файл *global.json* в текущем рабочем каталоге (который не обязательно совпадает с каталогом проекта) или в одном из его родительских каталогов.

## <a name="globaljson-schema"></a>Схема файла global.json

### <a name="sdk"></a>sdk

Тип: Object

Указывает сведения о пакете SDK для .NET Core для выбора.

#### <a name="version"></a>version

Тип: Строковое

Версия пакета SDK для .NET Core для использования.

Обратите внимание, что это поле:

- Не поддерживает глобализацию, то есть необходимо указать полный номер версии.
- Не поддерживает диапазон версий.

В следующем примере показано содержимое файла *global.json*.

```json
{
  "sdk": {
    "version": "2.2.100"
  }
}
```

## <a name="globaljson-and-the-net-core-cli"></a>global.json и .NET Core CLI

Полезно знать, какие версии доступны, чтобы задать нужную в файле *global.json*. Полный список поддерживаемых доступных пакетов SDK вы найдете на странице [скачиваемых файлов .NET Core](https://dotnet.microsoft.com/download/dotnet-core). Начиная с пакета SDK для .NET Core 2.1 можно выполнить следующую команду, чтобы проверить, какие версии пакета SDK уже установлены на вашем компьютере:

```dotnetcli
dotnet --list-sdks
```

Чтобы установить дополнительные версии пакета SDK для .NET Core на компьютере, посетите страницу [скачиваемых файлов .NET Core](https://dotnet.microsoft.com/download/dotnet-core).

Вы можете создать новый файл *global.json* в текущем каталоге, выполнив команду [dotnet new](dotnet-new.md), как в следующем примере:

```dotnetcli
dotnet new globaljson --sdk-version 2.2.100
```

## <a name="matching-rules"></a>Правила сопоставления

> [!NOTE]
> Правила сопоставления регулируются apphost, который является частью среды выполнения .NET Core.
> Если у вас параллельно установлено несколько сред выполнения, используется последняя версия узла.

Начиная с .NET Core 2.0 при определении версии пакета SDK для использования применяются следующие правила:

- Если файл *global.json* не найден или в файле *global.json* не указана версия пакета SDK, используется последняя установленная версия пакета SDK. Последняя версия пакета SDK может быть обычным или предварительным выпуском — выбирается самый большой номер версии.
- Если в файле *global.json* указана версия пакета SDK:
  - Если указанная версия пакета SDK найдена на компьютере, используется именно эта версия.
  - Если указанная версия пакета SDK не найдена на компьютере, используется последняя установленная **версия исправления** этой версии пакета SDK. Последняя установленная **версия исправления** пакета SDK может быть обычным или предварительным выпуском — используется самый большой номер версии. В .NET Core 2.1 и более поздних версиях **версии исправления** ниже указанной **версии исправления** не учитываются при выборе пакета SDK.
  - Если указанная версия пакета SDK и соответствующая **версия исправления** пакета SDK не найдена, выдается ошибка.

В настоящее время версия пакета SDK состоит из следующих частей:

`[.NET Core major version].[.NET Core minor version].[xyz][-optional preview name]`

**Главный выпуск** пакета SDK для .NET Core обозначен первой цифрой (`x`) в последней части номера (`xyz`) для версии пакета SDK 2.1.100 и более поздних версий. Как правило, пакет SDK для .NET Core имеет более короткий цикл выпуска, чем .NET Core.

**Версия исправления** обозначена двумя последними цифрами (`yz`) в последней части номера (`xyz`) для версии пакета SDK 2.1.100 и более поздних версий. Например, если вы указываете `2.1.300` в качестве версии пакета SDK, ищется пакет SDK до версии `2.1.399`, но `2.1.400` не считается версией исправления для `2.1.300`.

Версии пакета SDK для .NET Core с `2.1.100` по `2.1.201` были выпущены во время перехода между схемами номеров версий и некорректно обрабатывают нотацию `xyz`. Если вы указываете эти версии в файле *global.json*, мы рекомендуем убедиться, что указанные версии установлены на целевых компьютерах.

С пакетом SDK для .NET Core 1.x, когда вы указывали версию и точное соответствие не находилось, использовалась последняя установленная версия пакета SDK. Последняя версия пакета SDK может быть обычным или предварительным выпуском — выбирается самый большой номер версии.

## <a name="troubleshooting-build-warnings"></a>Устранение неполадок с оповещениями сборки

> [!WARNING]
> Вы работаете с предварительной версией пакета SDK для .NET Core. Версию пакета SDK можно указать в файле global.json в текущем проекте. Дополнительные сведения см. на странице <https://go.microsoft.com/fwlink/?linkid=869452>

Это предупреждение означает, что проект компилируется с помощью предварительной версии пакета SDK для .NET Core, как описано в разделе [Правила сопоставления](#matching-rules). Версии пакета SDK для .NET Core имеют гарантированное качество. Но если вы не хотите использовать предварительную версию, добавьте файл *global.json* в структуру иерархии проекта, чтобы указать нужную версию пакета SDK, и с помощью `dotnet --list-sdks` убедитесь, что эта версия установлена на вашем компьютере. Чтобы использовать новую версию после ее выпуска, удалите файл *global.json* или внесите в него изменения.

> [!WARNING]
> Запускаемый проект '{startupProject}' нацелен на версию платформы '.NETCoreApp' '{targetFrameworkVersion}'. Эта версия средств командной строки .NET Entity Framework Core поддерживает только версию 2.0 или более позднюю. Сведения об использовании более старой версии средств см. в разделе <https://go.microsoft.com/fwlink/?linkid=871254>

Начиная с пакета SDK для .NET Core 2.1 (версия 2.1.300) поддерживается команда `dotnet ef`. Это предупреждение означает, что проект предназначен для EF Core 1.0 или 1.1, которые несовместимы с пакетом SDK для .NET Core 2.1 и более поздних версий. Чтобы скомпилировать проект, установите пакет SDK для .NET Core 2.0 (версия 2.1.201) или более ранней версии на своем компьютере и определите необходимую версию пакета SDK с помощью файла *global.json*. Дополнительные сведения о команде `dotnet ef` см. в разделе [Утилиты командной строки для EF Core .NET](/ef/core/miscellaneous/cli/dotnet).

## <a name="see-also"></a>См. также

- [Как разрешаются пакеты SDK проекта](/visualstudio/msbuild/how-to-use-project-sdk#how-project-sdks-are-resolved)
