---
title: Совместимость
description: Узнайте об изменениях в коде, которые могут повлиять на совместимость в .NET.
ms.date: 06/10/2019
ms.openlocfilehash: 1cf14b7ff4143367653bd1c305cc1dda6711f980
ms.sourcegitcommit: a2c8b19e813a52b91facbb5d7e3c062c7188b457
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/26/2020
ms.locfileid: "85415697"
---
# <a name="how-code-changes-can-affect-compatibility"></a><span data-ttu-id="6fbfe-103">Влияние изменений кода на совместимость</span><span class="sxs-lookup"><span data-stu-id="6fbfe-103">How code changes can affect compatibility</span></span>

<span data-ttu-id="6fbfe-104">*Совместимость* — это возможность компилировать или выполнять код в версии реализации .NET, отличной от той, в которой код был изначально разработан.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-104">*Compatibility* refers to the ability to compile or execute code on a version of a .NET implementation other than the one with which the code was originally developed.</span></span> <span data-ttu-id="6fbfe-105">[Конкретное изменение](index.md) может повлиять на совместимость шестью различными способами:</span><span class="sxs-lookup"><span data-stu-id="6fbfe-105">A [particular change](index.md) can affect compatibility in six different ways:</span></span>

- [<span data-ttu-id="6fbfe-106">изменение поведения;</span><span class="sxs-lookup"><span data-stu-id="6fbfe-106">Behavioral change</span></span>](#behavioral-change)
- [<span data-ttu-id="6fbfe-107">совместимость на уровне двоичного кода;</span><span class="sxs-lookup"><span data-stu-id="6fbfe-107">Binary compatibility</span></span>](#binary-compatibility)
- [<span data-ttu-id="6fbfe-108">совместимость исходного кода;</span><span class="sxs-lookup"><span data-stu-id="6fbfe-108">Source compatibility</span></span>](#source-compatibility)
- [<span data-ttu-id="6fbfe-109">совместимость во время разработки;</span><span class="sxs-lookup"><span data-stu-id="6fbfe-109">Design-time compatibility</span></span>](#design-time-compatibility)
- [<span data-ttu-id="6fbfe-110">обратная совместимость;</span><span class="sxs-lookup"><span data-stu-id="6fbfe-110">Backwards compatibility</span></span>](#backwards-compatibility)
- <span data-ttu-id="6fbfe-111">[прямая совместимость](#forward-compatibility) (не является целью в .NET Core).</span><span class="sxs-lookup"><span data-stu-id="6fbfe-111">[Forward compatibility](#forward-compatibility) (not a goal of .NET Core)</span></span>

## <a name="behavioral-change"></a><span data-ttu-id="6fbfe-112">Изменение поведения</span><span class="sxs-lookup"><span data-stu-id="6fbfe-112">Behavioral change</span></span>

<span data-ttu-id="6fbfe-113">Изменение поведения представляет собой изменение в поведении элемента.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-113">A behavioral change represents a change to the behavior of a member.</span></span> <span data-ttu-id="6fbfe-114">Изменение может быть видимым извне (например, метод может вызывать другое исключение) или может представлять измененную реализацию (например, изменение способа вычисления возвращаемого значения, добавление или удаление внутренних вызовов метода или даже значительное повышение производительности).</span><span class="sxs-lookup"><span data-stu-id="6fbfe-114">The change may be externally visible (for example, a method may throw a different exception), or it may represent a changed implementation (for example, a change in the way a return value is calculated, the addition or removal of internal method calls, or even a significant performance improvement).</span></span>

<span data-ttu-id="6fbfe-115">Если изменения поведения видимы извне и изменяют открытый контракт типа, их легко оценить, так как они влияют на совместимость на уровне двоичного кода.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-115">When behavioral changes are externally visible and modify a type's public contract, they are easy to evaluate since they affect binary compatibility.</span></span> <span data-ttu-id="6fbfe-116">Изменения в реализации оценить гораздо труднее. В зависимости от характера изменения и частоты и схемы использования интерфейса API влияние изменения может варьироваться от серьезного до малозначительного.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-116">Implementation changes are much more difficult to evaluate; depending on the nature of the change and the frequency and patterns of use of the API, the impact of a change can range from severe to innocuous.</span></span>

## <a name="binary-compatibility"></a><span data-ttu-id="6fbfe-117">Совместимость на уровне двоичного кода</span><span class="sxs-lookup"><span data-stu-id="6fbfe-117">Binary compatibility</span></span>

<span data-ttu-id="6fbfe-118">Под совместимостью на уровне двоичного кода понимается возможность потребителя API использовать его в более новой версии без перекомпиляции.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-118">Binary compatibility refers to the ability of a consumer of an API to use the API on a newer version without recompilation.</span></span> <span data-ttu-id="6fbfe-119">Такие изменения, как добавление методов или новой реализации интерфейса в тип, не влияют на совместимость на уровне двоичного кода.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-119">Such changes as adding methods or adding a new interface implementation to a type do not affect binary compatibility.</span></span> <span data-ttu-id="6fbfe-120">Однако удаление открытых сигнатур сборки или их изменение таким образом, что потребители больше не имеют доступа к интерфейсу, предоставляемому сборкой, влияют на совместимость на уровне двоичного кода.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-120">However, removing or altering an assembly's public signatures so that consumers can no longer access the same interface exposed by the assembly does affect binary compatibility.</span></span> <span data-ttu-id="6fbfe-121">Изменение такого рода называется *изменением, несовместимым на уровне двоичного кода*.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-121">A change of this kind is termed a *binary incompatible change*.</span></span>

## <a name="source-compatibility"></a><span data-ttu-id="6fbfe-122">Совместимость исходного кода</span><span class="sxs-lookup"><span data-stu-id="6fbfe-122">Source compatibility</span></span>

<span data-ttu-id="6fbfe-123">Под совместимостью исходного кода понимается возможность перекомпиляции существующих потребителей API без изменения исходного кода.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-123">Source compatibility refers to the ability of existing consumers of an API to recompile against a newer version without any source changes.</span></span> <span data-ttu-id="6fbfe-124">*Изменение, несовместимое на уровне исходного кода*, имеет место, когда потребителю необходимо изменить исходный код для его успешной сборки в более новой версии API.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-124">A *source incompatible change* occurs when a consumer needs to modify source code for it to build successfully against a newer version of an API.</span></span>

## <a name="design-time-compatibility"></a><span data-ttu-id="6fbfe-125">Совместимость во время разработки</span><span class="sxs-lookup"><span data-stu-id="6fbfe-125">Design-time compatibility</span></span>

<span data-ttu-id="6fbfe-126">Под совместимостью во время разработки понимается сохранение возможностей разработки в разных версиях Visual Studio и других средах разработки.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-126">Design-time compatibility refers to preserving the design-time experience across versions of Visual Studio and other design-time environments.</span></span> <span data-ttu-id="6fbfe-127">Это может касаться поведения или пользовательского интерфейса конструкторов, однако самый важный аспект совместимости во время разработки — совместимость проекта.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-127">While this can involve the behavior or the UI of designers, the most important aspect of design-time compatibility concerns project compatibility.</span></span> <span data-ttu-id="6fbfe-128">Необходимо, чтобы проект или решение можно было открывать и использовать в более новой версии среды разработки.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-128">A project or solution must be able to be opened and used on a newer version of the design-time environment.</span></span>

## <a name="backwards-compatibility"></a><span data-ttu-id="6fbfe-129">Обратная совместимость</span><span class="sxs-lookup"><span data-stu-id="6fbfe-129">Backwards compatibility</span></span>

<span data-ttu-id="6fbfe-130">Под обратной совместимостью понимается возможность выполнения существующего потребителя API в новой версии без изменения поведения.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-130">Backwards compatibility refers to the ability of an existing consumer of an API to run against a new version while behaving in the same way.</span></span> <span data-ttu-id="6fbfe-131">На обратную совместимость влияют как изменения поведения, так и изменения в совместимости на уровне двоичного кода.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-131">Both behavioral changes and changes in binary compatibility affect backwards compatibility.</span></span> <span data-ttu-id="6fbfe-132">Если потребитель не может работать с более новой версией API или ведет себя иначе при ее использовании, этот API *не обладает обратной совместимостью*.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-132">If a consumer is not able to run or behaves differently when running against the newer version of the API, the API is *backwards incompatible*.</span></span>

<span data-ttu-id="6fbfe-133">Применять изменения, влияющие на обратную совместимость, не рекомендуется, так как разработчик предполагают наличие обратной совместимости в более новых версиях API.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-133">Changes that affect backwards compatibility are discouraged, since developers expect backwards compatibility in newer versions of an API.</span></span>

## <a name="forward-compatibility"></a><span data-ttu-id="6fbfe-134">Прямая совместимость</span><span class="sxs-lookup"><span data-stu-id="6fbfe-134">Forward compatibility</span></span>

<span data-ttu-id="6fbfe-135">Под прямой совместимостью понимается возможность выполнения существующего потребителя API в предыдущей версии без изменения поведения.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-135">Forward compatibility refers to the ability of an existing consumer of an API to run against an older version while exhibiting the same behavior.</span></span> <span data-ttu-id="6fbfe-136">Если потребитель не может работать с более старой версией API или ведет себя иначе при ее использовании, этот API *не обладает прямой совместимостью*.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-136">If a consumer is not able to run or behaves differently when run against an older version of the API, the API is *forward incompatible*.</span></span>

<span data-ttu-id="6fbfe-137">Обеспечение прямой совместимости практически исключает любые изменения или дополнения в новых версиях, так как такие изменения препятствуют работе потребителя, предназначенного для более поздней версии, с более ранней версией.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-137">Maintaining forward compatibility virtually precludes any changes or additions from version to version, since those changes prevent a consumer that targets a later version from running under an earlier version.</span></span> <span data-ttu-id="6fbfe-138">Разработчики ожидают, что потребитель, использующий более новую версию API, может работать неправильно с более старой версией.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-138">Developers expect that a consumer that relies on a newer API may not function correctly against the older API.</span></span>

<span data-ttu-id="6fbfe-139">Поддержка прямой совместимости не является целью в .NET Core.</span><span class="sxs-lookup"><span data-stu-id="6fbfe-139">Maintaining forward compatibility is not a goal of .NET Core.</span></span>

## <a name="see-also"></a><span data-ttu-id="6fbfe-140">См. также</span><span class="sxs-lookup"><span data-stu-id="6fbfe-140">See also</span></span>

- [<span data-ttu-id="6fbfe-141">Оценка критических изменений в .NET Core</span><span class="sxs-lookup"><span data-stu-id="6fbfe-141">Evaluate breaking changes in .NET Core</span></span>](index.md)
