---
title: Использование библиотеки .NET Standard в Visual Studio
description: Создайте приложение .NET Core, которое вызывает члены из другой библиотеки классов, в Visual Studio 2019.
ms.date: 12/20/2019
dev_langs:
- csharp
- vb
ms.custom: vs-dotnet
ms.openlocfilehash: ec9c6f992bcd4a76e2f70018f3facca42b7b660c
ms.sourcegitcommit: 5f236cd78cf09593c8945a7d753e0850e96a0b80
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2020
ms.locfileid: "75714071"
---
# <a name="consume-a-net-standard-library-in-visual-studio"></a>Использование библиотеки .NET Standard в Visual Studio

После того, как вы создали библиотеку классов .NET Standard, протестировали ее и построили окончательную версию, следующий шаг — сделать ее доступной для вызывающих объектов. Для этого существуют два способа:

- Если вся библиотека будет использоваться в одном решении (например, она является компонентом крупного приложения), достаточно включить библиотеку в проект этого решения.
- Если же библиотеку нужно сделать общедоступной, ее следует предоставлять как пакет NuGet.

В этом руководстве вы узнаете, как:
> [!div class="checklist"]
>
> - добавить консольное приложение в свое решение, которое ссылается на проект библиотеки .NET Standard;
> - создать пакет NuGet, содержащий проект библиотеки .NET Standard.

## <a name="add-a-console-app-to-your-solution"></a>Добавление консольного приложения в решение

Ранее в [Тестирование библиотеки .NET Standard с помощью .NET Core в Visual Studio 2017](testing-library-with-visual-studio.md) вы включали модульные тесты в решение библиотеки классов. Теперь в это решение можно точно так же включить новое приложение. Например, библиотеку классов можно использовать в консольном приложении, которое будет предлагать пользователю ввести строку и определять, является ли первый символ этой строки символом верхнего регистра:

1. Откройте решение`ClassLibraryProjects`, созданное при работе со статьей [Создание библиотеки .NET Standard на C# с помощью пакета SDK для .NET Core в Visual Studio 2017](library-with-visual-studio.md).

1. Добавьте к решению новое консольное приложение .NET Core под названием "Демонстрация".

   1. Щелкните решение в **Обозревателе решений** правой кнопкой мыши и выберите **Добавить** > **Новый проект**.

   1. На странице **Добавить новый проект** введите в поле поиска **консоль**. Выберите **C#** или **Visual Basic** из списка языков, а затем — **Все платформы** из списка платформ. Выберите шаблон **Консольное приложение (.NET Core)** и щелкните **Далее**.

   1. На странице **Настроить новый проект** введите **Демонстрация** в поле **Имя проекта**. Затем нажмите **Создать**.

1. В окне **Обозреватель решений** щелкните правой кнопкой мыши проект **ShowCase** и выберите команду **Назначить запускаемым проектом**.

   ![Контекстное меню проекта с пунктом "Назначить запускаемым проектом" в Visual Studio](./media/consuming-library-with-visual-studio/set-startup-project-context-menu.png)

1. Изначально у этого проекта нет доступа к библиотеке классов. Чтобы позволить приложению вызывать методы из библиотеки классов, создайте ссылку на библиотеку классов. В окне **Обозреватель решений** щелкните правой кнопкой мыши узел **Зависимости** проекта `ShowCase` и выберите команду **Добавить ссылку**.

   ![Контекстное меню с пунктом "Добавить ссылку" в Visual Studio](./media/consuming-library-with-visual-studio/add-reference-context-menu.png)

1. В диалоговом окне **Диспетчер ссылок** выберите проект библиотеки классов **StringLibrary**, а затем нажмите кнопку **ОК**.

   ![Диалоговое окно "Диспетчер ссылок" с выбранной StringLibrary](./media/consuming-library-with-visual-studio/manage-project-references.png)

1. В окне кода замените весь код файла *Program.cs* или *Program.vb* следующим текстом:

   [!code-csharp[UsingClassLib#1](~/samples/snippets/csharp/getting_started/with_visual_studio_2017/showcase.cs)]
   [!code-vb[UsingClassLib#1](~/samples/snippets/core/tutorials/vb-library-with-visual-studio/showcase.vb)]

   В этом коде используется переменная `row` для сохранения количества строк данных, записываемых в окно консоли. Всякий раз, когда оно достигает значения 25 или превышает его, код очищает окно консоли и отображается сообщение для пользователя.

   Сама программа предлагает пользователю ввести строку. Она сообщает, начинается ли строка с символа верхнего регистра. Если пользователь нажимает клавишу ВВОД, не введя никакой строки, приложение закрывается и окно консоли и завершает свою работу.

1. При необходимости можно изменить режим на панели инструментов, чтобы скомпилировать **отладочную** версию проекта `ShowCase`. Скомпилируйте и запустите программу, нажав зеленую стрелку на кнопке **ShowCase**.

   ![Панель инструментов проекта в Visual Studio c кнопкой отладки](./media/consuming-library-with-visual-studio/visual-studio-project-toolbar.png)

Чтобы отладить и опубликовать приложение, которое использует эту библиотеку, выполните действия из статей [Отладка приложения .NET Core Hello World на C# или Visual с помощью Visual Studio 2017](debugging-with-visual-studio.md) и [Публикация приложения Hello World .NET Core в Visual Studio 2017](publishing-with-visual-studio.md).

## <a name="create-a-nuget-package"></a>Создание пакета NuGet

Библиотеку классов можно распространить и для других разработчиков, опубликовав ее в виде пакета NuGet. Visual Studio не поддерживает создание пакетов NuGet. Для его создания необходимо использовать команды .NET Core CLI:

1. Откройте окно консоли.

   Например, введите **Командная строка** в поле поиска на панели задач Windows. Выберите приложение **Командной строки** для рабочего стола или нажмите **Ввод**, если оно уже выбрано в результатах поиска.

1. Перейдите в каталог с проектом библиотеки. Этот каталог содержит исходный код и файл проекта (*StringLibrary.csproj*) или *StringLibrary.vbproj*.

1. Запустите команду [dotnet pack](../tools/dotnet-pack.md), чтобы получить пакет с расширением: *.nupkg*.

   ```dotnetcli
   dotnet pack --no-build
   ```

   > [!TIP]
   > Если каталог, содержащий *dotnet.exe*, не находится в системном пути, найдите расположение этого файла, введя `where dotnet.exe` в окне консоли.

Дополнительные сведения о создании пакетов NuGet см. в статье [How to Create a NuGet Package with Cross Platform Tools](../deploying/creating-nuget-packages.md) (Создание пакета NuGet с помощью кроссплатформенных средств).
