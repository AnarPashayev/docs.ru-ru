---
title: Создание полноценного решения .NET Core с помощью Visual Studio для Mac
description: В этой статье описывается сборка решения .NET Core, включающего многократно используемую библиотеку и модульное тестирование.
ms.date: 12/19/2019
ms.openlocfilehash: dea23da33912de849f0dcbe1e2f6fa3edb3a5e24
ms.sourcegitcommit: 9c54866bcbdc49dbb981dd55be9bbd0443837aa2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2020
ms.locfileid: "77215208"
---
# <a name="build-a-complete-net-core-solution-on-macos-using-visual-studio-for-mac"></a><span data-ttu-id="098c3-103">Создание полноценного решения .NET Core на базе macOS с помощью Visual Studio для Mac</span><span class="sxs-lookup"><span data-stu-id="098c3-103">Build a complete .NET Core solution on macOS using Visual Studio for Mac</span></span>

<span data-ttu-id="098c3-104">Visual Studio для Mac предоставляет полнофункциональную интегрированную среду для разработки приложений .NET Core.</span><span class="sxs-lookup"><span data-stu-id="098c3-104">Visual Studio for Mac provides a full-featured Integrated Development Environment (IDE) for developing .NET Core applications.</span></span> <span data-ttu-id="098c3-105">В этой статье описывается сборка решения .NET Core, включающего многократно используемую библиотеку и модульное тестирование.</span><span class="sxs-lookup"><span data-stu-id="098c3-105">This article walks you through building a .NET Core solution that includes a reusable library and unit testing.</span></span>

<span data-ttu-id="098c3-106">В этом учебнике показано, как создать приложение, которое принимает искомое слово и строку текста от пользователя, с помощью метода из библиотеки классов, подсчитывает, сколько раз искомое слово встречается в строке, и возвращает результат пользователю.</span><span class="sxs-lookup"><span data-stu-id="098c3-106">This tutorial shows you how to create an application that accepts a search word and a string of text from the user, counts the number of times the search word appears in the string using a method in a class library, and returns the result to the user.</span></span> <span data-ttu-id="098c3-107">Это решение также включает модульное тестирование для библиотеки классов, позволяющее ознакомиться с основными концепциями модульного тестирования.</span><span class="sxs-lookup"><span data-stu-id="098c3-107">The solution also includes unit testing for the class library as an introduction to unit testing concepts.</span></span> <span data-ttu-id="098c3-108">Если при изучении руководства вы хотите использовать готовый пример, скачайте [его](https://github.com/dotnet/samples/blob/master/core/tutorials/using-on-mac-vs-full-solution/WordCounter).</span><span class="sxs-lookup"><span data-stu-id="098c3-108">If you prefer to proceed through the tutorial with a complete sample, download the [sample solution](https://github.com/dotnet/samples/blob/master/core/tutorials/using-on-mac-vs-full-solution/WordCounter).</span></span> <span data-ttu-id="098c3-109">Инструкции по загрузке см. в разделе [Просмотр и скачивание примеров](../../samples-and-tutorials/index.md#viewing-and-downloading-samples).</span><span class="sxs-lookup"><span data-stu-id="098c3-109">For download instructions, see [Samples and Tutorials](../../samples-and-tutorials/index.md#viewing-and-downloading-samples).</span></span>

> [!NOTE]
> <span data-ttu-id="098c3-110">Ваш отзыв очень важен.</span><span class="sxs-lookup"><span data-stu-id="098c3-110">Your feedback is highly valued.</span></span> <span data-ttu-id="098c3-111">Вы можете отправить отзыв о Visual Studio для Mac команде разработчиков двумя способами.</span><span class="sxs-lookup"><span data-stu-id="098c3-111">There are two ways you can provide feedback to the development team on Visual Studio for Mac:</span></span>
>
> - <span data-ttu-id="098c3-112">В Visual Studio для Mac выберите пункт **Справка** > **Сообщить о проблеме** в меню или элемент **Сообщить о проблеме** на экране приветствия. При этом открывается окно для заполнения отчета об ошибках.</span><span class="sxs-lookup"><span data-stu-id="098c3-112">In Visual Studio for Mac, select **Help** > **Report a Problem** from the menu or **Report a Problem** from the Welcome screen, which opens a window for filing a bug report.</span></span> <span data-ttu-id="098c3-113">Отслеживать свои отзывы можно на портале [сообщества разработчиков](https://developercommunity.visualstudio.com/spaces/41/index.html).</span><span class="sxs-lookup"><span data-stu-id="098c3-113">You can track your feedback in the [Developer Community](https://developercommunity.visualstudio.com/spaces/41/index.html) portal.</span></span>
> - <span data-ttu-id="098c3-114">Чтобы внести предложение, выберите пункт **Справка** > **Отправить предложение** в меню или элемент **Отправить предложение** на экране приветствия. При этом откроется [веб-страница сообщества разработчиков Visual Studio для Mac](https://developercommunity.visualstudio.com/content/idea/post.html?space=41).</span><span class="sxs-lookup"><span data-stu-id="098c3-114">To make a suggestion, select **Help** > **Provide a Suggestion** from the menu or **Provide a Suggestion** from the Welcome screen, which takes you to the [Visual Studio for Mac Developer Community webpage](https://developercommunity.visualstudio.com/content/idea/post.html?space=41).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="098c3-115">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="098c3-115">Prerequisites</span></span>

- <span data-ttu-id="098c3-116">[Пакет SDK для .NET Core 3.1 или более поздней версии](https://dotnet.microsoft.com/download).</span><span class="sxs-lookup"><span data-stu-id="098c3-116">[.NET Core SDK 3.1 or later](https://dotnet.microsoft.com/download)</span></span>
- <span data-ttu-id="098c3-117">[Visual Studio 2019 для Mac](https://visualstudio.microsoft.com/vs/mac/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link).</span><span class="sxs-lookup"><span data-stu-id="098c3-117">[Visual Studio 2019 for Mac](https://visualstudio.microsoft.com/vs/mac/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link)</span></span>

<span data-ttu-id="098c3-118">Дополнительные сведения о предварительных требованиях см. в статье [Зависимости и требования для .NET Core](../install/dependencies.md?pivots=os-macos).</span><span class="sxs-lookup"><span data-stu-id="098c3-118">For more information on prerequisites, see the [.NET Core dependencies and requirements](../install/dependencies.md?pivots=os-macos).</span></span> <span data-ttu-id="098c3-119">Полный список требований к Visual Studio 2019 для Mac см. в статье [Требования к системе семейства продуктов Visual Studio 2019 для Mac](/visualstudio/productinfo/vs2019-system-requirements-mac).</span><span class="sxs-lookup"><span data-stu-id="098c3-119">For the full system requirements of Visual Studio 2019 for Mac, see [Visual Studio 2019 for Mac Product Family System Requirements](/visualstudio/productinfo/vs2019-system-requirements-mac).</span></span>

## <a name="building-a-library"></a><span data-ttu-id="098c3-120">Создание библиотеки</span><span class="sxs-lookup"><span data-stu-id="098c3-120">Building a library</span></span>

1. <span data-ttu-id="098c3-121">В окне запуска выберите **Создать проект**.</span><span class="sxs-lookup"><span data-stu-id="098c3-121">On the start window, select **New Project**.</span></span> <span data-ttu-id="098c3-122">В узле **.NET Core** диалогового окна **Создание проекта** выберите шаблон **Библиотека .NET Standard**.</span><span class="sxs-lookup"><span data-stu-id="098c3-122">In the **New Project** dialog under the **.NET Core** node, select the **.NET Standard Library** template.</span></span> <span data-ttu-id="098c3-123">Эта команда создает библиотеку .NET Standard, предназначенную для .NET Core, а также любой другой реализации .NET, поддерживающей версию 2.1 [.NET Standard](../../standard/net-standard.md).</span><span class="sxs-lookup"><span data-stu-id="098c3-123">This command creates a .NET Standard library that targets .NET Core as well as any other .NET implementation that supports version 2.1 of the [.NET Standard](../../standard/net-standard.md).</span></span> <span data-ttu-id="098c3-124">Если установлено несколько версий пакета SDK для .NET Core, можно выбрать разные версии .NET Standard для библиотеки.</span><span class="sxs-lookup"><span data-stu-id="098c3-124">If you have multiple versions of the .NET Core SDK installed, you can choose different versions of .NET Standard for your library.</span></span> <span data-ttu-id="098c3-125">Выберите .NET Standard 2.1 и нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="098c3-125">Choose ".NET Standard 2.1" and select **Next**.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-126">![Диалоговое окно "Создание проекта" Visual Studio для Mac](./media/using-on-mac-vs-full-solution/visual-studio-mac-new-project.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-126">![Visual Studio for Mac New project dialog](./media/using-on-mac-vs-full-solution/visual-studio-mac-new-project.png)</span></span>

1. <span data-ttu-id="098c3-127">Назовите проект "TextUtils" (сокращение от "Text Utilities"), а решение — "WordCounter".</span><span class="sxs-lookup"><span data-stu-id="098c3-127">Name the project "TextUtils" (a short name for "Text Utilities") and the solution "WordCounter".</span></span> <span data-ttu-id="098c3-128">Оставьте флажок **Создайте каталог проекта в каталоге решения** установленным.</span><span class="sxs-lookup"><span data-stu-id="098c3-128">Leave **Create a project directory within the solution directory** checked.</span></span> <span data-ttu-id="098c3-129">Выберите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="098c3-129">Select **Create**.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-130">![Параметры диалогового окна "Создание проекта" Visual Studio для Mac](./media/using-on-mac-vs-full-solution/visual-studio-mac-new-project-options.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-130">![Visual Studio for Mac New project dialog options](./media/using-on-mac-vs-full-solution/visual-studio-mac-new-project-options.png)</span></span>

1. <span data-ttu-id="098c3-131">На панели **Решение** разверните узел `TextUtils`, чтобы отобразить предоставленный шаблоном файл класса *Class1.cs*.</span><span class="sxs-lookup"><span data-stu-id="098c3-131">In the **Solution** pad, expand the `TextUtils` node to reveal the class file provided by the template, *Class1.cs*.</span></span> <span data-ttu-id="098c3-132">Удерживая нажатой клавишу CTRL, щелкните файл, выберите **Переименовать** в контекстном меню и переименуйте файл в *WordCount.cs*.</span><span class="sxs-lookup"><span data-stu-id="098c3-132">Ctrl-click the file, select **Rename** from the context menu, and rename the file to *WordCount.cs*.</span></span> <span data-ttu-id="098c3-133">Откройте файл и замените его содержимое на следующий код:</span><span class="sxs-lookup"><span data-stu-id="098c3-133">Open the file and replace the contents with the following code:</span></span>

   [!code-csharp[Main](../../../samples/core/tutorials/using-on-mac-vs-full-solution/WordCounter/TextUtils/WordCount.cs)]

1. <span data-ttu-id="098c3-134">Сохраните файл любым из трех способов: используйте сочетание клавиш <kbd>&#8984;</kbd>+<kbd>S</kbd>, выберите **Файл** > **Сохранить** в меню или щелкните вкладку файла, удерживая нажатой клавишу CTRL, и выберите пункт **Сохранить** в контекстном меню.</span><span class="sxs-lookup"><span data-stu-id="098c3-134">Save the file by using any of three different methods: use the keyboard shortcut <kbd>&#8984;</kbd>+<kbd>s</kbd>, select **File** > **Save** from the menu, or ctrl-click on the file's tab and select **Save** from the contextual menu.</span></span> <span data-ttu-id="098c3-135">На следующем рисунке показано окно интегрированной среды разработки:</span><span class="sxs-lookup"><span data-stu-id="098c3-135">The following image shows the IDE window:</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-136">![Окно интегрированной среды разработки Visual Studio для Mac с файлом и методом библиотеки классов](./media/using-on-mac-vs-full-solution/visual-studio-mac-editor.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-136">![Visual Studio for Mac IDE window with class library file and method](./media/using-on-mac-vs-full-solution/visual-studio-mac-editor.png)</span></span>

1. <span data-ttu-id="098c3-137">Выберите **Ошибки** в нижней части окна интегрированной среды разработки, чтобы открыть панель **Ошибки**.</span><span class="sxs-lookup"><span data-stu-id="098c3-137">Select **Errors** in the margin at the bottom of the IDE window to open the **Errors** panel.</span></span> <span data-ttu-id="098c3-138">Нажмите кнопку **Выходные данные сборки**.</span><span class="sxs-lookup"><span data-stu-id="098c3-138">Select the **Build Output** button.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-139">![Нижнее поле окна интегрированной среды разработки Visual Studio для Mac с кнопкой "Ошибки"](./media/using-on-mac-vs-full-solution/visual-studio-mac-error-button.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-139">![Bottom margin of the Visual Studio Mac IDE showing the Errors button](./media/using-on-mac-vs-full-solution/visual-studio-mac-error-button.png)</span></span>

1. <span data-ttu-id="098c3-140">Выберите в меню **Сборка** > **Собрать все**.</span><span class="sxs-lookup"><span data-stu-id="098c3-140">Select **Build** > **Build All** from the menu.</span></span>

   <span data-ttu-id="098c3-141">Выполняется сборка решения.</span><span class="sxs-lookup"><span data-stu-id="098c3-141">The solution builds.</span></span> <span data-ttu-id="098c3-142">На панели выходных данных отображается сообщение об успешной сборке.</span><span class="sxs-lookup"><span data-stu-id="098c3-142">The build output panel shows that the build is successful.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-143">![Область выходных данных Visual Studio для Mac на панели "Ошибки" c сообщением об успешной сборке](./media/using-on-mac-vs-full-solution/visual-studio-mac-build-panel.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-143">![Visual Studio Mac Build output pane of the Errors panel with Build successful message](./media/using-on-mac-vs-full-solution/visual-studio-mac-build-panel.png)</span></span>

## <a name="creating-a-test-project"></a><span data-ttu-id="098c3-144">Создание тестового проекта</span><span class="sxs-lookup"><span data-stu-id="098c3-144">Creating a test project</span></span>

<span data-ttu-id="098c3-145">Модульные тесты обеспечивают автоматическое тестирование программного обеспечения во время разработки и публикации.</span><span class="sxs-lookup"><span data-stu-id="098c3-145">Unit tests provide automated software testing during your development and publishing.</span></span> <span data-ttu-id="098c3-146">В этом учебнике используется платформа тестирования [xUnit (версии 2.4.0 или более поздней)](https://xunit.github.io/), которая автоматически устанавливается при добавлении тестового проекта xUnit в решение на следующих этапах:</span><span class="sxs-lookup"><span data-stu-id="098c3-146">The testing framework that you use in this tutorial is [xUnit (version 2.4.0 or later)](https://xunit.github.io/), which is installed automatically when the xUnit test project is added to the solution in the following steps:</span></span>

1. <span data-ttu-id="098c3-147">На боковой панели **Решение** щелкните решение `WordCounter` при нажатой клавише CTRL и выберите пункт **Добавить** > **Добавить новый проект**.</span><span class="sxs-lookup"><span data-stu-id="098c3-147">In the **Solution** sidebar, ctrl-click the `WordCounter` solution and select **Add** > **Add New Project**.</span></span>

1. <span data-ttu-id="098c3-148">В узле **.NET Core** диалогового окна **Создание проекта** выберите **Тесты**.</span><span class="sxs-lookup"><span data-stu-id="098c3-148">In the **New Project** dialog, select **Tests** from the **.NET Core** node.</span></span> <span data-ttu-id="098c3-149">Выберите **xUnit Test Project** (Тестовый проект xUnit) и нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="098c3-149">Select the **xUnit Test Project** followed by **Next**.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-150">![Создание тестового проекта xUnit в диалоговом окне "Создание проекта" Visual Studio для Mac](./media/using-on-mac-vs-full-solution/visual-studio-mac-unit-test-project.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-150">![Visual Studio Mac New Project dialog creating xUnit test project](./media/using-on-mac-vs-full-solution/visual-studio-mac-unit-test-project.png)</span></span>

1. <span data-ttu-id="098c3-151">При наличии нескольких версий пакета SDK для .NET Core необходимо выбрать версию для этого проекта.</span><span class="sxs-lookup"><span data-stu-id="098c3-151">If you have multiple versions of the .NET Core SDK, you'll need to select the version for this project.</span></span> <span data-ttu-id="098c3-152">Выберите **.NET Core 3.1**.</span><span class="sxs-lookup"><span data-stu-id="098c3-152">Select **.NET Core 3.1**.</span></span> <span data-ttu-id="098c3-153">Назовите новый проект "TestLibrary" и выберите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="098c3-153">Name the new project "TestLibrary" and select **Create**.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-154">![Диалоговое окно "Создание проекта" Visual Studio для Mac с именем проекта](./media/using-on-mac-vs-full-solution/visual-studio-mac-new-project-name.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-154">![Visual Studio Mac New Project dialog providing project name](./media/using-on-mac-vs-full-solution/visual-studio-mac-new-project-name.png)</span></span>

1. <span data-ttu-id="098c3-155">Чтобы библиотека тестов работала с `WordCount`, добавьте ссылку на проект `TextUtils`.</span><span class="sxs-lookup"><span data-stu-id="098c3-155">In order for the test library to work with the `WordCount` class, add a reference to the `TextUtils` project.</span></span> <span data-ttu-id="098c3-156">На боковой панели **Решение** щелкните элемент **Зависимости** при нажатой клавише CTRL в области **TestLibrary**.</span><span class="sxs-lookup"><span data-stu-id="098c3-156">In the **Solution** sidebar, ctrl-click **Dependencies** under **TestLibrary**.</span></span> <span data-ttu-id="098c3-157">Выберите пункт **Изменить ссылки** в контекстном меню.</span><span class="sxs-lookup"><span data-stu-id="098c3-157">Select **Edit References** from the context menu.</span></span>

1. <span data-ttu-id="098c3-158">В диалоговом окне **Изменить ссылки** выберите проект **TextUtils** на вкладке **Проекты**. Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="098c3-158">In the **Edit References** dialog, select the **TextUtils** project on the **Projects** tab. Select **OK**.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-159">![Диалоговое окно "Изменение ссылок" Visual Studio для Mac](./media/using-on-mac-vs-full-solution/visual-studio-mac-edit-references.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-159">![Visual Studio Mac Edit References dialog](./media/using-on-mac-vs-full-solution/visual-studio-mac-edit-references.png)</span></span>

1. <span data-ttu-id="098c3-160">В проекте **TestLibrary** переименуйте файл *UnitTest1.cs* в *TextUtilsTests.cs*.</span><span class="sxs-lookup"><span data-stu-id="098c3-160">In the **TestLibrary** project, rename the *UnitTest1.cs* file to *TextUtilsTests.cs*.</span></span>

1. <span data-ttu-id="098c3-161">Откройте файл и замените его содержимое на следующий код:</span><span class="sxs-lookup"><span data-stu-id="098c3-161">Open the file and replace the code with the following code:</span></span>

   ```csharp
   using Xunit;
   using TextUtils;
   using System.Diagnostics;

   namespace TestLibrary
   {
       public class TextUtils_GetWordCountShould
       {
           [Fact]
           public void IgnoreCasing()
           {
               var wordCount = WordCount.GetWordCount("Jack", "Jack jack");

               Assert.NotEqual(2, wordCount);
           }
       }
   }
   ```

   <span data-ttu-id="098c3-162">На следующем рисунке показана интегрированная среда разработки с кодом модульного тестирования.</span><span class="sxs-lookup"><span data-stu-id="098c3-162">The following image shows the IDE with the unit test code in place.</span></span> <span data-ttu-id="098c3-163">Обратите внимание на оператор `Assert.NotEqual`.</span><span class="sxs-lookup"><span data-stu-id="098c3-163">Pay attention to the `Assert.NotEqual` statement.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-164">![Начальный модульный тест Visual Studio для Mac в главном окне интегрированной среды разработки](./media/using-on-mac-vs-full-solution/visual-studio-mac-assert-test.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-164">![Visual Studio for Mac Initial unit test in the IDE main window](./media/using-on-mac-vs-full-solution/visual-studio-mac-assert-test.png)</span></span>

   <span data-ttu-id="098c3-165">Важно однократно выполнить новый тест так, чтобы он завершился со сбоем. Это позволяет проверить правильность его логики тестирования.</span><span class="sxs-lookup"><span data-stu-id="098c3-165">It's important to make a new test fail once to confirm its testing logic is correct.</span></span> <span data-ttu-id="098c3-166">Метод передает имя "Jack" (с прописной буквы) и строку, содержащую "Jack" и "jack" (с прописной и строчной буквы).</span><span class="sxs-lookup"><span data-stu-id="098c3-166">The method passes in the name "Jack" (uppercase) and a string with "Jack" and "jack" (uppercase and lowercase).</span></span> <span data-ttu-id="098c3-167">Если метод `GetWordCount` работает правильно, он возвращает два вхождения искомого слова.</span><span class="sxs-lookup"><span data-stu-id="098c3-167">If the `GetWordCount` method is working properly, it returns a count of two instances of the search word.</span></span> <span data-ttu-id="098c3-168">Чтобы намеренно не пройти этот тест, сначала реализуйте тест, утверждающий, что методом `GetWordCount` не возвращаются два вхождения искомого слова "Jack".</span><span class="sxs-lookup"><span data-stu-id="098c3-168">In order to fail this test on purpose, you first implement the test asserting that two instances of the search word "Jack" aren't returned by the `GetWordCount` method.</span></span> <span data-ttu-id="098c3-169">После этого перейдите к следующему шагу.</span><span class="sxs-lookup"><span data-stu-id="098c3-169">Continue to the next step to fail the test on purpose.</span></span>

1. <span data-ttu-id="098c3-170">Откройте панель **Модульные тесты** в правой части экрана.</span><span class="sxs-lookup"><span data-stu-id="098c3-170">Open the **Unit Tests** panel on the right side of the screen.</span></span> <span data-ttu-id="098c3-171">В меню выберите **Просмотр** > **Тесты**.</span><span class="sxs-lookup"><span data-stu-id="098c3-171">Select **View** > **Tests** from the menu.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-172">![Панель "Модульные тесты" в Visual Studio для Mac](./media/using-on-mac-vs-full-solution/visual-studio-mac-unit-test-panel.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-172">![Visual Studio for Mac Unit Tests panel](./media/using-on-mac-vs-full-solution/visual-studio-mac-unit-test-panel.png)</span></span>

1. <span data-ttu-id="098c3-173">Щелкните значок **Закрепить**, чтобы панель не закрывалась.</span><span class="sxs-lookup"><span data-stu-id="098c3-173">Click the **Dock** icon to keep the panel open.</span></span> <span data-ttu-id="098c3-174">(Выделено на следующем рисунке.)</span><span class="sxs-lookup"><span data-stu-id="098c3-174">(Highlighted in the following image.)</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-175">![Значок закрепления на панели "Модульные тесты" в Visual Studio для Mac](./media/using-on-mac-vs-full-solution/visual-studio-mac-unit-test-dock-icon.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-175">![Visual Studio for Mac Unit Tests panel dock icon](./media/using-on-mac-vs-full-solution/visual-studio-mac-unit-test-dock-icon.png)</span></span>

1. <span data-ttu-id="098c3-176">Нажмите кнопку **Запустить все**.</span><span class="sxs-lookup"><span data-stu-id="098c3-176">Click the **Run All** button.</span></span>

   <span data-ttu-id="098c3-177">Тест завершается неудачно, что соответствует правильному результату.</span><span class="sxs-lookup"><span data-stu-id="098c3-177">The test fails, which is the correct result.</span></span> <span data-ttu-id="098c3-178">Метод теста утверждает, что два вхождения `inputString` — "Jack" — не возвращаются из строки "Jack jack", предоставленной методом `GetWordCount`.</span><span class="sxs-lookup"><span data-stu-id="098c3-178">The test method asserts that two instances of the `inputString`, "Jack," aren't returned from the string "Jack jack" provided to the `GetWordCount` method.</span></span> <span data-ttu-id="098c3-179">Так как регистр слов не учитывался в методе `GetWordCount`, возвращаются два экземпляра.</span><span class="sxs-lookup"><span data-stu-id="098c3-179">Since word casing was factored out in the `GetWordCount` method, two instances are returned.</span></span> <span data-ttu-id="098c3-180">Утверждение о том, что 2 *не равно* 2, приводит к ошибке.</span><span class="sxs-lookup"><span data-stu-id="098c3-180">The assertion that 2 *is not equal to* 2 fails.</span></span> <span data-ttu-id="098c3-181">Это правильный результат, а значит логика нашего теста работает корректно.</span><span class="sxs-lookup"><span data-stu-id="098c3-181">This result is the correct outcome, and the logic of our test is good.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-182">![Отображение сбоя теста в Visual Studio для Mac](./media/using-on-mac-vs-full-solution/visual-studio-for-mac-unit-test-failure.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-182">![Visual Studio for Mac test failure display](./media/using-on-mac-vs-full-solution/visual-studio-for-mac-unit-test-failure.png)</span></span>

1. <span data-ttu-id="098c3-183">Измените метод теста `IgnoreCasing`, изменив `Assert.NotEqual` на `Assert.Equal`.</span><span class="sxs-lookup"><span data-stu-id="098c3-183">Modify the `IgnoreCasing` test method by changing `Assert.NotEqual` to `Assert.Equal`.</span></span> <span data-ttu-id="098c3-184">Чтобы сохранить файл, используйте сочетание клавиш <kbd>CTRL</kbd>+<kbd>S</kbd>, выберите в меню элементы **Файл** > **Сохранить** или щелкните вкладку файла при нажатой клавише CTRL и выберите пункт **Сохранить** в контекстном меню.</span><span class="sxs-lookup"><span data-stu-id="098c3-184">Save the file by using the keyboard shortcut <kbd>Ctrl</kbd>+<kbd>s</kbd>, **File** > **Save** from the menu, or ctrl-clicking on the file's tab and selecting **Save** from the context menu.</span></span>

   <span data-ttu-id="098c3-185">Вы ожидаете, что `searchWord` "Jack" возвратит два вхождения при передаче `inputString` "Jack jack" в `GetWordCount`.</span><span class="sxs-lookup"><span data-stu-id="098c3-185">You expect that the `searchWord` "Jack" returns two instances with `inputString` "Jack jack" passed into `GetWordCount`.</span></span> <span data-ttu-id="098c3-186">Чтобы выполнить тест снова, нажмите кнопку **Выполнить тесты** на панели **Модульные тесты** или кнопку **Перезапустить тесты** на панели **Результаты теста** в нижней части экрана.</span><span class="sxs-lookup"><span data-stu-id="098c3-186">Run the test again by clicking the **Run Tests** button in the **Unit Tests** panel or the **Rerun Tests** button in the **Test Results** panel at the bottom of the screen.</span></span> <span data-ttu-id="098c3-187">Тест проходит.</span><span class="sxs-lookup"><span data-stu-id="098c3-187">The test passes.</span></span> <span data-ttu-id="098c3-188">Существует два вхождения "Jack" в строке "Jack jack" (без учета регистра), а утверждение теста равно `true`.</span><span class="sxs-lookup"><span data-stu-id="098c3-188">There are two instances of "Jack" in the string "Jack jack" (ignoring casing), and the test assertion is `true`.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-189">![Отображение прохождения теста в Visual Studio для Mac](./media/using-on-mac-vs-full-solution/visual-studio-mac-unit-test-pass.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-189">![Visual Studio for Mac tests pass display](./media/using-on-mac-vs-full-solution/visual-studio-mac-unit-test-pass.png)</span></span>

1. <span data-ttu-id="098c3-190">Тестирование отдельных возвращаемых значений с помощью `Fact` — это всего лишь азы модульного тестирования.</span><span class="sxs-lookup"><span data-stu-id="098c3-190">Testing individual return values with a `Fact` is only the beginning of what you can do with unit testing.</span></span> <span data-ttu-id="098c3-191">Другая эффективная методика для проверки нескольких значений одновременно заключается в использовании `Theory`.</span><span class="sxs-lookup"><span data-stu-id="098c3-191">Another powerful technique allows you to test several values at once using a `Theory`.</span></span> <span data-ttu-id="098c3-192">Добавьте следующий метод в свой класс `TextUtils_GetWordCountShould`.</span><span class="sxs-lookup"><span data-stu-id="098c3-192">Add the following method to your `TextUtils_GetWordCountShould` class.</span></span> <span data-ttu-id="098c3-193">Теперь ваш класс содержит два метода:</span><span class="sxs-lookup"><span data-stu-id="098c3-193">You have two methods in the class after you add this method:</span></span>

   ```csharp
   [Theory]
   [InlineData(0, "Ting", "Does not appear in the string.")]
   [InlineData(1, "Ting", "Ting appears once.")]
   [InlineData(2, "Ting", "Ting appears twice with Ting.")]
   public void CountInstancesCorrectly(int count,
                                       string searchWord,
                                       string inputString)
   {
       Assert.NotEqual(count, WordCount.GetWordCount(searchWord,
                                                  inputString));
   }
   ```

   <span data-ttu-id="098c3-194">`CountInstancesCorrectly` проверяет, что метод `GetWordCount` ведет подсчет правильно.</span><span class="sxs-lookup"><span data-stu-id="098c3-194">The `CountInstancesCorrectly` checks that the `GetWordCount` method counts correctly.</span></span> <span data-ttu-id="098c3-195">`InlineData` предоставляет счетчик, искомое слово и входную строку для проверки.</span><span class="sxs-lookup"><span data-stu-id="098c3-195">The `InlineData` provides a count, a search word, and an input string to check.</span></span> <span data-ttu-id="098c3-196">Метод теста запускается один раз для каждой строки данных.</span><span class="sxs-lookup"><span data-stu-id="098c3-196">The test method runs once for each line of data.</span></span> <span data-ttu-id="098c3-197">Отметим еще раз, что сначала вы подтверждаете сбой с помощью `Assert.NotEqual`, даже если знаете, что счетчики в данных правильны, а значения будут соответствовать счетчикам, возвращаемым методом `GetWordCount`.</span><span class="sxs-lookup"><span data-stu-id="098c3-197">Note once again that you're asserting a failure first by using `Assert.NotEqual`, even when you know that the counts in the data are correct and that the values match the counts returned by the `GetWordCount` method.</span></span> <span data-ttu-id="098c3-198">Вначале может показаться, что такое намеренное непрохождение теста является пустой тратой времени, но подобная проверка логики тестов очень важна.</span><span class="sxs-lookup"><span data-stu-id="098c3-198">Performing the step of failing the test on purpose might seem like a waste of time at first, but checking the logic of the test by failing it first is an important check on the logic of your tests.</span></span> <span data-ttu-id="098c3-199">Если вы столкнетесь с методом теста, при котором проверка проходит успешно, хотя такого быть не должно, это означает, что вы обнаружили ошибку в логике теста.</span><span class="sxs-lookup"><span data-stu-id="098c3-199">When you come across a test method that passes when you expect it to fail, you've found a bug in the logic of the test.</span></span> <span data-ttu-id="098c3-200">Не стоит пренебрегать этим этапом при создании тестовых методов.</span><span class="sxs-lookup"><span data-stu-id="098c3-200">It's worth the effort to take this step every time you create a test method.</span></span>

1. <span data-ttu-id="098c3-201">Сохраните файл и снова запустите тесты.</span><span class="sxs-lookup"><span data-stu-id="098c3-201">Save the file and run the tests again.</span></span> <span data-ttu-id="098c3-202">Тест регистра проходит успешно, но три теста счетчиков завершаются неудачей.</span><span class="sxs-lookup"><span data-stu-id="098c3-202">The casing test passes but the three count tests fail.</span></span> <span data-ttu-id="098c3-203">Именно этого мы и ожидаем.</span><span class="sxs-lookup"><span data-stu-id="098c3-203">This outcome is exactly what you expect to happen.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-204">![Ожидаемый сбой теста в Visual Studio для Mac](./media/using-on-mac-vs-full-solution/visual-studio-mac-unit-test-failure.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-204">![Visual Studio for Mac expected test failure](./media/using-on-mac-vs-full-solution/visual-studio-mac-unit-test-failure.png)</span></span>

1. <span data-ttu-id="098c3-205">Измените метод теста `CountInstancesCorrectly`, изменив `Assert.NotEqual` на `Assert.Equal`.</span><span class="sxs-lookup"><span data-stu-id="098c3-205">Modify the `CountInstancesCorrectly` test method by changing `Assert.NotEqual` to `Assert.Equal`.</span></span> <span data-ttu-id="098c3-206">Сохраните файл.</span><span class="sxs-lookup"><span data-stu-id="098c3-206">Save the file.</span></span> <span data-ttu-id="098c3-207">Повторно запустите тесты.</span><span class="sxs-lookup"><span data-stu-id="098c3-207">Run the tests again.</span></span> <span data-ttu-id="098c3-208">Все тесты пройдены.</span><span class="sxs-lookup"><span data-stu-id="098c3-208">All tests pass.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-209">![Ожидаемое прохождение теста в Visual Studio для Mac](./media/using-on-mac-vs-full-solution/visual-studio-mac-unit-test-pass.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-209">![Visual Studio for Mac expected test passes](./media/using-on-mac-vs-full-solution/visual-studio-mac-unit-test-pass.png)</span></span>

## <a name="adding-a-console-app"></a><span data-ttu-id="098c3-210">Добавление консольного приложения</span><span class="sxs-lookup"><span data-stu-id="098c3-210">Adding a console app</span></span>

1. <span data-ttu-id="098c3-211">На боковой панели **Решение** щелкните решение `WordCounter` при нажатой клавише CTRL.</span><span class="sxs-lookup"><span data-stu-id="098c3-211">In the **Solution** sidebar, ctrl-click the `WordCounter` solution.</span></span> <span data-ttu-id="098c3-212">Добавьте новый проект **Консольное приложение**, выбрав шаблон в области **.NET Core** > **Приложение**.</span><span class="sxs-lookup"><span data-stu-id="098c3-212">Add a new **Console Application** project by selecting the template from the **.NET Core** > **App** templates.</span></span> <span data-ttu-id="098c3-213">Выберите **Далее**.</span><span class="sxs-lookup"><span data-stu-id="098c3-213">Select **Next**.</span></span> <span data-ttu-id="098c3-214">Присвойте проекту имя **WordCounterApp**.</span><span class="sxs-lookup"><span data-stu-id="098c3-214">Name the project **WordCounterApp**.</span></span> <span data-ttu-id="098c3-215">Выберите **Создать**, чтобы создать проект в решении.</span><span class="sxs-lookup"><span data-stu-id="098c3-215">Select **Create** to create the project in the solution.</span></span>

1. <span data-ttu-id="098c3-216">На боковой панели **Решения** щелкните узел **Зависимости** нового проекта **WordCounterApp** при нажатой клавише CTRL.</span><span class="sxs-lookup"><span data-stu-id="098c3-216">In the **Solutions** sidebar, ctrl-click the **Dependencies** node of the new **WordCounterApp** project.</span></span> <span data-ttu-id="098c3-217">В диалоговом окне **Изменить ссылки** установите флажок **TextUtils** и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="098c3-217">In the **Edit References** dialog, check **TextUtils** and select **OK**.</span></span>

1. <span data-ttu-id="098c3-218">Откройте файл *Program.cs*.</span><span class="sxs-lookup"><span data-stu-id="098c3-218">Open the *Program.cs* file.</span></span> <span data-ttu-id="098c3-219">Замените код следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="098c3-219">Replace the code with the following code:</span></span>

   [!code-csharp[Main](../../../samples/core/tutorials/using-on-mac-vs-full-solution/WordCounter/WordCounterApp/Program.cs)]

1. <span data-ttu-id="098c3-220">Удерживая нажатой клавишу CTRL, щелкните проект `WordCounterApp` и выберите **Запустить проект** в контекстном меню.</span><span class="sxs-lookup"><span data-stu-id="098c3-220">Ctrl-click on the `WordCounterApp` project and select **Run project** from the context menu.</span></span> <span data-ttu-id="098c3-221">При запуске приложения укажите значения для искомого слова и входной строки в окне консоли.</span><span class="sxs-lookup"><span data-stu-id="098c3-221">When you run the app, provide values for the search word and input string at the prompts in the console window.</span></span> <span data-ttu-id="098c3-222">Приложение указывает количество вхождений искомого слова в строке.</span><span class="sxs-lookup"><span data-stu-id="098c3-222">The app indicates the number of times the search word appears in the string.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-223">![Окно консоли Visual Studio для Mac с отображением запуска приложения](./media/using-on-mac-vs-full-solution/visual-studio-mac-console-window.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-223">![Visual Studio for Mac console window showing your app running](./media/using-on-mac-vs-full-solution/visual-studio-mac-console-window.png)</span></span>

1. <span data-ttu-id="098c3-224">Последней мы рассмотрим функцию отладки в Visual Studio для Mac.</span><span class="sxs-lookup"><span data-stu-id="098c3-224">The last feature to explore is debugging with Visual Studio for Mac.</span></span> <span data-ttu-id="098c3-225">Установите точку останова в операторе `Console.WriteLine`. Выберите в левом поле строки 23 и рядом со строкой кода появится красный кружок.</span><span class="sxs-lookup"><span data-stu-id="098c3-225">Set a breakpoint on the `Console.WriteLine` statement: Select in the left margin of line 23, and you see a red circle appear next to the line of code.</span></span> <span data-ttu-id="098c3-226">Можно также щелкнуть в любом месте строки кода и выбрать в меню **Выполнить** > **Перейти к следующей точке останова**.</span><span class="sxs-lookup"><span data-stu-id="098c3-226">Alternatively, select anywhere on the line of code and select **Run** > **Toggle Breakpoint** from the menu.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-227">![Установленная точка останова Visual Studio для Mac](./media/using-on-mac-vs-full-solution/visual-studio-mac-breakpoint.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-227">![Visual Studio for Mac breakpoint set](./media/using-on-mac-vs-full-solution/visual-studio-mac-breakpoint.png)</span></span>

1. <span data-ttu-id="098c3-228">Щелкните проект `WordCounterApp`, удерживая клавишу CTRL.</span><span class="sxs-lookup"><span data-stu-id="098c3-228">ctrl-click the `WordCounterApp` project.</span></span> <span data-ttu-id="098c3-229">Выберите **Начать отладку проекта** в контекстном меню.</span><span class="sxs-lookup"><span data-stu-id="098c3-229">Select **Start Debugging Project** from the context menu.</span></span> <span data-ttu-id="098c3-230">При запуске приложения введите искомое слово "cat", а также "The dog chased the cat, but the cat escaped"</span><span class="sxs-lookup"><span data-stu-id="098c3-230">When the app runs, enter the search word "cat" and "The dog chased the cat, but the cat escaped."</span></span> <span data-ttu-id="098c3-231">в качестве строки для поиска.</span><span class="sxs-lookup"><span data-stu-id="098c3-231">for the string to search.</span></span> <span data-ttu-id="098c3-232">При достижении оператора `Console.WriteLine` выполнение программы прекращается до выполнения этого оператора.</span><span class="sxs-lookup"><span data-stu-id="098c3-232">When the `Console.WriteLine` statement is reached, program execution halts before the statement is executed.</span></span> <span data-ttu-id="098c3-233">На вкладке **Локальные** вы можете увидеть значения `searchWord`, `inputString`, `wordCount` и `pluralChar`.</span><span class="sxs-lookup"><span data-stu-id="098c3-233">In the **Locals** tab, you can see the `searchWord`, `inputString`, `wordCount`, and `pluralChar` values.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-234">![Остановлено выполнение программы отладчика в Visual Studio для Mac](./media/using-on-mac-vs-full-solution/visual-studio-mac-debugger.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-234">![Visual Studio for Mac debugger program execution stopped](./media/using-on-mac-vs-full-solution/visual-studio-mac-debugger.png)</span></span>

1. <span data-ttu-id="098c3-235">В области **Интерпретация** введите "wordCount = 999;" и нажмите клавишу ВВОД.</span><span class="sxs-lookup"><span data-stu-id="098c3-235">In the **Immediate** pane, type "wordCount = 999;" and press Enter.</span></span> <span data-ttu-id="098c3-236">Эта команда присваивает переменной `wordCount` не имеющее смысла значение 999. Таким образом можно изменять значения переменных во время отладки.</span><span class="sxs-lookup"><span data-stu-id="098c3-236">This command assigns a nonsense value of 999 to the `wordCount` variable showing that you can replace variable values while debugging.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-237">![Изменяемые значения Visual Studio для Mac в окне интерпретации](./media/using-on-mac-vs-full-solution/visual-studio-mac-immediate-window.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-237">![Visual Studio for Mac changing values in the immediate window](./media/using-on-mac-vs-full-solution/visual-studio-mac-immediate-window.png)</span></span>

1. <span data-ttu-id="098c3-238">Щелкните стрелку *Продолжить* на панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="098c3-238">In the toolbar, click the *continue* arrow.</span></span> <span data-ttu-id="098c3-239">Взгляните на выходные данные в окне консоли.</span><span class="sxs-lookup"><span data-stu-id="098c3-239">Look at the output in the console window.</span></span> <span data-ttu-id="098c3-240">Там указано неправильное значение 999, заданное при отладке приложения.</span><span class="sxs-lookup"><span data-stu-id="098c3-240">It reports the incorrect value of 999 that you set when you were debugging the app.</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-241">![Кнопка "Продолжить" в Visual Studio для Mac на панели инструментов](./media/using-on-mac-vs-full-solution/visual-studio-mac-toolbar.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-241">![Visual Studio for Mac continue button in the toolbar](./media/using-on-mac-vs-full-solution/visual-studio-mac-toolbar.png)</span></span>

   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="098c3-242">![Выходные данные в окне консоли Visual Studio для Mac](./media/using-on-mac-vs-full-solution/visual-studio-mac-output.png)</span><span class="sxs-lookup"><span data-stu-id="098c3-242">![Visual Studio for Mac console window output](./media/using-on-mac-vs-full-solution/visual-studio-mac-output.png)</span></span>

<span data-ttu-id="098c3-243">Вы можете использовать тот же процесс для отладки кода с помощью проекта модульного теста.</span><span class="sxs-lookup"><span data-stu-id="098c3-243">You can use the same process to debug code using your unit test project.</span></span> <span data-ttu-id="098c3-244">Вместо запуска проекта приложения WordCount, щелкните проект **Библиотека тестов** при нажатой клавише CTRL и выберите **Начать отладку проекта** в контекстном меню.</span><span class="sxs-lookup"><span data-stu-id="098c3-244">Instead of starting the WordCount app project, ctrl-click the **Test Library** project, and select **Start Debugging Project** from the context menu.</span></span> <span data-ttu-id="098c3-245">Visual Studio для Mac запускает тестовый проект с присоединенным отладчиком.</span><span class="sxs-lookup"><span data-stu-id="098c3-245">Visual Studio for Mac starts your test project with the debugger attached.</span></span> <span data-ttu-id="098c3-246">Выполнение будет прервано в любой точке останова, добавленной в тестовый проект или базовый код библиотеки.</span><span class="sxs-lookup"><span data-stu-id="098c3-246">Execution will stop at any breakpoint you've added to the test project, or the underlying library code.</span></span>

## <a name="see-also"></a><span data-ttu-id="098c3-247">См. также</span><span class="sxs-lookup"><span data-stu-id="098c3-247">See also</span></span>

- [<span data-ttu-id="098c3-248">Заметки о выпуске Visual Studio 2019 для Mac</span><span class="sxs-lookup"><span data-stu-id="098c3-248">Visual Studio 2019 for Mac Release Notes</span></span>](/visualstudio/releasenotes/vs2019-mac-relnotes)
