---
title: Отладка приложения .NET Core Hello World в Visual Studio 2017
description: Узнайте, как выполнить отладку приложения Hello World, написанного на C# или Visual Basic, в Visual Studio 2017.
ms.date: 12/15/2017
ms.custom: vs-dotnet, seodec18
ms.openlocfilehash: 4c6a9fe46e29addf53319adf2351af3a7af05119
ms.sourcegitcommit: ca2ca60e6f5ea327f164be7ce26d9599e0f85fe4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2019
ms.locfileid: "65063059"
---
# <a name="debug-your-c-or-visual-basic-net-core-hello-world-application-using-visual-studio-2017"></a>Отладка приложения .NET Core Hello World на C# или Visual с помощью Visual Studio 2017

Изучая руководство [Создание приложения Hello World на C# с помощью .NET Core в Visual Studio 2017](with-visual-studio.md) или [Создание приложения Hello World на Visual Basic с помощью .NET Core в Visual Studio 2017](vb-with-visual-studio.md), вы создали и запустили простое консольное приложение. После создания и компиляции приложения можно приступить к тестированию. Visual Studio включает широкий набор инструментальных средств, которые можно использовать для тестирования приложений и устранения неполадок. 

## <a name="debugging-in-debug-mode"></a>Отладка в режиме отладки

В Visual Studio по умолчанию используются две конфигурации сборки — *Отладка* и *Выпуск*. Используемая конфигурация сборки отображается на панели инструментов. На следующем рисунке показана панель инструментов Visual Studio с активным режимом **отладки**.

   ![Панель инструментов Visual Studio по умолчанию с выделенным режимом отладки](./media/debugging-with-visual-studio/visual-studio-toolbar-debug.png)

Тестирование всегда следует начинать с режима отладки. В режиме отладки компилятор отключает большинство инструментов оптимизации и предоставляет более подробные сведения о процессе сборки.

## <a name="setting-a-breakpoint"></a>Задание точки останова

Запустите программу в режиме отладки и попробуйте использовать некоторые функции отладки:

# <a name="ctabcsharp"></a>[C#](#tab/csharp)
1. *Точка останова* приостанавливает выполнение приложения на инструкции, *предшествующей* той строке, в которой установлена точка останова. 

   Установите точку останова в строке `Console.WriteLine($"\nHello, {name}, on {date:d} at {date:t}!");`. Для этого щелкните в левом поле этой строки в окне редактирования кода или выберите эту строку и затем пункт меню **Отладка** > **Точка останова**. Как видно на следующем рисунке, строку с точкой останова Visual Studio обозначает подсветкой текста и красным кругом в ее левом поле.

   ![Окно приложения Visual Studio с установленной точкой останова](./media/debugging-with-visual-studio/set-breakpoint-in-editor.png)

1. Запустите программу в режиме отладки. Для этого нажмите кнопку **HelloWorld** с зеленой стрелкой на панели инструментов, нажмите клавишу F5 или выберите пункт меню **Отладка** > **Начать отладку**.

1. Когда программа запросит имя, введите любую строку в окне консоли и нажмите клавишу ВВОД.

1. Выполнение программы остановится, когда будет достигнута точка останова, то есть перед выполнением метода `Console.WriteLine`. В окне **Видимые** отображаются значения всех переменных, которые используются рядом с текущей строкой. В окне **Локальные** (которое можно открыть, выбрав вкладку **Локальные**) отображаются значения переменных, которые определены в текущем выполняемом методе.

   ![Снимок экрана с точкой останова в Visual Studio.](./media/debugging-with-visual-studio/breakpoint-console-window.png)

1. Вы можете изменить значения переменных и посмотреть, как это повлияет на работу программы. Если **окно интерпретации** не отображается, откройте его, выбрав пункт меню **Отладка** > **Окна** > **Интерпретация**. **Окно интерпретации** позволяет взаимодействовать с приложением, которое вы отлаживаете.

1. Вы можете изменять значения переменных и отслеживать изменения. Введите `name = "Gracie"` в **окно интерпретации** и нажмите клавишу ВВОД.

1. Введите `date = new DateTime(2016,11,01,11,59,00)` в **окно интерпретации** и нажмите клавишу ВВОД.

   В **окне интерпретации** отображается значение строковой переменной и свойства значения <xref:System.DateTime>. Кроме того, значения переменных обновляются в окнах **Видимые** и **Локальные**.

   ![Окно "Видимые" и окно интерпретации](./media/debugging-with-visual-studio/autos-immediate-window.png)

1. Возобновите выполнение программы, нажав кнопку **Продолжить** на панели инструментов или выбрав пункт меню **Отладка** > **Продолжить**. Значения, отображаемые в окне консоли, соответствуют изменениям, произведенным в **окне интерпретации**.

   ![Окно консоли со значением "Jack" в ответ на вопрос "What is your name?", за которым следует текст "Hello Gracie"](./media/debugging-with-visual-studio/debug-changed-value.png)

1. Нажмите любую клавишу, чтобы выйти из приложения и закрыть режим отладки.
# <a name="visual-basictabvb"></a>[Visual Basic](#tab/vb)
1. *Точка останова* приостанавливает выполнение приложения на инструкции, *предшествующей* той строке, в которой установлена точка останова. 

   Установите точку останова в строке `Console.WriteLine(vbCrLf + $"Hello, {name}, on {currentDate:d} at {currentDate:t}!")`. Для этого щелкните в левом поле этой строки в окне редактирования кода или выберите эту строку и затем пункт меню **Отладка** > **Точка останова**. Как видно на следующем рисунке, строку с точкой останова Visual Studio обозначает подсветкой текста и красным кругом в ее левом поле.

   ![Окно приложения Visual Studio с установленной точкой останова](./media/debugging-with-visual-studio/vb-set-breakpoint-in-editor.png)

1. Запустите программу в режиме отладки. Для этого нажмите кнопку **HelloWorld** с зеленой стрелкой на панели инструментов, нажмите клавишу F5 или выберите пункт меню **Отладка** > **Начать отладку**.

1. Когда программа запросит имя, введите любую строку в окне консоли и нажмите клавишу ВВОД.

1. Выполнение программы остановится, когда будет достигнута точка останова, то есть перед выполнением метода `Console.WriteLine`. В окне **Видимые** отображаются значения всех переменных, которые используются рядом с текущей строкой. В окне **Локальные** (которое можно открыть, выбрав вкладку **Локальные**) отображаются значения переменных, которые определены в текущем выполняемом методе.

   ![Окно приложения в Visual Studio с точкой останова](./media/debugging-with-visual-studio/vb-stop-at-breakpoint.png)

1. Вы можете изменить значения переменных и посмотреть, как это повлияет на работу программы. Если **окно интерпретации** не отображается, откройте его, выбрав пункт меню **Отладка** > **Окна** > **Интерпретация**. **Окно интерпретации** позволяет взаимодействовать с приложением, которое вы отлаживаете.

1. Вы можете изменять значения переменных и отслеживать изменения. Введите `name = "Gracie"` в **окно интерпретации** и нажмите клавишу ВВОД.

1. Введите `currentDate = new DateTime(2016,11,01,11,59,00)` в **окно интерпретации** и нажмите клавишу ВВОД.

1. Возобновите выполнение программы, нажав кнопку **Продолжить** на панели инструментов или выбрав пункт меню **Отладка** > **Продолжить**. Значения, отображаемые в окне консоли, соответствуют изменениям, произведенным в **окне интерпретации**.

   ![Окно консоли с измененными значениями, введенными в окне интерпретации](./media/debugging-with-visual-studio/debug-changed-value.png)

1. Нажмите любую клавишу, чтобы выйти из приложения и закрыть режим отладки.
---

## <a name="setting-a-conditional-breakpoint"></a>Установка условной точки останова

Ваша программа отображает строку, которую вводит пользователь. Что произойдет, если пользователь ничего не введет? Это можно проверить с помощью одной из полезных функций отладки — *условной точки останова*. Условная точка останова прерывает выполнение программы, если соблюдены одно или несколько условий.

Чтобы проверить поведение программы в случае, когда пользователь не вводит текст, задайте условную точку останова следующим образом.

# <a name="ctabcsharp"></a>[C#](#tab/csharp)
1. Щелкните правой кнопкой мыши красную точку, обозначающую точку останова. В контекстном меню выберите **Условия**. Откроется диалоговое окно **Параметры точки останова**. Установите флажок **Условия**.

   ![Редактор с панелью параметров точки останова (C#)](./media/debugging-with-visual-studio/breakpoint-settings.png)

1. В поле **Выражение условия** замените "e.g. x == 5" на следующее условие:

   ```csharp
   String.IsNullOrEmpty(name)
   ```

   Вы проверяете условие в коде, которое заключается в том, что вызов метода `String.IsNullOrEmpty(name)` возвращает `true`, либо потому, что переменной *name* не присвоено значение, либо потому, что ее значение является пустой строкой (""). Также можно указать *количество обращений* (в этом случае выполнение программы будет прерываться до тех пор, пока не будет достигнуто заданное количество обращений) или *условие фильтра* (в этом случае выполнение программы будет прерываться на основе таких атрибутов, как идентификатор потока, имя процесса и имя потока).

1. Нажмите кнопку **Закрыть**, чтобы закрыть диалоговое окно.

1. Запустите программу в режиме отладки.

1. Когда в окне консоли появится предложение ввести имя, просто нажмите клавишу ВВОД.

1. Так как указанное нами условие соблюдается (`name` имеет значение `null` или <xref:System.String.Empty?displayProperty=nameWithType>), выполнение программы будет остановлено при достижении точки останова, то есть перед выполнением метода `Console.WriteLine`.

1. Выберите окно **Локальные**, в котором отображаются значения локальных переменных для текущего выполняемого метода (в нашем примере это метод `Main`). Обратите внимание, что переменная `name` имеет значение `""` или <xref:System.String.Empty?displayProperty=nameWithType>.

1. Убедитесь в том, что переменная содержит пустую строку, введя следующую инструкцию в **окне интерпретации**. Результат равен `true`.

   ```csharp
   ? name == String.Empty
   ```

   ![Значение true в окне интерпретации после выполнения инструкции (C#)](./media/debugging-with-visual-studio/immediate-window-output.png)

1. Нажмите кнопку **Продолжить** на панели инструментов, чтобы возобновить выполнение программы.

1. Нажмите любую клавишу, чтобы закрыть окно консоли и закрыть режим отладки.

1. Снимите точку останова. Для этого щелкните точку в левом поле окна изменения кода или установите курсор в строку с точкой останова и выберите пункт меню **Отладка > Точка останова**.
# <a name="visual-basictabvb"></a>[Visual Basic](#tab/vb)
1. Щелкните правой кнопкой мыши красную точку, обозначающую точку останова. В контекстном меню выберите **Условия**. Откроется диалоговое окно **Параметры точки останова**. Установите флажок **Условия**.

   ![Редактор с панелью параметров точки останова (Visual Basic)](./media/debugging-with-visual-studio/vb-breakpointsettings.png)

1. В поле **Условное выражение** замените "e.g. x = 5" на следующее условие:

   ```vb
   String.IsNullOrEmpty(name)
   ```

   Вы проверяете условие в коде, которое заключается в том, что вызов метода `String.IsNullOrEmpty(name)` возвращает `True`, либо потому, что переменной *name* не присвоено значение, либо потому, что ее значение является пустой строкой (""). Также можно указать *количество обращений* (в этом случае выполнение программы будет прерываться до тех пор, пока не будет достигнуто заданное количество обращений) или *условие фильтра* (в этом случае выполнение программы будет прерываться на основе таких атрибутов, как идентификатор потока, имя процесса и имя потока).

1. Нажмите кнопку **Закрыть**, чтобы закрыть диалоговое окно.

1. Запустите программу в режиме отладки.

1. Когда в окне консоли появится предложение ввести имя, просто нажмите клавишу ВВОД.

1. Так как указанное нами условие соблюдается (`name` имеет значение `null` или <xref:System.String.Empty?displayProperty=nameWithType>), выполнение программы будет остановлено при достижении точки останова, то есть перед выполнением метода `Console.WriteLine`.

1. Выберите окно **Локальные**, в котором отображаются значения локальных переменных для текущего выполняемого метода (в нашем примере это метод `Main`). Обратите внимание, что переменная `name` имеет значение `""` или <xref:System.String.Empty?displayProperty=nameWithType>.

1. Убедитесь в том, что переменная содержит пустую строку, введя следующую инструкцию в **окне интерпретации**. Результат равен `true`.

   ```vb
   ? String.IsNullOrEmpty(name)
   ```

  ![Значение true в окне интерпретации после выполнения инструкции (Visual Basic)](./media/debugging-with-visual-studio/vb-immediate-window-output.png)

1. Нажмите кнопку **Продолжить** на панели инструментов, чтобы возобновить выполнение программы.

1. Нажмите любую клавишу, чтобы закрыть окно консоли и закрыть режим отладки.

1. Снимите точку останова. Для этого щелкните точку в левом поле окна изменения кода или установите курсор в строку с точкой останова и выберите пункт меню **Отладка > Точка останова**.
---
## <a name="stepping-through-a-program"></a>Пошаговое выполнение программы

Visual Studio позволяет выполнять программу пошагово, отслеживая результат ее выполнения. Для этого обычно задают точку останова и затем используют эту возможность, чтобы отслеживать поток работы программы в небольшой части ее кода. Так как наша программа невелика, давайте пошагово выполним всю программу. Для этого сделайте следующее:

# <a name="ctabcsharp"></a>[C#](#tab/csharp)
1. В строке меню выберите **Отладка** > **Выполнять по шагам** или нажмите клавишу F11. Следующая выполняемая строка будет выделена, и рядом с ней появится стрелка.

   ![Метод выполнения по шагам в Visual Studio (C#)](./media/debugging-with-visual-studio/step-into-method.png)

   На этом этапе в окне **Видимые** будет показано, что в программе определена всего одна переменная — `args`. Так как в программу не передавались аргументы командной строки, значением этой переменной является пустой массив строк. Кроме того, Visual Studio открыла пустое окно консоли.

1. Выберите **Отладка** > **Выполнять по шагам** или нажмите клавишу F11. Будет выделена следующая выполняемая строка. Как показано на рисунке, на выполнение кода от предыдущей до текущей инструкции потребовалось менее одной миллисекунды. По-прежнему определена только одна переменная `args`. Окно консоли остается пустым.

   ![Источник метода выполнения по шагам в Visual Studio (C#)](./media/debugging-with-visual-studio/step-into-source-method.png)

1. Выберите **Отладка** > **Выполнять по шагам** или нажмите клавишу F11. Visual Studio подсвечивает инструкцию, которая содержит присваивание значения переменной `name`. В окне **Видимые** отображается, что `name` имеет значение `null`, а в окне консоли появилась строка "What is your name?" (Введите имя:).

1. Ответьте на этот запрос, введя строку в окно консоли и нажав клавишу ВВОД. Консоль никак не отреагирует на это, и введенная строка не будет отображаться в окне консоли, но метод <xref:System.Console.ReadLine%2A?displayProperty=nameWithType> получит введенные входные данные.

1. Выберите **Отладка** > **Выполнять по шагам** или нажмите клавишу F11. Visual Studio подсвечивает оператор, который содержит присваивание значения переменной `date` (в C#) или `currentDate` (в Visual Basic). В окне **Видимые** отображается значение свойства <xref:System.DateTime.Now?displayProperty=nameWithType> и значение, полученное в результате вызова метода <xref:System.Console.ReadLine%2A?displayProperty=nameWithType>. Также в окне консоли появится строка, введенная в ответ на запрос консоли для ввода данных.

1. Выберите **Отладка** > **Выполнять по шагам** или нажмите клавишу F11. В окне **Видимые** отображается значение переменной `date`, которому было присвоено свойство <xref:System.DateTime.Now?displayProperty=nameWithType>. В окне консоли изменений не произошло.

1. Выберите **Отладка** > **Выполнять по шагам** или нажмите клавишу F11. Visual Studio вызывает метод <xref:System.Console.WriteLine(System.String,System.Object,System.Object)?displayProperty=nameWithType>. Значения переменных `date` (или `currentDate`) и `name` отображаются в окне **Видимые**, а в окне консоли отображается форматированная строка.

1. Выберите **Отладка** > **Выйти из режима пошагового выполнения** или нажмите SHIFT+F11. Пошаговое выполнение на этом прекратится. В окне консоли отображается сообщение с предложением нажать любую клавишу для выхода.

1. Нажмите любую клавишу, чтобы закрыть окно консоли и закрыть режим отладки.
# <a name="visual-basictabvb"></a>[Visual Basic](#tab/vb)
1. В строке меню выберите **Отладка** > **Выполнять по шагам** или нажмите клавишу F11. Следующая выполняемая строка будет выделена, и рядом с ней появится стрелка.

   ![Метод выполнения по шагам в Visual Studio (Visual Basic)](./media/debugging-with-visual-studio/vb-step-into-method.png)

   Так как на этом этапе вы не передали в программу аргументы командной строки, в окне **Видимые** указано, что значением переменной `args` является пустой массив строк. Кроме того, Visual Studio открыла пустое окно консоли.

1. Выберите **Отладка** > **Выполнять по шагам** или нажмите клавишу F11. Будет выделена следующая выполняемая строка. Как показано на рисунке, на выполнение кода от предыдущей до текущей инструкции потребовалось менее одной миллисекунды. По-прежнему определена только одна переменная `args`. Окно консоли остается пустым.

   ![Источник метода выполнения по шагам в Visual Studio (Visual Basic)](./media/debugging-with-visual-studio/vb-step-into-source-method.png)

1. Выберите **Отладка** > **Выполнять по шагам** или нажмите клавишу F11. Visual Studio подсвечивает инструкцию, которая содержит присваивание значения переменной `name`. В окне **Видимые** отображается, что `name` имеет значение `Nothing`, а в окне консоли появилась строка "What is your name?" (Введите имя:).

1. Ответьте на этот запрос, введя строку в окно консоли и нажав клавишу ВВОД. Консоль никак не отреагирует на это, и введенная строка не будет отображаться в окне консоли, но метод <xref:System.Console.ReadLine%2A?displayProperty=nameWithType> получит введенные входные данные.

1. Выберите **Отладка** > **Выполнять по шагам** или нажмите клавишу F11. Visual Studio подсвечивает оператор, который содержит присваивание значения переменной `date` (в C#) или `currentDate` (в Visual Basic). В окне **Видимые** отображается значение свойства <xref:System.DateTime.Now?displayProperty=nameWithType> и значение, полученное в результате вызова метода <xref:System.Console.ReadLine%2A?displayProperty=nameWithType>. Также в окне консоли появится строка, введенная в ответ на запрос консоли для ввода данных.

1. Выберите **Отладка** > **Выполнять по шагам** или нажмите клавишу F11. В окне **Видимые** отображается значение переменной `date`, которому было присвоено свойство <xref:System.DateTime.Now?displayProperty=nameWithType>. В окне консоли изменений не произошло.

1. Выберите **Отладка** > **Выполнять по шагам** или нажмите клавишу F11. Visual Studio вызывает метод <xref:System.Console.WriteLine(System.String,System.Object,System.Object)?displayProperty=nameWithType>. Значения переменных `date` (или `currentDate`) и `name` отображаются в окне **Видимые**, а в окне консоли отображается форматированная строка.

1. Выберите **Отладка** > **Выйти из режима пошагового выполнения** или нажмите SHIFT+F11. Пошаговое выполнение на этом прекратится. В окне консоли отображается сообщение с предложением нажать любую клавишу для выхода.

1. Нажмите любую клавишу, чтобы закрыть окно консоли и закрыть режим отладки.
---

## <a name="building-a-release-version"></a>Сборка версии в режиме выпуска

После сборки приложения в режиме отладки следует скомпилировать и протестировать приложение в режиме выпуска. При сборке в режиме выпуска компилятор использует методы оптимизации, которые иногда могут негативно повлиять на поведение приложения. Например, оптимизации компилятора для повышения производительности могут привести к состоянию конкуренции в асинхронных и многопоточных приложениях.

Чтобы собрать и протестировать консольное приложение в режиме выпуска, переключите конфигурацию сборки из режима **Отладка** в режим **Выпуск** на панели инструментов.

![Панель инструментов Visual Studio по умолчанию с выделенным режимом отладки](./media/debugging-with-visual-studio/visual-studio-toolbar-release.png)

Если нажать клавишу F5 или выбрать пункт **Собрать решение** в меню **Сборка**, Visual Studio скомпилирует версию консольного приложения в режиме выпуска, которую можно протестировать. Приложение, собранное в режиме выпуска, можно протестировать точно так же, как и в режиме отладки.

Завершив отладку приложения, вы можете опубликовать развертываемую версию своего приложения. Дополнительные сведения см. в разделе [Публикация приложения Hello World в Visual Studio 2017](publishing-with-visual-studio.md).
