---
title: Отладка приложения .NET Core Hello World в Visual Studio
description: Сведения о выполнении отладки приложения Hello World, написанного на C# или Visual Basic, в Visual Studio.
ms.date: 12/05/2019
ms.custom: vs-dotnet
ms.openlocfilehash: b2ee1401fc89f990c5f930d80d1a510a117e63a0
ms.sourcegitcommit: 00aa62e2f469c2272a457b04e66b4cc3c97a800b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/28/2020
ms.locfileid: "78156677"
---
# <a name="debug-your-c-or-visual-basic-net-core-hello-world-application-using-visual-studio"></a>Отладка приложения .NET Core Hello World на C# или Visual Basic с помощью Visual Studio

Итак, вы уже создали и запустили простое консольное приложение .NET Core в Visual Studio 2019, выполнив инструкции из [этой статьи](with-visual-studio.md). После создания и компиляции приложения можно приступить к тестированию. Visual Studio содержит широкий набор средств отладки, которые можно использовать для устранения неполадок в работе приложения.

## <a name="debug-build-configuration"></a>Конфигурация отладочной сборки

В Visual Studio по умолчанию используются две конфигурации сборки — *Отладка* и *Выпуск*. Используемая конфигурация сборки отображается на панели инструментов. На следующем изображении панели инструментов показано, что служба Visual Studio настроена для компиляции отладочной версии приложения:

![Панель инструментов Visual Studio с выделенным режимом отладки](./media/debugging-with-visual-studio/visual-studio-toolbar-debug.png)

Сначала запустите отладочную версию своего приложения. Конфигурация отладочной сборки отключает большинство инструментов оптимизации и предоставляет более подробные сведения о процессе сборки.

## <a name="set-a-breakpoint"></a>Установка точки останова

Запустите программу и попробуйте использовать некоторые функции отладки:

<!-- markdownlint-disable MD025 -->

# <a name="c"></a>[C#](#tab/csharp)

1. Установите *точку останова* в строке `Console.WriteLine($"\nHello, {name}, on {date:d} at {date:t}!");`, щелкнув в левом поле окна изменения кода в этой строке. Кроме того, установить точку останова можно, поместив курсор в строку кода и нажав клавишу **F9** или выбрав **Отладка** > **Точка останова** в строке меню.

   Точка останова приостанавливает выполнение приложения на инструкции, *предшествующей* той строке, в которой установлена точка останова.

   Как видно на следующем рисунке, строку с точкой останова Visual Studio обозначает подсветкой текста и красным кругом в ее левом поле.

   ![Окно приложения Visual Studio с установленной точкой останова](./media/debugging-with-visual-studio/set-breakpoint-in-editor.png)

1. Запустите программу в режиме отладки. Для этого нажмите кнопку **HelloWorld** с зеленой стрелкой на панели инструментов, нажмите клавишу **F5** или выберите пункт меню **Отладка** > **Начать отладку**.

1. Когда программа запросит имя, введите любую строку в окне консоли и нажмите клавишу **ВВОД**.

1. Выполнение программы остановится, когда будет достигнута точка останова, то есть перед выполнением метода `Console.WriteLine`. В окне **Локальные** отображаются значения переменных, которые определены в текущем выполняемом методе.

   ![Снимок экрана с точкой останова в Visual Studio](./media/debugging-with-visual-studio/breakpoint-hit.png)

1. Окно **Интерпретация** позволяет взаимодействовать с приложением, которое вы отлаживаете. Вы можете интерактивно изменить значения переменных и посмотреть, как это повлияет на работу программы.

   1. Если окно **Интерпретация** не отображается, откройте его, выбрав **Отладка** > **Окна** > **Интерпретация**.

   1. Введите `name = "Gracie"` в окне **Интерпретация** и нажмите клавишу **ВВОД**.

   1. Введите `date = DateTime.Parse("11/16/2019 5:25 PM")` в окне **Интерпретация** и нажмите клавишу **ВВОД**.

   В окне **Интерпретация** отображается значение переменной строки и свойства значения <xref:System.DateTime>. Кроме того, значения переменных обновляются в окне **Локальные**.

   ![Окна "Локальные" и "Интерпретация" в Visual Studio 2019](./media/debugging-with-visual-studio/locals-immediate-window.png)

1. Возобновите выполнение программы, нажав кнопку **Продолжить** на панели инструментов или выбрав **Отладка** > **Продолжить**. Значения, отображаемые в окне консоли, соответствуют изменениям, произведенным в окне **Интерпретация**.

   ![Окно консоли с указанными значениями](./media/debugging-with-visual-studio/console-window.png)

1. Нажмите любую клавишу, чтобы выйти из приложения и остановить отладку.

# <a name="visual-basic"></a>[Visual Basic](#tab/vb)

1. Установите *точку останова* в строке `Console.WriteLine($"{vbCrLf}Hello, {name}, on {currentDate:d} at {currentDate:t}!")`, щелкнув в левом поле окна изменения кода в этой строке. Кроме того, установить точку останова можно, поместив курсор в необходимую строку кода и выбрав **Отладка** > **Точка останова** в строке меню.

   Точка останова приостанавливает выполнение приложения на инструкции, *предшествующей* той строке, в которой установлена точка останова.

   Как видно на следующем рисунке, строку с точкой останова Visual Studio обозначает подсветкой текста и красным кругом в ее левом поле.

   ![Окно приложения Visual Studio с установленной точкой останова](./media/debugging-with-visual-studio/vb/set-breakpoint-in-editor.png)

1. Запустите программу в режиме отладки. Для этого нажмите кнопку **HelloWorld** с зеленой стрелкой на панели инструментов, нажмите клавишу **F5** или выберите пункт меню **Отладка** > **Начать отладку**.

1. Когда программа запросит имя, введите любую строку в окне консоли и нажмите клавишу **ВВОД**.

1. Выполнение программы остановится, когда будет достигнута точка останова, то есть перед выполнением метода `Console.WriteLine`. В окне **Локальные** отображаются значения переменных, которые определены в текущем выполняемом методе.

1. Окно **Интерпретация** позволяет взаимодействовать с приложением, которое вы отлаживаете. Вы можете интерактивно изменить значения переменных и посмотреть, как это повлияет на работу программы.

   1. Если окно **Интерпретация** не отображается, откройте его, выбрав **Отладка** > **Окна** > **Интерпретация**.

   1. Введите `name = "Gracie"` в окне **Интерпретация** и нажмите клавишу **ВВОД**.

   1. Введите `date = DateTime.Parse("11/16/2019 5:25 PM")` в окне **Интерпретация** и нажмите клавишу **ВВОД**.

   Значения переменных обновляются в окне **Локальные**.

1. Возобновите выполнение программы, нажав кнопку **Продолжить** на панели инструментов или выбрав пункт меню **Отладка** > **Продолжить**. Значения, отображаемые в окне консоли, соответствуют изменениям, произведенным в окне **Интерпретация**.

   ![Окно консоли с указанными значениями](./media/debugging-with-visual-studio/console-window.png)

1. Нажмите любую клавишу, чтобы выйти из приложения и остановить отладку.

---

## <a name="set-a-conditional-breakpoint"></a>Установка условной точки останова

Ваша программа отображает строку, которую вводит пользователь. Что произойдет, если пользователь ничего не введет? Это можно проверить с помощью одной из полезных функций отладки, называемой *условной точкой останова*. Условная точка останова прерывает выполнение программы, если соблюдены одно или несколько условий.

Чтобы проверить поведение программы в случае, когда пользователь не вводит текст, задайте условную точку останова следующим образом.

# <a name="c"></a>[C#](#tab/csharp)

1. Щелкните правой кнопкой мыши красную точку, обозначающую точку останова. В контекстном меню выберите **Условия**. Откроется диалоговое окно **Параметры точки останова**. Установите флажок **Условия**, если он еще не установлен.

   ![Редактор с панелью параметров точки останова (C#)](./media/debugging-with-visual-studio/breakpoint-settings.png)

1. В поле **Условное выражение** замените "e.g. x == 5" следующим условием:

   ```csharp
   String.IsNullOrEmpty(name)
   ```

   Вы проверяете условие в коде, которое заключается в том, что вызов метода `String.IsNullOrEmpty(name)` возвращает `true` либо потому, что переменной `name` не присвоено значение, либо потому, что ее значение является пустой строкой (""). Вместо условного выражения, также можно указать *количество обращений* (в этом случае выполнение программы будет прерываться до тех пор, пока не будет достигнуто заданное количество обращений) или *условие фильтра* (в этом случае выполнение программы будет прерываться на основе таких атрибутов, как идентификатор потока, имя процесса и имя потока).

1. Выберите **Закрыть**, чтобы закрыть диалоговое окно.

1. Запустите отладку программы, нажав клавишу **F5**.

1. Когда в окне консоли появится предложение ввести имя, просто нажмите клавишу **ВВОД**.

1. Так как указанное вами условие соблюдается (`name` имеет значение `null` или <xref:System.String.Empty?displayProperty=nameWithType>), выполнение программы будет остановлено при достижении точки останова, то есть перед выполнением метода `Console.WriteLine`.

1. Выберите окно **Локальные**, в котором отображаются значения локальных переменных для текущего выполняемого метода. В нашем примере этим методом является `Main`. Обратите внимание, что переменная `name` имеет значение `""` или <xref:System.String.Empty?displayProperty=nameWithType>.

1. Убедитесь в том, что переменная содержит пустую строку, введя следующую инструкцию в окне **Интерпретация** и нажав клавишу **ВВОД**. Результат равен `true`.

   ```csharp
   ? name == String.Empty
   ```

   ![Значение true в окне интерпретации после выполнения инструкции (C#)](./media/debugging-with-visual-studio/immediate-window-output.png)

1. Нажмите кнопку **Продолжить** на панели инструментов, чтобы возобновить выполнение программы.

1. Нажмите любую клавишу, чтобы закрыть окно консоли и остановить отладку.

1. Снимите точку останова. Для этого щелкните точку в левом поле окна изменения кода или установите курсор в строку с точкой останова и выберите **Отладка > Точка останова**.

# <a name="visual-basic"></a>[Visual Basic](#tab/vb)

1. Щелкните правой кнопкой мыши красную точку, обозначающую точку останова. В контекстном меню выберите **Условия**. Откроется диалоговое окно **Параметры точки останова**. Установите флажок **Условия**.

   ![Редактор с панелью параметров точки останова (Visual Basic)](./media/debugging-with-visual-studio/vb-breakpointsettings.png)

1. В поле **Условное выражение** замените "e.g. x = 5" на следующее условие:

   ```vb
   String.IsNullOrEmpty(name)
   ```

   Вы проверяете условие в коде, которое заключается в том, что вызов метода `String.IsNullOrEmpty(name)` возвращает `true` либо потому, что переменной `name` не присвоено значение, либо потому, что ее значение является пустой строкой (""). Вместо условного выражения, также можно указать *количество обращений* (в этом случае выполнение программы будет прерываться до тех пор, пока не будет достигнуто заданное количество обращений) или *условие фильтра* (в этом случае выполнение программы будет прерываться на основе таких атрибутов, как идентификатор потока, имя процесса и имя потока).

1. Выберите **Закрыть**, чтобы закрыть диалоговое окно.

1. Запустите отладку программы, нажав клавишу **F5**.

1. Когда в окне консоли появится предложение ввести имя, просто нажмите клавишу **ВВОД**.

1. Так как указанное вами условие соблюдается (`name` имеет значение `null` или <xref:System.String.Empty?displayProperty=nameWithType>), выполнение программы будет остановлено при достижении точки останова, то есть перед выполнением метода `Console.WriteLine`.

1. Выберите окно **Локальные**, в котором отображаются значения локальных переменных для текущего выполняемого метода. В нашем примере этим методом является `Main`. Обратите внимание, что переменная `name` имеет значение `""` или <xref:System.String.Empty?displayProperty=nameWithType>.

1. Убедитесь в том, что переменная содержит пустую строку, введя следующую инструкцию в окне **Интерпретация** и нажав клавишу **ВВОД**. Результат равен `true`.

   ```vb
   ? String.IsNullOrEmpty(name)
   ```

   ![Значение true в окне интерпретации после выполнения инструкции (Visual Basic)](./media/debugging-with-visual-studio/vb/immediate-window-output.png)

1. Нажмите кнопку **Продолжить** на панели инструментов, чтобы возобновить выполнение программы.

1. Нажмите любую клавишу, чтобы закрыть окно консоли и остановить отладку.

1. Снимите точку останова. Для этого щелкните точку в левом поле окна изменения кода или установите курсор в строку с точкой останова и выберите пункт меню **Отладка > Точка останова**.

---
## <a name="step-through-a-program"></a>Пошаговое выполнение программы

Visual Studio позволяет выполнять программу пошагово, отслеживая результат ее выполнения. Для этого обычно задают точку останова и затем используют эту возможность, чтобы отслеживать поток работы программы в небольшой части ее кода. Так как наша программа невелика, давайте выполним ее пошагово.

# <a name="c"></a>[C#](#tab/csharp)

1. В строке меню выберите **Отладка** > **Шаг с заходом** или нажмите клавишу **F11**. Следующая выполняемая строка будет выделена, и рядом с ней появится стрелка.

   ![Метод выполнения по шагам в Visual Studio (C#)](./media/debugging-with-visual-studio/step-into-method.png)

   На этом этапе в окне **Локальные** будет показано, что в программе определена всего одна переменная — `args`. Так как в программу не передавались аргументы командной строки, значением этой переменной является пустой массив строк. Кроме того, Visual Studio открыла пустое окно консоли.

1. Выберите **Отладка** > **Шаг с заходом** или нажмите клавишу **F11**. Будет выделена следующая выполняемая строка. Как показано на рисунке, на выполнение кода от предыдущей до текущей инструкции потребовалось менее одной миллисекунды. По-прежнему определена только одна переменная `args`. Окно консоли остается пустым.

   ![Источник метода выполнения по шагам в Visual Studio (C#)](./media/debugging-with-visual-studio/step-into-source-method.png)

1. Выберите **Отладка** > **Шаг с заходом** или нажмите клавишу **F11**. Visual Studio подсвечивает инструкцию, которая содержит присваивание значения переменной `name`. В окне **Локальные** отображается, что `name` имеет значение `null`, а в окне консоли появилась строка What is your name? (Введите имя:).

1. Ответьте на этот запрос, введя строку в окно консоли и нажав клавишу **ВВОД**. Консоль никак не отреагирует на это, и введенная строка не будет отображаться в окне консоли, но метод <xref:System.Console.ReadLine%2A?displayProperty=nameWithType> получит введенные входные данные.

1. Выберите **Отладка** > **Шаг с заходом** или нажмите клавишу **F11**. Visual Studio подсвечивает инструкцию, которая содержит присваивание значения переменной `date`. В окне **Локальные** отображается значение, полученное в результате вызова метода <xref:System.Console.ReadLine%2A?displayProperty=nameWithType>. В окне консоли также отображается строка, указанная в командной строке.

1. Выберите **Отладка** > **Шаг с заходом** или нажмите клавишу **F11**. В окне **Локальные** отображается значение переменной `date`, которому было присвоено свойство <xref:System.DateTime.Now?displayProperty=nameWithType>. В окне консоли изменений не произошло.

1. Выберите **Отладка** > **Шаг с заходом** или нажмите клавишу **F11**. Visual Studio вызывает метод <xref:System.Console.WriteLine(System.String,System.Object,System.Object)?displayProperty=nameWithType>. В окне консоли отображается форматированная строка.

1. Выберите **Отладка** > **Шаг с выходом** или нажмите клавиши **SHIFT**+**F11**. Пошаговое выполнение на этом прекратится. В окне консоли отображается сообщение с предложением нажать любую клавишу для выхода.

1. Нажмите любую клавишу, чтобы закрыть окно консоли и остановить отладку.

# <a name="visual-basic"></a>[Visual Basic](#tab/vb)

1. В строке меню выберите **Отладка** > **Шаг с заходом** или нажмите клавишу **F11**. Следующая выполняемая строка будет выделена, и рядом с ней появится стрелка.

   ![Метод выполнения по шагам в Visual Studio (Visual Basic)](./media/debugging-with-visual-studio/vb-step-into-method.png)

   На этом этапе в окне **Локальные** будет показано, что в программе определена всего одна переменная — `args`. Так как в программу не передавались аргументы командной строки, значением этой переменной является пустой массив строк. Кроме того, Visual Studio открыла пустое окно консоли.

1. Выберите **Отладка** > **Шаг с заходом** или нажмите клавишу **F11**. Будет выделена следующая выполняемая строка. Как показано на рисунке, на выполнение кода от предыдущей до текущей инструкции потребовалось менее одной миллисекунды. По-прежнему определена только одна переменная `args`. Окно консоли остается пустым.

   ![Источник метода выполнения по шагам в Visual Studio (Visual Basic)](./media/debugging-with-visual-studio/vb-step-into-source-method.png)

1. Выберите **Отладка** > **Шаг с заходом** или нажмите клавишу **F11**. Visual Studio подсвечивает инструкцию, которая содержит присваивание значения переменной `name`. В окне **Локальные** отображается, что `name` имеет значение `Nothing`, а в окне консоли появилась строка What is your name? (Введите имя:).

1. Ответьте на этот запрос, введя строку в окно консоли и нажав клавишу **ВВОД**. Консоль никак не отреагирует на это, и введенная строка не будет отображаться в окне консоли, но метод <xref:System.Console.ReadLine%2A?displayProperty=nameWithType> получит введенные входные данные.

1. Выберите **Отладка** > **Шаг с заходом** или нажмите клавишу **F11**. Visual Studio подсвечивает инструкцию, которая содержит присваивание значения переменной `currentDate`. В окне **Локальные** отображается значение, полученное в результате вызова метода <xref:System.Console.ReadLine%2A?displayProperty=nameWithType>. Также в окне консоли появится строка, введенная в ответ на запрос консоли для ввода данных.

1. Выберите **Отладка** > **Шаг с заходом** или нажмите клавишу **F11**. В окне консоли изменений не произошло.

1. Выберите **Отладка** > **Шаг с заходом** или нажмите клавишу **F11**. Visual Studio вызывает метод <xref:System.Console.WriteLine(System.String,System.Object,System.Object)?displayProperty=nameWithType>. В окне консоли отображается форматированная строка.

1. Выберите **Отладка** > **Шаг с выходом** или нажмите клавиши **SHIFT**+**F11**. Пошаговое выполнение на этом прекратится. В окне консоли отображается сообщение с предложением нажать любую клавишу для выхода.

1. Нажмите любую клавишу, чтобы закрыть окно консоли и остановить отладку.

---

## <a name="build-a-release-version"></a>Сборка версии в режиме выпуска

После тестирования отладочной версии приложения следует скомпилировать и протестировать версию в режиме выпуска. При сборке в режиме выпуска компилятор использует методы оптимизации, которые иногда могут негативно повлиять на поведение приложения. Например, оптимизации компилятора для повышения производительности могут привести к состоянию конкуренции в многопоточных приложениях.

Чтобы собрать и протестировать консольное приложение в режиме выпуска, переключите конфигурацию сборки из режима **Отладка** в режим **Выпуск** на панели инструментов.

![Панель инструментов Visual Studio по умолчанию с выделенным режимом отладки](./media/debugging-with-visual-studio/visual-studio-toolbar-release.png)

Если нажать клавишу **F5** или выбрать пункт **Собрать решение** в меню **Сборка**, Visual Studio скомпилирует версию приложения в режиме выпуска. Эту версию можно протестировать точно так же, как и отладочную.

## <a name="next-steps"></a>Следующие шаги

Выполнив отладку приложения, вы можете опубликовать развертываемую версию своего приложения. Дополнительные сведения см. в статье [Публикация приложения Hello World .NET Core в Visual Studio 2017](publishing-with-visual-studio.md).
