---
title: Перенос кода из .NET Framework в .NET Core
description: Общие сведения о процессе переноса и инструментах, которые могут оказаться полезными при переносе проектов .NET Framework в .NET Core.
author: cartermp
ms.date: 10/22/2019
ms.openlocfilehash: c206e56e095d1ca068fa2aa6f60e891895f7f999
ms.sourcegitcommit: 4a938327bad8b2e20cabd0f46a9dc50882596f13
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/28/2020
ms.locfileid: "92888578"
---
# <a name="overview-of-porting-from-net-framework-to-net-core"></a><span data-ttu-id="fa200-103">Общие сведения о переносе кода в .NET Core из .NET Framework</span><span class="sxs-lookup"><span data-stu-id="fa200-103">Overview of porting from .NET Framework to .NET Core</span></span>

<span data-ttu-id="fa200-104">Возможно, у вас есть код, который сейчас выполняется в .NET Framework, и вы хотите перенести его в .NET Core.</span><span class="sxs-lookup"><span data-stu-id="fa200-104">You might have code that currently runs on the .NET Framework that you're interested in porting to .NET Core.</span></span> <span data-ttu-id="fa200-105">В этой статье приводится следующее:</span><span class="sxs-lookup"><span data-stu-id="fa200-105">This article provides:</span></span>

* <span data-ttu-id="fa200-106">Общие сведения о переносе.</span><span class="sxs-lookup"><span data-stu-id="fa200-106">An overview of the porting process.</span></span>
* <span data-ttu-id="fa200-107">Список средств, которые могут оказаться полезными при переносе кода в .NET Core.</span><span class="sxs-lookup"><span data-stu-id="fa200-107">A list of tools that you may find helpful when you're porting your code to .NET Core.</span></span>

## <a name="overview-of-the-porting-process"></a><span data-ttu-id="fa200-108">Общие сведения о переносе</span><span class="sxs-lookup"><span data-stu-id="fa200-108">Overview of the porting process</span></span>

<span data-ttu-id="fa200-109">Перенос в .NET Core (или .NET Standard) из .NET Framework для многих проектов выполняется относительно просто.</span><span class="sxs-lookup"><span data-stu-id="fa200-109">Porting to .NET Core (or .NET Standard) from .NET Framework for many projects is relatively straight forward.</span></span> <span data-ttu-id="fa200-110">Существует ряд необходимых изменений, но многие из них соответствуют шаблонам, приведенным ниже.</span><span class="sxs-lookup"><span data-stu-id="fa200-110">There are a number of changes that are required, but many of them follow the patterns outlined below.</span></span> <span data-ttu-id="fa200-111">Для проектов, в которых модель приложений доступна в .NET Core (например, библиотеки, консольные приложения и классические приложения), обычно требуются небольшие изменения.</span><span class="sxs-lookup"><span data-stu-id="fa200-111">Projects where the app-model is available in .NET Core (such as libraries, console apps, and desktop applications) usually require little changes.</span></span> <span data-ttu-id="fa200-112">Проекты, для которых нужна новая модель приложения, например переход на ASP.NET Core из ASP.NET, требуют немного больше работы, но многие шаблоны имеют аналоги, которые можно использовать во время преобразования.</span><span class="sxs-lookup"><span data-stu-id="fa200-112">Projects that require a new app model, such as moving to ASP.NET Core from ASP.NET, require a bit more work, but many patterns have analogs that can be used during the conversion.</span></span> <span data-ttu-id="fa200-113">Этот документ должен помочь определить основные стратегии, которые были использованы пользователями для успешного преобразования базы кода для .NET Standard или .NET Core. Мы рассмотрим преобразование на двух уровнях: в масштабе всего решения и на уровне конкретного проекта.</span><span class="sxs-lookup"><span data-stu-id="fa200-113">This document should help with identifying the main strategies that have been employed by users to successfully convert their code bases to target .NET Standard or .NET Core and will address the conversion at two levels: solution-wide and project specific.</span></span> <span data-ttu-id="fa200-114">В нижней части приведены ссылки на инструкции по преобразованию в зависимости от модели приложений.</span><span class="sxs-lookup"><span data-stu-id="fa200-114">See the links at the bottom for directions on app-model specific conversions.</span></span>

<span data-ttu-id="fa200-115">Мы рекомендуем следовать следующему процессу при переносе проекта в .NET Core.</span><span class="sxs-lookup"><span data-stu-id="fa200-115">We recommend you use the following process when porting your project to .NET Core.</span></span> <span data-ttu-id="fa200-116">В каждом из этих шагов рассматриваются потенциальные изменения в поведении, поэтому убедитесь, что вы надлежащим образом тестируете библиотеку или приложение, прежде чем продолжать работу.</span><span class="sxs-lookup"><span data-stu-id="fa200-116">Each of these steps introduces potential places for behavior changes, so ensure that you adequately test your library or application before continuing on to later steps.</span></span> <span data-ttu-id="fa200-117">Сначала необходимо подготовить проект для перехода на .NET Standard или .NET Core.</span><span class="sxs-lookup"><span data-stu-id="fa200-117">The first steps are to get your project ready for a switch to .NET Standard or .NET Core.</span></span> <span data-ttu-id="fa200-118">При наличии модульных тестов рекомендуется сначала преобразовать их, чтобы можно было продолжить тестирование изменений в продукте, над которым вы работаете.</span><span class="sxs-lookup"><span data-stu-id="fa200-118">If you have unit tests, it's best to convert them first so that you can continue testing changes in the product you're working on.</span></span> <span data-ttu-id="fa200-119">Так как перенос в .NET Core является важным изменением базы кода, мы настоятельно рекомендуем перенести тестовые проекты, чтобы можно было выполнять тесты при переносе кода.</span><span class="sxs-lookup"><span data-stu-id="fa200-119">Because porting to .NET Core is such a significant change to your codebase, it's highly recommended to port your test projects so that you can run tests as you port your code over.</span></span> <span data-ttu-id="fa200-120">.NET Core поддерживает все основные платформы: MSTest, xUnit и NUnit.</span><span class="sxs-lookup"><span data-stu-id="fa200-120">MSTest, xUnit, and NUnit all work on .NET Core.</span></span>

## <a name="getting-started"></a><span data-ttu-id="fa200-121">Начало работы</span><span class="sxs-lookup"><span data-stu-id="fa200-121">Getting started</span></span>

<span data-ttu-id="fa200-122">В процессе будут использоваться следующие средства:</span><span class="sxs-lookup"><span data-stu-id="fa200-122">The following tools will be used throughout the process:</span></span>

- <span data-ttu-id="fa200-123">Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="fa200-123">Visual Studio 2019</span></span>
- <span data-ttu-id="fa200-124">Загрузка [анализатора переносимости .NET](../../standard/analyzers/portability-analyzer.md)</span><span class="sxs-lookup"><span data-stu-id="fa200-124">Download [.NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md)</span></span>
- <span data-ttu-id="fa200-125">_Необязательно_ Установка [dotnet try-convert](https://github.com/dotnet/try-convert)</span><span class="sxs-lookup"><span data-stu-id="fa200-125">_Optional_ Install [dotnet try-convert](https://github.com/dotnet/try-convert)</span></span>

## <a name="porting-a-solution"></a><span data-ttu-id="fa200-126">Перенос решения</span><span class="sxs-lookup"><span data-stu-id="fa200-126">Porting a solution</span></span>

<span data-ttu-id="fa200-127">При наличии в решении нескольких проектов перенос может показаться более сложным, поскольку необходимо работать с проектами в определенном порядке.</span><span class="sxs-lookup"><span data-stu-id="fa200-127">When there are multiple projects in a solution, the porting can seem more complicated because you must address projects in a specific order.</span></span> <span data-ttu-id="fa200-128">Процесс преобразования должен осуществляться снизу вверх, при этом проекты без зависимостей от других проектов в решении преобразуются первыми и так далее вверх по решению.</span><span class="sxs-lookup"><span data-stu-id="fa200-128">The conversion process should be a bottom-up approach, where the projects with no dependencies on other projects in the solution are converted first, and continue up through the whole solution.</span></span>

<span data-ttu-id="fa200-129">Чтобы определить порядок проектов, которые нужно перенести, можно использовать следующие средства:</span><span class="sxs-lookup"><span data-stu-id="fa200-129">In order to identify the order projects should be migrated, you can use the following tools:</span></span>

- <span data-ttu-id="fa200-130">[Схемы зависимостей в Visual Studio](/visualstudio/modeling/create-layer-diagrams-from-your-code) могут создавать направленный граф кода в решении.</span><span class="sxs-lookup"><span data-stu-id="fa200-130">[Dependency Diagrams in Visual Studio](/visualstudio/modeling/create-layer-diagrams-from-your-code) can create a directed graph of the code in a solution.</span></span>
- <span data-ttu-id="fa200-131">Запустите `msbuild _SolutionPath_ /t:GenerateRestoreGraphFile /p:RestoreGraphOutputPath=graph.dg.json`, чтобы создать документ JSON, включающий список ссылок проекта.</span><span class="sxs-lookup"><span data-stu-id="fa200-131">Run `msbuild _SolutionPath_ /t:GenerateRestoreGraphFile /p:RestoreGraphOutputPath=graph.dg.json` to generate a json document that includes list of project references.</span></span>
- <span data-ttu-id="fa200-132">Запустите [анализатор переносимости .NET](../../standard/analyzers/portability-analyzer.md) с параметром `-r DGML`, чтобы получить схему зависимостей сборок.</span><span class="sxs-lookup"><span data-stu-id="fa200-132">Run [.NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md) with the `-r DGML` switch to retrieve a dependency diagram of the assemblies.</span></span> <span data-ttu-id="fa200-133">Дополнительные сведения см. [здесь](../../standard/analyzers/portability-analyzer.md#solution-wide-view).</span><span class="sxs-lookup"><span data-stu-id="fa200-133">For more information, see [here](../../standard/analyzers/portability-analyzer.md#solution-wide-view).</span></span>

<span data-ttu-id="fa200-134">После получения сведений о зависимостях можно использовать эти сведения для продвижения по дереву зависимостей, начиная с листовых узлов, путем выполнения действий, описанных в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="fa200-134">Once you have dependency information, you can use that information to start at the leaf nodes and work your way up the dependency tree applying the steps in the next section.</span></span>

## <a name="per-project-steps"></a><span data-ttu-id="fa200-135">Действия для каждого проекта</span><span class="sxs-lookup"><span data-stu-id="fa200-135">Per project steps</span></span>

<span data-ttu-id="fa200-136">Мы рекомендуем следовать следующему процессу при переносе проекта в .NET Core:</span><span class="sxs-lookup"><span data-stu-id="fa200-136">We recommend you use the following process when porting your project to .NET Core:</span></span>

1. <span data-ttu-id="fa200-137">Преобразуйте все зависимости `packages.config` в формат [PackageReference](/nuget/consume-packages/package-references-in-project-files) с помощью [средства преобразования в Visual Studio](/nuget/consume-packages/migrate-packages-config-to-package-reference).</span><span class="sxs-lookup"><span data-stu-id="fa200-137">Convert all of your `packages.config` dependencies to the [PackageReference](/nuget/consume-packages/package-references-in-project-files) format with the [conversion tool in Visual Studio](/nuget/consume-packages/migrate-packages-config-to-package-reference).</span></span>

   <span data-ttu-id="fa200-138">На этом шаге выполняется преобразование зависимостей из устаревшего формата `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="fa200-138">This step involves converting your dependencies from the legacy `packages.config` format.</span></span> <span data-ttu-id="fa200-139">Формат `packages.config` не поддерживается в .NET Core, поэтому такое преобразование является обязательным при наличии зависимостей пакетов.</span><span class="sxs-lookup"><span data-stu-id="fa200-139">`packages.config` doesn't work on .NET Core, so this conversion is required if you have package dependencies.</span></span> <span data-ttu-id="fa200-140">Кроме того, требуются только зависимости, напрямую используемые в проекте. Необходимость работать с меньшим числом зависимостей упрощает дальнейшие этапы.</span><span class="sxs-lookup"><span data-stu-id="fa200-140">It also only requires the dependencies you are directly using in a project, which makes later steps easier by reducing the number of dependencies you must manage.</span></span>

1. <span data-ttu-id="fa200-141">Преобразуйте файл проекта в новую структуру файлов в стиле пакета SDK.</span><span class="sxs-lookup"><span data-stu-id="fa200-141">Convert your project file to the new SDK-style files structure.</span></span> <span data-ttu-id="fa200-142">Создайте проекты для .NET Core, скопируйте исходные файлы или попытайтесь преобразовать существующий файл проекта с помощью средства.</span><span class="sxs-lookup"><span data-stu-id="fa200-142">You can create new projects for .NET Core and copy over source files, or attempt to convert your existing project file with a tool.</span></span>

   <span data-ttu-id="fa200-143">В .NET Core используется более простой (и другой) [формат файла проекта](../tools/csproj.md), чем в .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="fa200-143">.NET Core uses a simplified (and different) [project file format](../tools/csproj.md) than .NET Framework.</span></span> <span data-ttu-id="fa200-144">Чтобы продолжить, потребуется преобразовать файлы проекта в этот формат.</span><span class="sxs-lookup"><span data-stu-id="fa200-144">You'll need to convert your project files into this format to continue.</span></span> <span data-ttu-id="fa200-145">Этот стиль проекта позволяет также ориентироваться на .NET Framework, что и так необходимо.</span><span class="sxs-lookup"><span data-stu-id="fa200-145">This project style allows you to also target .NET Framework, which at this point you'll still want to target.</span></span>

   <span data-ttu-id="fa200-146">Можно попытаться перенести за одну операцию более мелкие решения или отдельные проекты в формат файла проекта .NET Core с помощью средства [dotnet try-convert](https://github.com/dotnet/try-convert).</span><span class="sxs-lookup"><span data-stu-id="fa200-146">You can attempt to port smaller solutions or individual projects in one operation to the .NET Core project file format with the [dotnet try-convert](https://github.com/dotnet/try-convert) tool.</span></span> <span data-ttu-id="fa200-147">Нет гарантии, что `dotnet try-convert` будет поддерживать все проекты. Кроме того, оно может вызвать незначительные изменения в ожидаемом поведении.</span><span class="sxs-lookup"><span data-stu-id="fa200-147">`dotnet try-convert` is not guaranteed to work for all your projects, and it may cause subtle changes in behavior that you depended on.</span></span> <span data-ttu-id="fa200-148">Используйте это средство в качестве _начальной точки_ , которая автоматизирует соответствующие основные процессы.</span><span class="sxs-lookup"><span data-stu-id="fa200-148">Use it as a _starting point_ that automates the basic things that can be automated.</span></span> <span data-ttu-id="fa200-149">Это не гарантированное решение для миграции проекта, поскольку существует множество различий в целевых объектах, используемых проектами в стиле пакета SDK, по сравнению с файлами проектов в старом стиле.</span><span class="sxs-lookup"><span data-stu-id="fa200-149">It isn't a guaranteed solution to migrating a project, as there are many differences in the targets used by the SDK style projects compared to the old-style project files.</span></span>

1. <span data-ttu-id="fa200-150">Перенацельте все переносимые проекты на .NET Framework 4.7.2 и более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="fa200-150">Retarget all projects you wish to port to target .NET Framework 4.7.2 or higher.</span></span>

   <span data-ttu-id="fa200-151">Так вы сможете использовать альтернативные API для целевых платформ .NET Framework в случае, если платформа .NET Core не поддерживает определенный API.</span><span class="sxs-lookup"><span data-stu-id="fa200-151">This step ensures that you can use API alternatives for .NET Framework-specific targets when .NET Core doesn't support a particular API.</span></span>

1. <span data-ttu-id="fa200-152">Обновите все зависимости до последней версии.</span><span class="sxs-lookup"><span data-stu-id="fa200-152">Update all dependencies to the latest version.</span></span> <span data-ttu-id="fa200-153">Проекты могут использовать более старые версии библиотек, которые могут не поддерживать .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="fa200-153">Projects may be using older versions of libraries that may not have .NET Standard support.</span></span> <span data-ttu-id="fa200-154">Однако более поздние версии могут поддерживать его с помощью простого переключателя.</span><span class="sxs-lookup"><span data-stu-id="fa200-154">However, later versions may support it with a simple switch.</span></span> <span data-ttu-id="fa200-155">Для этого может потребоваться изменить код, если в библиотеках есть критические изменения.</span><span class="sxs-lookup"><span data-stu-id="fa200-155">This may require code changes if there are breaking changes in libraries.</span></span>

1. <span data-ttu-id="fa200-156">Чтобы выполнить анализ сборок и узнать, можно ли их перенести в .NET Core, используйте [анализатор переносимости .NET](../../standard/analyzers/portability-analyzer.md).</span><span class="sxs-lookup"><span data-stu-id="fa200-156">Use the [.NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md) to analyze your assemblies and see if they're portable to .NET Core.</span></span>

   <span data-ttu-id="fa200-157">Средство анализатора переносимости .NET позволяет проанализировать скомпилированные сборки и создать отчет.</span><span class="sxs-lookup"><span data-stu-id="fa200-157">The .NET Portability Analyzer tool analyzes your compiled assemblies and generates a report.</span></span> <span data-ttu-id="fa200-158">В этом отчете представлена сводная информация о переносимости и разбивка по каждому используемому API, недоступному в .NET Core.</span><span class="sxs-lookup"><span data-stu-id="fa200-158">This report shows a high-level portability summary and a breakdown of each API you're using that isn't available on NET Core.</span></span> <span data-ttu-id="fa200-159">При использовании этого средства отправляйте только отдельный проект, который вы преобразуете, чтобы сосредоточиться на потенциально необходимых изменениях API.</span><span class="sxs-lookup"><span data-stu-id="fa200-159">While using the tool, only submit the individual project you are converting to focus on the API changes that are potentially needed.</span></span> <span data-ttu-id="fa200-160">Многие API одинаково доступны в .NET Core, на который вы планируете перейти.</span><span class="sxs-lookup"><span data-stu-id="fa200-160">Many of the APIs have equivalent availability in .NET Core, which you'll want to switch to.</span></span>

   <span data-ttu-id="fa200-161">При чтении отчетов, созданных анализатором, обратите внимание на фактические используемые API, а не на процент поддержки для целевой платформы.</span><span class="sxs-lookup"><span data-stu-id="fa200-161">While reading the reports generated by the analyzer, the important information is the actual APIs that are being used and not necessarily the percentage of support for the target platform.</span></span> <span data-ttu-id="fa200-162">Многие API имеют эквиваленты в .NET Standard/Core, и поэтому понимание сценариев, в которых ваша библиотека или приложение используют API, поможет определить влияние на переносимость.</span><span class="sxs-lookup"><span data-stu-id="fa200-162">Many APIs have equivalent options in .NET Standard/Core, and so understanding the scenarios your library or application needs the API for will help determine the implication for portability.</span></span>

   <span data-ttu-id="fa200-163">В некоторых случаях API-интерфейсы не эквивалентны и необходимо выполнить некоторые директивы препроцессора компилятора (т. е. `#if NET45`) для подстройки под платформу.</span><span class="sxs-lookup"><span data-stu-id="fa200-163">There are some cases where APIs are not equivalent and you'll need to do some compiler preprocessor directives (that is, `#if NET45`) to special case the platforms.</span></span> <span data-ttu-id="fa200-164">На этом этапе проект по-прежнему будет нацелен на .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="fa200-164">At this point, your project will still be targeting .NET Framework.</span></span> <span data-ttu-id="fa200-165">Для каждого из этих целевых вариантов рекомендуется использовать хорошо известные условия, которые можно рассматривать как сценарий.</span><span class="sxs-lookup"><span data-stu-id="fa200-165">For each of these targeted cases, it is recommended to use well-known conditionals that can be understood as a scenario.</span></span>  <span data-ttu-id="fa200-166">Например, поддержка домена приложений в .NET Core ограничена, но для сценария загрузки и выгрузки сборок существует новый API, который в .NET Core недоступен.</span><span class="sxs-lookup"><span data-stu-id="fa200-166">For example, AppDomain support in .NET Core is limited, but for the scenario of loading and unloading assemblies, there is a new API that's not available in .NET Core.</span></span> <span data-ttu-id="fa200-167">Распространенный способ решения этой задачи в коде будет выглядеть примерно так:</span><span class="sxs-lookup"><span data-stu-id="fa200-167">A common way to handle this in code would be something like this:</span></span>

   ```csharp
   #if FEATURE_APPDOMAIN_LOADING
   // Code that uses appdomains
   #elif FEATURE_ASSEMBLY_LOAD_CONTEXT
   // Code that uses assembly load context
   #else
   #error Unsupported platform
   #endif
   ```

1. <span data-ttu-id="fa200-168">Установите [анализатор API .NET](../../standard/analyzers/api-analyzer.md) в проектах, чтобы узнать, какие интерфейсы API вызывают исключение <xref:System.PlatformNotSupportedException> на отдельных платформах и другие потенциальные проблемы совместимости.</span><span class="sxs-lookup"><span data-stu-id="fa200-168">Install the [.NET API analyzer](../../standard/analyzers/api-analyzer.md) into your projects to identify APIs that throw <xref:System.PlatformNotSupportedException> on some platforms and some other potential compatibility issues.</span></span>

   <span data-ttu-id="fa200-169">Это средство подобно анализатору переносимости. Но вместо анализа возможности создания кода на платформе .NET Core оно анализирует вероятность использования API на предмет действий, которые могут вызвать <xref:System.PlatformNotSupportedException> во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="fa200-169">This tool is similar to the portability analyzer, but instead of analyzing if code can build on .NET Core, it analyzes whether you're using an API in a way that will throw a <xref:System.PlatformNotSupportedException> at run time.</span></span> <span data-ttu-id="fa200-170">Хотя такая проверка обычно не выполняется при переходе с .NET Framework 4.7.2 и более поздних версий, ее стоит выполнить.</span><span class="sxs-lookup"><span data-stu-id="fa200-170">Although this isn't common if you're moving from .NET Framework 4.7.2 or higher, it's good to check.</span></span> <span data-ttu-id="fa200-171">Дополнительные сведения об API, вызывающих исключения в .NET Core, см. в статье [APIs that always throw exceptions on .NET Core](../compatibility/unsupported-apis.md) (API, которые всегда создают исключения в .NET Core).</span><span class="sxs-lookup"><span data-stu-id="fa200-171">For more information about APIs that throw exceptions on .NET Core, see [APIs that always throw exceptions on .NET Core](../compatibility/unsupported-apis.md).</span></span>

1. <span data-ttu-id="fa200-172">На этом этапе можно переключиться на платформу .NET Core (обычно для приложений) или .NET Standard (для библиотек).</span><span class="sxs-lookup"><span data-stu-id="fa200-172">At this point, you can switch to targeting .NET Core (generally for applications) or .NET Standard (for libraries).</span></span>

   <span data-ttu-id="fa200-173">Выбор между .NET Core и .NET Standard во многом зависит от того, где будет выполняться проект.</span><span class="sxs-lookup"><span data-stu-id="fa200-173">The choice between .NET Core and .NET Standard is largely dependent on where the project will be run.</span></span> <span data-ttu-id="fa200-174">Если это библиотека, которая будет использоваться другими приложениями или распространяться с помощью NuGet, лучше выбрать .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="fa200-174">If it is a library that will be consumed by other applications or distributed via NuGet, the preference is usually to target .NET Standard.</span></span> <span data-ttu-id="fa200-175">Однако могут существовать API-интерфейсы, которые доступны только в .NET Core из-за производительности или иных причин. В этом случае следует использовать .NET Core в качестве целевой платформы и, возможно, иметь дополнительную сборку для .NET Standard с уменьшенной производительностью или функционалом.</span><span class="sxs-lookup"><span data-stu-id="fa200-175">However, there may be APIs that are only available on .NET Core for performance or other reasons; if that's the case, .NET Core should be targeted with potentially a .NET Standard build available as well with reduced performance or functionality.</span></span> <span data-ttu-id="fa200-176">При нацеливании на .NET Standard проект будет готов к выполнению на новых платформах (например, WebAssembly).</span><span class="sxs-lookup"><span data-stu-id="fa200-176">By targeting .NET Standard, the project will be ready to run on new platforms (such as WebAssembly).</span></span> <span data-ttu-id="fa200-177">Если проект имеет зависимости от конкретных платформ приложений (например, ASP.NET Core), целевой объект будет ограничен тем, что поддерживают зависимости.</span><span class="sxs-lookup"><span data-stu-id="fa200-177">If the project has dependencies on specific app frameworks (such as ASP.NET Core), then the target will be limited by what the dependencies support.</span></span>

   <span data-ttu-id="fa200-178">Если нет директив препроцессора для условной компиляции кода для .NET Framework или .NET Standard, достаточно будет найти в файле проекта следующий элемент:</span><span class="sxs-lookup"><span data-stu-id="fa200-178">If there are no preprocessor directives to conditional compile code for .NET Framework or .NET Standard, this will be as simple as finding the following in the project file:</span></span>

   ```xml
   <TargetFramework>net472</TargetFramework>
   ```

   <span data-ttu-id="fa200-179">и переключить его на нужную платформу.</span><span class="sxs-lookup"><span data-stu-id="fa200-179">and switch it to the desired framework.</span></span> <span data-ttu-id="fa200-180">Для .NET Core 3.1 это будет:</span><span class="sxs-lookup"><span data-stu-id="fa200-180">For .NET Core 3.1, this would be:</span></span>

   ```xml
   <TargetFramework>netcoreapp3.1</TargetFramework>
   ```

   <span data-ttu-id="fa200-181">Но если речь идет о библиотеке, для которой нужно сохранить поддержку сборок конкретно под .NET Framework, вы можете использовать [настройку для различных версий](../../standard/library-guidance/cross-platform-targeting.md), заменив элемент следующим образом:</span><span class="sxs-lookup"><span data-stu-id="fa200-181">However, if this is a library for which you want to continue supporting .NET Framework-specific builds, you can [multi-target](../../standard/library-guidance/cross-platform-targeting.md) by replacing it with the following:</span></span>

   ```xml
   <TargetFrameworks>net472;netstandard2.0</TargetFrameworks>
   ```

   <span data-ttu-id="fa200-182">Если вы используете API-интерфейсы для Windows (например, для доступа к реестру), установите [пакет обеспечения совместимости Windows](./windows-compat-pack.md).</span><span class="sxs-lookup"><span data-stu-id="fa200-182">If you're using Windows-specific APIs (such as registry access), install the [Windows Compatibility Pack](./windows-compat-pack.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="fa200-183">Следующие шаги</span><span class="sxs-lookup"><span data-stu-id="fa200-183">Next steps</span></span>

> [!div class="nextstepaction"]
> <span data-ttu-id="fa200-184">[Анализ зависимостей](third-party-deps.md)
> [Создание пакета NuGet](../deploying/creating-nuget-packages.md)</span><span class="sxs-lookup"><span data-stu-id="fa200-184">[Analyze dependencies](third-party-deps.md)
[Package a NuGet package](../deploying/creating-nuget-packages.md)</span></span>

## <a name="see-also"></a><span data-ttu-id="fa200-185">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="fa200-185">See also</span></span>

- [<span data-ttu-id="fa200-186">Миграция с ASP.NET на ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="fa200-186">ASP.NET to ASP.NET Core migration</span></span>](/aspnet/core/migration/proper-to-2x)
- [<span data-ttu-id="fa200-187">Перенос приложений WPF на платформу .NET Core</span><span class="sxs-lookup"><span data-stu-id="fa200-187">Migrate WPF apps to .NET Core</span></span>](/dotnet/desktop/wpf/migration/convert-project-from-net-framework)
- [<span data-ttu-id="fa200-188">Перенос приложений Windows Forms в .NET Core</span><span class="sxs-lookup"><span data-stu-id="fa200-188">Migrate Windows Forms apps to .NET Core</span></span>](winforms.md)
