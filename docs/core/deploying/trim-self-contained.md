---
title: Обрезка автономных приложений
description: Сведения об обрезке автономных приложений для уменьшения их размера. .NET Core объединяет среду выполнения с автономно публикуемым приложением и обычно содержит больше компонентов среды выполнения, чем необходимо.
author: jamshedd
ms.author: jamshedd
ms.date: 01/23/2020
ms.openlocfilehash: 5206ca255c500b382402ac4e7dd3300b7face1cf
ms.sourcegitcommit: 45cced471d59d5dac3f0c92abc9d4849716098a2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/04/2020
ms.locfileid: "80665623"
---
# <a name="trim-self-contained-deployments-and-executables"></a>Обрезка автономных развертываний и исполняемых файлов

При публикации автономного приложения среда выполнения .NET Core объединяется с приложением. В этом случае в упакованное приложение добавляется значительный объем содержимого.

Когда дело доходит до развертывания приложения, размер часто является важным фактором. Как правило, разработчики приложений стремятся максимально уменьшить размер пакета приложения.

В зависимости от сложности приложения для его запуска и работы требуется только подмножество среды выполнения. Неиспользуемые компоненты среды выполнения не нужны, поэтому их можно удалить из упакованного приложения.

> [!NOTE]
> Обрезка — это экспериментальная функция в .NET Core 3.1, которая доступна _только_ для автономно публикуемых приложений.

## <a name="trim-your-application"></a>Обрезка приложения

В следующем примере показано, как обрезать приложение с помощью команды [dotnet publish](../tools/dotnet-publish.md).

```dotnetcli
dotnet publish -c Release -r win10-x64 --self-contained true /p:PublishSingleFile=false /p:PublishTrimmed=true
```

Функция обрезки проверяет двоичные файлы приложения, чтобы найти требуемые сборки среды выполнения и построить соответствующий граф. Оставшиеся сборки среды выполнения, на которые отсутствуют ссылки, обрезаются.

## <a name="trimming-issues-when-using-reflection"></a>Проблемы с обрезкой при использовании отражения

В некоторых случаях функции обрезки не удается обнаружить ссылки. Например, эта проблема может возникнуть в приложении, использующем отражение, поскольку зависимость от сборки будет известна только во время выполнения.

Обрезка является проблемой только в том случае, если использование отражения зависит от сборки среды выполнения, на которую нет прямой ссылки. Необходимо иметь в виду, что код приложения может не использовать отражение напрямую, но его может использовать сторонняя сборка, на которую указывает ссылка.

Если код ссылается на API через отражение и вы не хотите, чтобы компоновщик обрезал сборку, содержащую этот API, можно изменить файл проекта так, чтобы исключить сборку из процесса обрезки. В следующем примере показано исключение сборки `System.Security` из процесса обрезки.

```xml
<ItemGroup>
    <TrimmerRootAssembly Include="System.Security" />
</ItemGroup>
```

## <a name="see-also"></a>См. также

- [Развертывание приложений .NET Core](index.md)
