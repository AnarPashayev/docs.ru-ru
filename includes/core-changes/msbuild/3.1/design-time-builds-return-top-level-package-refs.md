---
ms.openlocfilehash: 53840ddd59ae3463bae2930fd0151ab2cd2d65cb
ms.sourcegitcommit: e301979e3049ce412d19b094c60ed95b316a8f8c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/16/2020
ms.locfileid: "97593333"
---
### <a name="design-time-builds-only-return-top-level-package-references"></a><span data-ttu-id="8e2ce-101">Сборки времени разработки возвращают только ссылки на пакеты верхнего уровня</span><span class="sxs-lookup"><span data-stu-id="8e2ce-101">Design-time builds only return top-level package references</span></span>

<span data-ttu-id="8e2ce-102">Начиная с пакета SDK для .NET Core 3.1.400 целевой `RunResolvePackageDependencies` возвращает только ссылки на пакеты верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="8e2ce-102">Starting in .NET Core SDK 3.1.400, only top-level package references are returned by the `RunResolvePackageDependencies` target.</span></span>

#### <a name="version-introduced"></a><span data-ttu-id="8e2ce-103">Представленная версия</span><span class="sxs-lookup"><span data-stu-id="8e2ce-103">Version introduced</span></span>

<span data-ttu-id="8e2ce-104">Пакет SDK для .NET Core 3.1.400</span><span class="sxs-lookup"><span data-stu-id="8e2ce-104">.NET Core SDK 3.1.400</span></span>

#### <a name="change-description"></a><span data-ttu-id="8e2ce-105">Описание изменений</span><span class="sxs-lookup"><span data-stu-id="8e2ce-105">Change description</span></span>

<span data-ttu-id="8e2ce-106">В предыдущих версиях пакета SDK для .NET Core целевой объект `RunResolvePackageDependencies` создавал следующие элементы MSBuild, которые содержали информацию из файла ресурсов NuGet:</span><span class="sxs-lookup"><span data-stu-id="8e2ce-106">In previous versions of the .NET Core SDK, the `RunResolvePackageDependencies` target created the following MSBuild items that contained information from the NuGet assets file:</span></span>

- `PackageDefinitions`
- `PackageDependencies`
- `TargetDefinitions`
- `FileDefinitions`
- `FileDependencies`

<span data-ttu-id="8e2ce-107">Эти данные используются в Visual Studio для заполнения узла зависимостей в обозревателе решений.</span><span class="sxs-lookup"><span data-stu-id="8e2ce-107">This data is used by Visual Studio to populate the Dependencies node in Solution Explorer.</span></span> <span data-ttu-id="8e2ce-108">Однако объем данных может быть большим, и эти данные не нужны, если узел зависимости не развернут.</span><span class="sxs-lookup"><span data-stu-id="8e2ce-108">However, it can be a large amount of data, and the data isn't needed unless the Dependencies node is expanded.</span></span>

<span data-ttu-id="8e2ce-109">Начиная с пакета SDK для .NET Core версии 3.1.400 большинство этих элементов не создается по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="8e2ce-109">Starting in the .NET Core SDK version 3.1.400, most of these items aren't generated by default.</span></span> <span data-ttu-id="8e2ce-110">Возвращаются только элементы типа `Package`.</span><span class="sxs-lookup"><span data-stu-id="8e2ce-110">Only items of type `Package` are returned.</span></span> <span data-ttu-id="8e2ce-111">Если Visual Studio требуются элементы для заполнения узла зависимостей, он считывает информацию непосредственно из файла ресурсов.</span><span class="sxs-lookup"><span data-stu-id="8e2ce-111">If Visual Studio needs the items to populate the Dependencies node, it reads the information directly from the assets file.</span></span>

#### <a name="reason-for-change"></a><span data-ttu-id="8e2ce-112">Причина изменения</span><span class="sxs-lookup"><span data-stu-id="8e2ce-112">Reason for change</span></span>

<span data-ttu-id="8e2ce-113">Это было введено для улучшения производительности при загрузке решения в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8e2ce-113">This changed was introduced to improve solution-load performance inside of Visual Studio.</span></span> <span data-ttu-id="8e2ce-114">Ранее загружались все ссылки на пакеты, что приводило к загрузке множества ссылок, которые большинство пользователей никогда не увидят.</span><span class="sxs-lookup"><span data-stu-id="8e2ce-114">Previously, all package references would be loaded, which involved loading many references that most users would never view.</span></span>

#### <a name="recommended-action"></a><span data-ttu-id="8e2ce-115">Рекомендованное действие</span><span class="sxs-lookup"><span data-stu-id="8e2ce-115">Recommended action</span></span>

<span data-ttu-id="8e2ce-116">Если логика MSBuild зависит от создаваемых элементов, задайте для свойства `EmitLegacyAssetsFileItems` в файле проекта значение `true`.</span><span class="sxs-lookup"><span data-stu-id="8e2ce-116">If you have MSBuild logic that depends on these items being created, set the `EmitLegacyAssetsFileItems` property to `true` in your project file.</span></span> <span data-ttu-id="8e2ce-117">Этот параметр включает предыдущее поведение, при котором создаются все элементы.</span><span class="sxs-lookup"><span data-stu-id="8e2ce-117">This setting enables the previous behavior where all the items are created.</span></span>

#### <a name="category"></a><span data-ttu-id="8e2ce-118">Категория</span><span class="sxs-lookup"><span data-stu-id="8e2ce-118">Category</span></span>

<span data-ttu-id="8e2ce-119">MSBuild</span><span class="sxs-lookup"><span data-stu-id="8e2ce-119">MSBuild</span></span>

#### <a name="affected-apis"></a><span data-ttu-id="8e2ce-120">Затронутые API</span><span class="sxs-lookup"><span data-stu-id="8e2ce-120">Affected APIs</span></span>

<span data-ttu-id="8e2ce-121">Н/Д</span><span class="sxs-lookup"><span data-stu-id="8e2ce-121">N/A</span></span>
