---
ms.openlocfilehash: 895d09e4ec39bd4a92ed1f4910da80474334d99b
ms.sourcegitcommit: cbacb5d2cebbf044547f6af6e74a9de866800985
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/05/2020
ms.locfileid: "89496493"
---
### <a name="accessibility-improvements-in-wpf"></a><span data-ttu-id="9c2a2-101">Улучшения специальных возможностей в WPF</span><span class="sxs-lookup"><span data-stu-id="9c2a2-101">Accessibility improvements in WPF</span></span>

#### <a name="details"></a><span data-ttu-id="9c2a2-102">Подробнее</span><span class="sxs-lookup"><span data-stu-id="9c2a2-102">Details</span></span>

<span data-ttu-id="9c2a2-103">**Улучшения режима высокой контрастности**</span><span class="sxs-lookup"><span data-stu-id="9c2a2-103">**High Contrast improvements**</span></span>

- <span data-ttu-id="9c2a2-104">Фокус для элемента управления <xref:System.Windows.Controls.Expander> теперь отображается.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-104">The focus for the <xref:System.Windows.Controls.Expander> control is now visible.</span></span> <span data-ttu-id="9c2a2-105">В предыдущих версиях .NET Framework это было не так.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-105">In previous versions of .NET Framework, it was not.</span></span>
- <span data-ttu-id="9c2a2-106">При выборе элементов управления <xref:System.Windows.Controls.CheckBox> и <xref:System.Windows.Controls.RadioButton> текст в них более удобен для восприятия по сравнению с предыдущими версиями .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-106">The text in <xref:System.Windows.Controls.CheckBox> and <xref:System.Windows.Controls.RadioButton> controls when they are selected is now easier to see than in previous .NET Framework versions.</span></span>
- <span data-ttu-id="9c2a2-107">Граница отключенного элемента <xref:System.Windows.Controls.ComboBox> теперь отображается тем же цветом, что и его текст.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-107">The border of a disabled <xref:System.Windows.Controls.ComboBox> is now the same color as the disabled text.</span></span> <span data-ttu-id="9c2a2-108">В предыдущих версиях .NET Framework это было не так.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-108">In previous versions of .NET Framework, it was not.</span></span>
- <span data-ttu-id="9c2a2-109">Отключенные и находящиеся в фокусе кнопки теперь используют правильный цвет темы.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-109">Disabled and focused buttons now use the correct theme color.</span></span> <span data-ttu-id="9c2a2-110">В предыдущих версиях .NET Framework это было не так.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-110">In previous versions of .NET Framework, they did not.</span></span>
- <span data-ttu-id="9c2a2-111">Теперь, когда для стиля элемента управления <xref:System.Windows.Controls.ComboBox> задано значение <xref:System.Windows.Controls.ToolBar.ComboBoxStyleKey?displayProperty=nameWithType>, отображается кнопка раскрывающегося списка.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-111">The dropdown button is now visible when a <xref:System.Windows.Controls.ComboBox> control's style is set to <xref:System.Windows.Controls.ToolBar.ComboBoxStyleKey?displayProperty=nameWithType>.</span></span> <span data-ttu-id="9c2a2-112">В предыдущих версиях .NET Framework это было не так.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-112">In previous versions of .NET Framework, it was not.</span></span>
- <span data-ttu-id="9c2a2-113">Для индикатора стрелки направления сортировки в элементе управления <xref:System.Windows.Controls.DataGrid> теперь используются цвета темы.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-113">The sort indicator arrow in a <xref:System.Windows.Controls.DataGrid> control now uses theme colors.</span></span> <span data-ttu-id="9c2a2-114">В предыдущих версиях .NET Framework это было не так.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-114">In previous versions of .NET Framework, it did not.</span></span>
- <span data-ttu-id="9c2a2-115">Стиль по умолчанию для гиперссылки теперь изменяется на соответствующий цвет темы при наведении указателя мыши.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-115">The default hyperlink style now changes to the correct theme color on mouse over.</span></span> <span data-ttu-id="9c2a2-116">В предыдущих версиях .NET Framework это было не так.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-116">In previous versions of .NET Framework, it did not.</span></span>
- <span data-ttu-id="9c2a2-117">Теперь отображается фокус клавиатуры на переключателях.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-117">The Keyboard focus on radio buttons is now visible.</span></span> <span data-ttu-id="9c2a2-118">В предыдущих версиях .NET Framework это было не так.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-118">In previous versions of .NET Framework, it was not.</span></span>
- <span data-ttu-id="9c2a2-119">Для столбца флажков элемента управления <xref:System.Windows.Controls.DataGrid> теперь используются соответствующие цвета, отражающие фокус клавиатуры.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-119">The <xref:System.Windows.Controls.DataGrid> control's checkbox column now uses the expected colors for keyboard focus feedback.</span></span> <span data-ttu-id="9c2a2-120">В предыдущих версиях .NET Framework это было не так.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-120">In previous versions of .NET Framework, it did not.</span></span>
- <span data-ttu-id="9c2a2-121">Визуальные элементы фокуса клавиатуры теперь отображаются на элементах управления <xref:System.Windows.Controls.ComboBox> и <xref:System.Windows.Controls.ListBox>.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-121">the Keyboard focus visuals are now visible on <xref:System.Windows.Controls.ComboBox> and <xref:System.Windows.Controls.ListBox> controls.</span></span> <span data-ttu-id="9c2a2-122">В предыдущих версиях .NET Framework это было не так.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-122">In previous versions of .NET Framework, it was not.</span></span>

<span data-ttu-id="9c2a2-123">**Улучшения взаимодействия со средством чтения с экрана**</span><span class="sxs-lookup"><span data-stu-id="9c2a2-123">**Screen reader interaction improvements**</span></span>

- <span data-ttu-id="9c2a2-124">Средства чтения с экрана теперь правильно объявляют элементы управления <xref:System.Windows.Controls.Expander> как группы (развертывание/свертывание).</span><span class="sxs-lookup"><span data-stu-id="9c2a2-124"><xref:System.Windows.Controls.Expander> controls are now correctly announced as groups (expand/collapse) by screen readers.</span></span>
- <span data-ttu-id="9c2a2-125">Средства чтения с экрана теперь правильно объявляют элементы управления <xref:System.Windows.Controls.DataGridCell> как ячейки сетки данных (локализованные).</span><span class="sxs-lookup"><span data-stu-id="9c2a2-125"><xref:System.Windows.Controls.DataGridCell> controls are now correctly announced as data grid cell (localized) by screen readers.</span></span>
- <span data-ttu-id="9c2a2-126">Средства чтения с экрана теперь объявляют имя редактируемого элемента управления <xref:System.Windows.Controls.ComboBox>.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-126">Screen readers will now announce the name of an editable <xref:System.Windows.Controls.ComboBox>.</span></span>
- <span data-ttu-id="9c2a2-127">Элементы управления <xref:System.Windows.Controls.PasswordBox> больше не объявляются с ошибкой «Не выбран элемент для просмотра» в средствах чтения с экрана.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-127"><xref:System.Windows.Controls.PasswordBox> controls are no longer announced as "no item in view" by screen readers.</span></span>

<span data-ttu-id="9c2a2-128">**Поддержка динамических областей**</span><span class="sxs-lookup"><span data-stu-id="9c2a2-128">**LiveRegion support**</span></span>

<span data-ttu-id="9c2a2-129">Средства чтения с экрана, такие как экранный диктор, помогают людям понять пользовательский интерфейс приложения, обычно путем описания элемента пользовательского интерфейса, который в данный момент находится в фокусе.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-129">Screen readers, such as Narrator, help people understand the user interface (UI) of an application, usually by describing the UI element that currently has focus.</span></span> <span data-ttu-id="9c2a2-130">Однако если элемент пользовательского интерфейса изменяется в каком-либо месте экрана и находится не в фокусе, пользователь может не получить уведомление и пропустить важные сведения.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-130">However, if a UI element changes somewhere in the screen and it does not have the focus, the user may not be informed and miss important information.</span></span> <span data-ttu-id="9c2a2-131">Решить эту проблему позволяет применение динамических областей.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-131">LiveRegions are meant to solve this problem.</span></span> <span data-ttu-id="9c2a2-132">Разработчик может использовать их для информирования средства чтения с экрана или любого другого клиента [автоматизации пользовательского интерфейса](~/docs/framework/ui-automation/ui-automation-overview.md) о важных изменениях элемента пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-132">A developer can use them to inform the screen reader or any other [UI Automation](~/docs/framework/ui-automation/ui-automation-overview.md) client that an important change has been made to a UI element.</span></span> <span data-ttu-id="9c2a2-133">После этого средство чтения с экрана может решить, уведомлять ли пользователя об этом изменении.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-133">The screen reader can then decide how and when to inform the user of this change.</span></span> <span data-ttu-id="9c2a2-134">Свойство LiveSetting также позволяет средствам чтения с экрана узнать, насколько важно информировать пользователя о произошедшем в пользовательском интерфейсе изменении.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-134">The LiveSetting property also lets the screen reader know how important it is to inform the user of the change made to the UI.</span></span>

#### <a name="suggestion"></a><span data-ttu-id="9c2a2-135">Предложение</span><span class="sxs-lookup"><span data-stu-id="9c2a2-135">Suggestion</span></span>

<span data-ttu-id="9c2a2-136">**Как принять или отклонить изменения**</span><span class="sxs-lookup"><span data-stu-id="9c2a2-136">**How to opt in or out of these changes**</span></span>

<span data-ttu-id="9c2a2-137">Чтобы эти изменения можно было использовать в приложении, оно должно быть запущено на платформе .NET Framework 4.7.1 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-137">In order for the application to benefit from these changes, it must run on .NET Framework 4.7.1 or later.</span></span> <span data-ttu-id="9c2a2-138">В приложении эти изменения можно использовать одним из следующих способов:</span><span class="sxs-lookup"><span data-stu-id="9c2a2-138">The application can benefit from these changes in either of the following ways:</span></span>

- <span data-ttu-id="9c2a2-139">Целевая платформа .NET Framework 4.7.1.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-139">Target .NET Framework 4.7.1.</span></span> <span data-ttu-id="9c2a2-140">Этот способ является рекомендуемым.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-140">This is the recommended approach.</span></span> <span data-ttu-id="9c2a2-141">Эти специальные возможности включены по умолчанию для приложений WPF, ориентированных на .NET Framework 4.7.1 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-141">These accessibility changes are enabled by default on WPF applications that target .NET Framework 4.7.1 or later.</span></span>
- <span data-ttu-id="9c2a2-142">Для отказа от функций специальных возможностей предыдущих версий [переключатель AppContext](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) добавляется в раздел `<runtime>` файла конфигурации приложения и получает значение `false`, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-142">It opts out of the legacy accessibility behaviors by adding the following [AppContext Switch](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) in the `<runtime>` section of the app config file and setting it to `false`, as the following example shows.</span></span>

  ```xml
  <?xml version="1.0" encoding="utf-8"?>
  <configuration>
    <startup>
      <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.7"/>
    </startup>
    <runtime>
      <!-- AppContextSwitchOverrides value attribute is in the form of 'key1=true/false;key2=true/false'  -->
      <AppContextSwitchOverrides value="Switch.UseLegacyAccessibilityFeatures=false" />
    </runtime>
  </configuration>
  ```

<span data-ttu-id="9c2a2-143">В приложениях, предназначенных для .NET Framework 4.7.1 или более поздней версии, где требуется сохранить предыдущие функции специальных возможностей, можно выбрать прежние функции специальных возможностей, явно установив этот переключатель AppContext в значение `true`.</span><span class="sxs-lookup"><span data-stu-id="9c2a2-143">Applications that target .NET Framework 4.7.1 or later and want to preserve the legacy accessibility behavior can opt in to the use of legacy accessibility features by explicitly setting this AppContext switch to `true`.</span></span>
<span data-ttu-id="9c2a2-144">Обзор автоматизации пользовательского интерфейса см. в разделе [Общие сведения об автоматизации пользовательского интерфейса](~/docs/framework/ui-automation/ui-automation-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9c2a2-144">For an overview of UI automation, see [UI Automation Overview](~/docs/framework/ui-automation/ui-automation-overview.md).</span></span>

| <span data-ttu-id="9c2a2-145">Имя</span><span class="sxs-lookup"><span data-stu-id="9c2a2-145">Name</span></span>    | <span data-ttu-id="9c2a2-146">Значение</span><span class="sxs-lookup"><span data-stu-id="9c2a2-146">Value</span></span>       |
|:--------|:------------|
| <span data-ttu-id="9c2a2-147">Область</span><span class="sxs-lookup"><span data-stu-id="9c2a2-147">Scope</span></span>   | <span data-ttu-id="9c2a2-148">Значительно</span><span class="sxs-lookup"><span data-stu-id="9c2a2-148">Major</span></span>       |
| <span data-ttu-id="9c2a2-149">Version</span><span class="sxs-lookup"><span data-stu-id="9c2a2-149">Version</span></span> | <span data-ttu-id="9c2a2-150">4.7.1</span><span class="sxs-lookup"><span data-stu-id="9c2a2-150">4.7.1</span></span>       |
| <span data-ttu-id="9c2a2-151">Type</span><span class="sxs-lookup"><span data-stu-id="9c2a2-151">Type</span></span>    | <span data-ttu-id="9c2a2-152">Изменение целевой платформы</span><span class="sxs-lookup"><span data-stu-id="9c2a2-152">Retargeting</span></span> |

#### <a name="affected-apis"></a><span data-ttu-id="9c2a2-153">Затронутые API</span><span class="sxs-lookup"><span data-stu-id="9c2a2-153">Affected APIs</span></span>

- <xref:System.Windows.Automation.AutomationElementIdentifiers.LiveSettingProperty?displayProperty=nameWithType>
- <xref:System.Windows.Automation.AutomationElementIdentifiers.LiveRegionChangedEvent?displayProperty=nameWithType>
- <xref:System.Windows.Automation.AutomationLiveSetting?displayProperty=nameWithType>
- <xref:System.Windows.Automation.AutomationProperties.LiveSettingProperty?displayProperty=nameWithType>
- <xref:System.Windows.Automation.AutomationProperties.SetLiveSetting(System.Windows.DependencyObject,System.Windows.Automation.AutomationLiveSetting)?displayProperty=nameWithType>
- <xref:System.Windows.Automation.AutomationProperties.GetLiveSetting(System.Windows.DependencyObject)?displayProperty=nameWithType>
- <xref:System.Windows.Automation.Peers.AutomationPeer.GetLiveSettingCore?displayProperty=nameWithType>
