---
ms.openlocfilehash: 47aa67096f8dcd250521d9c34dde97cb2eb368d7
ms.sourcegitcommit: d55e14eb63588830c0ba1ea95a24ce6c57ef8c8c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2019
ms.locfileid: "67803491"
---
### <a name="workflow-xoml-definition-and-sqltrackingservice-cache-keys-changed-from-md5-to-sha256"></a><span data-ttu-id="35b52-101">Определение рабочего процесса XOML и ключи кэша SqlTrackingService переведены с MD5 на SHA256</span><span class="sxs-lookup"><span data-stu-id="35b52-101">Workflow XOML definition and SqlTrackingService cache keys changed from MD5 to SHA256</span></span>

|   |   |
|---|---|
|<span data-ttu-id="35b52-102">Подробные сведения</span><span class="sxs-lookup"><span data-stu-id="35b52-102">Details</span></span>|<span data-ttu-id="35b52-103">Среда выполнения рабочих процессов хранит кэш определений рабочих процессов, определенных в XOML.</span><span class="sxs-lookup"><span data-stu-id="35b52-103">The Workflow Runtime in keeps a cache of workflow definitions defined in XOML.</span></span> <span data-ttu-id="35b52-104">SqlTrackingService также хранит кэш с ключом по строкам.</span><span class="sxs-lookup"><span data-stu-id="35b52-104">The SqlTrackingService also keeps a cache that is keyed by strings.</span></span> <span data-ttu-id="35b52-105">Эти кэши идентифицируются по значениям, которые включают хэш-значение контрольной суммы.</span><span class="sxs-lookup"><span data-stu-id="35b52-105">These caches are keyed by values that include checksum hash value.</span></span> <span data-ttu-id="35b52-106">В .NET Framework 4.7.2 и более ранних версий для хэширования этой контрольной суммы использовался алгоритм MD5, что приводило к проблемам в системах с поддержкой стандарта FIPS.</span><span class="sxs-lookup"><span data-stu-id="35b52-106">In the .NET Framework 4.7.2 and earlier versions, this checksum hashing used the MD5 algorithm, which caused issues on FIPS-enabled systems.</span></span> <span data-ttu-id="35b52-107">Начиная с .NET Framework 4.8 используется алгоритм SHA256. Так как значения вычисляются при каждом запуске среды выполнения рабочих процессов и службы SqlTrackingService, не должно возникнуть проблем совместимости с этим изменением.</span><span class="sxs-lookup"><span data-stu-id="35b52-107">Starting with the .NET Framework 4.8, the algorithm used is SHA256.There shouldn't be an compatability issue with this change because the values are recalculated each time the Workflow Runtime and SqlTrackingService is started.</span></span> <span data-ttu-id="35b52-108">Тем не менее мы предоставили исправления, чтобы позволить клиентам вернуться к использованию устаревшего алгоритма хэширования при необходимости.</span><span class="sxs-lookup"><span data-stu-id="35b52-108">However, we have provided quirks to allow customers to revert back to usage of the legacy hashing algorithm, if necessary.</span></span>|
|<span data-ttu-id="35b52-109">Предложение</span><span class="sxs-lookup"><span data-stu-id="35b52-109">Suggestion</span></span>|<span data-ttu-id="35b52-110">Если это изменение вызывает проблему при выполнении рабочих процессов, установите для одного или обоих параметров <code>AppContext</code>:</span><span class="sxs-lookup"><span data-stu-id="35b52-110">If this change presents a problem when executing workflows, try setting one or both of the <code>AppContext</code> switches:</span></span><ul><li><span data-ttu-id="35b52-111">&quot;Switch.System.Workflow.Runtime.UseLegacyHashForWorkflowDefinitionDispenserCacheKey&quot; значение true.</span><span class="sxs-lookup"><span data-stu-id="35b52-111">&quot;Switch.System.Workflow.Runtime.UseLegacyHashForWorkflowDefinitionDispenserCacheKey&quot; to true.</span></span></li><li><span data-ttu-id="35b52-112">&quot;Switch.System.Workflow.Runtime.UseLegacyHashForSqlTrackingCacheKey&quot; значение true.</span><span class="sxs-lookup"><span data-stu-id="35b52-112">&quot;Switch.System.Workflow.Runtime.UseLegacyHashForSqlTrackingCacheKey&quot; to true.</span></span></li></ul><span data-ttu-id="35b52-113">В коде:</span><span class="sxs-lookup"><span data-stu-id="35b52-113">In code:</span></span><pre><code class="lang-csharp">System.AppContext.SetSwitch(&quot;Switch.System.Workflow.Runtime.UseLegacyHashForWorkflowDefinitionDispenserCacheKey&quot;, true);&#13;&#10;System.AppContext.SetSwitch(&quot;Switch.System.Workflow.Runtime.UseLegacyHashForSqlTrackingCacheKey&quot;, true);&#13;&#10;</code></pre><span data-ttu-id="35b52-114">Или в файле конфигурации (это необходимо сделать в файле конфигурации приложения, который создает объект <xref:System.Workflow.Runtime.WorkflowRuntime>):</span><span class="sxs-lookup"><span data-stu-id="35b52-114">Or in the configuration file (this needs to be in the config file for the application that is creating the <xref:System.Workflow.Runtime.WorkflowRuntime> object):</span></span><pre><code class="lang-xml">&lt;configuration&gt;&#13;&#10;&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Workflow.Runtime.UseLegacyHashForWorkflowDefinitionDispenserCacheKey=true&quot; /&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Workflow.Runtime.UseLegacyHashForSqlTrackingCacheKeytrue&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;&lt;/configuration&gt;&#13;&#10;</code></pre>|
|<span data-ttu-id="35b52-115">Область</span><span class="sxs-lookup"><span data-stu-id="35b52-115">Scope</span></span>|<span data-ttu-id="35b52-116">Дополнительный номер</span><span class="sxs-lookup"><span data-stu-id="35b52-116">Minor</span></span>|
|<span data-ttu-id="35b52-117">Версия</span><span class="sxs-lookup"><span data-stu-id="35b52-117">Version</span></span>|<span data-ttu-id="35b52-118">4.8</span><span class="sxs-lookup"><span data-stu-id="35b52-118">4.8</span></span>|
|<span data-ttu-id="35b52-119">Тип</span><span class="sxs-lookup"><span data-stu-id="35b52-119">Type</span></span>|<span data-ttu-id="35b52-120">Изменение целевой платформы</span><span class="sxs-lookup"><span data-stu-id="35b52-120">Retargeting</span></span>|

