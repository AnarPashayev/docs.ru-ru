---
ms.openlocfilehash: e528a41748d9353c96d443f68e15e7a98ee7f4ae
ms.sourcegitcommit: e02d17b2cf9c1258dadda4810a5e6072a0089aee
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/01/2020
ms.locfileid: "85616307"
---
### <a name="accessibility-improvements-in-windows-forms-controls-for-net-48"></a>Улучшения специальных возможностей для элементов управления Windows Forms в .NET Framework 4.8

#### <a name="details"></a>Подробнее

В платформе Windows Forms продолжается улучшение использования специальных возможностей, обеспечивающих большее удобство для пользователей Windows Forms. Внесены следующие изменения:

- Изменения для улучшения видимости в режиме высокой контрастности.
- Изменения в порядке взаимодействия с экранным диктором.
- Изменения в иерархии специальных возможностей (улучшение навигации по дереву автоматизации пользовательского интерфейса).

#### <a name="suggestion"></a>Предложение

**Как принять или отклонить изменения** Чтобы эти изменения можно было использовать в приложении, оно должно быть запущено на платформе .NET Framework 4.8. В приложении эти изменения можно использовать одним из следующих способов:

- Выполнить повторную компиляцию, чтобы нацелить приложение на .NET Framework 4.8. Эти изменения специальных возможностей включены по умолчанию для приложений Windows Forms, предназначенных для .NET Framework 4.8.
- Оно нацелено на .NET Framework 4.7.2 и более ранние версии платформы и позволяет отказаться от функций специальных возможностей предыдущих версий путем добавления [параметра AppContext](https://docs.microsoft.com/dotnet/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element) в раздел `<runtime>` файла конфигурации приложения и установки значения `false`, как показано в следующем примере.

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.7"/>
  </startup>
  <runtime>
    <!-- AppContextSwitchOverrides value attribute is in the form of 'key1=true/false;key2=true/false  -->
    <AppContextSwitchOverrides value="Switch.UseLegacyAccessibilityFeatures=false;Switch.UseLegacyAccessibilityFeatures.2=false;Switch.UseLegacyAccessibilityFeatures.3=false" />
  </runtime>
</configuration>
```

Обратите внимание, что для включения использования специальных возможностей, добавленных в .NET Framework 4.8, необходимо также включить специальные возможности платформы .NET Framework 4.7.1 и 4.7.2. В приложениях, предназначенных для .NET Framework 4.8, где требуется сохранить предыдущие функции специальных возможностей, можно выбрать прежние функции специальных возможностей, явно установив параметр AppContext в значение `true`. Для включения поддержки вызова подсказок для клавиатуры требуется добавить строку `Switch.System.Windows.Forms.UseLegacyToolTipDisplay=false` со значением AppContextSwitchOverrides:

```xml
<AppContextSwitchOverrides value="Switch.UseLegacyAccessibilityFeatures=false;Switch.UseLegacyAccessibilityFeatures.2=false;Switch.UseLegacyAccessibilityFeatures.3=false;Switch.System.Windows.Forms.UseLegacyToolTipDisplay=false" />
```

Обратите внимание, что для включения этой функции требуется включение упомянутых выше специальных возможностей .NET Framework 4.7.1–4.8. Кроме того, если вы не включили какую-либо из специальных возможностей, но включили функцию отображения подсказок, среда выполнения будет вызывать исключение <xref:System.NotSupportedException> при первом доступе к этим функциям. Сообщение об исключении указывает, что подсказки по клавиатуре требуют включить улучшения специальных возможностей уровня 3.

**Использование определенных в ОС цветов в темах высокой контрастности**

- Улучшенные темы высокой контрастности.

**Улучшенная поддержка экранного диктора**

- Экранный диктор теперь сообщает направление сортировки <xref:System.Windows.Forms.DataGridViewColumn> при объявлении доступного имени <xref:System.Windows.Forms.DataGridViewCell>.

**Улучшенная поддержка специальных возможностей CheckedListBox**

- Улучшенная поддержка экранного диктора для элемента управления <xref:System.Windows.Forms.CheckedListBox>. При переходе к элементу управления <xref:System.Windows.Forms.CheckedListBox> с помощью клавиатуры экранный диктор фокусируется на элементе <xref:System.Windows.Forms.CheckedListBox> и объявляет его.
- Пустой элемент управления CheckedListBox теперь содержит прямоугольник фокуса, нарисованный для виртуального первого элемента, при переходе фокуса на элемент управления.

**Улучшенная поддержка специальных возможностей элемента управления ComboBox**

- Включена поддержка автоматизации пользовательского интерфейса для элемента управления <xref:System.Windows.Forms.ComboBox> с возможностью использовать уведомления об автоматизации пользовательского интерфейса и другие функции автоматизации пользовательского интерфейса.
**Улучшенная поддержка специальных возможностей DataGridView**

- Включена поддержка автоматизации пользовательского интерфейса для элемента управления <xref:System.Windows.Forms.DataGridView> с возможностью использовать уведомления об автоматизации пользовательского интерфейса и другие функции автоматизации пользовательского интерфейса.
- Элемент автоматизации пользовательского интерфейса, который соответствует <xref:System.Windows.Forms.DataGridViewComboBoxEditingControl> или <xref:System.Windows.Forms.DataGridViewTextBoxEditingControl>, теперь является дочерним для соответствующей изменяемой ячейки.

**Улучшенная поддержка специальных возможностей LinkLabel**

- Улучшенные специальные возможности элемента управления <xref:System.Windows.Forms.LinkLabel>: Экранный диктор объявляет об отключенном состоянии для ссылки, если соответствующий элемент управления <xref:System.Windows.Forms.LinkLabel> отключен.

**Улучшенная поддержка специальных возможностей элемента управления ProgressBar**

- Включена поддержка автоматизации пользовательского интерфейса для элемента управления <xref:System.Windows.Forms.ProgressBar> с возможностью использовать уведомления об автоматизации пользовательского интерфейса и другие функции автоматизации пользовательского интерфейса. Теперь разработчики могут использовать уведомления об автоматизации пользовательского интерфейса, которые экранный диктор может объявлять для отображения хода выполнения.
Общие сведения о событиях автоматизации пользовательского интерфейса, включая события уведомления об автоматизации пользовательского интерфейса, см. в разделе [Обзор событий автоматизации пользовательского интерфейса](https://docs.microsoft.com/windows/desktop/WinAuto/uiauto-eventsoverview).

**Улучшенная поддержка специальных возможностей PropertyGrid**

- Включена поддержка автоматизации пользовательского интерфейса для элемента управления <xref:System.Windows.Forms.PropertyGrid> с возможностью использовать уведомления об автоматизации пользовательского интерфейса и другие функции автоматизации пользовательского интерфейса.
- Элемент автоматизации пользовательского интерфейса, который соответствует текущему изменяемому свойству, теперь является дочерним соответствующего свойства элемента модели автоматизации пользовательского интерфейса.
- Элемент свойства модели автоматизации пользовательского интерфейса теперь является дочерним для соответствующего элемента категории, если родительский элемент управления <xref:System.Windows.Forms.PropertyGrid> задан на представление категорий.

**Улучшенная поддержка элемента управления ToolStrip**

- Включена поддержка автоматизации пользовательского интерфейса для элемента управления <xref:System.Windows.Forms.ToolStrip> с возможностью использовать уведомления об автоматизации пользовательского интерфейса и другие функции автоматизации пользовательского интерфейса.
- Улучшенная навигация по элементам <xref:System.Windows.Forms.ToolStrip>.
- В режиме элементов фокус экранного диктора не исчезает и не переходит к скрытым элементам.

**Улучшенные визуальные подсказки**

- Пустой элемент управления <xref:System.Windows.Forms.CheckedListBox> теперь отображает индикатор фокуса при получении фокуса.
Примечание. Поддержка автоматизации пользовательского интерфейса включена для элементов управления в среде выполнения, но не используется во время разработки. Обзор автоматизации пользовательского интерфейса см. в разделе [Общие сведения об автоматизации пользовательского интерфейса](https://docs.microsoft.com/dotnet/framework/ui-automation/ui-automation-overview).

**Вызов подсказок по элементам управления с помощью клавиатуры**

- Подсказки по элементам управления теперь можно вызвать с помощью перехода на элемент управления с использованием клавиатуры. Эту функцию нужно включить явным образом для приложения (см. раздел **&quot;Как принять или отклонить изменения&quot;** )

| name    | Значение       |
|:--------|:------------|
| Область   | Значительно       |
| Version | 4.8         |
| Type    | Изменение целевой платформы |
