---
ms.openlocfilehash: 140a9044b553a008112af93efb8eeba2bf3b07cb
ms.sourcegitcommit: 1e7ac70be1b4d89708c0d9552897515f2cbf52c4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/24/2019
ms.locfileid: "68440284"
---
### <a name="accessibility-improvements-in-windows-forms-controls-for-net-48"></a><span data-ttu-id="109ec-101">Улучшения специальных возможностей для элементов управления Windows Forms в .NET Framework 4.8</span><span class="sxs-lookup"><span data-stu-id="109ec-101">Accessibility improvements in Windows Forms controls for .NET 4.8</span></span>

|   |   |
|---|---|
|<span data-ttu-id="109ec-102">Подробные сведения</span><span class="sxs-lookup"><span data-stu-id="109ec-102">Details</span></span>|<span data-ttu-id="109ec-103">В платформе Windows Forms продолжается улучшение использования специальных возможностей, обеспечивающих большее удобство для пользователей Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="109ec-103">The Windows Forms Framework is continuing to improve how it works with accessibility technologies to better support Windows Forms customers.</span></span> <span data-ttu-id="109ec-104">Внесены следующие изменения:</span><span class="sxs-lookup"><span data-stu-id="109ec-104">These include the following changes:</span></span><ul><li><span data-ttu-id="109ec-105">Изменения для улучшения видимости в режиме высокой контрастности.</span><span class="sxs-lookup"><span data-stu-id="109ec-105">Changes to improve display during High Contrast mode.</span></span></li><li><span data-ttu-id="109ec-106">Изменения в порядке взаимодействия с экранным диктором.</span><span class="sxs-lookup"><span data-stu-id="109ec-106">Changes to interaction with Narrator.</span></span></li><li><span data-ttu-id="109ec-107">Изменения в иерархии специальных возможностей (улучшение навигации по дереву автоматизации пользовательского интерфейса).</span><span class="sxs-lookup"><span data-stu-id="109ec-107">Changes in the Accessible hierarchy (improving navigation through the UI Automation tree).</span></span></li></ul>|
|<span data-ttu-id="109ec-108">Предложение</span><span class="sxs-lookup"><span data-stu-id="109ec-108">Suggestion</span></span>|<span data-ttu-id="109ec-109"><strong>Как принять или отклонить изменения</strong> Чтобы эти изменения можно было использовать в приложении, оно должно быть запущено на платформе .NET Framework 4.8.</span><span class="sxs-lookup"><span data-stu-id="109ec-109"><strong>How to opt in or out of these changes</strong>In order for the application to benefit from these changes, it must run on the .NET Framework 4.8.</span></span> <span data-ttu-id="109ec-110">В приложении эти изменения можно использовать одним из следующих способов:</span><span class="sxs-lookup"><span data-stu-id="109ec-110">The application can opt in into these changes in either of the following ways:</span></span><ul><li><span data-ttu-id="109ec-111">Выполнить повторную компиляцию, чтобы нацелить приложение на .NET Framework 4.8.</span><span class="sxs-lookup"><span data-stu-id="109ec-111">It is recompiled to target the .NET Framework 4.8.</span></span> <span data-ttu-id="109ec-112">Эти изменения специальных возможностей включены по умолчанию для приложений Windows Forms, предназначенных для .NET Framework 4.8.</span><span class="sxs-lookup"><span data-stu-id="109ec-112">These accessibility changes are enabled by default on Windows Forms applications that target the .NET Framework 4.8.</span></span></li><li><span data-ttu-id="109ec-113">Оно нацелено на .NET Framework 4.7.2 и более ранние версии платформы и позволяет отказаться от функций специальных возможностей предыдущих версий путем добавления [параметра AppContext](https://docs.microsoft.com/dotnet/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element) в раздел <code>&lt;runtime&gt;</code> файла конфигурации приложения и установки значения <code>false</code>, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="109ec-113">It targets the .NET Framework 4.7.2 or earlier version and opts out of the legacy accessibility behaviors by adding the following [AppContext switch](https://docs.microsoft.com/dotnet/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element) to the <code>&lt;runtime&gt;</code> section of the app config file and setting it to <code>false</code>, as the following example shows.</span></span></li></ul><pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#13;&#10;&lt;configuration&gt;&#13;&#10;&lt;startup&gt;&#13;&#10;&lt;supportedRuntime version=&quot;v4.0&quot; sku=&quot;.NETFramework,Version=v4.7&quot;/&gt;&#13;&#10;&lt;/startup&gt;&#13;&#10;&lt;runtime&gt;&#13;&#10;&lt;!-- AppContextSwitchOverrides value attribute is in the form of &#39;key1=true/false;key2=true/false  --&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.UseLegacyAccessibilityFeatures=false;Switch.UseLegacyAccessibilityFeatures.2=false;Switch.UseLegacyAccessibilityFeatures.3=false&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;&lt;/configuration&gt;&#13;&#10;</code></pre><span data-ttu-id="109ec-114">Обратите внимание, что для включения использования специальных возможностей, добавленных в .NET Framework 4.8, необходимо также включить специальные возможности платформы .NET Framework 4.7.1 и 4.7.2.</span><span class="sxs-lookup"><span data-stu-id="109ec-114">Note that to opt in to the accessibility features added in .NET Framework 4.8, you must also opt in to accessibility features of .NET Framework 4.7.1 and 4.7.2 as well.</span></span> <span data-ttu-id="109ec-115">В приложениях, предназначенных для .NET Framework 4.8, где требуется сохранить предыдущие функции специальных возможностей, можно выбрать прежние функции специальных возможностей, явно установив параметр AppContext в значение <code>true</code>. Для включения поддержки вызова подсказок для клавиатуры требуется добавить строку <code>Switch.System.Windows.Forms.UseLegacyToolTipDisplay=false</code> со значением AppContextSwitchOverrides:</span><span class="sxs-lookup"><span data-stu-id="109ec-115">Applications that target the .NET Framework 4.8 and want to preserve the legacy accessibility behavior can opt in to the use of legacy accessibility features by explicitly setting this AppContext switch to <code>true</code>.Enabling the keyboard ToolTip invocation support requires adding the <code>Switch.System.Windows.Forms.UseLegacyToolTipDisplay=false</code> line to the AppContextSwitchOverrides value:</span></span><pre><code class="lang-xml">&#39;&lt;AppContextSwitchOverrides value=&quot;Switch.UseLegacyAccessibilityFeatures=false;Switch.UseLegacyAccessibilityFeatures.2=false;Switch.UseLegacyAccessibilityFeatures.3=false;Switch.System.Windows.Forms.UseLegacyToolTipDisplay=false&quot; /&gt;&#39;&#13;&#10;</code></pre><span data-ttu-id="109ec-116">Обратите внимание, что для включения этой функции требуется включение упомянутых выше специальных возможностей .NET Framework 4.7.1–4.8.</span><span class="sxs-lookup"><span data-stu-id="109ec-116">Note that enabling this feature requires opting in to the aforementioned accessibility features of .NET Framework 4.7.1 - 4.8.</span></span> <span data-ttu-id="109ec-117">Кроме того, если вы не включили какую-либо из специальных возможностей, но включили функцию отображения подсказок, среда выполнения будет вызывать исключение <xref:System.NotSupportedException> при первом доступе к этим функциям.</span><span class="sxs-lookup"><span data-stu-id="109ec-117">Also, if any of the accessibility features are not opted in but the tooltip display feature is opted in, a runtime <xref:System.NotSupportedException> will be thrown on the first access to these features.</span></span> <span data-ttu-id="109ec-118">Сообщение об исключении указывает, что подсказки по клавиатуре требуют включить улучшения специальных возможностей уровня 3. <strong>Использование определяемых операционной системой цветов в темах высокой контрастности</strong></span><span class="sxs-lookup"><span data-stu-id="109ec-118">The exception message indicates that keyboard ToolTips require accessibility improvements of level 3 to be enabled.<strong>Use of OS-defined colors in High Contrast themes</strong></span></span><ul><li><span data-ttu-id="109ec-119">Улучшенные темы высокой контрастности.</span><span class="sxs-lookup"><span data-stu-id="109ec-119">Improved high-contrast themes.</span></span></li></ul><span data-ttu-id="109ec-120"><strong>Улучшенная поддержка экранного диктора</strong></span><span class="sxs-lookup"><span data-stu-id="109ec-120"><strong>Improved Narrator support</strong></span></span><ul><li><span data-ttu-id="109ec-121">Экранный диктор теперь сообщает направление сортировки <xref:System.Windows.Forms.DataGridViewColumn> при объявлении доступного имени <xref:System.Windows.Forms.DataGridViewCell>.</span><span class="sxs-lookup"><span data-stu-id="109ec-121">Narrator now announces the sort direction of the <xref:System.Windows.Forms.DataGridViewColumn> when announcing an accessible name of a <xref:System.Windows.Forms.DataGridViewCell>.</span></span></li></ul><span data-ttu-id="109ec-122"><strong>Улучшенная поддержка специальных возможностей CheckedListBox</strong></span><span class="sxs-lookup"><span data-stu-id="109ec-122"><strong>Improved CheckedListBox Accessibility support</strong></span></span><ul><li><span data-ttu-id="109ec-123">Улучшенная поддержка экранного диктора для элемента управления <xref:System.Windows.Forms.CheckedListBox>.</span><span class="sxs-lookup"><span data-stu-id="109ec-123">Improved Narrator support for the <xref:System.Windows.Forms.CheckedListBox> control.</span></span> <span data-ttu-id="109ec-124">При переходе к элементу управления <xref:System.Windows.Forms.CheckedListBox> с помощью клавиатуры экранный диктор фокусируется на элементе <xref:System.Windows.Forms.CheckedListBox> и объявляет его.</span><span class="sxs-lookup"><span data-stu-id="109ec-124">When navigating to the <xref:System.Windows.Forms.CheckedListBox> control using the keyboard, Narrator focuses the <xref:System.Windows.Forms.CheckedListBox> item and announces it.</span></span></li><li><span data-ttu-id="109ec-125">Пустой элемент управления CheckedListBox теперь содержит прямоугольник фокуса, нарисованный для виртуального первого элемента, при переходе фокуса на элемент управления.</span><span class="sxs-lookup"><span data-stu-id="109ec-125">An empty CheckedListBox control now has a focus rectangle drawn for a virtual first item when the control becomes focused.</span></span></li></ul><span data-ttu-id="109ec-126"><strong>Улучшенная поддержка специальных возможностей элемента управления ComboBox</strong></span><span class="sxs-lookup"><span data-stu-id="109ec-126"><strong>Improved ComboBox Accessibility support</strong></span></span><ul><li><span data-ttu-id="109ec-127">Включена поддержка автоматизации пользовательского интерфейса для элемента управления <xref:System.Windows.Forms.ComboBox> с возможностью использовать уведомления об автоматизации пользовательского интерфейса и другие функции автоматизации пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="109ec-127">Enabled UI Automation support for the <xref:System.Windows.Forms.ComboBox> control, with the ability to use UI Automation notifications and other UI Automation features.</span></span></li></ul><span data-ttu-id="109ec-128"><strong>Улучшенная поддержка специальных возможностей DataGridView</strong></span><span class="sxs-lookup"><span data-stu-id="109ec-128"><strong>Improved DataGridView Accessibility support</strong></span></span><ul><li><span data-ttu-id="109ec-129">Включена поддержка автоматизации пользовательского интерфейса для элемента управления <xref:System.Windows.Forms.DataGridView> с возможностью использовать уведомления об автоматизации пользовательского интерфейса и другие функции автоматизации пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="109ec-129">Enabled UI Automation support for <xref:System.Windows.Forms.DataGridView> control with ability to use UI Automation notifications and other UI Automation features.</span></span></li><li><span data-ttu-id="109ec-130">Элемент автоматизации пользовательского интерфейса, который соответствует <xref:System.Windows.Forms.DataGridViewComboBoxEditingControl> или <xref:System.Windows.Forms.DataGridViewTextBoxEditingControl>, теперь является дочерним для соответствующей изменяемой ячейки.</span><span class="sxs-lookup"><span data-stu-id="109ec-130">The UI Automation element which corresponds to the <xref:System.Windows.Forms.DataGridViewComboBoxEditingControl> or <xref:System.Windows.Forms.DataGridViewTextBoxEditingControl> is now a child of corresponding editing cell.</span></span></li></ul><span data-ttu-id="109ec-131"><strong>Улучшенная поддержка специальных возможностей LinkLabel</strong></span><span class="sxs-lookup"><span data-stu-id="109ec-131"><strong>Improved LinkLabel Accessibility support</strong></span></span><ul><li><span data-ttu-id="109ec-132">Улучшенные специальные возможности элемента управления <xref:System.Windows.Forms.LinkLabel>: Экранный диктор объявляет об отключенном состоянии для ссылки, если соответствующий элемент управления <xref:System.Windows.Forms.LinkLabel> отключен.</span><span class="sxs-lookup"><span data-stu-id="109ec-132">Improved <xref:System.Windows.Forms.LinkLabel> control accessibility: Narrator announces the disabled state for the link if the corresponding <xref:System.Windows.Forms.LinkLabel> control is disabled.</span></span></li></ul><span data-ttu-id="109ec-133"><strong>Улучшенная поддержка специальных возможностей элемента управления ProgressBar</strong></span><span class="sxs-lookup"><span data-stu-id="109ec-133"><strong>Improved ProgressBar Accessibility support</strong></span></span><ul><li><span data-ttu-id="109ec-134">Включена поддержка автоматизации пользовательского интерфейса для элемента управления <xref:System.Windows.Forms.ProgressBar> с возможностью использовать уведомления об автоматизации пользовательского интерфейса и другие функции автоматизации пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="109ec-134">Enabled UI Automation support for the <xref:System.Windows.Forms.ProgressBar> control with the ability to use UI Automation notifications and other UI Automation features.</span></span> <span data-ttu-id="109ec-135">Теперь разработчики могут использовать уведомления об автоматизации пользовательского интерфейса, которые экранный диктор может объявлять для отображения хода выполнения.</span><span class="sxs-lookup"><span data-stu-id="109ec-135">Developers are now able to use UI Automation notifications which Narrator can announce to indicate progress.</span></span></li></ul><span data-ttu-id="109ec-136">Общие сведения о событиях автоматизации пользовательского интерфейса, включая события уведомления об автоматизации пользовательского интерфейса, см. в разделе [Обзор событий автоматизации пользовательского интерфейса](https://docs.microsoft.com/windows/desktop/WinAuto/uiauto-eventsoverview). <strong>Улучшенная поддержка специальных возможностей PropertyGrid</strong></span><span class="sxs-lookup"><span data-stu-id="109ec-136">For an overview of UI automation events overview, including UI automation notification events, see the [UI Automation Events Overview](https://docs.microsoft.com/windows/desktop/WinAuto/uiauto-eventsoverview).<strong>Improved PropertyGrid Accessibility support</strong></span></span><ul><li><span data-ttu-id="109ec-137">Включена поддержка автоматизации пользовательского интерфейса для элемента управления <xref:System.Windows.Forms.PropertyGrid> с возможностью использовать уведомления об автоматизации пользовательского интерфейса и другие функции автоматизации пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="109ec-137">Enabled UI Automation support for the <xref:System.Windows.Forms.PropertyGrid> control, with the ability to use UI Automation notifications and other UI Automation features.</span></span></li><li><span data-ttu-id="109ec-138">Элемент автоматизации пользовательского интерфейса, который соответствует текущему изменяемому свойству, теперь является дочерним соответствующего свойства элемента модели автоматизации пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="109ec-138">The UI Automation element which corresponds to the currently edited property is now a child of the corresponding property item UI Automation element.</span></span></li><li><span data-ttu-id="109ec-139">Элемент свойства модели автоматизации пользовательского интерфейса теперь является дочерним для соответствующего элемента категории, если родительский элемент управления <xref:System.Windows.Forms.PropertyGrid> задан на представление категорий.</span><span class="sxs-lookup"><span data-stu-id="109ec-139">The UI Automation property item element is now a child of the corresponding category element if the parent <xref:System.Windows.Forms.PropertyGrid> control is set to category view.</span></span></li></ul><span data-ttu-id="109ec-140"><strong>Улучшенная поддержка элемента управления ToolStrip</strong></span><span class="sxs-lookup"><span data-stu-id="109ec-140"><strong>Improved ToolStrip support</strong></span></span><ul><li><span data-ttu-id="109ec-141">Включена поддержка автоматизации пользовательского интерфейса для элемента управления <xref:System.Windows.Forms.ToolStrip> с возможностью использовать уведомления об автоматизации пользовательского интерфейса и другие функции автоматизации пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="109ec-141">Enabled UI Automation support for the <xref:System.Windows.Forms.ToolStrip> control, with the ability to use UI Automation notifications and other UI Automation features.</span></span></li><li><span data-ttu-id="109ec-142">Улучшенная навигация по элементам <xref:System.Windows.Forms.ToolStrip>.</span><span class="sxs-lookup"><span data-stu-id="109ec-142">Improved navigation through <xref:System.Windows.Forms.ToolStrip> items.</span></span></li><li><span data-ttu-id="109ec-143">В режиме элементов фокус экранного диктора не исчезает и не переходит к скрытым элементам.</span><span class="sxs-lookup"><span data-stu-id="109ec-143">In items mode, Narrator focus does not disappear and does not go to hidden items.</span></span></li></ul><span data-ttu-id="109ec-144"><strong>Улучшенные визуальные подсказки</strong></span><span class="sxs-lookup"><span data-stu-id="109ec-144"><strong>Improved Visual cues</strong></span></span><ul><li><span data-ttu-id="109ec-145">Пустой элемент управления <xref:System.Windows.Forms.CheckedListBox> теперь отображает индикатор фокуса при получении фокуса.</span><span class="sxs-lookup"><span data-stu-id="109ec-145">An empty <xref:System.Windows.Forms.CheckedListBox> control now displays a focus indicator when it receives focus.</span></span></li></ul><span data-ttu-id="109ec-146">Примечание. Поддержка автоматизации пользовательского интерфейса включена для элементов управления в среде выполнения, но не используется во время разработки.</span><span class="sxs-lookup"><span data-stu-id="109ec-146">Note: UI automation support is enabled for controls in runtime but is not used in design time.</span></span> <span data-ttu-id="109ec-147">Обзор автоматизации пользовательского интерфейса см. в разделе [Общие сведения об автоматизации пользовательского интерфейса](https://docs.microsoft.com/dotnet/framework/ui-automation/ui-automation-overview).</span><span class="sxs-lookup"><span data-stu-id="109ec-147">For an overview of UI automation, see the [UI Automation Overview](https://docs.microsoft.com/dotnet/framework/ui-automation/ui-automation-overview).</span></span></p><span data-ttu-id="109ec-148"><strong>Вызов подсказок по элементам управления с помощью клавиатуры</strong></span><span class="sxs-lookup"><span data-stu-id="109ec-148"><strong>Invoking controls' ToolTips with a keyboard</strong></span></span><ul><li><span data-ttu-id="109ec-149">Подсказки по элементам управления теперь можно вызвать с помощью перехода на элемент управления с использованием клавиатуры.</span><span class="sxs-lookup"><span data-stu-id="109ec-149">Control tooltip can now be invoked by focusing the control with keyboard.</span></span> <span data-ttu-id="109ec-150">Эту функцию нужно включить явным образом для приложения (см. раздел <strong>&quot;Как принять или отклонить изменения&quot;</strong>)</span><span class="sxs-lookup"><span data-stu-id="109ec-150">This feature needs to be enabled explicitly for the application (see section <strong>&quot;How to opt in or out of these changes&quot;</strong>)</span></span></li></ul>|
|<span data-ttu-id="109ec-151">Область</span><span class="sxs-lookup"><span data-stu-id="109ec-151">Scope</span></span>|<span data-ttu-id="109ec-152">Значительно</span><span class="sxs-lookup"><span data-stu-id="109ec-152">Major</span></span>|
|<span data-ttu-id="109ec-153">Версия</span><span class="sxs-lookup"><span data-stu-id="109ec-153">Version</span></span>|<span data-ttu-id="109ec-154">4.8</span><span class="sxs-lookup"><span data-stu-id="109ec-154">4.8</span></span>|
|<span data-ttu-id="109ec-155">Тип</span><span class="sxs-lookup"><span data-stu-id="109ec-155">Type</span></span>|<span data-ttu-id="109ec-156">Изменение целевой платформы</span><span class="sxs-lookup"><span data-stu-id="109ec-156">Retargeting</span></span>|
