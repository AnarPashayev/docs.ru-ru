---
ms.openlocfilehash: 9b184f54650d2efb31ec66f443198b19ceaeb5f3
ms.sourcegitcommit: e02d17b2cf9c1258dadda4810a5e6072a0089aee
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/01/2020
ms.locfileid: "85614705"
---
### <a name="applicationfiltermessage-no-longer-throws-for-re-entrant-implementations-of-imessagefilterprefiltermessage"></a><span data-ttu-id="a4957-101">Application.FilterMessage больше не создает исключение для реализаций IMessageFilter.PreFilterMessage с повторным входом</span><span class="sxs-lookup"><span data-stu-id="a4957-101">Application.FilterMessage no longer throws for re-entrant implementations of IMessageFilter.PreFilterMessage</span></span>

#### <a name="details"></a><span data-ttu-id="a4957-102">Подробнее</span><span class="sxs-lookup"><span data-stu-id="a4957-102">Details</span></span>

<span data-ttu-id="a4957-103">До версии .NET Framework 4.6.1 при вызове <xref:System.Windows.Forms.Application.FilterMessage(System.Windows.Forms.Message@)> с <xref:System.Windows.Forms.IMessageFilter.PreFilterMessage(System.Windows.Forms.Message@)>, вызывающим <xref:System.Windows.Forms.Application.AddMessageFilter(System.Windows.Forms.IMessageFilter)?displayProperty=fullName> или <xref:System.Windows.Forms.Application.RemoveMessageFilter(System.Windows.Forms.IMessageFilter)?displayProperty=fullName> (с одновременным вызовом <xref:System.Windows.Forms.Application.DoEvents>), возникало исключение <xref:System.IndexOutOfRangeException?displayProperty=fullName>.</span><span class="sxs-lookup"><span data-stu-id="a4957-103">Prior to the .NET Framework 4.6.1, calling <xref:System.Windows.Forms.Application.FilterMessage(System.Windows.Forms.Message@)> with an <xref:System.Windows.Forms.IMessageFilter.PreFilterMessage(System.Windows.Forms.Message@)> which called <xref:System.Windows.Forms.Application.AddMessageFilter(System.Windows.Forms.IMessageFilter)?displayProperty=fullName> or <xref:System.Windows.Forms.Application.RemoveMessageFilter(System.Windows.Forms.IMessageFilter)?displayProperty=fullName> (while also calling <xref:System.Windows.Forms.Application.DoEvents>) would cause an <xref:System.IndexOutOfRangeException?displayProperty=fullName>.</span></span><p/><span data-ttu-id="a4957-104">Начиная с приложений, предназначенных для .NET Framework 4.6.1, это исключение больше не создается, и можно использовать фильтры с повторным входом, как описано выше.</span><span class="sxs-lookup"><span data-stu-id="a4957-104">Beginning with applications targeting the .NET Framework 4.6.1, this exception is no longer thrown, and re-entrant filters as described above may be used.</span></span>

#### <a name="suggestion"></a><span data-ttu-id="a4957-105">Предложение</span><span class="sxs-lookup"><span data-stu-id="a4957-105">Suggestion</span></span>

<span data-ttu-id="a4957-106">Имейте в виду, что <xref:System.Windows.Forms.Application.FilterMessage(System.Windows.Forms.Message@)> больше не вызывает исключение для поведения <xref:System.Windows.Forms.IMessageFilter.PreFilterMessage(System.Windows.Forms.Message@)> с повторным входом, как описано выше.</span><span class="sxs-lookup"><span data-stu-id="a4957-106">Be aware that <xref:System.Windows.Forms.Application.FilterMessage(System.Windows.Forms.Message@)> will no longer throw for the re-entrant <xref:System.Windows.Forms.IMessageFilter.PreFilterMessage(System.Windows.Forms.Message@)> behavior described above.</span></span> <span data-ttu-id="a4957-107">Будут затронуты только приложения, предназначенные для .NET Framework 4.6.1. В приложениях, предназначенных для .NET Framework 4.6.1, можно отказаться от этого изменения (или в приложениях, предназначенных для более старых платформ, можно использовать изменение) с помощью параметра совместимости [DontSupportReentrantFilterMessage](~/docs/framework/migration-guide/mitigation-custom-imessagefilter-prefiltermessage-implementations.md#mitigation).</span><span class="sxs-lookup"><span data-stu-id="a4957-107">This only affects applications targeting the .NET Framework 4.6.1.Apps targeting the .NET Framework 4.6.1 can opt out of this change (or apps targeting older Frameworks may opt in) by using the [DontSupportReentrantFilterMessage](~/docs/framework/migration-guide/mitigation-custom-imessagefilter-prefiltermessage-implementations.md#mitigation) compatibility switch.</span></span>

| <span data-ttu-id="a4957-108">name</span><span class="sxs-lookup"><span data-stu-id="a4957-108">Name</span></span>          | <span data-ttu-id="a4957-109">Значение</span><span class="sxs-lookup"><span data-stu-id="a4957-109">Value</span></span>       |
|:--------------|:------------|
| <span data-ttu-id="a4957-110">Область</span><span class="sxs-lookup"><span data-stu-id="a4957-110">Scope</span></span>         | <span data-ttu-id="a4957-111">Пограничный случай</span><span class="sxs-lookup"><span data-stu-id="a4957-111">Edge</span></span>        |
| <span data-ttu-id="a4957-112">Version</span><span class="sxs-lookup"><span data-stu-id="a4957-112">Version</span></span>       | <span data-ttu-id="a4957-113">4.6.1</span><span class="sxs-lookup"><span data-stu-id="a4957-113">4.6.1</span></span>       |
| <span data-ttu-id="a4957-114">Type</span><span class="sxs-lookup"><span data-stu-id="a4957-114">Type</span></span>          | <span data-ttu-id="a4957-115">Изменение целевой платформы</span><span class="sxs-lookup"><span data-stu-id="a4957-115">Retargeting</span></span> |

#### <a name="affected-apis"></a><span data-ttu-id="a4957-116">Затронутые API</span><span class="sxs-lookup"><span data-stu-id="a4957-116">Affected APIs</span></span>

- <xref:System.Windows.Forms.Application.FilterMessage(System.Windows.Forms.Message@)?displayProperty=nameWithType>
