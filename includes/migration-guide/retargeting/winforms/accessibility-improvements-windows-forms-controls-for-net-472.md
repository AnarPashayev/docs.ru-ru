---
ms.openlocfilehash: a21824862d6cad046b5d6186f9d6db9c20438304
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/15/2020
ms.locfileid: "90606745"
---
### <a name="accessibility-improvements-in-windows-forms-controls-for-net-472"></a><span data-ttu-id="c01cc-101">Улучшения специальных возможностей для элементов управления Windows Forms в .NET Framework 4.7.2</span><span class="sxs-lookup"><span data-stu-id="c01cc-101">Accessibility improvements in Windows Forms controls for .NET 4.7.2</span></span>

#### <a name="details"></a><span data-ttu-id="c01cc-102">Подробнее</span><span class="sxs-lookup"><span data-stu-id="c01cc-102">Details</span></span>

<span data-ttu-id="c01cc-103">В платформе Windows Forms улучшено использование специальных возможностей, обеспечивающих большее удобство для пользователей Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="c01cc-103">Windows Forms Framework is improving how it works with accessibility technologies to better support Windows Forms customers.</span></span> <span data-ttu-id="c01cc-104">Внесены следующие изменения:</span><span class="sxs-lookup"><span data-stu-id="c01cc-104">These include the following changes:</span></span>

- <span data-ttu-id="c01cc-105">Изменения для улучшения видимости в режиме высокой контрастности.</span><span class="sxs-lookup"><span data-stu-id="c01cc-105">Changes to improve display during High Contrast mode.</span></span>
- <span data-ttu-id="c01cc-106">Изменения для улучшения навигации с помощью клавиатуры в элементах управления DataGridView и MenuStrip.</span><span class="sxs-lookup"><span data-stu-id="c01cc-106">Changes to improve the keyboard navigation in the DataGridView and MenuStrip controls.</span></span>
- <span data-ttu-id="c01cc-107">Изменения в порядке взаимодействия с экранным диктором.</span><span class="sxs-lookup"><span data-stu-id="c01cc-107">Changes to interaction with Narrator.</span></span>

#### <a name="suggestion"></a><span data-ttu-id="c01cc-108">Предложение</span><span class="sxs-lookup"><span data-stu-id="c01cc-108">Suggestion</span></span>

<span data-ttu-id="c01cc-109">**Как принять или отклонить изменения** Чтобы эти изменения можно было использовать в приложении, оно должно быть запущено на платформе .NET Framework 4.7.2 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="c01cc-109">**How to opt in or out of these changes** In order for the application to benefit from these changes, it must run on the .NET Framework 4.7.2 or later.</span></span> <span data-ttu-id="c01cc-110">В приложении эти изменения можно использовать одним из следующих способов:</span><span class="sxs-lookup"><span data-stu-id="c01cc-110">The application can benefit from these changes in either of the following ways:</span></span>

- <span data-ttu-id="c01cc-111">Выполнить повторную компиляцию, чтобы нацелить приложение на .NET Framework 4.7.2.</span><span class="sxs-lookup"><span data-stu-id="c01cc-111">It is recompiled to target the .NET Framework 4.7.2.</span></span> <span data-ttu-id="c01cc-112">Эти специальные возможности включены по умолчанию для приложений Windows Forms, предназначенных для .NET Framework 4.7.2 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="c01cc-112">These accessibility changes are enabled by default on Windows Forms applications that target the .NET Framework 4.7.2 or later.</span></span>
- <span data-ttu-id="c01cc-113">Оно нацелено на .NET Framework 4.7.1 и более ранние версии платформы и позволяет отказаться от функций специальных возможностей предыдущих версий путем добавления [переключателя AppContext](../../../../docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) в раздел `<runtime>` файла конфигурации приложения и получения значения `false`, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="c01cc-113">It targets the .NET Framework 4.7.1 or earlier version and opts out of the legacy accessibility behaviors by adding the following [AppContext Switch](../../../../docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) to the `<runtime>` section of the app config file and setting it to `false`, as the following example shows.</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.7"/>
  </startup>
  <runtime>
    <!-- AppContextSwitchOverrides value attribute is in the form of 'key1=true/false;key2=true/false  -->
    <AppContextSwitchOverrides value="Switch.UseLegacyAccessibilityFeatures=false;Switch.UseLegacyAccessibilityFeatures.2=false" />
  </runtime>
</configuration>
```

<span data-ttu-id="c01cc-114">Обратите внимание, что для включения использования специальных возможностей, добавленных в .NET Framework 4.7.2, необходимо также включить специальные возможности платформы .NET Framework 4.7.1.</span><span class="sxs-lookup"><span data-stu-id="c01cc-114">Note that to opt in to the accessibility features added in .NET Framework 4.7.2, you must also opt in to accessibility features of .NET Framework 4.7.1 as well.</span></span> <span data-ttu-id="c01cc-115">В приложениях, предназначенных для .NET Framework 4.7.2 или более поздней версии, где требуется сохранить предыдущие функции специальных возможностей, можно выбрать прежние функции специальных возможностей, явно установив этот переключатель AppContext в значение `true`.</span><span class="sxs-lookup"><span data-stu-id="c01cc-115">Applications that target the .NET Framework 4.7.2 or later and want to preserve the legacy accessibility behavior can opt in to the use of legacy accessibility features by explicitly setting this AppContext switch to `true`.</span></span>

<span data-ttu-id="c01cc-116">**Использование определенных в ОС цветов в темах высокой контрастности**</span><span class="sxs-lookup"><span data-stu-id="c01cc-116">**Use of OS-defined colors in High Contrast themes**</span></span>

- <span data-ttu-id="c01cc-117">Для кнопки со стрелкой раскрывающегося меню <xref:System.Windows.Forms.ToolStripDropDownButton> теперь используются определенные операционной системой цвета в теме высокой контрастности.</span><span class="sxs-lookup"><span data-stu-id="c01cc-117">The drop down arrow of the <xref:System.Windows.Forms.ToolStripDropDownButton> now uses OS-defined colors in High Contrast theme.</span></span>
- <span data-ttu-id="c01cc-118">Элементы управления <xref:System.Windows.Forms.Button>, <xref:System.Windows.Forms.RadioButton> и <xref:System.Windows.Forms.CheckBox>, для которых свойству <xref:System.Windows.Forms.ButtonBase.FlatStyle> присвоено значение <xref:System.Windows.Forms.FlatStyle.Flat?displayProperty=nameWithType> или <xref:System.Windows.Forms.FlatStyle.Popup?displayProperty=nameWithType>, теперь используют определенные в ОС цвета при выборе темы высокой контрастности.</span><span class="sxs-lookup"><span data-stu-id="c01cc-118"><xref:System.Windows.Forms.Button>, <xref:System.Windows.Forms.RadioButton> and <xref:System.Windows.Forms.CheckBox> controls with <xref:System.Windows.Forms.ButtonBase.FlatStyle> set to <xref:System.Windows.Forms.FlatStyle.Flat?displayProperty=nameWithType> or <xref:System.Windows.Forms.FlatStyle.Popup?displayProperty=nameWithType> now use OS-defined colors in High Contrast theme when selected.</span></span> <span data-ttu-id="c01cc-119">Ранее цвета текста и фона не были контрастными, что ухудшало разборчивость.</span><span class="sxs-lookup"><span data-stu-id="c01cc-119">Previously, text and background colors were not contrasting and were hard to read.</span></span>
- <span data-ttu-id="c01cc-120">Для элементов управления, содержащихся в <xref:System.Windows.Forms.GroupBox>, для свойства <xref:System.Windows.Forms.Control.Enabled> которого задано значение `false`, теперь используются определенные в ОС цвета в теме высокой контрастности.</span><span class="sxs-lookup"><span data-stu-id="c01cc-120">Controls contained within a <xref:System.Windows.Forms.GroupBox> that has its <xref:System.Windows.Forms.Control.Enabled> property set to `false` will now use OS-defined colors in High Contrast theme.</span></span>
- <span data-ttu-id="c01cc-121">Элементы управления <xref:System.Windows.Forms.ToolStripButton>, <xref:System.Windows.Forms.ToolStripComboBox> и <xref:System.Windows.Forms.ToolStripDropDownButton> имеют повышенное значение контрастности яркости в режиме высокой контрастности.</span><span class="sxs-lookup"><span data-stu-id="c01cc-121">The <xref:System.Windows.Forms.ToolStripButton>, <xref:System.Windows.Forms.ToolStripComboBox>, and <xref:System.Windows.Forms.ToolStripDropDownButton> controls have an increased luminosity contrast ratio in High Contrast Mode.</span></span>
- <span data-ttu-id="c01cc-122"><xref:System.Windows.Forms.DataGridViewLinkCell> по умолчанию будет использовать определяемые операционной системой цвета в режиме высокой контрастности для свойства <xref:System.Windows.Forms.DataGridViewLinkCell.LinkColor?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c01cc-122"><xref:System.Windows.Forms.DataGridViewLinkCell> will by default use OS-defined colors in High Contrast mode for the <xref:System.Windows.Forms.DataGridViewLinkCell.LinkColor?displayProperty=nameWithType> property.</span></span>
<span data-ttu-id="c01cc-123">Примечание. В Windows 10 изменены значения некоторых системных цветов для тем высокой контрастности.</span><span class="sxs-lookup"><span data-stu-id="c01cc-123">NOTE: Windows 10 has changed values for some high contrast system colors.</span></span> <span data-ttu-id="c01cc-124">Платформа Windows Forms Framework построена на основе Win32.</span><span class="sxs-lookup"><span data-stu-id="c01cc-124">Windows Forms Framework is based on the Win32 framework.</span></span> <span data-ttu-id="c01cc-125">Для достижения наилучших результатов используйте самую последнюю версию Windows и согласитесь на последние изменения операционной системы, добавив файл app.manifest в тестовое приложение и раскомментировав следующий код:</span><span class="sxs-lookup"><span data-stu-id="c01cc-125">For the best experience, run on the latest version of Windows and opt in to the latest OS changes by adding an app.manifest file in a test application and un-commenting the following code:</span></span>

```xml
<!-- Windows 10 -->
<supportedOS Id="{8e0f7a12-bfb3-4fe8-b9a5-48fd50a15a9a}" />
```

<span data-ttu-id="c01cc-126">**Улучшенная поддержка экранного диктора**</span><span class="sxs-lookup"><span data-stu-id="c01cc-126">**Improved Narrator support**</span></span>

- <span data-ttu-id="c01cc-127">Экранный диктор теперь сообщает значение свойства <xref:System.Windows.Forms.ToolStripMenuItem.ShortcutKeys?displayProperty=nameWithType> при объявлении текста <xref:System.Windows.Forms.ToolStripMenuItem>.</span><span class="sxs-lookup"><span data-stu-id="c01cc-127">Narrator now announces the value of the <xref:System.Windows.Forms.ToolStripMenuItem.ShortcutKeys?displayProperty=nameWithType> property when announcing the text of a <xref:System.Windows.Forms.ToolStripMenuItem>.</span></span>
- <span data-ttu-id="c01cc-128">Экранный диктор теперь указывает, когда для свойства <xref:System.Windows.Forms.Control.Enabled> элемента <xref:System.Windows.Forms.ToolStripMenuItem> задано значение `false`.</span><span class="sxs-lookup"><span data-stu-id="c01cc-128">Narrator now indicates when a <xref:System.Windows.Forms.ToolStripMenuItem> has its <xref:System.Windows.Forms.Control.Enabled> property set to `false`.</span></span>
- <span data-ttu-id="c01cc-129">Экранный диктор теперь предоставляет отзыв о состоянии флажка, если для свойства <xref:System.Windows.Forms.ListView.CheckBoxes?displayProperty=nameWithType> задано значение `true`.</span><span class="sxs-lookup"><span data-stu-id="c01cc-129">Narrator now gives feedback on the state of a check box when the <xref:System.Windows.Forms.ListView.CheckBoxes?displayProperty=nameWithType> property is set to `true`.</span></span>
- <span data-ttu-id="c01cc-130">Порядок фокуса экранного диктора теперь согласуется с визуальным порядком элементов управления в диалоговом окне загрузки ClickOnce.</span><span class="sxs-lookup"><span data-stu-id="c01cc-130">Narrator Scan Mode focus order is now consistent with the visual order of the controls on the ClickOnce download dialog window.</span></span>

<span data-ttu-id="c01cc-131">**Улучшенная поддержка специальных возможностей DataGridView**</span><span class="sxs-lookup"><span data-stu-id="c01cc-131">**Improved DataGridView Accessibility support**</span></span>

- <span data-ttu-id="c01cc-132">Строки в <xref:System.Windows.Forms.DataGridView> теперь могут быть отсортированы с помощью клавиатуры.</span><span class="sxs-lookup"><span data-stu-id="c01cc-132">Rows in a <xref:System.Windows.Forms.DataGridView> can now be sorted using the keyboard.</span></span> <span data-ttu-id="c01cc-133">Теперь пользователь может использовать клавишу F3, чтобы выполнить сортировку по текущему столбцу.</span><span class="sxs-lookup"><span data-stu-id="c01cc-133">Now a user can use the F3 key in order to sort by the current column.</span></span>
- <span data-ttu-id="c01cc-134">Когда <xref:System.Windows.Forms.DataGridView.SelectionMode?displayProperty=nameWithType> имеет значение <xref:System.Windows.Forms.DataGridViewSelectionMode.FullRowSelect?displayProperty=nameWithType>, заголовок столбца меняет цвет для указания на текущий столбец, когда пользователь переходит по ячейкам в текущей строке.</span><span class="sxs-lookup"><span data-stu-id="c01cc-134">When the <xref:System.Windows.Forms.DataGridView.SelectionMode?displayProperty=nameWithType> is set to <xref:System.Windows.Forms.DataGridViewSelectionMode.FullRowSelect?displayProperty=nameWithType>, the column header will change color to indicate the current column as the user tabs through the cells in the current row.</span></span>
- <span data-ttu-id="c01cc-135">Свойство <xref:System.Windows.Forms.DataGridViewCell.DataGridViewCellAccessibleObject.Parent?displayProperty=nameWithType> теперь возвращает правильный родительский элемент управления.</span><span class="sxs-lookup"><span data-stu-id="c01cc-135">The <xref:System.Windows.Forms.DataGridViewCell.DataGridViewCellAccessibleObject.Parent?displayProperty=nameWithType> property now returns the correct parent control.</span></span>

<span data-ttu-id="c01cc-136">**Улучшенные визуальные подсказки**</span><span class="sxs-lookup"><span data-stu-id="c01cc-136">**Improved Visual cues**</span></span>

- <span data-ttu-id="c01cc-137">Элементы управления <xref:System.Windows.Forms.RadioButton> и <xref:System.Windows.Forms.CheckBox> с пустым свойством <xref:System.Windows.Forms.ButtonBase.Text> будут отображать индикатор фокуса при получении фокуса.</span><span class="sxs-lookup"><span data-stu-id="c01cc-137">The <xref:System.Windows.Forms.RadioButton> and <xref:System.Windows.Forms.CheckBox> controls with an empty <xref:System.Windows.Forms.ButtonBase.Text> property will now display a focus indicator when they receive focus.</span></span>

<span data-ttu-id="c01cc-138">**Улучшенная поддержка сетки свойств**</span><span class="sxs-lookup"><span data-stu-id="c01cc-138">**Improved Property Grid Support**</span></span>

- <span data-ttu-id="c01cc-139">Дочерние элементы элемента управления <xref:System.Windows.Forms.PropertyGrid> теперь возвращают `true` для <xref:System.Windows.Automation.ValuePattern.IsReadOnlyProperty> свойства только в том случае, если включен элемент PropertyGrid.</span><span class="sxs-lookup"><span data-stu-id="c01cc-139">The <xref:System.Windows.Forms.PropertyGrid> control child elements now return a `true` for the  <xref:System.Windows.Automation.ValuePattern.IsReadOnlyProperty> property only when a PropertyGrid element is enabled.</span></span>
- <span data-ttu-id="c01cc-140">Дочерние элементы элемента управления <xref:System.Windows.Forms.PropertyGrid> теперь возвращают `false` для <xref:System.Windows.Automation.AutomationElement.IsEnabledProperty> свойства только в том случае, если элемент PropertyGrid может быть изменен пользователем.</span><span class="sxs-lookup"><span data-stu-id="c01cc-140">The <xref:System.Windows.Forms.PropertyGrid> control child elements now return a `false` for the <xref:System.Windows.Automation.AutomationElement.IsEnabledProperty> property only when a PropertyGrid element can be changed by the user.</span></span>
<span data-ttu-id="c01cc-141">Обзор автоматизации пользовательского интерфейса см. в разделе [Общие сведения об автоматизации пользовательского интерфейса](../../../../docs/framework/ui-automation/ui-automation-overview.md).</span><span class="sxs-lookup"><span data-stu-id="c01cc-141">For an overview of UI automation, see the [UI Automation Overview](../../../../docs/framework/ui-automation/ui-automation-overview.md).</span></span></p><span data-ttu-id="c01cc-142">**Улучшение навигации с помощью клавиатуры**</span><span class="sxs-lookup"><span data-stu-id="c01cc-142">**Improved keyboard navigation**</span></span>

- <span data-ttu-id="c01cc-143"><xref:System.Windows.Forms.ToolStripButton> теперь позволяет отображать фокус, если он содержится в <xref:System.Windows.Forms.ToolStripPanel>, для свойства <xref:System.Windows.Forms.ToolStripPanel.TabStop> которого задано значение `true`.</span><span class="sxs-lookup"><span data-stu-id="c01cc-143"><xref:System.Windows.Forms.ToolStripButton> now allows focus when contained within a <xref:System.Windows.Forms.ToolStripPanel> that has the <xref:System.Windows.Forms.ToolStripPanel.TabStop> property set to `true`.</span></span>

| <span data-ttu-id="c01cc-144">name</span><span class="sxs-lookup"><span data-stu-id="c01cc-144">Name</span></span>    | <span data-ttu-id="c01cc-145">Значение</span><span class="sxs-lookup"><span data-stu-id="c01cc-145">Value</span></span>       |
|:--------|:------------|
| <span data-ttu-id="c01cc-146">Область</span><span class="sxs-lookup"><span data-stu-id="c01cc-146">Scope</span></span>   | <span data-ttu-id="c01cc-147">Значительно</span><span class="sxs-lookup"><span data-stu-id="c01cc-147">Major</span></span>       |
| <span data-ttu-id="c01cc-148">Version</span><span class="sxs-lookup"><span data-stu-id="c01cc-148">Version</span></span> | <span data-ttu-id="c01cc-149">4.7.2</span><span class="sxs-lookup"><span data-stu-id="c01cc-149">4.7.2</span></span>       |
| <span data-ttu-id="c01cc-150">Type</span><span class="sxs-lookup"><span data-stu-id="c01cc-150">Type</span></span>    | <span data-ttu-id="c01cc-151">Изменение целевой платформы</span><span class="sxs-lookup"><span data-stu-id="c01cc-151">Retargeting</span></span> |
