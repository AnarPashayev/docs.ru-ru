---
ms.openlocfilehash: 4a0f866bc11a06ea6fcd4ab3a8320bbb6ffa5d91
ms.sourcegitcommit: e02d17b2cf9c1258dadda4810a5e6072a0089aee
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/01/2020
ms.locfileid: "85621192"
---
### <a name="improved-wcf-chain-trust-certificate-validation-for-nettcp-certificate-authentication"></a>Улучшенная проверка цепочки сертификатов WCF для проверки подлинности сертификатов в Net.Tcp

#### <a name="details"></a>Подробнее

В .NET Framework 4.7.2 улучшена проверка цепочки сертификатов при использовании проверки подлинности сертификатов с защитой транспорта в WCF. В связи с этим усовершенствованием сертификаты клиента, которые используются для проверки подлинности на сервере, необходимо настроить для проверки подлинности клиента.  Аналогичным образом сертификаты сервера, которые используются для проверки подлинности сервера, необходимо настроить для проверки подлинности сервера. В результате этого изменения проверка цепочки сертификатов завершается ошибкой, если корневой сертификат отключен. Это же изменение вносилось в .NET Framework 3.5 и более поздних версий с помощью свертки безопасности Windows. Дополнительные сведения можно найти [здесь](https://support.microsoft.com/help/4055269/security-only-update-for-net-framework-3-5-1-4-5-2-4-6-4-6-1-4-6-2-4-7). Это изменение включено по умолчанию. Его можно отключить с помощью параметра конфигурации.

#### <a name="suggestion"></a>Предложение

<ul><li>Проверьте, есть ли у сертификатов сервера и клиента необходимые OID EKU. Если нет, обновите сертификаты.</li><li>Возможно, корневой сертификат является недопустимым. В этом случае обновите корневой сертификат.</li><li>Как отказаться от этого изменения? Если не удается обновить сертификат, можно временно обойти критическое изменение, используя следующий параметр конфигурации. Но при отказе от этого изменения ваша система будет уязвима для проблем с безопасностью.</li></ul><pre><code class="lang-xml">&lt;appSettings&gt;&#13;&#10;&lt;add key=&quot;wcf:useLegacyCertificateUsagePolicy&quot; value=&quot;true&quot; /&gt;&#13;&#10;&lt;/appSettings&gt;&#13;&#10;</code></pre>

| name    | Значение       |
|:--------|:------------|
| Область   |Дополнительный номер|
|Version|4.7.2|
|Type|Среда выполнения|
